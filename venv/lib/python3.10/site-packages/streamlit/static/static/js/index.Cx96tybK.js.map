{"version":3,"mappings":";gsCAGO,IAAIA,GAAmBC,EAAgB,WAAC,SAAUC,EAAOC,EAAK,CACnE,IAAIC,EAAQ,CACV,KAAQ,eACR,MAAS,4BACb,EACE,OAAoBC,EAAmB,cAACC,GAAiBC,GAAS,CAChE,UAAWH,EACX,kBAAmB,SACnB,YAAa,WACd,EAAEF,EAAO,CACR,IAAKC,CACT,CAAG,EAAgBE,EAAmB,cAAC,OAAQ,CAC3C,KAAM,OACN,EAAG,iBACP,CAAG,EAAgBA,EAAmB,cAAC,OAAQ,CAC3C,EAAG,qCACJ,EAAC,CACJ,CAAC,EACDL,GAAI,YAAc,MClBX,IAAIQ,GAAsBP,EAAgB,WAAC,SAAUC,EAAOC,EAAK,CACtE,IAAIC,EAAQ,CACV,KAAQ,eACR,MAAS,4BACb,EACE,OAAoBC,EAAmB,cAACC,GAAiBC,GAAS,CAChE,UAAWH,EACX,kBAAmB,SACnB,YAAa,WACd,EAAEF,EAAO,CACR,IAAKC,CACT,CAAG,EAAgBE,EAAmB,cAAC,OAAQ,CAC3C,KAAM,OACN,EAAG,iBACP,CAAG,EAAgBA,EAAmB,cAAC,OAAQ,CAC3C,EAAG,wMACJ,EAAC,CACJ,CAAC,EACDG,GAAO,YAAc,SClBrB,SAASC,GAAMC,EAAU,yBAA0B,CAC/C,MAAM,IAAI,MAAMA,CAAO,CAC3B,CACO,SAASC,GAAOC,EAAMF,EAAU,mBAAoB,CACvD,GAAI,CAAAE,EAEJ,OAAOH,GAAMC,CAAO,CACxB,CACO,SAASG,GAAYC,EAAQC,EAAK,CACrC,OAAON,GAAMM,GAAO,iBAAiB,CACzC,CACO,SAASC,GAAMC,EAAIC,EAAc,CACpC,GAAI,CACA,OAAOD,EAAE,CACZ,MACK,CACF,OAAOC,CACV,CACL,CAIA,MAAMC,GAAM,OAAO,UAAU,eAEtB,SAASC,GAAUC,EAAKC,EAAK,CAChC,IAAIC,EAAMC,EACV,GAAIH,IAAQC,EACR,MAAO,GAEX,GAAID,GAAOC,IAAQC,EAAOF,EAAI,eAAiBC,EAAI,YAAa,CAC5D,GAAIC,IAAS,KACT,OAAOF,EAAI,QAAO,IAAOC,EAAI,QAAO,EACxC,GAAIC,IAAS,OACT,OAAOF,EAAI,SAAQ,IAAOC,EAAI,SAAQ,EAC1C,GAAIC,IAAS,MAAO,CAChB,IAAKC,EAAMH,EAAI,UAAYC,EAAI,OAC3B,KAAOE,KAASJ,GAAUC,EAAIG,CAAG,EAAGF,EAAIE,CAAG,CAAC,GACxC,CAER,OAAOA,IAAQ,EAClB,CAED,GAAI,CAACD,GAAQ,OAAOF,GAAQ,SAAU,CAClCG,EAAM,EAEN,IAAKD,KAAQF,EAGT,GAFIF,GAAI,KAAKE,EAAKE,CAAI,GAAK,EAAEC,GAAO,CAACL,GAAI,KAAKG,EAAKC,CAAI,GAEnD,EAAEA,KAAQD,IAAQ,CAACF,GAAUC,EAAIE,CAAI,EAAGD,EAAIC,CAAI,CAAC,EACjD,MAAO,GAEf,OAAO,OAAO,KAAKD,CAAG,EAAE,SAAWE,CACtC,CACJ,CACD,OAAOH,IAAQA,GAAOC,IAAQA,CAClC,CCzDA,IAAIG,GAAc,OAAO,UAGrBC,GAAiBD,GAAY,eAUjC,SAASE,GAAQC,EAAQC,EAAK,CAC5B,OAAOD,GAAU,MAAQF,GAAe,KAAKE,EAAQC,CAAG,CAC1D,CAEA,IAAAC,GAAiBH,GClBbA,GAAUI,GACVC,GAAUC,GA6Bd,SAASd,GAAIS,EAAQM,EAAM,CACzB,OAAON,GAAU,MAAQI,GAAQJ,EAAQM,EAAMP,EAAO,CACxD,CAEA,IAAAQ,GAAiBhB,mBC/BJiB,GAAe,KAEfC,GAAuB,OAE7B,IAAIC,GACV,SAAUA,EAAc,CACrBA,EAAa,IAAS,MACtBA,EAAa,KAAU,OACvBA,EAAa,MAAW,QACxBA,EAAa,MAAW,SACxBA,EAAa,OAAY,SACzBA,EAAa,OAAY,SACzBA,EAAa,QAAa,UAC1BA,EAAa,QAAa,UAC1BA,EAAa,SAAc,WAC3BA,EAAa,UAAe,YAC5BA,EAAa,UAAe,YAC5BA,EAAa,OAAY,QAC7B,GAAGA,IAAiBA,EAAe,CAAE,EAAC,EAE/B,IAAIC,IACV,SAAUA,EAAgB,CACvBA,EAAe,YAAiB,cAChCA,EAAe,WAAgB,aAC/BA,EAAe,aAAkB,eACjCA,EAAe,aAAkB,eACjCA,EAAe,cAAmB,gBAClCA,EAAe,eAAoB,iBACnCA,EAAe,eAAoB,iBACnCA,EAAe,YAAiB,cAChCA,EAAe,YAAiB,cAChCA,EAAe,UAAe,YAC9BA,EAAe,YAAiB,cAChCA,EAAe,eAAoB,iBACnCA,EAAe,WAAgB,aAC/BA,EAAe,WAAgB,aAC/BA,EAAe,YAAiB,cAChCA,EAAe,gBAAqB,kBACpCA,EAAe,iBAAsB,mBACrCA,EAAe,kBAAuB,oBACtCA,EAAe,aAAkB,eACjCA,EAAe,mBAAwB,qBACvCA,EAAe,WAAgB,aAC/BA,EAAe,aAAkB,eACjCA,EAAe,kBAAuB,oBACtCA,EAAe,kBAAuB,oBACtCA,EAAe,kBAAuB,oBACtCA,EAAe,YAAiB,cAChCA,EAAe,gBAAqB,kBACpCA,EAAe,uBAA4B,wBAC/C,GAAGA,KAAmBA,GAAiB,CAAE,EAAC,EAEnC,IAAIC,IACV,SAAUA,EAAoB,CAC3BA,EAAmB,SAAc,WACjCA,EAAmB,KAAU,MACjC,GAAGA,KAAuBA,GAAqB,CAAE,EAAC,EAE3C,SAASC,GAAkBC,EAAG,CACjC,MAAO,UAAWA,GAAK,OAAOA,EAAE,OAAU,QAC9C,CAEO,eAAeC,GAAkBC,EAAO,CAC3C,OAAI,OAAOA,GAAU,SACVA,EACJ,MAAMA,EAAK,CACtB,CAGO,SAASC,GAAmBC,EAAM,CACrC,MAAI,EAAAA,EAAK,OAASR,EAAa,SAC3BQ,EAAK,OAASR,EAAa,QAC3BQ,EAAK,OAASR,EAAa,OAC3BQ,EAAK,OAASR,EAAa,WAC3BQ,EAAK,OAASR,EAAa,UAKnC,CAiBO,SAASS,GAAgBD,EAAM,CAClC,OAAOA,EAAK,OAASE,GAAkB,QAAUF,EAAK,OAASE,GAAkB,MACrF,CAEO,SAASC,GAAgBH,EAAM,CAClC,GAAI,CAACD,GAAmBC,CAAI,GAAKA,EAAK,OAASR,EAAa,MACxD,MAAO,GACX,GAAIQ,EAAK,OAASR,EAAa,MAC3BQ,EAAK,OAASR,EAAa,QAC3BQ,EAAK,OAASR,EAAa,UAC3BQ,EAAK,OAASR,EAAa,KAC3BQ,EAAK,OAASR,EAAa,QAC3BQ,EAAK,OAASR,EAAa,QAC3B,OAAOQ,EAAK,WAAa,GAE7BjC,GAAYiC,EAAM,wCAAwC,CAC9D,CASO,SAASI,GAA6BC,EAAK,CAC9C,OAAOhC,GAAIgC,EAAK,QAAQ,CAC5B,CAGO,SAASC,GAAsBN,EAAM,CACxC,MAAO,EAAEA,EAAK,UAAY,GAC9B,CAEO,IAAIE,IACV,SAAUA,EAAmB,CAC1BA,EAAkB,OAAY,UAC9BA,EAAkB,OAAY,QAClC,GAAGA,KAAsBA,GAAoB,CAAE,EAAC,EAChD,SAASK,GAAYC,EAAO,CACxB,GAAIA,EAAM,SAAW,EACjB,MAAO,GAEX,MAAMC,EAAS,CAAC,GAAGD,CAAK,EAClBE,EAAQ,GACdD,EAAO,KAAK,SAAUE,EAAGC,EAAG,CACxB,OAAOD,EAAE,CAAC,EAAIC,EAAE,CAAC,CACzB,CAAK,EACDF,EAAM,KAAK,CAAC,GAAGD,EAAO,CAAC,CAAC,CAAC,EACzB,UAAWI,KAASJ,EAAO,MAAM,CAAC,EAAG,CACjC,MAAMK,EAAMJ,EAAMA,EAAM,OAAS,CAAC,EAC9BI,EAAI,CAAC,EAAID,EAAM,CAAC,EAChBH,EAAM,KAAK,CAAC,GAAGG,CAAK,CAAC,EAEhBC,EAAI,CAAC,EAAID,EAAM,CAAC,IACrBC,EAAI,CAAC,EAAID,EAAM,CAAC,EAEvB,CACD,OAAOH,CACX,CACA,IAAIK,GAEG,MAAMC,GAAN,MAAMA,EAAiB,CAE1B,YAAYC,EAAO,CADnBC,GAAA,cAEI,KAAK,MAAQD,CAChB,CAOD,OAAOE,EAAQ,CACX,GAAIA,IAAW,EACX,OAAO,KACX,MAAMC,EAAW,KAAK,MAAM,IAAIC,GAAK,CAACA,EAAE,CAAC,EAAIF,EAAQE,EAAE,CAAC,EAAIF,CAAM,CAAC,EACnE,OAAO,IAAIH,GAAiBI,CAAQ,CACvC,CACD,IAAIE,EAAW,CACX,MAAMC,EAAQ,OAAOD,GAAc,SAAW,CAACA,EAAWA,EAAY,CAAC,EAAIA,EACrEF,EAAWb,GAAY,CAAC,GAAG,KAAK,MAAOgB,CAAK,CAAC,EACnD,OAAO,IAAIP,GAAiBI,CAAQ,CACvC,CACD,OAAOE,EAAW,CACd,MAAML,EAAQ,CAAC,GAAG,KAAK,KAAK,EACtBO,EAAS,OAAOF,GAAc,SAAWA,EAAYA,EAAU,CAAC,EAChEG,EAAS,OAAOH,GAAc,SAAWA,EAAY,EAAIA,EAAU,CAAC,EAC1E,SAAW,CAACI,EAAGH,CAAK,IAAKN,EAAM,QAAO,EAAI,CACtC,KAAM,CAACU,EAAOC,CAAG,EAAIL,EAErB,GAAII,GAASF,GAAUD,GAAUI,EAAK,CAClC,MAAMC,EAAQ,GACVF,EAAQH,GACRK,EAAM,KAAK,CAACF,EAAOH,CAAM,CAAC,EAE1BC,EAASG,GACTC,EAAM,KAAK,CAACJ,EAAQG,CAAG,CAAC,EAE5BX,EAAM,OAAOS,EAAG,EAAG,GAAGG,CAAK,CAC9B,CACJ,CACD,OAAO,IAAIb,GAAiBC,CAAK,CACpC,CACD,OAAQ,CACJ,GAAI,KAAK,MAAM,SAAW,EAE1B,OAAO,KAAK,MAAM,CAAC,EAAE,CAAC,CACzB,CACD,MAAO,CACH,GAAI,KAAK,MAAM,SAAW,EAE1B,OAAO,KAAK,MAAM,MAAM,EAAE,EAAE,CAAC,EAAE,CAAC,EAAI,CACvC,CACD,SAASa,EAAO,CACZ,QAASJ,EAAI,EAAGA,EAAI,KAAK,MAAM,OAAQA,IAAK,CACxC,KAAM,CAACC,EAAOC,CAAG,EAAI,KAAK,MAAMF,CAAC,EACjC,GAAII,GAASH,GAASG,EAAQF,EAC1B,MAAO,EACd,CACD,MAAO,EACV,CACD,OAAOE,EAAO,CACV,QAAST,EAAIS,EAAM,CAAC,EAAGT,EAAIS,EAAM,CAAC,EAAGT,IACjC,GAAI,CAAC,KAAK,SAASA,CAAC,EAChB,MAAO,GAEf,MAAO,EACV,CACD,KAAKU,EAAW,CACZ,UAAWL,KAAK,KACZ,GAAIK,EAAUL,CAAC,EACX,MAAO,GAEf,MAAO,EACV,CACD,OAAOM,EAAO,CACV,GAAIA,IAAU,KACV,MAAO,GACX,GAAIA,EAAM,MAAM,SAAW,KAAK,MAAM,OAClC,MAAO,GACX,QAASN,EAAI,EAAGA,EAAI,KAAK,MAAM,OAAQA,IAAK,CACxC,MAAMO,EAAOD,EAAM,MAAMN,CAAC,EACpBQ,EAAQ,KAAK,MAAMR,CAAC,EAC1B,GAAIO,EAAK,CAAC,IAAMC,EAAM,CAAC,GAAKD,EAAK,CAAC,IAAMC,EAAM,CAAC,EAC3C,MAAO,EACd,CACD,MAAO,EACV,CAKD,SAAU,CACN,MAAMC,EAAS,GACf,SAAW,CAACR,EAAOC,CAAG,IAAK,KAAK,MAC5B,QAASP,EAAIM,EAAON,EAAIO,EAAKP,IACzBc,EAAO,KAAKd,CAAC,EAGrB,OAAOc,CACV,CACD,IAAI,QAAS,CACT,IAAIzD,EAAM,EACV,SAAW,CAACiD,EAAOC,CAAG,IAAK,KAAK,MAC5BlD,GAAOkD,EAAMD,EAEjB,OAAOjD,CACV,CACD,EAAE,OAAO,QAAQ,GAAI,CACjB,SAAW,CAACiD,EAAOC,CAAG,IAAK,KAAK,MAC5B,QAASP,EAAIM,EAAON,EAAIO,EAAKP,IACzB,MAAMA,CAGjB,CACL,EA7GIH,GALSF,GAKF,QAAQ,IACJD,KAA0BA,GAAwB,IAAIC,GAAiB,EAAE,IAEpFE,GARSF,GAQF,sBAAuBM,GACnBN,GAAiB,MAAK,EAAG,IAAIM,CAAS,GAT9C,IAAMc,GAANpB,GCpJP,IAAIqB,GAAK,UAAe,CAChB,MAAAC,EAAoB,MAAM,UAAU,MAAM,KAAK,SAAS,EAAE,OAAO,OAAO,EACxEC,EAAgB,GAChBC,EAAmB,GACPF,EAAA,QAASG,GAAQ,EACJA,EAAMA,EAAI,MAAM,GAAG,EAAI,IAC/B,QAASC,GAAc,CACtC,GAAAA,EAAU,WAAW,MAAM,EAAG,CAChC,KAAM,CAAG,CAAAC,CAAO,EAAID,EAAU,MAAM,GAAG,EACvCH,EAAcI,CAAO,EAAID,CAAA,MAEzBF,EAAiB,KAAKE,CAAS,CACjC,CACD,EACF,EACD,MAAMP,EAAS,GACf,UAAWQ,KAAWJ,EAChB,OAAO,UAAU,eAAe,KAAKA,EAAeI,CAAO,GACtDR,EAAA,KAAKI,EAAcI,CAAO,CAAC,EAG/B,OAAAR,EAAA,KAAK,GAAGK,CAAgB,EACxBL,EAAO,KAAK,GAAG,CACxB,EACIS,GAAaP,GCjCbQ,GAAaC,GAAOA,EAAG,gBAAkBA,EACzCC,GAAaC,GAAUjE,GAAQiE,EAAK,QAAQjE,CAAG,IAAM,GACrDkE,GAAO,CAAC5C,EAAK2C,IAAS,CACxB,MAAME,EAAM,GACL,mBAAK7C,CAAG,EAAE,OAAO0C,GAAUC,CAAI,CAAC,EAAE,QAASjE,GAAQ,CACpDmE,EAAAnE,CAAG,EAAIsB,EAAItB,CAAG,EACnB,EACMmE,CACT,EACA,SAASC,GAAYC,EAAMhG,EAAOiG,EAAU,CACpC,MAAAC,EAAgBL,GAAK7F,EAAOiG,CAAQ,EAC1C,GAAI,CAACD,EAAM,CACT,MAAMG,EAAmB,OAAOC,IAAc,WAAa,CAAE,QAASA,EAAc,EAAAA,GACpF,OAAO,KAAKF,CAAa,EAAE,QAASvE,GAAQ,CACrCwE,EAAiB,QAAQxE,CAAG,GAC/B,OAAOuE,EAAcvE,CAAG,CAC1B,CACD,CACH,CACO,OAAAuE,CACT,CACA,IAAIG,GAAgB,CAACC,EAAOC,IAAkB,CAU9C,EAEA,SAASC,GAAOC,EAAK,CAEnB,IAAIC,EAAc,GAOlB,OAAQC,GAAY,CAQZ,MAAAC,EAAS,CAAC5G,EAAOC,IAAQ,CAC7B,KAAM,CAAE,GAAI4G,EAAYJ,EAAK,MAAOnB,EAAYoB,CAAgB,EAAA1G,EAC1D8G,EAAkBH,EAAQ,YAAc,OAAS,EAAE,OAAOE,GAAc,UAAYA,EAAU,QAAQ,GAAG,IAAM,IAAM,CAACpB,GAAUoB,EAAU,CAAC,CAAC,GAAKF,EAAQ,UACzJT,EAAgBH,GAAYe,EAAiB9G,EAAO,CACxD,KACA,QACD,EACDkG,EAAc,IAAMjG,EACpBiG,EAAc,UAAYS,EAAQ,OAAS1B,GAAG0B,EAAQ,MAAOT,EAAc,WAAaZ,CAAS,EAAIL,GAAGiB,EAAc,WAAaZ,EAAWqB,EAAQ,KAAK,EACrJ,MAAE,KAAAI,CAAS,EAAAJ,EACjB,GAAII,EAAM,CACR,MAAMC,EAAQ,GACd,UAAWC,KAAQF,EAAM,CACjB,MAAAG,EAAWH,EAAKE,CAAI,EACpBlC,EAASmC,EAAS,CAAC,EACnBC,EAAOD,EAAS,CAAC,GAAK,GACtBZ,EAAQ,OAAOvB,GAAW,WAAaA,EAAO/E,CAAK,EAAI+E,EAC/CsB,GAAAC,EAAOK,EAAQ,IAAI,EACjCK,EAAM,KAAKC,CAAI,EAAE,EAAI,GAAGX,CAAK,GAAGa,CAAI,EACtC,CACM,MAAAC,EAAWlB,EAAc,OAAS,GAClCN,EAAO,OAAO,KAAKwB,CAAQ,EAC7BxB,EAAK,OAAS,GACXA,EAAA,QAASjE,GAAQ,CACdqF,EAAArF,CAAG,EAAIyF,EAASzF,CAAG,EAC1B,EAEHuE,EAAc,MAAQc,CACxB,CACI,OAAAP,EAAI,WAAaA,IAAQI,GAC3BX,EAAc,GAAKW,EACZQ,GAAM,cAAcZ,EAAKP,CAAa,GAExCmB,GAAM,cAAcR,EAAWX,CAAa,GAE/CoB,EAASD,GAAM,WAAaA,GAAM,WAAWT,CAAM,EAAK5G,GAAU,CACtE,MAAMuH,EAAO1B,GAAK7F,EAAO,CAAC,UAAU,CAAC,EAC9B,OAAA4G,EAAOW,EAAMvH,EAAM,QAAQ,GAEpC,OAAAsH,EAAO,YAAcX,EAAQ,KAC7BW,EAAO,UAAY,CACjB,UAAWX,EAAQ,OAASD,EAC5B,QAASD,CAAA,EAEJa,CAAA,CAEX,CACA,IAAIE,GAIChB,GCxGE,MAAMiB,GAAuCjB,GAAO,KAAK,EAAE,CAChE,KAAM,0BACN,MAAO,cACP,UAAW,EACb,CAAC,6ECLA,SAAUkB,EAAQC,EAAS,CAIxBA,EAAQC,EAAS/F,EAAkBE,EAAqB,CAQ3D,GAAE8F,GAAM,SAAUD,EAASE,EAAQC,EAAY,CAG9C,OAAO,eAAeH,EAAS,aAAc,CAC3C,MAAO,EACX,CAAG,EACDA,EAAQ,6BAA+BI,EAEvC,IAAIC,EAAUC,EAAuBJ,CAAM,EAEvCK,EAAcD,EAAuBH,CAAU,EAEnD,SAASG,EAAuBjF,EAAK,CACnC,OAAOA,GAAOA,EAAI,WAAaA,EAAM,CACnC,QAASA,CACf,CACG,CAED,IAAI5C,EAAW,OAAO,QAAU,SAAU+H,EAAQ,CAChD,QAAS9D,EAAI,EAAGA,EAAI,UAAU,OAAQA,IAAK,CACzC,IAAI+D,EAAS,UAAU/D,CAAC,EAExB,QAAS3C,KAAO0G,EACV,OAAO,UAAU,eAAe,KAAKA,EAAQ1G,CAAG,IAClDyG,EAAOzG,CAAG,EAAI0G,EAAO1G,CAAG,EAG7B,CAED,OAAOyG,CACX,EAEE,SAASE,EAAyBrF,EAAK2C,EAAM,CAC3C,IAAIwC,EAAS,GAEb,QAAS9D,KAAKrB,EACR2C,EAAK,QAAQtB,CAAC,GAAK,GAClB,OAAO,UAAU,eAAe,KAAKrB,EAAKqB,CAAC,IAChD8D,EAAO9D,CAAC,EAAIrB,EAAIqB,CAAC,GAGnB,OAAO8D,CACR,CAED,SAASG,EAAgBC,EAAUC,EAAa,CAC9C,GAAI,EAAED,aAAoBC,GACxB,MAAM,IAAI,UAAU,mCAAmC,CAE1D,CAED,IAAIC,EAAe,UAAY,CAC7B,SAASC,EAAiBP,EAAQpI,EAAO,CACvC,QAASsE,EAAI,EAAGA,EAAItE,EAAM,OAAQsE,IAAK,CACrC,IAAIsE,EAAa5I,EAAMsE,CAAC,EACxBsE,EAAW,WAAaA,EAAW,YAAc,GACjDA,EAAW,aAAe,GACtB,UAAWA,IAAYA,EAAW,SAAW,IACjD,OAAO,eAAeR,EAAQQ,EAAW,IAAKA,CAAU,CACzD,CACF,CAED,OAAO,SAAUH,EAAaI,EAAYC,EAAa,CACrD,OAAID,GAAYF,EAAiBF,EAAY,UAAWI,CAAU,EAC9DC,GAAaH,EAAiBF,EAAaK,CAAW,EACnDL,CACb,CACA,IAEE,SAASM,EAA2BC,EAAMC,EAAM,CAC9C,GAAI,CAACD,EACH,MAAM,IAAI,eAAe,2DAA2D,EAGtF,OAAOC,IAAS,OAAOA,GAAS,UAAY,OAAOA,GAAS,YAAcA,EAAOD,CAClF,CAED,SAASE,EAAUC,EAAUC,EAAY,CACvC,GAAI,OAAOA,GAAe,YAAcA,IAAe,KACrD,MAAM,IAAI,UAAU,2DAA6D,OAAOA,CAAU,EAGpGD,EAAS,UAAY,OAAO,OAAOC,GAAcA,EAAW,UAAW,CACrE,YAAa,CACX,MAAOD,EACP,WAAY,GACZ,SAAU,GACV,aAAc,EACf,CACP,CAAK,EACGC,IAAY,OAAO,eAAiB,OAAO,eAAeD,EAAUC,CAAU,EAAID,EAAS,UAAYC,EAC5G,CAED,IAAIC,EAAwB,GAC5B,SAASrB,EAA6BsB,EAAY,CAChDD,EAAwBC,CACzB,CAED,GAAI,CACF,iBAAiB,OAAQ,KAAM,OAAO,eAAe,CAAE,EAAE,UAAW,CAAE,IAAK,UAAe,CACtFtB,EAA6B,EAAI,CAClC,EAAE,CAAC,CACV,MAAc,CAAE,CAEd,SAASuB,GAA0B,CACjC,IAAI5C,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAE,QAAS,EAAI,EAEjG,OAAO0C,EAAwB1C,EAAUA,EAAQ,OAClD,CAOD,SAAS6C,EAAYC,EAAO,CAC1B,GAAI,YAAaA,EAAO,CACtB,IAAIC,EAAkBD,EAAM,QAAQ,CAAC,EACjCE,EAAQD,EAAgB,MACxBE,EAAQF,EAAgB,MAE5B,MAAO,CAAE,EAAGC,EAAO,EAAGC,CAAK,CAC5B,CAED,IAAIC,EAAUJ,EAAM,QAChBK,EAAUL,EAAM,QAEpB,MAAO,CAAEI,EAAY,EAAGC,CAAO,CAChC,CAED,IAAIC,EAAa,SAAUC,EAAY,CACrCd,EAAUa,EAAYC,CAAU,EAEhC,SAASD,GAAa,CACpB,IAAIE,EAEJ1B,EAAgB,KAAMwB,CAAU,EAEhC,QAASG,EAAO,UAAU,OAAQC,EAAO,MAAMD,CAAI,EAAGE,EAAO,EAAGA,EAAOF,EAAME,IAC3ED,EAAKC,CAAI,EAAI,UAAUA,CAAI,EAG7B,IAAIC,EAAQtB,EAA2B,MAAOkB,EAAOF,EAAW,WAAa,OAAO,eAAeA,CAAU,GAAG,KAAK,MAAME,EAAM,CAAC,IAAI,EAAE,OAAOE,CAAI,CAAC,CAAC,EAErJ,OAAAE,EAAM,kBAAoBA,EAAM,kBAAkB,KAAKA,CAAK,EAC5DA,EAAM,iBAAmBA,EAAM,iBAAiB,KAAKA,CAAK,EAC1DA,EAAM,gBAAkBA,EAAM,gBAAgB,KAAKA,CAAK,EAExDA,EAAM,aAAeA,EAAM,aAAa,KAAKA,CAAK,EAClDA,EAAM,aAAeA,EAAM,aAAa,KAAKA,CAAK,EAClDA,EAAM,WAAaA,EAAM,WAAW,KAAKA,CAAK,EAE9CA,EAAM,cAAgBA,EAAM,cAAc,KAAKA,CAAK,EAC7CA,CACR,CAED,OAAA3B,EAAaqB,EAAY,CAAC,CACxB,IAAK,oBACL,MAAO,UAA6B,CAC9B,KAAK,QACP,KAAK,OAAO,iBAAiB,YAAa,KAAK,iBAAkBR,EAAwB,CACvF,QAAS,GACT,QAAS,EACV,EAAC,CAEL,CACP,EAAO,CACD,IAAK,uBACL,MAAO,UAAgC,CACjC,KAAK,QACP,KAAK,OAAO,oBAAoB,YAAa,KAAK,iBAAkBA,EAAwB,CAC1F,QAAS,GACT,QAAS,EACV,EAAC,CAEL,CACP,EAAO,CACD,IAAK,eACL,MAAO,SAAsBE,EAAO,CAC7B,KAAK,MAAM,mBAIhB,KAAK,UAAY,GAEjB,SAAS,iBAAiB,UAAW,KAAK,UAAU,EACpD,SAAS,iBAAiB,YAAa,KAAK,YAAY,EAExD,KAAK,kBAAkBA,CAAK,EAC7B,CACP,EAAO,CACD,IAAK,eACL,MAAO,SAAsBA,EAAO,CAC7B,KAAK,WAIV,KAAK,iBAAiBA,CAAK,CAC5B,CACP,EAAO,CACD,IAAK,aACL,MAAO,SAAoBA,EAAO,CAChC,KAAK,UAAY,GAEjB,SAAS,oBAAoB,UAAW,KAAK,UAAU,EACvD,SAAS,oBAAoB,YAAa,KAAK,YAAY,EAE3D,KAAK,gBAAgBA,CAAK,CAC3B,CACP,EAAO,CACD,IAAK,oBACL,MAAO,SAA2BA,EAAO,CACvC,IAAIa,EAAed,EAAYC,CAAK,EAChCxF,EAAIqG,EAAa,EACjBC,EAAID,EAAa,EAErB,KAAK,UAAY,CAAE,EAAGrG,EAAG,EAAGsG,GAC5B,KAAK,MAAM,aAAad,CAAK,CAC9B,CACP,EAAO,CACD,IAAK,mBACL,MAAO,SAA0BA,EAAO,CACtC,GAAK,KAAK,UAIV,KAAIe,EAAgBhB,EAAYC,CAAK,EACjCxF,EAAIuG,EAAc,EAClBD,EAAIC,EAAc,EAElBC,EAASxG,EAAI,KAAK,UAAU,EAC5ByG,EAASH,EAAI,KAAK,UAAU,EAChC,KAAK,OAAS,GAId,IAAII,EAAuB,KAAK,MAAM,YAAY,CAChD,EAAGF,EACH,EAAGC,CACJ,EAAEjB,CAAK,EAEJkB,GAAwBlB,EAAM,YAChCA,EAAM,eAAc,EAGtB,KAAK,aAAe,CAAE,OAAQgB,EAAQ,OAAQC,GAC/C,CACP,EAAO,CACD,IAAK,kBACL,MAAO,SAAyBjB,EAAO,CACrC,KAAK,MAAM,WAAWA,CAAK,EAE3B,IAAImB,EAAY,KAAK,MAAM,UAGvB,KAAK,QAAU,KAAK,eAClB,KAAK,aAAa,OAAS,CAACA,EAC9B,KAAK,MAAM,YAAY,EAAGnB,CAAK,EACtB,KAAK,aAAa,OAASmB,GACpC,KAAK,MAAM,aAAa,EAAGnB,CAAK,EAE9B,KAAK,aAAa,OAAS,CAACmB,EAC9B,KAAK,MAAM,UAAU,EAAGnB,CAAK,EACpB,KAAK,aAAa,OAASmB,GACpC,KAAK,MAAM,YAAY,EAAGnB,CAAK,GAInC,KAAK,UAAY,KACjB,KAAK,OAAS,GACd,KAAK,aAAe,IACrB,CACP,EAAO,CACD,IAAK,gBACL,MAAO,SAAuBoB,EAAM,CAClC,KAAK,OAASA,EACd,KAAK,MAAM,SAASA,CAAI,CACzB,CACP,EAAO,CACD,IAAK,SACL,MAAO,UAAkB,CACnB,IAAAC,EAAS,KAAK,MACJA,EAAO,QAC7B,IAAYxF,EAAYwF,EAAO,UACnB9D,EAAQ8D,EAAO,MACfC,EAAWD,EAAO,SACCA,EAAO,iBACdA,EAAO,UACLA,EAAO,YACPA,EAAO,YACNA,EAAO,aACPA,EAAO,aACRA,EAAO,YACRA,EAAO,WACTA,EAAO,SACNA,EAAO,UAC/B,IAAY9K,EAAQsI,EAAyBwC,EAAQ,CAAC,UAAW,YAAa,QAAS,WAAY,mBAAoB,YAAa,cAAe,cAAe,eAAgB,eAAgB,cAAe,aAAc,WAAY,WAAW,CAAC,EAE/O,OAAO7C,EAAQ,QAAQ,cACrB,KAAK,MAAM,QACX5H,EAAS,CACP,IAAK,KAAK,cACV,YAAa,KAAK,aAClB,aAAc,KAAK,kBACnB,WAAY,KAAK,gBACjB,UAAWiF,EACX,MAAO0B,CACR,EAAEhH,CAAK,EACR+K,CACV,CACO,CACF,EAAC,EAEKhB,CACX,EAAIjC,EAAO,SAAS,EAElBiC,EAAW,YAAc,aACzBA,EAAW,UAAY,CACrB,QAAS5B,EAAY,QAAQ,OAC7B,UAAWA,EAAY,QAAQ,OAC/B,MAAOA,EAAY,QAAQ,OAC3B,SAAUA,EAAY,QAAQ,KAC9B,iBAAkBA,EAAY,QAAQ,KACtC,UAAWA,EAAY,QAAQ,KAC/B,YAAaA,EAAY,QAAQ,KACjC,YAAaA,EAAY,QAAQ,KACjC,aAAcA,EAAY,QAAQ,KAClC,aAAcA,EAAY,QAAQ,KAClC,YAAaA,EAAY,QAAQ,KACjC,WAAYA,EAAY,QAAQ,KAChC,SAAUA,EAAY,QAAQ,KAC9B,UAAWA,EAAY,QAAQ,OAAO,UAC1C,EACE4B,EAAW,aAAe,CACxB,QAAS,MACT,iBAAkB,GAClB,UAAW,UAAqB,CAAE,EAClC,YAAa,UAAuB,CAAE,EACtC,YAAa,UAAuB,CAAE,EACtC,aAAc,UAAwB,CAAE,EACxC,aAAc,UAAwB,CAAE,EACxC,YAAa,UAAuB,CAAE,EACtC,WAAY,UAAsB,CAAE,EACpC,SAAU,UAAoB,CAAE,EAEhC,UAAW,CACf,EACEnC,EAAQ,QAAUmC,CACpB,CAAC,yBCvWA,SAAUrC,EAAQC,EAAS,CAIxBA,EAAQC,EAAS/F,GAAA,CAAwB,CAQ7C,GAAGgG,GAAM,SAAUD,EAASoD,EAAa,CAGvC,OAAO,eAAepD,EAAS,aAAc,CAC3C,MAAO,EACX,CAAG,EAED,IAAIqD,EAAe/C,EAAuB8C,CAAW,EAErD,SAAS9C,EAAuBjF,EAAK,CACnC,OAAOA,GAAOA,EAAI,WAAaA,EAAM,CACnC,QAASA,CACf,CACG,CAED2E,EAAQ,QAAUqD,EAAa,OACjC,CAAC,kBC1BD,OAAO,eAAeC,GAAS,aAAc,CAC3C,MAAO,EACT,CAAC,EACcA,GAAA,QAAG,OAElB,IAAIC,GAAcjD,GAAuBrG,EAAqB,EAE9D,SAASqG,GAAuBjF,EAAK,CAAE,OAAOA,GAAOA,EAAI,WAAaA,EAAM,CAAE,QAASA,CAAG,CAAK,CAE/F,SAASmI,GAAgBnI,EAAKtB,EAAK2E,EAAO,CAAE,OAAI3E,KAAOsB,EAAO,OAAO,eAAeA,EAAKtB,EAAK,CAAE,MAAO2E,EAAO,WAAY,GAAM,aAAc,GAAM,SAAU,EAAM,GAAYrD,EAAItB,CAAG,EAAI2E,EAAgBrD,CAAM,CAEjN,IAAIoI,GAAW,CACb,KAAM,SAAcC,EAAiB,CACnC,SAAWH,GAAY,SAASC,GAAgB,CAC9C,gBAAiB,EAClB,EAAEE,GAAmB,GAAI,CAAC,CAACA,CAAe,CAAC,CAC7C,EACD,SAAU,SAAkBC,EAAU,CACpC,SAAWJ,GAAY,SAAS,CAC9B,SAAU,GACV,kBAAmBI,CACzB,CAAK,CACF,EACD,QAAS,SAAiBA,EAAUC,EAAM,CACxC,SAAWL,GAAY,SAAS,CAC9B,iBAAkB,CAACI,EACnB,iBAAkBA,EAClB,kBAAmBC,IAAS,aAC5B,gBAAiBA,IAAS,YAChC,CAAK,CACF,EACD,OAAQ,SAAgBD,EAAUE,EAAW,CAC3C,SAAWN,GAAY,SAAS,CAC9B,OAAQ,CAACI,EACT,OAAQA,EACR,SAAU,CAACE,CACjB,CAAK,CACF,EACD,KAAM,SAAcF,EAAUG,EAAUC,EAAU,CAChD,SAAWR,GAAY,SAAS,CAC9B,MAAO,CAACI,EACR,MAAOA,EACP,SAAUG,EACV,SAAUC,CAChB,CAAK,CACF,EACD,WAAY,SAAoBC,EAAU,CACxC,SAAWT,GAAY,SAAS,CAC9B,6BAA8B,GAC9B,mBAAoBS,CAC1B,CAAK,CACF,EACD,WAAY,SAAoBA,EAAU,CACxC,SAAWT,GAAY,SAAS,CAC9B,6BAA8B,GAC9B,mBAAoBS,CAC1B,CAAK,CACF,EACD,IAAK,SAAaF,EAAU,CAC1B,SAAWP,GAAY,SAAS,CAC9B,IAAK,GACL,SAAUO,CAChB,CAAK,CACF,CACH,EACAR,GAAA,QAAkBG,mBCjElB,OAAO,eAAeQ,GAAS,aAAc,CAC3C,MAAO,EACT,CAAC,EACiBA,GAAA,WAAG,OAErB,IAAIC,GAAa,SAAoBC,EAAI,CACvC,IAAIC,EAAQD,EAAG,YACX/E,EAAQ,iBAAiB+E,CAAE,EAC/B,OAAAC,GAAS,SAAShF,EAAM,UAAU,EAAI,SAASA,EAAM,WAAW,EACzDgF,CACT,EAEAH,GAAA,WAAqBC,aCZrB,OAAO,eAAeG,GAAS,aAAc,CAC3C,MAAO,EACT,CAAC,EACcA,GAAA,QAAG,OAElB,IAAIZ,GAAW,SAAkBa,EAAUC,EAAQX,EAAM,CACvD,IAAIY,EAAkBF,IAAa,EAAIA,EAAWA,EAAWC,EACzDE,EAAcb,IAAS,aAAe,CAACY,EAAiB,EAAG,CAAC,EAAI,CAAC,EAAGA,EAAiB,CAAC,EACtFE,EAAiB,cACjBC,EAAqB,IAAMF,EAAY,KAAK,GAAG,EAAI,IACvD,OAAOC,EAAiBC,CAC1B,EAEAN,GAAA,QAAkBZ,aCblB,OAAO,eAAemB,GAAS,aAAc,CAC3C,MAAO,EACT,CAAC,EACcA,GAAA,QAAG,OAElB,IAAInB,GAAW,UAAoB,CACjC,OAAO,MACT,EAEAmB,GAAA,QAAkBnB,GCTlB,OAAO,eAAeoB,GAAS,aAAc,CAC3C,MAAO,EACT,CAAC,EACcA,GAAA,QAAG,OAElB,IAAI3E,GAAS4E,GAAwB7K,CAAgB,EAEjD8K,GAAczE,GAAuBnG,EAAwB,EAE7D6K,GAAcC,GAEdC,GAAgB5E,GAAuB6E,EAA0B,EAEjEC,GAAkB9E,GAAuB+E,EAA2B,EAEpEC,GAAUhF,GAAuBiF,EAA0B,EAE/D,SAASjF,GAAuBjF,EAAK,CAAE,OAAOA,GAAOA,EAAI,WAAaA,EAAM,CAAE,QAASA,CAAG,CAAK,CAE/F,SAASmK,IAA2B,CAAE,GAAI,OAAO,SAAY,WAAY,OAAO,KAAM,IAAIC,EAAQ,IAAI,QAAWD,UAA2B,UAAoC,CAAE,OAAOC,GAAiBA,CAAQ,CAElN,SAASX,GAAwBzJ,EAAK,CAAE,GAAIA,GAAOA,EAAI,WAAc,OAAOA,EAAO,GAAIA,IAAQ,MAAQqK,GAAQrK,CAAG,IAAM,UAAY,OAAOA,GAAQ,WAAc,MAAO,CAAE,QAASA,GAAS,IAAIoK,EAAQD,GAA0B,EAAE,GAAIC,GAASA,EAAM,IAAIpK,CAAG,EAAK,OAAOoK,EAAM,IAAIpK,CAAG,EAAK,IAAIsK,EAAS,GAAQC,EAAwB,OAAO,gBAAkB,OAAO,yBAA0B,QAAS7L,KAAOsB,EAAO,GAAI,OAAO,UAAU,eAAe,KAAKA,EAAKtB,CAAG,EAAG,CAAE,IAAI8L,EAAOD,EAAwB,OAAO,yBAAyBvK,EAAKtB,CAAG,EAAI,KAAU8L,IAASA,EAAK,KAAOA,EAAK,KAAQ,OAAO,eAAeF,EAAQ5L,EAAK8L,CAAI,EAAYF,EAAO5L,CAAG,EAAIsB,EAAItB,CAAG,CAAI,CAAK,OAAA4L,EAAO,QAAUtK,EAASoK,GAASA,EAAM,IAAIpK,EAAKsK,CAAM,EAAYA,CAAS,CAEzuB,SAASD,GAAQrK,EAAK,CAAE,0BAA2B,OAAI,OAAO,QAAW,YAAc,OAAO,OAAO,UAAa,SAAYqK,GAAU,SAAiBrK,EAAK,CAAE,OAAO,OAAOA,CAAI,EAAaqK,GAAU,SAAiBrK,EAAK,CAAE,OAAOA,GAAO,OAAO,QAAW,YAAcA,EAAI,cAAgB,QAAUA,IAAQ,OAAO,UAAY,SAAW,OAAOA,CAAI,EAAaqK,GAAQrK,CAAG,CAAI,CAE1X,SAAS5C,IAAW,CAAEA,UAAW,OAAO,QAAU,SAAU+H,EAAQ,CAAE,QAAS9D,EAAI,EAAGA,EAAI,UAAU,OAAQA,IAAK,CAAE,IAAI+D,EAAS,UAAU/D,CAAC,EAAG,QAAS3C,KAAO0G,EAAc,OAAO,UAAU,eAAe,KAAKA,EAAQ1G,CAAG,IAAKyG,EAAOzG,CAAG,EAAI0G,EAAO1G,CAAG,EAAQ,CAAC,OAAOyG,GAAkB/H,GAAS,MAAM,KAAM,SAAS,CAAI,CAE7T,SAASkI,GAAgBC,EAAUC,EAAa,CAAE,GAAI,EAAED,aAAoBC,GAAgB,MAAM,IAAI,UAAU,mCAAmC,CAAM,CAEzJ,SAASiF,GAAkBtF,EAAQpI,EAAO,CAAE,QAASsE,EAAI,EAAGA,EAAItE,EAAM,OAAQsE,IAAK,CAAE,IAAIsE,EAAa5I,EAAMsE,CAAC,EAAGsE,EAAW,WAAaA,EAAW,YAAc,GAAOA,EAAW,aAAe,GAAU,UAAWA,IAAYA,EAAW,SAAW,IAAM,OAAO,eAAeR,EAAQQ,EAAW,IAAKA,CAAU,EAAM,CAE7T,SAASF,GAAaD,EAAaI,EAAYC,EAAa,CAAE,OAAID,GAAY6E,GAAkBjF,EAAY,UAAWI,CAAU,EAAwEJ,CAAc,CAEvN,SAASS,GAAUC,EAAUC,EAAY,CAAE,GAAI,OAAOA,GAAe,YAAcA,IAAe,KAAQ,MAAM,IAAI,UAAU,oDAAoD,EAAKD,EAAS,UAAY,OAAO,OAAOC,GAAcA,EAAW,UAAW,CAAE,YAAa,CAAE,MAAOD,EAAU,SAAU,GAAM,aAAc,EAAM,EAAE,EAAOC,GAAYuE,GAAgBxE,EAAUC,CAAU,CAAI,CAEjY,SAASuE,GAAgBC,EAAGC,EAAG,CAAEF,UAAkB,OAAO,gBAAkB,SAAyBC,EAAGC,EAAG,CAAE,OAAAD,EAAE,UAAYC,EAAUD,CAAE,EAAWD,GAAgBC,EAAGC,CAAC,CAAI,CAE1K,SAASC,GAAaC,EAAS,CAAE,IAAIC,EAA4BC,GAAyB,EAAI,OAAO,UAAgC,CAAE,IAAIC,EAAQC,GAAgBJ,CAAO,EAAGhJ,EAAQ,GAAIiJ,EAA2B,CAAE,IAAII,EAAYD,GAAgB,IAAI,EAAE,YAAapJ,EAAS,QAAQ,UAAUmJ,EAAO,UAAWE,CAAS,OAAYrJ,EAASmJ,EAAM,MAAM,KAAM,SAAS,EAAK,OAAOnF,GAA2B,KAAMhE,CAAM,CAAE,CAAK,CAEza,SAASgE,GAA2BC,EAAMC,EAAM,CAAE,OAAIA,IAASqE,GAAQrE,CAAI,IAAM,UAAY,OAAOA,GAAS,YAAsBA,EAAeoF,GAAuBrF,CAAI,CAAI,CAEjL,SAASqF,GAAuBrF,EAAM,CAAE,GAAIA,IAAS,OAAU,MAAM,IAAI,eAAe,2DAA2D,EAAK,OAAOA,CAAO,CAEtK,SAASiF,IAA4B,CAA0E,GAApE,OAAO,QAAY,KAAe,CAAC,QAAQ,WAA6B,QAAQ,UAAU,KAAM,MAAO,GAAO,GAAI,OAAO,OAAU,WAAY,MAAO,GAAM,GAAI,CAAE,YAAK,UAAU,SAAS,KAAK,QAAQ,UAAU,KAAM,GAAI,UAAY,CAAE,EAAC,EAAU,EAAO,MAAW,CAAE,MAAO,GAAU,CAEpU,SAASE,GAAgBP,EAAG,CAAEO,UAAkB,OAAO,eAAiB,OAAO,eAAiB,SAAyBP,EAAG,CAAE,OAAOA,EAAE,WAAa,OAAO,eAAeA,CAAC,CAAI,EAASO,GAAgBP,CAAC,CAAI,CAE7M,SAASxC,GAAgBnI,EAAKtB,EAAK2E,EAAO,CAAE,OAAI3E,KAAOsB,EAAO,OAAO,eAAeA,EAAKtB,EAAK,CAAE,MAAO2E,EAAO,WAAY,GAAM,aAAc,GAAM,SAAU,EAAM,GAAYrD,EAAItB,CAAG,EAAI2E,EAAgBrD,CAAM,CAEjN,IAAIqL,GAAkB,SAAyBC,EAAG,CAChD,OAAOA,EAAE,eAAe,KAAK,CAC/B,EAEIC,GAAsB,SAAUxE,EAAY,CAC9Cd,GAAUsF,EAAQxE,CAAU,EAE5B,IAAIyE,EAASX,GAAaU,CAAM,EAEhC,SAASA,EAAO1D,EAAQ,CACtB,IAAIT,EAEJ9B,UAAgB,KAAMiG,CAAM,EAE5BnE,EAAQoE,EAAO,KAAK,KAAM3D,CAAM,EAEhCM,GAAgBiD,GAAuBhE,CAAK,EAAG,kBAAmB,MAAM,EAExEe,GAAgBiD,GAAuBhE,CAAK,EAAG,eAAgB,MAAM,EAErEe,GAAgBiD,GAAuBhE,CAAK,EAAG,YAAa,MAAM,EAElEe,GAAgBiD,GAAuBhE,CAAK,EAAG,qBAAsB,SAAUQ,EAAM,CACnFR,EAAM,gBAAkBQ,CAC9B,CAAK,EAEDO,GAAgBiD,GAAuBhE,CAAK,EAAG,kBAAmB,SAAUQ,EAAM,CAChFR,EAAM,aAAeQ,CAC3B,CAAK,EAEDO,GAAgBiD,GAAuBhE,CAAK,EAAG,eAAgB,SAAUQ,EAAMnG,EAAO,CAC/E2F,EAAM,YACTA,EAAM,UAAY,IAGpBA,EAAM,UAAU3F,CAAK,EAAImG,CAC/B,CAAK,EAEDO,GAAgBiD,GAAuBhE,CAAK,EAAG,cAAe,UAAY,CACxE,GAAI,GAACA,EAAM,MAAM,UAAY,CAACA,EAAM,iBAAmB,CAACA,EAAM,WAI9D,KAAIqE,EAAQ5G,GAAO,SAAS,MAAMuC,EAAM,MAAM,QAAQ,EAElDsE,EAActE,EAAM,gBAAgB,YACpCuE,EAAWvE,EAAM,MAAM,WAAaA,EAAM,MAAM,cAAiBuC,GAAY,YAAYvC,EAAM,UAAU,CAAC,CAAC,EAC3GwE,EAAe,KAAK,MAAMF,EAAcC,CAAQ,EAChDE,EAAaD,EAAeH,EAC5BK,EAAeD,EAAaJ,EAAQG,EAAe,EAEvDxE,EAAM,SAAS,SAAU2E,EAAQhP,EAAO,CACtC,MAAO,CACL,SAAU4O,EACV,aAAcC,EACd,UAAWC,EAAazE,EAAM,aAAarK,EAAM,YAAY,EAAI,EACjE,aAAc+O,EACd,WAAYD,CACtB,CACA,CAAO,EACP,CAAK,EAED1D,GAAgBiD,GAAuBhE,CAAK,EAAG,kBAAmB,SAAU3F,EAAOuK,EAAMV,EAAG,CAC1F,GAAI,CAACD,GAAgBC,CAAC,GAAKA,EAAE,MAAQ,QAAS,CAC5C,IAAIW,EAAU7E,EAAM,MAAM,aAEtB,OAAO6E,GAAY,YACrBA,EAAQxK,EAAOuK,CAAI,CAEtB,CACP,CAAK,EAED7D,GAAgBiD,GAAuBhE,CAAK,EAAG,eAAgB,UAAY,CACzEA,EAAM,SAAS,CACb,QAAS,EACjB,CAAO,CACP,CAAK,EAEDe,GAAgBiD,GAAuBhE,CAAK,EAAG,aAAc,UAAY,CACvEA,EAAM,SAAS,CACb,QAAS,EACjB,CAAO,CACP,CAAK,EAEDe,GAAgBiD,GAAuBhE,CAAK,EAAG,cAAe,SAAU8E,EAAO,CAC7E,IAAI1E,EAAS0E,EAAM,EAEnB,GAAI,CAAC9E,EAAM,MAAM,UAAY,CAACA,EAAM,iBAAmB,CAACA,EAAM,MAAM,aAClE,MAAO,GAGT,IAAI+E,EAAe,EAEfC,EAAiBvH,GAAO,SAAS,MAAMuC,EAAM,MAAM,QAAQ,EAE3DiF,EAAkB,EAAEjF,EAAM,MAAM,UAAY,KAAOA,EAAM,MAAM,aAC/DkF,EAAe,KAAK,IAAIF,EAAiBhF,EAAM,MAAM,aAAc,CAAC,EACpEmF,EAAmB,CAACD,EAAe,IAAMlF,EAAM,MAAM,aAErDiF,IAAoBF,GAAgB3E,EAAS,IAC/CA,EAAS,GAIP6E,IAAoBE,GAAoB/E,EAAS,IACnDA,EAAS,GAGX,IAAIkE,EAActE,EAAM,gBAAgB,YACpC6B,EAAWoD,EAAkB,KAAOX,EAAclE,GAEtD,OAAIJ,EAAM,cACR,CAAC,kBAAmB,eAAgB,cAAe,aAAc,YAAa,aAAa,EAAE,QAAQ,SAAUoF,EAAM,CACnHpF,EAAM,aAAa,MAAMoF,CAAI,KAAQ3C,GAAc,SAASZ,EAAU,IAAK7B,EAAM,MAAM,IAAI,CACrG,CAAS,EAGI,EACb,CAAK,EAEDe,GAAgBiD,GAAuBhE,CAAK,EAAG,aAAc,SAAUqF,EAAW,CAChFrF,EAAM,OAAOA,EAAM,MAAM,WAAa,OAAOqF,GAAc,SAAWA,EAAY,EAAE,CAC1F,CAAK,EAEDtE,GAAgBiD,GAAuBhE,CAAK,EAAG,YAAa,SAAUqF,EAAW,CAC/ErF,EAAM,OAAOA,EAAM,MAAM,WAAa,OAAOqF,GAAc,SAAWA,EAAY,EAAE,CAC1F,CAAK,EAEDtE,GAAgBiD,GAAuBhE,CAAK,EAAG,SAAU,SAAU6B,EAAU,CAE3EA,EAAWA,EAAW,EAAI,EAAIA,EAE9BA,EAAWA,GAAY7B,EAAM,MAAM,aAAeA,EAAM,MAAM,aAAe6B,EAE7E7B,EAAM,SAAS,CACb,UAAW6B,CACnB,CAAO,CACP,CAAK,EAED7B,EAAM,MAAQ,CACZ,aAAcS,EAAO,aACrB,QAAS,GACT,WAAY,GACZ,UAAW,EACX,aAAc,EACd,aAAc,CACpB,EACWT,CACR,CAED3B,UAAa8F,EAAQ,CAAC,CACpB,IAAK,oBACL,MAAO,UAA6B,CAClC,KAAK,YAAW,CACjB,CACL,EAAK,CACD,IAAK,qBACL,MAAO,SAA4BmB,EAAW,CACxC,KAAK,MAAM,eAAiB,KAAK,MAAM,cACzC,KAAK,SAAS,CACZ,aAAc,KAAK,MAAM,aACzB,UAAW,KAAK,aAAa,KAAK,MAAM,YAAY,CAC9D,CAAS,EAGC,KAAK,MAAM,WAAaA,EAAU,UAMtC,KAAK,YAAW,CACjB,CACL,EAAK,CACD,IAAK,uBACL,MAAO,UAAgC,CACrC,KAAK,cAAa,CACnB,CACL,EAAK,CACD,IAAK,cACL,MAAO,UAAuB,IAGxBzC,GAAQ,WAAW,iBAAiB,SAAU,KAAK,WAAW,KAE9DA,GAAQ,WAAW,iBAAiB,mBAAoB,KAAK,WAAW,EAG5E,KAAK,YAAW,CACjB,CACL,EAAK,CACD,IAAK,gBACL,MAAO,UAAyB,IAE1BA,GAAQ,WAAW,oBAAoB,SAAU,KAAK,WAAW,KACjEA,GAAQ,WAAW,oBAAoB,mBAAoB,KAAK,WAAW,CAChF,CACL,EAAK,CACD,IAAK,eACL,MAAO,SAAsB0C,EAAc,CACzC,IAAIC,EAAYD,EAEhB,OAAIA,GAAgB,KAAK,MAAM,eAC7BC,EAAY,KAAK,MAAM,cAGrBD,EAAe,KAAK,MAAM,UAAY,KAAK,MAAM,eACnDC,EAAY,KAAK,MAAM,WAGrBD,EAAe,KAAK,MAAM,YAC5BC,EAAYD,GAGPC,CACR,CACL,EAAK,CACD,IAAK,cACL,MAAO,UAAuB,CAC5B,IAAIC,EAAS,KAEb,OAAO,KAAK,MAAM,SAAS,IAAI,SAAUC,EAAKrL,EAAO,CACnD,IAAIsL,EAAYrD,GAAY,QAAQ,KAAK,GAAOjI,IAAUoL,EAAO,MAAM,YAAY,EAE/EG,EAAa,CACf,IAAKvL,EACL,IAAK,SAAa6J,EAAG,CACnB,OAAOuB,EAAO,aAAavB,EAAG7J,CAAK,CACpC,EACD,UAAWsL,EACX,QAASF,EAAO,gBAAgB,KAAKA,EAAQpL,EAAOoL,EAAO,MAAM,SAASpL,CAAK,CAAC,EAChF,UAAWoL,EAAO,gBAAgB,KAAKA,EAAQpL,EAAOoL,EAAO,MAAM,SAASpL,CAAK,CAAC,EAClF,aAAc,GAAG,OAAOoL,EAAO,MAAM,OAAO,KAAM,GAAG,EAAE,OAAOpL,EAAQ,CAAC,EACvE,MAAO,CACL,MAAOoL,EAAO,MAAM,UACrB,CACX,EACQ,OAAoBhI,GAAO,QAAQ,cAAc,KAAMzH,GAAS,CAAE,EAAE4P,EAAY,CAC9E,KAAM,SACN,SAAU,CACpB,CAAS,EAAGF,CAAG,CACf,CAAO,CACF,CACL,EAAK,CACD,IAAK,SACL,MAAO,UAAkB,CACvB,IAAIG,EAAS,KAEb,GAAI,CAAC,KAAK,MAAM,SACd,OAAO,KAGT,IAAIC,EAAcrI,GAAO,SAAS,MAAM,KAAK,MAAM,QAAQ,EAAI,EAE3DsI,EAAU,KAAK,MAAM,YAAc,KAAK,MAAM,UAAY,EAE1DC,EAAU,KAAK,MAAM,YAAc,KAAK,MAAM,UAAY,KAAK,MAAM,aAErEC,EAAiB,GACjBhB,EAAkB,CAAC,KAAK,MAAM,WAAa,KAAK,MAAM,UAAY,GAClEiB,KAAoBzD,GAAc,SAASwC,EAAiB,KAAM,KAAK,MAAM,IAAI,EACjFkB,EAAiB,KAAK,MAAM,eAAiB,KACjD,OAAAF,EAAiB,CACf,gBAAiBC,EACjB,aAAcA,EACd,YAAaA,EACb,WAAYA,EACZ,UAAWA,EACX,YAAaA,EACb,yBAA0BC,EAC1B,sBAAuBA,EACvB,qBAAsBA,EACtB,oBAAqBA,EACrB,mBAAoBA,EACpB,qBAAsBA,CAC9B,EAC0B1I,GAAO,QAAQ,cAAc,MAAO,CACtD,UAAW6E,GAAY,QAAQ,SAAS,EAAK,CAC9C,EAAe7E,GAAO,QAAQ,cAAc,MAAO,CAClD,UAAW6E,GAAY,QAAQ,QAAQ,EAAK,EAC5C,IAAK,KAAK,kBACX,EAAe7E,GAAO,QAAQ,cAAc,SAAU,CACrD,KAAM,SACN,UAAW6E,GAAY,QAAQ,WAAW,CAACyD,CAAO,EAClD,QAAS,UAAmB,CAC1B,OAAOF,EAAO,YACf,EACD,aAAc,KAAK,MAAM,OAAO,SACxC,CAAO,EAAGC,EAA2BrI,GAAO,QAAQ,cAAckF,GAAgB,QAAS,CACnF,QAAS,KACT,UAAWL,GAAY,QAAQ,OAAO,GAAO,KAAK,MAAM,OAAO,EAC/D,YAAa,KAAK,UAClB,aAAc,KAAK,WACnB,YAAa,KAAK,YAClB,aAAc,KAAK,aACnB,WAAY,KAAK,WACjB,MAAO2D,EACP,SAAU,KAAK,gBACf,iBAAkB,KAAK,MAAM,YACrC,EAAS,KAAK,aAAa,EAAiBxI,GAAO,QAAQ,cAAc,KAAM,CACvE,UAAW6E,GAAY,QAAQ,OAAO,GAAO,KAAK,MAAM,OAAO,EAC/D,IAAK,SAAa9B,EAAM,CACtB,OAAOqF,EAAO,gBAAgBrF,CAAI,CACnC,EACD,MAAOyF,CACf,EAAS,KAAK,aAAa,EAAgBxI,GAAO,QAAQ,cAAc,SAAU,CAC1E,KAAM,SACN,UAAW6E,GAAY,QAAQ,WAAW,CAAC0D,CAAO,EAClD,QAAS,UAAmB,CAC1B,OAAOH,EAAO,WACf,EACD,aAAc,KAAK,MAAM,OAAO,UACjC,EAAC,CAAC,CACJ,CACF,EAAC,EAEK1B,CACT,EAAE1G,GAAO,SAAS,EAEH2E,GAAA,QAAG+B,GAElBpD,GAAgBoD,GAAQ,cAAe,QAAQ,EAE/CpD,GAAgBoD,GAAQ,eAAgB,CACtC,KAAM,aACN,OAAQ,CACN,UAAW,wBACX,WAAY,oBACZ,KAAM,YACP,EACD,aAAc,EACd,WAAY,GACZ,eAAgB,GAClB,CAAC,YC9XD,OAAO,eAAeiC,GAAS,aAAc,CAC3C,MAAO,EACT,CAAC,EACcA,GAAA,QAAG,OAElB,IAAIpF,GAAW,UAAoB,CACjC,OAAO,QACT,EAEAoF,GAAA,QAAkBpF,aCTlB,OAAO,eAAeqF,GAAS,aAAc,CAC3C,MAAO,EACT,CAAC,EACkBA,GAAA,YAAsBA,GAAA,YAA0BA,GAAA,gBAAiCA,GAAA,uBAAeA,GAAA,KAAG,OAEtH,IAAI5I,GAASjG,EAETiL,GAAgB5E,GAAuBnG,EAA6B,EAExE,SAASmG,GAAuBjF,EAAK,CAAE,OAAOA,GAAOA,EAAI,WAAaA,EAAM,CAAE,QAASA,CAAG,CAAK,CAE/F,IAAI0N,GAAO,UAAgB,GAEfD,GAAA,KAAGC,GAEf,IAAIC,GAAyB,SAAgCC,EAASnC,EAAO,CAC3E,MAAO,GAAG,OAAOmC,EAAS,MAAM,EAAE,OAAOnC,CAAK,CAChD,EAE8BgC,GAAA,uBAAGE,GAEjC,IAAItC,GAAkB,SAAyBC,EAAG,CAChD,OAAOA,EAAIA,EAAE,eAAe,KAAK,EAAI,EACvC,EAOuBmC,GAAA,gBAAGpC,GAE1B,IAAI9E,GAAc,SAAqB9E,EAAO1E,EAAO,CAMnD,GALIA,EAAM,cAER,EAAE0E,EAGAA,IAAU,EACZ,MAAO,GAGT,IAAI2K,EAAiBvH,GAAO,SAAS,MAAM9H,EAAM,QAAQ,EAEzD,GAAIA,EAAM,YAAcA,EAAM,OAAS,aAAc,CACnD,IAAIsP,EAAkB,CAAC5K,EAAQ1E,EAAM,sBACjC+O,EAAeM,EAAiB,EAEpC,OAAI3K,IAAUA,IAAUqK,GAAgB/O,EAAM,cAC5CsP,IAAoB,IAAMtP,EAAM,uBAAyB,EAChD0E,IAAUqK,IACnBO,GAAmB,IAAMtP,EAAM,uBAG1BsP,CACR,CAED,MAAO,CAAC5K,EAAQ,GAClB,EAQmBgM,GAAA,YAAGlH,GAEtB,IAAIsH,GAAc,SAAqB5E,EAAUV,EAAM,CACrD,IAAIxE,EAAQ,GACZ,OAAC,kBAAmB,eAAgB,cAAe,aAAc,YAAa,aAAa,EAAE,QAAQ,SAAUyI,EAAM,CAEnHzI,EAAMyI,CAAI,KAAQ3C,GAAc,SAASZ,EAAU,IAAKV,CAAI,CAChE,CAAG,EACMxE,CACT,EAEA0J,GAAA,YAAsBI,aC7EtB,OAAO,eAAeC,GAAS,aAAc,CAC3C,MAAO,EACT,CAAC,EAC2BA,GAAA,gDAAqCA,GAAA,2BAAkEA,GAAA,sBAAG,OAEtI,IAAIjJ,GAASjG,EAETiL,GAAgB5E,GAAuBnG,EAA6B,EAEpEiP,GAASnE,GAEb,SAAS3E,GAAuBjF,EAAK,CAAE,OAAOA,GAAOA,EAAI,WAAaA,EAAM,CAAE,QAASA,CAAG,CAAK,CAE/F,SAASgO,GAAQvP,EAAQwP,EAAgB,CAAE,IAAItL,EAAO,OAAO,KAAKlE,CAAM,EAAG,GAAI,OAAO,sBAAuB,CAAE,IAAIyP,EAAU,OAAO,sBAAsBzP,CAAM,EAAOwP,IAAgBC,EAAUA,EAAQ,OAAO,SAAUC,EAAK,CAAE,OAAO,OAAO,yBAAyB1P,EAAQ0P,CAAG,EAAE,UAAW,CAAE,GAAGxL,EAAK,KAAK,MAAMA,EAAMuL,CAAO,CAAE,CAAG,OAAOvL,CAAO,CAErV,SAASyL,GAAcjJ,EAAQ,CAAE,QAAS9D,EAAI,EAAGA,EAAI,UAAU,OAAQA,IAAK,CAAE,IAAI+D,EAAS,UAAU/D,CAAC,GAAK,KAAO,UAAUA,CAAC,EAAI,CAAE,EAAMA,EAAI,EAAK2M,GAAQ,OAAO5I,CAAM,EAAG,EAAI,EAAE,QAAQ,SAAU1G,EAAK,CAAEyJ,GAAgBhD,EAAQzG,EAAK0G,EAAO1G,CAAG,CAAC,CAAI,GAAc,OAAO,0BAA6B,OAAO,iBAAiByG,EAAQ,OAAO,0BAA0BC,CAAM,CAAC,EAAY4I,GAAQ,OAAO5I,CAAM,CAAC,EAAE,QAAQ,SAAU1G,EAAK,CAAE,OAAO,eAAeyG,EAAQzG,EAAK,OAAO,yBAAyB0G,EAAQ1G,CAAG,CAAC,CAAE,CAAE,CAAM,CAAC,OAAOyG,CAAS,CAEthB,SAASgD,GAAgBnI,EAAKtB,EAAK2E,EAAO,CAAE,OAAI3E,KAAOsB,EAAO,OAAO,eAAeA,EAAKtB,EAAK,CAAE,MAAO2E,EAAO,WAAY,GAAM,aAAc,GAAM,SAAU,EAAM,GAAYrD,EAAItB,CAAG,EAAI2E,EAAgBrD,CAAM,CAOjN,IAAIqO,GAAwB,SAA+BtR,EAAOuR,EAAO,CACvE,IAAIC,EAAe,GACf5B,EAAe2B,EAAM,aACrBE,EAAe7B,EACfb,EAAejH,GAAO,SAAS,MAAM9H,EAAM,QAAQ,EAAI,EACvD0R,EAAkB1R,EAAM,eAAiB4P,EAAe,GAAKA,EAAeb,GAEhF,GAAI2C,EACF,OAAID,EAAe,EACbzR,EAAM,YAAcA,EAAM,uBAAyBA,EAAM,OAAS,aACpEwR,EAAa,iBAAoBR,GAAO,aAAa,EAAEjC,EAAe,GAAK/O,EAAM,uBAAyB,IAAMA,EAAM,uBAAyB,EAAGA,EAAM,IAAI,EAE5JwR,EAAa,iBAAoBR,GAAO,aAAa,EAAEjC,EAAe,GAAK,IAAK/O,EAAM,IAAI,EAEnFyR,EAAe1C,IACxByC,EAAa,iBAAoBR,GAAO,aAAa,EAAGhR,EAAM,IAAI,GAG7DwR,EAGT,IAAIlC,KAAsB0B,GAAO,aAAapB,EAAc5P,CAAK,EAE7DuQ,KAAoBzD,GAAc,SAASwC,EAAiB,IAAKtP,EAAM,IAAI,EAC3EwQ,EAAiBxQ,EAAM,eAAiB,KAC5C,OAAAwR,EAAa,cAAgB,CAC3B,gBAAiBjB,EACjB,YAAaA,EACb,WAAYA,EACZ,UAAWA,CACf,EAEOgB,EAAM,UACTC,EAAa,cAAgBH,GAAcA,GAAc,CAAE,EAAEG,EAAa,aAAa,EAAG,GAAI,CAC5F,yBAA0BhB,EAC1B,sBAAuBA,EACvB,oBAAqBA,EACrB,mBAAoBA,EACpB,qBAAsBA,CAC5B,CAAK,GAGIgB,CACT,EAU6BT,GAAA,sBAAGO,GAEhC,IAAIK,GAA6B,SAAoCxC,EAAOnP,EAAOuR,EAAOK,EAAU,CAClG,IAAIJ,EAAe,GACfK,EAAe7R,EAAM,OAAS,aAE9BqP,EAAiBvH,GAAO,SAAS,MAAM9H,EAAM,QAAQ,EAErD8R,EAAiB,EACjBxC,KAAsB0B,GAAO,aAAaO,EAAM,aAAcvR,CAAK,EACnE+R,EAAe/R,EAAM,gBAAmBgR,GAAO,aAAa3B,EAAiB,EAAGrP,CAAK,EAAI,OAAUgR,GAAO,aAAa3B,EAAiB,EAAGrP,CAAK,EAChJgS,EAAYH,EAAe1C,EAAM,EAAIA,EAAM,EAC3C8C,EAAeD,EAEf1C,IAAoBwC,GAAkBE,EAAY,IACpDC,EAAe,GAIb3C,IAAoByC,GAAgBC,EAAY,IAClDC,EAAe,GAGjB,IAAI/F,EAAWoD,EAAkB,KAAOiC,EAAM,SAAWU,GACrDC,EAAW,KAAK,IAAIF,CAAS,EAAIhS,EAAM,qBAE3C,OAAIA,EAAM,cAAgBkS,IAGpBX,EAAM,eAAiB,GAAKrF,EAAW,KACzCA,GAAYmD,EAAiB,IACpBkC,EAAM,eAAiBlC,EAAiB,GAAKnD,EAAW,CAACmD,EAAiB,MACnFnD,GAAYmD,EAAiB,OAI7B,CAACrP,EAAM,0CAA4CkS,GAAYX,EAAM,wBAClEA,EAAM,sBACTK,EAAS,CACP,qBAAsB,EAC9B,CAAO,EAGHJ,EAAa,iBAAoBR,GAAO,aAAa9E,EAAUlM,EAAM,IAAI,GAIvEkS,GAAY,CAACX,EAAM,aACrBK,EAAS,CACP,YAAa,EACnB,CAAK,EAGIJ,CACT,EAQkCT,GAAA,2BAAGY,GAErC,IAAIQ,GAA0B,SAAiCnS,EAAOuR,EAAO,CAC3E,IAAIjC,KAAsB0B,GAAO,aAAaO,EAAM,aAAcvR,CAAK,EACnEoS,KAAoBpB,GAAO,aAAa1B,EAAiBtP,EAAM,IAAI,EACvE,MAAO,CACL,cAAeoS,CACnB,CACA,EAQ+BrB,GAAA,wBAAGoB,GAElC,IAAIE,GAAuB,SAA8BrS,EAAOuR,EAAO,CACrE,IAAIf,EAAiBxQ,EAAM,eAAiB,KACxCsS,EAA2B,cAC3BC,EAAa,CACf,SAAU,WACV,QAAS,QACT,OAAQ,GACR,UAAW,OACX,QAAS,EACT,IAAK,EACL,MAAO,EACP,KAAM,EACN,OAAQ,EACR,yBAA0BD,EAC1B,2BAA4BA,EAC5B,4BAA6BA,EAC7B,+BAAgCA,EAChC,0BAA2BA,CAC/B,EAEE,OAAKf,EAAM,UACTgB,EAAalB,GAAcA,GAAc,CAAE,EAAEkB,CAAU,EAAG,GAAI,CAC5D,yBAA0B/B,EAC1B,sBAAuBA,EACvB,oBAAqBA,EACrB,mBAAoBA,EACpB,qBAAsBA,CAC5B,CAAK,GAGI,CACL,WAAY+B,EACZ,cAAelB,GAAcA,GAAc,CAAE,EAAEkB,CAAU,EAAG,GAAI,CAC9D,QAAS,EACT,SAAU,UAChB,CAAK,EACD,UAAWlB,GAAc,CAAE,EAAEkB,CAAU,CAC3C,CACA,EAEAxB,GAAA,qBAA+BsB,GCrM/B,OAAO,eAAeG,GAAS,aAAc,CAC3C,MAAO,EACT,CAAC,EACcA,GAAA,QAAG,OAElB,IAAI1K,GAAS4E,GAAwB7K,CAAgB,EAEjDmL,GAAkB9E,GAAuBnG,EAA2B,EAEpE4K,GAAczE,GAAuB2E,EAA2B,EAEhE4F,GAAUvK,GAAuB6E,EAAoB,EAErD2F,GAAYxK,GAAuB+E,EAA+B,EAElEC,GAAUhF,GAAuBiF,EAA6B,EAE9D6D,GAAS2B,GAETC,GAAcC,GAElB,SAAS3K,GAAuBjF,EAAK,CAAE,OAAOA,GAAOA,EAAI,WAAaA,EAAM,CAAE,QAASA,CAAG,CAAK,CAE/F,SAASmK,IAA2B,CAAE,GAAI,OAAO,SAAY,WAAY,OAAO,KAAM,IAAIC,EAAQ,IAAI,QAAW,OAAAD,GAA2B,UAAoC,CAAE,OAAOC,GAAiBA,CAAQ,CAElN,SAASX,GAAwBzJ,EAAK,CAAE,GAAIA,GAAOA,EAAI,WAAc,OAAOA,EAAO,GAAIA,IAAQ,MAAQqK,GAAQrK,CAAG,IAAM,UAAY,OAAOA,GAAQ,WAAc,MAAO,CAAE,QAASA,GAAS,IAAIoK,EAAQD,GAA0B,EAAE,GAAIC,GAASA,EAAM,IAAIpK,CAAG,EAAK,OAAOoK,EAAM,IAAIpK,CAAG,EAAK,IAAIsK,EAAS,GAAQC,EAAwB,OAAO,gBAAkB,OAAO,yBAA0B,QAAS7L,KAAOsB,EAAO,GAAI,OAAO,UAAU,eAAe,KAAKA,EAAKtB,CAAG,EAAG,CAAE,IAAI8L,EAAOD,EAAwB,OAAO,yBAAyBvK,EAAKtB,CAAG,EAAI,KAAU8L,IAASA,EAAK,KAAOA,EAAK,KAAQ,OAAO,eAAeF,EAAQ5L,EAAK8L,CAAI,EAAYF,EAAO5L,CAAG,EAAIsB,EAAItB,CAAG,CAAI,CAAK,OAAA4L,EAAO,QAAUtK,EAASoK,GAASA,EAAM,IAAIpK,EAAKsK,CAAM,EAAYA,CAAS,CAEzuB,SAASD,GAAQrK,EAAK,CAAE,0BAA2B,OAAI,OAAO,QAAW,YAAc,OAAO,OAAO,UAAa,SAAYqK,GAAU,SAAiBrK,EAAK,CAAE,OAAO,OAAOA,CAAI,EAAaqK,GAAU,SAAiBrK,EAAK,CAAE,OAAOA,GAAO,OAAO,QAAW,YAAcA,EAAI,cAAgB,QAAUA,IAAQ,OAAO,UAAY,SAAW,OAAOA,CAAI,EAAaqK,GAAQrK,CAAG,CAAI,CAE1X,SAAS5C,IAAW,CAAE,OAAAA,GAAW,OAAO,QAAU,SAAU+H,EAAQ,CAAE,QAAS9D,EAAI,EAAGA,EAAI,UAAU,OAAQA,IAAK,CAAE,IAAI+D,EAAS,UAAU/D,CAAC,EAAG,QAAS3C,KAAO0G,EAAc,OAAO,UAAU,eAAe,KAAKA,EAAQ1G,CAAG,IAAKyG,EAAOzG,CAAG,EAAI0G,EAAO1G,CAAG,EAAQ,CAAC,OAAOyG,GAAkB/H,GAAS,MAAM,KAAM,SAAS,CAAI,CAE7T,SAAS4Q,GAAQvP,EAAQwP,EAAgB,CAAE,IAAItL,EAAO,OAAO,KAAKlE,CAAM,EAAG,GAAI,OAAO,sBAAuB,CAAE,IAAIyP,EAAU,OAAO,sBAAsBzP,CAAM,EAAOwP,IAAgBC,EAAUA,EAAQ,OAAO,SAAUC,EAAK,CAAE,OAAO,OAAO,yBAAyB1P,EAAQ0P,CAAG,EAAE,UAAW,CAAE,GAAGxL,EAAK,KAAK,MAAMA,EAAMuL,CAAO,CAAE,CAAG,OAAOvL,CAAO,CAErV,SAASyL,GAAcjJ,EAAQ,CAAE,QAAS9D,EAAI,EAAGA,EAAI,UAAU,OAAQA,IAAK,CAAE,IAAI+D,EAAS,UAAU/D,CAAC,GAAK,KAAO,UAAUA,CAAC,EAAI,CAAE,EAAMA,EAAI,EAAK2M,GAAQ,OAAO5I,CAAM,EAAG,EAAI,EAAE,QAAQ,SAAU1G,EAAK,CAAEyJ,GAAgBhD,EAAQzG,EAAK0G,EAAO1G,CAAG,CAAC,CAAI,GAAc,OAAO,0BAA6B,OAAO,iBAAiByG,EAAQ,OAAO,0BAA0BC,CAAM,CAAC,EAAY4I,GAAQ,OAAO5I,CAAM,CAAC,EAAE,QAAQ,SAAU1G,EAAK,CAAE,OAAO,eAAeyG,EAAQzG,EAAK,OAAO,yBAAyB0G,EAAQ1G,CAAG,CAAC,CAAE,CAAE,CAAM,CAAC,OAAOyG,CAAS,CAEthB,SAASG,GAAgBC,EAAUC,EAAa,CAAE,GAAI,EAAED,aAAoBC,GAAgB,MAAM,IAAI,UAAU,mCAAmC,CAAM,CAEzJ,SAASiF,GAAkBtF,EAAQpI,EAAO,CAAE,QAASsE,EAAI,EAAGA,EAAItE,EAAM,OAAQsE,IAAK,CAAE,IAAIsE,EAAa5I,EAAMsE,CAAC,EAAGsE,EAAW,WAAaA,EAAW,YAAc,GAAOA,EAAW,aAAe,GAAU,UAAWA,IAAYA,EAAW,SAAW,IAAM,OAAO,eAAeR,EAAQQ,EAAW,IAAKA,CAAU,EAAM,CAE7T,SAASF,GAAaD,EAAaI,EAAYC,EAAa,CAAE,OAAID,GAAY6E,GAAkBjF,EAAY,UAAWI,CAAU,EAAwEJ,CAAc,CAEvN,SAASS,GAAUC,EAAUC,EAAY,CAAE,GAAI,OAAOA,GAAe,YAAcA,IAAe,KAAQ,MAAM,IAAI,UAAU,oDAAoD,EAAKD,EAAS,UAAY,OAAO,OAAOC,GAAcA,EAAW,UAAW,CAAE,YAAa,CAAE,MAAOD,EAAU,SAAU,GAAM,aAAc,EAAM,EAAE,EAAOC,GAAYuE,GAAgBxE,EAAUC,CAAU,CAAI,CAEjY,SAASuE,GAAgBC,EAAGC,EAAG,CAAE,OAAAF,GAAkB,OAAO,gBAAkB,SAAyBC,EAAGC,EAAG,CAAE,OAAAD,EAAE,UAAYC,EAAUD,CAAE,EAAWD,GAAgBC,EAAGC,CAAC,CAAI,CAE1K,SAASC,GAAaC,EAAS,CAAE,IAAIC,EAA4BC,GAAyB,EAAI,OAAO,UAAgC,CAAE,IAAIC,EAAQC,GAAgBJ,CAAO,EAAGhJ,EAAQ,GAAIiJ,EAA2B,CAAE,IAAII,EAAYD,GAAgB,IAAI,EAAE,YAAapJ,EAAS,QAAQ,UAAUmJ,EAAO,UAAWE,CAAS,OAAYrJ,EAASmJ,EAAM,MAAM,KAAM,SAAS,EAAK,OAAOnF,GAA2B,KAAMhE,CAAM,CAAE,CAAK,CAEza,SAASgE,GAA2BC,EAAMC,EAAM,CAAE,OAAIA,IAASqE,GAAQrE,CAAI,IAAM,UAAY,OAAOA,GAAS,YAAsBA,EAAeoF,GAAuBrF,CAAI,CAAI,CAEjL,SAASqF,GAAuBrF,EAAM,CAAE,GAAIA,IAAS,OAAU,MAAM,IAAI,eAAe,2DAA2D,EAAK,OAAOA,CAAO,CAEtK,SAASiF,IAA4B,CAA0E,GAApE,OAAO,QAAY,KAAe,CAAC,QAAQ,WAA6B,QAAQ,UAAU,KAAM,MAAO,GAAO,GAAI,OAAO,OAAU,WAAY,MAAO,GAAM,GAAI,CAAE,YAAK,UAAU,SAAS,KAAK,QAAQ,UAAU,KAAM,GAAI,UAAY,CAAE,EAAC,EAAU,EAAO,MAAW,CAAE,MAAO,GAAU,CAEpU,SAASE,GAAgBP,EAAG,CAAE,OAAAO,GAAkB,OAAO,eAAiB,OAAO,eAAiB,SAAyBP,EAAG,CAAE,OAAOA,EAAE,WAAa,OAAO,eAAeA,CAAC,CAAI,EAASO,GAAgBP,CAAC,CAAI,CAE7M,SAASxC,GAAgBnI,EAAKtB,EAAK2E,EAAO,CAAE,OAAI3E,KAAOsB,EAAO,OAAO,eAAeA,EAAKtB,EAAK,CAAE,MAAO2E,EAAO,WAAY,GAAM,aAAc,GAAM,SAAU,EAAM,GAAYrD,EAAItB,CAAG,EAAI2E,EAAgBrD,CAAM,CAEjN,IAAI6P,GAAwB,SAAUC,EAAkB,CACtD7J,GAAU4J,EAAUC,CAAgB,EAEpC,IAAItE,EAASX,GAAagF,CAAQ,EAGlC,SAASA,EAAS9S,EAAO,CACvB,IAAIqK,EAEJ9B,GAAgB,KAAMuK,CAAQ,EAE9BzI,EAAQoE,EAAO,KAAK,KAAMzO,CAAK,EAE/BoL,GAAgBiD,GAAuBhE,CAAK,EAAG,YAAa,MAAM,EAElEe,GAAgBiD,GAAuBhE,CAAK,EAAG,qBAAsB,MAAM,EAE3Ee,GAAgBiD,GAAuBhE,CAAK,EAAG,UAAW,MAAM,EAEhEe,GAAgBiD,GAAuBhE,CAAK,EAAG,WAAY,MAAM,EAEjEe,GAAgBiD,GAAuBhE,CAAK,EAAG,QAAS,MAAM,EAE9De,GAAgBiD,GAAuBhE,CAAK,EAAG,mBAAoB,MAAM,EAEzEe,GAAgBiD,GAAuBhE,CAAK,EAAG,eAAgB,SAAUQ,EAAM,CAC7ER,EAAM,UAAYQ,CACxB,CAAK,EAEDO,GAAgBiD,GAAuBhE,CAAK,EAAG,wBAAyB,SAAUQ,EAAM,CACtFR,EAAM,mBAAqBQ,CACjC,CAAK,EAEDO,GAAgBiD,GAAuBhE,CAAK,EAAG,aAAc,SAAUQ,EAAM,CAC3ER,EAAM,QAAUQ,CACtB,CAAK,EAEDO,GAAgBiD,GAAuBhE,CAAK,EAAG,cAAe,SAAUQ,EAAMnG,EAAO,CAC9E2F,EAAM,WACTA,EAAM,SAAW,IAGnBA,EAAM,SAAS3F,CAAK,EAAImG,CAC9B,CAAK,EAEDO,GAAgBiD,GAAuBhE,CAAK,EAAG,WAAY,UAAY,CACjEvC,GAAO,SAAS,MAAMuC,EAAM,MAAM,QAAQ,GAAK,IAInDA,EAAM,cAAa,EAEdA,EAAM,MAAM,WAIjBA,EAAM,MAAQ,WAAW,UAAY,CACnCA,EAAM,UAAS,CACvB,EAASA,EAAM,MAAM,QAAQ,GAC7B,CAAK,EAEDe,GAAgBiD,GAAuBhE,CAAK,EAAG,gBAAiB,UAAY,CACtEA,EAAM,OAAO,aAAaA,EAAM,KAAK,CAC/C,CAAK,EAEDe,GAAgBiD,GAAuBhE,CAAK,EAAG,gBAAiB,UAAY,CAC1EA,EAAM,cAAa,EAEnBA,EAAM,SAAQ,CACpB,CAAK,EAEDe,GAAgBiD,GAAuBhE,CAAK,EAAG,cAAe,UAAY,CACxEA,EAAM,SAAS,CACb,eAAgB,EACxB,EAASA,EAAM,aAAa,CAC5B,CAAK,EAEDe,GAAgBiD,GAAuBhE,CAAK,EAAG,eAAgB,UAAY,CACzEA,EAAM,SAAS,CACb,eAAgB,EACxB,EAASA,EAAM,QAAQ,CACvB,CAAK,EAEDe,GAAgBiD,GAAuBhE,CAAK,EAAG,2BAA4B,UAAY,CACrF,OAAKA,EAAM,mBAIH,MAAAqI,GAAU,SAAU,EAAC,gBAAkBrI,EAAM,oBAAsBA,EAAM,mBAAmB,YAAaqI,GAAU,SAAU,EAAC,aAAa,GAH1I,EAQf,CAAK,EAEDtH,GAAgBiD,GAAuBhE,CAAK,EAAG,uBAAwB,SAAUkE,EAAG,CAClF,GAAKlE,EAAM,2BAIX,KAAImB,EAAOnB,EAAM,MAAM,KACnBwH,EAAerG,IAAS,aACxBwH,EAAW,CACb,QAAS,GACT,WAAY,GACZ,UAAW,GACX,UAAW,EACnB,EACUC,EAAUpB,EAAemB,EAAS,WAAaA,EAAS,UACxDE,EAAUrB,EAAemB,EAAS,UAAYA,EAAS,QAEvDC,IAAY1E,EAAE,QAChBlE,EAAM,UAAS,EACN6I,IAAY3E,EAAE,SACvBlE,EAAM,UAAS,EAEvB,CAAK,EAEDe,GAAgBiD,GAAuBhE,CAAK,EAAG,cAAe,UAAY,CACxE,GAAI,GAACA,EAAM,MAAM,aAAe,CAACA,EAAM,UAAYA,EAAM,SAAS,SAAW,GAI7E,KAAIwH,EAAexH,EAAM,MAAM,OAAS,aACpCwF,EAAYxF,EAAM,SAAS,CAAC,EAEhC,GAAKwF,EAIL,KAAIjB,EAAWiD,EAAehC,EAAU,YAAcA,EAAU,aAEhExF,EAAM,SAAS,CACb,SAAUuE,CAClB,CAAO,EAEGvE,EAAM,WACRA,EAAM,UAAU,eAExB,CAAK,EAEDe,GAAgBiD,GAAuBhE,CAAK,EAAG,gBAAiB,UAAY,CAC1EA,EAAM,SAAS,CACb,SAAU,EAClB,CAAO,EAEDA,EAAM,YAAW,CACvB,CAAK,EAEDe,GAAgBiD,GAAuBhE,CAAK,EAAG,kBAAmB,SAAU3F,EAAOuK,EAAM,CACvF,GAAInH,GAAO,SAAS,MAAMuC,EAAM,MAAM,QAAQ,IAAM,EAIpD,IAAIA,EAAM,MAAM,YAAa,CAC3BA,EAAM,SAAS,CACb,YAAa,EACvB,CAAS,EAED,MACD,CAEDA,EAAM,MAAM,YAAY3F,EAAOuK,CAAI,EAE/BvK,IAAU2F,EAAM,MAAM,cACxBA,EAAM,SAAS,CACb,aAAc3F,CACxB,CAAS,EAET,CAAK,EAED0G,GAAgBiD,GAAuBhE,CAAK,EAAG,iBAAkB,SAAU3F,EAAOuK,EAAM,CAClFnH,GAAO,SAAS,MAAMuC,EAAM,MAAM,QAAQ,GAAK,GAInDA,EAAM,MAAM,SAAS3F,EAAOuK,CAAI,CACtC,CAAK,EAED7D,GAAgBiD,GAAuBhE,CAAK,EAAG,mBAAoB,SAAU3F,EAAOuK,EAAM,CACxF5E,EAAM,MAAM,aAAa3F,EAAOuK,CAAI,EAEpC5E,EAAM,OAAO3F,CAAK,CACxB,CAAK,EAED0G,GAAgBiD,GAAuBhE,CAAK,EAAG,eAAgB,SAAUZ,EAAO,CAC9EY,EAAM,SAAS,CACb,QAAS,EACjB,CAAO,EAEDA,EAAM,MAAM,aAAaZ,CAAK,CACpC,CAAK,EAED2B,GAAgBiD,GAAuBhE,CAAK,EAAG,aAAc,SAAUZ,EAAO,CAC5EY,EAAM,SAAS,CACb,QAAS,GACT,YAAa,GACb,qBAAsB,EAC9B,CAAO,EAEDA,EAAM,MAAM,WAAWZ,CAAK,EAE5BY,EAAM,cAAa,EAEfA,EAAM,MAAM,UACdA,EAAM,SAAQ,CAEtB,CAAK,EAEDe,GAAgBiD,GAAuBhE,CAAK,EAAG,cAAe,SAAU8E,EAAO1F,EAAO,CACpFY,EAAM,MAAM,YAAYZ,CAAK,EAE7B,IAAI0J,EAA2B9I,EAAM,MAAM,sBAAsB8E,EAAO9E,EAAM,MAAOA,EAAM,MAAOA,EAAM,SAAS,KAAKgE,GAAuBhE,CAAK,CAAC,CAAC,EAEpJ,OAAAA,EAAM,SAASgH,GAAc,GAAI8B,CAAwB,CAAC,EAInD,CAAC,CAAC,OAAO,KAAKA,CAAwB,EAAE,MACrD,CAAK,EAED/H,GAAgBiD,GAAuBhE,CAAK,EAAG,YAAa,UAAY,CACtE,IAAIqF,EAAY,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,EAEpFrF,EAAM,OAAOA,EAAM,MAAM,cAAgB,OAAOqF,GAAc,SAAWA,EAAY,EAAE,CAC7F,CAAK,EAEDtE,GAAgBiD,GAAuBhE,CAAK,EAAG,YAAa,UAAY,CACtE,IAAIqF,EAAY,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,EAEpFrF,EAAM,OAAOA,EAAM,MAAM,cAAgB,OAAOqF,GAAc,SAAWA,EAAY,EAAE,CAC7F,CAAK,EAEDtE,GAAgBiD,GAAuBhE,CAAK,EAAG,SAAU,SAAU6B,EAAU,CAC3E,GAAI,OAAOA,GAAa,SAIxB,KAAI6C,EAAejH,GAAO,SAAS,MAAMuC,EAAM,MAAM,QAAQ,EAAI,EAE7D6B,EAAW,IACbA,EAAW7B,EAAM,MAAM,aAAe0E,EAAe,GAGnD7C,EAAW6C,IACb7C,EAAW7B,EAAM,MAAM,aAAe,EAAI0E,GAG5C1E,EAAM,WAAW,CAEf,aAAc6B,CACtB,CAAO,EAIG7B,EAAM,MAAM,UAAYA,EAAM,MAAM,iBAAmB,IACzDA,EAAM,cAAa,EAE3B,CAAK,EAEDe,GAAgBiD,GAAuBhE,CAAK,EAAG,cAAe,UAAY,CACxEA,EAAM,UAAU,CAAC,CACvB,CAAK,EAEDe,GAAgBiD,GAAuBhE,CAAK,EAAG,cAAe,UAAY,CACxEA,EAAM,UAAU,CAAC,CACvB,CAAK,EAEDe,GAAgBiD,GAAuBhE,CAAK,EAAG,iBAAkB,UAAY,CAC3EA,EAAM,UAAU,CAAC,EAEbA,EAAM,MAAM,cACdA,EAAM,SAAS,CACb,YAAa,EACvB,CAAS,CAET,CAAK,EAEDe,GAAgBiD,GAAuBhE,CAAK,EAAG,mBAAoB,UAAY,CAC7EA,EAAM,UAAU,CAAC,EAEbA,EAAM,MAAM,cACdA,EAAM,SAAS,CACb,YAAa,EACvB,CAAS,CAET,CAAK,EAEDe,GAAgBiD,GAAuBhE,CAAK,EAAG,aAAc,SAAU+I,EAAU,CAC/E,OAAO,SAAU7E,EAAG,EACd,IAAKyC,GAAO,iBAAiBzC,CAAC,GAAKA,EAAE,MAAQ,UAC/ClE,EAAM,OAAO+I,CAAQ,CAE/B,CACA,CAAK,EAEDhI,GAAgBiD,GAAuBhE,CAAK,EAAG,aAAc,SAAUkH,EAAO,CAE5ElH,EAAM,SAASgH,GAAc,CAC3B,aAAchH,EAAM,MAAM,YAClC,EAASkH,CAAK,EAAG,UAAY,CAErBlH,EAAM,SAASA,EAAM,iBAAiBA,EAAM,MAAOA,EAAM,KAAK,CAAC,CACvE,CAAO,EAEDA,EAAM,eAAekH,EAAM,aAAczJ,GAAO,SAAS,QAAQuC,EAAM,MAAM,QAAQ,EAAEkH,EAAM,YAAY,CAAC,CAChH,CAAK,EAEDnG,GAAgBiD,GAAuBhE,CAAK,EAAG,kBAAmB,UAAY,CAC5E,IAAIuF,EAAevF,EAAM,MAAM,aAC3B4E,EAAO5E,EAAM,UAAYA,EAAM,SAASuF,CAAY,EACpDyD,EAASpE,GAAQA,EAAK,qBAAqB,KAAK,GAAK,GACzD,OAAOoE,EAAO,CAAC,CACrB,CAAK,EAEDjI,GAAgBiD,GAAuBhE,CAAK,EAAG,wBAAyB,SAAU6B,EAAU,CAC1F,IAAI+C,EAAO5E,EAAM,UAAYA,EAAM,SAAS6B,CAAQ,EAEpD,GAAI7B,EAAM,MAAM,UAAY4E,GAAQA,EAAK,SAAS,OAAQ,CACxD,IAAIqE,EAAcrE,EAAK,SAAS,CAAC,EAAE,qBAAqB,KAAK,GAAK,GAElE,GAAIqE,EAAY,OAAS,EAAG,CAC1B,IAAIC,EAAQD,EAAY,CAAC,EAEzB,GAAI,CAACC,EAAM,SAAU,CAEnB,IAAIC,EAAc,SAASA,GAAc,CACvCnJ,EAAM,YAAW,EAEjBkJ,EAAM,oBAAoB,OAAQC,CAAW,CAC3D,EAEYD,EAAM,iBAAiB,OAAQC,CAAW,CAC3C,CACF,CAGD,IAAIC,EAAcH,EAAY,CAAC,GAAKrE,EAAK,SAAS,CAAC,EAC/CyE,EAASD,EAAY,aACzB,OAAOC,EAAS,EAAIA,EAAS,IAC9B,CAED,OAAO,IACb,CAAK,EAED,IAAIC,EAAY,CACd,YAAa,GACb,aAAc3T,EAAM,aACpB,aAAcA,EAAM,aACpB,SAAU,GACV,eAAgB,GAChB,SAAUA,EAAM,SAChB,QAAS,GACT,qBAAsB,GACtB,YAAa,GACb,SAAU,EACV,cAAe,CAAE,EACjB,WAAY,CAAE,EACd,cAAe,CAAE,EACjB,UAAW,CAAE,CACnB,EACI,OAAAqK,EAAM,iBAAmB,OAAOrK,EAAM,kBAAqB,YAAcA,EAAM,kBAAoBA,EAAM,mBAAqB,QAAU4S,GAAY,sBAAwBA,GAAY,sBACxLvI,EAAM,MAAQgH,GAAcA,GAAc,GAAIsC,CAAS,EAAGtJ,EAAM,iBAAiBrK,EAAO2T,CAAS,CAAC,EAC3FtJ,CACR,CAED,OAAA3B,GAAaoK,EAAU,CAAC,CACtB,IAAK,oBACL,MAAO,UAA6B,CAC7B,KAAK,MAAM,UAIhB,KAAK,cAAa,CACnB,CACL,EAAK,CACD,IAAK,qBACL,MAAO,SAA4BnD,EAAWiE,EAAW,CACnD,CAACjE,EAAU,UAAY,KAAK,MAAM,UAAY,CAAC,KAAK,MAAM,aAC5D,KAAK,cAAa,EAGhB,CAACA,EAAU,WAAa,KAAK,MAAM,WACrC,KAAK,WAAU,EAGbiE,EAAU,SAAW,CAAC,KAAK,MAAM,SAEnC,KAAK,SAASvC,GAAc,CAAE,EAAE,KAAK,MAAM,mBAAmB,KAAK,MAAO,KAAK,KAAK,CAAC,CAAC,GAGpF1B,EAAU,eAAiB,KAAK,MAAM,cAAgBA,EAAU,aAAe,KAAK,MAAM,cAC5F,KAAK,YAAW,EAChB,KAAK,OAAO,KAAK,MAAM,YAAY,GAGjCA,EAAU,WAAa,KAAK,MAAM,WAChC,KAAK,MAAM,SACb,KAAK,cAAa,EAElB,KAAK,gBAAe,EAGtB,KAAK,SAAS,CACZ,SAAU,KAAK,MAAM,QAC/B,CAAS,EAEJ,CACL,EAAK,CACD,IAAK,uBACL,MAAO,UAAgC,CACrC,KAAK,gBAAe,CACrB,CACL,EAAK,CACD,IAAK,gBACL,MAAO,UAAyB,CAC9B,IAAIG,EAAS,KAEb,KAAK,WAAU,EAEX,KAAK,MAAM,UAAYhI,GAAO,SAAS,MAAM,KAAK,MAAM,QAAQ,EAAI,GACtE,KAAK,cAAa,EAGhB,KAAK,MAAM,WACb,KAAK,WAAU,EAGjB,KAAK,SAAS,CACZ,YAAa,EACrB,EAAS,UAAY,CACb,IAAI+L,EAAe/D,EAAO,kBAEtB+D,GAAgB,CAACA,EAAa,SAEhCA,EAAa,iBAAiB,OAAQ/D,EAAO,aAAa,EAE1DA,EAAO,cAAa,CAE9B,CAAO,CACF,CACL,EAAK,CACD,IAAK,kBACL,MAAO,UAA2B,CAC5B,KAAK,MAAM,cACb,KAAK,aAAY,EACjB,KAAK,gBAAe,EAEvB,CACL,EAAK,CACD,IAAK,gBACL,MAAO,UAAyB,CAC9B,KAAK,SAAQ,EACb,IAAIgE,EAAkB,KAAK,mBAEvB,KAAK,MAAM,aAAeA,IAC5BA,EAAgB,iBAAiB,aAAc,KAAK,WAAW,EAC/DA,EAAgB,iBAAiB,aAAc,KAAK,YAAY,EAEnE,CACL,EAAK,CACD,IAAK,kBACL,MAAO,UAA2B,CAChC,KAAK,cAAa,EAClB,IAAIA,EAAkB,KAAK,mBAEvB,KAAK,MAAM,aAAeA,IAC5BA,EAAgB,oBAAoB,aAAc,KAAK,WAAW,EAClEA,EAAgB,oBAAoB,aAAc,KAAK,YAAY,EAEtE,CACL,EAAK,CACD,IAAK,aACL,MAAO,UAAsB,IAGvB5G,GAAQ,WAAW,iBAAiB,SAAU,KAAK,WAAW,KAE9DA,GAAQ,WAAW,iBAAiB,mBAAoB,KAAK,WAAW,EAExE,KAAK,MAAM,sBACTwF,GAAU,WAAW,iBAAiB,UAAW,KAAK,oBAAoB,CAEjF,CACL,EAAK,CACD,IAAK,eACL,MAAO,UAAwB,IAEzBxF,GAAQ,WAAW,oBAAoB,SAAU,KAAK,WAAW,KACjEA,GAAQ,WAAW,oBAAoB,mBAAoB,KAAK,WAAW,EAC/E,IAAI2G,EAAe,KAAK,kBAEpBA,GACFA,EAAa,oBAAoB,OAAQ,KAAK,aAAa,EAGzD,KAAK,MAAM,sBACTnB,GAAU,WAAW,oBAAoB,UAAW,KAAK,oBAAoB,CAEpF,CACL,EAAK,CACD,IAAK,aACL,MAAO,UAAsB,CAC3B,IAAIqB,GAEHA,EAAwB,KAAK,sBAAwB,MAAQA,IAA0B,QAAkBA,EAAsB,MAAK,CACtI,CACL,EAAK,CACD,IAAK,cACL,MAAO,SAAqBC,EAAS,CACnC,IAAI9D,EAAS,KAEb,OAAK,KAAK,MAAM,SAITpI,GAAO,SAAS,IAAI,KAAK,MAAM,SAAU,SAAUmH,EAAMvK,EAAO,CACrE,IAAIuP,EAAavP,IAAUwL,EAAO,MAAM,aACpCgE,EAAaxP,IAAUwL,EAAO,MAAM,aACpClJ,EAAQiN,GAAc/D,EAAO,MAAM,eAAiBgE,GAAchE,EAAO,MAAM,WAAaA,EAAO,MAAM,YAAc,GAEvHA,EAAO,MAAM,YAAcA,EAAO,MAAM,OAAS,eACnDlJ,EAAQqK,GAAcA,GAAc,CAAE,EAAErK,CAAK,EAAG,GAAI,CAClD,SAAUkJ,EAAO,MAAM,sBAAwB,GAC3D,CAAW,GAGCA,EAAO,MAAM,SAAWA,EAAO,MAAM,uBACvClJ,EAAQqK,GAAcA,GAAc,CAAE,EAAErK,CAAK,EAAG,GAAI,CAClD,cAAe,MAC3B,CAAW,GAGH,IAAImN,EAAa,CACf,IAAK,SAAa5F,EAAG,CACnB,OAAO2B,EAAO,YAAY3B,EAAG7J,CAAK,CACnC,EACD,IAAK,UAAYA,GAASsP,EAAU,QAAU,IAC9C,UAAWrH,GAAY,QAAQ,KAAK,GAAMjI,IAAUwL,EAAO,MAAM,aAAcxL,IAAUwL,EAAO,MAAM,YAAY,EAClH,QAASA,EAAO,gBAAgB,KAAKA,EAAQxL,EAAOuK,CAAI,EACxD,MAAOjI,CACjB,EACQ,OAAoBc,GAAO,QAAQ,cAAc,KAAMqM,EAAYjE,EAAO,MAAM,WAAWjB,EAAM,CAC/F,WAAYvK,IAAUwL,EAAO,MAAM,aACnC,WAAYxL,IAAUwL,EAAO,MAAM,YACpC,EAAC,CACV,CAAO,EAjCQ,EAkCV,CACL,EAAK,CACD,IAAK,iBACL,MAAO,UAA0B,CAC/B,IAAIkE,EAAS,KAETC,EAAc,KAAK,MACnBC,EAAiBD,EAAY,eAC7BE,EAASF,EAAY,OACrBG,EAAkBH,EAAY,gBAC9BtJ,EAAWsJ,EAAY,SAE3B,OAAKC,EAIexM,GAAO,QAAQ,cAAc,KAAM,CACrD,UAAW,cACnB,EAASA,GAAO,SAAS,IAAIiD,EAAU,SAAU0J,EAAG/P,EAAO,CACnD,OAAO8P,GAAmBA,EAAgBJ,EAAO,WAAW1P,CAAK,EAAGA,IAAU0P,EAAO,MAAM,aAAc1P,EAAO6P,EAAO,IAAI,CAC5H,EAAC,EAPO,IAQV,CACL,EAAK,CACD,IAAK,eACL,MAAO,UAAwB,CAC7B,OAAK,KAAK,MAAM,WAIIzM,GAAO,QAAQ,cAAc,IAAK,CACpD,UAAW,iBACnB,EAAS,KAAK,MAAM,gBAAgB,KAAK,MAAM,aAAe,EAAGA,GAAO,SAAS,MAAM,KAAK,MAAM,QAAQ,CAAC,CAAC,EAL7F,IAMV,CACL,EAAK,CACD,IAAK,eACL,MAAO,UAAwB,CAC7B,MAAI,CAAC,KAAK,MAAM,YAAc,CAAC,KAAK,MAAM,UAAYA,GAAO,SAAS,MAAM,KAAK,MAAM,QAAQ,IAAM,EAC5F,KAGWA,GAAO,QAAQ,cAAc2K,GAAQ,QAAS,CAChE,IAAK,KAAK,aACV,aAAc,KAAK,iBACnB,aAAc,KAAK,MAAM,aACzB,eAAgB,KAAK,MAAM,eAC3B,WAAY,KAAK,MAAM,WACvB,OAAQ,KAAK,MAAM,OACnB,aAAc,KAAK,MAAM,YACjC,EAAS,KAAK,MAAM,aAAa,KAAK,MAAM,QAAQ,CAAC,CAChD,CACL,EAAK,CACD,IAAK,SACL,MAAO,UAAkB,CACvB,IAAIiC,EAAS,KAEb,GAAI,CAAC,KAAK,MAAM,UAAY5M,GAAO,SAAS,MAAM,KAAK,MAAM,QAAQ,IAAM,EACzE,OAAO,KAGT,IAAIqI,EAAc,KAAK,MAAM,WAAarI,GAAO,SAAS,MAAM,KAAK,MAAM,QAAQ,EAAI,EACnF+J,EAAe,KAAK,MAAM,OAAS,aACnC8C,EAAgB,KAAK,MAAM,YAAc7M,GAAO,SAAS,MAAM,KAAK,MAAM,QAAQ,EAAI,EAEtFsI,EAAUuE,IAAkB,KAAK,MAAM,aAAe,GAAK,KAAK,MAAM,eAAiB,GAEvFtE,EAAUsE,IAAkB,KAAK,MAAM,aAAe7M,GAAO,SAAS,MAAM,KAAK,MAAM,QAAQ,EAAI,GAAK,KAAK,MAAM,eAAiB,GACpI8M,EAAa,KAAK,YAAY,EAAI,EAClCC,EAAaD,EAAW,QACxBE,EAAYF,EAAW,MACvBG,EAAc,CAChB,UAAWpI,GAAY,QAAQ,OAAO,GAAM,KAAK,MAAM,OAAO,EAC9D,YAAa,KAAK,YAClB,aAAc,KAAK,aACnB,WAAY,KAAK,WACjB,MAAO,KAAK,MAAM,cAClB,UAAW,KAAK,MAAM,oBAC9B,EACUqI,EAAkB,GAEtB,GAAInD,GAIF,GAHAkD,EAAY,YAAc,KAAK,eAC/BA,EAAY,aAAe,KAAK,iBAE5B,KAAK,MAAM,cAAe,CAC5B,IAAIE,EAAa,KAAK,sBAAsB,KAAK,MAAM,YAAY,EAEnED,EAAgB,OAASC,GAAc,MACxC,OAEDF,EAAY,UAAY,KAAK,MAAM,gBAAkB,UAAY,KAAK,iBAAmB,KAAK,eAC9FA,EAAY,YAAc,KAAK,MAAM,gBAAkB,UAAY,KAAK,eAAiB,KAAK,iBAC9FA,EAAY,MAAQ1D,GAAcA,GAAc,CAAE,EAAE0D,EAAY,KAAK,EAAG,GAAI,CAC1E,OAAQ,KAAK,MAAM,QAC7B,CAAS,EACDC,EAAgB,OAAS,KAAK,MAAM,SAGtC,OAAoBlN,GAAO,QAAQ,cAAc,MAAO,CACtD,aAAc,KAAK,MAAM,UACzB,UAAW6E,GAAY,QAAQ,KAAK,KAAK,MAAM,SAAS,EACxD,IAAK,KAAK,sBACV,SAAU,KAAK,MAAM,kBAAoB,EAAI,MAC9C,EAAe7E,GAAO,QAAQ,cAAc,MAAO,CAClD,UAAW6E,GAAY,QAAQ,SAAS,EAAI,EAC5C,MAAO,CACL,MAAO,KAAK,MAAM,KACnB,CACT,EAAS,KAAK,iBAAkB,KAAK,MAAM,gBAAgB,KAAK,YAAayD,EAAS,KAAK,MAAM,OAAO,SAAS,EAAgBtI,GAAO,QAAQ,cAAc,MAAO,CAC7J,UAAW6E,GAAY,QAAQ,QAAQ,GAAM,KAAK,MAAM,IAAI,EAC5D,MAAOqI,CACf,EAAS7E,EAA2BrI,GAAO,QAAQ,cAAckF,GAAgB,QAAS3M,GAAS,CAC3F,QAAS,KACT,SAAU,KAAK,UAChB,EAAE0U,EAAa,CACd,iBAAkB,KAAK,MAAM,YACrC,CAAO,EAAG,KAAK,MAAM,cAAgBD,EAAW,KAAK,YAAa,EAAE,KAAK,MAAM,cAAgBD,CAAU,EAAiB/M,GAAO,QAAQ,cAAc,KAAM,CACrJ,UAAW6E,GAAY,QAAQ,OAAO,GAAM,KAAK,MAAM,OAAO,EAC9D,IAAK,SAAa9B,EAAM,CACtB,OAAO6J,EAAO,WAAW7J,CAAI,CAC9B,EACD,MAAO,KAAK,MAAM,eAAiB,CAAE,CACtC,EAAE,KAAK,MAAM,cAAgBiK,EAAW,KAAK,YAAW,EAAI,KAAK,MAAM,cAAgBD,CAAU,CAAC,EAAG,KAAK,MAAM,gBAAgB,KAAK,YAAaxE,EAAS,KAAK,MAAM,OAAO,UAAU,EAAG,KAAK,aAAc,GAAG,KAAK,aAAc,EACrO,CACF,EAAC,EAEKyC,CACT,EAAEhL,GAAO,QAAQ,SAAS,EAEX0K,GAAA,QAAGM,GAElB1H,GAAgB0H,GAAU,cAAe,UAAU,EAEnD1H,GAAgB0H,GAAU,eAAgB,CACxC,UAAW,OACX,KAAM,aACN,sBAAuB,GACvB,SAAU,IACV,OAAQ,CACN,UAAW,wBACX,WAAY,oBACZ,KAAM,YACP,EACD,YAAa9B,GAAO,KACpB,aAAcA,GAAO,KACrB,SAAUA,GAAO,KACjB,aAAc,UAAwB,CAAE,EACxC,WAAY,UAAsB,CAAE,EACpC,YAAa,UAAuB,CAClC,MAAO,EACR,EACD,yCAA0C,GAC1C,gBAAiB,SAAyBkE,EAAgB9E,EAAS+E,EAAO,CACxE,OAAoBrN,GAAO,QAAQ,cAAc,SAAU,CACzD,KAAM,SACN,aAAcqN,EACd,UAAWxI,GAAY,QAAQ,WAAW,CAACyD,CAAO,EAClD,QAAS8E,CACf,CAAK,CACF,EACD,gBAAiB,SAAyBA,EAAgB7E,EAAS8E,EAAO,CACxE,OAAoBrN,GAAO,QAAQ,cAAc,SAAU,CACzD,KAAM,SACN,aAAcqN,EACd,UAAWxI,GAAY,QAAQ,WAAW,CAAC0D,CAAO,EAClD,QAAS6E,CACf,CAAK,CACF,EACD,gBAAiB,SAAyBA,EAAgBjB,EAAYvP,EAAOyQ,EAAO,CAClF,OAAoBrN,GAAO,QAAQ,cAAc,KAAM,CACrD,UAAW6E,GAAY,QAAQ,IAAIsH,CAAU,EAC7C,QAASiB,EACT,UAAWA,EACX,MAAOxQ,EACP,IAAKA,EACL,KAAM,SACN,SAAU,EACV,aAAc,GAAG,OAAOyQ,EAAO,GAAG,EAAE,OAAOzQ,EAAQ,CAAC,CAC1D,CAAK,CACF,EACD,WAAY,SAAoBuK,EAAM,CACpC,OAAOA,CACR,EACD,aAAc,SAAsBlE,EAAU,CAC5C,IAAIsI,EAASvL,GAAO,SAAS,IAAIiD,EAAU,SAAUkE,EAAM,CACzD,IAAIc,EAAMd,EAQV,GANIA,EAAK,OAAS,QAChBc,EAAMjI,GAAO,SAAS,QAAQmH,EAAK,MAAM,QAAQ,EAAE,KAAK,SAAUlE,EAAU,CAC1E,OAAOA,EAAS,OAAS,KACnC,CAAS,GAGC,EAACgF,EAIL,OAAOA,CACb,CAAK,EAED,OAAIsD,EAAO,OAAO,SAAUE,EAAO,CACjC,OAAOA,CACb,CAAK,EAAE,SAAW,GACZ,QAAQ,KAAK,+SAA+S,EACrT,IAGFF,CACR,EACD,gBAAiBrC,GAAO,uBACxB,aAAc,EACd,WAAY,GACZ,eAAgB,GAChB,WAAY,GACZ,WAAY,GACZ,YAAa,GACb,qBAAsB,EACtB,UAAW,GACX,eAAgB,IAChB,cAAe,WACf,MAAO,OACP,iBAAkB,QAClB,sBAAuB4B,GAAY,2BACnC,mBAAoBA,GAAY,uBAClC,CAAC,yBC3zBD,OAAO,eAAwBhL,EAAA,aAAc,CAC3C,MAAO,EACT,CAAC,EACD,OAAO,eAAeA,EAAS,WAAY,CACzC,WAAY,GACZ,IAAK,UAAe,CAClB,OAAOwN,EAAU,OAClB,CACH,CAAC,EACD,OAAO,eAAexN,EAAS,gBAAiB,CAC9C,WAAY,GACZ,IAAK,UAAe,CAClB,OAAOyN,EAAO,aACf,CACH,CAAC,EACD,OAAO,eAAezN,EAAS,SAAU,CACvC,WAAY,GACZ,IAAK,UAAe,CAClB,OAAO6K,EAAQ,OAChB,CACH,CAAC,EAED,IAAI2C,EAAYlN,EAAuBrG,EAAgC,EAEnEwT,EAAStT,GAET0Q,EAAUvK,EAAuB2E,EAA8B,EAEnE,SAAS3E,EAAuBjF,EAAK,CAAE,OAAOA,GAAOA,EAAI,WAAaA,EAAM,CAAE,QAASA,CAAK,CAAC,QC9B7F,IAAIqS,GAAOzT,GAkBP0T,GAAM,UAAW,CACnB,OAAOD,GAAK,KAAK,KACnB,EAEAE,GAAiBD,GCtBbE,GAAW5T,GACX0T,GAAMxT,GACN2T,GAAW7I,GAGX8I,GAAkB,sBAGlBC,GAAY,KAAK,IACjBC,GAAY,KAAK,IAwDrB,SAASC,GAASC,EAAMC,EAAMrP,EAAS,CACrC,IAAIsP,EACAC,EACAC,EACApR,EACAqR,EACAC,EACAC,EAAiB,EACjBC,EAAU,GACVC,EAAS,GACTC,EAAW,GAEf,GAAI,OAAOV,GAAQ,WACjB,MAAM,IAAI,UAAUJ,EAAe,EAErCK,EAAON,GAASM,CAAI,GAAK,EACrBP,GAAS9O,CAAO,IAClB4P,EAAU,CAAC,CAAC5P,EAAQ,QACpB6P,EAAS,YAAa7P,EACtBwP,EAAUK,EAASZ,GAAUF,GAAS/O,EAAQ,OAAO,GAAK,EAAGqP,CAAI,EAAIG,EACrEM,EAAW,aAAc9P,EAAU,CAAC,CAACA,EAAQ,SAAW8P,GAG1D,SAASC,EAAWC,EAAM,CACxB,IAAIxM,EAAO8L,EACPW,EAAUV,EAEd,OAAAD,EAAWC,EAAW,OACtBI,EAAiBK,EACjB5R,EAASgR,EAAK,MAAMa,EAASzM,CAAI,EAC1BpF,CACR,CAED,SAAS8R,EAAYF,EAAM,CAEzB,OAAAL,EAAiBK,EAEjBP,EAAU,WAAWU,EAAcd,CAAI,EAEhCO,EAAUG,EAAWC,CAAI,EAAI5R,CACrC,CAED,SAASgS,EAAcJ,EAAM,CAC3B,IAAIK,EAAoBL,EAAON,EAC3BY,EAAsBN,EAAOL,EAC7BY,EAAclB,EAAOgB,EAEzB,OAAOR,EACHX,GAAUqB,EAAaf,EAAUc,CAAmB,EACpDC,CACL,CAED,SAASC,EAAaR,EAAM,CAC1B,IAAIK,EAAoBL,EAAON,EAC3BY,EAAsBN,EAAOL,EAKjC,OAAQD,IAAiB,QAAcW,GAAqBhB,GACzDgB,EAAoB,GAAOR,GAAUS,GAAuBd,CAChE,CAED,SAASW,GAAe,CACtB,IAAIH,EAAOpB,KACX,GAAI4B,EAAaR,CAAI,EACnB,OAAOS,EAAaT,CAAI,EAG1BP,EAAU,WAAWU,EAAcC,EAAcJ,CAAI,CAAC,CACvD,CAED,SAASS,EAAaT,EAAM,CAK1B,OAJAP,EAAU,OAINK,GAAYR,EACPS,EAAWC,CAAI,GAExBV,EAAWC,EAAW,OACfnR,EACR,CAED,SAASsS,GAAS,CACZjB,IAAY,QACd,aAAaA,CAAO,EAEtBE,EAAiB,EACjBL,EAAWI,EAAeH,EAAWE,EAAU,MAChD,CAED,SAASkB,GAAQ,CACf,OAAOlB,IAAY,OAAYrR,EAASqS,EAAa7B,GAAK,EAC3D,CAED,SAASgC,GAAY,CACnB,IAAIZ,EAAOpB,GAAK,EACZiC,EAAaL,EAAaR,CAAI,EAMlC,GAJAV,EAAW,UACXC,EAAW,KACXG,EAAeM,EAEXa,EAAY,CACd,GAAIpB,IAAY,OACd,OAAOS,EAAYR,CAAY,EAEjC,GAAIG,EAEF,oBAAaJ,CAAO,EACpBA,EAAU,WAAWU,EAAcd,CAAI,EAChCU,EAAWL,CAAY,CAEjC,CACD,OAAID,IAAY,SACdA,EAAU,WAAWU,EAAcd,CAAI,GAElCjR,CACR,CACD,OAAAwS,EAAU,OAASF,EACnBE,EAAU,MAAQD,EACXC,CACT,CAEA,IAAAE,GAAiB3B,mBC3LV,SAAS4B,GAAiBC,EAAWzI,EAAS0I,EAASC,EAASC,EAAU,GAAO,CAEpF,MAAMC,EAAeC,WAKrBD,EAAa,QAAU7I,EACvB+I,YAAgB,IAAM,CAElB,GAAIL,IAAY,MAAQA,EAAQ,mBAAqB,OACjD,OACJ,MAAM7L,EAAK6L,EAELM,EAAiBzO,GAAU,QAC7B0O,EAAAJ,EAAa,UAAb,MAAAI,EAAsB,KAAKpM,EAAItC,EAC3C,EACQ,OAAAsC,EAAG,iBAAiB4L,EAAWO,EAAe,CAAE,QAAAL,EAAS,QAAAC,CAAO,CAAE,EAE3D,IAAM,CACT/L,EAAG,oBAAoB4L,EAAWO,EAAe,CAAE,QAAAJ,CAAS,EACxE,CACK,EAAE,CAACH,EAAWC,EAASC,EAASC,CAAO,CAC5C,CACA,CACO,SAASM,GAAYnV,EAAK8B,EAAQ,CACrC,OAAO9B,IAAQ,OAAY,OAAY8B,CAC3C,CACA,MAAMsT,GAAK,KAAK,GACT,SAASC,GAAiBC,EAAS,CACtC,OAAQA,EAAUF,GAAM,GAC5B,CACO,MAAMG,GAAc,CAACC,EAAMC,EAAMC,KAAsB,CAC1D,GAAIF,EAAOE,EAAmB,EAC9B,GAAID,EAAOC,EAAmB,EAC9B,GAAIF,EAAOE,EAAmB,EAC9B,GAAID,EAAOC,EAAmB,CAClC,GACaC,GAAyB,CAACC,EAAWC,EAAYC,EAAgBC,EAAmBC,IAAgB,CAC7G,OAAQJ,EAAS,CACb,IAAK,OACD,OAAO,KAAK,MAAMC,CAAU,EAAIE,EAAoBC,EAAc,EACtE,IAAK,SACD,OAAO,KAAK,MAAMH,EAAaC,EAAiB,CAAC,EACrD,IAAK,QACD,OAAO,KAAK,MAAMD,EAAaC,CAAc,EAAIC,EAAoBC,EAAc,CAC1F,CACL,EACaC,GAAiB,CAACC,EAASC,EAAiBC,IAAoB,KAAK,IAAIF,EAASC,EAAkBC,EAAkB,CAAC,EACvHC,GAAkB,CAACrV,EAAGsG,EAAGgP,IAAOA,EAAG,IAAMtV,GAAKA,GAAKsV,EAAG,IAAMA,EAAG,IAAMhP,GAAKA,GAAKgP,EAAG,GAClFC,GAAcxZ,GAAU,CACjC,MAAMyZ,EAAKzZ,EAAM,SAAW,eAC5B,OAAQG,EAAmB,cAAC,MAAO,CAAE,QAAS,YAAa,KAAM,OAAQ,MAAO,4BAA8B,EAC1GA,EAAmB,cAAC,OAAQ,CAAE,EAAG,kQAAmQ,OAAQsZ,EAAI,YAAa,MAAO,cAAe,QAAS,eAAgB,QAAS,KAAM,OAAQ,aAAc,qBAAsB,EACvatZ,EAAmB,cAAC,OAAQ,CAAE,EAAG,gNAAiN,OAAQsZ,EAAI,YAAa,MAAO,cAAe,QAAS,eAAgB,QAAS,KAAM,OAAQ,aAAc,oBAAsB,EAAC,CAC9X,EACaC,GAAa1Z,GAAU,CAChC,MAAMyZ,EAAKzZ,EAAM,SAAW,eAC5B,OAAQG,EAAmB,cAAC,MAAO,CAAE,QAAS,YAAa,KAAM,OAAQ,MAAO,4BAA8B,EAC1GA,EAAmB,cAAC,OAAQ,CAAE,EAAG,mCAAoC,aAAc,qBAAsB,OAAQsZ,EAAI,YAAa,MAAO,cAAe,QAAS,eAAgB,OAAS,EAAC,CACnM,EACO,SAASE,GAAiBhS,EAASiS,EAAMjD,EAAM,CAClD,KAAM,CAACpF,EAAOK,CAAQ,EAAIiI,EAAc,SAAClS,CAAO,EAC1CmS,EAAa9B,SAAa,EAAI,EACpCC,YAAgB,IAAM,IAAM,CACxB6B,EAAW,QAAU,EACxB,EAAE,CAAE,GACL,MAAMC,EAAoB/B,SAAalC,GAAS7R,GAAK,CAC7C6V,EAAW,SACXlI,EAAS3N,CAAC,CAEtB,EAAO0S,CAAI,CAAC,EACRqD,yBAAsB,IAAM,CACpBF,EAAW,SACXC,EAAkB,QAAQ,IAAMpS,EAAO,CAAE,CAGhD,EAAEiS,CAAI,EACArI,CACX,CAEA,MAAM0I,GAAW,YACXC,GAAW,kCAIXC,GAAM,IAAI,OAAO,MAAQD,GAAW,MAAQD,GAAW,GAAG,EAEzD,SAASG,GAAU9T,EAAO,CAC7B,OAAO6T,GAAI,KAAK7T,CAAK,EAAI,MAAQ,SACrC,CACA,IAAI+T,GACG,SAASC,IAAoB,CAChC,GAAI,OAAO,SAAa,IACpB,MAAO,GACX,GAAID,KAAwB,OACxB,OAAOA,GACX,MAAME,EAAQ,SAAS,cAAc,GAAG,EACxCA,EAAM,MAAM,MAAQ,OACpBA,EAAM,MAAM,OAAS,QACrB,MAAMC,EAAQ,SAAS,cAAc,KAAK,EAC1CA,EAAM,GAAK,gBACXA,EAAM,MAAM,SAAW,WACvBA,EAAM,MAAM,IAAM,MAClBA,EAAM,MAAM,KAAO,MACnBA,EAAM,MAAM,WAAa,SACzBA,EAAM,MAAM,MAAQ,QACpBA,EAAM,MAAM,OAAS,QACrBA,EAAM,MAAM,SAAW,SACvBA,EAAM,OAAOD,CAAK,EAClB,SAAS,KAAK,OAAOC,CAAK,EAC1B,MAAMC,EAAKF,EAAM,YACjBC,EAAM,MAAM,SAAW,SACvB,IAAIE,EAAKH,EAAM,YACf,OAAIE,IAAOC,IACPA,EAAKF,EAAM,aAEfA,EAAM,OAAM,EACZH,GAAsBI,EAAKC,EACpBL,EACX,CAOA,MAAMM,GAAQ,OAAM,EACb,SAASC,GAA0BC,EAAY,CAElD,MAAMC,EAAgB9C,EAAY,OAAC,CAAC2C,GAAOE,CAAU,CAAC,EAClDC,EAAc,QAAQ,CAAC,IAAMD,IAE7BC,EAAc,QAAQ,CAAC,EAAID,GAE/BC,EAAc,QAAQ,CAAC,EAAID,EAC3B,KAAM,CAACtJ,EAAOK,CAAQ,EAAIiI,EAAc,SAACgB,CAAU,EAE7C,CAAG,CAAAE,CAAW,EAAIlB,aAClBmB,EAAgBC,EAAiB,YAACC,GAAM,CAK1C,MAAMC,EAAIL,EAAc,QAAQ,CAAC,EAC7BK,IAAMR,KACNO,EAAK,OAAOA,GAAO,WAAaA,EAAGC,CAAC,EAAID,EACpCA,IAAOC,KAGXA,IAAMR,IACNI,EAAY,CAAE,GAClBnJ,EAASwJ,GACD,OAAOF,GAAO,WACPA,EAAGC,IAAMR,GAAQS,EAAKD,CAAC,EAE3BD,CACV,EACDJ,EAAc,QAAQ,CAAC,EAAIH,GAC9B,EAAE,CAAE,GACCU,EAAUJ,cAAkB,IAAM,CACpCH,EAAc,QAAQ,CAAC,EAAIH,GAC3BI,EAAY,CAAE,EACjB,EAAE,CAAE,GACL,MAAO,CAACD,EAAc,QAAQ,CAAC,IAAMH,GAAQpJ,EAAQuJ,EAAc,QAAQ,CAAC,EAAGE,EAAeK,CAAO,CACzG,CACO,SAASC,GAAgCC,EAAK,CAGjD,GAAIA,EAAI,SAAW,EACf,MAAO,GAEX,IAAI7W,EAAQ,EACR8W,EAAQ,EACZ,UAAWC,KAAOF,EAAK,CAEnB,GADAC,GAASC,EAAI,OACTD,EAAQ,IACR,MACJ9W,GACH,CACD,OAAO6W,EAAI,MAAM,EAAG7W,CAAK,EAAE,KAAK,IAAI,CACxC,CACO,SAASgX,GAAYpV,EAAO,CAC/B,MAAMrG,EAAM+X,SAAa1R,CAAK,EAC9B,OAAKpF,GAAUoF,EAAOrG,EAAI,OAAO,IAC7BA,EAAI,QAAUqG,GAEXrG,EAAI,OACf,CC1LO,MAAM0b,GAAqB9N,GAAK,CACnC,KAAM,CAAE,KAAA+N,EAAM,SAAAC,EAAU,YAAAC,EAAa,YAAAC,CAAW,EAAKlO,EAC/CmO,EAAWJ,EAAK,OAAOK,GAAKA,IAAM,EAAE,EAC1C,GAAID,EAAS,SAAW,EACpB,OAAO,KAEX,MAAME,EAAYF,EAAS,OAAS,EACpC,OAAQ7b,gBAAoBsH,GAAyB,CAAE,cAAe,kCAAoC,EACtGtH,EAAmB,cAAC2S,GAAQ,SAAE,CAAE,WAAYoJ,EAAW,WAAY,GAAO,UAAWA,EAAW,aAAcA,EAAW,aAAcA,CAAW,EAAEF,EAAS,IAAIG,GAAO,CACpK,MAAMC,GAAeL,GAAA,YAAAA,EAAcI,KAAQhc,gBAAoB,MAAO,CAAE,UAAW,GAAO,IAAKgc,CAAK,GACpG,OAAQhc,EAAmB,cAAC,MAAO,CAAE,UAAW,0BAA2B,IAAKgc,GAAOC,CAAY,CAC/G,CAAS,CAAC,EACFP,GAAYC,GAAgB3b,gBAAoB,SAAU,CAAE,UAAW,gBAAiB,QAAS2b,CAAa,EAC1G3b,gBAAoBqZ,GAAY,IAAI,CAAC,CAAE,CACnD,ECRA,SAAS6C,IAAc,CACrB,MAAO,CACL,MAAO,GACP,QAAS,KACT,OAAQ,GACR,WAAY,KACZ,IAAK,GACL,UAAW,GACX,aAAc,GACd,UAAW,KACX,MAAO,KACP,WAAY,YACZ,OAAQ,GACR,SAAU,GACV,SAAU,KACV,SAAU,GACV,UAAW,KACX,OAAQ,GACR,YAAa,GACb,UAAW,KACX,WAAY,KACZ,MAAO,EACX,CACA,CAEA,IAAIC,GAAWD,GAAW,EAE1B,SAASE,GAAeC,EAAa,CACnCF,GAAWE,CACb,CAKA,MAAMC,GAAa,UACbC,GAAgB,IAAI,OAAOD,GAAW,OAAQ,GAAG,EACjDE,GAAqB,oDACrBC,GAAwB,IAAI,OAAOD,GAAmB,OAAQ,GAAG,EACjEE,GAAqB,CACzB,IAAK,QACL,IAAK,OACL,IAAK,OACL,IAAK,SACL,IAAK,OACP,EACMC,GAAwBpX,GAAOmX,GAAmBnX,CAAE,EAC1D,SAASqX,GAAOC,EAAMC,EAAQ,CAC5B,GAAIA,GACF,GAAIR,GAAW,KAAKO,CAAI,EACtB,OAAOA,EAAK,QAAQN,GAAeI,EAAoB,UAGrDH,GAAmB,KAAKK,CAAI,EAC9B,OAAOA,EAAK,QAAQJ,GAAuBE,EAAoB,EAInE,OAAOE,CACT,CAEA,MAAME,GAAe,6CAKrB,SAASC,GAASH,EAAM,CAEtB,OAAOA,EAAK,QAAQE,GAAc,CAACzI,EAAG,KACpC,EAAI,EAAE,cACF,IAAM,QAAgB,IACtB,EAAE,OAAO,CAAC,IAAM,IACX,EAAE,OAAO,CAAC,IAAM,IACnB,OAAO,aAAa,SAAS,EAAE,UAAU,CAAC,EAAG,EAAE,CAAC,EAChD,OAAO,aAAa,CAAC,EAAE,UAAU,CAAC,CAAC,EAElC,GACR,CACH,CAEA,MAAM2I,GAAQ,eAMd,SAASC,GAAKC,EAAOC,EAAK,CACxBD,EAAQ,OAAOA,GAAU,SAAWA,EAAQA,EAAM,OAClDC,EAAMA,GAAO,GACb,MAAMta,EAAM,CACV,QAAS,CAACgE,EAAMuW,KACdA,EAAMA,EAAI,QAAUA,EACpBA,EAAMA,EAAI,QAAQJ,GAAO,IAAI,EAC7BE,EAAQA,EAAM,QAAQrW,EAAMuW,CAAG,EACxBva,GAET,SAAU,IACD,IAAI,OAAOqa,EAAOC,CAAG,CAElC,EACE,OAAOta,CACT,CAEA,MAAMwa,GAAsB,UACtBC,GAAuB,gCAO7B,SAASC,GAASC,EAAUC,EAAMC,EAAM,CACtC,GAAIF,EAAU,CACZ,IAAIG,EACJ,GAAI,CACFA,EAAO,mBAAmBZ,GAASW,CAAI,CAAC,EACrC,QAAQL,GAAqB,EAAE,EAC/B,aACJ,MAAW,CACV,OAAO,IACR,CACD,GAAIM,EAAK,QAAQ,aAAa,IAAM,GAAKA,EAAK,QAAQ,WAAW,IAAM,GAAKA,EAAK,QAAQ,OAAO,IAAM,EACpG,OAAO,IAEV,CACGF,GAAQ,CAACH,GAAqB,KAAKI,CAAI,IACzCA,EAAOE,GAAWH,EAAMC,CAAI,GAE9B,GAAI,CACFA,EAAO,UAAUA,CAAI,EAAE,QAAQ,OAAQ,GAAG,CAC3C,MAAW,CACV,OAAO,IACR,CACD,OAAOA,CACT,CAEA,MAAMG,GAAW,GACXC,GAAa,mBACbC,GAAW,oBACXC,GAAS,4BAMf,SAASJ,GAAWH,EAAMC,EAAM,CACzBG,GAAS,IAAMJ,CAAI,IAIlBK,GAAW,KAAKL,CAAI,EACtBI,GAAS,IAAMJ,CAAI,EAAIA,EAAO,IAE9BI,GAAS,IAAMJ,CAAI,EAAIQ,GAAMR,EAAM,IAAK,EAAI,GAGhDA,EAAOI,GAAS,IAAMJ,CAAI,EAC1B,MAAMS,EAAeT,EAAK,QAAQ,GAAG,IAAM,GAE3C,OAAIC,EAAK,UAAU,EAAG,CAAC,IAAM,KACvBQ,EACKR,EAEFD,EAAK,QAAQM,GAAU,IAAI,EAAIL,EAC7BA,EAAK,OAAO,CAAC,IAAM,IACxBQ,EACKR,EAEFD,EAAK,QAAQO,GAAQ,IAAI,EAAIN,EAE7BD,EAAOC,CAElB,CAEA,MAAMS,GAAW,CAAE,KAAM,UAAoB,CAAE,GAE/C,SAASC,GAAWC,EAAUjD,EAAO,CAGnC,MAAMkD,EAAMD,EAAS,QAAQ,MAAO,CAACE,EAAOC,EAAQnD,IAAQ,CACxD,IAAIoD,EAAU,GACZC,EAAOF,EACT,KAAO,EAAEE,GAAQ,GAAKrD,EAAIqD,CAAI,IAAM,MAAMD,EAAU,CAACA,EACrD,OAAIA,EAGK,IAGA,IAEf,CAAK,EACDE,EAAQL,EAAI,MAAM,KAAK,EACzB,IAAIpa,EAAI,EAMR,GAHKya,EAAM,CAAC,EAAE,KAAM,GAAIA,EAAM,MAAK,EAC/BA,EAAM,OAAS,GAAK,CAACA,EAAMA,EAAM,OAAS,CAAC,EAAE,KAAM,GAAIA,EAAM,IAAK,EAElEA,EAAM,OAASvD,EACjBuD,EAAM,OAAOvD,CAAK,MAElB,MAAOuD,EAAM,OAASvD,GAAOuD,EAAM,KAAK,EAAE,EAG5C,KAAOza,EAAIya,EAAM,OAAQza,IAEvBya,EAAMza,CAAC,EAAIya,EAAMza,CAAC,EAAE,KAAI,EAAG,QAAQ,QAAS,GAAG,EAEjD,OAAOya,CACT,CAUA,SAASV,GAAM5C,EAAKjZ,EAAGwc,EAAQ,CAC7B,MAAMC,EAAIxD,EAAI,OACd,GAAIwD,IAAM,EACR,MAAO,GAIT,IAAIC,EAAU,EAGd,KAAOA,EAAUD,GAAG,CAClB,MAAME,EAAW1D,EAAI,OAAOwD,EAAIC,EAAU,CAAC,EAC3C,GAAIC,IAAa3c,GAAK,CAACwc,EACrBE,YACSC,IAAa3c,GAAKwc,EAC3BE,QAEA,MAEH,CAED,OAAOzD,EAAI,MAAM,EAAGwD,EAAIC,CAAO,CACjC,CAEA,SAASE,GAAmB3D,EAAKjY,EAAG,CAClC,GAAIiY,EAAI,QAAQjY,EAAE,CAAC,CAAC,IAAM,GACxB,MAAO,GAET,MAAMyb,EAAIxD,EAAI,OACd,IAAI4D,EAAQ,EACV/a,EAAI,EACN,KAAOA,EAAI2a,EAAG3a,IACZ,GAAImX,EAAInX,CAAC,IAAM,KACbA,YACSmX,EAAInX,CAAC,IAAMd,EAAE,CAAC,EACvB6b,YACS5D,EAAInX,CAAC,IAAMd,EAAE,CAAC,IACvB6b,IACIA,EAAQ,GACV,OAAO/a,EAIb,MAAO,EACT,CAEA,SAASgb,GAAyB/B,EAAK,CACjCA,GAAOA,EAAI,UAAY,CAACA,EAAI,QAC9B,QAAQ,KAAK,yMAAyM,CAE1N,CAOA,SAASgC,GAAaC,EAAShE,EAAO,CACpC,GAAIA,EAAQ,EACV,MAAO,GAET,IAAIzW,EAAS,GACb,KAAOyW,EAAQ,GACTA,EAAQ,IACVzW,GAAUya,GAEZhE,IAAU,EACVgE,GAAWA,EAEb,OAAOza,EAASya,CAClB,CAEA,SAASC,GAAWC,EAAKC,EAAMC,EAAKC,EAAO,CACzC,MAAM/B,EAAO6B,EAAK,KACZG,EAAQH,EAAK,MAAQ5C,GAAO4C,EAAK,KAAK,EAAI,KAC1CI,EAAOL,EAAI,CAAC,EAAE,QAAQ,cAAe,IAAI,EAE/C,GAAIA,EAAI,CAAC,EAAE,OAAO,CAAC,IAAM,IAAK,CAC5BG,EAAM,MAAM,OAAS,GACrB,MAAMG,EAAQ,CACZ,KAAM,OACN,IAAAJ,EACA,KAAA9B,EACA,MAAAgC,EACA,KAAAC,EACA,OAAQF,EAAM,aAAaE,CAAI,CACrC,EACI,OAAAF,EAAM,MAAM,OAAS,GACdG,CACR,CACD,MAAO,CACL,KAAM,QACN,IAAAJ,EACA,KAAA9B,EACA,MAAAgC,EACA,KAAM/C,GAAOgD,CAAI,CACrB,CACA,CAEA,SAASE,GAAuBL,EAAKG,EAAM,CACzC,MAAMG,EAAoBN,EAAI,MAAM,eAAe,EAEnD,GAAIM,IAAsB,KACxB,OAAOH,EAGT,MAAMI,EAAeD,EAAkB,CAAC,EAExC,OAAOH,EACJ,MAAM;AAAA,CAAI,EACV,IAAIlV,GAAQ,CACX,MAAMuV,EAAoBvV,EAAK,MAAM,MAAM,EAC3C,GAAIuV,IAAsB,KACxB,OAAOvV,EAGT,KAAM,CAACwV,CAAY,EAAID,EAEvB,OAAIC,EAAa,QAAUF,EAAa,OAC/BtV,EAAK,MAAMsV,EAAa,MAAM,EAGhCtV,CACb,CAAK,EACA,KAAK;AAAA,CAAI,CACd,CAKA,MAAMyV,EAAU,CACd,YAAY3Z,EAAS,CACnB,KAAK,QAAUA,GAAW2V,EAC3B,CAED,MAAMiE,EAAK,CACT,MAAMb,EAAM,KAAK,MAAM,MAAM,QAAQ,KAAKa,CAAG,EAC7C,GAAIb,GAAOA,EAAI,CAAC,EAAE,OAAS,EACzB,MAAO,CACL,KAAM,QACN,IAAKA,EAAI,CAAC,CAClB,CAEG,CAED,KAAKa,EAAK,CACR,MAAMb,EAAM,KAAK,MAAM,MAAM,KAAK,KAAKa,CAAG,EAC1C,GAAIb,EAAK,CACP,MAAMK,EAAOL,EAAI,CAAC,EAAE,QAAQ,YAAa,EAAE,EAC3C,MAAO,CACL,KAAM,OACN,IAAKA,EAAI,CAAC,EACV,eAAgB,WAChB,KAAO,KAAK,QAAQ,SAEhBK,EADA1B,GAAM0B,EAAM;AAAA,CAAI,CAE5B,CACK,CACF,CAED,OAAOQ,EAAK,CACV,MAAMb,EAAM,KAAK,MAAM,MAAM,OAAO,KAAKa,CAAG,EAC5C,GAAIb,EAAK,CACP,MAAME,EAAMF,EAAI,CAAC,EACXK,EAAOE,GAAuBL,EAAKF,EAAI,CAAC,GAAK,EAAE,EAErD,MAAO,CACL,KAAM,OACN,IAAAE,EACA,KAAMF,EAAI,CAAC,EAAIA,EAAI,CAAC,EAAE,KAAM,EAAC,QAAQ,KAAK,MAAM,OAAO,SAAU,IAAI,EAAIA,EAAI,CAAC,EAC9E,KAAAK,CACR,CACK,CACF,CAED,QAAQQ,EAAK,CACX,MAAMb,EAAM,KAAK,MAAM,MAAM,QAAQ,KAAKa,CAAG,EAC7C,GAAIb,EAAK,CACP,IAAIK,EAAOL,EAAI,CAAC,EAAE,KAAI,EAGtB,GAAI,KAAK,KAAKK,CAAI,EAAG,CACnB,MAAMS,EAAUnC,GAAM0B,EAAM,GAAG,GAC3B,KAAK,QAAQ,UAEN,CAACS,GAAW,KAAK,KAAKA,CAAO,KAEtCT,EAAOS,EAAQ,OAElB,CAED,MAAO,CACL,KAAM,UACN,IAAKd,EAAI,CAAC,EACV,MAAOA,EAAI,CAAC,EAAE,OACd,KAAAK,EACA,OAAQ,KAAK,MAAM,OAAOA,CAAI,CACtC,CACK,CACF,CAED,GAAGQ,EAAK,CACN,MAAMb,EAAM,KAAK,MAAM,MAAM,GAAG,KAAKa,CAAG,EACxC,GAAIb,EACF,MAAO,CACL,KAAM,KACN,IAAKA,EAAI,CAAC,CAClB,CAEG,CAED,WAAWa,EAAK,CACd,MAAMb,EAAM,KAAK,MAAM,MAAM,WAAW,KAAKa,CAAG,EAChD,GAAIb,EAAK,CACP,MAAMK,EAAOL,EAAI,CAAC,EAAE,QAAQ,eAAgB,EAAE,EACxChc,EAAM,KAAK,MAAM,MAAM,IAC7B,KAAK,MAAM,MAAM,IAAM,GACvB,MAAM+c,EAAS,KAAK,MAAM,YAAYV,CAAI,EAC1C,YAAK,MAAM,MAAM,IAAMrc,EAChB,CACL,KAAM,aACN,IAAKgc,EAAI,CAAC,EACV,OAAAe,EACA,KAAAV,CACR,CACK,CACF,CAED,KAAKQ,EAAK,CACR,IAAIb,EAAM,KAAK,MAAM,MAAM,KAAK,KAAKa,CAAG,EACxC,GAAIb,EAAK,CACP,IAAIE,EAAKc,EAAQC,EAAWC,EAAQtc,EAAGuc,EAAWC,EAChDC,EAAMC,EAAUC,EAASC,EAAcC,EAErCC,EAAO1B,EAAI,CAAC,EAAE,KAAI,EACtB,MAAM2B,EAAYD,EAAK,OAAS,EAE1BE,EAAO,CACX,KAAM,OACN,IAAK,GACL,QAASD,EACT,MAAOA,EAAY,CAACD,EAAK,MAAM,EAAG,EAAE,EAAI,GACxC,MAAO,GACP,MAAO,CAAE,CACjB,EAEMA,EAAOC,EAAY,aAAaD,EAAK,MAAM,EAAE,CAAC,GAAK,KAAKA,CAAI,GAExD,KAAK,QAAQ,WACfA,EAAOC,EAAYD,EAAO,SAI5B,MAAMG,EAAY,IAAI,OAAO,WAAWH,CAAI,8BAA+B,EAG3E,KAAOb,IACLY,EAAW,GACP,IAAEzB,EAAM6B,EAAU,KAAKhB,CAAG,IAI1B,KAAK,MAAM,MAAM,GAAG,KAAKA,CAAG,KANtB,CAkCV,GAxBAX,EAAMF,EAAI,CAAC,EACXa,EAAMA,EAAI,UAAUX,EAAI,MAAM,EAE9BmB,EAAOrB,EAAI,CAAC,EAAE,MAAM;AAAA,EAAM,CAAC,EAAE,CAAC,EAAE,QAAQ,OAAS8B,GAAM,IAAI,OAAO,EAAIA,EAAE,MAAM,CAAC,EAC/ER,EAAWT,EAAI,MAAM;AAAA,EAAM,CAAC,EAAE,CAAC,EAE3B,KAAK,QAAQ,UACfK,EAAS,EACTM,EAAeH,EAAK,aAEpBH,EAASlB,EAAI,CAAC,EAAE,OAAO,MAAM,EAC7BkB,EAASA,EAAS,EAAI,EAAIA,EAC1BM,EAAeH,EAAK,MAAMH,CAAM,EAChCA,GAAUlB,EAAI,CAAC,EAAE,QAGnBmB,EAAY,GAER,CAACE,GAAQ,OAAO,KAAKC,CAAQ,IAC/BpB,GAAOoB,EAAW;AAAA,EAClBT,EAAMA,EAAI,UAAUS,EAAS,OAAS,CAAC,EACvCG,EAAW,IAGT,CAACA,EAAU,CACb,MAAMM,EAAkB,IAAI,OAAO,QAAQ,KAAK,IAAI,EAAGb,EAAS,CAAC,CAAC,oDAAqD,EACjHc,EAAU,IAAI,OAAO,QAAQ,KAAK,IAAI,EAAGd,EAAS,CAAC,CAAC,oDAAoD,EACxGe,EAAmB,IAAI,OAAO,QAAQ,KAAK,IAAI,EAAGf,EAAS,CAAC,CAAC,iBAAiB,EAC9EgB,EAAoB,IAAI,OAAO,QAAQ,KAAK,IAAI,EAAGhB,EAAS,CAAC,CAAC,IAAI,EAGxE,KAAOL,IACLU,EAAUV,EAAI,MAAM;AAAA,EAAM,CAAC,EAAE,CAAC,EAC9BS,EAAWC,EAGP,KAAK,QAAQ,WACfD,EAAWA,EAAS,QAAQ,0BAA2B,IAAI,GAIzD,EAAAW,EAAiB,KAAKX,CAAQ,GAK9BY,EAAkB,KAAKZ,CAAQ,GAK/BS,EAAgB,KAAKT,CAAQ,GAK7BU,EAAQ,KAAKnB,CAAG,KAzBV,CA6BV,GAAIS,EAAS,OAAO,MAAM,GAAKJ,GAAU,CAACI,EAAS,OACjDE,GAAgB;AAAA,EAAOF,EAAS,MAAMJ,CAAM,MACvC,CAgBL,GAdIC,GAKAE,EAAK,OAAO,MAAM,GAAK,GAGvBY,EAAiB,KAAKZ,CAAI,GAG1Ba,EAAkB,KAAKb,CAAI,GAG3BW,EAAQ,KAAKX,CAAI,EACnB,MAGFG,GAAgB;AAAA,EAAOF,CACxB,CAEG,CAACH,GAAa,CAACG,EAAS,KAAI,IAC9BH,EAAY,IAGdjB,GAAOqB,EAAU;AAAA,EACjBV,EAAMA,EAAI,UAAUU,EAAQ,OAAS,CAAC,EACtCF,EAAOC,EAAS,MAAMJ,CAAM,CAC7B,CACF,CAEIU,EAAK,QAEJR,EACFQ,EAAK,MAAQ,GACJ,YAAY,KAAK1B,CAAG,IAC7BkB,EAAoB,KAKpB,KAAK,QAAQ,MACfJ,EAAS,cAAc,KAAKQ,CAAY,EACpCR,IACFC,EAAYD,EAAO,CAAC,IAAM,OAC1BQ,EAAeA,EAAa,QAAQ,eAAgB,EAAE,IAI1DI,EAAK,MAAM,KAAK,CACd,KAAM,YACN,IAAA1B,EACA,KAAM,CAAC,CAACc,EACR,QAASC,EACT,MAAO,GACP,KAAMO,CAChB,CAAS,EAEDI,EAAK,KAAO1B,CACb,CAGD0B,EAAK,MAAMA,EAAK,MAAM,OAAS,CAAC,EAAE,IAAM1B,EAAI,YAC5C0B,EAAK,MAAMA,EAAK,MAAM,OAAS,CAAC,EAAE,KAAOJ,EAAa,YACtDI,EAAK,IAAMA,EAAK,IAAI,UAAS,EAE7B,MAAMrC,EAAIqC,EAAK,MAAM,OAGrB,IAAKhd,EAAI,EAAGA,EAAI2a,EAAG3a,IAIjB,GAHA,KAAK,MAAM,MAAM,IAAM,GACvBgd,EAAK,MAAMhd,CAAC,EAAE,OAAS,KAAK,MAAM,YAAYgd,EAAK,MAAMhd,CAAC,EAAE,KAAM,CAAE,GAEhE,CAACgd,EAAK,MAAO,CAEf,MAAMO,EAAUP,EAAK,MAAMhd,CAAC,EAAE,OAAO,OAAOkd,GAAKA,EAAE,OAAS,OAAO,EAC7DM,EAAwBD,EAAQ,OAAS,GAAKA,EAAQ,KAAKL,GAAK,SAAS,KAAKA,EAAE,GAAG,CAAC,EAE1FF,EAAK,MAAQQ,CACd,CAIH,GAAIR,EAAK,MACP,IAAKhd,EAAI,EAAGA,EAAI2a,EAAG3a,IACjBgd,EAAK,MAAMhd,CAAC,EAAE,MAAQ,GAI1B,OAAOgd,CACR,CACF,CAED,KAAKf,EAAK,CACR,MAAMb,EAAM,KAAK,MAAM,MAAM,KAAK,KAAKa,CAAG,EAC1C,GAAIb,EAAK,CACP,MAAMM,EAAQ,CACZ,KAAM,OACN,IAAKN,EAAI,CAAC,EACV,IAAK,CAAC,KAAK,QAAQ,YACbA,EAAI,CAAC,IAAM,OAASA,EAAI,CAAC,IAAM,UAAYA,EAAI,CAAC,IAAM,SAC5D,KAAMA,EAAI,CAAC,CACnB,EACM,GAAI,KAAK,QAAQ,SAAU,CACzB,MAAMK,EAAO,KAAK,QAAQ,UAAY,KAAK,QAAQ,UAAUL,EAAI,CAAC,CAAC,EAAI3C,GAAO2C,EAAI,CAAC,CAAC,EACpFM,EAAM,KAAO,YACbA,EAAM,KAAOD,EACbC,EAAM,OAAS,KAAK,MAAM,OAAOD,CAAI,CACtC,CACD,OAAOC,CACR,CACF,CAED,IAAIO,EAAK,CACP,MAAMb,EAAM,KAAK,MAAM,MAAM,IAAI,KAAKa,CAAG,EACzC,GAAIb,EAAK,CACP,MAAMjZ,EAAMiZ,EAAI,CAAC,EAAE,YAAW,EAAG,QAAQ,OAAQ,GAAG,EAC9C5B,EAAO4B,EAAI,CAAC,EAAIA,EAAI,CAAC,EAAE,QAAQ,WAAY,IAAI,EAAE,QAAQ,KAAK,MAAM,OAAO,SAAU,IAAI,EAAI,GAC7FI,EAAQJ,EAAI,CAAC,EAAIA,EAAI,CAAC,EAAE,UAAU,EAAGA,EAAI,CAAC,EAAE,OAAS,CAAC,EAAE,QAAQ,KAAK,MAAM,OAAO,SAAU,IAAI,EAAIA,EAAI,CAAC,EAC/G,MAAO,CACL,KAAM,MACN,IAAAjZ,EACA,IAAKiZ,EAAI,CAAC,EACV,KAAA5B,EACA,MAAAgC,CACR,CACK,CACF,CAED,MAAMS,EAAK,CACT,MAAMb,EAAM,KAAK,MAAM,MAAM,MAAM,KAAKa,CAAG,EAC3C,GAAIb,EAAK,CACP,MAAMzQ,EAAO,CACX,KAAM,QACN,OAAQuP,GAAWkB,EAAI,CAAC,CAAC,EAAE,IAAIld,IAAc,CAAE,KAAMA,CAAC,EAAK,EAC3D,MAAOkd,EAAI,CAAC,EAAE,QAAQ,aAAc,EAAE,EAAE,MAAM,QAAQ,EACtD,KAAMA,EAAI,CAAC,GAAKA,EAAI,CAAC,EAAE,OAASA,EAAI,CAAC,EAAE,QAAQ,YAAa,EAAE,EAAE,MAAM;AAAA,CAAI,EAAI,CAAE,CACxF,EAEM,GAAIzQ,EAAK,OAAO,SAAWA,EAAK,MAAM,OAAQ,CAC5CA,EAAK,IAAMyQ,EAAI,CAAC,EAEhB,IAAIT,EAAIhQ,EAAK,MAAM,OACf3K,EAAGyd,EAAGC,EAAGtD,EACb,IAAKpa,EAAI,EAAGA,EAAI2a,EAAG3a,IACb,YAAY,KAAK2K,EAAK,MAAM3K,CAAC,CAAC,EAChC2K,EAAK,MAAM3K,CAAC,EAAI,QACP,aAAa,KAAK2K,EAAK,MAAM3K,CAAC,CAAC,EACxC2K,EAAK,MAAM3K,CAAC,EAAI,SACP,YAAY,KAAK2K,EAAK,MAAM3K,CAAC,CAAC,EACvC2K,EAAK,MAAM3K,CAAC,EAAI,OAEhB2K,EAAK,MAAM3K,CAAC,EAAI,KAKpB,IADA2a,EAAIhQ,EAAK,KAAK,OACT3K,EAAI,EAAGA,EAAI2a,EAAG3a,IACjB2K,EAAK,KAAK3K,CAAC,EAAIka,GAAWvP,EAAK,KAAK3K,CAAC,EAAG2K,EAAK,OAAO,MAAM,EAAE,IAAIzM,IAAc,CAAE,KAAMA,GAAM,EAO9F,IADAyc,EAAIhQ,EAAK,OAAO,OACX8S,EAAI,EAAGA,EAAI9C,EAAG8C,IACjB9S,EAAK,OAAO8S,CAAC,EAAE,OAAS,KAAK,MAAM,OAAO9S,EAAK,OAAO8S,CAAC,EAAE,IAAI,EAK/D,IADA9C,EAAIhQ,EAAK,KAAK,OACT8S,EAAI,EAAGA,EAAI9C,EAAG8C,IAEjB,IADArD,EAAMzP,EAAK,KAAK8S,CAAC,EACZC,EAAI,EAAGA,EAAItD,EAAI,OAAQsD,IAC1BtD,EAAIsD,CAAC,EAAE,OAAS,KAAK,MAAM,OAAOtD,EAAIsD,CAAC,EAAE,IAAI,EAIjD,OAAO/S,CACR,CACF,CACF,CAED,SAASsR,EAAK,CACZ,MAAMb,EAAM,KAAK,MAAM,MAAM,SAAS,KAAKa,CAAG,EAC9C,GAAIb,EACF,MAAO,CACL,KAAM,UACN,IAAKA,EAAI,CAAC,EACV,MAAOA,EAAI,CAAC,EAAE,OAAO,CAAC,IAAM,IAAM,EAAI,EACtC,KAAMA,EAAI,CAAC,EACX,OAAQ,KAAK,MAAM,OAAOA,EAAI,CAAC,CAAC,CACxC,CAEG,CAED,UAAUa,EAAK,CACb,MAAMb,EAAM,KAAK,MAAM,MAAM,UAAU,KAAKa,CAAG,EAC/C,GAAIb,EAAK,CACP,MAAMK,EAAOL,EAAI,CAAC,EAAE,OAAOA,EAAI,CAAC,EAAE,OAAS,CAAC,IAAM;AAAA,EAC9CA,EAAI,CAAC,EAAE,MAAM,EAAG,EAAE,EAClBA,EAAI,CAAC,EACT,MAAO,CACL,KAAM,YACN,IAAKA,EAAI,CAAC,EACV,KAAAK,EACA,OAAQ,KAAK,MAAM,OAAOA,CAAI,CACtC,CACK,CACF,CAED,KAAKQ,EAAK,CACR,MAAMb,EAAM,KAAK,MAAM,MAAM,KAAK,KAAKa,CAAG,EAC1C,GAAIb,EACF,MAAO,CACL,KAAM,OACN,IAAKA,EAAI,CAAC,EACV,KAAMA,EAAI,CAAC,EACX,OAAQ,KAAK,MAAM,OAAOA,EAAI,CAAC,CAAC,CACxC,CAEG,CAED,OAAOa,EAAK,CACV,MAAMb,EAAM,KAAK,MAAM,OAAO,OAAO,KAAKa,CAAG,EAC7C,GAAIb,EACF,MAAO,CACL,KAAM,SACN,IAAKA,EAAI,CAAC,EACV,KAAM3C,GAAO2C,EAAI,CAAC,CAAC,CAC3B,CAEG,CAED,IAAIa,EAAK,CACP,MAAMb,EAAM,KAAK,MAAM,OAAO,IAAI,KAAKa,CAAG,EAC1C,GAAIb,EACF,MAAI,CAAC,KAAK,MAAM,MAAM,QAAU,QAAQ,KAAKA,EAAI,CAAC,CAAC,EACjD,KAAK,MAAM,MAAM,OAAS,GACjB,KAAK,MAAM,MAAM,QAAU,UAAU,KAAKA,EAAI,CAAC,CAAC,IACzD,KAAK,MAAM,MAAM,OAAS,IAExB,CAAC,KAAK,MAAM,MAAM,YAAc,iCAAiC,KAAKA,EAAI,CAAC,CAAC,EAC9E,KAAK,MAAM,MAAM,WAAa,GACrB,KAAK,MAAM,MAAM,YAAc,mCAAmC,KAAKA,EAAI,CAAC,CAAC,IACtF,KAAK,MAAM,MAAM,WAAa,IAGzB,CACL,KAAM,KAAK,QAAQ,SACf,OACA,OACJ,IAAKA,EAAI,CAAC,EACV,OAAQ,KAAK,MAAM,MAAM,OACzB,WAAY,KAAK,MAAM,MAAM,WAC7B,KAAM,KAAK,QAAQ,SACd,KAAK,QAAQ,UACZ,KAAK,QAAQ,UAAUA,EAAI,CAAC,CAAC,EAC7B3C,GAAO2C,EAAI,CAAC,CAAC,EACfA,EAAI,CAAC,CACjB,CAEG,CAED,KAAKa,EAAK,CACR,MAAMb,EAAM,KAAK,MAAM,OAAO,KAAK,KAAKa,CAAG,EAC3C,GAAIb,EAAK,CACP,MAAMuC,EAAavC,EAAI,CAAC,EAAE,KAAI,EAC9B,GAAI,CAAC,KAAK,QAAQ,UAAY,KAAK,KAAKuC,CAAU,EAAG,CAEnD,GAAI,CAAE,KAAK,KAAKA,CAAU,EACxB,OAIF,MAAMC,EAAa7D,GAAM4D,EAAW,MAAM,EAAG,EAAE,EAAG,IAAI,EACtD,IAAKA,EAAW,OAASC,EAAW,QAAU,IAAM,EAClD,MAEV,KAAa,CAEL,MAAMC,EAAiB/C,GAAmBM,EAAI,CAAC,EAAG,IAAI,EACtD,GAAIyC,EAAiB,GAAI,CAEvB,MAAMC,GADQ1C,EAAI,CAAC,EAAE,QAAQ,GAAG,IAAM,EAAI,EAAI,GACtBA,EAAI,CAAC,EAAE,OAASyC,EACxCzC,EAAI,CAAC,EAAIA,EAAI,CAAC,EAAE,UAAU,EAAGyC,CAAc,EAC3CzC,EAAI,CAAC,EAAIA,EAAI,CAAC,EAAE,UAAU,EAAG0C,CAAO,EAAE,OACtC1C,EAAI,CAAC,EAAI,EACV,CACF,CACD,IAAI5B,EAAO4B,EAAI,CAAC,EACZI,EAAQ,GACZ,GAAI,KAAK,QAAQ,SAAU,CAEzB,MAAMH,EAAO,gCAAgC,KAAK7B,CAAI,EAElD6B,IACF7B,EAAO6B,EAAK,CAAC,EACbG,EAAQH,EAAK,CAAC,EAExB,MACQG,EAAQJ,EAAI,CAAC,EAAIA,EAAI,CAAC,EAAE,MAAM,EAAG,EAAE,EAAI,GAGzC,OAAA5B,EAAOA,EAAK,OACR,KAAK,KAAKA,CAAI,IACZ,KAAK,QAAQ,UAAY,CAAE,KAAK,KAAKmE,CAAU,EAEjDnE,EAAOA,EAAK,MAAM,CAAC,EAEnBA,EAAOA,EAAK,MAAM,EAAG,EAAE,GAGpB2B,GAAWC,EAAK,CACrB,KAAM5B,GAAOA,EAAK,QAAQ,KAAK,MAAM,OAAO,SAAU,IAAI,EAC1D,MAAOgC,GAAQA,EAAM,QAAQ,KAAK,MAAM,OAAO,SAAU,IAAI,CAC9D,EAAEJ,EAAI,CAAC,EAAG,KAAK,KAAK,CACtB,CACF,CAED,QAAQa,EAAK8B,EAAO,CAClB,IAAI3C,EACJ,IAAKA,EAAM,KAAK,MAAM,OAAO,QAAQ,KAAKa,CAAG,KACrCb,EAAM,KAAK,MAAM,OAAO,OAAO,KAAKa,CAAG,GAAI,CACjD,IAAIZ,GAAQD,EAAI,CAAC,GAAKA,EAAI,CAAC,GAAG,QAAQ,OAAQ,GAAG,EAEjD,GADAC,EAAO0C,EAAM1C,EAAK,YAAa,GAC3B,CAACA,EAAM,CACT,MAAMI,EAAOL,EAAI,CAAC,EAAE,OAAO,CAAC,EAC5B,MAAO,CACL,KAAM,OACN,IAAKK,EACL,KAAAA,CACV,CACO,CACD,OAAON,GAAWC,EAAKC,EAAMD,EAAI,CAAC,EAAG,KAAK,KAAK,CAChD,CACF,CAED,SAASa,EAAK+B,EAAWC,EAAW,GAAI,CACtC,IAAI5D,EAAQ,KAAK,MAAM,OAAO,SAAS,OAAO,KAAK4B,CAAG,EAItD,GAHI,CAAC5B,GAGDA,EAAM,CAAC,GAAK4D,EAAS,MAAM,eAAe,EAAG,OAEjD,MAAMC,EAAW7D,EAAM,CAAC,GAAKA,EAAM,CAAC,GAAK,GAEzC,GAAI,CAAC6D,GAAaA,IAAaD,IAAa,IAAM,KAAK,MAAM,OAAO,YAAY,KAAKA,CAAQ,GAAK,CAChG,MAAME,EAAU9D,EAAM,CAAC,EAAE,OAAS,EAClC,IAAI+D,EAAQC,EAASC,EAAaH,EAASI,EAAgB,EAE3D,MAAMC,EAASnE,EAAM,CAAC,EAAE,CAAC,IAAM,IAAM,KAAK,MAAM,OAAO,SAAS,UAAY,KAAK,MAAM,OAAO,SAAS,UAMvG,IALAmE,EAAO,UAAY,EAGnBR,EAAYA,EAAU,MAAM,GAAK/B,EAAI,OAASkC,CAAO,GAE7C9D,EAAQmE,EAAO,KAAKR,CAAS,IAAM,MAAM,CAG/C,GAFAI,EAAS/D,EAAM,CAAC,GAAKA,EAAM,CAAC,GAAKA,EAAM,CAAC,GAAKA,EAAM,CAAC,GAAKA,EAAM,CAAC,GAAKA,EAAM,CAAC,EAExE,CAAC+D,EAAQ,SAIb,GAFAC,EAAUD,EAAO,OAEb/D,EAAM,CAAC,GAAKA,EAAM,CAAC,EAAG,CACxBiE,GAAcD,EACd,QACD,UAAUhE,EAAM,CAAC,GAAKA,EAAM,CAAC,IACxB8D,EAAU,GAAK,GAAGA,EAAUE,GAAW,GAAI,CAC7CE,GAAiBF,EACjB,QACD,CAKH,GAFAC,GAAcD,EAEVC,EAAa,EAAG,SAGpBD,EAAU,KAAK,IAAIA,EAASA,EAAUC,EAAaC,CAAa,EAEhE,MAAMjD,EAAMW,EAAI,MAAM,EAAGkC,EAAU9D,EAAM,OAASA,EAAM,CAAC,EAAE,OAAS+D,EAAO,QAAUC,CAAO,EAG5F,GAAI,KAAK,IAAIF,EAASE,CAAO,EAAI,EAAG,CAClC,MAAM5C,EAAOH,EAAI,MAAM,EAAG,EAAE,EAC5B,MAAO,CACL,KAAM,KACN,IAAAA,EACA,KAAAG,EACA,OAAQ,KAAK,MAAM,aAAaA,CAAI,CAChD,CACS,CAGD,MAAMA,EAAOH,EAAI,MAAM,EAAG,EAAE,EAC5B,MAAO,CACL,KAAM,SACN,IAAAA,EACA,KAAAG,EACA,OAAQ,KAAK,MAAM,aAAaA,CAAI,CAC9C,CACO,CACF,CACF,CAED,SAASQ,EAAK,CACZ,MAAMb,EAAM,KAAK,MAAM,OAAO,KAAK,KAAKa,CAAG,EAC3C,GAAIb,EAAK,CACP,IAAIK,EAAOL,EAAI,CAAC,EAAE,QAAQ,MAAO,GAAG,EACpC,MAAMqD,EAAmB,OAAO,KAAKhD,CAAI,EACnCiD,EAA0B,KAAK,KAAKjD,CAAI,GAAK,KAAK,KAAKA,CAAI,EACjE,OAAIgD,GAAoBC,IACtBjD,EAAOA,EAAK,UAAU,EAAGA,EAAK,OAAS,CAAC,GAE1CA,EAAOhD,GAAOgD,EAAM,EAAI,EACjB,CACL,KAAM,WACN,IAAKL,EAAI,CAAC,EACV,KAAAK,CACR,CACK,CACF,CAED,GAAGQ,EAAK,CACN,MAAMb,EAAM,KAAK,MAAM,OAAO,GAAG,KAAKa,CAAG,EACzC,GAAIb,EACF,MAAO,CACL,KAAM,KACN,IAAKA,EAAI,CAAC,CAClB,CAEG,CAED,IAAIa,EAAK,CACP,MAAMb,EAAM,KAAK,MAAM,OAAO,IAAI,KAAKa,CAAG,EAC1C,GAAIb,EACF,MAAO,CACL,KAAM,MACN,IAAKA,EAAI,CAAC,EACV,KAAMA,EAAI,CAAC,EACX,OAAQ,KAAK,MAAM,aAAaA,EAAI,CAAC,CAAC,CAC9C,CAEG,CAED,SAASa,EAAK0C,EAAQ,CACpB,MAAMvD,EAAM,KAAK,MAAM,OAAO,SAAS,KAAKa,CAAG,EAC/C,GAAIb,EAAK,CACP,IAAIK,EAAMjC,EACV,OAAI4B,EAAI,CAAC,IAAM,KACbK,EAAOhD,GAAO,KAAK,QAAQ,OAASkG,EAAOvD,EAAI,CAAC,CAAC,EAAIA,EAAI,CAAC,CAAC,EAC3D5B,EAAO,UAAYiC,IAEnBA,EAAOhD,GAAO2C,EAAI,CAAC,CAAC,EACpB5B,EAAOiC,GAGF,CACL,KAAM,OACN,IAAKL,EAAI,CAAC,EACV,KAAAK,EACA,KAAAjC,EACA,OAAQ,CACN,CACE,KAAM,OACN,IAAKiC,EACL,KAAAA,CACD,CACF,CACT,CACK,CACF,CAED,IAAIQ,EAAK0C,EAAQ,CACf,IAAIvD,EACJ,GAAIA,EAAM,KAAK,MAAM,OAAO,IAAI,KAAKa,CAAG,EAAG,CACzC,IAAIR,EAAMjC,EACV,GAAI4B,EAAI,CAAC,IAAM,IACbK,EAAOhD,GAAO,KAAK,QAAQ,OAASkG,EAAOvD,EAAI,CAAC,CAAC,EAAIA,EAAI,CAAC,CAAC,EAC3D5B,EAAO,UAAYiC,MACd,CAEL,IAAImD,EACJ,GACEA,EAAcxD,EAAI,CAAC,EACnBA,EAAI,CAAC,EAAI,KAAK,MAAM,OAAO,WAAW,KAAKA,EAAI,CAAC,CAAC,EAAE,CAAC,QAC7CwD,IAAgBxD,EAAI,CAAC,GAC9BK,EAAOhD,GAAO2C,EAAI,CAAC,CAAC,EAChBA,EAAI,CAAC,IAAM,OACb5B,EAAO,UAAY4B,EAAI,CAAC,EAExB5B,EAAO4B,EAAI,CAAC,CAEf,CACD,MAAO,CACL,KAAM,OACN,IAAKA,EAAI,CAAC,EACV,KAAAK,EACA,KAAAjC,EACA,OAAQ,CACN,CACE,KAAM,OACN,IAAKiC,EACL,KAAAA,CACD,CACF,CACT,CACK,CACF,CAED,WAAWQ,EAAK4C,EAAa,CAC3B,MAAMzD,EAAM,KAAK,MAAM,OAAO,KAAK,KAAKa,CAAG,EAC3C,GAAIb,EAAK,CACP,IAAIK,EACJ,OAAI,KAAK,MAAM,MAAM,WACnBA,EAAO,KAAK,QAAQ,SAAY,KAAK,QAAQ,UAAY,KAAK,QAAQ,UAAUL,EAAI,CAAC,CAAC,EAAI3C,GAAO2C,EAAI,CAAC,CAAC,EAAKA,EAAI,CAAC,EAEjHK,EAAOhD,GAAO,KAAK,QAAQ,YAAcoG,EAAYzD,EAAI,CAAC,CAAC,EAAIA,EAAI,CAAC,CAAC,EAEhE,CACL,KAAM,OACN,IAAKA,EAAI,CAAC,EACV,KAAAK,CACR,CACK,CACF,CACH,CAKA,MAAMqD,GAAQ,CACZ,QAAS,mBACT,KAAM,uCACN,OAAQ,8GACR,GAAI,qEACJ,QAAS,uCACT,WAAY,0CACZ,KAAM,uCACN,KAAM,mdAUN,IAAK,kGACL,MAAO7E,GACP,SAAU,gDAGV,WAAY,uFACZ,KAAM,SACR,EAEA6E,GAAM,OAAS,8BACfA,GAAM,OAAS,+DACfA,GAAM,IAAM/F,GAAK+F,GAAM,GAAG,EACvB,QAAQ,QAASA,GAAM,MAAM,EAC7B,QAAQ,QAASA,GAAM,MAAM,EAC7B,WAEHA,GAAM,OAAS,wBACfA,GAAM,cAAgB/F,GAAK,eAAe,EACvC,QAAQ,OAAQ+F,GAAM,MAAM,EAC5B,WAEHA,GAAM,KAAO/F,GAAK+F,GAAM,IAAI,EACzB,QAAQ,QAASA,GAAM,MAAM,EAC7B,QAAQ,KAAM,iEAAiE,EAC/E,QAAQ,MAAO,UAAYA,GAAM,IAAI,OAAS,GAAG,EACjD,WAEHA,GAAM,KAAO,gWAMbA,GAAM,SAAW,+BACjBA,GAAM,KAAO/F,GAAK+F,GAAM,KAAM,GAAG,EAC9B,QAAQ,UAAWA,GAAM,QAAQ,EACjC,QAAQ,MAAOA,GAAM,IAAI,EACzB,QAAQ,YAAa,0EAA0E,EAC/F,WAEHA,GAAM,UAAY/F,GAAK+F,GAAM,UAAU,EACpC,QAAQ,KAAMA,GAAM,EAAE,EACtB,QAAQ,UAAW,eAAe,EAClC,QAAQ,YAAa,EAAE,EACvB,QAAQ,SAAU,EAAE,EACpB,QAAQ,aAAc,SAAS,EAC/B,QAAQ,SAAU,gDAAgD,EAClE,QAAQ,OAAQ,wBAAwB,EACxC,QAAQ,OAAQ,6DAA6D,EAC7E,QAAQ,MAAOA,GAAM,IAAI,EACzB,WAEHA,GAAM,WAAa/F,GAAK+F,GAAM,UAAU,EACrC,QAAQ,YAAaA,GAAM,SAAS,EACpC,WAMHA,GAAM,OAAS,CAAE,GAAGA,IAMpBA,GAAM,IAAM,CACV,GAAGA,GAAM,OACT,MAAO,kKAGT,EAEAA,GAAM,IAAI,MAAQ/F,GAAK+F,GAAM,IAAI,KAAK,EACnC,QAAQ,KAAMA,GAAM,EAAE,EACtB,QAAQ,UAAW,eAAe,EAClC,QAAQ,aAAc,SAAS,EAC/B,QAAQ,OAAQ,YAAY,EAC5B,QAAQ,SAAU,gDAAgD,EAClE,QAAQ,OAAQ,wBAAwB,EACxC,QAAQ,OAAQ,6DAA6D,EAC7E,QAAQ,MAAOA,GAAM,IAAI,EACzB,WAEHA,GAAM,IAAI,UAAY/F,GAAK+F,GAAM,UAAU,EACxC,QAAQ,KAAMA,GAAM,EAAE,EACtB,QAAQ,UAAW,eAAe,EAClC,QAAQ,YAAa,EAAE,EACvB,QAAQ,QAASA,GAAM,IAAI,KAAK,EAChC,QAAQ,aAAc,SAAS,EAC/B,QAAQ,SAAU,gDAAgD,EAClE,QAAQ,OAAQ,wBAAwB,EACxC,QAAQ,OAAQ,6DAA6D,EAC7E,QAAQ,MAAOA,GAAM,IAAI,EACzB,WAKHA,GAAM,SAAW,CACf,GAAGA,GAAM,OACT,KAAM/F,GACJ,wIAEwE,EACvE,QAAQ,UAAW+F,GAAM,QAAQ,EACjC,QAAQ,OAAQ,mKAGkB,EAClC,SAAU,EACb,IAAK,oEACL,QAAS,yBACT,OAAQ7E,GACR,SAAU,mCACV,UAAWlB,GAAK+F,GAAM,OAAO,UAAU,EACpC,QAAQ,KAAMA,GAAM,EAAE,EACtB,QAAQ,UAAW;AAAA,EAAiB,EACpC,QAAQ,WAAYA,GAAM,QAAQ,EAClC,QAAQ,aAAc,SAAS,EAC/B,QAAQ,UAAW,EAAE,EACrB,QAAQ,QAAS,EAAE,EACnB,QAAQ,QAAS,EAAE,EACnB,SAAU,CACf,EAKA,MAAMC,GAAS,CACb,OAAQ,8CACR,SAAU,sCACV,IAAK9E,GACL,IAAK,2JAML,KAAM,gDACN,QAAS,0BACT,OAAQ,wBACR,cAAe,wBACf,SAAU,CACR,OAAQ,2DAGR,UAAW,6RACX,UAAW,gPACZ,EACD,KAAM,sCACN,GAAI,wBACJ,IAAKA,GACL,KAAM,8EACN,YAAa,oBACf,EAIA8E,GAAO,aAAe,uCACtBA,GAAO,YAAchG,GAAKgG,GAAO,WAAW,EAAE,QAAQ,eAAgBA,GAAO,YAAY,EAAE,SAAQ,EAGnGA,GAAO,UAAY,4CAGnBA,GAAO,YAAc,8BAErBA,GAAO,SAAWhG,GAAK+F,GAAM,QAAQ,EAAE,QAAQ,YAAa,KAAK,EAAE,WAEnEC,GAAO,SAAS,OAAShG,GAAKgG,GAAO,SAAS,MAAM,EACjD,QAAQ,SAAUA,GAAO,YAAY,EACrC,WAEHA,GAAO,SAAS,UAAYhG,GAAKgG,GAAO,SAAS,UAAW,GAAG,EAC5D,QAAQ,SAAUA,GAAO,YAAY,EACrC,WAEHA,GAAO,SAAS,UAAYhG,GAAKgG,GAAO,SAAS,UAAW,GAAG,EAC5D,QAAQ,SAAUA,GAAO,YAAY,EACrC,WAEHA,GAAO,SAAW,8CAElBA,GAAO,QAAU,+BACjBA,GAAO,OAAS,+IAChBA,GAAO,SAAWhG,GAAKgG,GAAO,QAAQ,EACnC,QAAQ,SAAUA,GAAO,OAAO,EAChC,QAAQ,QAASA,GAAO,MAAM,EAC9B,WAEHA,GAAO,WAAa,8EAEpBA,GAAO,IAAMhG,GAAKgG,GAAO,GAAG,EACzB,QAAQ,UAAWA,GAAO,QAAQ,EAClC,QAAQ,YAAaA,GAAO,UAAU,EACtC,WAEHA,GAAO,OAAS,sDAChBA,GAAO,MAAQ,uCACfA,GAAO,OAAS,8DAEhBA,GAAO,KAAOhG,GAAKgG,GAAO,IAAI,EAC3B,QAAQ,QAASA,GAAO,MAAM,EAC9B,QAAQ,OAAQA,GAAO,KAAK,EAC5B,QAAQ,QAASA,GAAO,MAAM,EAC9B,WAEHA,GAAO,QAAUhG,GAAKgG,GAAO,OAAO,EACjC,QAAQ,QAASA,GAAO,MAAM,EAC9B,QAAQ,MAAOD,GAAM,MAAM,EAC3B,WAEHC,GAAO,OAAShG,GAAKgG,GAAO,MAAM,EAC/B,QAAQ,MAAOD,GAAM,MAAM,EAC3B,WAEHC,GAAO,cAAgBhG,GAAKgG,GAAO,cAAe,GAAG,EAClD,QAAQ,UAAWA,GAAO,OAAO,EACjC,QAAQ,SAAUA,GAAO,MAAM,EAC/B,WAMHA,GAAO,OAAS,CAAE,GAAGA,IAMrBA,GAAO,SAAW,CAChB,GAAGA,GAAO,OACV,OAAQ,CACN,MAAO,WACP,OAAQ,iEACR,OAAQ,cACR,OAAQ,UACT,EACD,GAAI,CACF,MAAO,QACP,OAAQ,6DACR,OAAQ,YACR,OAAQ,SACT,EACD,KAAMhG,GAAK,yBAAyB,EACjC,QAAQ,QAASgG,GAAO,MAAM,EAC9B,SAAU,EACb,QAAShG,GAAK,+BAA+B,EAC1C,QAAQ,QAASgG,GAAO,MAAM,EAC9B,SAAU,CACf,EAMAA,GAAO,IAAM,CACX,GAAGA,GAAO,OACV,OAAQhG,GAAKgG,GAAO,MAAM,EAAE,QAAQ,KAAM,MAAM,EAAE,SAAU,EAC5D,gBAAiB,4EACjB,IAAK,mEACL,WAAY,6EACZ,IAAK,+CACL,KAAM,4NACR,EAEAA,GAAO,IAAI,IAAMhG,GAAKgG,GAAO,IAAI,IAAK,GAAG,EACtC,QAAQ,QAASA,GAAO,IAAI,eAAe,EAC3C,WAKHA,GAAO,OAAS,CACd,GAAGA,GAAO,IACV,GAAIhG,GAAKgG,GAAO,EAAE,EAAE,QAAQ,OAAQ,GAAG,EAAE,SAAU,EACnD,KAAMhG,GAAKgG,GAAO,IAAI,IAAI,EACvB,QAAQ,OAAQ,eAAe,EAC/B,QAAQ,UAAW,GAAG,EACtB,SAAU,CACf,EAMA,SAASF,GAAYpD,EAAM,CACzB,OAAOA,EAEJ,QAAQ,OAAQ,GAAQ,EAExB,QAAQ,MAAO,GAAQ,EAEvB,QAAQ,0BAA2B,KAAU,EAE7C,QAAQ,KAAM,GAAQ,EAEtB,QAAQ,+BAAgC,KAAU,EAElD,QAAQ,KAAM,GAAQ,EAEtB,QAAQ,SAAU,GAAQ,CAC/B,CAMA,SAASkD,GAAOlD,EAAM,CACpB,IAAIuD,EAAM,GACRhf,EACAoB,EAEF,MAAMuZ,EAAIc,EAAK,OACf,IAAKzb,EAAI,EAAGA,EAAI2a,EAAG3a,IACjBoB,EAAKqa,EAAK,WAAWzb,CAAC,EAClB,KAAK,OAAQ,EAAG,KAClBoB,EAAK,IAAMA,EAAG,SAAS,EAAE,GAE3B4d,GAAO,KAAO5d,EAAK,IAGrB,OAAO4d,CACT,CAKA,MAAMC,EAAM,CACV,YAAY5c,EAAS,CACnB,KAAK,OAAS,GACd,KAAK,OAAO,MAAQ,OAAO,OAAO,IAAI,EACtC,KAAK,QAAUA,GAAW2V,GAC1B,KAAK,QAAQ,UAAY,KAAK,QAAQ,WAAa,IAAIgE,GACvD,KAAK,UAAY,KAAK,QAAQ,UAC9B,KAAK,UAAU,QAAU,KAAK,QAC9B,KAAK,UAAU,MAAQ,KACvB,KAAK,YAAc,GACnB,KAAK,MAAQ,CACX,OAAQ,GACR,WAAY,GACZ,IAAK,EACX,EAEI,MAAMkD,EAAQ,CACZ,MAAOJ,GAAM,OACb,OAAQC,GAAO,MACrB,EAEQ,KAAK,QAAQ,UACfG,EAAM,MAAQJ,GAAM,SACpBI,EAAM,OAASH,GAAO,UACb,KAAK,QAAQ,MACtBG,EAAM,MAAQJ,GAAM,IAChB,KAAK,QAAQ,OACfI,EAAM,OAASH,GAAO,OAEtBG,EAAM,OAASH,GAAO,KAG1B,KAAK,UAAU,MAAQG,CACxB,CAKD,WAAW,OAAQ,CACjB,MAAO,CACL,MAAAJ,GACA,OAAAC,EACN,CACG,CAKD,OAAO,IAAI9C,EAAK5Z,EAAS,CAEvB,OADc,IAAI4c,GAAM5c,CAAO,EAClB,IAAI4Z,CAAG,CACrB,CAKD,OAAO,UAAUA,EAAK5Z,EAAS,CAE7B,OADc,IAAI4c,GAAM5c,CAAO,EAClB,aAAa4Z,CAAG,CAC9B,CAKD,IAAIA,EAAK,CACPA,EAAMA,EACH,QAAQ,WAAY;AAAA,CAAI,EAE3B,KAAK,YAAYA,EAAK,KAAK,MAAM,EAEjC,IAAIkD,EACJ,KAAOA,EAAO,KAAK,YAAY,MAAK,GAClC,KAAK,aAAaA,EAAK,IAAKA,EAAK,MAAM,EAGzC,OAAO,KAAK,MACb,CAKD,YAAYlD,EAAKE,EAAS,GAAI,CACxB,KAAK,QAAQ,SACfF,EAAMA,EAAI,QAAQ,MAAO,MAAM,EAAE,QAAQ,SAAU,EAAE,EAErDA,EAAMA,EAAI,QAAQ,eAAgB,CAAC9L,EAAG8B,EAASmN,IACtCnN,EAAU,OAAO,OAAOmN,EAAK,MAAM,CAC3C,EAGH,IAAI1D,EAAO2D,EAAWC,EAAQC,EAE9B,KAAOtD,GACL,GAAI,OAAK,QAAQ,YACZ,KAAK,QAAQ,WAAW,OACxB,KAAK,QAAQ,WAAW,MAAM,KAAMuD,IACjC9D,EAAQ8D,EAAa,KAAK,CAAE,MAAO,IAAM,EAAEvD,EAAKE,CAAM,IACxDF,EAAMA,EAAI,UAAUP,EAAM,IAAI,MAAM,EACpCS,EAAO,KAAKT,CAAK,EACV,IAEF,EACR,GAKH,IAAIA,EAAQ,KAAK,UAAU,MAAMO,CAAG,EAAG,CACrCA,EAAMA,EAAI,UAAUP,EAAM,IAAI,MAAM,EAChCA,EAAM,IAAI,SAAW,GAAKS,EAAO,OAAS,EAG5CA,EAAOA,EAAO,OAAS,CAAC,EAAE,KAAO;AAAA,EAEjCA,EAAO,KAAKT,CAAK,EAEnB,QACD,CAGD,GAAIA,EAAQ,KAAK,UAAU,KAAKO,CAAG,EAAG,CACpCA,EAAMA,EAAI,UAAUP,EAAM,IAAI,MAAM,EACpC2D,EAAYlD,EAAOA,EAAO,OAAS,CAAC,EAEhCkD,IAAcA,EAAU,OAAS,aAAeA,EAAU,OAAS,SACrEA,EAAU,KAAO;AAAA,EAAO3D,EAAM,IAC9B2D,EAAU,MAAQ;AAAA,EAAO3D,EAAM,KAC/B,KAAK,YAAY,KAAK,YAAY,OAAS,CAAC,EAAE,IAAM2D,EAAU,MAE9DlD,EAAO,KAAKT,CAAK,EAEnB,QACD,CAGD,GAAIA,EAAQ,KAAK,UAAU,OAAOO,CAAG,EAAG,CACtCA,EAAMA,EAAI,UAAUP,EAAM,IAAI,MAAM,EACpCS,EAAO,KAAKT,CAAK,EACjB,QACD,CAGD,GAAIA,EAAQ,KAAK,UAAU,QAAQO,CAAG,EAAG,CACvCA,EAAMA,EAAI,UAAUP,EAAM,IAAI,MAAM,EACpCS,EAAO,KAAKT,CAAK,EACjB,QACD,CAGD,GAAIA,EAAQ,KAAK,UAAU,GAAGO,CAAG,EAAG,CAClCA,EAAMA,EAAI,UAAUP,EAAM,IAAI,MAAM,EACpCS,EAAO,KAAKT,CAAK,EACjB,QACD,CAGD,GAAIA,EAAQ,KAAK,UAAU,WAAWO,CAAG,EAAG,CAC1CA,EAAMA,EAAI,UAAUP,EAAM,IAAI,MAAM,EACpCS,EAAO,KAAKT,CAAK,EACjB,QACD,CAGD,GAAIA,EAAQ,KAAK,UAAU,KAAKO,CAAG,EAAG,CACpCA,EAAMA,EAAI,UAAUP,EAAM,IAAI,MAAM,EACpCS,EAAO,KAAKT,CAAK,EACjB,QACD,CAGD,GAAIA,EAAQ,KAAK,UAAU,KAAKO,CAAG,EAAG,CACpCA,EAAMA,EAAI,UAAUP,EAAM,IAAI,MAAM,EACpCS,EAAO,KAAKT,CAAK,EACjB,QACD,CAGD,GAAIA,EAAQ,KAAK,UAAU,IAAIO,CAAG,EAAG,CACnCA,EAAMA,EAAI,UAAUP,EAAM,IAAI,MAAM,EACpC2D,EAAYlD,EAAOA,EAAO,OAAS,CAAC,EAChCkD,IAAcA,EAAU,OAAS,aAAeA,EAAU,OAAS,SACrEA,EAAU,KAAO;AAAA,EAAO3D,EAAM,IAC9B2D,EAAU,MAAQ;AAAA,EAAO3D,EAAM,IAC/B,KAAK,YAAY,KAAK,YAAY,OAAS,CAAC,EAAE,IAAM2D,EAAU,MACpD,KAAK,OAAO,MAAM3D,EAAM,GAAG,IACrC,KAAK,OAAO,MAAMA,EAAM,GAAG,EAAI,CAC7B,KAAMA,EAAM,KACZ,MAAOA,EAAM,KACzB,GAEQ,QACD,CAGD,GAAIA,EAAQ,KAAK,UAAU,MAAMO,CAAG,EAAG,CACrCA,EAAMA,EAAI,UAAUP,EAAM,IAAI,MAAM,EACpCS,EAAO,KAAKT,CAAK,EACjB,QACD,CAGD,GAAIA,EAAQ,KAAK,UAAU,SAASO,CAAG,EAAG,CACxCA,EAAMA,EAAI,UAAUP,EAAM,IAAI,MAAM,EACpCS,EAAO,KAAKT,CAAK,EACjB,QACD,CAKD,GADA4D,EAASrD,EACL,KAAK,QAAQ,YAAc,KAAK,QAAQ,WAAW,WAAY,CACjE,IAAIwD,EAAa,IACjB,MAAMC,EAAUzD,EAAI,MAAM,CAAC,EAC3B,IAAI0D,EACJ,KAAK,QAAQ,WAAW,WAAW,QAAQ,SAASC,EAAe,CACjED,EAAYC,EAAc,KAAK,CAAE,MAAO,IAAI,EAAIF,CAAO,EACnD,OAAOC,GAAc,UAAYA,GAAa,IAAKF,EAAa,KAAK,IAAIA,EAAYE,CAAS,EAC5G,CAAS,EACGF,EAAa,KAAYA,GAAc,IACzCH,EAASrD,EAAI,UAAU,EAAGwD,EAAa,CAAC,EAE3C,CACD,GAAI,KAAK,MAAM,MAAQ/D,EAAQ,KAAK,UAAU,UAAU4D,CAAM,GAAI,CAChED,EAAYlD,EAAOA,EAAO,OAAS,CAAC,EAChCoD,GAAwBF,EAAU,OAAS,aAC7CA,EAAU,KAAO;AAAA,EAAO3D,EAAM,IAC9B2D,EAAU,MAAQ;AAAA,EAAO3D,EAAM,KAC/B,KAAK,YAAY,MACjB,KAAK,YAAY,KAAK,YAAY,OAAS,CAAC,EAAE,IAAM2D,EAAU,MAE9DlD,EAAO,KAAKT,CAAK,EAEnB6D,EAAwBD,EAAO,SAAWrD,EAAI,OAC9CA,EAAMA,EAAI,UAAUP,EAAM,IAAI,MAAM,EACpC,QACD,CAGD,GAAIA,EAAQ,KAAK,UAAU,KAAKO,CAAG,EAAG,CACpCA,EAAMA,EAAI,UAAUP,EAAM,IAAI,MAAM,EACpC2D,EAAYlD,EAAOA,EAAO,OAAS,CAAC,EAChCkD,GAAaA,EAAU,OAAS,QAClCA,EAAU,KAAO;AAAA,EAAO3D,EAAM,IAC9B2D,EAAU,MAAQ;AAAA,EAAO3D,EAAM,KAC/B,KAAK,YAAY,MACjB,KAAK,YAAY,KAAK,YAAY,OAAS,CAAC,EAAE,IAAM2D,EAAU,MAE9DlD,EAAO,KAAKT,CAAK,EAEnB,QACD,CAED,GAAIO,EAAK,CACP,MAAM4D,EAAS,0BAA4B5D,EAAI,WAAW,CAAC,EAC3D,GAAI,KAAK,QAAQ,OAAQ,CACvB,QAAQ,MAAM4D,CAAM,EACpB,KACV,KACU,OAAM,IAAI,MAAMA,CAAM,CAEzB,EAGH,YAAK,MAAM,IAAM,GACV1D,CACR,CAED,OAAOF,EAAKE,EAAS,GAAI,CACvB,YAAK,YAAY,KAAK,CAAE,IAAAF,EAAK,OAAAE,CAAQ,GAC9BA,CACR,CAKD,aAAaF,EAAKE,EAAS,GAAI,CAC7B,IAAIT,EAAO2D,EAAWC,EAGlBtB,EAAY/B,EACZ5B,EACAyF,EAAc7B,EAGlB,GAAI,KAAK,OAAO,MAAO,CACrB,MAAMF,EAAQ,OAAO,KAAK,KAAK,OAAO,KAAK,EAC3C,GAAIA,EAAM,OAAS,EACjB,MAAQ1D,EAAQ,KAAK,UAAU,MAAM,OAAO,cAAc,KAAK2D,CAAS,IAAM,MACxED,EAAM,SAAS1D,EAAM,CAAC,EAAE,MAAMA,EAAM,CAAC,EAAE,YAAY,GAAG,EAAI,EAAG,EAAE,CAAC,IAClE2D,EAAYA,EAAU,MAAM,EAAG3D,EAAM,KAAK,EAAI,IAAMY,GAAa,IAAKZ,EAAM,CAAC,EAAE,OAAS,CAAC,EAAI,IAAM2D,EAAU,MAAM,KAAK,UAAU,MAAM,OAAO,cAAc,SAAS,EAI7K,CAED,MAAQ3D,EAAQ,KAAK,UAAU,MAAM,OAAO,UAAU,KAAK2D,CAAS,IAAM,MACxEA,EAAYA,EAAU,MAAM,EAAG3D,EAAM,KAAK,EAAI,IAAMY,GAAa,IAAKZ,EAAM,CAAC,EAAE,OAAS,CAAC,EAAI,IAAM2D,EAAU,MAAM,KAAK,UAAU,MAAM,OAAO,UAAU,SAAS,EAIpK,MAAQ3D,EAAQ,KAAK,UAAU,MAAM,OAAO,YAAY,KAAK2D,CAAS,IAAM,MAC1EA,EAAYA,EAAU,MAAM,EAAG3D,EAAM,MAAQA,EAAM,CAAC,EAAE,OAAS,CAAC,EAAI,KAAO2D,EAAU,MAAM,KAAK,UAAU,MAAM,OAAO,YAAY,SAAS,EAC5I,KAAK,UAAU,MAAM,OAAO,YAAY,YAG1C,KAAO/B,GAOL,GANK6D,IACH7B,EAAW,IAEb6B,EAAe,GAGX,OAAK,QAAQ,YACZ,KAAK,QAAQ,WAAW,QACxB,KAAK,QAAQ,WAAW,OAAO,KAAMN,IAClC9D,EAAQ8D,EAAa,KAAK,CAAE,MAAO,IAAM,EAAEvD,EAAKE,CAAM,IACxDF,EAAMA,EAAI,UAAUP,EAAM,IAAI,MAAM,EACpCS,EAAO,KAAKT,CAAK,EACV,IAEF,EACR,GAKH,IAAIA,EAAQ,KAAK,UAAU,OAAOO,CAAG,EAAG,CACtCA,EAAMA,EAAI,UAAUP,EAAM,IAAI,MAAM,EACpCS,EAAO,KAAKT,CAAK,EACjB,QACD,CAGD,GAAIA,EAAQ,KAAK,UAAU,IAAIO,CAAG,EAAG,CACnCA,EAAMA,EAAI,UAAUP,EAAM,IAAI,MAAM,EACpC2D,EAAYlD,EAAOA,EAAO,OAAS,CAAC,EAChCkD,GAAa3D,EAAM,OAAS,QAAU2D,EAAU,OAAS,QAC3DA,EAAU,KAAO3D,EAAM,IACvB2D,EAAU,MAAQ3D,EAAM,MAExBS,EAAO,KAAKT,CAAK,EAEnB,QACD,CAGD,GAAIA,EAAQ,KAAK,UAAU,KAAKO,CAAG,EAAG,CACpCA,EAAMA,EAAI,UAAUP,EAAM,IAAI,MAAM,EACpCS,EAAO,KAAKT,CAAK,EACjB,QACD,CAGD,GAAIA,EAAQ,KAAK,UAAU,QAAQO,EAAK,KAAK,OAAO,KAAK,EAAG,CAC1DA,EAAMA,EAAI,UAAUP,EAAM,IAAI,MAAM,EACpC2D,EAAYlD,EAAOA,EAAO,OAAS,CAAC,EAChCkD,GAAa3D,EAAM,OAAS,QAAU2D,EAAU,OAAS,QAC3DA,EAAU,KAAO3D,EAAM,IACvB2D,EAAU,MAAQ3D,EAAM,MAExBS,EAAO,KAAKT,CAAK,EAEnB,QACD,CAGD,GAAIA,EAAQ,KAAK,UAAU,SAASO,EAAK+B,EAAWC,CAAQ,EAAG,CAC7DhC,EAAMA,EAAI,UAAUP,EAAM,IAAI,MAAM,EACpCS,EAAO,KAAKT,CAAK,EACjB,QACD,CAGD,GAAIA,EAAQ,KAAK,UAAU,SAASO,CAAG,EAAG,CACxCA,EAAMA,EAAI,UAAUP,EAAM,IAAI,MAAM,EACpCS,EAAO,KAAKT,CAAK,EACjB,QACD,CAGD,GAAIA,EAAQ,KAAK,UAAU,GAAGO,CAAG,EAAG,CAClCA,EAAMA,EAAI,UAAUP,EAAM,IAAI,MAAM,EACpCS,EAAO,KAAKT,CAAK,EACjB,QACD,CAGD,GAAIA,EAAQ,KAAK,UAAU,IAAIO,CAAG,EAAG,CACnCA,EAAMA,EAAI,UAAUP,EAAM,IAAI,MAAM,EACpCS,EAAO,KAAKT,CAAK,EACjB,QACD,CAGD,GAAIA,EAAQ,KAAK,UAAU,SAASO,EAAK0C,EAAM,EAAG,CAChD1C,EAAMA,EAAI,UAAUP,EAAM,IAAI,MAAM,EACpCS,EAAO,KAAKT,CAAK,EACjB,QACD,CAGD,GAAI,CAAC,KAAK,MAAM,SAAWA,EAAQ,KAAK,UAAU,IAAIO,EAAK0C,EAAM,GAAI,CACnE1C,EAAMA,EAAI,UAAUP,EAAM,IAAI,MAAM,EACpCS,EAAO,KAAKT,CAAK,EACjB,QACD,CAKD,GADA4D,EAASrD,EACL,KAAK,QAAQ,YAAc,KAAK,QAAQ,WAAW,YAAa,CAClE,IAAIwD,EAAa,IACjB,MAAMC,EAAUzD,EAAI,MAAM,CAAC,EAC3B,IAAI0D,EACJ,KAAK,QAAQ,WAAW,YAAY,QAAQ,SAASC,EAAe,CAClED,EAAYC,EAAc,KAAK,CAAE,MAAO,IAAI,EAAIF,CAAO,EACnD,OAAOC,GAAc,UAAYA,GAAa,IAAKF,EAAa,KAAK,IAAIA,EAAYE,CAAS,EAC5G,CAAS,EACGF,EAAa,KAAYA,GAAc,IACzCH,EAASrD,EAAI,UAAU,EAAGwD,EAAa,CAAC,EAE3C,CACD,GAAI/D,EAAQ,KAAK,UAAU,WAAW4D,EAAQT,EAAW,EAAG,CAC1D5C,EAAMA,EAAI,UAAUP,EAAM,IAAI,MAAM,EAChCA,EAAM,IAAI,MAAM,EAAE,IAAM,MAC1BuC,EAAWvC,EAAM,IAAI,MAAM,EAAE,GAE/BoE,EAAe,GACfT,EAAYlD,EAAOA,EAAO,OAAS,CAAC,EAChCkD,GAAaA,EAAU,OAAS,QAClCA,EAAU,KAAO3D,EAAM,IACvB2D,EAAU,MAAQ3D,EAAM,MAExBS,EAAO,KAAKT,CAAK,EAEnB,QACD,CAED,GAAIO,EAAK,CACP,MAAM4D,EAAS,0BAA4B5D,EAAI,WAAW,CAAC,EAC3D,GAAI,KAAK,QAAQ,OAAQ,CACvB,QAAQ,MAAM4D,CAAM,EACpB,KACV,KACU,OAAM,IAAI,MAAMA,CAAM,CAEzB,EAGH,OAAO1D,CACR,CACH,CAKA,MAAM4D,EAAS,CACb,YAAY1d,EAAS,CACnB,KAAK,QAAUA,GAAW2V,EAC3B,CAED,KAAKgI,EAAMC,EAAY1F,EAAS,CAC9B,MAAM2F,GAAQD,GAAc,IAAI,MAAM,KAAK,EAAE,CAAC,EAC9C,GAAI,KAAK,QAAQ,UAAW,CAC1B,MAAMjB,EAAM,KAAK,QAAQ,UAAUgB,EAAME,CAAI,EACzClB,GAAO,MAAQA,IAAQgB,IACzBzF,EAAU,GACVyF,EAAOhB,EAEV,CAID,OAFAgB,EAAOA,EAAK,QAAQ,MAAO,EAAE,EAAI;AAAA,EAE5BE,EAME,qBACH,KAAK,QAAQ,WACbzH,GAAOyH,CAAI,EACX,MACC3F,EAAUyF,EAAOvH,GAAOuH,EAAM,EAAI,GACnC;AAAA,EAVK,eACFzF,EAAUyF,EAAOvH,GAAOuH,EAAM,EAAI,GACnC;AAAA,CASP,CAKD,WAAWG,EAAO,CAChB,MAAO;AAAA,EAAiBA,CAAK;AAAA,CAC9B,CAED,KAAKzH,EAAM,CACT,OAAOA,CACR,CAQD,QAAQ+C,EAAMV,EAAOO,EAAK8E,EAAS,CACjC,GAAI,KAAK,QAAQ,UAAW,CAC1B,MAAMC,EAAK,KAAK,QAAQ,aAAeD,EAAQ,KAAK9E,CAAG,EACvD,MAAO,KAAKP,CAAK,QAAQsF,CAAE,KAAK5E,CAAI,MAAMV,CAAK;AAAA,CAChD,CAGD,MAAO,KAAKA,CAAK,IAAIU,CAAI,MAAMV,CAAK;AAAA,CACrC,CAED,IAAK,CACH,OAAO,KAAK,QAAQ,MAAQ;AAAA,EAAY;AAAA,CACzC,CAED,KAAKuF,EAAMC,EAAStgB,EAAO,CACzB,MAAMugB,EAAOD,EAAU,KAAO,KAC5BE,EAAYF,GAAWtgB,IAAU,EAAM,WAAaA,EAAQ,IAAO,GACrE,MAAO,IAAMugB,EAAOC,EAAW;AAAA,EAAQH,EAAO,KAAOE,EAAO;AAAA,CAC7D,CAKD,SAAS/E,EAAM,CACb,MAAO,OAAOA,CAAI;AAAA,CACnB,CAED,SAASiF,EAAS,CAChB,MAAO,WACFA,EAAU,cAAgB,IAC3B,+BACC,KAAK,QAAQ,MAAQ,KAAO,IAC7B,IACL,CAKD,UAAUjF,EAAM,CACd,MAAO,MAAMA,CAAI;AAAA,CAClB,CAMD,MAAMkF,EAAQL,EAAM,CAClB,OAAIA,IAAMA,EAAO,UAAUA,CAAI,YAExB;AAAA;AAAA,EAEHK,EACA;AAAA,EACAL,EACA;AAAA,CACL,CAKD,SAASM,EAAS,CAChB,MAAO;AAAA,EAASA,CAAO;AAAA,CACxB,CAED,UAAUA,EAASC,EAAO,CACxB,MAAML,EAAOK,EAAM,OAAS,KAAO,KAInC,OAHYA,EAAM,MACd,IAAIL,CAAI,WAAWK,EAAM,KAAK,KAC9B,IAAIL,CAAI,KACCI,EAAU,KAAKJ,CAAI;AAAA,CACjC,CAMD,OAAO/E,EAAM,CACX,MAAO,WAAWA,CAAI,WACvB,CAKD,GAAGA,EAAM,CACP,MAAO,OAAOA,CAAI,OACnB,CAKD,SAASA,EAAM,CACb,MAAO,SAASA,CAAI,SACrB,CAED,IAAK,CACH,OAAO,KAAK,QAAQ,MAAQ,QAAU,MACvC,CAKD,IAAIA,EAAM,CACR,MAAO,QAAQA,CAAI,QACpB,CAOD,KAAKjC,EAAMgC,EAAOC,EAAM,CAEtB,GADAjC,EAAOH,GAAS,KAAK,QAAQ,SAAU,KAAK,QAAQ,QAASG,CAAI,EAC7DA,IAAS,KACX,OAAOiC,EAET,IAAIuD,EAAM,YAAcxF,EAAO,IAC/B,OAAIgC,IACFwD,GAAO,WAAaxD,EAAQ,KAE9BwD,GAAO,IAAMvD,EAAO,OACbuD,CACR,CAOD,MAAMxF,EAAMgC,EAAOC,EAAM,CAEvB,GADAjC,EAAOH,GAAS,KAAK,QAAQ,SAAU,KAAK,QAAQ,QAASG,CAAI,EAC7DA,IAAS,KACX,OAAOiC,EAGT,IAAIuD,EAAM,aAAaxF,CAAI,UAAUiC,CAAI,IACzC,OAAID,IACFwD,GAAO,WAAWxD,CAAK,KAEzBwD,GAAO,KAAK,QAAQ,MAAQ,KAAO,IAC5BA,CACR,CAED,KAAKvD,EAAM,CACT,OAAOA,CACR,CACH,CAMA,MAAMqF,EAAa,CAEjB,OAAOrF,EAAM,CACX,OAAOA,CACR,CAED,GAAGA,EAAM,CACP,OAAOA,CACR,CAED,SAASA,EAAM,CACb,OAAOA,CACR,CAED,IAAIA,EAAM,CACR,OAAOA,CACR,CAED,KAAKA,EAAM,CACT,OAAOA,CACR,CAED,KAAKA,EAAM,CACT,OAAOA,CACR,CAED,KAAKjC,EAAMgC,EAAOC,EAAM,CACtB,MAAO,GAAKA,CACb,CAED,MAAMjC,EAAMgC,EAAOC,EAAM,CACvB,MAAO,GAAKA,CACb,CAED,IAAK,CACH,MAAO,EACR,CACH,CAKA,MAAMsF,EAAQ,CACZ,aAAc,CACZ,KAAK,KAAO,EACb,CAKD,UAAU/e,EAAO,CACf,OAAOA,EACJ,YAAa,EACb,KAAM,EAEN,QAAQ,kBAAmB,EAAE,EAE7B,QAAQ,gEAAiE,EAAE,EAC3E,QAAQ,MAAO,GAAG,CACtB,CAOD,gBAAgBgf,EAAcC,EAAU,CACtC,IAAIC,EAAOF,EACPG,EAAuB,EAC3B,GAAI,KAAK,KAAK,eAAeD,CAAI,EAAG,CAClCC,EAAuB,KAAK,KAAKH,CAAY,EAC7C,GACEG,IACAD,EAAOF,EAAe,IAAMG,QACrB,KAAK,KAAK,eAAeD,CAAI,EACvC,CACD,OAAKD,IACH,KAAK,KAAKD,CAAY,EAAIG,EAC1B,KAAK,KAAKD,CAAI,EAAI,GAEbA,CACR,CAQD,KAAKlf,EAAOK,EAAU,GAAI,CACxB,MAAM6e,EAAO,KAAK,UAAUlf,CAAK,EACjC,OAAO,KAAK,gBAAgBkf,EAAM7e,EAAQ,MAAM,CACjD,CACH,CAKA,MAAM+e,EAAO,CACX,YAAY/e,EAAS,CACnB,KAAK,QAAUA,GAAW2V,GAC1B,KAAK,QAAQ,SAAW,KAAK,QAAQ,UAAY,IAAI+H,GACrD,KAAK,SAAW,KAAK,QAAQ,SAC7B,KAAK,SAAS,QAAU,KAAK,QAC7B,KAAK,aAAe,IAAIe,GACxB,KAAK,QAAU,IAAIC,EACpB,CAKD,OAAO,MAAM5E,EAAQ9Z,EAAS,CAE5B,OADe,IAAI+e,GAAO/e,CAAO,EACnB,MAAM8Z,CAAM,CAC3B,CAKD,OAAO,YAAYA,EAAQ9Z,EAAS,CAElC,OADe,IAAI+e,GAAO/e,CAAO,EACnB,YAAY8Z,CAAM,CACjC,CAKD,MAAMA,EAAQ/c,EAAM,GAAM,CACxB,IAAI4f,EAAM,GACRhf,EACAyd,EACAC,EACA2D,EACAC,EACAlH,EACA9b,EACAqiB,EACAL,EACA5E,EACA6E,EACAtgB,EACAshB,EACAC,EACA7W,EACA+V,EACAe,EACAC,EACAC,EAEF,MAAMhH,EAAIwB,EAAO,OACjB,IAAKnc,EAAI,EAAGA,EAAI2a,EAAG3a,IAAK,CAItB,GAHA0b,EAAQS,EAAOnc,CAAC,EAGZ,KAAK,QAAQ,YAAc,KAAK,QAAQ,WAAW,WAAa,KAAK,QAAQ,WAAW,UAAU0b,EAAM,IAAI,IAC9GiG,EAAM,KAAK,QAAQ,WAAW,UAAUjG,EAAM,IAAI,EAAE,KAAK,CAAE,OAAQ,IAAM,EAAEA,CAAK,EAC5EiG,IAAQ,IAAS,CAAC,CAAC,QAAS,KAAM,UAAW,OAAQ,QAAS,aAAc,OAAQ,OAAQ,YAAa,MAAM,EAAE,SAASjG,EAAM,IAAI,GAAG,CACzIsD,GAAO2C,GAAO,GACd,QACD,CAGH,OAAQjG,EAAM,KAAI,CAChB,IAAK,QACH,SAEF,IAAK,KAAM,CACTsD,GAAO,KAAK,SAAS,KACrB,QACD,CACD,IAAK,UAAW,CACdA,GAAO,KAAK,SAAS,QACnB,KAAK,YAAYtD,EAAM,MAAM,EAC7BA,EAAM,MACN7C,GAAS,KAAK,YAAY6C,EAAM,OAAQ,KAAK,YAAY,CAAC,EAC1D,KAAK,OAAO,EACd,QACD,CACD,IAAK,OAAQ,CACXsD,GAAO,KAAK,SAAS,KAAKtD,EAAM,KAC9BA,EAAM,KACNA,EAAM,OAAO,EACf,QACD,CACD,IAAK,QAAS,CAMZ,IALAiF,EAAS,GAGTriB,EAAO,GACP+iB,EAAK3F,EAAM,OAAO,OACb+B,EAAI,EAAGA,EAAI4D,EAAI5D,IAClBnf,GAAQ,KAAK,SAAS,UACpB,KAAK,YAAYod,EAAM,OAAO+B,CAAC,EAAE,MAAM,EACvC,CAAE,OAAQ,GAAM,MAAO/B,EAAM,MAAM+B,CAAC,CAAG,CACrD,EAMU,IAJAkD,GAAU,KAAK,SAAS,SAASriB,CAAI,EAErCgiB,EAAO,GACPe,EAAK3F,EAAM,KAAK,OACX+B,EAAI,EAAGA,EAAI4D,EAAI5D,IAAK,CAKvB,IAJArD,EAAMsB,EAAM,KAAK+B,CAAC,EAElBnf,EAAO,GACPgjB,EAAKlH,EAAI,OACJsD,EAAI,EAAGA,EAAI4D,EAAI5D,IAClBpf,GAAQ,KAAK,SAAS,UACpB,KAAK,YAAY8b,EAAIsD,CAAC,EAAE,MAAM,EAC9B,CAAE,OAAQ,GAAO,MAAOhC,EAAM,MAAMgC,CAAC,CAAG,CACxD,EAGY4C,GAAQ,KAAK,SAAS,SAAShiB,CAAI,CACpC,CACD0gB,GAAO,KAAK,SAAS,MAAM2B,EAAQL,CAAI,EACvC,QACD,CACD,IAAK,aAAc,CACjBA,EAAO,KAAK,MAAM5E,EAAM,MAAM,EAC9BsD,GAAO,KAAK,SAAS,WAAWsB,CAAI,EACpC,QACD,CACD,IAAK,OAAQ,CAOX,IANAC,EAAU7E,EAAM,QAChBzb,EAAQyb,EAAM,MACd6F,EAAQ7F,EAAM,MACd2F,EAAK3F,EAAM,MAAM,OAEjB4E,EAAO,GACF7C,EAAI,EAAGA,EAAI4D,EAAI5D,IAClB9S,EAAO+Q,EAAM,MAAM+B,CAAC,EACpBiD,EAAU/V,EAAK,QACf8W,EAAO9W,EAAK,KAEZ6W,EAAW,GACP7W,EAAK,OACP+W,EAAW,KAAK,SAAS,SAAShB,CAAO,EACrCa,EACE5W,EAAK,OAAO,OAAS,GAAKA,EAAK,OAAO,CAAC,EAAE,OAAS,aACpDA,EAAK,OAAO,CAAC,EAAE,KAAO+W,EAAW,IAAM/W,EAAK,OAAO,CAAC,EAAE,KAClDA,EAAK,OAAO,CAAC,EAAE,QAAUA,EAAK,OAAO,CAAC,EAAE,OAAO,OAAS,GAAKA,EAAK,OAAO,CAAC,EAAE,OAAO,CAAC,EAAE,OAAS,SACjGA,EAAK,OAAO,CAAC,EAAE,OAAO,CAAC,EAAE,KAAO+W,EAAW,IAAM/W,EAAK,OAAO,CAAC,EAAE,OAAO,CAAC,EAAE,OAG5EA,EAAK,OAAO,QAAQ,CAClB,KAAM,OACN,KAAM+W,CAC1B,CAAmB,EAGHF,GAAYE,GAIhBF,GAAY,KAAK,MAAM7W,EAAK,OAAQ4W,CAAK,EACzCjB,GAAQ,KAAK,SAAS,SAASkB,EAAUC,EAAMf,CAAO,EAGxD1B,GAAO,KAAK,SAAS,KAAKsB,EAAMC,EAAStgB,CAAK,EAC9C,QACD,CACD,IAAK,OAAQ,CAEX+e,GAAO,KAAK,SAAS,KAAKtD,EAAM,IAAI,EACpC,QACD,CACD,IAAK,YAAa,CAChBsD,GAAO,KAAK,SAAS,UAAU,KAAK,YAAYtD,EAAM,MAAM,CAAC,EAC7D,QACD,CACD,IAAK,OAAQ,CAEX,IADA4E,EAAO5E,EAAM,OAAS,KAAK,YAAYA,EAAM,MAAM,EAAIA,EAAM,KACtD1b,EAAI,EAAI2a,GAAKwB,EAAOnc,EAAI,CAAC,EAAE,OAAS,QACzC0b,EAAQS,EAAO,EAAEnc,CAAC,EAClBsgB,GAAQ;AAAA,GAAQ5E,EAAM,OAAS,KAAK,YAAYA,EAAM,MAAM,EAAIA,EAAM,MAExEsD,GAAO5f,EAAM,KAAK,SAAS,UAAUkhB,CAAI,EAAIA,EAC7C,QACD,CAED,QAAS,CACP,MAAMT,EAAS,eAAiBnE,EAAM,KAAO,wBAC7C,GAAI,KAAK,QAAQ,OAAQ,CACvB,QAAQ,MAAMmE,CAAM,EACpB,MACZ,KACY,OAAM,IAAI,MAAMA,CAAM,CAEzB,CACF,CACF,CAED,OAAOb,CACR,CAKD,YAAY7C,EAAQyF,EAAU,CAC5BA,EAAWA,GAAY,KAAK,SAC5B,IAAI5C,EAAM,GACRhf,EACA0b,EACAiG,EAEF,MAAMhH,EAAIwB,EAAO,OACjB,IAAKnc,EAAI,EAAGA,EAAI2a,EAAG3a,IAAK,CAItB,GAHA0b,EAAQS,EAAOnc,CAAC,EAGZ,KAAK,QAAQ,YAAc,KAAK,QAAQ,WAAW,WAAa,KAAK,QAAQ,WAAW,UAAU0b,EAAM,IAAI,IAC9GiG,EAAM,KAAK,QAAQ,WAAW,UAAUjG,EAAM,IAAI,EAAE,KAAK,CAAE,OAAQ,IAAM,EAAEA,CAAK,EAC5EiG,IAAQ,IAAS,CAAC,CAAC,SAAU,OAAQ,OAAQ,QAAS,SAAU,KAAM,WAAY,KAAM,MAAO,MAAM,EAAE,SAASjG,EAAM,IAAI,GAAG,CAC/HsD,GAAO2C,GAAO,GACd,QACD,CAGH,OAAQjG,EAAM,KAAI,CAChB,IAAK,SAAU,CACbsD,GAAO4C,EAAS,KAAKlG,EAAM,IAAI,EAC/B,KACD,CACD,IAAK,OAAQ,CACXsD,GAAO4C,EAAS,KAAKlG,EAAM,IAAI,EAC/B,KACD,CACD,IAAK,OAAQ,CACXsD,GAAO4C,EAAS,KAAKlG,EAAM,KAAMA,EAAM,MAAO,KAAK,YAAYA,EAAM,OAAQkG,CAAQ,CAAC,EACtF,KACD,CACD,IAAK,QAAS,CACZ5C,GAAO4C,EAAS,MAAMlG,EAAM,KAAMA,EAAM,MAAOA,EAAM,IAAI,EACzD,KACD,CACD,IAAK,SAAU,CACbsD,GAAO4C,EAAS,OAAO,KAAK,YAAYlG,EAAM,OAAQkG,CAAQ,CAAC,EAC/D,KACD,CACD,IAAK,KAAM,CACT5C,GAAO4C,EAAS,GAAG,KAAK,YAAYlG,EAAM,OAAQkG,CAAQ,CAAC,EAC3D,KACD,CACD,IAAK,WAAY,CACf5C,GAAO4C,EAAS,SAASlG,EAAM,IAAI,EACnC,KACD,CACD,IAAK,KAAM,CACTsD,GAAO4C,EAAS,KAChB,KACD,CACD,IAAK,MAAO,CACV5C,GAAO4C,EAAS,IAAI,KAAK,YAAYlG,EAAM,OAAQkG,CAAQ,CAAC,EAC5D,KACD,CACD,IAAK,OAAQ,CACX5C,GAAO4C,EAAS,KAAKlG,EAAM,IAAI,EAC/B,KACD,CACD,QAAS,CACP,MAAMmE,EAAS,eAAiBnE,EAAM,KAAO,wBAC7C,GAAI,KAAK,QAAQ,OAAQ,CACvB,QAAQ,MAAMmE,CAAM,EACpB,MACZ,KACY,OAAM,IAAI,MAAMA,CAAM,CAEzB,CACF,CACF,CACD,OAAOb,CACR,CACH,CAEA,MAAM6C,EAAM,CACV,YAAYxf,EAAS,CACnB,KAAK,QAAUA,GAAW2V,EAC3B,CAUD,WAAW8J,EAAU,CACnB,OAAOA,CACR,CAKD,YAAYpJ,EAAM,CAChB,OAAOA,CACR,CACH,CAlBElZ,GALIqiB,GAKG,mBAAmB,IAAI,IAAI,CAChC,aACA,aACJ,CAAG,GAiBH,SAASE,GAAQC,EAAQC,EAAOC,EAAU,CACxC,OAAQjY,GAAM,CAGZ,GAFAA,EAAE,SAAW;AAAA,2DAET+X,EAAQ,CACV,MAAMzlB,EAAM,iCACRkc,GAAOxO,EAAE,QAAU,GAAI,EAAI,EAC3B,SACJ,GAAIgY,EACF,OAAO,QAAQ,QAAQ1lB,CAAG,EAE5B,GAAI2lB,EAAU,CACZA,EAAS,KAAM3lB,CAAG,EAClB,MACD,CACD,OAAOA,CACR,CAED,GAAI0lB,EACF,OAAO,QAAQ,OAAOhY,CAAC,EAEzB,GAAIiY,EAAU,CACZA,EAASjY,CAAC,EACV,MACD,CACD,MAAMA,CACV,CACA,CAEA,SAASkY,GAAc5G,EAAO6G,EAAQ,CACpC,MAAO,CAACnG,EAAKhD,EAAKiJ,IAAa,CACzB,OAAOjJ,GAAQ,aACjBiJ,EAAWjJ,EACXA,EAAM,MAGR,MAAMoJ,EAAU,CAAE,GAAGpJ,GACrBA,EAAM,CAAE,GAAGqJ,GAAO,SAAU,GAAGD,CAAO,EACtC,MAAME,EAAaR,GAAQ9I,EAAI,OAAQA,EAAI,MAAOiJ,CAAQ,EAG1D,GAAI,OAAOjG,EAAQ,KAAeA,IAAQ,KACxC,OAAOsG,EAAW,IAAI,MAAM,gDAAgD,CAAC,EAE/E,GAAI,OAAOtG,GAAQ,SACjB,OAAOsG,EAAW,IAAI,MAAM,wCACxB,OAAO,UAAU,SAAS,KAAKtG,CAAG,EAAI,mBAAmB,CAAC,EAShE,GANAjB,GAAyB/B,CAAG,EAExBA,EAAI,QACNA,EAAI,MAAM,QAAUA,GAGlBiJ,EAAU,CACZ,MAAMM,EAAYvJ,EAAI,UACtB,IAAIkD,EAEJ,GAAI,CACElD,EAAI,QACNgD,EAAMhD,EAAI,MAAM,WAAWgD,CAAG,GAEhCE,EAASZ,EAAMU,EAAKhD,CAAG,CACxB,OAAQhP,EAAG,CACV,OAAOsY,EAAWtY,CAAC,CACpB,CAED,MAAMwY,EAAO,SAASC,EAAK,CACzB,IAAI1D,EAEJ,GAAI,CAAC0D,EACH,GAAI,CACEzJ,EAAI,YACNqJ,GAAO,WAAWnG,EAAQlD,EAAI,UAAU,EAE1C+F,EAAMoD,EAAOjG,EAAQlD,CAAG,EACpBA,EAAI,QACN+F,EAAM/F,EAAI,MAAM,YAAY+F,CAAG,EAElC,OAAQ/U,EAAG,CACVyY,EAAMzY,CACP,CAGH,OAAAgP,EAAI,UAAYuJ,EAETE,EACHH,EAAWG,CAAG,EACdR,EAAS,KAAMlD,CAAG,CAC9B,EAQM,GANI,CAACwD,GAAaA,EAAU,OAAS,IAIrC,OAAOvJ,EAAI,UAEP,CAACkD,EAAO,QAAQ,OAAOsG,EAAI,EAE/B,IAAIE,EAAU,EACdL,GAAO,WAAWnG,EAAQ,SAAST,EAAO,CACpCA,EAAM,OAAS,SACjBiH,IACA,WAAW,IAAM,CACfH,EAAU9G,EAAM,KAAMA,EAAM,KAAM,SAASgH,EAAK1C,EAAM,CACpD,GAAI0C,EACF,OAAOD,EAAKC,CAAG,EAEb1C,GAAQ,MAAQA,IAAStE,EAAM,OACjCA,EAAM,KAAOsE,EACbtE,EAAM,QAAU,IAGlBiH,IACIA,IAAY,GACdF,GAEhB,CAAa,CACF,EAAE,CAAC,EAEd,CAAO,EAEGE,IAAY,GACdF,IAGF,MACD,CAED,GAAIxJ,EAAI,MACN,OAAO,QAAQ,QAAQA,EAAI,MAAQA,EAAI,MAAM,WAAWgD,CAAG,EAAIA,CAAG,EAC/D,KAAKA,GAAOV,EAAMU,EAAKhD,CAAG,CAAC,EAC3B,KAAKkD,GAAUlD,EAAI,WAAa,QAAQ,IAAIqJ,GAAO,WAAWnG,EAAQlD,EAAI,UAAU,CAAC,EAAE,KAAK,IAAMkD,CAAM,EAAIA,CAAM,EAClH,KAAKA,GAAUiG,EAAOjG,EAAQlD,CAAG,CAAC,EAClC,KAAKP,GAAQO,EAAI,MAAQA,EAAI,MAAM,YAAYP,CAAI,EAAIA,CAAI,EAC3D,MAAM6J,CAAU,EAGrB,GAAI,CACEtJ,EAAI,QACNgD,EAAMhD,EAAI,MAAM,WAAWgD,CAAG,GAEhC,MAAME,EAASZ,EAAMU,EAAKhD,CAAG,EACzBA,EAAI,YACNqJ,GAAO,WAAWnG,EAAQlD,EAAI,UAAU,EAE1C,IAAIP,EAAO0J,EAAOjG,EAAQlD,CAAG,EAC7B,OAAIA,EAAI,QACNP,EAAOO,EAAI,MAAM,YAAYP,CAAI,GAE5BA,CACR,OAAQzO,EAAG,CACV,OAAOsY,EAAWtY,CAAC,CACpB,CACL,CACA,CAKA,SAASqY,GAAOrG,EAAKhD,EAAKiJ,EAAU,CAClC,OAAOC,GAAclD,GAAM,IAAKmC,GAAO,KAAK,EAAEnF,EAAKhD,EAAKiJ,CAAQ,CAClE,CAMAI,GAAO,QACPA,GAAO,WAAa,SAASrJ,EAAK,CAChC,OAAAqJ,GAAO,SAAW,CAAE,GAAGA,GAAO,SAAU,GAAGrJ,GAC3ChB,GAAeqK,GAAO,QAAQ,EACvBA,EACT,EAEAA,GAAO,YAAcvK,GAErBuK,GAAO,SAAWtK,GAMlBsK,GAAO,IAAM,YAAYzc,EAAM,CAC7B,MAAM+c,EAAaN,GAAO,SAAS,YAAc,CAAE,UAAW,CAAE,EAAE,YAAa,IAE/Ezc,EAAK,QAASgd,GAAS,CAErB,MAAMC,EAAO,CAAE,GAAGD,GA2DlB,GAxDAC,EAAK,MAAQR,GAAO,SAAS,OAASQ,EAAK,OAAS,GAGhDD,EAAK,aACPA,EAAK,WAAW,QAASE,GAAQ,CAC/B,GAAI,CAACA,EAAI,KACP,MAAM,IAAI,MAAM,yBAAyB,EAE3C,GAAIA,EAAI,SAAU,CAChB,MAAMC,EAAeJ,EAAW,UAAUG,EAAI,IAAI,EAC9CC,EAEFJ,EAAW,UAAUG,EAAI,IAAI,EAAI,YAAYld,EAAM,CACjD,IAAI8b,EAAMoB,EAAI,SAAS,MAAM,KAAMld,CAAI,EACvC,OAAI8b,IAAQ,KACVA,EAAMqB,EAAa,MAAM,KAAMnd,CAAI,GAE9B8b,CACrB,EAEYiB,EAAW,UAAUG,EAAI,IAAI,EAAIA,EAAI,QAExC,CACD,GAAIA,EAAI,UAAW,CACjB,GAAI,CAACA,EAAI,OAAUA,EAAI,QAAU,SAAWA,EAAI,QAAU,SACxD,MAAM,IAAI,MAAM,6CAA6C,EAE3DH,EAAWG,EAAI,KAAK,EACtBH,EAAWG,EAAI,KAAK,EAAE,QAAQA,EAAI,SAAS,EAE3CH,EAAWG,EAAI,KAAK,EAAI,CAACA,EAAI,SAAS,EAEpCA,EAAI,QACFA,EAAI,QAAU,QACZH,EAAW,WACbA,EAAW,WAAW,KAAKG,EAAI,KAAK,EAEpCH,EAAW,WAAa,CAACG,EAAI,KAAK,EAE3BA,EAAI,QAAU,WACnBH,EAAW,YACbA,EAAW,YAAY,KAAKG,EAAI,KAAK,EAErCH,EAAW,YAAc,CAACG,EAAI,KAAK,GAI1C,CACGA,EAAI,cACNH,EAAW,YAAYG,EAAI,IAAI,EAAIA,EAAI,YAEjD,CAAO,EACDD,EAAK,WAAaF,GAIhBC,EAAK,SAAU,CACjB,MAAMjB,EAAWU,GAAO,SAAS,UAAY,IAAIvC,GACjD,UAAW5U,KAAQ0X,EAAK,SAAU,CAChC,MAAMG,EAAepB,EAASzW,CAAI,EAElCyW,EAASzW,CAAI,EAAI,IAAItF,IAAS,CAC5B,IAAI8b,EAAMkB,EAAK,SAAS1X,CAAI,EAAE,MAAMyW,EAAU/b,CAAI,EAClD,OAAI8b,IAAQ,KACVA,EAAMqB,EAAa,MAAMpB,EAAU/b,CAAI,GAElC8b,CACjB,CACO,CACDmB,EAAK,SAAWlB,CACjB,CACD,GAAIiB,EAAK,UAAW,CAClB,MAAMI,EAAYX,GAAO,SAAS,WAAa,IAAItG,GACnD,UAAW7Q,KAAQ0X,EAAK,UAAW,CACjC,MAAMK,EAAgBD,EAAU9X,CAAI,EAEpC8X,EAAU9X,CAAI,EAAI,IAAItF,IAAS,CAC7B,IAAI8b,EAAMkB,EAAK,UAAU1X,CAAI,EAAE,MAAM8X,EAAWpd,CAAI,EACpD,OAAI8b,IAAQ,KACVA,EAAMuB,EAAc,MAAMD,EAAWpd,CAAI,GAEpC8b,CACjB,CACO,CACDmB,EAAK,UAAYG,CAClB,CAGD,GAAIJ,EAAK,MAAO,CACd,MAAMM,EAAQb,GAAO,SAAS,OAAS,IAAIT,GAC3C,UAAW1W,KAAQ0X,EAAK,MAAO,CAC7B,MAAMO,EAAWD,EAAMhY,CAAI,EACvB0W,GAAM,iBAAiB,IAAI1W,CAAI,EACjCgY,EAAMhY,CAAI,EAAKpK,GAAQ,CACrB,GAAIuhB,GAAO,SAAS,MAClB,OAAO,QAAQ,QAAQO,EAAK,MAAM1X,CAAI,EAAE,KAAKgY,EAAOpiB,CAAG,CAAC,EAAE,KAAK4gB,GACtDyB,EAAS,KAAKD,EAAOxB,CAAG,CAChC,EAGH,MAAMA,EAAMkB,EAAK,MAAM1X,CAAI,EAAE,KAAKgY,EAAOpiB,CAAG,EAC5C,OAAOqiB,EAAS,KAAKD,EAAOxB,CAAG,CAC3C,EAEUwB,EAAMhY,CAAI,EAAI,IAAItF,IAAS,CACzB,IAAI8b,EAAMkB,EAAK,MAAM1X,CAAI,EAAE,MAAMgY,EAAOtd,CAAI,EAC5C,OAAI8b,IAAQ,KACVA,EAAMyB,EAAS,MAAMD,EAAOtd,CAAI,GAE3B8b,CACnB,CAEO,CACDmB,EAAK,MAAQK,CACd,CAGD,GAAIN,EAAK,WAAY,CACnB,MAAMQ,EAAaf,GAAO,SAAS,WACnCQ,EAAK,WAAa,SAASpH,EAAO,CAChC,IAAI4H,EAAS,GACb,OAAAA,EAAO,KAAKT,EAAK,WAAW,KAAK,KAAMnH,CAAK,CAAC,EACzC2H,IACFC,EAASA,EAAO,OAAOD,EAAW,KAAK,KAAM3H,CAAK,CAAC,GAE9C4H,CACf,CACK,CAEDhB,GAAO,WAAWQ,CAAI,CAC1B,CAAG,CACH,EAMAR,GAAO,WAAa,SAASnG,EAAQ+F,EAAU,CAC7C,IAAIoB,EAAS,GACb,UAAW5H,KAASS,EAElB,OADAmH,EAASA,EAAO,OAAOpB,EAAS,KAAKI,GAAQ5G,CAAK,CAAC,EAC3CA,EAAM,KAAI,CAChB,IAAK,QAAS,CACZ,UAAWpd,KAAQod,EAAM,OACvB4H,EAASA,EAAO,OAAOhB,GAAO,WAAWhkB,EAAK,OAAQ4jB,CAAQ,CAAC,EAEjE,UAAW9H,KAAOsB,EAAM,KACtB,UAAWpd,KAAQ8b,EACjBkJ,EAASA,EAAO,OAAOhB,GAAO,WAAWhkB,EAAK,OAAQ4jB,CAAQ,CAAC,EAGnE,KACD,CACD,IAAK,OAAQ,CACXoB,EAASA,EAAO,OAAOhB,GAAO,WAAW5G,EAAM,MAAOwG,CAAQ,CAAC,EAC/D,KACD,CACD,QACMI,GAAO,SAAS,YAAcA,GAAO,SAAS,WAAW,aAAeA,GAAO,SAAS,WAAW,YAAY5G,EAAM,IAAI,EAC3H4G,GAAO,SAAS,WAAW,YAAY5G,EAAM,IAAI,EAAE,QAAQ,SAAS6H,EAAa,CAC/ED,EAASA,EAAO,OAAOhB,GAAO,WAAW5G,EAAM6H,CAAW,EAAGrB,CAAQ,CAAC,CAClF,CAAW,EACQxG,EAAM,SACf4H,EAASA,EAAO,OAAOhB,GAAO,WAAW5G,EAAM,OAAQwG,CAAQ,CAAC,EAGrE,CAEH,OAAOoB,CACT,EAMAhB,GAAO,YAAcH,GAAclD,GAAM,UAAWmC,GAAO,WAAW,EAKtEkB,GAAO,OAASlB,GAChBkB,GAAO,OAASlB,GAAO,MACvBkB,GAAO,SAAWvC,GAClBuC,GAAO,aAAexB,GACtBwB,GAAO,MAAQrD,GACfqD,GAAO,MAAQrD,GAAM,IACrBqD,GAAO,UAAYtG,GACnBsG,GAAO,QAAUvB,GACjBuB,GAAO,MAAQT,GACfS,GAAO,MAAQA,GAECA,GAAO,QACJA,GAAO,WACdA,GAAO,IACAA,GAAO,WACNA,GAAO,YAEZlB,GAAO,MACRnC,GAAM,ICn0Fb,MAAMuE,GAAiCthB,GAAO,KAAK,EAAE,CAC1D,KAAM,oBACN,MAAO,cACP,UAAW,EACb,CAAC,ECDc,MAAMuhB,WAAoB1gB,GAAM,aAAc,CAA9C,kCACXvD,GAAA,qBAAgB,MAuBhBA,GAAA,wBAAoB8T,GAAY,CAC5B,KAAK,cAAgBA,EACrB,KAAK,sBAAqB,CAClC,GAzBI,uBAAwB,CACpB,KAAM,CAAE,cAAAoQ,EAAe,MAAAhoB,CAAO,EAAG,KACjC,GAAIgoB,IAAkB,KAClB,OACJ,KAAM,CAAE,SAAAC,EAAU,WAAAC,CAAY,EAAGloB,EAC3BmoB,EAAYvB,GAAOqB,CAAQ,EAC3BG,EAAa,SAAS,cAC5BA,EAAW,mBAAmBJ,CAAa,EAC3CI,EAAW,eAAc,EACzB,IAAIC,EAAWH,GAAA,YAAAA,EAAaC,GAC5B,GAAIE,IAAa,OAAW,CACxB,MAAMC,EAAW,SAAS,cAAc,UAAU,EAClDA,EAAS,UAAYH,EACrBE,EAAWC,EAAS,OACvB,CACDN,EAAc,OAAOK,CAAQ,EAC7B,MAAME,EAAOP,EAAc,qBAAqB,GAAG,EACnD,UAAWvhB,KAAO8hB,EACd9hB,EAAI,OAAS,SACbA,EAAI,IAAM,qBAEjB,CAKD,QAAS,CAIL,YAAK,sBAAqB,EACnBY,GAAM,cAAcygB,GAAmB,CAAE,IAAK,KAAK,gBAAgB,CAAE,CAC/E,CACL,CCtCO,MAAMU,GAAwBhiB,GAAO,UAAU,EAAE,CACtD,KAAM,WACN,MAAO,cACP,UAAW,EACb,CAAC,EACYiiB,GAAyBjiB,GAAO,KAAK,EAAE,CAClD,KAAM,YACN,MAAO,cACP,UAAW,EACb,CAAC,EACYkiB,GAAiCliB,GAAO,KAAK,EAAE,CAC1D,KAAM,oBACN,MAAO,eACP,UAAW,EACb,CAAC,ECZD,IAAImiB,GAAgB,EAEb,MAAMC,GAAgB5oB,GAAU,CACnC,KAAM,CAAE,YAAA6oB,EAAa,MAAAviB,EAAO,UAAAwiB,EAAW,UAAAhC,EAAW,WAAAiC,EAAY,mBAAAC,EAAoB,GAAGzhB,CAAM,EAAGvH,EACxF,CAAE,SAAAipB,EAAU,UAAA3jB,CAAW,EAAGiC,EAC1B2hB,EAAWlR,SAAa,IAAI,EAC5BmR,EAAU7iB,GAAS,GACzB7F,GAAOwoB,IAAa,OAAW,8CAA8C,EAE7E,KAAM,CAACG,CAAO,EAAIvP,EAAc,SAAC,IAAM,cAAgB8O,IAAiBA,GAAgB,GAAK,IAAS,EACtG1Q,YAAgB,IAAM,CAClB,MAAMoR,EAAKH,EAAS,QAGpB,GAFIG,IAAO,MAEPA,EAAG,SACH,OACJ,MAAMC,EAASH,EAAQ,SAAQ,EAAG,OAClCE,EAAG,MAAK,EACRA,EAAG,kBAAkBvC,EAAY,EAAIwC,EAAQA,CAAM,CAEtD,EAAE,CAAE,GACLtP,kBAAsB,IAAM,OACxB,GAAIgP,IAAuB,OAAW,CAClC,MAAMvlB,EAAQ,OAAOulB,GAAuB,SAAW,CAACA,EAAoB,IAAI,EAAIA,GACpF7Q,EAAA+Q,EAAS,UAAT,MAAA/Q,EAAkB,kBAAkB1U,EAAM,CAAC,EAAGA,EAAM,CAAC,EACxD,CACT,EAAO,CAACulB,CAAkB,CAAC,EACvB,MAAMO,EAAiBtO,EAAiB,YAAC1M,GAAK,CACtCA,EAAE,MAAQ,SAAWA,EAAE,UAAYwa,IAAe,IAGtDD,GAAA,MAAAA,EAAYva,EACpB,EAAO,CAACwa,EAAYD,CAAS,CAAC,EAC1B,OAAQ3oB,gBAAoBuoB,GAAmB,CAAE,UAAW,mBAAqB,EAC7EvoB,EAAmB,cAACsoB,GAAW,CAAE,UAAWnjB,CAAW,EAAE6jB,EAAU;AAAA,CAAI,EACvEhpB,gBAAoBqoB,GAAU,CAAE,GAAGjhB,EAAM,WAAYjC,GAAa,IAAM,aAAc,GAAI8jB,EAAS,IAAKF,EAAU,UAAWK,EAAgB,MAAOJ,EAAS,YAAaN,EAAa,IAAK,MAAQ,EAAC,CAC7M,ECrCMxb,GAAQ,GACd,IAAImc,GAAM,KACV,SAASC,IAAY,CACX,MAAAC,EAAI,SAAS,cAAc,KAAK,EACtC,OAAAA,EAAE,MAAM,QAAU,IAClBA,EAAE,MAAM,cAAgB,OACxBA,EAAE,MAAM,SAAW,QAEV,cAAK,OAAOA,CAAC,EACfA,CACX,CAEO,SAASC,GAAYC,EAAO,CAE/B,MAAMC,EAAkBD,EAAM,YAAY,EAAE,KAAK,EAC7C,GAAAvc,GAAMwc,CAAe,IAAM,OAC3B,OAAOxc,GAAMwc,CAAe,EAChCL,GAAMA,IAAOC,KACbD,GAAI,MAAM,MAAQ,OAClBA,GAAI,MAAM,MAAQK,EACZ,MAAAC,EAAU,iBAAiBN,EAAG,EAAE,MACtCA,GAAI,MAAM,MAAQ,OAClBA,GAAI,MAAM,MAAQK,EACZ,MAAAE,EAAgB,iBAAiBP,EAAG,EAAE,MAC5C,GAAIO,IAAkBD,EAClB,MAAO,CAAC,EAAG,EAAG,EAAG,CAAC,EAClB,IAAA/kB,EAASglB,EAER,QAAQ,WAAY,EAAE,EACtB,MAAM,GAAG,EACT,IAAI,OAAO,UAAU,EACtB,OAAAhlB,EAAO,OAAS,GAChBA,EAAO,KAAK,CAAC,EAERA,IAAO,IAASd,GACP,OAAO,MAAMA,CAAC,EAKb,EAAIA,CACtB,EACDoJ,GAAMwc,CAAe,EAAI9kB,EAClBA,CACX,CAEgB,SAAAilB,GAAUJ,EAAOK,EAAO,CACpC,KAAM,CAACC,EAAGC,EAAG3mB,CAAC,EAAImmB,GAAYC,CAAK,EACnC,MAAO,QAAQM,CAAC,KAAKC,CAAC,KAAK3mB,CAAC,KAAKymB,CAAK,GAC1C,CACA,MAAMG,OAAuB,IACb,SAAAC,GAAWT,EAAOU,EAAY,CAC1C,MAAMC,EAAW,GAAGX,CAAK,IAAIU,CAAU,GACjCxpB,EAAQspB,GAAiB,IAAIG,CAAQ,EAC3C,GAAIzpB,IAAU,OACH,OAAAA,EACL,MAAAiE,EAASylB,GAAMZ,EAAOU,CAAU,EACrB,OAAAF,GAAA,IAAIG,EAAUxlB,CAAM,EAC9BA,CACX,CAEgB,SAAAylB,GAAMZ,EAAOU,EAAY,CACrC,GAAIA,IAAe,OACR,OAAAV,EACX,KAAM,CAACM,EAAGC,EAAG3mB,EAAGD,CAAC,EAAIomB,GAAYC,CAAK,EACtC,GAAIrmB,IAAM,EACC,OAAAqmB,EACX,KAAM,CAACa,EAAIC,EAAInR,EAAIoR,CAAE,EAAIhB,GAAYW,CAAU,EACzCM,EAAKrnB,EAAIonB,GAAM,EAAIpnB,GAEnBsnB,GAAMtnB,EAAI2mB,EAAIS,EAAKF,GAAM,EAAIlnB,IAAMqnB,EACnCE,GAAMvnB,EAAI4mB,EAAIQ,EAAKD,GAAM,EAAInnB,IAAMqnB,EACnCG,GAAMxnB,EAAIC,EAAImnB,EAAKpR,GAAM,EAAIhW,IAAMqnB,EACzC,MAAO,QAAQC,CAAE,KAAKC,CAAE,KAAKC,CAAE,KAAKH,CAAE,GAC1C,CC5Ea,IAAIlB,GAAE,IAAI,IAAIlmB,GAAE,IAAI,IAAIwnB,GAAE,IAAI,IAAI,SAASC,IAAG,CAACvB,GAAE,MAAK,EAAGsB,GAAE,QAAQxnB,GAAE,MAAO,EAAC,SAAS0nB,GAAEjM,EAAE9D,EAAE5M,EAAE/L,EAAEgf,EAAE,CAAC,IAAI2J,EAAEjB,EAAEtc,EAAE,IAAIwd,EAAE,EAAE7nB,EAAE,GAAG,QAAQe,KAAK2a,EAAEmM,IAAID,EAAE5c,EAAE,IAAIjK,CAAC,IAAI,KAAK6mB,EAAE3J,EAAEje,EAAEe,CAAC,IAAI4lB,EAAE3mB,EAAEe,CAAC,IAAI,KAAK4lB,EAAE,GAAG,EAAE,IAAIC,EAAEhP,EAAEiQ,EAAE,QAAQ9mB,KAAK,OAAO,KAAKf,CAAC,EAAE,CAAC,IAAI8nB,EAAE9nB,EAAEe,CAAC,EAAE2X,GAAGrO,EAAEW,EAAE,IAAIjK,CAAC,IAAI,KAAKsJ,EAAE4T,EAAE8J,EAAErP,EAAEoP,EAAED,EAAEG,EAAEpB,EAAEmB,EAAE9oB,EAAE6oB,EAAEG,EAAEvP,EAAEsP,EAAEhd,EAAE,IAAIjK,EAAEknB,CAAC,CAAC,CAAC,CAAC,SAASC,GAAExM,EAAE9D,EAAE,CAAC,IAAI,EAAE,IAAI5M,EAAE,IAAI,IAAI/L,EAAE,EAAE,QAAQ0nB,IAAI,uEAAuE,CAAC,IAAItc,EAAEqR,EAAE,YAAYiL,CAAC,EAAE,MAAM3b,EAAE,IAAI2b,EAAEtc,CAAC,EAAEpL,GAAGoL,CAAC,CAAC,IAAI4T,EAAEhf,EAAE+L,EAAE,KAAK6c,EAAE,EAAE7nB,GAAG4X,EAAEqG,EAAE4J,IAAIA,EAAE,GAAGjB,EAAE5b,EAAE,KAAI,EAAG,QAAQ2b,KAAKC,EAAE5b,EAAE,IAAI2b,IAAI,EAAE3b,EAAE,IAAI2b,CAAC,IAAI,KAAK,EAAE1I,GAAGje,CAAC,EAAE,OAAOgL,CAAC,CAAC,SAASV,GAAEoR,EAAE9D,EAAE5M,EAAE/L,EAAE,CAAC,IAAI2nB,EAAEgB,EAAE,IAAI3J,EAAEhe,GAAE,IAAI+K,CAAC,EAAE,GAAG/L,GAAGgf,IAAI,QAAQA,EAAE,MAAM,IAAI,CAAC,IAAI0I,EAAEc,GAAE,IAAIzc,CAAC,EAAE,GAAG2b,IAAI,SAASA,EAAEuB,GAAExM,EAAEuC,EAAE,IAAI,EAAEwJ,GAAE,IAAIzc,EAAE2b,CAAC,GAAG1I,EAAE,MAAM,IAAI,CAAC,IAAIld,EAAE,EAAE,QAAQ+mB,KAAKlQ,EAAE7W,IAAI6lB,EAAED,EAAE,IAAImB,CAAC,IAAI,KAAKlB,EAAE3I,EAAE,KAAK,OAAOld,EAAE,IAAI,CAAC,IAAIsJ,EAAEqR,EAAE,YAAY9D,CAAC,EAAE,OAAO+P,GAAE/P,EAAEvN,EAAE,MAAMsc,EAAE,KAAK,IAAI,IAAI,EAAE1I,EAAE,MAAM,GAAG,EAAEA,EAAE,IAAI,EAAEhe,GAAE,IAAI+K,EAAE,CAAC,MAAMiT,EAAE,MAAMrG,EAAE,OAAO,KAAKqG,EAAE,IAAI,CAAC,EAAE5T,EAAE,KAAK,CAAC,IAAIwd,EAAEnM,EAAE,YAAY9D,CAAC,EAAE5X,EAAE6nB,EAAE,MAAMjQ,EAAE,OAAO,KAAKgQ,EAAE3J,GAAG,KAAK,OAAOA,EAAE,QAAQ,KAAK2J,EAAE,GAAG,IAAI,OAAOC,EAAE,MAAM,GAAG5J,IAAI,OAAOhe,GAAE,IAAI+K,EAAE,CAAC,MAAM4M,EAAE,OAAO,KAAK5X,CAAC,CAAC,MAAM,CAAC,IAAI2mB,EAAE3mB,EAAEie,EAAE,KAAK5T,EAAEuN,EAAE,QAAQqG,EAAE,MAAMrG,EAAE,QAAQ7W,EAAEkd,EAAE,KAAK0I,EAAEtc,EAAEpK,GAAE,IAAI+K,EAAE,CAAC,MAAMiT,EAAE,MAAMrG,EAAE,OAAO,KAAK7W,CAAC,CAAC,CAAC,CAAC,OAAO8mB,EAAE,KAAK,CAAC,SAASM,GAAEzM,EAAE9D,EAAE5M,EAAE/L,EAAEgf,EAAE4J,EAAE,EAAEjB,EAAE,CAAC,GAAGhP,EAAE,QAAQ,EAAE,OAAOA,EAAE,OAAO,GAAGqG,EAAEjT,EAAE,MAAM,GAAM,IAAC4c,EAAE,KAAK,MAAM5c,EAAEiT,EAAE4J,CAAC,EAAElB,EAAErc,GAAEoR,EAAE9D,EAAE,MAAM,EAAE,KAAK,IAAI,EAAEgQ,CAAC,CAAC,EAAE3oB,EAAE,CAAC,EAAwB,GAAG0nB,IAAI3b,EAAE,GAAG2b,EAAE3b,EAAE,CAAC,KAAK2b,EAAE3b,GAAG4c,IAAIjB,EAAErc,GAAEoR,EAAE9D,EAAE,MAAM,EAAE,KAAK,IAAI,EAAEgQ,CAAC,CAAC,EAAE3oB,EAAE,CAAC,EAAE2oB,GAAG,KAAM,MAAKjB,EAAE3b,GAAG,CAAC,IAAIjK,EAAe6W,EAAE,YAAY,IAAIgQ,EAAE,CAAC,EAAE7mB,EAAE,EAAE6mB,EAAE7mB,EAAE6mB,IAAIjB,EAAErc,GAAEoR,EAAE9D,EAAE,MAAM,EAAE,KAAK,IAAI,EAAEgQ,CAAC,CAAC,EAAE3oB,EAAE,CAAC,CAAC,CAAC,GAAG2Y,EAAEgQ,CAAC,IAAI,IAAI,CAAC,IAAI7mB,EAAE,EAAgBA,EAAE6W,EAAE,YAAY,IAAIgQ,CAAC,EAAwC7mB,EAAE,IAAI6mB,EAAE7mB,EAAE,CAAC,OAAO6mB,CAAC,CAAC,SAAS1W,GAAEwK,EAAE9D,EAAE5M,EAAE/L,EAAEgf,EAAE4J,EAAE,CAAC,IAAI,EAAE,GAAGjQ,CAAC,IAAI5M,CAAC,IAAI/L,CAAC,KAAK2nB,EAAET,GAAE,IAAI,CAAC,EAAE,GAAGS,IAAI,OAAO,OAAOA,EAAE,GAAG3nB,GAAG,EAAE,MAAM,GAAG,IAAI2oB,EAAE,CAAE,EAACjB,EAAE/O,EAAE,MAAM;AAAA,CAC/uD,EAAEvN,EAAEpK,GAAE,IAAI+K,CAAC,EAAEjK,EAAEsJ,IAAI,OAAOuN,EAAE,OAAO3Y,EAAEoL,EAAE,KAAK,IAAIyd,EAAE7J,GAAG5T,IAAI,QAAQA,EAAE,MAAM,IAAI,QAAQqO,KAAKiO,EAAE,CAAC,IAAIoB,EAAEzd,GAAEoR,EAAEhD,EAAE,MAAM,EAAE,KAAK,IAAI,EAAE3X,CAAC,CAAC,EAAEiK,EAAE8c,CAAC,EAAEE,EAAE,KAAK,IAAItP,EAAE,OAAO3X,CAAC,EAAE,GAAGgnB,GAAG9oB,EAAE2oB,EAAE,KAAKlP,CAAC,MAAM,CAAC,KAAKqP,EAAE9oB,GAAG,CAAC,IAAIgpB,EAAEE,GAAEzM,EAAEhD,EAAEzZ,EAAE+L,EAAE+c,EAAEC,EAAEF,CAAG,EAAErJ,EAAE/F,EAAE,MAAM,EAAE,KAAK,IAAI,EAAEuP,CAAC,CAAC,EAAEvP,EAAEA,EAAE,MAAM+F,EAAE,MAAM,EAAEmJ,EAAE,KAAKnJ,CAAC,EAAEsJ,EAAEzd,GAAEoR,EAAEhD,EAAE,MAAM,EAAE,KAAK,IAAI,EAAE3X,CAAC,CAAC,EAAEiK,EAAE8c,CAAC,EAAEE,EAAE,KAAK,IAAItP,EAAE,OAAO3X,CAAC,CAAC,CAACgnB,EAAE,GAAGH,EAAE,KAAKlP,CAAC,CAAC,CAAC,CAAC,OAAOkP,EAAEA,EAAE,IAAI,CAAClP,EAAEqP,IAAIA,IAAI,EAAErP,EAAE,QAAO,EAAGA,EAAE,KAAI,CAAE,EAAEyN,GAAE,IAAI,EAAEyB,CAAC,EAAEzB,GAAE,KAAK,KAAKA,GAAE,OAAOA,GAAE,KAAI,EAAG,KAAM,EAAC,KAAK,EAAEyB,CAAC,CCG/b,SAASQ,GAAiBC,EAASC,EAAe,CACrD,OAAOxkB,GAAM,QAAQ,IAAMukB,EAAQ,IAAI,CAACppB,EAAG,KAAO,CAC9C,MAAOA,EAAE,MACT,KAAMA,EAAE,KACR,QAASA,EAAE,QACX,KAAMA,EAAE,KACR,GAAIA,EAAE,GACN,SAAUA,EAAE,SACZ,YAAaA,EAAE,YACf,YAAa,EACb,OAAQ,EAAIqpB,EACZ,cAAerpB,EAAE,cACjB,MAAOA,EAAE,MACT,cAAeA,EAAE,cACjB,MAAOA,EAAE,MACT,mBAAoBA,EAAE,mBACtB,MAAOA,EAAE,MACT,WAAYA,EAAE,WACd,UAAWA,EAAE,UACb,iBAAkBA,EAAE,iBACpB,qBAAsBA,EAAE,qBACxB,6BAA8BA,EAAE,6BAChC,wBAAyBA,EAAE,uBAC9B,EAAC,EAAG,CAACopB,EAASC,CAAa,CAAC,CACjC,CACO,SAASC,GAAqBC,EAAK9c,EAAM,CAC5C,KAAM,CAAC+c,EAAKtN,CAAG,EAAIzP,EACnB,GAAI8c,EAAI,QAAQ,SAASC,CAAG,GAAKD,EAAI,KAAK,SAASrN,CAAG,EAClD,MAAO,GACX,GAAIqN,EAAI,UAAY,OAAW,CAC3B,GAAIE,GAAcF,EAAI,QAAQ,KAAM9c,CAAI,EACpC,MAAO,GACX,MAAMid,EAAU,CAACH,EAAI,QAAQ,MAAO,GAAGA,EAAI,QAAQ,UAAU,EAC7D,UAAW7B,KAAKgC,EAEZ,GAAIF,GAAO9B,EAAE,GAAK8B,EAAM9B,EAAE,EAAIA,EAAE,OAASxL,GAAOwL,EAAE,GAAKxL,EAAMwL,EAAE,EAAIA,EAAE,OACjE,MAAO,EAElB,CACD,MAAO,EACX,CACO,SAASiC,GAAatnB,EAAMC,EAAO,CACtC,OAAQD,GAAQ,OAASC,GAAS,GACtC,CACO,SAASsnB,GAAeC,EAAUzpB,EAAMsB,EAAW,CAGtD,OAFIA,EAAU,UAAY,QAEtBmoB,EAAS,CAAC,IAAMnoB,EAAU,QAAQ,KAAK,CAAC,EACjC,GACPtB,EAAK,OAAS,OACPsB,EAAU,QAAQ,KAAK,CAAC,IAAMmoB,EAAS,CAAC,EAE5CnoB,EAAU,QAAQ,KAAK,CAAC,GAAKtB,EAAK,KAAK,CAAC,GAAKsB,EAAU,QAAQ,KAAK,CAAC,GAAKtB,EAAK,KAAK,CAAC,CAChG,CACO,SAAS0pB,GAAaD,EAAUE,EAAM,CACzC,KAAM,CAACtoB,EAAGsG,CAAC,EAAI8hB,EACf,OAAOpoB,GAAKsoB,EAAK,GAAKtoB,EAAIsoB,EAAK,EAAIA,EAAK,OAAShiB,GAAKgiB,EAAK,GAAKhiB,EAAIgiB,EAAK,EAAIA,EAAK,MACtF,CACO,SAASN,GAAc1oB,EAAGC,EAAG,CAChC,OAAOD,GAAA,YAAAA,EAAI,OAAOC,GAAA,YAAAA,EAAI,MAAMD,GAAA,YAAAA,EAAI,OAAOC,GAAA,YAAAA,EAAI,GAC/C,CACO,SAASgpB,GAAgBD,EAAM,CAClC,MAAO,CAACA,EAAK,EAAIA,EAAK,MAAQ,EAAGA,EAAK,EAAIA,EAAK,OAAS,CAAC,CAC7D,CACA,SAASE,GAAaJ,EAAUzpB,EAAM2pB,EAAM,CACxC,MAAMG,EAASH,EAAK,EACdI,EAAOJ,EAAK,EAAIA,EAAK,MAAQ,EAC7BK,EAASL,EAAK,EACdM,EAAON,EAAK,EAAIA,EAAK,OAAS,EAC9B,CAACO,EAASC,CAAO,EAAIV,EAC3B,GAAIU,EAAUH,GAAUG,EAAUF,EAC9B,MAAO,GACX,GAAIjqB,EAAK,OAAS,OACd,OAAOkqB,GAAWJ,GAAUI,GAAWH,EAE3C,KAAM,CAACK,EAAWC,CAAO,EAAIrqB,EAAK,KAClC,OAASoqB,GAAaN,GAAUM,GAAaL,GACxCM,GAAWP,GAAUM,GAAaL,GAClCK,EAAYN,GAAUO,EAAUN,CACzC,CACO,SAASO,GAAcb,EAAUzpB,EAAMsB,EAAWipB,EAAwB,CAC7E,IAAIpoB,EAAS,EACb,GAAIb,EAAU,UAAY,OACtB,OAAOa,EACX,MAAMtB,EAAQS,EAAU,QAAQ,OAC3BipB,GAA0B1pB,EAAM,OAASA,EAAM,MAAQ,IAAMgpB,GAAaJ,EAAUzpB,EAAMa,CAAK,GAChGsB,IAEJ,UAAWmlB,KAAKhmB,EAAU,QAAQ,WAC1BuoB,GAAaJ,EAAUzpB,EAAMsnB,CAAC,GAC9BnlB,IAGR,OAAOA,CACX,CACO,SAASqoB,GAAiBxB,EAASyB,EAAU,CAChD,IAAIC,EAAa1B,EACjB,GAAIyB,IAAa,OAAW,CACxB,IAAIE,EAAW,CAAC,GAAG3B,CAAO,EAC1B,MAAM4B,EAAOF,EAAWD,EAAS,GAAG,EAChCA,EAAS,IAAMA,EAAS,MACxBE,EAAS,OAAOF,EAAS,IAAK,CAAC,EAC/BE,EAAS,OAAOF,EAAS,KAAM,EAAGG,CAAI,IAGtCD,EAAS,OAAOF,EAAS,KAAO,EAAG,EAAGG,CAAI,EAC1CD,EAAS,OAAOF,EAAS,IAAK,CAAC,GAEnCE,EAAWA,EAAS,IAAI,CAAC/qB,EAAG8B,KAAO,CAC/B,GAAG9B,EACH,OAAQopB,EAAQtnB,CAAC,EAAE,MACtB,EAAC,EACFgpB,EAAaC,CAChB,CACD,OAAOD,CACX,CACO,SAASG,GAAe7B,EAASyB,EAAU,CAC9C,IAAItoB,EAAS,EACb,MAAM2oB,EAAWN,GAAiBxB,EAASyB,CAAQ,EACnD,QAAS/oB,EAAI,EAAGA,EAAIopB,EAAS,OAAQppB,IAAK,CACtC,MAAM9B,EAAIkrB,EAASppB,CAAC,EACpB,GAAI9B,EAAE,OACFuC,GAAUvC,EAAE,UAEZ,MACP,CACD,OAAOuC,CACX,CACO,SAAS4oB,GAAwBC,EAAMC,EAAoBC,EAAc,CAC5E,GAAI,OAAOA,GAAiB,SACxB,OAAOD,EAAqBC,EAE3B,CACD,IAAI/oB,EAAS,EACb,QAAST,EAAIspB,EAAOC,EAAoBvpB,EAAIspB,EAAMtpB,IAC9CS,GAAU+oB,EAAaxpB,CAAC,EAE5B,OAAOS,CACV,CACL,CACO,SAASgpB,GAAoBnC,EAASoC,EAAahiB,EAAOqhB,EAAUY,EAAI,CAC3E,MAAMX,EAAaF,GAAiBxB,EAASyB,CAAQ,EAC/Ca,EAAS,GACf,UAAW1rB,KAAK8qB,EACZ,GAAI9qB,EAAE,OACF0rB,EAAO,KAAK1rB,CAAC,MAGb,OAGR,GAAI0rB,EAAO,OAAS,EAChB,UAAW1rB,KAAK0rB,EACZliB,GAASxJ,EAAE,MAGnB,IAAI2rB,EAAWH,EACXI,EAAOH,GAAM,EACjB,KAAOG,GAAQpiB,GAASmiB,EAAWb,EAAW,QAC1Cc,GAAQd,EAAWa,CAAQ,EAAE,MAC7BA,IAEJ,QAAS7pB,EAAI0pB,EAAa1pB,EAAI6pB,EAAU7pB,IAAK,CACzC,MAAM,EAAIgpB,EAAWhpB,CAAC,EACjB,EAAE,QACH4pB,EAAO,KAAK,CAAC,CAEpB,CACD,OAAOA,CACX,CACO,SAASG,GAAmBC,EAASC,EAAkBC,EAAY,CACtE,IAAIvqB,EAAI,EACR,UAAWzB,KAAK+rB,EAAkB,CAC9B,MAAMtpB,EAAKzC,EAAE,OAASyB,EAAIA,GAAKuqB,GAAc,GAC7C,GAAIF,GAAWrpB,EAAKzC,EAAE,MAClB,OAAOA,EAAE,YAEbyB,GAAKzB,EAAE,KACV,CACD,MAAO,EACX,CACO,SAASisB,GAAgBC,EAAShb,EAAQib,EAAWC,EAAcC,EAAmBjB,EAAMkB,EAAWC,EAAaC,EAAYnB,EAAoB,CACvJ,MAAMoB,EAAoBL,EAAeC,EACzC,GAAIF,GAAaD,GAAWG,EACxB,MAAO,GACX,GAAIH,GAAWO,EACX,MAAO,GACX,IAAI1kB,EAAImJ,EACR,QAASwb,EAAK,EAAGA,EAAKrB,EAAoBqB,IAAM,CAC5C,MAAMxQ,EAAMkP,EAAO,EAAIsB,EACjBC,EAAK,OAAOL,GAAc,SAAWA,EAAYA,EAAUpQ,CAAG,EAEpE,GADAnU,GAAK4kB,EACDT,GAAWnkB,EACX,OAAOmU,CAEd,CACD,MAAM0Q,EAAgBxB,EAAOC,EACvBwB,EAAKX,GAAWM,GAAc,GACpC,GAAI,OAAOF,GAAc,SAAU,CAC/B,MAAM1mB,EAAS,KAAK,OAAOinB,EAAKJ,GAAqBH,CAAS,EAAIC,EAClE,OAAI3mB,GAAUgnB,EACV,OACGhnB,CACV,KACI,CACD,IAAIknB,EAAOL,EACX,QAAS3qB,EAAIyqB,EAAazqB,EAAI8qB,EAAe9qB,IAAK,CAC9C,MAAM6qB,EAAKL,EAAUxqB,CAAC,EACtB,GAAI+qB,GAAMC,EAAOH,EACb,OAAO7qB,EACXgrB,GAAQH,CACX,CACD,MACH,CACL,CACA,IAAII,GAAc,EACdC,GAAe,GACnB,MAAMC,GAAQ,OAAO,OAAW,IAChC,eAAeC,IAAmB,OAC1BD,MAAStX,EAAA,+BAAU,QAAV,YAAAA,EAAiB,SAAU,SAExC,MAAM,SAAS,MAAM,MACrBoX,GAAc,EACdC,GAAe,GACfG,KACJ,CACKD,KACL,SAASE,GAAazU,EAAG0U,EAAKC,EAAUC,EAAM,CAC1C,MAAO,GAAG5U,CAAC,IAAI4U,IAAQF,GAAA,YAAAA,EAAK,KAAI,IAAIC,CAAQ,EAChD,CAEO,SAASE,GAAkB7U,EAAG0U,EAAKE,EAAMD,EAAW,SAAU,CACjE,MAAMnuB,EAAMiuB,GAAazU,EAAG0U,EAAKC,EAAUC,CAAI,EAC/C,IAAIE,EAAUT,GAAa7tB,CAAG,EAC9B,OAAIsuB,IAAY,SACZA,EAAUJ,EAAI,YAAY1U,CAAC,EAC3BqU,GAAa7tB,CAAG,EAAIsuB,EACpBV,MAEAA,GAAc,MACdC,GAAe,GACfD,GAAc,GAEXU,CACX,CACO,SAASC,GAAqB/U,EAAG4U,EAAM,CAC1C,MAAMpuB,EAAMiuB,GAAazU,EAAG,OAAW,SAAU4U,CAAI,EACrD,OAAOP,GAAa7tB,CAAG,CAC3B,CAEO,SAASwuB,GAAoBN,EAAKE,EAAM,CAC3C,OAAI,OAAOA,GAAS,WAChBA,EAAOA,EAAK,cAETK,GAAyBP,EAAKE,CAAI,CAC7C,CACA,SAASM,GAAWR,EAAKC,EAAU,CAC/B,MAAMQ,EAAS,6BACfT,EAAI,KAAI,EACRA,EAAI,aAAeC,EACnB,MAAM/qB,EAAS8qB,EAAI,YAAYS,CAAM,EACrC,OAAAT,EAAI,QAAO,EACJ9qB,CACX,CACA,MAAMwrB,GAAY,GAClB,SAASH,GAAyBP,EAAKE,EAAM,CACzC,UAAW9rB,KAAKssB,GACZ,GAAItsB,EAAE,MAAQ8rB,EACV,OAAO9rB,EAAE,IAEjB,MAAMusB,EAAoBH,GAAWR,EAAK,YAAY,EAEhDY,EAAO,EADSJ,GAAWR,EAAK,QAAQ,EACjB,yBAA2BW,EAAkB,0BACtEA,EAAkB,wBAA0B,EAChD,OAAAD,GAAU,KAAK,CACX,IAAKR,EACL,IAAKU,CACb,CAAK,EACMA,CACX,CACO,SAASC,GAAuBvmB,EAAMwmB,EAAYC,EAAWC,EAAUC,EAAWC,EAAW,CAChG,KAAM,CAAE,IAAAlB,EAAK,KAAAtD,EAAM,MAAAyE,CAAK,EAAK7mB,EAC7B,IAAI8mB,EAAW,OAAO,iBACtB,MAAMC,EAAW,IACjB,GAAIP,IAAe,SACfM,EAAWL,EAAYD,EACnBM,EAAWC,GAAU,CACrB,MAAMC,EAAO,EAAIF,EAAWC,EAC5BrB,EAAI,YAAcsB,EAClBtB,EAAI,UAAYmB,EAAM,eACtBnB,EAAI,SAAStD,EAAK,EAAI,EAAGA,EAAK,EAAI,EAAGA,EAAK,OAASuE,EAAY,EAAI,GAAIvE,EAAK,QAAUwE,EAAY,EAAI,EAAE,EACxGlB,EAAI,YAAc,EACdgB,IAAa,SACbA,EAAS,UAAYG,EAAM,eAElC,CAEL,OAAOC,EAAWC,CACtB,CACO,SAASE,GAAajnB,EAAM0mB,EAAUQ,EAAe,CACxD,KAAM,CAAE,IAAAxB,EAAK,MAAAmB,CAAO,EAAG7mB,EACjBpF,EAAS8rB,GAAY,GACrBS,EAAUD,GAAiBL,EAAM,SACvC,OAAIM,IAAYvsB,EAAO,YACnB8qB,EAAI,UAAYyB,EAChBvsB,EAAO,UAAYusB,GAEhBvsB,CACX,CAEO,SAASwsB,GAAqBpnB,EAAMqnB,EAAMC,EAAc,CAC3D,KAAM,CAAE,KAAAlF,EAAM,IAAAsD,EAAK,MAAAmB,CAAK,EAAK7mB,EAC7B0lB,EAAI,UAAYmB,EAAM,SACtBU,GAAa,CACT,IAAK7B,EACL,KAAAtD,EACA,MAAOyE,CACf,EAAOQ,EAAMC,CAAY,CACzB,CACA,SAASE,GAAmB9B,EAAK2B,EAAMvtB,EAAGsG,EAAG2gB,EAAGI,EAAGmF,EAAMO,EAAOS,EAAc,CACtEA,IAAiB,QACjB5B,EAAI,SAAS2B,EAAMvtB,EAAIinB,GAAK8F,EAAM,sBAAwB,IAAMzmB,EAAI+gB,EAAI,EAAImF,CAAI,EAE3EgB,IAAiB,SACtB5B,EAAI,SAAS2B,EAAMvtB,EAAIinB,EAAI,EAAG3gB,EAAI+gB,EAAI,EAAImF,CAAI,EAG9CZ,EAAI,SAAS2B,EAAMvtB,EAAI+sB,EAAM,sBAAwB,GAAKzmB,EAAI+gB,EAAI,EAAImF,CAAI,CAElF,CACO,SAASmB,GAAY/B,EAAKgC,EAAW,CACxC,MAAMC,EAAc9B,GAAkB,cAAeH,EAAKgC,CAAS,EACnE,OAAOC,EAAY,wBAA0BA,EAAY,wBAC7D,CACA,SAASC,GAAeP,EAAMtG,EAAG,CACzBsG,EAAK,SAAS;AAAA,CAAI,IAIlBA,EAAOA,EAAK,MAAM,QAAS,CAAC,EAAE,CAAC,GAEnC,MAAMQ,EAAM9G,EAAI,EAChB,OAAIsG,EAAK,OAASQ,IACdR,EAAOA,EAAK,MAAM,EAAGQ,CAAG,GAErBR,CACX,CACA,SAASS,GAAkBpC,EAAK2B,EAAMvtB,EAAGsG,EAAG2gB,EAAGI,EAAGmF,EAAMO,EAAOS,EAAcS,EAAe,CACxF,MAAML,EAAYb,EAAM,aAClBmB,EAAQC,GAAUvC,EAAK2B,EAAMK,EAAW3G,EAAI8F,EAAM,sBAAwB,EAAGkB,GAAiB,EAAK,EACnGG,EAAWT,GAAY/B,EAAKgC,CAAS,EACrCS,EAAatB,EAAM,WAAaqB,EAChCE,EAAeF,EAAWC,GAAcH,EAAM,OAAS,GACvDK,EAAWD,EAAevB,EAAM,oBAAsB1F,EACxDkH,IAEA3C,EAAI,KAAI,EACRA,EAAI,KAAK5rB,EAAGsG,EAAG2gB,EAAGI,CAAC,EACnBuE,EAAI,KAAI,GAEZ,MAAM4C,EAAWloB,EAAI+gB,EAAI,EAAIiH,EAAe,EAC5C,IAAIG,EAAQ,KAAK,IAAInoB,EAAIymB,EAAM,oBAAqByB,CAAQ,EAC5D,UAAW1R,KAAQoR,EAGf,GAFAR,GAAmB9B,EAAK9O,EAAM9c,EAAGyuB,EAAOxH,EAAGmH,EAAU5B,EAAMO,EAAOS,CAAY,EAC9EiB,GAASJ,EACLI,EAAQnoB,EAAI+gB,EACZ,MAEJkH,GACA3C,EAAI,QAAO,CAEnB,CAEO,SAAS6B,GAAavnB,EAAMqnB,EAAMC,EAAckB,EAAeT,EAAe,CACjF,KAAM,CAAE,IAAArC,EAAK,KAAAtD,EAAM,MAAAyE,CAAK,EAAK7mB,EACvB,CAAE,EAAAlG,EAAG,EAAAsG,EAAG,MAAO2gB,EAAG,OAAQI,CAAG,EAAGiB,EACtCoG,EAAgBA,GAAiB,GAC5BA,IACDnB,EAAOO,GAAeP,EAAMtG,CAAC,GAEjC,MAAMuF,EAAON,GAAoBN,EAAKmB,CAAK,EACrC4B,EAAQxY,GAAUoX,CAAI,IAAM,MAOlC,GANIC,IAAiB,QAAamB,IAC9BnB,EAAe,SAEfmB,IACA/C,EAAI,UAAY,OAEhB2B,EAAK,OAAS,EAAG,CACjB,IAAIqB,EAAU,GACVpB,IAAiB,SAEjB5B,EAAI,UAAY,QAChBgD,EAAU,IAELpB,IAAiB,QAAaA,IAAiB,SAEpD5B,EAAI,UAAY4B,EAChBoB,EAAU,IAETF,EAIDV,GAAkBpC,EAAK2B,EAAMvtB,EAAGsG,EAAG2gB,EAAGI,EAAGmF,EAAMO,EAAOS,EAAcS,CAAa,EAHjFP,GAAmB9B,EAAK2B,EAAMvtB,EAAGsG,EAAG2gB,EAAGI,EAAGmF,EAAMO,EAAOS,CAAY,EAKnEoB,IAEAhD,EAAI,UAAY,SAEhB+C,IACA/C,EAAI,UAAY,UAEvB,CACL,CACO,SAASiD,GAAYjD,EAAK5rB,EAAGsG,EAAGyB,EAAO0H,EAAQqf,EAAQ,CACtD,OAAOA,GAAW,WAClBA,EAAS,CAAE,GAAIA,EAAQ,GAAIA,EAAQ,GAAIA,EAAQ,GAAIA,IAGvDA,EAAS,CACL,GAAI,KAAK,IAAI,EAAG,KAAK,IAAIA,EAAO,GAAIrf,EAAS,EAAG1H,EAAQ,CAAC,CAAC,EAC1D,GAAI,KAAK,IAAI,EAAG,KAAK,IAAI+mB,EAAO,GAAIrf,EAAS,EAAG1H,EAAQ,CAAC,CAAC,EAC1D,GAAI,KAAK,IAAI,EAAG,KAAK,IAAI+mB,EAAO,GAAIrf,EAAS,EAAG1H,EAAQ,CAAC,CAAC,EAC1D,GAAI,KAAK,IAAI,EAAG,KAAK,IAAI+mB,EAAO,GAAIrf,EAAS,EAAG1H,EAAQ,CAAC,CAAC,CAClE,EACI6jB,EAAI,OAAO5rB,EAAI8uB,EAAO,GAAIxoB,CAAC,EAC3BslB,EAAI,MAAM5rB,EAAI+H,EAAOzB,EAAGtG,EAAI+H,EAAOzB,EAAIwoB,EAAO,GAAIA,EAAO,EAAE,EAC3DlD,EAAI,MAAM5rB,EAAI+H,EAAOzB,EAAImJ,EAAQzP,EAAI+H,EAAQ+mB,EAAO,GAAIxoB,EAAImJ,EAAQqf,EAAO,EAAE,EAC7ElD,EAAI,MAAM5rB,EAAGsG,EAAImJ,EAAQzP,EAAGsG,EAAImJ,EAASqf,EAAO,GAAIA,EAAO,EAAE,EAC7DlD,EAAI,MAAM5rB,EAAGsG,EAAGtG,EAAI8uB,EAAO,GAAIxoB,EAAGwoB,EAAO,EAAE,CAC/C,CACO,SAASC,GAAanD,EAAKoD,EAAOC,EAAO,CAE5CrD,EAAI,IAAIoD,EAAOC,EAAQ,KAAS,IAAK,KAAQ,EAAG,EAAI,KAAK,GAAI,EAAK,EAClErD,EAAI,IAAIoD,EAAOC,EAAO,KAAQ,EAAG,EAAI,KAAK,GAAI,EAAK,EACnDrD,EAAI,IAAIoD,EAAOC,EAAQ,KAAS,IAAK,KAAQ,EAAG,EAAI,KAAK,GAAI,EAAK,CACtE,CACO,SAASC,GAAYtD,EAAKuD,EAAQC,EAAW,CAEhD,MAAMC,EAAQ,SAAUzlB,EAAG0lB,EAAI,CAC3B,MAAMC,EAAKD,EAAG,EAAI1lB,EAAE,EACd4lB,EAAKF,EAAG,EAAI1lB,EAAE,EACd6lB,EAAO,KAAK,KAAKF,EAAKA,EAAKC,EAAKA,CAAE,EAClCE,EAAMH,EAAKE,EACXE,EAAMH,EAAKC,EACjB,MAAO,CACH,EAAGF,EACH,EAAGD,EAAG,EAAI1lB,EAAE,EACZ,IAAK6lB,EACL,GAAIC,EACJ,GAAIC,EACJ,IAAK,KAAK,MAAMA,EAAKD,CAAG,CACpC,CACA,EACI,IAAIZ,EAGJ,MAAMzxB,EAAM8xB,EAAO,OACnB,IAAIS,EAAKT,EAAO9xB,EAAM,CAAC,EAEvB,QAASgD,EAAI,EAAGA,EAAIhD,EAAKgD,IAAK,CAC1B,IAAIwvB,EAAKV,EAAO9uB,EAAIhD,CAAG,EACvB,MAAMyyB,EAAKX,GAAQ9uB,EAAI,GAAKhD,CAAG,EAGzB0yB,EAAKV,EAAMQ,EAAID,CAAE,EACjBI,EAAKX,EAAMQ,EAAIC,CAAE,EACjBG,EAAOF,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GAClCE,EAASH,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAK,CAACC,EAAG,GAC3C,IAAIG,EAAQ,KAAK,KAAKF,EAAO,GAAK,GAAKA,EAAO,EAAI,EAAIA,CAAI,EAEtDG,EAAe,EACfC,EAAgB,GAChBH,EAAS,EACLC,EAAQ,EACRA,EAAQ,KAAK,GAAKA,GAGlBA,EAAQ,KAAK,GAAKA,EAClBC,EAAe,GACfC,EAAgB,IAIhBF,EAAQ,IACRC,EAAe,GACfC,EAAgB,IAGxBvB,EAASe,EAAG,SAAW,OAAYA,EAAG,OAAST,EAG/C,MAAMkB,EAAYH,EAAQ,EAI1B,IAAII,EAAS,KAAK,IAAK,KAAK,IAAID,CAAS,EAAIxB,EAAU,KAAK,IAAIwB,CAAS,CAAC,EAItEE,EACAD,EAAS,KAAK,IAAIR,EAAG,IAAM,EAAGC,EAAG,IAAM,CAAC,GACxCO,EAAS,KAAK,IAAIR,EAAG,IAAM,EAAGC,EAAG,IAAM,CAAC,EACxCQ,EAAU,KAAK,IAAKD,EAAS,KAAK,IAAID,CAAS,EAAK,KAAK,IAAIA,CAAS,CAAC,GAGvEE,EAAU1B,EAId,IAAI9uB,EAAI6vB,EAAG,EAAIG,EAAG,GAAKO,EACnBjqB,EAAIupB,EAAG,EAAIG,EAAG,GAAKO,EAGvBvwB,GAAK,CAACgwB,EAAG,GAAKQ,EAAUJ,EACxB9pB,GAAK0pB,EAAG,GAAKQ,EAAUJ,EAGvBxE,EAAI,IAAI5rB,EAAGsG,EAAGkqB,EAAST,EAAG,IAAO,KAAK,GAAK,EAAKK,EAAcJ,EAAG,IAAO,KAAK,GAAK,EAAKI,EAAcC,CAAa,EAElHT,EAAKC,EACLA,EAAKC,CACR,CACDlE,EAAI,UAAS,CACjB,CACO,SAAS6E,GAAc1I,EAAKtN,EAAK1S,EAAO0H,EAAQmb,EAAmBI,EAAmBjB,EAAae,EAAaP,EAAYQ,EAAYpB,EAAM/B,EAAegC,EAAoB8G,EAAe7F,EAAW,CAC9M,MAAM/pB,EAAS,CACX,EAAG,EACH,EAAGkqB,EAAoBD,EACvB,MAAO,EACP,OAAQ,CAChB,EACI,GAAIhD,GAAO2I,EAAc,QAAUjW,GAAOkP,GAAQlP,EAAM,IAAMsN,EAAM,EAChE,OAAOjnB,EAEX,MAAM6pB,EAAeK,EAAoBJ,EACzC,GAAI7C,GAAOH,EAAe,CACtB,MAAM+I,EAAM5G,EAAchC,EAAM,GAAK,EAC/B6I,EAAcpH,GAAekH,CAAa,EAChD5vB,EAAO,GAAK8vB,EAAcrG,EAC1B,QAASlqB,EAAI0pB,EAAa1pB,IAAM0nB,EAAK1nB,GAAKswB,EACtC7vB,EAAO,GAAK4vB,EAAcC,IAAQ,EAAItwB,EAAIA,EAAI,CAAC,EAAE,MAAQswB,CAEhE,KAEG,SAAStwB,EAAI,EAAGA,EAAI0nB,EAAK1nB,IACrBS,EAAO,GAAK4vB,EAAcrwB,CAAC,EAAE,MAIrC,GADAS,EAAO,MAAQ4vB,EAAc3I,CAAG,EAAE,MAAQ,EACtCtN,IAAQ,GACR3Z,EAAO,EAAI8pB,EACX9pB,EAAO,OAAS6pB,UAEXlQ,IAAQ,GAAI,CACjB3Z,EAAO,EAAI,EACXA,EAAO,OAAS8pB,EAChB,IAAItqB,EAAQynB,EACZ,MAAM8I,EAAQH,EAAc3I,CAAG,EAAE,MAC3BkC,EAASyG,EAAc3I,CAAG,EAAE,OAClC,KAAOznB,EAAQ,GACX4nB,GAAawI,EAAcpwB,EAAQ,CAAC,EAAE,MAAOuwB,CAAK,GAClDH,EAAcpwB,EAAQ,CAAC,EAAE,SAAW2pB,GAAQ,CAC5C,MAAM1rB,EAAImyB,EAAcpwB,EAAQ,CAAC,EACjCQ,EAAO,GAAKvC,EAAE,MACduC,EAAO,OAASvC,EAAE,MAClB+B,GACH,CACD,IAAIC,EAAMwnB,EACV,KAAOxnB,EAAM,EAAImwB,EAAc,QAC3BxI,GAAawI,EAAcnwB,EAAM,CAAC,EAAE,MAAOswB,CAAK,GAChDH,EAAcnwB,EAAM,CAAC,EAAE,SAAW0pB,GAAQ,CAC1C,MAAM1rB,EAAImyB,EAAcnwB,EAAM,CAAC,EAC/BO,EAAO,OAASvC,EAAE,MAClBgC,GACH,CACD,GAAI,CAAC0pB,EAAQ,CACT,MAAM2G,EAAcpH,GAAekH,CAAa,EAC1CI,EAAOhwB,EAAO,EAAI8vB,EACpBE,EAAO,IACPhwB,EAAO,GAAKgwB,EACZhwB,EAAO,OAASgwB,GAEhBhwB,EAAO,EAAIA,EAAO,MAAQiH,IAC1BjH,EAAO,MAAQiH,EAAQjH,EAAO,EAErC,CACJ,SACQ2Z,GAAOkP,EAAOC,EAAoB,CACvC,IAAImH,EAAKpH,EAAOlP,EAEhB,IADA3Z,EAAO,EAAI2O,EACJshB,EAAK,GAAG,CACX,MAAM9K,EAAIxL,EAAMsW,EAAK,EACrBjwB,EAAO,OAAS,OAAO+pB,GAAc,SAAWA,EAAYA,EAAU5E,CAAC,EACvEnlB,EAAO,GAAKA,EAAO,OACnBiwB,GACH,CACDjwB,EAAO,QAAU,CACpB,KACI,CACD,MAAM6vB,EAAM7F,EAAcrQ,EAAM,GAAK,EACrC,GAAI,OAAOoQ,GAAc,SAAU,CAC/B,MAAM3f,EAAQuP,EAAMqQ,EACpBhqB,EAAO,GAAKoK,EAAQ2f,CACvB,KAEG,SAAS5E,EAAI6E,EAAa7E,IAAMxL,EAAKwL,GAAK0K,EACtC7vB,EAAO,GAAK+pB,EAAU5E,CAAC,EAAI0K,EAGnC7vB,EAAO,QAAU,OAAO+pB,GAAc,SAAWA,EAAYA,EAAUpQ,CAAG,GAAK,CAClF,CACD,OAAO3Z,CACX,CCnmBA,MAAMkwB,GAAW,GAAK,GACf,SAASC,GAAmBlJ,EAAKtN,EAAK,CACzC,OAAQA,EAAM,GAAKuW,GAAWjJ,CAClC,CACO,SAASmJ,GAAUC,EAAQ,CAC9B,OAAOA,EAASH,EACpB,CACO,SAASI,GAAUD,EAAQ,CAC9B,OAAO,KAAK,MAAMA,EAASH,EAAQ,EAAI,CAC3C,CACO,SAASK,GAAqBF,EAAQ,CACzC,MAAMpJ,EAAMmJ,GAAUC,CAAM,EACtB1W,EAAM2W,GAAUD,CAAM,EAC5B,MAAO,CAACpJ,EAAKtN,CAAG,CACpB,CACO,MAAM6W,EAAqB,CAA3B,cACHzxB,GAAA,qBAAgB,CACZ,EAAG,EACH,EAAG,EACH,MAAO,EACP,OAAQ,CAChB,GACIA,GAAA,kBAAa,GACbA,GAAA,kBAAa,IACbA,GAAA,kBAAcsxB,GAAW,CACrB,MAAMpJ,EAAMmJ,GAAUC,CAAM,EACtB1W,EAAM2W,GAAUD,CAAM,EACtBlK,EAAI,KAAK,cACTsK,EAAexJ,GAAOd,EAAE,GAAKc,GAAOd,EAAE,EAAIA,EAAE,OAAUc,EAAM,KAAK,WACjEyJ,EAAe/W,GAAOwM,EAAE,GAAKxM,GAAOwM,EAAE,EAAIA,EAAE,QAAW,KAAK,WAAW,SAASxM,CAAG,EACzF,OAAO8W,GAAeC,CAC9B,GACI,UAAUC,EAAWC,EAAYC,EAAY,CACrC,KAAK,cAAc,IAAMF,EAAU,GACnC,KAAK,cAAc,IAAMA,EAAU,GACnC,KAAK,cAAc,QAAUA,EAAU,OACvC,KAAK,cAAc,SAAWA,EAAU,QACxC,KAAK,aAAeC,GACpBz0B,GAAU,KAAK,WAAY00B,CAAU,IAEzC,KAAK,cAAgBF,EACrB,KAAK,WAAaC,EAClB,KAAK,WAAaC,EAClB,KAAK,iBAAgB,EACxB,CACL,CACO,MAAMC,WAA4BN,EAAqB,CAAvD,kCACHzxB,GAAA,aAAQ,IAAI,KACZA,GAAA,gBAAW,CAACuoB,EAAU9a,IAAU,CAC5B,KAAK,MAAM,IAAI2jB,GAAmB7I,EAAS,CAAC,EAAGA,EAAS,CAAC,CAAC,EAAG9a,CAAK,CAC1E,GACIzN,GAAA,gBAAYuoB,GACD,KAAK,MAAM,IAAI6I,GAAmB7I,EAAS,CAAC,EAAGA,EAAS,CAAC,CAAC,CAAC,GAEtEvoB,GAAA,wBAAmB,IAAM,CACrB,SAAW,CAACnC,CAAG,IAAK,KAAK,MAAM,QAAO,EAC7B,KAAK,WAAWA,CAAG,GACpB,KAAK,MAAM,OAAOA,CAAG,CAGrC,GACA,CCnEO,MAAMm0B,EAAQ,CAEjB,YAAYjyB,EAAQ,GAAI,CADxBC,GAAA,cAEI,KAAK,MAAQ,IAAI,IAAID,EAAM,IAAII,GAAKixB,GAAmBjxB,EAAE,CAAC,EAAGA,EAAE,CAAC,CAAC,CAAC,CAAC,CACtE,CACD,IAAIrB,EAAM,CACN,KAAK,MAAM,IAAIsyB,GAAmBtyB,EAAK,CAAC,EAAGA,EAAK,CAAC,CAAC,CAAC,CACtD,CACD,IAAIA,EAAM,CACN,OAAIA,IAAS,OACF,GACJ,KAAK,MAAM,IAAIsyB,GAAmBtyB,EAAK,CAAC,EAAGA,EAAK,CAAC,CAAC,CAAC,CAC7D,CACD,OAAOA,EAAM,CACT,KAAK,MAAM,OAAOsyB,GAAmBtyB,EAAK,CAAC,EAAGA,EAAK,CAAC,CAAC,CAAC,CACzD,CACD,OAAQ,CACJ,KAAK,MAAM,OACd,CACD,IAAI,MAAO,CACP,OAAO,KAAK,MAAM,IACrB,CACD,WAAY,CACR,UAAWmzB,KAAc,KAAK,MAE1B,GADYV,GAAUU,CAAU,EACtB,EACN,MAAO,GAEf,MAAO,EACV,CACD,mBAAmBxJ,EAAM,CACrB,QAAS7N,EAAM6N,EAAK,EAAG7N,EAAM6N,EAAK,EAAIA,EAAK,OAAQ7N,IAC/C,QAASsN,EAAMO,EAAK,EAAGP,EAAMO,EAAK,EAAIA,EAAK,MAAOP,IAC9C,GAAI,KAAK,MAAM,IAAIkJ,GAAmBlJ,EAAKtN,CAAG,CAAC,EAC3C,MAAO,GAInB,MAAO,EACV,CACD,gBAAgB6N,EAAM,CAClB,UAAWrC,KAAKqC,EACZ,GAAI,KAAK,mBAAmBrC,CAAC,EACzB,MAAO,GAGf,MAAO,EACV,CACD,CAAC,QAAS,CACN,UAAW6L,KAAc,KAAK,MAC1B,MAAMT,GAAqBS,CAAU,CAE5C,CACL,CClDO,SAASC,GAAahF,EAAO,CAChC,MAAO,CACH,qBAAsBA,EAAM,YAC5B,kBAAmBA,EAAM,SACzB,qBAAsBA,EAAM,YAC5B,kBAAmBA,EAAM,SACzB,oBAAqBA,EAAM,WAC3B,mBAAoBA,EAAM,UAC1B,oBAAqBA,EAAM,WAC3B,uBAAwBA,EAAM,aAC9B,uBAAwBA,EAAM,aAC9B,oBAAqBA,EAAM,WAC3B,0BAA2BA,EAAM,iBAAmBA,EAAM,WAC1D,6BAA8BA,EAAM,mBACpC,gBAAiBA,EAAM,OACvB,uBAAwBA,EAAM,aAC9B,kBAAmBA,EAAM,SACzB,4BAA6BA,EAAM,iBACnC,0BAA2BA,EAAM,gBACjC,kBAAmBA,EAAM,SACzB,2BAA4BA,EAAM,iBAClC,yBAA0BA,EAAM,eAChC,qBAAsBA,EAAM,YAC5B,gCAAiCA,EAAM,uBAAyBA,EAAM,YACtE,yBAA0BA,EAAM,gBAChC,mBAAoBA,EAAM,UAC1B,gCAAiC,GAAGA,EAAM,qBAAqB,KAC/D,8BAA+B,GAAGA,EAAM,mBAAmB,KAC3D,0BAA2BA,EAAM,gBACjC,wBAAyBA,EAAM,cAC/B,0BAA2BA,EAAM,gBACjC,oBAAqBA,EAAM,WAC3B,yBAA0BA,EAAM,eAChC,GAAIA,EAAM,uBAAyB,OAC7B,CAAE,EACF,CAAE,+BAAgCA,EAAM,sBAC9C,GAAIA,EAAM,0BAA4B,OAChC,CAAE,EACF,CAAE,mCAAoCA,EAAM,yBAClD,GAAIA,EAAM,iBAAmB,OAAY,GAAK,CAAE,wBAAyB,GAAGA,EAAM,cAAc,IAAI,CAC5G,CACA,CACA,MAAMiF,GAAsB,CACxB,YAAa,UACb,SAAU,UACV,YAAa,0BACb,SAAU,UACV,WAAY,UACZ,UAAW,UACX,WAAY,UACZ,aAAc,UACd,aAAc,UACd,WAAY,UACZ,gBAAiB,YACjB,mBAAoB,UACpB,OAAQ,UACR,aAAc,UACd,SAAU,UACV,iBAAkB,UAClB,gBAAiB,UACjB,SAAU,UACV,iBAAkB,UAClB,eAAgB,UAChB,YAAa,4BACb,gBAAiB,mBACjB,UAAW,UACX,sBAAuB,EACvB,oBAAqB,EACrB,eAAgB,GAChB,gBAAiB,WACjB,cAAe,OACf,gBAAiB,MACjB,WAAY,8IACZ,eAAgB,OAChB,WAAY,GAChB,EAEO,SAASC,IAAqB,CACjC,OAAOD,EACX,CAEY,MAACE,GAAe9uB,GAAM,cAAc4uB,EAAmB,EAE5D,SAASG,IAAW,CACvB,OAAO/uB,GAAM,WAAW8uB,EAAY,CACxC,CACO,SAASE,GAAqBrF,KAAUsF,EAAU,CACrD,MAAMC,EAAS,CAAE,GAAGvF,GACpB,UAAWwF,KAAWF,EAClB,GAAIE,IAAY,OACZ,UAAW70B,KAAO60B,EAEVA,EAAQ,eAAe70B,CAAG,IACtBA,IAAQ,SACR40B,EAAO50B,CAAG,EAAI6oB,GAAMgM,EAAQ70B,CAAG,EAAG40B,EAAO50B,CAAG,CAAC,EAG7C40B,EAAO50B,CAAG,EAAI60B,EAAQ70B,CAAG,GAM7C,OAAI40B,EAAO,iBAAmB,QAC1BvF,EAAM,aAAeuF,EAAO,YAC5BvF,EAAM,kBAAoBuF,EAAO,mBACjCA,EAAO,eAAiB,GAAGA,EAAO,eAAe,IAAIA,EAAO,UAAU,KAEtEA,EAAO,eAAiB,QACxBvF,EAAM,aAAeuF,EAAO,YAC5BvF,EAAM,gBAAkBuF,EAAO,iBAC/BA,EAAO,aAAe,GAAGA,EAAO,aAAa,IAAIA,EAAO,UAAU,KAElEA,EAAO,iBAAmB,QAC1BvF,EAAM,aAAeuF,EAAO,YAC5BvF,EAAM,kBAAoBuF,EAAO,mBACjCA,EAAO,eAAiB,GAAGA,EAAO,eAAe,IAAIA,EAAO,UAAU,IAEnEA,CACX,CCzHA,MAAME,GAAc,IACpB,SAASC,GAAY7G,EAAKjtB,EAAMouB,EAAO2F,EAAiB,OACpD,MAAM,EAAIA,EAAgB/zB,CAAI,EAC9B,QAAOuV,EAAA,iBAAG,UAAH,YAAAA,EAAA,OAAa0X,EAAKjtB,EAAMouB,KAAUyF,EAC7C,CACO,SAASG,GAAc/G,EAAKmB,EAAOxuB,EAAGq0B,EAAUC,EAAcC,EAAgBC,EAAgBC,EAAgBN,EAAiB,CAClI,IAAI3E,EAAM,EACV,MAAMkF,EAAQJ,IAAiB,OACzB,CAAE,EACFA,EAAa,IAAIpY,GAAO,CACtB,MAAMwL,EAAIwM,GAAY7G,EAAKnR,EAAImY,CAAQ,EAAG7F,EAAO2F,CAAe,EAChE,OAAA3E,EAAM,KAAK,IAAIA,EAAK9H,CAAC,EACdA,CACnB,CAAS,EACL,GAAIgN,EAAM,OAAS,GAAKD,EAAgB,CACpCjF,EAAM,EAEN,IAAImF,EAAM,EACV,UAAWC,KAAQF,EACfC,GAAOC,EAEX,MAAMC,EAAUF,EAAMD,EAAM,OAE5B,QAAS5yB,EAAI,EAAGA,EAAI4yB,EAAM,OAAQ5yB,IAC1B4yB,EAAM5yB,CAAC,GAAK+yB,EAAU,EACtBH,EAAM5yB,CAAC,EAAI,EAGX0tB,EAAM,KAAK,IAAIA,EAAKkF,EAAM5yB,CAAC,CAAC,CAGvC,CACD0tB,EAAM,KAAK,IAAIA,EAAKnC,EAAI,YAAYrtB,EAAE,KAAK,EAAE,MAAQwuB,EAAM,sBAAwB,GAAKxuB,EAAE,OAAS,OAAY,EAAI,GAAG,EACtH,MAAM80B,EAAQ,KAAK,IAAI,KAAK,KAAKP,CAAc,EAAG,KAAK,IAAI,KAAK,MAAMC,CAAc,EAAG,KAAK,KAAKhF,CAAG,CAAC,CAAC,EACtG,MAAO,CACH,GAAGxvB,EACH,MAAO80B,CACf,CACA,CAEO,SAASC,GAAe3L,EAASgC,EAAM4J,EAAsBC,EAAaV,EAAgBC,EAAgBhG,EAAO2F,EAAiBe,EAAiB,CACtJ,MAAMC,EAAU3f,SAAa4V,CAAI,EAC3BgK,EAA0B5f,SAAawf,CAAoB,EAC3DK,EAAW7f,SAAagZ,CAAK,EACnC2G,EAAQ,QAAU/J,EAClBgK,EAAwB,QAAUJ,EAClCK,EAAS,QAAU7G,EACnB,KAAM,CAAC8G,EAAQjI,CAAG,EAAIkI,EAAa,QAAC,IAAM,CACtC,GAAI,OAAO,OAAW,IAClB,MAAO,CAAC,KAAM,IAAI,EACtB,MAAMC,EAAY,SAAS,cAAc,QAAQ,EACjD,OAAAA,EAAU,MAAM,QAAa,OAC7BA,EAAU,MAAM,QAAa,IAC7BA,EAAU,MAAM,SAAc,QACvB,CAACA,EAAWA,EAAU,WAAW,KAAM,CAAE,MAAO,EAAO,EAAC,CAClE,EAAE,CAAE,GACLhe,kBAAsB,KACd8d,GACA,SAAS,gBAAgB,OAAOA,CAAM,EACnC,IAAM,CACTA,GAAA,MAAAA,EAAQ,QACpB,GACO,CAACA,CAAM,CAAC,EACX,MAAMG,EAAUjgB,SAAa,EAAE,EACzBkgB,EAAclgB,WACd,CAAC8e,EAAcqB,CAAgB,EAAIte,EAAc,WACvDG,yBAAsB,IAAM,CACxB,MAAMoe,EAAWR,EAAwB,QACzC,GAAIQ,IAAa,QAAaxM,EAAQ,MAAMrpB,EAAiB,EACzD,OACJ,IAAI81B,EAAc,KAAK,IAAI,EAAG,GAAK,KAAK,MAAMzM,EAAQ,OAAS,GAAK,CAAC,EACjE0M,EAAW,EACXD,EAAcV,EAAQ,SAAWU,EAAc,IAC/CA,IACAC,EAAW,GAEf,MAAMC,EAAc,CAChB,EAAG,EACH,EAAG,EACH,MAAO3M,EAAQ,OACf,OAAQ,KAAK,IAAI+L,EAAQ,QAASU,CAAW,CACzD,EACcG,EAAkB,CACpB,EAAG,EACH,EAAGb,EAAQ,QAAU,EACrB,MAAO/L,EAAQ,OACf,OAAQ,CACpB,GACmB,SAAY,CACnB,MAAM6M,EAAYL,EAASG,EAAab,EAAgB,MAAM,EACxDgB,EAAgBJ,EAAW,EAAIF,EAASI,EAAiBd,EAAgB,MAAM,EAAI,OACzF,IAAIiB,EAEA,OAAOF,GAAc,SACrBE,EAAQF,EAGRE,EAAQ,MAAMl2B,GAAkBg2B,CAAS,EAEzCC,IAAkB,SAEd,OAAOA,GAAkB,SACzBC,EAAQ,CAAC,GAAGA,EAAO,GAAGD,CAAa,EAGnCC,EAAQ,CAAC,GAAGA,EAAO,GAAI,MAAMl2B,GAAkBi2B,CAAa,CAAE,GAGtER,EAAY,QAAUtM,EACtBuM,EAAiBQ,CAAK,CAClC,GACe,CACV,EAAE,CAACjB,EAAgB,OAAQ9L,CAAO,CAAC,EAC7BmM,EAAa,QAAC,IAAM,CAoCvB,IAAIhzB,EAlCI6mB,EAAQ,MAAMrpB,EAAiB,EACxBqpB,EAEPiE,IAAQ,KACDjE,EAAQ,IAAIppB,GACXD,GAAkBC,CAAC,EACZA,EACJ,CACH,GAAGA,EACH,MAAOi0B,EAC/B,CACiB,GAEL5G,EAAI,KAAOgI,EAAS,QAAQ,aACrBjM,EAAQ,IAAI,CAACppB,EAAGq0B,IAAa,CAChC,GAAIt0B,GAAkBC,CAAC,EACnB,OAAOA,EACX,GAAIy1B,EAAQ,QAAQz1B,EAAE,EAAE,IAAM,OAC1B,MAAO,CACH,GAAGA,EACH,MAAOy1B,EAAQ,QAAQz1B,EAAE,EAAE,CACnD,EAEgB,GAAIs0B,IAAiB,QAAaoB,EAAY,UAAYtM,GAAWppB,EAAE,KAAO,OAC1E,MAAO,CACH,GAAGA,EACH,MAAOi0B,EAC/B,EAEgB,MAAMvM,EAAI0M,GAAc/G,EAAKmB,EAAOxuB,EAAGq0B,EAAUC,EAAcC,EAAgBC,EAAgB,GAAML,CAAe,EACpH,OAAAsB,EAAQ,QAAQz1B,EAAE,EAAE,EAAI0nB,EAAE,MACnBA,CACvB,CAAa,GAGD0O,EAAa,EACbC,EAAY,EAChB,MAAMC,EAAa,GACnB,SAAW,CAACx0B,EAAG9B,CAAC,IAAKuC,EAAO,QAAO,EAC/B6zB,GAAcp2B,EAAE,MACZA,EAAE,OAAS,QAAaA,EAAE,KAAO,IACjCq2B,GAAar2B,EAAE,KACfs2B,EAAW,KAAKx0B,CAAC,GAGzB,GAAIs0B,EAAanB,GAAeqB,EAAW,OAAS,EAAG,CACnD,MAAMC,EAAY,CAAC,GAAGh0B,CAAM,EACtBi0B,EAAQvB,EAAcmB,EAC5B,IAAIK,EAAYD,EAChB,QAASE,EAAK,EAAGA,EAAKJ,EAAW,OAAQI,IAAM,CAC3C,MAAM50B,EAAIw0B,EAAWI,CAAE,EACjBC,GAAYp0B,EAAOT,CAAC,EAAE,MAAQ,GAAKu0B,EACnCp0B,EAAQy0B,IAAOJ,EAAW,OAAS,EAAIG,EAAY,KAAK,IAAIA,EAAW,KAAK,MAAMD,EAAQG,CAAQ,CAAC,EACzGJ,EAAUz0B,CAAC,EAAI,CACX,GAAGS,EAAOT,CAAC,EACX,WAAYG,EACZ,MAAOM,EAAOT,CAAC,EAAE,MAAQG,CAC7C,EACgBw0B,GAAax0B,CAChB,CACDM,EAASg0B,CACZ,CACD,MAAO,CACH,aAAch0B,EACd,aAAc6zB,CAC1B,CACA,EAAO,CAACnB,EAAa7L,EAASiE,EAAKiH,EAAc9F,EAAO+F,EAAgBC,EAAgBL,CAAe,CAAC,CACxG,CC/KA,SAASyC,GAAUC,EAAQC,EAAOC,EAAO,CACvC,OAAIF,IAAWA,IACTE,IAAU,SACZF,EAASA,GAAUE,EAAQF,EAASE,GAElCD,IAAU,SACZD,EAASA,GAAUC,EAAQD,EAASC,IAGjCD,CACT,CAEA,IAAAG,GAAiBJ,GCrBbA,GAAYv3B,GACZ6T,GAAW3T,GAqBf,SAAS03B,GAAMJ,EAAQC,EAAOC,EAAO,CACnC,OAAIA,IAAU,SACZA,EAAQD,EACRA,EAAQ,QAENC,IAAU,SACZA,EAAQ7jB,GAAS6jB,CAAK,EACtBA,EAAQA,IAAUA,EAAQA,EAAQ,GAEhCD,IAAU,SACZA,EAAQ5jB,GAAS4jB,CAAK,EACtBA,EAAQA,IAAUA,EAAQA,EAAQ,GAE7BF,GAAU1jB,GAAS2jB,CAAM,EAAGC,EAAOC,CAAK,CACjD,CAEA,IAAAG,GAAiBD,mBC1BjB,SAAS9oB,IAAO,CAEhB,CAEA,IAAAgpB,GAAiBhpB,GChBbipB,GAAM/3B,GACN8O,GAAO5O,GACP83B,GAAahtB,GAGbitB,GAAW,IASXC,GAAcH,IAAQ,EAAIC,GAAW,IAAID,GAAI,CAAE,GAAE,CAAC,CAAC,EAAE,CAAC,GAAME,GAAmB,SAASlS,EAAQ,CAClG,OAAO,IAAIgS,GAAIhS,CAAM,CACvB,EAF4EjX,GAI5EqpB,GAAiBD,GClBbE,GAAWp4B,GACXq4B,GAAgBn4B,GAChBo4B,GAAoBttB,GACpButB,GAAWrtB,GACXgtB,GAAY9sB,GACZ4sB,GAAa1sB,GAGbktB,GAAmB,IAWvB,SAASC,GAASC,EAAOC,EAAUC,EAAY,CAC7C,IAAI/1B,EAAQ,GACRg2B,EAAWR,GACX5Q,EAASiR,EAAM,OACfI,EAAW,GACX51B,EAAS,CAAE,EACX61B,EAAO71B,EAEX,GAAI01B,EACFE,EAAW,GACXD,EAAWP,WAEJ7Q,GAAU+Q,GAAkB,CACnC,IAAIQ,EAAML,EAAW,KAAOT,GAAUQ,CAAK,EAC3C,GAAIM,EACF,OAAOhB,GAAWgB,CAAG,EAEvBF,EAAW,GACXD,EAAWN,GACXQ,EAAO,IAAIX,EACZ,MAECW,EAAOJ,EAAW,CAAE,EAAGz1B,EAEzByV,EACA,KAAO,EAAE9V,EAAQ4kB,GAAQ,CACvB,IAAIhjB,EAAQi0B,EAAM71B,CAAK,EACnBo2B,EAAWN,EAAWA,EAASl0B,CAAK,EAAIA,EAG5C,GADAA,EAASm0B,GAAcn0B,IAAU,EAAKA,EAAQ,EAC1Cq0B,GAAYG,IAAaA,EAAU,CAErC,QADIC,EAAYH,EAAK,OACdG,KACL,GAAIH,EAAKG,CAAS,IAAMD,EACtB,SAAStgB,EAGTggB,GACFI,EAAK,KAAKE,CAAQ,EAEpB/1B,EAAO,KAAKuB,CAAK,CAClB,MACSo0B,EAASE,EAAME,EAAUL,CAAU,IACvCG,IAAS71B,GACX61B,EAAK,KAAKE,CAAQ,EAEpB/1B,EAAO,KAAKuB,CAAK,EAEpB,CACD,OAAOvB,CACT,CAEA,IAAAi2B,GAAiBV,GCvEbA,GAAWz4B,GAoBf,SAASo5B,GAAKV,EAAO,CACnB,OAAQA,GAASA,EAAM,OAAUD,GAASC,CAAK,EAAI,EACrD,CAEA,IAAAW,GAAiBD,mBCxBXE,GAAW,8EACXC,GAAep7B,GAAU,CAC3B,MAAMyZ,EAAKzZ,EAAM,QACX0qB,EAAK1qB,EAAM,QACjB,MAAO;AAAA,MACLm7B,EAAQ,yDAAyDzQ,CAAE,6SAA6SjR,CAAE,WACxX,EACM4hB,GAAcr7B,GAAU,CAC1B,MAAMyZ,EAAKzZ,EAAM,QACX0qB,EAAK1qB,EAAM,QACjB,MAAO;AAAA,MACLm7B,EAAQ,yDAAyDzQ,CAAE,4YAA4YjR,CAAE,WACvd,EACM6hB,GAAgBt7B,GAAU,CAC5B,MAAMyZ,EAAKzZ,EAAM,QACX0qB,EAAK1qB,EAAM,QACjB,MAAO,GAAGm7B,EAAQ;AAAA,gJAC0HzQ,CAAE;AAAA,uuCACqlCjR,CAAE;AAAA,SAEzuC,EACM8hB,GAAgBv7B,GAAU,CAC5B,MAAMyZ,EAAKzZ,EAAM,QACX0qB,EAAK1qB,EAAM,QACjB,MAAO,GAAGm7B,EAAQ;AAAA,wJACkIzQ,CAAE;AAAA,wHAClCjR,CAAE;AAAA,OAE1H,EACM+hB,GAAiBx7B,GAAU,CAC7B,MAAMyZ,EAAKzZ,EAAM,QACX0qB,EAAK1qB,EAAM,QACjB,MAAO,GAAGm7B,EAAQ;AAAA;AAAA;AAAA,gBAGNzQ,CAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAMFjR,CAAE;AAAA;AAAA,OAGlB,EACMgiB,GAAaz7B,GAAU,CACzB,MAAMyZ,EAAKzZ,EAAM,QACX0qB,EAAK1qB,EAAM,QACjB,MAAO,GAAGm7B,EAAQ;AAAA,sJACgIzQ,CAAE;AAAA,iVACyLjR,CAAE;AAAA,6UACNA,CAAE;AAAA;AAAA,GAG/U,EACMiiB,GAAc17B,GAAU,CAC1B,MAAM0qB,EAAK1qB,EAAM,QACjB,MAAO,GAAGm7B,EAAQ;AAAA,oBACFzQ,CAAE;AAAA,oBACFA,CAAE;AAAA,2LACqKA,CAAE;AAAA;AAAA,CAG7L,EACMiR,GAAiBF,GACjBG,GAAkB57B,GAAU,CAC9B,MAAMyZ,EAAKzZ,EAAM,QACX0qB,EAAK1qB,EAAM,QACjB,MAAO,GAAGm7B,EAAQ;AAAA,wJACkIzQ,CAAE;AAAA,wJACFjR,CAAE;AAAA,OAE1J,EACMoiB,GAAe77B,GAAU,CAC3B,MAAMyZ,EAAKzZ,EAAM,QACX0qB,EAAK1qB,EAAM,QACjB,MAAO;AAAA,MACLm7B,EAAQ;AAAA,qKACuJ1hB,CAAE;AAAA,gIACvCA,CAAE;AAAA,wIACMA,CAAE;AAAA,gJACMiR,CAAE;AAAA,qGAC7CjR,CAAE;AAAA,oGACHA,CAAE;AAAA,wIACkCA,CAAE;AAAA,SAE1I,EACMqiB,GAAe97B,GAAU,CAC3B,MAAMyZ,EAAKzZ,EAAM,QACX0qB,EAAK1qB,EAAM,QACjB,MAAO,GAAGm7B,EAAQ;AAAA,wJACkIzQ,CAAE;AAAA,8KACoBjR,CAAE;AAAA,yNACyCA,CAAE;AAAA,OAE3N,EACMsiB,GAAe/7B,GAAU,CAC3B,MAAMyZ,EAAKzZ,EAAM,QACX0qB,EAAK1qB,EAAM,QACjB,MAAO;AAAA,MACLm7B,EAAQ;AAAA,kBACI1hB,CAAE;AAAA,gbAC4ZiR,CAAE;AAAA,SAElb,EACMsR,GAAkBh8B,GAAU,CAC9B,MAAMyZ,EAAKzZ,EAAM,QACX0qB,EAAK1qB,EAAM,QACjB,MAAO;AAAA,MACLm7B,EAAQ;AAAA,gJACkIzQ,CAAE;AAAA,8HACpBjR,CAAE;AAAA,SAEhI,EACMwiB,GAAcj8B,GAAU,CAC1B,MAAMyZ,EAAKzZ,EAAM,QACX0qB,EAAK1qB,EAAM,QACjB,MAAO,GAAGm7B,EAAQ;AAAA,wJACkIzQ,CAAE;AAAA,oNAC0DjR,CAAE;AAAA,OAEtN,EACMyiB,GAAcl8B,GAAU,CAC1B,MAAMyZ,EAAKzZ,EAAM,QACX0qB,EAAK1qB,EAAM,QACjB,MAAO;AAAA,MACLm7B,EAAQ;AAAA,gJACkIzQ,CAAE;AAAA,wIACVjR,CAAE;AAAA,2DAC/EA,CAAE;AAAA,SAE7D,EACM0iB,GAAen8B,GAAU,CAC3B,MAAMyZ,EAAKzZ,EAAM,QACX0qB,EAAK1qB,EAAM,QACjB,MAAO,GAAGm7B,EAAQ;AAAA,0DACoCzQ,CAAE;AAAA,kLACsHjR,CAAE;AAAA,kQAC8EA,CAAE;AAAA,OAEpQ,EACM2iB,GAAmBp8B,GAAU,CAC/B,MAAMyZ,EAAKzZ,EAAM,QACX0qB,EAAK1qB,EAAM,QACjB,MAAO;AAAA,MACLm7B,EAAQ;AAAA,2DAC6CzQ,CAAE;AAAA,2DACFA,CAAE;AAAA,kHACqDjR,CAAE;AAAA,SAEpH,EACM4iB,GAAoBr8B,GAAU,CAChC,MAAMyZ,EAAKzZ,EAAM,QACX0qB,EAAK1qB,EAAM,QACjB,MAAO,GAAGm7B,EAAQ;AAAA,gBACN1hB,CAAE;AAAA,06BACw5BiR,CAAE;AAAA,OAE56B,EACM4R,GAAqBt8B,GAAU,CACjC,MAAMyZ,EAAKzZ,EAAM,QACX0qB,EAAK1qB,EAAM,QACjB,MAAO;AAAA,MACLm7B,EAAQ;AAAA,4DAC8CzQ,CAAE;AAAA,6eAC+ajR,CAAE;AAAA,SAE/e,EACM8iB,GAAgBv8B,GAAU,CAC5B,MAAMyZ,EAAKzZ,EAAM,QACX0qB,EAAK1qB,EAAM,QACjB,MAAO;AAAA,MACLm7B,EAAQ;AAAA,4DAC8CzQ,CAAE;AAAA,icACmYjR,CAAE;AAAA,SAEnc,EACM+iB,GAAsBx8B,GAAU,CAClC,MAAMyZ,EAAKzZ,EAAM,QACX0qB,EAAK1qB,EAAM,QACjB,MAAO,GAAGm7B,EAAQ;AAAA,0DACoCzQ,CAAE;AAAA,oOACwKjR,CAAE;AAAA,OAEtO,EACMgjB,GAAcz8B,GAAU,CAC1B,MAAMyZ,EAAKzZ,EAAM,QACX0qB,EAAK1qB,EAAM,QACjB,MAAO,GAAGm7B,EAAQ;AAAA,0DACoCzQ,CAAE;AAAA,gIACoEjR,CAAE;AAAA,gSAC8JA,CAAE;AAAA,uJAC3IA,CAAE;AAAA,iNACwDA,CAAE;AAAA,OAEnN,EACMijB,GAAgB18B,GAAU,CAC5B,MAAMyZ,EAAKzZ,EAAM,QACX0qB,EAAK1qB,EAAM,QACjB,MAAO;AAAA,MACLm7B,EAAQ;AAAA,gJACkIzQ,CAAE;AAAA,seACoVjR,CAAE;AAAA,SAExe,EACMkjB,GAAqB38B,GAAU,CACjC,MAAMyZ,EAAKzZ,EAAM,QACX0qB,EAAK1qB,EAAM,QACjB,MAAO,GAAGm7B,EAAQ;AAAA,0DACoCzQ,CAAE;AAAA,sOAC0KjR,CAAE;AAAA,OAExO,EACMmjB,GAAqB58B,GAAU,CACjC,MAAMyZ,EAAKzZ,EAAM,QACX0qB,EAAK1qB,EAAM,QACjB,MAAO;AAAA,MACLm7B,EAAQ;AAAA,4DAC8CzQ,CAAE;AAAA,+LACiIjR,CAAE;AAAA,SAEjM,EACMojB,GAAqB78B,GAAU,CACjC,MAAMyZ,EAAKzZ,EAAM,QACX0qB,EAAK1qB,EAAM,QACjB,MAAO,GAAGm7B,EAAQ;AAAA,wJACkIzQ,CAAE;AAAA,iPACuFjR,CAAE;AAAA,yaACsLA,CAAE;AAAA,OAE3a,EACMqjB,GAAe98B,GAAU,CAC3B,MAAMyZ,EAAKzZ,EAAM,QACX0qB,EAAK1qB,EAAM,QACjB,MAAO,GAAGm7B,EAAQ;AAAA,0DACoCzQ,CAAE;AAAA,mXACuTjR,CAAE;AAAA,OAErX,EACMsjB,GAAmB/8B,GAAU,CAC/B,MAAMyZ,EAAKzZ,EAAM,QAEjB,MAAO;AAAA;AAAA,0NADIA,EAAM,OAGuM,aAAayZ,CAAE;AAAA,SAE3O,EACMujB,GAA0Bh9B,GAAU,CACtC,MAAMyZ,EAAKzZ,EAAM,QAEjB,MAAO;AAAA;AAAA,yNADIA,EAAM,OAGsM,aAAayZ,CAAE;AAAA;AAAA,CAG1O,EACawjB,GAAU,CACnB,YAAA7B,GACA,aAAAE,GACA,WAAAD,GACA,aAAAE,GACA,cAAAC,GACA,eAAAG,GACA,eAAAC,GACA,YAAAC,GACA,YAAAC,GACA,UAAAL,GACA,YAAAM,GACA,eAAAC,GACA,WAAAC,GACA,WAAAC,GACA,YAAAC,GACA,gBAAAC,GACA,iBAAAC,GACA,kBAAAC,GACA,aAAAC,GACA,mBAAAC,GACA,WAAAC,GACA,aAAAC,GACA,kBAAAC,GACA,kBAAAC,GACA,kBAAAC,GACA,YAAAC,GACA,gBAAAC,GACA,uBAAAC,GACA,WAAAtB,EACJ,EC7RA,SAASwB,GAAUC,EAASnM,EAAO,CAC/B,OAAImM,IAAY,SACL,CAACnM,EAAM,aAAcA,EAAM,YAAY,EAEzCmM,IAAY,WACV,CAAC,QAASnM,EAAM,WAAW,EAG3B,CAACA,EAAM,YAAaA,EAAM,QAAQ,CAEjD,CAEO,MAAMoM,EAAc,CAKvB,YAAYC,EAAaC,EAAW,CAJpCx5B,GAAA,kBACAA,GAAA,iBAAY,IAAI,KAChBA,GAAA,oBACAA,GAAA,gBAAW,GAEP,KAAK,UAAYw5B,EACjB,KAAK,YAAcD,GAAe,EACrC,CACD,WAAWE,EAAQJ,EAAStN,EAAK5rB,EAAGsG,EAAG6sB,EAAMpG,EAAO/G,EAAQ,EAAG,CAC3D,KAAM,CAACuT,EAASC,CAAO,EAAIP,GAAUC,EAASnM,CAAK,EAC7C0M,EAAQtG,EAAO,KAAK,KAAK,OAAO,gBAAgB,EAChDz1B,EAAM,GAAG67B,CAAO,IAAIC,CAAO,IAAIC,CAAK,IAAIH,CAAM,GACpD,IAAII,EAAe,KAAK,UAAU,IAAIh8B,CAAG,EACzC,GAAIg8B,IAAiB,OAAW,CAC5B,MAAMC,EAAW,KAAK,YAAYL,CAAM,EACxC,GAAIK,IAAa,OACb,OACJD,EAAe,SAAS,cAAc,QAAQ,EAC9C,MAAME,EAAYF,EAAa,WAAW,IAAI,EAC9C,GAAIE,IAAc,KACd,OACJ,MAAMC,EAAY,IAAI,MACtBA,EAAU,IAAM,oCAAoC,mBAAmBF,EAAS,CAAE,QAAAH,EAAS,QAAAD,CAAO,CAAE,CAAC,CAAC,GACtG,KAAK,UAAU,IAAI77B,EAAKg8B,CAAY,EACpC,MAAMI,EAAUD,EAAU,SAC1B,GAAIC,IAAY,OACZ,OACJ,KAAK,WACLA,EACK,KAAK,IAAM,CACZF,EAAU,UAAUC,EAAW,EAAG,EAAGJ,EAAOA,CAAK,CACjE,CAAa,EACI,QAAQ,IAAM,CACf,KAAK,WACD,KAAK,WAAa,GAClB,KAAK,UAAS,CAElC,CAAa,CACJ,MAEOzT,EAAQ,IACR4F,EAAI,YAAc5F,GAEtB4F,EAAI,UAAU8N,EAAc,EAAG,EAAGD,EAAOA,EAAOz5B,EAAGsG,EAAG6sB,EAAMA,CAAI,EAC5DnN,EAAQ,IACR4F,EAAI,YAAc,EAG7B,CACL,CC7DO,SAASmO,GAAaC,EAAa,CACtC,GAAIA,EAAY,SAAW,EACvB,OACJ,IAAIC,EACJ,UAAWC,KAAMF,EACbC,EAAqB,KAAK,IAAIA,GAAsBC,EAAG,EAAGA,EAAG,CAAC,CAEtE,CACO,SAASC,GAAcC,EAAU3L,EAAOhf,EAAQka,EAAME,EAAcD,EAAoByQ,EAAcC,EAASC,EAAI,CACtHD,EAAUA,GAAW7L,EACrB,IAAInoB,EAAImoB,EACJhU,EAAM2f,EACV,MAAMI,EAAS7Q,EAAOC,EACtB,IAAI6Q,EAAW,GACf,KAAOn0B,EAAImJ,GAAUgL,EAAM+f,GAAQ,CAC/B,MAAMtP,EAAKrB,EAAapP,CAAG,EAC3B,GAAInU,EAAI4kB,EAAKoP,GAAWC,EAAGj0B,EAAGmU,EAAKyQ,EAAI,GAAOmP,GAAgB5f,IAAQkP,EAAO,CAAC,IAAM,GAAM,CACtF8Q,EAAW,GACX,KACH,CACDn0B,GAAK4kB,EACLzQ,GACH,CACD,GAAI,CAAAggB,EAEJ,CAAAn0B,EAAImJ,EACJ,QAASwb,EAAK,EAAGA,EAAKrB,EAAoBqB,IAAM,CAC5CxQ,EAAMkP,EAAO,EAAIsB,EACjB,MAAMC,EAAKrB,EAAapP,CAAG,EAC3BnU,GAAK4kB,EACLqP,EAAGj0B,EAAGmU,EAAKyQ,EAAI,GAAMmP,GAAgB5f,IAAQkP,EAAO,CAAC,CACxD,EACL,CACO,SAAS+Q,GAAYC,EAAe7P,EAAaP,EAAYQ,EAAYC,EAAmBuP,EAAI,CACnG,IAAIv6B,EAAI,EACJ46B,EAAQ,EACZ,MAAMnM,EAAQzD,EAAoBD,EAClC,UAAWxsB,KAAKo8B,EAAe,CAC3B,MAAME,EAAQt8B,EAAE,OAASq8B,EAAQ56B,EAAIuqB,EACrC,GAAIgQ,EAAGh8B,EAAGs8B,EAAOpM,EAAOlwB,EAAE,OAAS,EAAIq8B,EAAO9P,CAAW,IAAM,GAC3D,MAEJ9qB,GAAKzB,EAAE,MACPq8B,GAASr8B,EAAE,OAASA,EAAE,MAAQ,CACjC,CACL,CACO,SAASu8B,GAAWH,EAAe5yB,EAAOwiB,EAAYK,EAAmB2P,EAAI,CAChF,IAAIv6B,EAAI,EACJ46B,EAAQ,EACZ,QAASn6B,EAAQ,EAAGA,EAAQk6B,EAAc,OAAQl6B,IAAS,CACvD,MAAMs6B,EAAWJ,EAAcl6B,CAAK,EACpC,IAAIF,EAAME,EAAQ,EACdu6B,EAAWD,EAAS,MAIxB,IAHIA,EAAS,SACTH,GAASI,GAENz6B,EAAMo6B,EAAc,QACvBzS,GAAayS,EAAcp6B,CAAG,EAAE,MAAOw6B,EAAS,KAAK,GACrDJ,EAAcp6B,CAAG,EAAE,SAAWo6B,EAAcl6B,CAAK,EAAE,QAAQ,CAC3D,MAAMw6B,EAASN,EAAcp6B,CAAG,EAChCy6B,GAAYC,EAAO,MACnB16B,IACAE,IACIw6B,EAAO,SACPL,GAASK,EAAO,MAEvB,CACD,MAAM1d,EAAIwd,EAAS,OAAS,EAAIxQ,EAC1B2Q,EAASl7B,EAAIud,EACbrS,EAAQ6vB,EAAS,OAAS,EAAI,KAAK,IAAI,EAAGH,EAAQM,CAAM,EACxDjU,EAAI,KAAK,IAAI+T,EAAW9vB,EAAOnD,GAASmzB,EAAShwB,EAAM,EAC7DqvB,EAAG,CAACQ,EAAS,YAAaJ,EAAcp6B,EAAM,CAAC,EAAE,WAAW,EAAGw6B,EAAS,OAAS,GAAIG,EAAShwB,EAAO,EAAG+b,EAAG2D,CAAiB,EAC5H5qB,GAAKg7B,CACR,CACL,CACO,SAASG,GAAcC,EAAMC,EAAOC,EAAOC,EAAOC,EAAOC,EAAQC,EAAY,OAChF,KAAM,CAACX,EAAUE,CAAM,EAAIG,EAC3B,IAAIO,EACAC,EACJ,MAAMC,IAAiB3nB,EAAAwnB,EAAW,KAAK17B,GAAK,CAACA,EAAE,MAAM,IAA9B,YAAAkU,EAAiC,cAAe,EACvE,GAAI+mB,EAASY,EAAgB,CACzB,MAAMC,EAAgB,KAAK,IAAIf,EAAUc,CAAc,EACvD,IAAIE,EAAQV,EACRW,EAAQT,EACZ,QAASv7B,EAAIy7B,EAAO,YAAc,EAAGz7B,GAAK87B,EAAe97B,IACrD+7B,GAASL,EAAW17B,CAAC,EAAE,MACvBg8B,GAASN,EAAW17B,CAAC,EAAE,MAE3B,QAASA,EAAIy7B,EAAO,YAAc,EAAGz7B,GAAKi7B,EAAQj7B,IAC9Cg8B,GAASN,EAAW17B,CAAC,EAAE,MAE3B47B,EAAc,CACV,EAAGG,EACH,EAAGT,EACH,MAAOU,EACP,OAAQR,CACpB,CACK,CACD,GAAIK,EAAiBd,EAAU,CAC3B,MAAMkB,EAAc,KAAK,IAAIhB,EAAQY,EAAiB,CAAC,EACvD,IAAIE,EAAQV,EACRW,EAAQT,EACZ,QAASv7B,EAAIy7B,EAAO,YAAc,EAAGz7B,GAAK+6B,EAAU/6B,IAChD+7B,GAASL,EAAW17B,CAAC,EAAE,MACvBg8B,GAASN,EAAW17B,CAAC,EAAE,MAE3B,QAASA,EAAIy7B,EAAO,YAAc,EAAGz7B,GAAKi8B,EAAaj8B,IACnDg8B,GAASN,EAAW17B,CAAC,EAAE,MAE3B27B,EAAa,CACT,EAAGI,EACH,EAAGT,EACH,MAAOU,EACP,OAAQR,CACpB,CACK,CACD,MAAO,CAACG,EAAYC,CAAW,CACnC,CCrHO,SAASM,GAAe5T,EAAM6T,EAAIC,EAAIC,EAAmB,CAC5D,GAAIA,IAAsB,MACtB,OAAOC,GAAahU,EAAM,CAAE,EAAG6T,EAAI,EAAGC,EAAI,MAAO,EAAG,OAAQ,CAAG,GAMnE,GALIC,IAAsB,aACtBF,EAAK7T,EAAK,GACV+T,IAAsB,eACtBD,EAAK9T,EAAK,GAEVD,GAAa,CAAC8T,EAAIC,CAAE,EAAG9T,CAAI,EAC3B,OAGJ,MAAMiU,EAAiBJ,EAAK7T,EAAK,EAC3BkU,EAAkBlU,EAAK,EAAIA,EAAK,MAAQ6T,EACxCM,EAAgBL,EAAK9T,EAAK,EAAI,EAC9BoU,EAAmBpU,EAAK,EAAIA,EAAK,OAAS8T,EAE1CO,EAAc,KAAK,IAAIN,IAAsB,WAAa,OAAO,iBAAmBE,EAAgBF,IAAsB,WAAa,OAAO,iBAAmBG,EAAiBH,IAAsB,aAAe,OAAO,iBAAmBI,EAAeJ,IAAsB,aAAe,OAAO,iBAAmBK,CAAgB,EAErV,OAAIC,IAAgBD,EACT,CAAE,EAAGpU,EAAK,EAAG,EAAGA,EAAK,EAAIA,EAAK,OAAQ,MAAOA,EAAK,MAAO,OAAQ8T,EAAK9T,EAAK,EAAIA,EAAK,OAAS,GAE/FqU,IAAgBF,EACd,CAAE,EAAGnU,EAAK,EAAG,EAAG8T,EAAI,MAAO9T,EAAK,MAAO,OAAQA,EAAK,EAAI8T,CAAE,EAE5DO,IAAgBH,EACd,CAAE,EAAGlU,EAAK,EAAIA,EAAK,MAAO,EAAGA,EAAK,EAAG,MAAO6T,EAAK7T,EAAK,EAAIA,EAAK,MAAQ,EAAG,OAAQA,EAAK,QAGvF,CAAE,EAAG6T,EAAI,EAAG7T,EAAK,EAAG,MAAOA,EAAK,EAAI6T,EAAI,OAAQ7T,EAAK,MAAM,CAE1E,CACO,SAASsU,GAAcC,EAAIC,EAAItmB,EAAIumB,EAAIC,EAAIC,EAAIxmB,EAAIymB,EAAI,CAC1D,OAAOL,GAAMG,EAAKvmB,GAAMumB,GAAMH,EAAKrmB,GAAMsmB,GAAMG,EAAKC,GAAMD,GAAMH,EAAKC,CACzE,CACO,SAASI,GAAY7U,EAAMtoB,EAAGsG,EAAG,CACpC,OAAOtG,GAAKsoB,EAAK,GAAKtoB,GAAKsoB,EAAK,EAAIA,EAAK,OAAShiB,GAAKgiB,EAAK,GAAKhiB,GAAKgiB,EAAK,EAAIA,EAAK,MACxF,CACO,SAASgU,GAAah9B,EAAGC,EAAG,CAC/B,MAAMS,EAAI,KAAK,IAAIV,EAAE,EAAGC,EAAE,CAAC,EACrB+G,EAAI,KAAK,IAAIhH,EAAE,EAAGC,EAAE,CAAC,EACrBwI,EAAQ,KAAK,IAAIzI,EAAE,EAAIA,EAAE,MAAOC,EAAE,EAAIA,EAAE,KAAK,EAAIS,EACjDyP,EAAS,KAAK,IAAInQ,EAAE,EAAIA,EAAE,OAAQC,EAAE,EAAIA,EAAE,MAAM,EAAI+G,EAC1D,MAAO,CAAE,EAAAtG,EAAG,EAAAsG,EAAG,MAAAyB,EAAO,OAAA0H,CAAM,CAChC,CACO,SAAS2tB,GAAa99B,EAAGC,EAAG,CAC/B,OAAOD,EAAE,GAAKC,EAAE,GAAKD,EAAE,GAAKC,EAAE,GAAKD,EAAE,EAAIA,EAAE,OAASC,EAAE,EAAIA,EAAE,OAASD,EAAE,EAAIA,EAAE,QAAUC,EAAE,EAAIA,EAAE,MACnG,CAOO,SAAS89B,GAAgB/U,EAAMvgB,EAAO0H,EAAQ6tB,EAAK,CAEtD,GAAIhV,EAAK,EAAIvgB,GACTugB,EAAK,EAAI7Y,GACR6Y,EAAK,EAAI,GAAKA,EAAK,EAAI,GAAKA,EAAK,EAAIA,EAAK,MAAQvgB,GAASugB,EAAK,EAAIA,EAAK,OAAS7Y,EACnF,OAGJ,GAAI6Y,EAAK,GAAK,GAAKA,EAAK,GAAK,GAAKA,EAAK,EAAIA,EAAK,OAASvgB,GAASugB,EAAK,EAAIA,EAAK,QAAU7Y,EACtF,OAAO6Y,EAIX,MAAMiV,EAAU,GACVC,EAAS,GACTC,EAAW11B,EAAQ,EACnB21B,EAAYjuB,EAAS,EAErBkuB,EAAeJ,EAAUjV,EAAK,EAC9BsV,EAAgBtV,EAAK,EAAIA,EAAK,MAAQmV,EACtCI,EAAcL,EAASlV,EAAK,EAC5BwV,EAAiBxV,EAAK,EAAIA,EAAK,OAASoV,EAExC98B,EAAO+8B,EAAe,EAAIrV,EAAK,EAAI,KAAK,MAAMqV,EAAeL,CAAG,EAAIA,EAAMhV,EAAK,EAC/EznB,EAAQ+8B,EAAgB,EAAItV,EAAK,EAAIA,EAAK,MAAQ,KAAK,MAAMsV,EAAgBN,CAAG,EAAIA,EAAMhV,EAAK,EAAIA,EAAK,MACxG7oB,EAAMo+B,EAAc,EAAIvV,EAAK,EAAI,KAAK,MAAMuV,EAAcP,CAAG,EAAIA,EAAMhV,EAAK,EAC5EyV,EAASD,EAAiB,EAAIxV,EAAK,EAAIA,EAAK,OAAS,KAAK,MAAMwV,EAAiBR,CAAG,EAAIA,EAAMhV,EAAK,EAAIA,EAAK,OAClH,MAAO,CAAE,EAAG1nB,EAAM,EAAGnB,EAAK,MAAOoB,EAAQD,EAAM,OAAQm9B,EAASt+B,CAAG,CACvE,CACO,SAASu+B,GAAqB1V,EAAM2V,EAAel2B,EAAO0H,EAAQyuB,EAAgB,CACrF,KAAM,CAACC,EAAQC,EAAQC,EAAQC,CAAM,EAAIL,EACnC,CAACM,EAAOC,EAAOC,EAAOC,CAAK,EAAIR,EAC/B,CAAE,EAAGS,EAAK,EAAGC,EAAK,MAAOC,EAAK,OAAQC,CAAK,EAAGxW,EAC9CxnB,EAAS,GACf,GAAI+9B,GAAO,GAAKC,GAAO,EACnB,OAAOh+B,EACX,MAAMi+B,EAAUJ,EAAME,EAChBG,EAAWJ,EAAME,EAMjBG,EAAaN,EAAMR,EACnBe,EAAYN,EAAMR,EAClBe,EAAcR,EAAME,EAAMR,EAC1Be,EAAeR,EAAME,EAAMR,EAC3Be,EAAoBV,GAAOR,GAAUQ,EAAMN,GAC5CU,EAAUZ,GAAUY,GAAWV,GAC/BM,EAAMR,GAAUY,EAAUV,EACzBiB,EAAqBV,GAAOR,GAAUQ,EAAMN,GAC7CU,EAAWZ,GAAUY,GAAYV,GACjCM,EAAMR,GAAUY,EAAWV,EAGhC,GAFqBe,GAAoBC,EAEvB,CACd,MAAMt/B,EAAI,KAAK,IAAI2+B,EAAKR,CAAM,EACxB73B,EAAI,KAAK,IAAIs4B,EAAKR,CAAM,EACxBv9B,EAAQ,KAAK,IAAIk+B,EAASV,CAAM,EAChCN,EAAS,KAAK,IAAIiB,EAAUV,CAAM,EACxCx9B,EAAO,KAAK,CACR,KAAM,CAAE,EAAAd,EAAG,EAAAsG,EAAG,MAAOzF,EAAQb,EAAG,OAAQ+9B,EAASz3B,CAAG,EACpD,KAAM,CACF,EAAGi4B,EACH,EAAGC,EACH,MAAOC,EAAQF,EAAQ,EACvB,OAAQG,EAAQF,EAAQ,CAC3B,CACb,CAAS,CACJ,CAED,GAAIS,GAAcC,EAAW,CACzB,MAAMl/B,EAAI2+B,EACJr4B,EAAIs4B,EACJ/9B,EAAQ,KAAK,IAAIk+B,EAASZ,CAAM,EAChCJ,EAAS,KAAK,IAAIiB,EAAUZ,CAAM,EACxCt9B,EAAO,KAAK,CACR,KAAM,CACF,EAAAd,EACA,EAAAsG,EACA,MAAOzF,EAAQb,EACf,OAAQ+9B,EAASz3B,CACpB,EACD,KAAM,CACF,EAAG,EACH,EAAG,EACH,MAAOi4B,EAAQ,EACf,OAAQC,EAAQ,CACnB,CACb,CAAS,CACJ,CAED,GAAIU,GAAaG,EAAkB,CAC/B,MAAMr/B,EAAI,KAAK,IAAI2+B,EAAKR,CAAM,EACxB73B,EAAIs4B,EACJ/9B,EAAQ,KAAK,IAAIk+B,EAASV,CAAM,EAChCN,EAAS,KAAK,IAAIiB,EAAUZ,CAAM,EACxCt9B,EAAO,KAAK,CACR,KAAM,CACF,EAAAd,EACA,EAAAsG,EACA,MAAOzF,EAAQb,EACf,OAAQ+9B,EAASz3B,CACpB,EACD,KAAM,CACF,EAAGi4B,EACH,EAAG,EACH,MAAOE,EAAQF,EAAQ,EACvB,OAAQC,EAAQ,CACnB,CACb,CAAS,CACJ,CAED,GAAIU,GAAaC,EAAa,CAC1B,MAAMn/B,EAAI,KAAK,IAAI2+B,EAAKN,CAAM,EACxB/3B,EAAIs4B,EACJ/9B,EAAQk+B,EACRhB,EAAS,KAAK,IAAIiB,EAAUZ,CAAM,EACxCt9B,EAAO,KAAK,CACR,KAAM,CACF,EAAAd,EACA,EAAAsG,EACA,MAAOzF,EAAQb,EACf,OAAQ+9B,EAASz3B,CACpB,EACD,KAAM,CACF,EAAGm4B,EACH,EAAG,EACH,MAAO12B,EAAQ02B,EAAQ,EACvB,OAAQD,EAAQ,CACnB,CACb,CAAS,CACJ,CAED,GAAIS,GAAcK,EAAmB,CACjC,MAAMt/B,EAAI2+B,EACJr4B,EAAI,KAAK,IAAIs4B,EAAKR,CAAM,EACxBv9B,EAAQ,KAAK,IAAIk+B,EAASZ,CAAM,EAChCJ,EAAS,KAAK,IAAIiB,EAAUV,CAAM,EACxCx9B,EAAO,KAAK,CACR,KAAM,CACF,EAAAd,EACA,EAAAsG,EACA,MAAOzF,EAAQb,EACf,OAAQ+9B,EAASz3B,CACpB,EACD,KAAM,CACF,EAAG,EACH,EAAGk4B,EACH,MAAOD,EAAQ,EACf,OAAQG,EAAQF,EAAQ,CAC3B,CACb,CAAS,CACJ,CAED,GAAIW,GAAeG,EAAmB,CAClC,MAAMt/B,EAAI,KAAK,IAAI2+B,EAAKN,CAAM,EACxB/3B,EAAI,KAAK,IAAIs4B,EAAKR,CAAM,EACxBv9B,EAAQk+B,EACRhB,EAAS,KAAK,IAAIiB,EAAUV,CAAM,EACxCx9B,EAAO,KAAK,CACR,KAAM,CACF,EAAAd,EACA,EAAAsG,EACA,MAAOzF,EAAQb,EACf,OAAQ+9B,EAASz3B,CACpB,EACD,KAAM,CACF,EAAGm4B,EACH,EAAGD,EACH,MAAOz2B,EAAQ02B,EAAQ,EACvB,OAAQC,EAAQF,EAAQ,CAC3B,CACb,CAAS,CACJ,CAED,GAAIS,GAAcG,EAAc,CAC5B,MAAMp/B,EAAI2+B,EACJr4B,EAAI,KAAK,IAAIs4B,EAAKN,CAAM,EACxBz9B,EAAQ,KAAK,IAAIk+B,EAASZ,CAAM,EAChCJ,EAASiB,EACfl+B,EAAO,KAAK,CACR,KAAM,CACF,EAAAd,EACA,EAAAsG,EACA,MAAOzF,EAAQb,EACf,OAAQ+9B,EAASz3B,CACpB,EACD,KAAM,CACF,EAAG,EACH,EAAGo4B,EACH,MAAOH,EAAQ,EACf,OAAQ9uB,EAASivB,EAAQ,CAC5B,CACb,CAAS,CACJ,CAED,GAAIU,GAAgBC,EAAkB,CAClC,MAAMr/B,EAAI,KAAK,IAAI2+B,EAAKR,CAAM,EACxB73B,EAAI,KAAK,IAAIs4B,EAAKN,CAAM,EACxBz9B,EAAQ,KAAK,IAAIk+B,EAASV,CAAM,EAChCN,EAASiB,EACfl+B,EAAO,KAAK,CACR,KAAM,CACF,EAAAd,EACA,EAAAsG,EACA,MAAOzF,EAAQb,EACf,OAAQ+9B,EAASz3B,CACpB,EACD,KAAM,CACF,EAAGi4B,EACH,EAAGG,EACH,MAAOD,EAAQF,EAAQ,EACvB,OAAQ9uB,EAASivB,EAAQ,CAC5B,CACb,CAAS,CACJ,CAED,GAAIS,GAAeC,EAAc,CAC7B,MAAMp/B,EAAI,KAAK,IAAI2+B,EAAKN,CAAM,EACxB/3B,EAAI,KAAK,IAAIs4B,EAAKN,CAAM,EACxBz9B,EAAQk+B,EACRhB,EAASiB,EACfl+B,EAAO,KAAK,CACR,KAAM,CACF,EAAAd,EACA,EAAAsG,EACA,MAAOzF,EAAQb,EACf,OAAQ+9B,EAASz3B,CACpB,EACD,KAAM,CACF,EAAGm4B,EACH,EAAGC,EACH,MAAO32B,EAAQ02B,EAAQ,EACvB,OAAQhvB,EAASivB,EAAQ,CAC5B,CACb,CAAS,CACJ,CACD,OAAO59B,CACX,CC9RA,MAAMy+B,GAAc,CAChB,KAAMphC,EAAa,QACnB,aAAc,EAClB,EAaO,SAASqhC,GAAU5T,EAAKtB,EAAkBoR,EAAYjsB,EAAQub,EAAmBT,EAAYQ,EAAYD,EAAanB,EAAME,EAAc4V,EAAgBC,EAAiBC,EAAqBC,EAAcC,EAAWC,EAAWlW,EAAoByQ,EAAcL,EAAa+F,EAAQ9/B,EAAW+/B,EAAeC,EAAkBC,EAAaC,EAAeC,EAAaC,EAAWC,EAAkBrS,EAAesS,EAAYC,EAASC,GAAqB/N,EAAiBgO,GAAgBC,GAAkB,CAC5f,IAAIC,IAASb,GAAA,YAAAA,EAAQ,OAAQ,OAAO,iBACpC,MAAMpT,GAAY,YAAY,MAC9B,IAAIb,EAAOyU,EAAW,aACtB3U,EAAI,KAAOE,EACX,MAAM+U,GAAY,CAAE,IAAAjV,GACdkV,GAAY,CAAC,EAAG,CAAC,EACjBC,GAA2BnX,EAAqB,EAAIF,GAAwBC,EAAMC,EAAoBC,CAAY,EAAI,EAC5H,IAAI/oB,GACAkgC,EACJ,MAAMC,EAAYlH,GAAaC,CAAW,EAC1C,OAAAU,GAAYpQ,EAAkBQ,EAAaP,EAAYQ,EAAYC,EAAmB,CAACzsB,EAAGs8B,EAAOqG,GAAetG,GAAOR,KAAa,CAChI,MAAM+G,GAAO,KAAK,IAAI,EAAGvG,GAAQC,CAAK,EAChCuG,GAAWvG,EAAQsG,GACnBE,GAAWrW,EAAoB,EAC/BsW,GAAW/iC,EAAE,MAAQ4iC,GACrBI,GAAY9xB,EAASub,EAAoB,EAC/C,GAAIgP,EAAY,OAAS,EAAG,CACxB,IAAIwH,GAAQ,GACZ,QAASnhC,GAAI,EAAGA,GAAI25B,EAAY,OAAQ35B,KAAK,CACzC,MAAM65B,GAAKF,EAAY35B,EAAC,EACxB,GAAIu8B,GAAcwE,GAAUC,GAAUC,GAAUC,GAAWrH,GAAG,EAAGA,GAAG,EAAGA,GAAG,MAAOA,GAAG,MAAM,EAAG,CACzFsH,GAAQ,GACR,KACH,CACJ,CACD,GAAI,CAACA,GACD,MACP,CACD,MAAMC,GAAS,IAAM,CACjB7V,EAAI,KAAI,EACRA,EAAI,UAAS,EACbA,EAAI,KAAKwV,GAAUC,GAAUC,GAAUC,EAAS,EAChD3V,EAAI,KAAI,CACpB,EACc8V,GAAczhC,EAAU,QAAQ,SAAS1B,EAAE,WAAW,EACtDojC,GAAajC,EAAgBnhC,EAAE,OAAS,EAAE,EAAE,cAC5CqjC,GAAWrjC,EAAE,gBAAkB,QAAaojC,KAAe,OAC3DpB,EACAnO,GAAqBmO,EAAYoB,GAAYpjC,EAAE,aAAa,EAC5DsjC,GAAUD,GAAS,aACrBC,KAAY/V,IACZA,EAAO+V,GACPjW,EAAI,KAAOiW,IAEfJ,KACA,IAAIK,GACJ,OAAA3H,GAAcC,GAAU8G,GAAezxB,EAAQka,EAAME,EAAcD,EAAoByQ,EAAc4G,EAAW,CAACxS,GAAOhU,GAAKyQ,GAAI6W,GAAUC,KAAkB,cAoBzJ,GAnBIvnB,GAAM,IAEVqmB,GAAU,CAAC,EAAIviC,EAAE,YACjBuiC,GAAU,CAAC,EAAIrmB,GAgBXslB,IAAW,QAAa,CAACA,EAAO,IAAIe,EAAS,GAC7C,OAEJ,GAAI9G,EAAY,OAAS,EAAG,CACxB,IAAIwH,GAAQ,GACZ,QAASnhC,GAAI,EAAGA,GAAI25B,EAAY,OAAQ35B,KAAK,CACzC,MAAM65B,GAAKF,EAAY35B,EAAC,EACxB,GAAIu8B,GAAc/B,EAAOpM,GAAOlwB,EAAE,MAAO2sB,GAAIgP,GAAG,EAAGA,GAAG,EAAGA,GAAG,MAAOA,GAAG,MAAM,EAAG,CAC3EsH,GAAQ,GACR,KACH,CACJ,CACD,GAAI,CAACA,GACD,MACP,CACD,MAAMS,GAAchiC,EAAU,KAAK,SAASwa,EAAG,EACzCynB,GAActC,EAAa,SAASnlB,EAAG,EACvC9b,GAAO8b,GAAMkP,EAAO8V,EAAeqB,EAAS,EAAIvB,GACtD,IAAIlE,GAAQR,EACRsH,GAAY5jC,EAAE,MACd6jC,GAAc,GACdC,GAAe,GACnB,GAAI1jC,GAAK,OAAS,OAAW,CACzB,KAAM,CAACo8B,GAAUE,EAAM,EAAIt8B,GAAK,KAC1B2jC,GAAU,GAAG7nB,EAAG,IAAIsgB,EAAQ,IAAIE,EAAM,IAAI18B,EAAE,MAAM,GAGxD,GAFIyiC,IAAiB,SACjBA,EAAe,IAAI,KAClBA,EAAa,IAAIsB,EAAO,EA6BxB,CACD1B,KACA,MACH,KAhC+B,CAC5B,MAAM2B,GAAQpH,GAAcx8B,GAAK,KAAMk8B,EAAOpM,GAAOlwB,EAAE,MAAO2sB,GAAI3sB,EAAGm9B,CAAU,EACzE8G,GAAOjkC,EAAE,OAASgkC,GAAM,CAAC,EAAIA,GAAM,CAAC,EAI1C,GAHI,CAAChkC,EAAE,QAAUgkC,GAAM,CAAC,IAAM,SAC1BF,GAAe,IAEfG,KAAS,OAAW,CACpBnH,GAAQmH,GAAK,EACbL,GAAYK,GAAK,MACjBxB,EAAa,IAAIsB,EAAO,EACxB1W,EAAI,QAAO,EACXkW,GAAa,OACblW,EAAI,KAAI,EACRA,EAAI,UAAS,EACb,MAAMnG,GAAI,KAAK,IAAI,EAAGmV,GAAQ4H,GAAK,CAAC,EACpC5W,EAAI,KAAK4W,GAAK,EAAI/c,GAAGgJ,GAAO+T,GAAK,MAAQ/c,GAAGyF,EAAE,EAC1CpqB,KAAW,SACXA,GAAS,IAEbA,GAAO,KAAK,CACR,EAAG0hC,GAAK,EAAI/c,GACZ,EAAGgJ,GACH,MAAO+T,GAAK,MAAQ/c,GACpB,OAAQyF,EACpC,CAAyB,EACDU,EAAI,KAAI,EACRwW,GAAc,EACjB,CACJ,CAKJ,CACD,MAAMK,GAAW9C,GAAA,YAAAA,EAAsBllB,IACjCioB,GAAgBV,MAAiB9tB,GAAA3V,EAAE,qBAAF,YAAA2V,GAAsB,iBAAkB,QACzEyuB,GAAApkC,EAAE,qBAAF,YAAAokC,GAAsB,cACtB,OACA5V,GAAQpuB,GAAK,gBAAkB,QAAa8jC,KAAa,QAAaC,KAAkB,OACxFd,GACAxP,GAAqBwP,GAAUa,GAAUC,GAAe/jC,GAAK,aAAa,EAChFitB,EAAI,UAAS,EACb,MAAM5b,GAAamY,GAAe2Y,GAAWniC,GAAMsB,CAAS,EAC5D,IAAI2iC,GAAc3Z,GAAc6X,GAAWniC,GAAMsB,EAAW6/B,CAAS,EACrE,MAAM+C,GAAoBlkC,GAAK,OAAS,QACpCsB,EAAU,QAAQ,KAAKQ,IAAS9B,GAAK,OAAS,QAAa8B,IAAS9B,GAAK,KAAK,CAAC,GAAK8B,IAAS9B,GAAK,KAAK,CAAC,CACxH,EACgBqR,IAAc,CAAC6vB,GAAaC,EAC5B8C,GAAc,EAET5yB,IAAc8vB,IACnB8C,GAAc,KAAK,IAAIA,GAAa,CAAC,GAErCC,IACAD,KAEC5yB,KACGiyB,IACAW,KACAlB,IAAe,CAACM,IAChBY,MAER,MAAME,GAASnkC,GAAK,OAASR,EAAa,UAAY4uB,GAAM,aAAeA,GAAM,OACjF,IAAIgW,GAIJ,IAHIhB,IAAYe,KAAWvC,EAAW,UAClCwC,GAAOxc,GAAMuc,GAAQC,EAAI,GAEzBH,GAAc,GAAKV,GAAa,CAC5BA,KACAa,GAAOxc,GAAMwG,GAAM,SAAUgW,EAAI,GAErC,QAAS1iC,GAAI,EAAGA,GAAIuiC,GAAaviC,KAC7B0iC,GAAOxc,GAAMwG,GAAM,YAAagW,EAAI,CAE3C,SACQ/C,IAAkB,QACvB,UAAWgD,MAAOhD,EACd,GAAIgD,GAAI,CAAC,IAAMzkC,EAAE,aAAeykC,GAAI,CAAC,IAAMvoB,GAAK,CAC5CsoB,GAAOxc,GAAMwG,GAAM,eAAgBgW,EAAI,EACvC,KACH,EAGT,GAAI9C,IAAqB,OACrB,QAAS5/B,GAAI,EAAGA,GAAI4/B,EAAiB,OAAQ5/B,KAAK,CAC9C,MAAM4iC,GAAShD,EAAiB5/B,EAAC,EAC3B4lB,GAAIgd,GAAO,MACbA,GAAO,QAAU,iBACjBhd,GAAE,GAAK1nB,EAAE,aACTA,EAAE,YAAc0nB,GAAE,EAAIA,GAAE,OACxBA,GAAE,GAAKxL,IACPA,GAAMwL,GAAE,EAAIA,GAAE,SACd8c,GAAOxc,GAAM0c,GAAO,MAAOF,EAAI,EAEtC,CAEL,IAAIG,GAAgB,GACpB,GAAInD,IAAW,OAAW,CAItB,MAAMtgC,GAAMgvB,GAAQ,EAIdpH,IAHS0a,GACTtiC,GAAMyrB,GAAK,EACX,KAAK,IAAIzrB,GAAMyrB,GAAK,EAAGzb,EAASsxB,EAAwB,GAC3CthC,IAGf4nB,KAAM6D,GAAK,GAAKmQ,GAAQ,GAAKT,MAC7BsI,GAAgB,GAChBtX,EAAI,KAAI,EACRA,EAAI,UAAS,EACbA,EAAI,KAAKyP,GAAQ,EAAG57B,GAAK0iC,GAAY,EAAG9a,EAAC,EACzCuE,EAAI,KAAI,GAIZmX,GAAOA,KAAS,OAAYhW,GAAM,OAASxG,GAAMwc,GAAMhW,GAAM,MAAM,CACtE,CACD,MAAMoW,GAAe5kC,EAAE,cAAgBm9B,EAAW,OAAS,EACrD5O,GAAYrS,KAAQkP,EAAO,EAC7BoZ,KAAS,SACTnX,EAAI,UAAYmX,GACZjB,KAAe,SACfA,GAAW,UAAYiB,IAEvBhD,IAAW,OAGXnU,EAAI,SAASyP,GAAQ,EAAG5M,GAAQ,EAAG0T,IAAagB,GAAe,EAAI,GAAIjY,IAAM4B,GAAY,EAAI,EAAE,EAG/FlB,EAAI,SAASyP,GAAO5M,GAAO0T,GAAWjX,EAAE,GAG5CvsB,GAAK,QAAU,UACfitB,EAAI,YAAc,IAEtB,IAAIwX,GACJ,QAAS/iC,GAAI,EAAGA,GAAI+/B,EAAY,OAAQ//B,KAAK,CACzC,MAAMgjC,GAAKjD,EAAY//B,EAAC,EACxB,GAAIgjC,GAAG,KAAK,CAAC,IAAM9kC,EAAE,aAAe8kC,GAAG,KAAK,CAAC,IAAM5oB,GAAK,CACpD2oB,GAAaC,GACb,KACH,CACJ,CACD,GAAIlB,GAAYxB,IAAoB,CAAC0B,GAAc,CAC/C,MAAMiB,GAAWvW,GAAM,aACnBuW,KAAaxX,IACbF,EAAI,KAAO0X,GACXxX,EAAOwX,IAEXxB,GAAayB,GAAS3X,EAAKjtB,GAAMJ,EAAE,YAAakc,GAAK0oB,GAAcrW,GAAWuO,GAAO5M,GAAO0T,GAAWjX,GAAI0X,GAAc,EAAG7V,GAAOgW,IAAQhW,GAAM,OAAQmT,EAAaC,GAAeiD,IAAA,YAAAA,GAAY,cAAe,EAAG/C,EAAWpS,EAAetB,GAAW2T,EAAkBwB,GAAYtB,EAASC,GAAqB/N,EAAiBgO,EAAc,CACtV,CACD,OAAIwC,IACAtX,EAAI,QAAO,EAEXjtB,GAAK,QAAU,UACfitB,EAAI,YAAc,GAEtBgV,KACIwB,KACAxW,EAAI,QAAO,GACX4X,GAAA1B,IAAA,YAAAA,GAAY,SAAZ,MAAA0B,GAAA,KAAA1B,GAAqBjB,IACrBiB,GAAa,OACbL,KACA3V,EAAO+V,GACPjW,EAAI,KAAOiW,IAERjB,IAAU,CAC7B,CAAS,EACDhV,EAAI,QAAO,EACJgV,IAAU,CACzB,CAAK,EACM9/B,EACX,CACA,MAAM2iC,GAAgB,CAAC,EAAG,CAAC,EACrBC,GAAe,CAAE,EAAG,EAAG,EAAG,EAAG,MAAO,EAAG,OAAQ,GAC/CC,GAAY,CAAC,OAAW,IAAM,EAAS,EAC7C,IAAIC,GAA0B,GAC9B,SAASC,IAAc,CACnBD,GAA0B,EAC9B,CACO,SAASL,GAAS3X,EAAKjtB,EAAMopB,EAAKtN,EAAKoS,EAAWC,EAAW9sB,EAAGsG,EAAG2gB,EAAGI,EAAGyc,EAAa/W,EAAOgX,EAAoB7D,EAAaC,EAAe6D,EAAa3D,EAAWpS,EAAetB,EAAW2T,EAAkB1T,EAAU4T,EAASC,EAAqB/N,EAAiBgO,EAAgB,UAC7R,IAAIuD,EACAC,EACA7D,IAAc,QAAaA,EAAU,CAAC,EAAE,CAAC,IAAMtY,GAAOsY,EAAU,CAAC,EAAE,CAAC,IAAM5lB,IAC1EwpB,EAAS5D,EAAU,CAAC,EAAE,CAAC,EACvB6D,EAAS7D,EAAU,CAAC,EAAE,CAAC,GAE3B,IAAIv/B,EACJ2iC,GAAc,CAAC,EAAI1b,EACnB0b,GAAc,CAAC,EAAIhpB,EACnBipB,GAAa,EAAI1jC,EACjB0jC,GAAa,EAAIp9B,EACjBo9B,GAAa,MAAQzc,EACrByc,GAAa,OAASrc,EACtBsc,GAAU,CAAC,EAAIlD,EAAoB,SAASgD,EAAa,EACzDE,GAAU,CAAC,EAAKpqB,IAAQknB,EAAoB,SAASgD,GAAelqB,EAAG,EACvEqqB,GAA0B,GAC1B,MAAM19B,EAAO,CAET,IAAA0lB,EACA,MAAAmB,EACA,IAAAhF,EACA,IAAAtN,EACA,KAAA9b,EACA,KAAM+kC,GACN,YAAAI,EACA,cAAeC,EACf,YAAAC,EACA,UAAArX,EACA,OAAAsX,EACA,UAAAN,GACA,OAAAO,EACA,YAAAhE,EACA,cAAAC,EACA,cAAAlS,EACA,eAAgBgW,IAAW,OAAYvD,EAAiB,OACxD,sBAAuBmD,EAC/B,EACUM,EAAY1X,GAAuBvmB,EAAMvH,EAAK,YAAaguB,EAAWC,EAAUC,EAAWC,CAAS,EACpG7G,EAAIyM,EAAgB/zB,CAAI,EAC9B,GAAIsnB,IAAM,OAAW,EACb2G,GAAA,YAAAA,EAAU,YAAa3G,KACvB/R,GAAA0Y,GAAA,YAAAA,EAAU,SAAV,MAAA1Y,GAAA,KAAA0Y,EAAmB1mB,GACnB0mB,EAAW,QAEf,MAAMwX,IAAoBzB,EAAA1c,EAAE,WAAF,YAAA0c,EAAA,KAAA1c,EAAa/f,EAAM0mB,GACzC0T,IAAqB,QAAa,CAAC1hC,GAAgBsH,EAAK,IAAI,EAC5Do6B,EAAiBp6B,EAAM,IAAM+f,EAAE,KAAK/f,EAAMvH,CAAI,CAAC,EAG/CsnB,EAAE,KAAK/f,EAAMvH,CAAI,EAErBmC,EACIsjC,KAAsB,OAChB,OACA,CACE,OAAQA,IAAA,YAAAA,GAAmB,OAC3B,UAAWA,IAAA,YAAAA,GAAmB,UAC9B,KAAMA,IAAA,YAAAA,GAAmB,KACzB,SAAUne,CAC9B,CACK,CACD,OAAIke,GAAaP,MACbpD,GAAA,MAAAA,EAAUiD,KACP3iC,CACX,CC3WO,SAASujC,GAAazY,EAAKmB,EAAOhM,EAAS/gB,EAAGsG,EAAGyB,EAAO0H,EAAQq0B,EAAaG,EAAS,IAAKC,EAAS,IAAKhvB,EAAU,GAAIN,EAAY,SAAU7R,EAAQ,SAAU,CAClK,MAAMuhC,EAAU,KAAK,MAAMh+B,EAAImJ,EAAS,CAAC,EACnC80B,EAAiBxhC,IAAU,SAAW,IAAQgqB,EAAM,gBAAkB,EAC5E,IAAIyX,EAAgBvvB,GAAeC,EAASzF,EAAQsd,EAAM,mBAAmB,EACzE0X,EAAoBD,EAAgB,EACxC,MAAMhwB,EAAOG,GAAuBC,EAAW5U,EAAG+H,EAAOglB,EAAM,sBAAuByX,CAAa,EAC7FlvB,EAAKf,GAAYC,EAAM8vB,EAASE,CAAa,EAC7CE,EAAUrvB,GAAgBrV,EAAIikC,EAAQ39B,EAAI49B,EAAQ5uB,CAAE,EAC1D,OAAQyL,EAAO,CACX,IAAK,GAAM,CACP6K,EAAI,UAAS,EACbiD,GAAYjD,EAAKpX,EAAOgwB,EAAgB,EAAGF,EAAUE,EAAgB,EAAGA,EAAeA,EAAeD,CAAc,EAChHxhC,IAAU,WACV0hC,GAAqB,GACrBD,GAAiB,IAErB5Y,EAAI,UAAYkY,EAAc/W,EAAM,YAAcA,EAAM,WACxDnB,EAAI,KAAI,EACRA,EAAI,UAAS,EACbA,EAAI,OAAOpX,EAAOiwB,EAAoBD,EAAgB,KAAMF,EAAUG,EAAoBD,EAAgB,IAAI,EAC9G5Y,EAAI,OAAOpX,EAAOiwB,EAAoBD,EAAgB,KAAMF,EAAUG,EAAoBD,EAAgB,IAAI,EAC9G5Y,EAAI,OAAOpX,EAAOiwB,EAAoBD,EAAgB,KAAMF,EAAUG,EAAoBD,EAAgB,IAAI,EAC9G5Y,EAAI,YAAcmB,EAAM,OACxBnB,EAAI,SAAW,QACfA,EAAI,QAAU,QACdA,EAAI,UAAY,IAChBA,EAAI,OAAM,EACV,KACH,CACD,KAAK3tB,GACL,IAAK,GAAO,CACR2tB,EAAI,UAAS,EACbiD,GAAYjD,EAAKpX,EAAOgwB,EAAgB,EAAI,GAAKF,EAAUE,EAAgB,EAAI,GAAKA,EAAgB,EAAGA,EAAgB,EAAGD,CAAc,EACxI3Y,EAAI,UAAY,EAChBA,EAAI,YAAc8Y,EAAU3X,EAAM,SAAWA,EAAM,WACnDnB,EAAI,OAAM,EACV,KACH,CACD,KAAK1tB,GAAsB,CACvB0tB,EAAI,UAAS,EACbiD,GAAYjD,EAAKpX,EAAOgwB,EAAgB,EAAGF,EAAUE,EAAgB,EAAGA,EAAeA,EAAeD,CAAc,EACpH3Y,EAAI,UAAY8Y,EAAU3X,EAAM,WAAaA,EAAM,UACnDnB,EAAI,KAAI,EACJ7oB,IAAU,WACV0hC,GAAqB,GACrBD,GAAiB,IAErB5Y,EAAI,UAAS,EACbA,EAAI,OAAOpX,EAAOgwB,EAAgB,EAAGF,CAAO,EAC5C1Y,EAAI,OAAOpX,EAAOgwB,EAAgB,EAAGF,CAAO,EAC5C1Y,EAAI,YAAcmB,EAAM,OACxBnB,EAAI,QAAU,QACdA,EAAI,UAAY,IAChBA,EAAI,OAAM,EACV,KACH,CACD,QACIlvB,GAAmB,CAC1B,CACL,CCvDO,SAASioC,GAAgB/Y,EAAK+O,EAAeiK,EAAcF,EAAS38B,EAAOwiB,EAAYI,EAAcC,EAAmBia,EAAkBC,EAAY7kC,EAAWsgC,EAAYJ,EAAeC,EAAa2E,EAAgBrF,EAAiBK,EAAQiF,EAAoBC,EAAW,aACpR,MAAMja,EAAoBL,EAAeC,EACzC,GAAII,GAAqB,EACrB,OACJY,EAAI,UAAY2U,EAAW,SAC3B3U,EAAI,SAAS,EAAG,EAAG7jB,EAAOijB,CAAiB,EAC3C,MAAMka,GAAOhxB,EAAAwwB,GAAA,YAAAA,EAAU,KAAV,YAAAxwB,EAAe,GACtBixB,GAAOxC,EAAA+B,GAAA,YAAAA,EAAU,KAAV,YAAA/B,EAAe,GACtByC,GAAQ5B,EAAAkB,GAAA,YAAAA,EAAU,KAAV,YAAAlB,EAAe,GACvB6B,GAAQC,EAAAZ,GAAA,YAAAA,EAAU,KAAV,YAAAY,EAAe,GACvBxZ,EAAOyU,EAAW,eAExB3U,EAAI,KAAOE,EACX4O,GAAYC,EAAe,EAAGpQ,EAAY,EAAGS,EAAmB,CAACzsB,EAAGyB,EAAGulC,GAAI3K,IAAU,OACjF,GAAImF,IAAW,QAAa,CAACA,EAAO,IAAI,CAACxhC,EAAE,YAAa,EAAE,CAAC,EACvD,OACJ,MAAM4iC,GAAO,KAAK,IAAI,EAAGvG,EAAQ56B,CAAC,EAClC4rB,EAAI,KAAI,EACRA,EAAI,UAAS,EACbA,EAAI,KAAK5rB,EAAImhC,GAAMvW,EAAmBrsB,EAAE,MAAQ4iC,GAAMxW,CAAY,EAClEiB,EAAI,KAAI,EACR,MAAM+V,GAAajC,EAAgBnhC,EAAE,OAAS,EAAE,EAAE,cAC5CwuB,GAAQxuB,EAAE,gBAAkB,QAAaojC,KAAe,OACxDpB,EACAnO,GAAqBmO,EAAYoB,GAAYpjC,EAAE,aAAa,EAC9DwuB,GAAM,WAAawT,EAAW,WAC9B3U,EAAI,UAAYmB,GAAM,SACtBnB,EAAI,KAAI,GAERmB,KAAUwT,IACV3U,EAAI,KAAOmB,GAAM,cAErB,MAAMtlB,GAAWxH,EAAU,QAAQ,SAAS1B,EAAE,WAAW,EACnDinC,EAAUX,IAAqB,QAAaC,EAC5CW,GAAiB,CAACD,GAAWL,IAAS,IAAMD,IAAS3mC,EAAE,YACvDmnC,GAAQF,EACR,IACAtxB,EAAAksB,EAAY,KAAKlpB,GAAKA,EAAE,KAAK,CAAC,IAAM3Y,EAAE,aAAe2Y,EAAE,KAAK,CAAC,IAAM,EAAE,IAArE,YAAAhD,EAAwE,cAAe,EACvFyxB,IAAkB1lC,GAAA,YAAAA,EAAW,WAAY,QAAaA,EAAU,QAAQ,KAAK,CAAC,IAAM1B,EAAE,YACtFqnC,GAAcn+B,GAAWslB,GAAM,YAAc4Y,GAAkB5Y,GAAM,iBAAmBA,GAAM,SAC9FzmB,EAAIs+B,EAAeha,EAAoB,EACvCib,EAAUtnC,EAAE,cAAgB,EAAI,EAAI,EACtCkJ,IACAmkB,EAAI,UAAYga,GAChBha,EAAI,SAAS5rB,EAAI6lC,EAASv/B,EAAG/H,EAAE,MAAQsnC,EAASlb,CAAY,IAEvDgb,IAAmBD,GAAQ,KAChC9Z,EAAI,UAAS,EACbA,EAAI,KAAK5rB,EAAI6lC,EAASv/B,EAAG/H,EAAE,MAAQsnC,EAASlb,CAAY,EACpDgb,KACA/Z,EAAI,UAAYmB,GAAM,iBACtBnB,EAAI,KAAI,GAER8Z,GAAQ,IACR9Z,EAAI,YAAc8Z,GAClB9Z,EAAI,UAAYmB,GAAM,gBACtBnB,EAAI,KAAI,EACRA,EAAI,YAAc,IAG1Bka,GAAWla,EAAK5rB,EAAGsG,EAAG/H,EAAE,MAAOosB,EAAcpsB,EAAGkJ,GAAUslB,GAAO0Y,GAAgBA,GAAiBL,EAAQ,OAAWK,GAAiBJ,EAAQ,OAAWM,GAAiBD,GAAOvF,EAAe6E,EAAoBC,CAAS,EAC7NrZ,EAAI,QAAO,CACnB,CAAK,EACGgZ,GACAmB,GAAWna,EAAK+O,EAAe5yB,EAAOwiB,EAAYK,EAAmB8Z,EAASnE,EAAYJ,EAAeC,EAAa2E,EAAgBrF,EAAiBK,CAAM,CAErK,CACO,SAASgG,GAAWna,EAAK+O,EAAe5yB,EAAOwiB,EAAYK,EAAmB8Z,EAAS3X,EAAOoT,EAAe6F,EAAcjB,EAAgBrF,EAAiBK,EAAQ,CAEvK,KAAM,CAACmF,EAAMC,CAAI,GAAIT,GAAA,YAAAA,EAAU,KAAM,GACrC,IAAIuB,EAAS,EACbnL,GAAWH,EAAe5yB,EAAOwiB,EAAYK,EAAmB,CAACwQ,EAAM8K,EAAWlmC,EAAGsG,EAAG2gB,EAAGI,IAAM,CAC7F,GAAI0Y,IAAW,QACX,CAACA,EAAO,mBAAmB,CACvB,EAAG3E,EAAK,CAAC,EACT,EAAG,GACH,MAAOA,EAAK,CAAC,EAAIA,EAAK,CAAC,EAAI,EAC3B,OAAQ,CACxB,CAAa,EACD,OACJxP,EAAI,KAAI,EACRA,EAAI,UAAS,EACbA,EAAI,KAAK5rB,EAAGsG,EAAG2gB,EAAGI,CAAC,EACnBuE,EAAI,KAAI,EACR,MAAMiF,EAAQ6O,EAAgBwG,CAAS,EACjCvE,GAAa9Q,GAAA,YAAAA,EAAO,iBAAkB,OAAY9D,EAAQqF,GAAqBrF,EAAO8D,EAAM,aAAa,EACzGsV,EAAYhB,IAAS,IAAMD,IAAS,QAAaA,GAAQ9J,EAAK,CAAC,GAAK8J,GAAQ9J,EAAK,CAAC,EAClFgL,EAAYD,EAAYxE,EAAW,gBAAkBA,EAAW,SAMtE,GALIyE,IAAcrZ,EAAM,WACpBnB,EAAI,UAAYwa,EAChBxa,EAAI,KAAI,GAEZA,EAAI,UAAY+V,EAAW,iBAAmBA,EAAW,WACrD9Q,IAAU,OAAW,CACrB,IAAIgK,EAAQ76B,EAMZ,GALI6wB,EAAM,OAAS,SACfsP,EAAc,WAAWtP,EAAM,KAAM,SAAUjF,EAAKiP,EAAQ,GAAOjQ,EAAoB,IAAM,EAAG,GAAI+W,CAAU,EAC9G9G,GAAS,IAEbjP,EAAI,SAASiF,EAAM,KAAMgK,EAAQ,EAAMjQ,EAAoB,EAAIsB,GAAoBN,EAAKmB,EAAM,cAAc,CAAC,EACzG8D,EAAM,UAAY,QAAasV,EAAW,CAC1C,MAAME,EAAcC,GAAwB,CAAE,EAAAtmC,EAAG,EAAAsG,EAAG,MAAO2gB,EAAG,OAAQI,CAAC,EAAIwJ,EAAM,OAAO,EACxFjF,EAAI,UAAS,EACb,MAAM2a,EAAaF,EAAY,CAAC,EAAE,EAAI,GAChCG,EAAYxmC,EAAIinB,EAAIsf,EAC1B3a,EAAI,KAAK2a,EAAY,EAAGC,EAAW5b,CAAiB,EACpD,MAAM6b,EAAO7a,EAAI,qBAAqB2a,EAAY,EAAGA,EAAaC,EAAW,CAAC,EACxEE,GAAQ3gB,GAAUqgB,EAAW,CAAC,EACpCK,EAAK,aAAa,EAAGC,EAAK,EAC1BD,EAAK,aAAa,GAAKD,EAAWJ,CAAS,EAC3CK,EAAK,aAAa,EAAGL,CAAS,EAC9Bxa,EAAI,UAAY6a,EAChB7a,EAAI,KAAI,EACRA,EAAI,YAAc,GAElB,KAAM,CAAC+a,EAAQC,EAAM,GAAIlC,GAAA,YAAAA,EAAU,KAAM,CAAC,GAAI,EAAE,EAChD,QAASrkC,GAAI,EAAGA,GAAIwwB,EAAM,QAAQ,OAAQxwB,KAAK,CAC3C,MAAMwmC,GAAShW,EAAM,QAAQxwB,EAAC,EACxBymC,GAAMT,EAAYhmC,EAAC,EACnB0mC,EAAgB5J,GAAY2J,GAAKH,EAAS3mC,EAAG4mC,EAAM,EACrDG,IACAnb,EAAI,YAAc,GAEtBuU,EAAc,WAAW0G,GAAO,KAAM,SAAUjb,EAAKkb,GAAI,EAAIA,GAAI,MAAQ,EAAI,GAAIA,GAAI,EAAIA,GAAI,OAAS,EAAI,GAAI,GAAInF,CAAU,EACxHoF,IACAnb,EAAI,YAAc,GAEzB,CACDA,EAAI,YAAc,CACrB,CACJ,CACG5rB,IAAM,GAAK+kC,EAAe3J,EAAK,CAAC,CAAC,IACjCxP,EAAI,UAAS,EACbA,EAAI,OAAO5rB,EAAI,GAAK,CAAC,EACrB4rB,EAAI,OAAO5rB,EAAI,GAAK4qB,CAAiB,EACrCgB,EAAI,YAAcmB,EAAM,YACxBnB,EAAI,UAAY,EAChBA,EAAI,OAAM,GAEdA,EAAI,QAAO,EACXqa,EAASjmC,EAAIinB,CACrB,CAAK,EACD2E,EAAI,UAAS,EACbA,EAAI,OAAOqa,EAAS,GAAK,CAAC,EAC1Bra,EAAI,OAAOqa,EAAS,GAAKrb,CAAiB,EAC1CgB,EAAI,OAAO,EAAGhB,EAAoB,EAAG,EACrCgB,EAAI,OAAO7jB,EAAO6iB,EAAoB,EAAG,EACzCgB,EAAI,YAAcmB,EAAM,YACxBnB,EAAI,UAAY,EAChBA,EAAI,OAAM,CACd,CACA,MAAMob,GAAiB,GACvB,SAASC,GAAoBjnC,EAAGsG,EAAGyB,EAAO0H,EAAQkf,EAAO,CAGrD,MAAO,CACH,EAAG3uB,EAAI+H,EAAQi/B,GACf,EAAG,KAAK,IAAI1gC,EAAGA,EAAImJ,EAAS,EAAIu3B,GAAiB,CAAC,EAClD,MAAOA,GACP,OAAQ,KAAK,IAAIA,GAAgBv3B,CAAM,CAC/C,CACA,CACO,SAAS62B,GAAwBQ,EAAKI,EAAS,CAClD,MAAMpmC,EAAS,GACf,IAAId,EAAI8mC,EAAI,EAAIA,EAAI,MAAQ,GAAKI,EAAQ,OACzC,MAAM5gC,EAAIwgC,EAAI,EAAIA,EAAI,OAAS,EAAI,GAC7Br3B,EAAS,GACT1H,EAAQ,GACd,QAAS1H,EAAI,EAAGA,EAAI6mC,EAAQ,OAAQ7mC,IAChCS,EAAO,KAAK,CACR,EAAAd,EACA,EAAAsG,EACA,MAAAyB,EACA,OAAA0H,CACZ,CAAS,EACDzP,GAAK,GAET,OAAOc,CACX,CACA,SAASqmC,GAAeC,EAAQC,EAASC,EAAO,CAC5C,MAAI,CAACA,GAASF,IAAW,SAEzBA,EAAO,EAAIC,GAAWD,EAAO,EAAIC,GAAWD,EAAO,OAC5CA,CACX,CACO,SAASG,GAAoB3b,EAAKrtB,EAAGyB,EAAGsG,EAAGyB,EAAO0H,EAAQsd,EAAOua,EAAO,OAC3E,MAAME,EAAOza,EAAM,sBACb0a,EAAiB1a,EAAM,eACvB2a,EAAaT,GAAoBjnC,EAAGsG,EAAGyB,EAAO0H,CAAa,EACjE,IAAIorB,EAAQ76B,EAAIwnC,EAChB,MAAMG,EAAappC,EAAE,OAAS,OACxB,OACA,CACE,EAAGs8B,EACH,EAAGv0B,GAAKmJ,EAASg4B,GAAkB,EACnC,MAAOA,EACP,OAAQA,CACpB,EACUG,EAAoBD,IAAe,QAAappC,EAAE,cAAgB,OAClE,OACA,CACE,EAAGopC,EAAW,EAAI,EAClB,EAAGA,EAAW,EAAI,EAClB,MAAO,GACP,OAAQ,EACpB,EACQA,IAAe,SACf9M,GAAS,KAAK,KAAK4M,EAAiB,GAAG,GAE3C,MAAMI,EAAa,CACf,EAAGhN,EACH,EAAGv0B,EACH,MAAOyB,EAAQ8yB,EACf,OAAQprB,CAChB,EACI,IAAIq4B,EACJ,GAAIvpC,EAAE,gBAAkB,OAAW,CAC/B,MAAMwpC,EAAYnc,IAAQ,SACpB1X,EAAA+X,GAAqB1tB,EAAE,MAAOwuB,EAAM,cAAc,IAAlD,YAAA7Y,EAAqD,QAAS,EAC9D6X,GAAkBxtB,EAAE,MAAOqtB,EAAKmB,EAAM,cAAc,EAAE,MAC5D8a,EAAW,MAAQE,EACnBlN,GAASkN,EAAYP,EACrBM,EAAsB,CAClB,EAAGjN,EACH,EAAGv0B,GAAKmJ,EAASg4B,GAAkB,EACnC,MAAOA,EACP,OAAQA,CACpB,CACK,CACD,MAAMO,EAAchoC,EAAI+H,EAAQ,EAChC,MAAO,CACH,WAAYo/B,GAAeO,EAAYM,EAAaV,CAAK,EACzD,WAAYH,GAAeQ,EAAYK,EAAaV,CAAK,EACzD,kBAAmBH,GAAeS,EAAmBI,EAAaV,CAAK,EACvE,WAAYH,GAAeU,EAAYG,EAAaV,CAAK,EACzD,oBAAqBH,GAAeW,EAAqBE,EAAaV,CAAK,CACnF,CACA,CACA,SAASW,GAAgBrc,EAAK5rB,EAAGsG,EAAGyB,EAAO0H,EAAQlR,EAAGkJ,EAAUslB,EAAOoZ,EAAW3xB,EAAMC,EAAMuvB,EAAa7D,EAAe8E,EAAWtW,EAAOuZ,EAAc,CACtJ,GAAI3pC,EAAE,YAAc,QAAaA,EAAE,0BAA4B,GAAM,CACjE,MAAMwiB,EAAUxiB,EAAE,iBACdwiB,IAAY,IAAQxiB,EAAE,+BAAiC,KACvDqtB,EAAI,YAAcoY,GAEtB,MAAMmE,EAAc5pC,EAAE,uBAAyB,OAAY6zB,GAAqBrF,EAAOxuB,EAAE,oBAAoB,EAAIwuB,EACjHsX,GAAazY,EAAKuc,EAAapnB,EAAS/gB,EAAGsG,EAAGyB,EAAO0H,EAAQ,GAAO,OAAW,OAAW,GAAI,SAAUlR,EAAE,SAAS,EAC/GwiB,IAAY,IAAQxiB,EAAE,+BAAiC,KACvDqtB,EAAI,YAAc,GAEtB,MACH,CACD,MAAMwc,EAAY3gC,EAAWslB,EAAM,mBAAqBA,EAAM,WACxDsb,EAAiB9pC,EAAE,UAAY,KAAS4nC,GAAclB,GAAax9B,IAAcygC,EAAa,aAAe,OACnH,GAAI3pC,EAAE,OAAS,QAAa2pC,EAAa,aAAe,OAAW,CAC/D,IAAIhP,EAAUzxB,EAAW,WAAa,SAClClJ,EAAE,QAAU,cACZ26B,EAAUzxB,EAAW,WAAa,WAEtC04B,EAAc,WAAW5hC,EAAE,KAAM26B,EAAStN,EAAKsc,EAAa,WAAW,EAAGA,EAAa,WAAW,EAAGA,EAAa,WAAW,MAAOnb,CAAK,EACrIxuB,EAAE,cAAgB,QAAa2pC,EAAa,oBAAsB,QAClE/H,EAAc,WAAW5hC,EAAE,YAAakJ,EAAW,WAAa,UAAWmkB,EAAKsc,EAAa,kBAAkB,EAAGA,EAAa,kBAAkB,EAAGA,EAAa,kBAAkB,MAAOnb,CAAK,CAEtM,CACD,GAAIsb,GAAkBtgC,EAAQ,GAAI,CAE9B,MAAMugC,EAAY3Z,EAAQ,GAAY5mB,EAAQ,GACxCwgC,EAAU5Z,EAAQ,GAAY,GAAM5mB,EAAQ,GAAY,GACxDygC,EAAmBF,EAAYvgC,EAC/B0gC,EAAiBF,EAAUxgC,EAC3B0+B,EAAO7a,EAAI,qBAAqB5rB,EAAG,EAAGA,EAAI+H,EAAO,CAAC,EAClD2+B,EAAQ3gB,GAAUqiB,EAAW,CAAC,EACpC3B,EAAK,aAAa9X,EAAQ,EAAI,EAAGyZ,CAAS,EAC1C3B,EAAK,aAAa+B,EAAkBJ,CAAS,EAC7C3B,EAAK,aAAagC,EAAgB/B,CAAK,EACvCD,EAAK,aAAa9X,EAAQ,EAAI,EAAG+X,CAAK,EACtC9a,EAAI,UAAY6a,CACnB,MAEG7a,EAAI,UAAYwc,EAWpB,GATIzZ,IACA/C,EAAI,UAAY,SAEhBsc,EAAa,aAAe,QAC5Btc,EAAI,SAASrtB,EAAE,MAAOowB,EAAQuZ,EAAa,WAAW,EAAIA,EAAa,WAAW,MAAQA,EAAa,WAAW,EAAG5hC,EAAImJ,EAAS,EAAIyc,GAAoBN,EAAKmB,EAAM,cAAc,CAAC,EAEpL4B,IACA/C,EAAI,UAAY,QAEhBrtB,EAAE,gBAAkB,QACpB2pC,EAAa,sBAAwB,SACpC,CAACG,GACE,CAACzL,GAAcsL,EAAa,WAAW,EAAGA,EAAa,WAAW,EAAGA,EAAa,WAAW,MAAOA,EAAa,WAAW,OAAQA,EAAa,oBAAoB,EAAGA,EAAa,oBAAoB,EAAGA,EAAa,oBAAoB,MAAOA,EAAa,oBAAoB,MAAM,GAAI,CACnS,IAAIhP,EAAUzxB,EAAW,WAAa,SAClClJ,EAAE,QAAU,cACZ26B,EAAUzxB,EAAW,WAAa,WAEtC04B,EAAc,WAAW5hC,EAAE,cAAe26B,EAAStN,EAAKsc,EAAa,oBAAoB,EAAGA,EAAa,oBAAoB,EAAGA,EAAa,oBAAoB,MAAOnb,CAAK,CAChL,CACD,GAAIsb,GAAkBH,EAAa,aAAe,OAAW,CACzD,MAAMR,EAAaQ,EAAa,WAC1BxD,EAAUlwB,IAAS,QAAaC,IAAS,QAAa0oB,GAAYuK,EAAYlzB,EAAOxU,EAAGyU,EAAOnO,CAAC,EAItG,GAHKo+B,IACD9Y,EAAI,YAAc,IAElBrtB,EAAE,WAAa,QAAaA,EAAE,WAAaF,GAAmB,SAAU,CAExEutB,EAAI,UAAS,EACb,MAAM8c,EAAYhB,EAAW,EAAIA,EAAW,MAAQ,EAAI,IAClDiB,EAAYjB,EAAW,EAAIA,EAAW,OAAS,EAAI,EACzDxY,GAAYtD,EAAK,CACb,CACI,EAAG8c,EACH,EAAGC,CACN,EACD,CACI,EAAGD,EAAY,GACf,EAAGC,CACN,EACD,CACI,EAAGD,EAAY,IACf,EAAGC,EAAY,CAClB,CACJ,EAAE,CAAC,EACJ/c,EAAI,UAAYwc,EAChBxc,EAAI,KAAI,CACX,SACQrtB,EAAE,WAAaF,GAAmB,KAAM,CAE7CutB,EAAI,UAAS,EACb,MAAMoD,EAAQ0Y,EAAW,EAAIA,EAAW,MAAQ,EAC1CzY,EAAQyY,EAAW,EAAIA,EAAW,OAAS,EACjD3Y,GAAanD,EAAKoD,EAAOC,CAAK,EAC9BrD,EAAI,UAAYwc,EAChBxc,EAAI,KAAI,CACX,KACI,CAED,MAAMgd,EAAQlB,EAAW,GAAKA,EAAW,MAAQ3a,EAAM,gBAAkB,EACnE8b,EAAQnB,EAAW,GAAKA,EAAW,OAAS3a,EAAM,gBAAkB,EAC1EoT,EAAc,WAAW5hC,EAAE,SAAU,SAAUqtB,EAAKgd,EAAOC,EAAO9b,EAAM,eAAgBA,CAAK,CAChG,CACI2X,IACD9Y,EAAI,YAAc,EAEzB,CACL,CACO,SAASka,GAAWla,EAAK5rB,EAAGsG,EAAGyB,EAAO0H,EAAQlR,EAAGkJ,EAAUslB,EAAOoZ,EAAW3xB,EAAMC,EAAMkxB,EAAiB3B,EAAa7D,EAAe6E,EAAoBC,EAAW,CACxK,MAAMtW,EAAQxY,GAAU5X,EAAE,KAAK,IAAM,MAC/B2pC,EAAeX,GAAoB3b,EAAKrtB,EAAGyB,EAAGsG,EAAGyB,EAAO0H,EAAQsd,EAAO4B,CAAK,EAC9EqW,IAAuB,OACvBA,EAAmB,CACf,IAAApZ,EACA,MAAAmB,EACA,KAAM,CAAE,EAAA/sB,EAAG,EAAAsG,EAAG,MAAAyB,EAAO,OAAA0H,CAAQ,EAC7B,OAAQlR,EACR,YAAaA,EAAE,YACf,WAAYkJ,EACZ,YAAAu8B,EACA,UAAAmC,EACA,gBAAAR,EACA,cAAAxF,EACA,YAAY+H,GAAA,YAAAA,EAAc,aAAc,CAAE,EAAG,EAAG,EAAG,EAAG,OAAQ,EAAG,MAAO,CAAG,CACvF,EAAW,IAAMD,GAAgBrc,EAAK5rB,EAAGsG,EAAGyB,EAAO0H,EAAQlR,EAAGkJ,EAAUslB,EAAOoZ,EAAW3xB,EAAMC,EAAMuvB,EAAa7D,EAAe8E,EAAWtW,EAAOuZ,CAAY,CAAC,EAGzJD,GAAgBrc,EAAK5rB,EAAGsG,EAAGyB,EAAO0H,EAAQlR,EAAGkJ,EAAUslB,EAAOoZ,EAAW3xB,EAAMC,EAAMuvB,EAAa7D,EAAe8E,EAAWtW,EAAOuZ,CAAY,CAEvJ,CC7WO,SAASY,GAAWld,EAAKtB,EAAkBoR,EAAY3zB,EAAO0H,EAAQub,EAAmBT,EAAYQ,EAAYD,EAAanB,EAAME,EAAckf,EAAaC,EAAcpJ,EAAchW,EAAoByQ,EAAcL,EAAa+F,EAAQhT,EAAO,CAC5P,GAAIgT,IAAW,QACXzV,EAAiBA,EAAiB,OAAS,CAAC,IAAMoR,EAAWpR,EAAiB,OAAS,CAAC,EACxF,OACJ,MAAM2W,EAAYlH,GAAaC,CAAW,EAC1CU,GAAYpQ,EAAkBQ,EAAaP,EAAYQ,EAAYC,EAAmB,CAACzsB,EAAGs8B,EAAOwG,EAAUzG,EAAOR,IAAa,CAC3H,GAAI77B,IAAM+rB,EAAiBA,EAAiB,OAAS,CAAC,EAClD,OACJuQ,GAASt8B,EAAE,MACX,MAAMyB,EAAI,KAAK,IAAI66B,EAAOD,CAAK,EAC3B56B,EAAI+H,IAER6jB,EAAI,KAAI,EACRA,EAAI,UAAS,EACbA,EAAI,KAAK5rB,EAAGgrB,EAAoB,EAAG,IAAOvb,EAASub,EAAoB,CAAC,EACxEY,EAAI,KAAI,EACRuO,GAAcC,EAAUiH,EAAU5xB,EAAQka,EAAME,EAAcD,EAAoByQ,EAAc4G,EAAW,CAACxS,EAAOhU,EAAKyQ,EAAI6W,IAAa,CACrI,GAAI,CAACA,GACD/H,EAAY,OAAS,GACrB,CAACA,EAAY,KAAKE,IAAM0C,GAAc/B,EAAOpM,EAAO,IAAOvD,EAAIgP,GAAG,EAAGA,GAAG,EAAGA,GAAG,MAAOA,GAAG,MAAM,CAAC,EAC/F,OAEJ,MAAM+H,EAAc+G,EAAa,SAASvuB,CAAG,EACvCynB,GAActC,EAAa,SAASnlB,CAAG,EAC7CmR,EAAI,UAAS,EACb,MAAM6W,EAAWsG,GAAA,YAAAA,EAActuB,GACzBwuB,GAAaxG,IAAa,OAAY1V,EAAQqF,GAAqBrF,EAAO0V,CAAQ,EACpFwG,GAAW,SAAWlc,EAAM,SAC5BnB,EAAI,UAAYqd,GAAW,OAC3Brd,EAAI,SAASiP,EAAOpM,EAAO,IAAOvD,CAAE,GAEpCgX,KACAtW,EAAI,UAAYqd,GAAW,SAC3Brd,EAAI,SAASiP,EAAOpM,EAAO,IAAOvD,CAAE,GAEpC+W,IACArW,EAAI,UAAYqd,GAAW,YAC3Brd,EAAI,SAASiP,EAAOpM,EAAO,IAAOvD,CAAE,EAEpD,CAAS,EACDU,EAAI,QAAO,EACnB,CAAK,CACL,CACO,SAASsd,GAAyBtd,EAAK+O,EAAe5yB,EAAO0H,EAAQma,EAAoBD,EAAMob,EAAgBlb,EAAckD,EAAO,CACvI,IAAIoc,EAAmB,GACvB,UAAW5qC,KAAKo8B,EACZ,GAAI,CAAAp8B,EAAE,OAEN,CAAA4qC,EAAmBpE,EAAexmC,EAAE,WAAW,EAC/C,MAEJ,MAAM6qC,EAASrc,EAAM,uBAAyBA,EAAM,YAC9Csc,EAAStc,EAAM,YACf8N,EAAQsO,EAAmB3f,GAAemR,CAAa,EAAI,EACjE,IAAI2O,EASJ,GARIzO,IAAU,IACVyO,EAAUljB,GAAWijB,EAAQtc,EAAM,MAAM,EACzCnB,EAAI,UAAS,EACbA,EAAI,OAAOiP,EAAQ,GAAK,CAAC,EACzBjP,EAAI,OAAOiP,EAAQ,GAAKprB,CAAM,EAC9Bmc,EAAI,YAAc0d,EAClB1d,EAAI,OAAM,GAEVhC,EAAqB,EAAG,CACxB,MAAM2f,EAAUF,IAAWD,GAAUE,IAAY,OAAYA,EAAUljB,GAAWgjB,EAAQrc,EAAM,MAAM,EAChG1F,EAAIqC,GAAwBC,EAAMC,EAAoBC,CAAY,EACxE+B,EAAI,UAAS,EACbA,EAAI,OAAO,EAAGnc,EAAS4X,EAAI,EAAG,EAC9BuE,EAAI,OAAO7jB,EAAO0H,EAAS4X,EAAI,EAAG,EAClCuE,EAAI,YAAc2d,EAClB3d,EAAI,OAAM,CACb,CACL,CACA,MAAM4d,GAAc,CAACxP,EAAajyB,EAAO0H,IAAW,CAChD,IAAIg6B,EAAO,EACPC,EAAO3hC,EACP4hC,EAAO,EACPC,EAAOn6B,EACX,GAAIuqB,IAAgB,QAAaA,EAAY,OAAS,EAAG,CACrDyP,EAAO,OAAO,iBACdE,EAAO,OAAO,iBACdD,EAAO,OAAO,iBACdE,EAAO,OAAO,iBACd,UAAW3jB,KAAK+T,EACZyP,EAAO,KAAK,IAAIA,EAAMxjB,EAAE,EAAI,CAAC,EAC7ByjB,EAAO,KAAK,IAAIA,EAAMzjB,EAAE,EAAIA,EAAE,MAAQ,CAAC,EACvC0jB,EAAO,KAAK,IAAIA,EAAM1jB,EAAE,EAAI,CAAC,EAC7B2jB,EAAO,KAAK,IAAIA,EAAM3jB,EAAE,EAAIA,EAAE,OAAS,CAAC,CAE/C,CACD,MAAO,CAAE,KAAAwjB,EAAM,KAAAC,EAAM,KAAAC,EAAM,KAAAC,CAAI,CACnC,EACO,SAASC,GAAmBje,EAAK+O,EAAe7P,EAAaP,EAAYQ,EAAYhjB,EAAO0H,EAAQuqB,EAAahP,EAAmBnB,EAAc8V,EAAqBoF,EAAgBnb,EAAoBD,EAAMoD,EAAO,OAC3N,MAAM+V,EAAS/V,EAAM,OACf,CAAE,KAAA0c,EAAM,KAAAC,EAAM,KAAAC,EAAM,KAAAC,GAASJ,GAAYxP,EAAajyB,EAAO0H,CAAM,EACnEmxB,EAAS,GACTkJ,EAAUr6B,EAASia,GAAwBC,EAAMC,EAAoBC,CAAY,EAEvF,IAAIvjB,EAAI0kB,EACJvQ,EAAMqQ,EACNif,EAAkB,EACtB,KAAOzjC,EAAIykB,EAAa+e,GAAS,CAC7B,MAAM1e,EAAK9kB,EAAIykB,EACTG,EAAKrB,EAAapP,CAAG,EAC3B,GAAI2Q,GAAMue,GAAQve,GAAMwe,EAAO,EAAG,CAC9B,MAAMnH,GAAW9C,GAAA,YAAAA,EAAsBllB,GACjCuvB,EAAiBvH,IAAA,YAAAA,GAAU,OAChBuH,IAAmB,QAAaA,IAAmBlH,GAAUroB,GAAOkP,EAAOC,GAExFgX,EAAO,KAAK,CACR,EAAG6I,EACH,EAAGre,EACH,EAAGse,EAAOD,EACV,EAAGve,EACH,MAAO8e,CAC3B,CAAiB,CAER,CACD1jC,GAAK4kB,EACDzQ,EAAMkP,EAAOC,IACbmgB,EAAkBzjC,GACtBmU,GACH,CAED,IAAIza,EAAI,EACR,MAAMqnB,EAAI,KAAK,IAAIyiB,EAASF,CAAI,EAAIG,EACpC,GAAI1iB,EAAI,EACJ,QAAS5mB,EAAQ,EAAGA,EAAQk6B,EAAc,OAAQl6B,IAAS,CACvD,MAAMlC,EAAIo8B,EAAcl6B,CAAK,EAC7B,GAAIlC,EAAE,QAAU,EACZ,SACJ,MAAMyrB,GAAKzrB,EAAE,OAASyB,EAAIA,EAAIuqB,EACxB0f,GAAiB/1B,EAAA3V,EAAE,gBAAF,YAAA2V,EAAiB,OACpC+1B,IAAmB,QACnBA,IAAmBnH,GACnB9Y,IAAMyf,GACNzf,IAAM0f,GACN3E,EAAetkC,EAAQ,CAAC,GACxBmgC,EAAO,KAAK,CACR,EAAG5W,GACH,EAAG+f,EACH,EAAGxrC,EAAE,MACL,EAAA8oB,EACA,MAAO4iB,CAC3B,CAAiB,EAELjqC,GAAKzB,EAAE,KACV,CAEL,GAAIqiC,EAAO,SAAW,EAClB,OACJ,IAAIjb,EACJiG,EAAI,UAAS,EAGb,QAASvrB,EAAIugC,EAAO,OAAS,EAAGvgC,GAAK,EAAGA,IAAK,CACzC,MAAM4lB,EAAI2a,EAAOvgC,CAAC,EACdslB,IAAU,OACVA,EAAQM,EAAE,MAELA,EAAE,QAAUN,IACjBiG,EAAI,UAAYjG,EAChBiG,EAAI,KAAI,EACRA,EAAI,UAAS,EACbjG,EAAQM,EAAE,OAEd2F,EAAI,KAAK3F,EAAE,EAAGA,EAAE,EAAGA,EAAE,EAAGA,EAAE,CAAC,CAC9B,CACGN,IAAU,SACViG,EAAI,UAAYjG,EAChBiG,EAAI,KAAI,GAEZA,EAAI,UAAS,CACjB,CAEO,SAASse,GAActe,EAAK+O,EAAe7P,EAAaP,EAAYQ,EAAYhjB,EAAO0H,EAAQuqB,EAAamQ,EAAOvf,EAAmBI,EAAmBnB,EAAc8V,EAAqBoF,EAAgBnb,EAAoBD,EAAMoD,EAAOqd,EAAe,GAAO,CACtQ,GAAID,IAAU,OAAW,CACrBve,EAAI,UAAS,EACbA,EAAI,KAAI,EACRA,EAAI,KAAK,EAAG,EAAG7jB,EAAO0H,CAAM,EAC5B,UAAW2rB,KAAQ+O,EACfve,EAAI,KAAKwP,EAAK,EAAI,EAAGA,EAAK,EAAI,EAAGA,EAAK,MAAQ,EAAGA,EAAK,OAAS,CAAC,EAEpExP,EAAI,KAAK,SAAS,CACrB,CACD,MAAMwd,EAASrc,EAAM,uBAAyBA,EAAM,YAC9Csc,EAAStc,EAAM,YACf,CAAE,KAAA0c,EAAM,KAAAC,EAAM,KAAAC,EAAM,KAAAC,GAASJ,GAAYxP,EAAajyB,EAAO0H,CAAM,EACnEmxB,EAAS,GACfhV,EAAI,UAAS,EAEb,IAAI5rB,EAAI,GACR,QAASS,EAAQ,EAAGA,EAAQk6B,EAAc,OAAQl6B,IAAS,CACvD,MAAMlC,EAAIo8B,EAAcl6B,CAAK,EAC7B,GAAIlC,EAAE,QAAU,EACZ,SACJyB,GAAKzB,EAAE,MACP,MAAMyrB,EAAKzrB,EAAE,OAASyB,EAAIA,EAAIuqB,EAC1BP,GAAMyf,GAAQzf,GAAM0f,GAAQ3E,EAAetkC,EAAQ,CAAC,GACpDmgC,EAAO,KAAK,CACR,GAAI5W,EACJ,GAAI,KAAK,IAAIY,EAAmB+e,CAAI,EACpC,GAAI3f,EACJ,GAAI,KAAK,IAAIva,EAAQm6B,CAAI,EACzB,MAAOP,CACvB,CAAa,CAER,CACD,IAAIS,EAAUr6B,EAAS,GACvB,QAASpP,EAAIspB,EAAOC,EAAoBvpB,EAAIspB,EAAMtpB,IAAK,CACnD,MAAM6qB,EAAKrB,EAAaxpB,CAAC,EACzBypC,GAAW5e,EACX0V,EAAO,KAAK,CAAE,GAAI6I,EAAM,GAAIK,EAAS,GAAIJ,EAAM,GAAII,EAAS,MAAOV,CAAQ,EAC9E,CACD,GAAIgB,IAAiB,GAAM,CAEvB,IAAI9jC,EAAI0kB,EAAoB,GACxBvQ,EAAMqQ,EACV,MAAM3mB,EAAS2lC,EACf,KAAOxjC,EAAIykB,EAAa5mB,GAAQ,CAC5B,MAAMinB,GAAK9kB,EAAIykB,EACf,GAAIK,IAAMue,GAAQve,IAAMwe,EAAO,EAAG,CAC9B,MAAMnH,EAAW9C,GAAA,YAAAA,EAAsBllB,GACvCmmB,EAAO,KAAK,CACR,GAAI6I,EACJ,GAAIre,GACJ,GAAIse,EACJ,GAAIte,GACJ,OAAOqX,GAAA,YAAAA,EAAU,yBAAyBA,GAAA,YAAAA,EAAU,cAAe2G,CACvF,CAAiB,CACJ,CACD9iC,GAAKujB,EAAapP,CAAG,EACrBA,GACH,CACJ,CACD,MAAM4vB,EAASC,GAAQ1J,EAAQ9jB,GAAQA,EAAK,KAAK,EACjD,UAAWoJ,KAAK,OAAO,KAAKmkB,CAAM,EAAG,CACjCze,EAAI,YAAc1F,EAClB,UAAWpJ,KAAQutB,EAAOnkB,CAAC,EACvB0F,EAAI,OAAO9O,EAAK,GAAIA,EAAK,EAAE,EAC3B8O,EAAI,OAAO9O,EAAK,GAAIA,EAAK,EAAE,EAE/B8O,EAAI,OAAM,EACVA,EAAI,UAAS,CAChB,CACGue,IAAU,QACVve,EAAI,QAAO,CAEnB,CC7PO,SAAS2e,GAAc3e,EAAK4e,EAAYC,EAAkBC,EAAcC,EAAM5gB,EAAae,EAAaP,EAAYQ,EAAYnB,EAAoB7hB,EAAO0H,EAAQka,EAAMqB,EAAmB4f,EAAKla,EAAeiK,EAAe9Q,EAAcghB,EAAc,CAC9P,MAAM7Q,EAAc,GACpBpO,EAAI,sBAAwB,GAC5B,MAAM+d,EAAO,KAAK,IAAIgB,EAAK,YAAa7f,CAAW,EAC7C8e,EAAO,KAAK,IAAIe,EAAK,YAAa7f,CAAW,EACnD,IAAIrkB,EAAS,EACb,GAAI,OAAOojB,GAAiB,SACxBpjB,IAAWmjC,EAAOD,GAAQ9f,MAG1B,SAASxpB,EAAIspC,EAAMtpC,EAAIupC,EAAMvpC,IACzBoG,GAAUojB,EAAaxpB,CAAC,EAG5ByqB,EAAc6f,EAAK,cACnBlkC,EAAS,CAACA,GAEdA,GAAUskB,EAAa4f,EAAK,WAC5B,MAAMlB,EAAO,KAAK,IAAIkB,EAAK,YAAa5gB,CAAW,EAC7C2f,EAAO,KAAK,IAAIiB,EAAK,YAAa5gB,CAAW,EACnD,IAAIvjB,EAAS,EACb,QAASnG,EAAIopC,EAAMppC,EAAIqpC,EAAMrpC,IACzBmG,GAAUkqB,EAAcrwB,CAAC,EAAE,MAE3B0pB,EAAc4gB,EAAK,cACnBnkC,EAAS,CAACA,GAEdA,GAAU+jB,EAAaogB,EAAK,WAC5B,MAAMG,EAActhB,GAAemR,CAAa,EAChD,GAAIn0B,IAAW,GAAKC,IAAW,EAC3B,MAAO,CACH,QAAS,CAAE,CACvB,EAEI,MAAMs6B,EAA2BnX,EAAqB,EAAIF,GAAwBC,EAAMC,EAAoBC,CAAY,EAAI,EACtHkhB,EAAYhjC,EAAQ+iC,EAAc,KAAK,IAAItkC,CAAM,EACjDwkC,EAAav7B,EAASub,EAAoB+V,EAA2B,KAAK,IAAIt6B,CAAM,EAAI,EAC9F,GAAIskC,EAAY,KAAOC,EAAa,IAAK,CACrC,MAAM9kC,EAAO,CACT,GAAI,EACJ,GAAI,EACJ,GAAI6B,EAAQ6iC,EACZ,GAAIn7B,EAASm7B,EACb,GAAI,EACJ,GAAI,EACJ,GAAI7iC,EAAQ6iC,EACZ,GAAIn7B,EAASm7B,CACzB,EAwDQ,GAtDInkC,EAAS,GAETP,EAAK,IAAM8kB,EAAoB,GAAK4f,EACpC1kC,EAAK,GAAK8kC,EAAaJ,EACvB1kC,EAAK,IAAMO,EAASukB,EAAoB,GAAK4f,EAC7C1kC,EAAK,GAAK8kC,EAAaJ,EACvB5Q,EAAY,KAAK,CACb,EAAG,EACH,EAAGhP,EACH,MAAOjjB,EACP,OAAQtB,EAAS,CACjC,CAAa,GAEIA,EAAS,IAEdP,EAAK,IAAM,CAACO,EAASukB,EAAoB,GAAK4f,EAC9C1kC,EAAK,GAAK8kC,EAAaJ,EACvB1kC,EAAK,IAAM8kB,EAAoB,GAAK4f,EACpC1kC,EAAK,GAAK8kC,EAAaJ,EACvB5Q,EAAY,KAAK,CACb,EAAG,EACH,EAAGvqB,EAAShJ,EAASs6B,EACrB,MAAOh5B,EACP,OAAQ,CAACtB,EAASs6B,CAClC,CAAa,GAGDv6B,EAAS,GAETN,EAAK,GAAK4kC,EAAcF,EACxB1kC,EAAK,GAAK6kC,EAAYH,EACtB1kC,EAAK,IAAMM,EAASskC,GAAeF,EACnC1kC,EAAK,GAAK6kC,EAAYH,EACtB5Q,EAAY,KAAK,CACb,EAAG8Q,EAAc,EACjB,EAAG,EACH,MAAOtkC,EAAS,EAChB,OAAQiJ,CACxB,CAAa,GAEIjJ,EAAS,IAEdN,EAAK,IAAM4kC,EAActkC,GAAUokC,EACnC1kC,EAAK,GAAK6kC,EAAYH,EACtB1kC,EAAK,GAAK4kC,EAAcF,EACxB1kC,EAAK,GAAK6kC,EAAYH,EACtB5Q,EAAY,KAAK,CACb,EAAGjyB,EAAQvB,EACX,EAAG,EACH,MAAO,CAACA,EACR,OAAQiJ,CACxB,CAAa,GAELmc,EAAI,aAAa,EAAG,EAAG,EAAG,EAAG,EAAG,CAAC,EAC7Bif,EAAc,CACd,GAAIC,EAAc,GACdtkC,IAAW,GACXC,IAAW,IACVikC,IAAiB,SAAaD,GAAA,YAAAA,EAAmB,MAAO,IAAQ,CAGjE,MAAMxjB,GAAI6jB,EAAcF,EAClBvjB,EAAI5X,EAASm7B,EACnBhf,EAAI,UAAU4e,EAAY,EAAG,EAAGvjB,GAAGI,EAAG,EAAG,EAAGJ,GAAGI,CAAC,CACnD,CACD,GAAI0Z,EAA2B,GAC3Bv6B,IAAW,GACXC,IAAW,IACVikC,IAAiB,SAAaD,GAAA,YAAAA,EAAmB,MAAO,IAAQ,CACjE,MAAMnkC,IAAKmJ,EAASsxB,GAA4B6J,EAC1C3jB,EAAIlf,EAAQ6iC,EACZvjB,GAAI0Z,EAA2B6J,EACrChf,EAAI,UAAU4e,EAAY,EAAGlkC,GAAG2gB,EAAGI,GAAG,EAAG/gB,GAAG2gB,EAAGI,EAAC,CACnD,CACJ,CACDuE,EAAI,UAAU4e,EAAYtkC,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,EAAE,EAChG0lB,EAAI,MAAMgf,EAAKA,CAAG,CACrB,CACD,OAAAhf,EAAI,sBAAwB,GACrB,CACH,QAASoO,CACjB,CACA,CACO,SAASiR,GAAeN,EAAM5gB,EAAae,EAAaP,EAAYQ,EAAYhjB,EAAO0H,EAAQub,EAAmB2P,EAAeuQ,EAAc,CAClJ,MAAMlR,EAAc,GAEpB,OAAIjQ,IAAgB4gB,EAAK,aACrB7f,IAAgB6f,EAAK,aACrBpgB,IAAeogB,EAAK,YACpB5f,IAAe4f,EAAK,YAGxBjQ,GAAYC,EAAe7P,EAAaP,EAAYQ,EAAYC,EAAmB,CAACzsB,EAAGs8B,EAAOsQ,EAAQvQ,IAAU,CAC5G,GAAIr8B,EAAE,cAAgB2sC,EAAc,CAChC,MAAMlrC,EAAI,KAAK,IAAI66B,EAAOD,CAAK,EAAI,EACnC,OAAAZ,EAAY,KAAK,CACb,EAAAh6B,EACA,EAAG,EACH,MAAO+H,EAAQ/H,EACf,OAAAyP,CAChB,CAAa,EACM,EACV,CACT,CAAK,EACMuqB,CACX,CACO,SAASoR,GAAex+B,EAAS+9B,EAAM,CAG1C,GAFIA,IAAS,QAET/9B,EAAQ,QAAU+9B,EAAK,OACvB/9B,EAAQ,SAAW+9B,EAAK,QACxB/9B,EAAQ,QAAU+9B,EAAK,OACvB/9B,EAAQ,eAAiB+9B,EAAK,cAC9B/9B,EAAQ,YAAc+9B,EAAK,WAC3B/9B,EAAQ,OAAS+9B,EAAK,MACtB/9B,EAAQ,gBAAkB+9B,EAAK,eAC/B/9B,EAAQ,sBAAwB+9B,EAAK,qBACrC/9B,EAAQ,YAAc+9B,EAAK,WAC3B/9B,EAAQ,aAAe+9B,EAAK,YAC5B/9B,EAAQ,iBAAmB+9B,EAAK,gBAChC/9B,EAAQ,iBAAmB+9B,EAAK,gBAChC/9B,EAAQ,mBAAqB+9B,EAAK,kBAClC/9B,EAAQ,YAAc+9B,EAAK,WAC3B/9B,EAAQ,mBAAqB+9B,EAAK,kBAClC/9B,EAAQ,gBAAkB+9B,EAAK,eAC/B/9B,EAAQ,YAAc+9B,EAAK,WAC3B/9B,EAAQ,iBAAmB+9B,EAAK,eAChC,MAAO,GAEX,GAAI/9B,EAAQ,gBAAkB+9B,EAAK,cAAe,CAC9C,GAAI/9B,EAAQ,cAAc,OAAS,KAAOA,EAAQ,cAAc,SAAW+9B,EAAK,cAAc,OAG1F,MAAO,GAIX,IAAIU,EACJ,QAAS,EAAI,EAAG,EAAIz+B,EAAQ,cAAc,OAAQ,IAAK,CACnD,MAAM0+B,EAAS1+B,EAAQ,cAAc,CAAC,EAChC2+B,EAAUZ,EAAK,cAAc,CAAC,EACpC,GAAI1tC,GAAUquC,EAAQC,CAAO,EACzB,SAIJ,GAFIF,IAAY,QAEZC,EAAO,QAAUC,EAAQ,MACzB,MAAO,GACX,KAAM,CAAE,MAAAxjC,EAAO,GAAGyjC,CAAO,EAAKF,EACxB,CAAE,MAAOG,EAAW,GAAGC,CAAQ,EAAKH,EAE1C,GAAI,CAACtuC,GAAUuuC,EAASE,CAAQ,EAC5B,MAAO,GACXL,EAAU,CACb,CACD,OAAIA,IAAY,OAEL,GAEJA,CACV,CACD,MAAO,EACX,CChNO,SAASM,GAAmB/f,EAAK7jB,EAAO0H,EAAQsa,EAAae,EAAaP,EAAYQ,EAAY2F,EAAe9I,EAAe+C,EAAcC,EAAmBC,EAAWjB,EAAoBD,EAAMiiB,EAAqB7e,EAAO,CACrO,MAAMkT,EAAmB2L,GAAA,YAAAA,EAAqB,OAAO5rC,GAAKA,EAAE,QAAU,cACtE,GAAIigC,IAAqB,QAAaA,EAAiB,SAAW,EAC9D,OACJ,MAAM4L,EAAariB,GAAekH,CAAa,EACzCob,EAAepiB,GAAwBC,EAAMC,EAAoBiB,CAAS,EAC1EoT,EAAgB,CAACrW,EAAe,EAAG8I,EAAc,OAAQ/G,EAAOC,CAAkB,EAClFsU,EAAiB,CAAC2N,EAAY,EAAG9jC,EAAO0H,EAASq8B,CAAY,EAC7DC,EAAY9L,EAAiB,IAAI5Y,GAAK,CACxC,MAAMpB,EAAIoB,EAAE,MACNtkB,EAAQskB,EAAE,OAAS,SACzB,OAAO2W,GAAqB/X,EAAGgY,EAAel2B,EAAO0H,EAAQyuB,CAAc,EAAE,IAAI98B,GAAO,CACpF,MAAMknB,EAAOlnB,EAAI,KACX4qC,EAAgBvb,GAAcnI,EAAK,EAAGA,EAAK,EAAGvgB,EAAO0H,EAAQmb,EAAmBD,EAAeC,EAAmBb,EAAae,EAAaP,EAAYQ,EAAYpB,EAAM/B,EAAegC,EAAoB8G,EAAe7F,CAAS,EACrOohB,EAAoB3jB,EAAK,QAAU,GAAKA,EAAK,SAAW,EACxD0jB,EACAvb,GAAcnI,EAAK,EAAIA,EAAK,MAAQ,EAAGA,EAAK,EAAIA,EAAK,OAAS,EAAGvgB,EAAO0H,EAAQmb,EAAmBD,EAAeC,EAAmBb,EAAae,EAAaP,EAAYQ,EAAYpB,EAAM/B,EAAegC,EAAoB8G,EAAe7F,CAAS,EAC9P,OAAIvC,EAAK,EAAIA,EAAK,OAASoI,EAAc,SACrCub,EAAkB,OAAS,GAE3B3jB,EAAK,EAAIA,EAAK,QAAUqB,IACxBsiB,EAAkB,QAAU,GAEzB,CACH,MAAO5kB,EAAE,MACT,MAAAtkB,EACA,KAAM3B,EAAI,KACV,KAAMi8B,GAAgB,CAClB,EAAG2O,EAAc,EACjB,EAAGA,EAAc,EACjB,MAAOC,EAAkB,EAAIA,EAAkB,MAAQD,EAAc,EACrE,OAAQC,EAAkB,EAAIA,EAAkB,OAASD,EAAc,CAC3F,EAAmBjkC,EAAO0H,EAAQ,CAAC,CACnC,CACA,CAAS,CACT,CAAK,EACKy8B,EAAS,IAAM,CACjBtgB,EAAI,UAAY,EAChB,IAAIugB,EAAS,GACb,UAAWjS,KAAM6R,EACb,UAAW70B,KAAKgjB,EACZ,IAAIhjB,GAAA,YAAAA,EAAG,QAAS,QACZ0lB,GAAc,EAAG,EAAG70B,EAAO0H,EAAQyH,EAAE,KAAK,EAAGA,EAAE,KAAK,EAAGA,EAAE,KAAK,MAAOA,EAAE,KAAK,MAAM,EAAG,CACrF,MAAMk1B,EAAYD,EACZE,EAAY,CAACjP,GAAalmB,EAAE,KAAMA,EAAE,IAAI,EAC1Cm1B,IACAzgB,EAAI,KAAI,EACRA,EAAI,KAAK1U,EAAE,KAAK,EAAGA,EAAE,KAAK,EAAGA,EAAE,KAAK,MAAOA,EAAE,KAAK,MAAM,EACxD0U,EAAI,KAAI,GAER1U,EAAE,QAAU,UAAY,CAACi1B,GACzBvgB,EAAI,YAAY,CAAC,EAAG,CAAC,CAAC,EACtBugB,EAAS,KAEHj1B,EAAE,QAAU,SAAWA,EAAE,QAAU,kBAAoBi1B,IAC7DvgB,EAAI,YAAY,EAAE,EAClBugB,EAAS,IAEbvgB,EAAI,YACA1U,EAAE,QAAU,gBACNqP,GAAMA,GAAMrP,EAAE,MAAO6V,EAAM,WAAW,EAAGA,EAAM,MAAM,EACrDhH,GAAU7O,EAAE,MAAO,CAAC,EAC9B0U,EAAI,WAAW1U,EAAE,KAAK,EAAI,GAAKA,EAAE,KAAK,EAAI,GAAKA,EAAE,KAAK,MAAQ,EAAGA,EAAE,KAAK,OAAS,CAAC,EAC9Em1B,IACAzgB,EAAI,QAAO,EACXugB,EAASC,EAEhB,CAGLD,GACAvgB,EAAI,YAAY,EAAE,CAE9B,EACI,OAAAsgB,IACOA,CACX,CACO,SAASI,GAAwB1gB,EAAK2gB,EAAS1G,EAASp2B,EAAQ1M,EAAO,CAC1E6oB,EAAI,UAAS,EACbA,EAAI,OAAO2gB,EAAS1G,CAAO,EAC3Bja,EAAI,OAAO2gB,EAAS98B,CAAM,EAC1Bmc,EAAI,UAAY,EAChBA,EAAI,YAAc7oB,EAClB6oB,EAAI,OAAM,EACVA,EAAI,YAAc,CACtB,CACO,SAAS4gB,GAAe5gB,EAAK7jB,EAAO0H,EAAQqb,EAAaP,EAAYQ,EAAY4P,EAAee,EAAY3O,EAAO/B,EAAmByhB,EAAc5iB,EAAc4V,EAAgB7V,EAAoByQ,EAAcqS,EAAY/iB,EAAM,CACzO,GAAI8iB,EAAa,UAAY,OACzB,OACJ,MAAMjtC,EAAQitC,EAAa,QAAQ,MAC7BE,EAAcF,EAAa,QAAQ,KACnCG,EAAmB,CAACptC,EAAM,EAAIA,EAAM,MAAQ,EAAGA,EAAM,EAAIA,EAAM,OAAS,CAAC,EAK/E,GAHImtC,EAAY,CAAC,GAAKhjB,GAAQijB,EAAiB,CAAC,GAAKjjB,GAGjD,CADagR,EAAc,KAAKp8B,GAAKA,EAAE,cAAgBouC,EAAY,CAAC,GAAKpuC,EAAE,cAAgBquC,EAAiB,CAAC,CAAC,EAE9G,OACJ,KAAM,CAACC,EAAWC,CAAS,EAAIL,EAAa,QAAQ,KAC9C9tC,EAAO8gC,EAAegN,EAAa,QAAQ,IAAI,EAC/CM,EAAgBpuC,EAAK,MAAQ,CAACkuC,EAAWA,CAAS,EAClDG,EAAcF,GAAanjB,EAAOC,EAClCqjB,EAAiBrjB,EAAqB,GAAK,CAACojB,EAC5CtjB,GAAwBC,EAAMC,EAAoBC,CAAY,EAAI,EAClE,EACAqjB,EAAgBN,EAAiB,CAAC,EACxC,IAAIO,EA2CJ,GA1CAzS,GAAYC,EAAe7P,EAAaP,EAAYQ,EAAYC,EAAmB,CAACjD,EAAK8S,GAAOwG,EAAUzG,GAAOR,KAAa,CAE1H,GAAIrS,EAAI,QAAU8kB,EAAY9kB,EAAI,YAC9B,OACJ,MAAMqlB,GAAiBrlB,EAAI,YAAcglB,EAAc,CAAC,EAClDM,GAAgBtlB,EAAI,YAAcglB,EAAc,CAAC,EACjDO,EAAkBvlB,EAAI,cAAgB6kB,EAAiB,CAAC,EAC9D,GAAI,GAACU,IAAoBF,IAAkBC,KAI3C,OAAAlT,GAAcC,GAAUiH,EAAU5xB,EAAQka,EAAME,EAAcD,EAAoByQ,EAAc,OAAW,CAAC5L,GAAOhU,GAAKyQ,KAAO,CAC3H,GAAIzQ,KAAQqyB,GAAaryB,KAAQyyB,EAC7B,OACJ,IAAI7R,GAAQR,GACRsH,EAAYpa,EAAI,MACpB,GAAIppB,EAAK,OAAS,OAAW,CACzB,MAAM4jC,EAAQpH,GAAcx8B,EAAK,KAAMk8B,GAAOpM,GAAO1G,EAAI,MAAOmD,GAAInD,EAAK2T,CAAU,EAC7E8G,EAAOza,EAAI,OAASwa,EAAM,CAAC,EAAIA,EAAM,CAAC,EACxCC,IAAS,SACTnH,GAAQmH,EAAK,EACbL,EAAYK,EAAK,MAExB,CAED,OADiB/nB,KAAQyyB,GAAiBI,GAAmBZ,IAEzDS,EAAe,IAAM,OACbvS,GAAQS,IAAS,CAACtT,EAAI,SACtB6D,EAAI,UAAS,EACbA,EAAI,KAAKgP,GAAO,EAAG7yB,EAAQ6yB,GAAOnrB,CAAM,EACxCmc,EAAI,KAAI,GAEZA,EAAI,UAAS,EACbA,EAAI,KAAKyP,GAAQ8G,EAAY,EAAG1T,GAAQvD,GAAK,EAAG,EAAG,CAAC,EACpDU,EAAI,YAAY1X,EAAA6T,EAAI,gBAAJ,YAAA7T,EAAmB,cAAe6Y,EAAM,YACxDnB,EAAI,KAAI,CAC5B,GAEmBuhB,IAAiB,MACpC,CAAS,EACMA,IAAiB,MAChC,CAAK,EACGA,IAAiB,OACjB,OACJ,MAAMrsC,EAAS,IAAM,CACjB8qB,EAAI,KAAI,EACRA,EAAI,UAAS,EACbA,EAAI,KAAK,EAAGZ,EAAmBjjB,EAAO0H,EAASub,EAAoBiiB,CAAc,EACjFrhB,EAAI,KAAI,EACRuhB,GAAA,MAAAA,IACAvhB,EAAI,QAAO,CACnB,EACI,OAAA9qB,IACOA,CACX,CCnJA,SAASysC,GAAiB3hB,EAAKtB,EAAkBviB,EAAO6iB,EAAmBI,EAAmBT,EAAYQ,EAAYD,EAAaiV,EAAQ,CACnIA,IAAW,QAAaA,EAAO,OAAS,IAE5CnU,EAAI,UAAS,EACbkP,GAAWxQ,EAAkBviB,EAAOwiB,EAAYK,EAAmB,CAACwQ,EAAMoS,EAAQxtC,EAAGsG,EAAG2gB,EAAGI,IAAM,CACvE0Y,EAAO,mBAAmB,CAC5C,EAAG3E,EAAK,CAAC,EACT,EAAG,GACH,MAAOA,EAAK,CAAC,EAAIA,EAAK,CAAC,EAAI,EAC3B,OAAQ,CACpB,CAAS,GAEGxP,EAAI,KAAK5rB,EAAGsG,EAAG2gB,EAAGI,CAAC,CAE/B,CAAK,EACDqT,GAAYpQ,EAAkBQ,EAAaP,EAAYQ,EAAYC,EAAmB,CAACzsB,EAAGs8B,EAAO4S,EAAW7S,IAAU,CAClH,MAAMuG,EAAO,KAAK,IAAI,EAAGvG,EAAQC,CAAK,EAChCoL,EAASpL,EAAQsG,EAAO,EACxBuM,EAAanvC,EAAE,MAAQ4iC,EAAO,EAChCpB,EAAO,IAAI,CAACxhC,EAAE,YAAa,EAAE,CAAC,GAC9BqtB,EAAI,KAAKqa,EAAQrb,EAAmB8iB,EAAY1iB,EAAoBJ,CAAiB,CAEjG,CAAK,EACDgB,EAAI,KAAI,EACZ,CACA,SAAS+hB,GAAWrjB,EAAkB7a,EAAQub,EAAmBT,EAAYQ,EAAYD,EAAanB,EAAME,EAAcD,EAAoByQ,EAAc,CACxJ,IAAIv5B,EAAS,EACb,OAAA45B,GAAYpQ,EAAkBQ,EAAaP,EAAYQ,EAAYC,EAAmB,CAACwY,EAAIoK,EAASvM,EAAUwM,EAAQzT,KAClHD,GAAcC,EAAUiH,EAAU5xB,EAAQka,EAAME,EAAcD,EAAoByQ,EAAc,OAAW,CAAC8Q,EAAQ1wB,EAAKqzB,EAAK/L,IAAa,CAClIA,IACDjhC,EAAS,KAAK,IAAI2Z,EAAK3Z,CAAM,EAE7C,CAAS,EACM,GACV,EACMA,CACX,CACO,SAASitC,GAAS3sC,EAAK4sC,EAAS,QACnC,KAAM,CAAE,UAAAC,EAAW,gBAAAC,EAAiB,MAAAnmC,EAAO,OAAA0H,EAAQ,YAAAsa,EAAa,YAAAe,EAAa,WAAAP,EAAY,WAAAQ,EAAY,cAAA2F,EAAe,aAAAkU,EAAc,cAAAhd,EAAe,iBAAAid,EAAkB,MAAA9X,EAAO,UAAA+S,EAAW,aAAAnV,EAAc,kBAAAC,EAAmB,aAAAgV,EAAc,UAAA/U,EAAW,eAAAka,EAAgB,eAAArE,EAAgB,WAAAoE,EAAY,UAAA7kC,EAAW,WAAAysC,EAAY,mBAAA9iB,EAAoB,KAAAD,EAAM,eAAA8V,EAAgB,gBAAAC,EAAiB,oBAAAC,EAAqB,UAAAE,EAAW,mBAAAmF,GAAoB,cAAAhF,EAAe,iBAAAM,GAAkB,iBAAAL,GAAkB,UAAAkO,GAAW,YAAAjO,GAAa,aAAAkO,EAAc,YAAAhO,GAAa,cAAAnS,GAAe,UAAAoS,GAAW,cAAAF,GAAe,eAAAkO,EAAgB,aAAAhU,EAAc,UAAA4K,EAAW,QAAAzE,EAAS,oBAAAC,GAAqB,gBAAA/N,GAAiB,eAAA4b,GAAgB,WAAAC,GAAY,WAAAC,GAAY,OAAAzO,GAAQ,iBAAAY,GAAkB,gBAAA8N,EAAe,EAAMrtC,EAC/tB,GAAI2G,IAAU,GAAK0H,IAAW,EAC1B,OACJ,MAAMo7B,GAAeyD,KAAmB,gBAClC1D,GAAM,KAAK,IAAIyD,EAAgB,KAAK,KAAK,OAAO,kBAAoB,CAAC,CAAC,EAEtEK,GAAUJ,KAAmB,UAAYlD,GAAehqC,EAAK4sC,CAAO,EACpEna,GAASoa,EAAU,QACrBpa,GAAO,QAAU9rB,EAAQ6iC,IAAO/W,GAAO,SAAWpkB,EAASm7B,MAC3D/W,GAAO,MAAQ9rB,EAAQ6iC,GACvB/W,GAAO,OAASpkB,EAASm7B,GACzB/W,GAAO,MAAM,MAAQ9rB,EAAQ,KAC7B8rB,GAAO,MAAM,OAASpkB,EAAS,MAEnC,MAAMk/B,GAAgBT,EAAgB,OAChCljB,GAAoB4Z,EAAeha,EAAoBD,EAAeA,EACtEikB,GAAgB5jB,GAAoB,GACtC2jB,GAAc,QAAU5mC,EAAQ6iC,IAAO+D,GAAc,SAAWC,GAAgBhE,MAChF+D,GAAc,MAAQ5mC,EAAQ6iC,GAC9B+D,GAAc,OAASC,GAAgBhE,GACvC+D,GAAc,MAAM,MAAQ5mC,EAAQ,KACpC4mC,GAAc,MAAM,OAASC,GAAgB,MAEjD,MAAMC,GAAUN,GAAW,OACrBO,GAAUN,GAAW,OACvB3D,KAAiBgE,GAAQ,QAAU9mC,EAAQ6iC,IAAOiE,GAAQ,SAAWp/B,EAASm7B,MAC9EiE,GAAQ,MAAQ9mC,EAAQ6iC,GACxBiE,GAAQ,OAASp/B,EAASm7B,GACtBwD,EAAa,UAAY,SACzBA,EAAa,QAAQ,cAAgB,SAEzCvD,KAAiBiE,GAAQ,QAAU/mC,EAAQ6iC,IAAOkE,GAAQ,SAAWr/B,EAASm7B,MAC9EkE,GAAQ,MAAQ/mC,EAAQ6iC,GACxBkE,GAAQ,OAASr/B,EAASm7B,GACtBwD,EAAa,UAAY,SACzBA,EAAa,QAAQ,cAAgB,SAE7C,MAAMzD,GAAOyD,EAAa,QAC1B,GAAIM,KAAY,IACZ3kB,KAAgB4gB,IAAA,YAAAA,GAAM,cACtB7f,KAAgB6f,IAAA,YAAAA,GAAM,cACtBpgB,KAAeogB,IAAA,YAAAA,GAAM,aACrB5f,KAAe4f,IAAA,YAAAA,GAAM,YACrB,OACJ,IAAIoE,GAAU,KACVlE,KACAkE,GAAUd,GAEd,MAAMe,GAAad,EACnB,IAAIe,GACCpE,GAGI9K,KAAW,OAChBkP,IAAYtE,IAAA,YAAAA,GAAM,cAAe,IAAM6D,GAAaD,GAGpDU,IAAYtE,IAAA,YAAAA,GAAM,cAAe,IAAM4D,GAAaC,GANpDS,GAAYhB,EAQhB,MAAMiB,GAAeD,GAAU,OACzBzE,GAAaK,GAAgBqE,KAAiBL,GAAUC,GAAUD,GAAWhb,GAC7EhK,GAAe,OAAOgB,GAAc,SAAW,IAAMA,EAAYA,EACvEmkB,GAAW,KAAI,EACfC,GAAU,KAAI,EACdD,GAAW,UAAS,EACpBC,GAAU,UAAS,EACnBD,GAAW,aAAe,SAC1BC,GAAU,aAAe,SACrBrE,KAAQ,IACRoE,GAAW,MAAMpE,GAAKA,EAAG,EACzBqE,GAAU,MAAMrE,GAAKA,EAAG,GAE5B,MAAMjQ,GAAgB7Q,GAAoB4G,EAAe3G,EAAahiB,EAAO88B,EAAkBta,CAAU,EACzG,IAAIyP,GAAc,GAClB,MAAMmV,GAAwBrP,KAAa5rB,GAAAjU,EAAU,UAAV,YAAAiU,GAAmB,KAAK,MAAO4W,GAAeC,IAAe,EACxG,IAAIqkB,GAAiC,GACrC,GAAInP,KAAqB,QACrB,UAAWha,MAAKga,GACZ,GAAIha,GAAE,QAAU,cAAgBA,GAAE,MAAM,IAAM6E,GAAeC,IAAe,EAAG,CAC3EqkB,GAAiC,GACjC,KACH,EAGT,MAAMC,GAAoB,IAAM,CAC5B1K,GAAgBqK,GAAYrU,GAAeiK,EAAcvE,GAAWt4B,EAAOwiB,EAAYI,EAAcC,EAAmBia,EAAkBC,EAAY7kC,EAAW8sB,EAAOoT,GAAeC,GAAa2E,EAAgBrF,EAAiBK,GAAQiF,GAAoBC,CAAS,EAC1QiF,GAAc8E,GAAYrU,GAAe7P,EAAaP,EAAYQ,EAAYhjB,EAAO0H,EAAQ,OAAW,OAAWmb,EAAmBI,GAAmBnB,GAAc8V,EAAqBoF,EAAgBnb,EAAoBD,EAAMoD,EAAO,EAAI,EACjPiiB,GAAW,UAAS,EACpBA,GAAW,OAAO,EAAGJ,GAAgB,EAAG,EACxCI,GAAW,OAAOjnC,EAAO6mC,GAAgB,EAAG,EAC5CI,GAAW,YAAczoB,GAAMwG,EAAM,yBAA2BA,EAAM,uBAAyBA,EAAM,YAAaA,EAAM,QAAQ,EAChIiiB,GAAW,OAAM,EACbI,IACAzD,GAAmBqD,GAAYjnC,EAAO0H,EAAQsa,EAAae,EAAaP,EAAYQ,EAAY2F,EAAe9I,EAAe+C,EAAcC,EAAmBC,EAAWjB,EAAoBD,EAAMsW,GAAkBlT,CAAK,EAE3NoiB,IACA3C,GAAewC,GAAYjnC,EAAO0H,EAAQqb,EAAaP,EAAYQ,EAAY4P,GAAejK,EAAe3D,EAAO/B,GAAmB/qB,EAAW4pB,GAAc4V,EAAgB7V,EAAoByQ,EAAcqS,EAAY/iB,CAAI,CAE9O,EAEI,GAAIoW,KAAW,OAAW,CACtB,MAAMuP,GAAkB3U,GAAcA,GAAc,OAAS,CAAC,EAAE,YAAc,EACxE4U,GAAexP,GAAO,gBAAgB,CACxC,CACI,EAAGhW,EACH,EAAG,GACH,MAAOulB,GACP,OAAQ,CACX,EACD,CACI,EAAGvlB,EACH,EAAGe,EACH,MAAOwkB,GACP,OAAQ,GACX,EACD,CACI,EAAG,EACH,EAAGxkB,EACH,MAAOlD,EACP,OAAQ,GACX,EACD,CACI,EAAG,EACH,EAAG,GACH,MAAOA,EACP,OAAQ,CACX,EACD,CACI,EAAGmC,EACH,EAAGJ,EAAOC,EACV,MAAO0lB,GACP,OAAQ1lB,EACR,KAAMA,EAAqB,CAC9B,CACb,CAAS,EACK4lB,GAAY5jB,IAAQ,CACtB4T,GAAU5T,GAAK+O,GAAejK,EAAejhB,EAAQub,GAAmBT,EAAYQ,EAAYD,EAAanB,EAAME,GAAc4V,EAAgBC,EAAiBC,EAAqBC,EAAcC,EAAWC,EAAWlW,EAAoByQ,EAAcL,GAAa+F,GAAQ9/B,EAAW+/B,EAAeC,GAAkBC,GAAaC,GAAeC,GAAaC,GAAWC,GAAkBrS,GAAelB,EAAOyT,EAASC,GAAqB/N,GAAiBgO,EAAgBC,EAAgB,EACze,MAAM8O,GAAmBxvC,EAAU,QAC/BysC,GACA5M,GACA2P,KAAqB,QACrB1P,GAAO,IAAIxX,GAAgBknB,GAAiB,KAAK,CAAC,GAClDjD,GAAe5gB,GAAK7jB,EAAO0H,EAAQqb,EAAaP,EAAYQ,EAAY4P,GAAejK,EAAe3D,EAAO/B,GAAmB/qB,EAAW4pB,GAAc4V,EAAgB7V,EAAoByQ,EAAcqS,EAAY/iB,CAAI,CAE3O,EACY4lB,KACAC,GAASP,EAAS,EACdF,KAAY,OACZA,GAAQ,KAAI,EACZA,GAAQ,MAAMnE,GAAKA,EAAG,EACtBmE,GAAQ,aAAe,SACvBS,GAAST,EAAO,EAChBA,GAAQ,QAAO,GAEDhP,GAAO,cAErBwN,GAAiByB,GAAYrU,GAAe5yB,EAAO6iB,EAAmBI,GAAmBT,EAAYQ,EAAYD,EAAaiV,EAAM,EACpIsP,OAGRJ,GAAU,QAAO,EACjBD,GAAW,QAAO,EAClB,MACH,CAQD,IAPIN,KAAY,IACZ3kB,KAAgB4gB,IAAA,YAAAA,GAAM,cACtBpgB,KAAeogB,IAAA,YAAAA,GAAM,aACrBwE,MAA0BxE,IAAA,YAAAA,GAAM,wBAChCyE,MAAmCzE,IAAA,YAAAA,GAAM,kCACzC0E,KAEAX,KAAY,GAAM,CAClBlyC,GAAOguC,KAAe,QAAaG,KAAS,MAAS,EACrD,KAAM,CAAE,QAAA+E,EAAO,EAAKnF,GAAc0E,GAAWzE,GAAYA,KAAeqE,GAAUlE,GAAK,cAAgBA,GAAK,cAAeH,KAAeqE,GAAUlE,GAAK,cAAgBA,GAAK,cAAeA,GAAM5gB,EAAae,EAAaP,EAAYQ,EAAYnB,EAAoB7hB,EAAO0H,EAAQka,EAAMqB,GAAmB4f,GAAKla,EAAeiK,GAAe9P,EAAWggB,EAAY,EAC3W7Q,GAAc0V,EACjB,MACQhB,KAAY,KACjBlyC,GAAOmuC,KAAS,MAAS,EAEzB3Q,GAAciR,GAAeN,GAAM5gB,EAAae,EAAaP,EAAYQ,EAAYhjB,EAAO0H,EAAQub,GAAmB2P,GADpG+T,EAC6H,GAEpJxF,GAAyB+F,GAAWtU,GAAe5yB,EAAO0H,EAAQma,EAAoBD,EAAMob,EAAgBlb,GAAckD,CAAK,EAC/H,MAAM4iB,GAAkBhE,GAAmBsD,GAAWlnC,EAAO0H,EAAQsa,EAAae,EAAaP,EAAYQ,EAAY2F,EAAe9I,EAAe+C,EAAcC,EAAmBC,EAAWjB,EAAoBD,EAAMsW,GAAkBlT,CAAK,EAE5O6iB,GAAc9P,EACd0M,GAAeyC,GAAWlnC,EAAO0H,EAAQqb,EAAaP,EAAYQ,EAAY4P,GAAejK,EAAe3D,EAAO/B,GAAmB/qB,EAAW4pB,GAAc4V,EAAgB7V,EAAoByQ,EAAcqS,EAAY/iB,CAAI,EACjO,OAEN,GADAslB,GAAU,UAAYliB,EAAM,OACxBiN,GAAY,OAAS,EAAG,CACxBiV,GAAU,UAAS,EACnB,UAAWhpB,MAAK+T,GACZiV,GAAU,KAAKhpB,GAAE,EAAGA,GAAE,EAAGA,GAAE,MAAOA,GAAE,MAAM,EAE9CgpB,GAAU,KAAI,EACdA,GAAU,KAAI,EACdA,GAAU,UAAS,CACtB,MAEGA,GAAU,SAAS,EAAG,EAAGlnC,EAAO0H,CAAM,EAE1C,MAAM06B,GAAQ3K,GAAUyP,GAAWtU,GAAejK,EAAejhB,EAAQub,GAAmBT,EAAYQ,EAAYD,EAAanB,EAAME,GAAc4V,EAAgBC,EAAiBC,EAAqBC,EAAcC,EAAWC,EAAWlW,EAAoByQ,EAAcL,GAAa+F,GAAQ9/B,EAAW+/B,EAAeC,GAAkBC,GAAaC,GAAeC,GAAaC,GAAWC,GAAkBrS,GAAelB,EAAOyT,EAASC,GAAqB/N,GAAiBgO,EAAgBC,EAAgB,EAC7fmI,GAAWmG,GAAWtU,GAAejK,EAAe3oB,EAAO0H,EAAQub,GAAmBT,EAAYQ,EAAYD,EAAanB,EAAME,GAAc8V,EAAqB1/B,EAAU,KAAM2/B,EAAchW,EAAoByQ,EAAcL,GAAa+F,GAAQhT,CAAK,EAC9P8c,GAAmBoF,GAAWtU,GAAe7P,EAAaP,EAAYQ,EAAYhjB,EAAO0H,EAAQuqB,GAAahP,GAAmBnB,GAAc8V,EAAqBoF,EAAgBnb,EAAoBD,EAAMoD,CAAK,EACnNmd,GAAc+E,GAAWtU,GAAe7P,EAAaP,EAAYQ,EAAYhjB,EAAO0H,EAAQuqB,GAAamQ,GAAOvf,EAAmBI,GAAmBnB,GAAc8V,EAAqBoF,EAAgBnb,EAAoBD,EAAMoD,CAAK,EACxO4iB,IAAA,MAAAA,KACAC,IAAA,MAAAA,KACI9K,GAAc2J,KAAoB,QAClC/T,GAAYC,GAAe,EAAGpQ,EAAY,EAAGS,GAAmB,CAACzsB,GAAGyB,KAC5DzB,GAAE,cAAgB4vC,IAClB7B,GAAwB0C,GAAYhvC,GAAIzB,GAAE,MAAO,EAAGysB,GAAoB,EAAGzE,GAAMwG,EAAM,sBAAwBA,EAAM,YAAaA,EAAM,QAAQ,CAAC,EAC7I0hB,KAAoB,QACpBnC,GAAwB2C,GAAWjvC,GAAIzB,GAAE,MAAOysB,GAAmBvb,EAAQ8W,GAAMwG,EAAM,sBAAwBA,EAAM,YAAaA,EAAM,MAAM,CAAC,EAE5I,IAEJ,EACV,EAEDgiB,KAAY,OACZA,GAAQ,UAAYhiB,EAAM,OAC1BgiB,GAAQ,SAAS,EAAG,EAAGhnC,EAAO0H,CAAM,EACpCs/B,GAAQ,UAAUE,GAAU,OAAQ,EAAG,CAAC,GAE5C,MAAMY,GAAelC,GAAWhT,GAAelrB,EAAQub,GAAmBT,EAAYQ,EAAYD,EAAanB,EAAME,GAAcD,EAAoByQ,CAAY,EACnK6F,IAAA,MAAAA,GAAa,UAAU,CACnB,EAAGnW,EACH,EAAGe,EACH,MAAO6P,GAAc,OACrB,OAAQkV,GAAe/kB,CAC1B,EAAElD,EAAe,MAAM,KAAK,CAAE,OAAQgC,CAAkB,EAAI,CAACpZ,GAAGnQ,KAAMspB,EAAO,EAAItpB,EAAC,GACnF,MAAMyvC,GAAUnF,KAAS,SAAc5gB,IAAgB4gB,GAAK,aAAepgB,IAAeogB,GAAK,YACzFoF,GAAUpF,KAAS,SAAc7f,IAAgB6f,GAAK,aAAe5f,IAAe4f,GAAK,YAC/FyD,EAAa,QAAU,CACnB,YAAArkB,EACA,YAAAe,EACA,WAAAP,EACA,WAAAQ,EACA,sBAAAokB,GACA,+BAAAC,GACA,WAAYvE,GAAgBqE,KAAiBL,GAAU,IAAM,IAAO,OACpE,cAAeK,KAAiBL,GAAU,CAACiB,GAASC,EAAO,EAAIpF,IAAA,YAAAA,GAAM,cACrE,cAAeuE,KAAiBJ,GAAU,CAACgB,GAASC,EAAO,EAAIpF,IAAA,YAAAA,GAAM,aAC7E,EACIsE,GAAU,QAAO,EACjBD,GAAW,QAAO,CACtB,CChTA,MAAMgB,GAAY,GAClB,SAASC,GAAajwC,EAAG,CACrB,MAAM68B,EAAK78B,EAAI,EACf,OAAO68B,EAAKA,EAAKA,EAAK,CAC1B,CACO,MAAMqT,EAAiB,CAE1B,YAAY3tB,EAAU,CADtB1iB,GAAA,iBAIAA,GAAA,2BACAA,GAAA,oBAAe,IACfA,GAAA,0BACAA,GAAA,yBAAqBmL,GAAS,CACD,KAAK,aAAa,KAAK,GAAKgd,GAAc,EAAE,KAAMhd,EAAK,IAAI,CAAC,GAIrF,KAAK,aAAa,KAAKA,CAAI,CACnC,GAIInL,GAAA,8BAA0BmL,GAAS,CAC/B,MAAMmlC,EAAc,KAAK,aAAa,KAAK7lC,GAAK0d,GAAc1d,EAAE,KAAMU,CAAI,CAAC,EAC3E,YAAK,aAAe,KAAK,aAAa,OAAO,GAAK,IAAMmlC,CAAW,GAC5DA,GAAA,YAAAA,EAAa,cAAe,CAC3C,GACItwC,GAAA,8BAAyB,IAAM,CAC3B,KAAK,aAAe,KAAK,aAAa,OAAOQ,GAAKA,EAAE,YAAc,CAAC,CAC3E,GACIR,GAAA,kBAAa,IAAM,CACf,MAAMuwC,EAAkB,KAAK,aAAa,OAAS,EAC7CC,EAA4B,KAAK,qBAAuB,QAAa,KAAK,mBAAmB,YAAc,EACjH,OAAOD,GAAmBC,CAClC,GACIxwC,GAAA,yBAAoB,IAIZ,KAAK,qBAAuB,OACrB,CAAC,GAAG,KAAK,aAAc,KAAK,kBAAkB,EAElD,KAAK,aAAa,IAAIG,IAAM,CAAE,GAAGA,EAAG,YAAaiwC,GAAajwC,EAAE,WAAW,CAAC,EAAG,GAE1FH,GAAA,YAAQywC,GAAc,CAClB,GAAI,KAAK,oBAAsB,OAC3B,KAAK,kBAAoBA,MAExB,CAED,MAAMplC,GADOolC,EAAY,KAAK,mBACTN,GACrB,UAAWhlC,KAAQ,KAAK,aACpBA,EAAK,YAAcwqB,GAAMxqB,EAAK,YAAcE,EAAO,EAAG,CAAC,EAEvD,KAAK,qBAAuB,SAC5B,KAAK,mBAAmB,YAAcsqB,GAAM,KAAK,mBAAmB,YAActqB,EAAO,EAAG,CAAC,GAEjG,MAAMqlC,EAAY,KAAK,oBACvB,KAAK,SAASA,CAAS,EACvB,KAAK,uBAAsB,CAC9B,CACG,KAAK,cACL,KAAK,kBAAoBD,EACzB,OAAO,sBAAsB,KAAK,IAAI,GAGtC,KAAK,kBAAoB,MAErC,GACIzwC,GAAA,kBAAcmL,GAAS,OACnB,GAAI,CAAAgd,IAAc9T,EAAA,KAAK,qBAAL,YAAAA,EAAyB,KAAMlJ,CAAI,EAMrD,IAHI,KAAK,qBAAuB,QAC5B,KAAK,kBAAkB,KAAK,kBAAkB,EAE9CA,IAAS,OAAW,CACpB,MAAMg5B,EAAc,KAAK,uBAAuBh5B,CAAI,EACpD,KAAK,mBAAqB,CACtB,KAAAA,EACA,YAAAg5B,CAChB,CACS,MAEG,KAAK,mBAAqB,OAE1B,KAAK,oBAAsB,QAC3B,OAAO,sBAAsB,KAAK,IAAI,EAElD,GAlFQ,KAAK,SAAWzhB,CACnB,CAkFL,CC7FA,MAAMiuB,EAAK,CAGP,YAAY1zC,EAAI,CAFhB+C,GAAA,WACAA,GAAA,YAEI,KAAK,GAAK/C,CACb,CACD,IAAI,OAAQ,CACR,OAAO,KAAK,MAAQ,KAAK,IAAM,KAAK,GAAE,EACzC,CACL,CACA,SAAS2zC,GAAK3zC,EAAI,CACd,OAAO,IAAI0zC,GAAK1zC,CAAE,CACtB,CAEO,MAAM4zC,GAAmBD,GAAK,IAAM,OAAO,UAAU,UAAU,SAAS,SAAS,CAAC,EAC5EE,GAAkBF,GAAK,IAAM,OAAO,UAAU,UAAU,SAAS,QAAQ,GAClF,OAAO,UAAU,UAAU,SAAS,QAAQ,GAC5C,CAAC,OAAO,UAAU,UAAU,SAAS,QAAQ,CAAC,EACrCG,GAAeH,GAAK,IAAM,OAAO,UAAU,SAAS,YAAa,EAAC,WAAW,KAAK,CAAC,ECdzF,SAASI,GAAkBC,EAAM,CACpC,MAAMC,EAAQh9B,SAAa,EAAE,EACvBi9B,EAAMj9B,SAAa,CAAC,EACpBk9B,EAAUl9B,SAAa+8B,CAAI,EACjCG,EAAQ,QAAUH,EAClB,MAAMI,EAAOl6B,cAAkB,IAAM,CACjC,MAAMm6B,EAAU,IAAM,OAAO,sBAAsBr0C,CAAE,EAC/CA,EAAK,IAAM,CACb,MAAM8jC,EAASmQ,EAAM,QAAQ,IAAI1f,EAAoB,EACrD0f,EAAM,QAAU,GAChBE,EAAQ,QAAQ,IAAIpf,GAAQ+O,CAAM,CAAC,EAC/BmQ,EAAM,QAAQ,OAAS,EACvBC,EAAI,UAGJA,EAAI,QAAU,CAE9B,EACQ,OAAO,sBAAsBA,EAAI,QAAU,IAAMG,EAAUr0C,CAAE,CAChE,EAAE,CAAE,GACL,OAAOka,cAAmBhM,GAAS,CAC3B+lC,EAAM,QAAQ,SAAW,GACzBG,IACJ,MAAM/f,EAASF,GAAmBjmB,EAAK,CAAC,EAAGA,EAAK,CAAC,CAAC,EAC9C+lC,EAAM,QAAQ,SAAS5f,CAAM,GAEjC4f,EAAM,QAAQ,KAAK5f,CAAM,CACjC,EAAO,CAAC+f,CAAI,CAAC,CACb,CC/BO,MAAME,GAAa,SAEbC,GAAkB,eAElBC,GAAkB,gBAExB,IAAIC,IACV,SAAUA,EAAuB,CAC9BA,EAAsBA,EAAsB,MAAW,EAAE,EAAI,QAC7DA,EAAsBA,EAAsB,aAAkB,EAAE,EAAI,eACpEA,EAAsBA,EAAsB,OAAY,CAAC,EAAI,SAC7DA,EAAsBA,EAAsB,WAAgB,CAAC,EAAI,aACjEA,EAAsBA,EAAsB,IAAS,CAAC,EAAI,KAC9D,GAAGA,KAA0BA,GAAwB,CAAE,EAAC,EACjD,SAASC,GAAuBtrC,EAAMvF,EAAO,CAChD,OAAIuF,IAASvF,EACF,IACPuF,GAAA,YAAAA,EAAM,QAAS,iBACPA,GAAA,YAAAA,EAAM,SAASvF,GAAA,YAAAA,EAAO,QAC1BuF,GAAA,YAAAA,EAAM,SAAS,OAAOvF,GAAA,YAAAA,EAAO,SAAS,MACtCuF,GAAA,YAAAA,EAAM,SAAS,OAAOvF,GAAA,YAAAA,EAAO,SAAS,MACtCuF,GAAA,YAAAA,EAAM,OAAO,OAAOvF,GAAA,YAAAA,EAAO,OAAO,MAClCuF,GAAA,YAAAA,EAAM,OAAO,OAAOvF,GAAA,YAAAA,EAAO,OAAO,KAElCuF,GAAA,YAAAA,EAAM,SAASvF,GAAA,YAAAA,EAAO,QAC1BuF,GAAA,YAAAA,EAAM,SAAS,OAAOvF,GAAA,YAAAA,EAAO,SAAS,MACtCuF,GAAA,YAAAA,EAAM,SAAS,OAAOvF,GAAA,YAAAA,EAAO,SAAS,GAC9C,CCTA,MAAM8wC,GAAsB,EACtBC,GAAa,CAAC/yC,EAAM+zB,IAAoB,CAC1C,GAAI/zB,EAAK,OAASR,EAAa,OAC3B,OAAOQ,EAAK,SAChB,MAAMsnB,EAAIyM,GAAA,YAAAA,EAAkB/zB,GAC5B,OAAOsnB,GAAA,YAAAA,EAAG,uBAAuBtnB,KAAS,EAC9C,EACMgzC,GAAW,CAAC/nC,EAAGgoC,IAAiB,CAClC,KAAM,CAAE,MAAA7pC,EAAO,OAAA0H,EAAQ,oBAAAoiC,EAAqB,QAAAlqB,EAAS,YAAamqB,EAAiB,YAAAhnB,EAAa,aAAAH,EAAc,WAAA+hB,EAAa,GAAO,kBAAA9hB,EAAmB,UAAAC,EAAW,KAAAlB,EAAM,eAAA8V,EAAgB,oBAAAE,EAAqB,kBAAAoS,EAAmB,uBAAAC,EAAwB,aAAApN,EAAc,UAAAqN,EAAW,gBAAAC,EAAiB,aAAAC,EAAc,UAAAtS,EAAW,UAAA5/B,EAAW,cAAA2nB,EAAe,cAAAwqB,EAAe,mBAAAxoB,EAAoB,aAAAyoB,EAAe,GAAM,aAAAC,EAAe,GAAM,cAAAC,EAAe,YAAAC,EAAa,UAAAC,EAAW,eAAAC,GAAgB,YAAAC,EAAa,cAAAC,GAAe,iBAAA/N,GAAkB,mBAAAgO,GAAoB,UAAAhuB,GAAW,QAAAiuB,EAAS,iBAAA7S,GAAkB,UAAA8S,GAAW,YAAAC,GAAa,UAAAC,GAAW,eAAAC,EAAgB,WAAApO,EAAY,aAAcqJ,EAAW,WAAAgF,EAAY,YAAAC,GAAc,GAAO,YAAAC,GAAa,aAAAzT,GAAc,aAAAvF,GAAc,gBAAAqF,GAAiB,MAAA3S,GAAO,cAAAiT,GAAe,YAAA5G,GAAa,eAAA2L,GAAgB,SAAUzE,GAAkB,WAAY0E,GAAoB,cAAAsO,GAAe,eAAAC,GAAgB,OAAAC,GAAQ,YAAAC,GAAa,kBAAAC,GAAmB,cAAAC,GAAgB,GAAO,cAAAC,GAAgB,GAAO,aAAAC,GAAc,gBAAAnhB,GAAiB,gBAAA+b,GAAkB,MAAS,EAAG7kC,EAC7gC2gB,GAAa3gB,EAAE,YAAc,EAC7BmhB,GAAanhB,EAAE,YAAc,EAC7BmgB,GAAc,KAAK,IAAInC,EAAe,KAAK,IAAID,EAAQ,OAAS,EAAGmqB,CAAe,CAAC,EACnF91C,GAAM+X,SAAa,IAAI,EACvB+/B,GAAuB//B,SAAa,MAAM,EAC1CggC,GAAoBD,GAAqB,QACzC5T,GAAcwT,GACdM,GAAejgC,WACf,CAACkgC,GAAWC,EAAY,EAAIt+B,EAAc,SAAC,EAAK,EAChDwqB,GAAcrsB,SAAa,EAAE,EAC7Bq6B,GAAer6B,WACf,CAACogC,GAAiBC,EAAkB,EAAIx+B,EAAc,WACtD,CAACy+B,GAAeC,EAAgB,EAAI1+B,EAAc,WAClD2+B,GAAaxgC,SAAa,IAAI,EAC9B,CAACygC,GAAoBC,EAAqB,EAAI7+B,EAAc,WAC5D,CAAC8+B,GAAcC,EAAe,EAAI/+B,EAAc,SAAC,EAAK,EACtDg/B,GAAkB7gC,SAAa2gC,EAAY,EACjDE,GAAgB,QAAUF,GAC1B,MAAMvU,GAAgBrM,EAAa,QAAC,IAAM,IAAIqF,GAAcC,GAAa,IAAM,CAC3Eyb,GAAY,QAAU,OACtBC,GAAY,QAAO,CAC3B,CAAK,EAAG,CAAC1b,EAAW,CAAC,EACXpO,GAAoB4Z,EAAeha,EAAoBD,EAAeA,EACtEoqB,GAAmBhhC,SAAa,EAAE,EAClCihC,KAA0BnB,IAAA,YAAAA,GAAc,yBAA0B,KAAUnD,GAAiB,MAC7FuE,KAAyBpB,IAAA,YAAAA,GAAc,wBAAyB,KAAUlD,GAAgB,MAChG56B,kBAAsB,IAAM,CACpB,OAAO,mBAAqB,GAAM,CAACi/B,IAA0B,CAACC,KAG9DF,GAAiB,UAAY,IAC7Bb,GAAa,EAAI,EAErB,OAAO,aAAaa,GAAiB,OAAO,EAC5CA,GAAiB,QAAU,OAAO,WAAW,IAAM,CAC/Cb,GAAa,EAAK,EAClBa,GAAiB,QAAU,EAC9B,EAAE,GAAG,EACd,EAAO,CAACjqB,EAAaf,GAAaQ,GAAYQ,GAAYiqB,GAAwBC,EAAqB,CAAC,EACpG,MAAMvkB,GAAgBhJ,GAAiBC,EAASC,CAAa,EACvDstB,GAAU7C,EAAe7oB,GAAekH,GAAemU,EAAgB,EAAI,EAE3EsQ,GAAmBn+B,EAAiB,YAAC,CAAC6c,EAAQ9L,EAAKtN,KAAQ,CAC7D,MAAM6N,GAAOuL,EAAO,wBACpB,GAAI9L,GAAO2I,GAAc,QAAUjW,IAAOkP,EACtC,OAEJ,MAAMyrB,GAAQ9sB,GAAK,MAAQvgB,EACrBjH,GAAS2vB,GAAc1I,EAAKtN,GAAK1S,EAAO0H,EAAQmb,EAAmBI,GAAmBjB,GAAae,EAAaP,GAAYQ,GAAYpB,EAAM/B,EAAegC,EAAoB8G,GAAe7F,CAAS,EAC/M,OAAIuqB,KAAU,IACVt0C,GAAO,GAAKs0C,GACZt0C,GAAO,GAAKs0C,GACZt0C,GAAO,OAASs0C,GAChBt0C,GAAO,QAAUs0C,IAErBt0C,GAAO,GAAKwnB,GAAK,EACjBxnB,GAAO,GAAKwnB,GAAK,EACVxnB,EACf,EAAO,CACCiH,EACA0H,EACAmb,EACAI,GACAjB,GACAe,EACAP,GACAQ,GACApB,EACA/B,EACAgC,EACA8G,GACA7F,CACR,CAAK,EACKwqB,GAA0Br+B,cAAkB,CAAC6c,EAAQrf,EAAMC,GAAM6gC,KAAO,CAC1E,MAAMhtB,GAAOuL,EAAO,wBACduhB,GAAQ9sB,GAAK,MAAQvgB,EACrB/H,IAAKwU,EAAO8T,GAAK,MAAQ8sB,GACzB9uC,IAAKmO,GAAO6T,GAAK,KAAO8sB,GACxBG,GAAsB,EACtB5a,GAAgB7Q,GAAoB4G,GAAe3G,GAAahiB,EAAO,OAAWwiB,EAAU,EAClG,IAAIirB,GAAS,EACTC,GAAU,EACVH,cAAc,aACdE,GAASF,GAAG,OACZG,GAAUH,GAAG,SAGjB,MAAMvtB,GAAMqC,GAAmBpqB,GAAG26B,GAAepQ,EAAU,EAGrD9P,GAAM+P,GAAgBlkB,GAAGmJ,EAAQm1B,EAAcja,EAAcC,EAAmBjB,EAAMkB,EAAWC,EAAaC,GAAYnB,CAAkB,EAC5I8rB,IAAWJ,IAAA,YAAAA,GAAI,YAAa,GAC5BK,IAAUL,IAAA,YAAAA,GAAI,WAAY,GAC1BM,IAAUN,IAAA,YAAAA,GAAI,WAAY,GAC1BO,GAAWP,KAAO,QAAa,EAAEA,cAAc,cAAgBA,IAAA,YAAAA,GAAI,eAAgB,QACnFQ,GAAa,CACf91C,GAAI,EAAI,GAAK+H,EAAQ/H,GAAI,EAAI,EAC7BsG,GAAI0kB,GAAoB,GAAKvb,EAASnJ,GAAI,EAAI,CAC1D,EACQ,IAAIxF,GACJ,GAAIinB,KAAQ,IAAMzhB,GAAI,GAAKtG,GAAI,GAAKya,KAAQ,QAAaza,GAAI+H,GAASzB,GAAImJ,EAAQ,CAC9E,MAAMsmC,GAAa/1C,GAAI+H,EAAQ,EAAI/H,GAAI,EAAI,GAAK,EAC1Cg2C,GAAW1vC,GAAImJ,EAAS,EAAInJ,GAAI,EAAI,GAAK,EAC/C,IAAI2vC,GAAkBF,GAAa,EAC/BG,GAAgBF,GAAW,EAC3BD,KAAe,IACfE,GAAkBluB,KAAQ,GAAKwpB,GAAsB,WAAaA,GAAsB,QACxFyE,KAAa,IACbE,GAAgBz7B,KAAQ,OAAY82B,GAAsB,WAAaA,GAAsB,QACjG,IAAI4E,GAAS,GACb,GAAIpuB,KAAQ,IAAMtN,KAAQ,GAAI,CAC1B,MAAMlb,GAAI41C,GAAiBthB,EAAQnD,GAAc,OAAS,EAAG,EAAE,EAC/Dl0B,GAAO+C,KAAM,MAAS,EACtB42C,GAAS3hC,EAAOjV,GAAE,EAAIA,GAAE,MAAQg2C,EACnC,CAID,MAAMa,GAAoBp2C,GAAI+H,GAAS/H,GAAI+H,EAAQsO,MAAyB/P,GAAImJ,GAAUnJ,GAAImJ,EAAS4G,GAAmB,EAC1HvV,GAAS,CACL,KAAMwwC,GACN,SAAU,CAACvpB,KAAQ,GAAKA,GAAM/nB,GAAI,EAAI,EAAI0wB,GAAc,OAAS,EAAGjW,IAAOkP,EAAO,CAAC,EACnF,OAAQ,CAACssB,GAAiBC,EAAa,EACvC,SAAAR,GACA,QAAAC,GACA,QAAAC,GACA,OAAAO,GACA,QAAAN,GACA,OAAAL,GACA,QAAAC,GACA,WAAAK,GACA,iBAAAM,EAChB,CACS,SACQ37B,IAAO,GAAI,CAChB,IAAI47B,GAASlB,GAAiBthB,EAAQ9L,GAAKtN,EAAG,EAC9Cje,GAAO65C,KAAW,MAAS,EAC3B,IAAIF,GAASE,KAAW,QAAaA,GAAO,EAAIA,GAAO,MAAQ7hC,GAAQ+gC,GACvE,MAAMe,GAAcvuB,GAAM,EACtBvT,EAAO6hC,GAAO,GAAKd,IAAuBe,IAAe,GACzDH,GAAS,GACTE,GAASlB,GAAiBthB,EAAQyiB,GAAa77B,EAAG,EAClDje,GAAO65C,KAAW,MAAS,EAC3Bv1C,GAAS,CACL,KAAM8jC,GAAgBnqB,KAAQ,GAAK42B,GAAkBD,GACrD,SAAU,CAACkF,GAAa77B,EAAG,EAC3B,OAAQ47B,GACR,MAAO3lB,GAAc4lB,EAAW,EAAE,OAAS,GAC3C,OAAAH,GACA,SAAAT,GACA,QAAAC,GACA,QAAAC,GACA,QAAAC,GACA,YAAarhC,EAAO6hC,GAAO,EAC3B,YAAa5hC,GAAO4hC,GAAO,EAC3B,OAAAb,GACA,QAAAC,GACA,WAAAK,EACpB,GAGgBh1C,GAAS,CACL,KAAM8jC,GAAgBnqB,KAAQ,GAAK42B,GAAkBD,GACrD,MAAO1gB,GAAc3I,EAAG,EAAE,OAAS,GACnC,SAAU,CAACA,GAAKtN,EAAG,EACnB,OAAQ47B,GACR,OAAAF,GACA,SAAAT,GACA,QAAAC,GACA,QAAAC,GACA,QAAAC,GACA,YAAarhC,EAAO6hC,GAAO,EAC3B,YAAa5hC,GAAO4hC,GAAO,EAC3B,OAAAb,GACA,QAAAC,GACA,WAAAK,EACpB,CAES,KACI,CACD,MAAMO,GAASlB,GAAiBthB,EAAQ9L,GAAKtN,EAAG,EAChDje,GAAO65C,KAAW,MAAS,EAC3B,MAAMF,GAASE,KAAW,QAAaA,GAAO,EAAIA,GAAO,MAAQ7hC,EAAO+gC,GACxE,IAAIgB,GAAe,GACnB,GAAI7J,GAAczsC,EAAU,UAAY,OAAW,CAC/C,MAAMu2C,GAAqBjuB,GAAgBtoB,EAAU,QAAQ,KAAK,EAC5Dw2C,GAAuBtB,GAAiBthB,EAAQ2iB,GAAmB,CAAC,EAAGA,GAAmB,CAAC,CAAC,EAClG,GAAIC,KAAyB,OAAW,CACpC,MAAMC,GAAuBD,GAAqB,EAAIA,GAAqB,MAAQ,EAC7EE,GAAuBF,GAAqB,EAAIA,GAAqB,OAAS,EAEpFF,GACI,KAAK,IAAIG,GAAuBliC,CAAI,EAAIi9B,IACpC,KAAK,IAAIkF,GAAuBliC,EAAI,EAAIg9B,EACnD,CACJ,CACD3wC,GAAS,CACL,KAAM,OACN,SAAU,CAACinB,GAAKtN,EAAG,EACnB,OAAQ47B,GACR,OAAAF,GACA,SAAAT,GACA,QAAAC,GACA,aAAAY,GACA,QAAAX,GACA,QAAAC,GACA,YAAarhC,EAAO6hC,GAAO,EAC3B,YAAa5hC,GAAO4hC,GAAO,EAC3B,OAAAb,GACA,QAAAC,GACA,WAAAK,EAChB,CACS,CACD,OAAOh1C,EACf,EAAO,CACCiH,EACA2oB,GACA3G,GACAQ,GACA9a,EACAm1B,EACAja,EACAC,EACAjB,EACAkB,EACAC,EACAC,GACAnB,EACAurB,GACAzI,EACAzsC,EACA+qB,EACR,CAAK,EACK,CAAC4rB,EAAW,EAAIzC,IAAmB,GACnC0C,GAAa9iC,SAAa,IAAM,CAE1C,CAAK,EACK+iC,GAAe/iC,SAAaogC,EAAe,EACjD2C,GAAa,QAAU3C,GACvB,KAAM,CAAC5F,EAAYC,EAAU,EAAI1a,EAAa,QAAC,IAAM,CACjD,MAAMx0B,EAAI,SAAS,cAAc,QAAQ,EACnCC,EAAI,SAAS,cAAc,QAAQ,EACzC,OAAAD,EAAE,MAAM,QAAa,OACrBA,EAAE,MAAM,QAAa,IACrBA,EAAE,MAAM,SAAc,QACtBC,EAAE,MAAM,QAAa,OACrBA,EAAE,MAAM,QAAa,IACrBA,EAAE,MAAM,SAAc,QACf,CAACD,EAAE,WAAW,KAAM,CAAE,MAAO,EAAO,GAAGC,EAAE,WAAW,KAAM,CAAE,MAAO,EAAK,CAAE,CAAC,CACrF,EAAE,CAAE,GACLwW,kBAAsB,IAAM,CACxB,GAAI,EAAAw4B,IAAe,MAAQC,KAAe,MAE1C,gBAAS,gBAAgB,OAAOD,EAAW,MAAM,EACjD,SAAS,gBAAgB,OAAOC,GAAW,MAAM,EAC1C,IAAM,CACTD,EAAW,OAAO,SAClBC,GAAW,OAAO,QAC9B,CACA,EAAO,CAACD,EAAYC,EAAU,CAAC,EAC3B,MAAM/N,GAAsB3M,UAAc,IAAM,IAAIlC,GAAuB,CAAE,GACvEmlB,GAAS/B,IAA0Bf,GAAY,EAAIgB,IAAyBhB,GAAY,EAAI,EAC5FtT,IAAmBkT,IAAA,YAAAA,GAAc,2BAA4B,GAAO,EAAI,GACxEgB,GAAc9gC,WACdk6B,GAAYl6B,SAAa,IAAI,EAC7Bi7B,GAAaj7B,SAAa,IAAI,EAC9B+8B,GAAO95B,cAAkB,IAAM,QACjC,MAAM6c,EAAS73B,GAAI,QACbu2B,EAAUgiB,GAAW,QAa3B,GAZI1gB,IAAW,MAAQtB,IAAY,OAE/B0b,GAAU,UAAY,OACtBA,GAAU,QAAUpa,EAAO,WAAW,KAAM,CAAE,MAAO,EAAK,CAAE,EAC5DA,EAAO,MAAQ,EACfA,EAAO,OAAS,GAEhBmb,GAAW,UAAY,OACvBA,GAAW,QAAUzc,EAAQ,WAAW,KAAM,CAAE,MAAO,EAAK,CAAE,EAC9DA,EAAQ,MAAQ,EAChBA,EAAQ,OAAS,GAEjB0b,GAAU,UAAY,MAAQe,GAAW,UAAY,MAAQT,IAAe,MAAQC,KAAe,MACnG,OAEJ,IAAIwI,GAAc,GAClB,MAAMtW,GAAkBuW,IAAW,CAC/BD,GAAc,GACdvC,GAAsBwC,EAAM,CACxC,EACctM,GAAOkK,GAAY,QACnBjoC,GAAU,CACZ,gBAAiBoiC,GAAW,QAC5B,UAAWf,GAAU,QACrB,WAAAM,EACA,WAAAC,GACA,MAAAzmC,EACA,OAAA0H,EACA,YAAAsa,GACA,YAAAe,EACA,WAAY,KAAK,MAAMP,EAAU,EACjC,WAAY,KAAK,MAAMQ,EAAU,EACjC,cAAA2F,GACA,aAAAkU,EACA,cAAAhd,EACA,iBAAAid,GACA,MAAA9X,GACA,aAAApC,EACA,kBAAAC,EACA,aAAcgV,IAAgB7+B,GAAiB,MAAO,EACtD,UAAA8pB,EACA,eAAAka,GACA,WAAAD,EACA,UAAAqJ,EACA,UAAAtO,EACA,UAAA5/B,EACA,WAAAysC,EACA,iBAAApM,GACA,aAAAjG,GACA,eAAAqG,GACA,eAAgBqW,GAChB,mBAAAntB,EACA,KAAAD,EACA,UAAW4oB,EACX,eAAA9S,EACA,gBAAiBC,KAAoB18B,KAAS,CAAE,KAAAA,EAAM,IACtD,oBAAA28B,EACA,mBAAAqF,GACA,cAAAhF,GACA,iBAAAC,GACA,YAAAC,GACA,aAAAkO,GACA,OAAQ4F,GAAa,QACrB,YAAa5T,GAAY,QACzB,UAAW0W,GAAa,QACxB,cAAA3W,GACA,UAAA8T,GACA,eAAeJ,IAAA,YAAAA,GAAc,gBAAiB,GAC9C,UAAWa,GACX,QAASmC,GAAW,QACpB,oBAAApW,GACA,gBAAgBoT,IAAA,YAAAA,GAAc,kBAAmBlD,GAAgB,MAAQ,gBAAkB,iBAC3F,gBAAAje,GACA,iBAAAiO,GACA,gBAAA8N,EACZ,EAQY7hC,GAAQ,SAAW,QACnBioC,GAAY,QAAUjoC,GACtBmhC,GAASnhC,GAAS+9B,EAAI,GAGtBoD,GAASnhC,GAAS,MAAS,EAG3B,CAACoqC,KAAgBpqC,GAAQ,SAAW,QAAaA,GAAQ,OAAO,KAAIsH,GAAA4iC,IAAA,YAAAA,GAAc,UAAd,YAAA5iC,GAAwB,EAAE,IAC9FugC,GAAsB,MAAS,CAE3C,EAAO,CACClG,EACAC,GACAzmC,EACA0H,EACAsa,GACAe,EACAP,GACAQ,GACA2F,GACAkU,EACAhd,EACAid,GACA9X,GACApC,EACAC,EACAgV,GACA/U,EACAka,GACAD,EACAzK,GACA8T,EACAtO,EACA5/B,EACAysC,EACA9iB,EACAD,EACA4oB,EACAwE,GACAtX,EACAC,GACAC,EACAW,GACA0E,GACAhF,GACAC,GACAC,GACAC,GACA8T,GACAJ,IAAA,YAAAA,GAAc,cACdA,IAAA,YAAAA,GAAc,eACda,GACAjU,GACA/N,GACAiO,GACA8N,EACR,CAAK,EACKqG,GAAc/gC,SAAa+8B,EAAI,EACrC/6B,kBAAsB,IAAM,CACxB+6B,KACAgE,GAAY,QAAUhE,EAC9B,EAAO,CAACA,EAAI,CAAC,EACT/6B,kBAAsB,IAAM,EACb,SAAY,SACf7B,EAAA,+BAAU,QAAV,YAAAA,EAAiB,SAAU,SAE/B,MAAM,SAAS,MAAM,MACrB2gC,GAAY,QAAU,OACtBC,GAAY,QAAO,EAC/B,GACe,CACV,EAAE,CAAE,GACL,MAAMoC,GAAiBlgC,cAAmBmgC,GAAc,CACpDnD,GAAa,QAAUmD,EACvBrC,GAAY,QAAO,EACnBd,GAAa,QAAU,MAC1B,EAAE,CAAE,GACCxT,GAAUqQ,GAAkBqG,EAAc,EAChDL,GAAW,QAAUrW,GACrB,MAAMT,GAAS/oB,cAAmB8D,GAAU,CACxCo8B,GAAe,IAAIrlB,GAAQ/W,EAAM,IAAI9a,GAAKA,EAAE,IAAI,CAAC,CAAC,CAC1D,EAAO,CAACk3C,EAAc,CAAC,EACnBhX,GAAY,YAAYgX,EAAc,EACtC,KAAM,CAACE,GAAUC,EAAW,EAAIzhC,EAAc,SAAC,EAAK,EAC9C,CAACsvB,GAAMC,EAAI,EAAIyR,IAAe,GAC9BU,GAAgBpS,KAAS,QAAaC,KAAS,GAC/CoS,GAAqBrS,KAAS,QAAaC,KAAS,GAC1D,IAAIqS,GAA4B,GAC5BC,GAAsB,GACtBC,GAAiBlD,GACrB,GAAIkD,KAAmB,QAAaxS,KAAS,QAAaC,KAAS,QAAaA,GAAO,IAAMA,GAAOxb,EAAM,CACtG,MAAMhrB,EAAO8gC,EAAe,CAACyF,GAAMC,EAAI,EAAG,EAAI,EAC9CqS,GACI74C,EAAK,OAASE,GAAkB,QAC3BF,EAAK,OAASE,GAAkB,QAAUF,EAAK,aAAe,SACvE84C,GAAsB94C,EAAK,OAASR,EAAa,SAAWc,GAAsBN,CAAI,EACtF+4C,GAAiB/4C,EAAK,MACzB,CAED,MAAMs4C,GAAS9D,EACT,YAFUkB,IAAiB,KAGhBvP,EACP,aACAsS,IAAYnF,EACR,YACAyF,KAAmB,OACfA,GACAJ,IAAiBE,IAA6BC,IAAuBF,GACjE,UACA,UAChBx0C,GAAQ+wB,UAAc,KAAO,CAG/B,QAAS,SACT,QAAS,QACT,OAAAmjB,EACR,GAAQ,CAACA,EAAM,CAAC,EACNU,GAAgB5jC,SAAa,SAAS,EACtC5P,GAAS+uC,GAAA,YAAAA,EAAgB,QAC3B/uC,IAAW,MAAgCwzC,GAAc,UAAY50C,GAAM,SAE3EoB,GAAO,MAAM,OAASwzC,GAAc,QAAU50C,GAAM,QAExD,MAAM60C,GAA4B5gC,cAAkB,CAAC6Z,EAAOwlB,EAAQwB,GAAaC,KAAgB,CAC7F,GAAIpY,KAAoB,OACpB,OACJ,MAAMqY,GAAYrY,GAAgB7O,CAAK,EACvC,GAAIknB,GAAU,UAAY,OAAW,CACjC,MAAMC,GAAQ1R,GAAwB+P,EAAQ0B,GAAU,OAAO,EAC/D,SAAW,CAAC13C,GAAGymC,EAAG,IAAKkR,GAAM,QAAO,EAChC,GAAI7a,GAAY2J,GAAK+Q,GAAcxB,EAAO,EAAGyB,GAAchR,GAAI,CAAC,EAC5D,OAAOiR,GAAU,QAAQ13C,EAAC,CAGrC,CAET,EAAO,CAACq/B,EAAe,CAAC,EACduY,GAAsBjhC,cAAkB,CAAC6c,EAAQ9L,EAAKmwB,GAASC,KAAY,CAC7E,MAAMn3B,GAAS0P,GAAc3I,CAAG,EAChC,GAAI,CAACorB,GAAc,CAACrO,GAAc,EAAEuP,IAAiB,IAAQ,CACzD,MAAM+D,GAAejD,GAAiBthB,EAAQ9L,EAAK,EAAE,EACrDvrB,GAAO47C,KAAiB,MAAS,EACjC,MAAMlQ,GAAeX,GAAoB,OAAWvmB,GAAQo3B,GAAa,EAAGA,GAAa,EAAGA,GAAa,MAAOA,GAAa,OAAQrrB,GAAO5W,GAAU6K,GAAO,KAAK,IAAM,KAAK,EAC7K,GAAIA,GAAO,UAAY,IACnBknB,GAAa,aAAe,QAC5B/K,GAAY+K,GAAa,WAAYgQ,GAASC,EAAO,EACrD,MAAO,CACH,KAAM,OACN,OAAQjQ,GAAa,UACzC,EAEiB,GAAIlnB,GAAO,gBAAkB,QAC9BknB,GAAa,sBAAwB,QACrC/K,GAAY+K,GAAa,oBAAqBgQ,GAASC,EAAO,EAC9D,MAAO,CACH,KAAM,YACN,OAAQjQ,GAAa,mBACzC,CAES,CAET,EAAO,CAACxX,GAAeykB,GAAkBd,GAAelB,EAAYrO,EAAY/X,EAAK,CAAC,EAC5EsrB,GAAWtkC,SAAa,CAAC,EACzBukC,GAAevkC,WACfwkC,GAAYxkC,SAAa,EAAK,EAC9BykC,GAAkBxhC,cAAmBs+B,GAAO,CAC9C,MAAMzhB,EAAS73B,GAAI,QACby8C,GAAcvF,GAAA,YAAAA,EAAgB,QACpC,GAAIrf,IAAW,MAASyhB,EAAG,SAAWzhB,GAAUyhB,EAAG,SAAWmD,GAC1D,OACJF,GAAU,QAAU,GACpB,IAAIL,GACAC,GASJ,GARI7C,aAAc,YACd4C,GAAU5C,EAAG,QACb6C,GAAU7C,EAAG,UAGb4C,GAAU5C,EAAG,QAAQ,CAAC,EAAE,QACxB6C,GAAU7C,EAAG,QAAQ,CAAC,EAAE,SAExBA,EAAG,SAAWmD,IAAeA,KAAgB,KAAM,CACnD,MAAMpC,GAASoC,GAAY,wBAC3B,GAAIP,GAAU7B,GAAO,OAAS8B,GAAU9B,GAAO,OAC3C,MACP,CACD,MAAMnwC,GAAOmvC,GAAwBxhB,EAAQqkB,GAASC,GAAS7C,CAAE,EACjEgD,GAAa,QAAUpyC,GAAK,SACxBA,GAAK,UACLmyC,GAAS,QAAU,KAAK,OAExBzD,GAAgB,UAAY1uC,GAAK,SACjCyuC,GAAgBzuC,GAAK,OAAO,EAE5B,EAAAA,GAAK,OAASkrC,IACd6G,GAAoBpkB,EAAQ3tB,GAAK,SAAS,CAAC,EAAGgyC,GAASC,EAAO,IAAM,UAG/DjyC,GAAK,OAASmrC,IACJuG,GAA0B1xC,GAAK,MAAOA,GAAK,OAAQA,GAAK,YAAaA,GAAK,WAAW,IACrF,SAInBssC,GAAA,MAAAA,EAActsC,IACV,CAACA,GAAK,SACNktC,KAAgB,IAChBA,KAAgBltC,GAAK,MACrBA,GAAK,OAAS,GACdA,GAAK,SAAW,GAEhBovC,EAAG,eAAc,GAE7B,EAAO,CACCpC,EACAE,GACAiC,GACAuC,GACAK,GACAzF,CACR,CAAK,EACD/+B,GAAiB,aAAc+kC,GAAiBzE,GAAmB,EAAK,EACxEtgC,GAAiB,YAAa+kC,GAAiBzE,GAAmB,EAAK,EACvE,MAAM2E,GAAa3kC,SAAa,CAAC,EAC3B4kC,GAAgB3hC,cAAmBs+B,GAAO,WAC5C,MAAMsD,EAAkBF,GAAW,QACnCA,GAAW,QAAU,KAAK,MAC1B,MAAM7kB,GAAS73B,GAAI,QAEnB,GADAu8C,GAAU,QAAU,GAChB9F,IAAc,QAAa5e,KAAW,KACtC,OACJ,MAAM4kB,GAAcvF,GAAA,YAAAA,EAAgB,QAC9B2F,GAAYvD,EAAG,SAAWzhB,IAAUyhB,EAAG,SAAWmD,GACxD,IAAIP,GACAC,GACAW,GAAY,GAChB,GAAIxD,aAAc,YAId,GAHA4C,GAAU5C,EAAG,QACb6C,GAAU7C,EAAG,QACbwD,GAAYxD,EAAG,OAAS,EACpBA,EAAG,cAAgB,QACnB,YAIJ4C,GAAU5C,EAAG,eAAe,CAAC,EAAE,QAC/B6C,GAAU7C,EAAG,eAAe,CAAC,EAAE,QAEnC,IAAIpvC,GAAOmvC,GAAwBxhB,GAAQqkB,GAASC,GAAS7C,CAAE,EAC3DpvC,GAAK,SAAWmyC,GAAS,UAAY,GAAK,KAAK,IAAK,EAAGA,GAAS,QAAU,MAC1EnyC,GAAO,CACH,GAAGA,GACH,YAAa,EAC7B,GAEY0yC,IAAoB,GAAK,KAAK,IAAK,EAAGA,GAAmB1yC,GAAK,QAAU,IAAO,OAC/EA,GAAO,CACH,GAAGA,GACH,cAAe,EAC/B,GAEY0uC,GAAgB,UAAY1uC,GAAK,SACjCyuC,GAAgBzuC,GAAK,OAAO,EAE5B,CAAC2yC,IAAavD,EAAG,YAAcwD,IAC/BxD,EAAG,eAAc,EAErB,KAAM,CAACvtB,EAAG,EAAI7hB,GAAK,SACbkyC,GAAeH,GAAoBpkB,GAAQ9L,GAAKmwB,GAASC,EAAO,EACtE,GAAIjyC,GAAK,OAASkrC,IAAcgH,KAAiB,OAAW,EACpDlyC,GAAK,SAAW,KAAKgO,GAAAokC,GAAa,UAAb,YAAApkC,GAAuB,MAAO6T,MAAO4a,GAAA2V,GAAa,UAAb,YAAA3V,GAAuB,MAAO,KAExF8P,EAAUvsC,GAAM,EAAI,EAExB,MACH,SACQA,GAAK,OAASmrC,GAAiB,CACpC,MAAMxK,GAAS+Q,GAA0B1xC,GAAK,MAAOA,GAAK,OAAQA,GAAK,YAAaA,GAAK,WAAW,EACpG,GAAI2gC,KAAW,OAAW,CAClB3gC,GAAK,SAAW,GAChB2gC,GAAO,QAAQ3gC,EAAI,EAEvB,MACH,CACJ,CACDusC,EAAUvsC,GAAM2yC,EAAS,CACjC,EAAO,CAACpG,EAAWS,EAAgBmC,GAAyB4C,GAAqBL,EAAyB,CAAC,EACvGnkC,GAAiB,UAAWklC,GAAe5E,GAAmB,EAAK,EACnEtgC,GAAiB,WAAYklC,GAAe5E,GAAmB,EAAK,EACpE,MAAMgF,GAAc/hC,cAAmBs+B,GAAO,WAC1C,MAAMzhB,EAAS73B,GAAI,QACnB,GAAI63B,IAAW,KACX,OACJ,MAAM4kB,GAAcvF,GAAA,YAAAA,EAAgB,QAC9B2F,GAAYvD,EAAG,SAAWzhB,GAAUyhB,EAAG,SAAWmD,GACxD,IAAIP,GACAC,GACAW,GAAY,GACZxD,aAAc,YACd4C,GAAU5C,EAAG,QACb6C,GAAU7C,EAAG,QACbwD,GAAYxD,EAAG,OAAS,IAGxB4C,GAAU5C,EAAG,eAAe,CAAC,EAAE,QAC/B6C,GAAU7C,EAAG,eAAe,CAAC,EAAE,SAEnC,MAAMpvC,GAAOmvC,GAAwBxhB,EAAQqkB,GAASC,GAAS7C,CAAE,EAC7DV,GAAgB,UAAY1uC,GAAK,SACjCyuC,GAAgBzuC,GAAK,OAAO,EAE5B,CAAC2yC,IAAavD,EAAG,YAAcwD,IAC/BxD,EAAG,eAAc,EAErB,KAAM,CAACvtB,EAAG,EAAI7hB,GAAK,SACnB,GAAIA,GAAK,OAASkrC,GAAY,CAC1B,MAAMgH,GAAeH,GAAoBpkB,EAAQ9L,GAAKmwB,GAASC,EAAO,EAClEC,KAAiB,QACjBlyC,GAAK,SAAW,KAChBgO,GAAAokC,GAAa,UAAb,YAAApkC,GAAuB,MAAO6T,MAC9B4a,GAAA2V,GAAa,UAAb,YAAA3V,GAAuB,MAAO,KAC1ByV,GAAa,OAAS,OACtBrG,GAAA,MAAAA,EAAoBhqB,GAAKqwB,GAAa,QAEjCA,GAAa,OAAS,cAC3BpG,GAAA,MAAAA,EAAyBjqB,GAAKqwB,GAAa,SAGtD,SACQlyC,GAAK,OAASmrC,GAAiB,CACpC,MAAMxK,GAAS+Q,GAA0B1xC,GAAK,MAAOA,GAAK,OAAQA,GAAK,YAAaA,GAAK,WAAW,EAChG2gC,KAAW,QAAa3gC,GAAK,SAAW,GACxC2gC,GAAO,QAAQ3gC,EAAI,CAE1B,CACT,EAAO,CACCgtC,EACAmC,GACA4C,GACAlG,EACAC,EACA4F,EACR,CAAK,EACDnkC,GAAiB,QAASslC,GAAahF,GAAmB,EAAK,EAC/D,MAAMiF,GAAoBhiC,cAAmBs+B,GAAO,CAChD,MAAMzhB,EAAS73B,GAAI,QACby8C,GAAcvF,GAAA,YAAAA,EAAgB,QACpC,GAAIrf,IAAW,MAASyhB,EAAG,SAAWzhB,GAAUyhB,EAAG,SAAWmD,IAAgBrG,IAAkB,OAC5F,OACJ,MAAMlsC,GAAOmvC,GAAwBxhB,EAAQyhB,EAAG,QAASA,EAAG,QAASA,CAAE,EACvElD,EAAclsC,GAAM,IAAM,CAClBovC,EAAG,YACHA,EAAG,eAAc,CACjC,CAAS,CACJ,EAAE,CAACpC,EAAgBmC,GAAyBjD,CAAa,CAAC,EAC3D3+B,GAAiB,cAAeulC,IAAmB9F,GAAA,YAAAA,EAAgB,UAAW,KAAM,EAAK,EACzF,MAAM+F,GAAmBjiC,EAAiB,YAAC2M,GAAU,CACjDqwB,GAAa,QAAU,IAAIniB,GAAQlO,EAAO,IAAI3jB,GAAKA,EAAE,IAAI,CAAC,EAC1DogC,GAAY,QAAUzc,EACtBmxB,GAAY,QAAO,EACnBd,GAAa,QAAU,MAC1B,EAAE,CAAE,GACCkF,GAAmBplB,EAAa,QAAC,IAAM,IAAIoc,GAAiB+I,EAAgB,EAAG,CAACA,EAAgB,CAAC,EACjGE,GAAmBplC,SAAamlC,EAAgB,EACtDC,GAAiB,QAAUD,GAC3BnjC,kBAAsB,IAAM,CACxB,MAAMqjC,EAAKD,GAAiB,QAC5B,GAAIvC,KAAgB,QAAaA,GAAY,CAAC,EAAI,EAAG,CACjDwC,EAAG,WAAWxC,EAAW,EACzB,MACH,CACD,MAAMj4C,EAAO8gC,EAAemX,GAAa,EAAI,EACvC3wB,GAAIyM,GAAgB/zB,CAAI,EACxB06C,GAAkBpzB,KAAM,QAAatnB,EAAK,OAASR,EAAa,SACjE8nB,IAAA,YAAAA,GAAG,cAAe,SAAc,OAAOA,GAAE,YAAe,UAAYA,GAAE,WAAaA,GAAE,WAAWtnB,CAAI,GACzGy6C,EAAG,WAAWC,GAAiBzC,GAAc,MAAS,CACzD,EAAE,CAACnX,EAAgB/M,GAAiBkkB,EAAW,CAAC,EACjD,MAAM0C,GAAavlC,WACbwlC,GAAkBviC,cAAmBs+B,GAAO,QAC9C,MAAMzhB,EAAS73B,GAAI,QACnB,GAAI63B,IAAW,KACX,OACJ,MAAM4kB,GAAcvF,GAAA,YAAAA,EAAgB,QAC9BsG,GAAalE,EAAG,SAAWzhB,GAAUyhB,EAAG,SAAWmD,GACnDvyC,GAAOmvC,GAAwBxhB,EAAQyhB,EAAG,QAASA,EAAG,QAASA,CAAE,EACvE,GAAIpvC,GAAK,OAAS,iBAAmBszC,IAAc,CAACjB,GAAU,SAAW,CAACryC,GAAK,QAG3E,OAIJ,MAAMuzC,GAAsB,CAACC,GAAQC,KAAiB,CAClDvF,GAAmBwF,IACXA,KAAOF,KAEPE,IAAA,YAAAA,GAAK,GAAG,OAAOF,IAAA,YAAAA,GAAS,GAAG,MAC3BE,IAAA,YAAAA,GAAK,GAAG,OAAOF,IAAA,YAAAA,GAAS,GAAG,OACzBE,IAAA,YAAAA,GAAK,GAAG,OAAOF,IAAA,YAAAA,GAAS,GAAG,MAAME,IAAA,YAAAA,GAAK,GAAG,OAAOF,IAAA,YAAAA,GAAS,GAAG,KAAO,CAACC,IAC/DC,GAEJF,EACV,CACb,EACQ,GAAI,CAAClI,GAAuBtrC,GAAMozC,GAAW,OAAO,EAChD7E,GAAsB,MAAS,EAC/B7B,IAAA,MAAAA,GAAgB1sC,IAChBuzC,GAAoBvzC,GAAK,OAASorC,GAAkB,OAAY,CAACprC,GAAK,SAAU,CAACA,GAAK,YAAaA,GAAK,WAAW,CAAC,EAAG,EAAI,EAC3HozC,GAAW,QAAUpzC,WAEhBA,GAAK,OAAS,QAAUA,GAAK,OAASkrC,IAAclrC,GAAK,OAASmrC,GAAiB,CACxF,IAAIwI,GAAkB,GAClBC,GAAqB,GACzB,GAAI5zC,GAAK,OAAS,OAAQ,CACtB,MAAM+hB,GAAUwX,EAAev5B,GAAK,QAAQ,EAI5C4zC,KAHsB5lC,GAAAwe,GAAgBzK,EAAO,IAAvB,YAAA/T,GAA0B,qBAGV+T,GAAQ,OAAS9pB,EAAa,OACpE07C,GAAkBC,EACrB,MAEGD,GAAkB,GAEtB,MAAME,GAAU,CAAC7zC,GAAK,SAAU,CAACA,GAAK,YAAaA,GAAK,WAAW,CAAC,EACpEuzC,GAAoBM,GAASD,EAAkB,EAC/ChD,GAAa,QAAUiD,GACnBF,IACA3C,GAAe,IAAIrlB,GAAQ,CAAC3rB,GAAK,QAAQ,CAAC,CAAC,CAElD,CACD,MAAM8zC,GAAkB9zC,GAAK,SAAS,CAAC,IAAM2sC,GAAqB,EAAI,GACtEyB,GAAiBpuC,GAAK,OAASkrC,IAAclrC,GAAK,QAAU8zC,IAAmB3G,KAAgB,EAAI,EACnGgE,GAAYnxC,GAAK,OAAS,QAAUA,GAAK,YAAY,EACrDwsC,IAAA,MAAAA,GAAiB4C,GACjB3C,EAAYzsC,EAAI,CACxB,EAAO,CACCgtC,EACAmC,GACAxC,GACAQ,GACAX,GACAC,EACAC,GACAnT,EACA/M,GACAwkB,EACR,CAAK,EACDzjC,GAAiB,YAAa8lC,GAAiBxF,GAAmB,EAAI,EACtE,MAAMkG,GAAgBjjC,cAAmBxR,GAAU,CAC/C,MAAMquB,EAAS73B,GAAI,QACnB,GAAI63B,IAAW,KACX,OACJ,IAAIwiB,GACAjuB,GACAnoB,EAAU,UAAY,SACtBo2C,GAASlB,GAAiBthB,EAAQ5zB,EAAU,QAAQ,KAAK,CAAC,EAAGA,EAAU,QAAQ,KAAK,CAAC,CAAC,EACtFmoB,GAAWnoB,EAAU,QAAQ,MAEjC4kB,IAAA,MAAAA,GAAY,CACR,OAAAwxB,GACA,gBAAiB,IAAM7wC,EAAM,gBAAiB,EAC9C,eAAgB,IAAMA,EAAM,eAAgB,EAC5C,OAAQ,OACR,QAASA,EAAM,QACf,QAASA,EAAM,QACf,SAAUA,EAAM,SAChB,OAAQA,EAAM,OACd,IAAKA,EAAM,IACX,QAASA,EAAM,QACf,SAAUA,EACV,SAAA4iB,EACZ,EACK,EAAE,CAACvD,GAAW5kB,EAAWk1C,EAAgB,CAAC,EACrC+E,GAAcljC,cAAmBxR,GAAU,CAC7C,MAAMquB,EAAS73B,GAAI,QACnB,GAAI63B,IAAW,KACX,OACJ,IAAIwiB,GACAjuB,GACAnoB,EAAU,UAAY,SACtBo2C,GAASlB,GAAiBthB,EAAQ5zB,EAAU,QAAQ,KAAK,CAAC,EAAGA,EAAU,QAAQ,KAAK,CAAC,CAAC,EACtFmoB,GAAWnoB,EAAU,QAAQ,MAEjC6yC,GAAA,MAAAA,EAAU,CACN,OAAAuD,GACA,gBAAiB,IAAM7wC,EAAM,gBAAiB,EAC9C,eAAgB,IAAMA,EAAM,eAAgB,EAC5C,OAAQ,OACR,QAASA,EAAM,QACf,QAASA,EAAM,QACf,SAAUA,EAAM,SAChB,OAAQA,EAAM,OACd,IAAKA,EAAM,IACX,QAASA,EAAM,QACf,SAAUA,EACV,SAAA4iB,EACZ,EACK,EAAE,CAAC0qB,EAAS7yC,EAAWk1C,EAAgB,CAAC,EACnCgF,GAAUnjC,cAAmBzS,GAAa,CAK5C,GAJAvI,GAAI,QAAUuI,EACVwuC,KAAc,SACdA,GAAU,QAAUxuC,GAEpBA,IAAa,KACbuvC,GAAqB,QAAU,WAE9B,CACD,MAAMsG,EAAU71C,EAAS,cACrB61C,IAAY,WACZtG,GAAqB,QAAU,QACnCA,GAAqB,QAAUsG,CAClC,CACT,EAAO,CAACrH,EAAS,CAAC,EACRsH,GAAkBrjC,cAAmBxR,GAAU,CACjD,MAAMquB,EAAS73B,GAAI,QACnB,GAAI63B,IAAW,MAAQuf,KAAgB,IAAStO,EAAY,CACxDt/B,EAAM,eAAc,EACpB,MACH,CACD,IAAI80C,GACAC,GACJ,MAAMr0C,GAAOmvC,GAAwBxhB,EAAQruB,EAAM,QAASA,EAAM,OAAO,EACzE,GAAI4tC,KAAgB,IAAQltC,GAAK,OAASktC,GAAa,CACnD5tC,EAAM,eAAc,EACpB,MACH,CACD,MAAMg1C,GAAU,CAACC,GAAMC,KAAY,CAC/BJ,GAAWG,GACXF,GAAWG,EACvB,EACQ,IAAIC,GACAC,GACAC,GACJ,MAAMC,GAAe,CAACxrC,GAAOtP,GAAGsG,KAAM,CAClCq0C,GAAYrrC,GACZsrC,GAAa56C,GACb66C,GAAav0C,EACzB,EACQ,IAAIy0C,GAAY,GAQhB,GAPA/H,IAAA,MAAAA,GAAc,CACV,GAAG9sC,GACH,QAAAs0C,GACA,aAAAM,GACA,eAAgB,IAAOC,GAAY,GACnC,iBAAkB,IAAMA,EACpC,GACY,CAACA,IAAaT,KAAa,QAAaC,KAAa,QAAa/0C,EAAM,eAAiB,KAGzF,GAFAA,EAAM,aAAa,QAAQ80C,GAAUC,EAAQ,EAC7C/0C,EAAM,aAAa,cAAgB,WAC/Bm1C,KAAc,QAAaC,KAAe,QAAaC,KAAe,OACtEr1C,EAAM,aAAa,aAAam1C,GAAWC,GAAYC,EAAU,MAEhE,CACD,KAAM,CAAC9yB,GAAKtN,EAAG,EAAIvU,GAAK,SACxB,GAAIuU,KAAQ,OAAW,CACnB,MAAMsZ,GAAY,SAAS,cAAc,QAAQ,EAC3CinB,GAAsB7F,GAAiBthB,EAAQ9L,GAAKtN,EAAG,EAC7Dje,GAAOw+C,KAAwB,MAAS,EACxC,MAAMpQ,GAAM,KAAK,KAAK,OAAO,kBAAoB,CAAC,EAClD7W,GAAU,MAAQinB,GAAoB,MAAQpQ,GAC9C7W,GAAU,OAASinB,GAAoB,OAASpQ,GAChD,MAAMhf,GAAMmI,GAAU,WAAW,IAAI,EACjCnI,KAAQ,OACRA,GAAI,MAAMgf,GAAKA,EAAG,EAClBhf,GAAI,aAAe,SACfnR,KAAQ,IACRmR,GAAI,KAAOmB,GAAM,eACjBnB,GAAI,UAAYmB,GAAM,SACtBnB,GAAI,SAAS,EAAG,EAAGmI,GAAU,MAAOA,GAAU,MAAM,EACpD+R,GAAWla,GAAK,EAAG,EAAGovB,GAAoB,MAAOA,GAAoB,OAAQtqB,GAAc3I,EAAG,EAAG,GAAOgF,GAAO,GAAO,OAAW,OAAW,GAAO,EAAGoT,GAAe6E,GAAoB,EAAK,IAG9LpZ,GAAI,KAAOmB,GAAM,aACjBnB,GAAI,UAAYmB,GAAM,OACtBnB,GAAI,SAAS,EAAG,EAAGmI,GAAU,MAAOA,GAAU,MAAM,EACpDwP,GAAS3X,GAAK6T,EAAe,CAAC1X,GAAKtN,EAAG,CAAC,EAAG,EAAGA,GAAK,GAAO,GAAO,EAAG,EAAGugC,GAAoB,MAAOA,GAAoB,OAAQ,GAAOjuB,GAAOA,GAAM,OAAQmT,GAAaC,GAAe,EAAG,OAAW,GAAO,EAAG,OAAW,OAAW,OAAWM,GAAqB/N,GAAiB,IAAM,EAAS,IAG3SqB,GAAU,MAAM,KAAO,QACvBA,GAAU,MAAM,SAAW,WAC3BA,GAAU,MAAM,MAAQ,GAAGinB,GAAoB,KAAK,KACpDjnB,GAAU,MAAM,OAAS,GAAGinB,GAAoB,MAAM,KACtD,SAAS,KAAK,OAAOjnB,EAAS,EAC9BvuB,EAAM,aAAa,aAAauuB,GAAWinB,GAAoB,MAAQ,EAAGA,GAAoB,OAAS,CAAC,EACxG,OAAO,WAAW,IAAM,CACpBjnB,GAAU,OAAM,CACnB,EAAE,CAAC,CACP,CACJ,MAGDvuB,EAAM,eAAc,CAEhC,EAAO,CACC4tC,GACAtO,EACAuQ,GACArC,GACAmC,GACApoB,GACA2D,GACAyP,GACA6E,GACAvF,EACAS,GACAO,GACA/N,EACR,CAAK,EACDjf,GAAiB,YAAa4mC,IAAiBnH,GAAA,YAAAA,EAAgB,UAAW,KAAM,GAAO,EAAK,EAC5F,MAAM+H,GAAmBlnC,WACnBmnC,GAAiBlkC,cAAmBxR,GAAU,CAChD,MAAMquB,EAAS73B,GAAI,QAKnB,GAJIw3C,KAAW,QAEXhuC,EAAM,eAAc,EAEpBquB,IAAW,MAAQ0f,KAAmB,OACtC,OAEJ,MAAMrtC,GAAOmvC,GAAwBxhB,EAAQruB,EAAM,QAASA,EAAM,OAAO,EACnE,CAAC21C,GAAQ1gC,EAAG,EAAIvU,GAAK,SACrB6hB,GAAMozB,IAAUtI,GAAqB,EAAI,GACzC,CAACuI,GAAWC,EAAS,EAAIJ,GAAiB,SAAW,IACvDG,KAAcrzB,IAAOszB,KAAc5gC,MACnCwgC,GAAiB,QAAU,CAAClzB,GAAKtN,EAAG,EACpC84B,GAAe,CAACxrB,GAAKtN,EAAG,EAAGjV,EAAM,YAAY,EAEpD,EAAE,CAACqtC,GAAoBwC,GAAyB9B,GAAgBC,EAAM,CAAC,EACxE//B,GAAiB,WAAYynC,IAAgBhI,GAAA,YAAAA,EAAgB,UAAW,KAAM,GAAO,EAAK,EAC1F,MAAMoI,GAAgBtkC,cAAkB,IAAM,CAC1CikC,GAAiB,QAAU,OAC3BhI,IAAA,MAAAA,IACR,EAAO,CAACA,EAAS,CAAC,EACdx/B,GAAiB,UAAW6nC,IAAepI,GAAA,YAAAA,EAAgB,UAAW,KAAM,GAAO,EAAK,EACxF,MAAMqI,EAAavkC,cAAmBxR,GAAU,CAC5C,MAAMquB,EAAS73B,GAAI,QACnB,GAAI63B,IAAW,MAAQ2f,KAAW,OAC9B,OAGJhuC,EAAM,eAAc,EACpB,MAAMU,GAAOmvC,GAAwBxhB,EAAQruB,EAAM,QAASA,EAAM,OAAO,EACnE,CAAC21C,GAAQ1gC,EAAG,EAAIvU,GAAK,SACrB6hB,GAAMozB,IAAUtI,GAAqB,EAAI,GAC/CW,GAAO,CAACzrB,GAAKtN,EAAG,EAAGjV,EAAM,YAAY,CACxC,EAAE,CAACqtC,GAAoBwC,GAAyB7B,EAAM,CAAC,EACxD//B,GAAiB,OAAQ8nC,GAAYrI,GAAA,YAAAA,EAAgB,UAAW,KAAM,GAAO,EAAK,EAClF,MAAMsI,GAAkBxkC,cAAkB,IAAM,CAC5Cy8B,IAAA,MAAAA,IACR,EAAO,CAACA,EAAW,CAAC,EAChBhgC,GAAiB,YAAa+nC,IAAiBtI,GAAA,YAAAA,EAAgB,UAAW,KAAM,GAAO,EAAK,EAC5F,MAAMuI,GAAe1nC,SAAa9T,CAAS,EAC3Cw7C,GAAa,QAAUx7C,EACvB,MAAMy7C,GAAW3nC,SAAa,IAAI,EAC5B4nC,GAAe3kC,cAAmBlP,GAAO,OAEvC9L,GAAI,UAAY,MAAQ,CAACA,GAAI,QAAQ,SAAS,SAAS,aAAa,IAEpE8L,IAAO,MAAQ2zC,GAAa,QAAQ,UAAY,QAChDvnC,EAAA6+B,IAAA,YAAAA,GAAW,UAAX,MAAA7+B,EAAoB,MAAM,CACtB,cAAe,EAC/B,GAEiBpM,IAAO,MACZA,EAAG,MAAM,CACL,cAAe,EAC/B,CAAa,EAEL4zC,GAAS,QAAU5zC,EAC3B,EAAO,CAACirC,EAAS,CAAC,EACd6I,EAAyB,oBAAChK,EAAc,KAAO,CAC3C,MAAO,IAAM,OACT,MAAM9pC,EAAK4zC,GAAS,QAKhB5zC,IAAO,MAAQ,CAAC,SAAS,SAASA,CAAE,GACpCoM,EAAA6+B,IAAA,YAAAA,GAAW,UAAX,MAAA7+B,EAAoB,MAAM,CACtB,cAAe,EACnC,GAGgBpM,EAAG,MAAM,CACL,cAAe,EACnC,CAAiB,CAER,EACD,UAAW,CAACigB,EAAKtN,IAAQ,CACrB,GAAI,EAAAs4B,KAAc,QAAaA,GAAU,UAAY,MAGrD,OAAOoC,GAAiBpC,GAAU,QAAShrB,GAAO,EAAGtN,GAAO,EAAE,CACjE,EACD,OAAAslB,EACH,GAAG,CAACgT,GAAWhT,GAAQoV,EAAgB,CAAC,EACzC,MAAM0G,GAAwB9nC,WACxB+nC,GAAoBpmC,GAAiB,IAAM,cAC7C,GAAI3N,EAAQ,KAAM8rC,IAAA,YAAAA,GAAc,4BAA6B,GACzD,OAAO,KACX,IAAIlZ,EAAgB7Q,GAAoB4G,GAAe3G,GAAahiB,EAAO88B,GAAkBta,EAAU,EACvG,MAAMwxB,EAAYlJ,GAAqB,EAAI,GACvC,CAACA,MAAsB3+B,GAAAymB,EAAc,CAAC,IAAf,YAAAzmB,GAAkB,eAAgB,IACzDymB,EAAgBA,EAAc,MAAM,CAAC,GAEzC,KAAM,CAACqhB,GAAMC,EAAI,IAAItZ,GAAA1iC,EAAU,UAAV,YAAA0iC,GAAmB,OAAQ,GAC1CnjC,IAAQgkC,GAAAvjC,EAAU,UAAV,YAAAujC,GAAmB,MAC3B0Y,GAAcvhB,EAAc,IAAIp8B,IAAKA,GAAE,WAAW,EAClD49C,GAAcC,GAAUtxB,EAAa,KAAK,IAAInB,EAAMmB,EAAc+mB,CAAmB,CAAC,EAG5F,OAAImK,KAAS,QACTC,KAAS,QACT,EAAEC,GAAY,SAASF,EAAI,GAAKG,GAAY,SAASF,EAAI,IACzDN,GAAa,IAAI,EAEbz/C,gBAAoB,QAAS,CAAE,IAAK,cAAe,KAAM,OAAQ,gBAAiBytB,EAAO,EAAG,uBAAwB,OAAQ,gBAAiB+G,GAAc,OAASqrB,CAAW,EACnL7/C,gBAAoB,QAAS,CAAE,KAAM,UAAY,EAC7CA,EAAmB,cAAC,KAAM,CAAE,KAAM,MAAO,gBAAiB,CAAG,EAAEy+B,EAAc,IAAIp8B,IAAMrC,EAAmB,cAAC,KAAM,CAAE,KAAM,eAAgB,gBAAiB+D,EAAU,QAAQ,SAAS1B,GAAE,WAAW,EAAG,gBAAiBA,GAAE,YAAc,EAAIw9C,EAAW,SAAU,GAAI,QAASzxC,IAAK,CACzQ,GAAIA,GAAE,SAAWoxC,GAAS,QAE1B,OAAOpI,IAAA,YAAAA,GAAgB,CAAC/0C,GAAE,YAAa,EAAE,EACjE,EAAuB,IAAKA,GAAE,WAAW,EAAIA,GAAE,KAAK,CAAE,CAAC,CAAC,EAC5CrC,gBAAoB,QAAS,CAAE,KAAM,UAAY,EAAEigD,GAAY,IAAI1hC,IAAQve,gBAAoB,KAAM,CAAE,KAAM,MAAO,gBAAiB+D,EAAU,KAAK,SAASwa,EAAG,EAAG,IAAKA,GAAK,gBAAiBA,GAAM,CAAG,EAAEkgB,EAAc,IAAIp8B,IAAK,CAC5N,MAAMwpB,GAAMxpB,GAAE,YACRb,GAAMuzB,GAAmBlJ,GAAKtN,EAAG,EACjC4hC,GAAUL,KAASj0B,IAAOk0B,KAASxhC,GACnChT,GAAWjI,KAAU,QACvBuoB,IAAOvoB,GAAM,GACbuoB,GAAMvoB,GAAM,EAAIA,GAAM,OACtBib,IAAOjb,GAAM,GACbib,GAAMjb,GAAM,EAAIA,GAAM,OACpBkhB,GAAK,cAAcqH,EAAG,IAAItN,EAAG,GAC7B2N,GAAW,CAACL,GAAKtN,EAAG,EACpB6hC,GAAc7c,EAAerX,GAAU,EAAI,EACjD,OAAQlsB,gBAAoB,KAAM,CAAE,IAAKwB,GAAK,KAAM,WAAY,gBAAiBqqB,GAAM,EAAIg0B,EAAW,gBAAiBt0C,GAAU,gBAAiB7I,GAAgB09C,EAAW,GAAK,CAACx9C,GAAgBw9C,EAAW,EAAG,GAAI57B,GAAI,cAAeA,GAAI,QAAS,IAAM,CACnP,MAAMmT,GAASkf,IAAA,YAAAA,GAAW,QAC1B,GAAIlf,IAAW,KAEf,OAAOhP,IAAA,YAAAA,GAAY,CACf,OAAQswB,GAAiBthB,GAAQ9L,GAAKtN,EAAG,EACzC,OAAQ,OACR,eAAgB,OAChB,gBAAiB,OACjB,QAAS,GACT,IAAK,QACL,QAAS,GACT,QAAS,GACT,SAAU,GACV,OAAQ,GACR,SAAU,OACV,SAAA2N,EAC5B,EACA,EAAuB,eAAgB9d,IAAK,WACpB,GAAI,EAAAA,GAAE,SAAWoxC,GAAS,WACrBxnC,GAAA2nC,GAAsB,UAAtB,YAAA3nC,GAAgC,MAAO6T,MACpC4a,GAAAkZ,GAAsB,UAAtB,YAAAlZ,GAAgC,MAAOloB,IAE/C,OAAAohC,GAAsB,QAAUzzB,GACzBkrB,IAAA,YAAAA,GAAgBlrB,GAC1B,EAAE,IAAKi0B,GAAUV,GAAe,OAAW,SAAU,EAAE,EAAIjK,GAAW4K,GAAa5pB,EAAe,CAAC,CACxH,CAAa,CAAC,CAAE,CAAC,CAAC,CAClB,EAAO,CACC3qB,EACA2oB,GACA3G,GACA8a,GACAta,GACAZ,EACAmB,EACA+mB,EACA5xC,EACA07C,GACAlc,EACAsT,GACAluB,GACAswB,GACA7B,EACH,EAAE,GAAG,EACAiJ,GAAW30B,IAAkB,GAAK,CAACyqB,EAAe,EAAItoB,GAAcnC,EAAgB,EAAI4N,GAAM,CAACjL,GAAa,IAAK,EAAG,CAAC,EACrHiyB,EAAkB,CAAC1xB,EAAc,GAAKC,GACtC0xB,GAAYnK,EAAmB9c,GAAM,CAACgnB,EAAkB,IAAK,EAAG,CAAC,EAAtC,EAC3BE,GAAe5oB,UAAc,IAAM,CACrC,GAAI,CAACyoB,IAAY,CAACE,GACd,OAAO,KAEX,MAAME,EAAS,CACX,SAAU,WACV,IAAK,EACL,KAAMzH,GACN,MAAOntC,EAAQmtC,GACf,OAAQzlC,EACR,QAAS8sC,GACT,cAAe,OACf,WAAa5I,GAAiC,OAAjB,eAC7B,UAAW,4CACvB,EACciJ,EAAS,CACX,SAAU,WACV,IAAK5xB,GACL,KAAM,EACN,MAAOjjB,EACP,OAAQ0H,EACR,QAASgtC,GACT,cAAe,OACf,WAAa7I,GAAiC,OAAjB,eAC7B,UAAW,4CACvB,EACQ,OAAQ13C,gBAAoB2gD,WAAgB,KACxCN,GAAW,GAAKrgD,gBAAoB,MAAO,CAAE,GAAI,WAAY,MAAOygD,EAAQ,EAC5EF,GAAW,GAAKvgD,EAAmB,cAAC,MAAO,CAAE,GAAI,WAAY,MAAO0gD,CAAQ,EAAC,CACzF,EAAO,CAACL,GAAUE,GAAUvH,GAASntC,EAAO4rC,GAAe3oB,GAAmBvb,EAAQmkC,EAAa,CAAC,EAC1FkJ,GAAehpB,UAAc,KAAO,CACtC,SAAU,WACV,IAAK,EACL,KAAM,CACd,GAAQ,CAAE,GACN,OAAQ53B,gBAAoB2gD,WAAgB,KACxC3gD,gBAAoB,SAAU,CAAE,cAAe,mBAAoB,SAAU,EAAG,UAAW+9C,GAAe,QAASC,GAAa,QAAShI,EAAiB,OAAQC,EAAc,IAAKgI,GAAS,MAAOp3C,EAAO,EAAE+4C,EAAiB,EAC/N5/C,EAAmB,cAAC,SAAU,CAAE,IAAKq4C,GAAY,MAAOuI,GAAc,EACtEJ,EAAY,CACpB,EACAK,GAAeC,OAAWlhD,aAAiB61C,EAAQ,CAAC,EC7qCpD,SAASsL,GAAiBxhB,EAAQ1zB,EAAOm1C,EAAKnvB,EAAK,CAC/C,OAAOyH,GAAM,KAAK,MAAMztB,GAAS0zB,EAAO,YAAc,EAAE,EAAG,KAAK,KAAKyhB,CAAG,EAAG,KAAK,MAAMnvB,CAAG,CAAC,CAC9F,CACA,MAAMovB,GAAcvzC,GAAK,CACrB,KAAM,CAACwzC,EAAiBC,CAAkB,EAAIznC,EAAc,WACtD,CAACu4B,EAAWmP,CAAY,EAAI1nC,EAAc,WAC1C,CAAC2nC,EAASC,CAAU,EAAI5nC,EAAc,WACtC,CAAC6nC,EAASC,CAAU,EAAI9nC,EAAc,WACtC,CAAC+nC,EAAeC,CAAgB,EAAIhoC,EAAc,SAAC,EAAK,EACxD,CAACioC,EAAYC,CAAa,EAAIloC,EAAc,WAC5C,CAACmoC,EAASC,CAAU,EAAIpoC,EAAc,WACtC,CAACqoC,EAASC,CAAU,EAAItoC,EAAc,WACtC,CAACuoC,EAAeC,CAAgB,EAAIxoC,EAAc,SAAC,EAAK,EACxD,CAACyoC,EAAYC,CAAa,EAAI1oC,EAAc,WAC5C,CAAE,kBAAAm8B,EAAmB,uBAAAC,EAAwB,eAAAvS,EAAgB,cAAA8e,EAAe,eAAAC,EAAgB,oBAAAC,EAAqB,kBAAAC,EAAmB,QAAAC,EAAS,eAAA5rB,EAAgB,eAAAD,EAAgB,WAAA8rB,GAAY,YAAAC,EAAa,oBAAAC,GAAqB,YAAAtM,GAAa,UAAAC,GAAW,cAAAG,GAAe,YAAAI,EAAa,UAAAD,EAAY,EAAGnpC,EAC9Rm1C,IAAaP,GAAkBE,GAAqBD,KAAyB,OAC7E,CAAE,QAAA92B,GAAS,UAAA1nB,EAAW,EAAG2J,EACzBo1C,EAAkB/+C,GAAU,QAC5Bg/C,EAAoBjoC,cAAmB9Q,IAAS,CAClD,KAAM,CAAC6hB,GAAKtN,EAAG,EAAIvU,GAAK,SACpBq3C,IAAY,QAAaE,IAAY11B,IAAOA,IAAO82B,GACnDjB,EAAiB,EAAI,EACrBF,EAAW31B,EAAG,GAETg2B,IAAY,QAAatjC,KAAQ,QACtC2jC,EAAiB,EAAI,EACrBF,EAAW,KAAK,IAAI,EAAGzjC,EAAG,CAAC,GAGtB0zB,IAAc,QAAa,CAACwP,GAAiB,CAACQ,IACnDvL,IAAA,MAAAA,GAAgB1sC,IAE5B,EAAO,CAACq3C,EAASQ,EAASN,EAAS7K,GAAeiM,EAAa1Q,EAAWwP,EAAeQ,CAAa,CAAC,EAC7Fe,EAAaX,IAAkB,OAC/B/F,EAAkBxhC,cAAmB9Q,IAAS,QAChD,GAAIA,GAAK,SAAW,EAAG,CACnB,KAAM,CAAC6hB,GAAKtN,EAAG,EAAIvU,GAAK,SACxB,GAAIA,GAAK,OAAS,iBAAmBA,GAAK,QAAU64C,GAAW,CAC3D,MAAM1I,IAASniC,GAAAyqC,GAAA,YAAAA,EAAS,UAAT,YAAAzqC,GAAkB,UAAUyT,GAAQ,OAAS,EAAG,IAC3D0uB,KAAW,SACXgH,EAAmBhH,GAAO,CAAC,EAC3BiH,EAAa31B,GAAQ,OAAS,CAAC,EAEtC,SACQzhB,GAAK,OAAS,UAAY6hB,IAAO82B,EAAa,CACnD,MAAMhrB,GAASkf,IAAA,YAAAA,GAAW,QAC1B,GAAI7sC,GAAK,QAAU64C,IAAalrB,GAAQ,CACpCwpB,EAAmBn3C,GAAK,OAAO,CAAC,EAChCo3C,EAAav1B,EAAG,EAEhB,MAAMqtB,GADOvhB,GAAO,wBACD,MAAQA,GAAO,YAC5B9rB,GAAQ7B,GAAK,OAAO,MAAQkvC,GAClCqJ,GAAA,MAAAA,EAAsB92B,GAAQI,EAAG,EAAGhgB,GAAOggB,GAAKhgB,IAAS4f,GAAQI,EAAG,EAAE,YAAc,GACvF,MACQ7hB,GAAK,OAAS,UAAYg5C,IAC/BpB,EAAc53C,GAAK,OAAO,CAAC,EAC3Bs3C,EAAWz1B,EAAG,EAErB,MACQ7hB,GAAK,OAAS,QACnB24C,EAAc,GACd92B,KAAQ,GACRtN,KAAQ,QACRmkC,KAAe,SACfN,EAAcp4C,GAAK,OAAO,CAAC,EAC3B83C,EAAWvjC,EAAG,EAErB,CACD+3B,IAAA,MAAAA,GAActsC,GACjB,EAAE,CAACssC,GAAauM,GAAWF,EAAaD,GAAYD,EAASh3B,GAASu3B,EAAYT,EAAqB1L,EAAS,CAAC,EAC5GoM,GAA2BnoC,cAAkB,CAAC+Q,GAAKq3B,KAAmB,CACpEzB,GAAiBQ,GAErBpM,GAAA,MAAAA,EAAoBhqB,GAAKq3B,GAC5B,EAAE,CAACzB,EAAeQ,EAAepM,CAAiB,CAAC,EAC9CsN,GAAgCroC,cAAkB,CAAC+Q,GAAKq3B,KAAmB,CACzEzB,GAAiBQ,GAErBnM,GAAA,MAAAA,EAAyBjqB,GAAKq3B,GACjC,EAAE,CAACzB,EAAeQ,EAAenM,CAAsB,CAAC,EACnDsN,GAAqBvrC,SAAa,EAAE,EACpCwrC,GAAWvoC,cAAkB,IAAM,CACrCsoC,GAAmB,QAAU,GAC7BtB,EAAW,MAAS,EACpBE,EAAW,MAAS,EACpBI,EAAc,MAAS,EACvBF,EAAiB,EAAK,EACtBZ,EAAW,MAAS,EACpBE,EAAW,MAAS,EACpBI,EAAc,MAAS,EACvBF,EAAiB,EAAK,EACtBN,EAAa,MAAS,EACtBD,EAAmB,MAAS,CAC/B,EAAE,CAAE,GACC1E,GAAgB3hC,cAAkB,CAAC9Q,GAAM2yC,KAAc,CACzD,GAAI3yC,GAAK,SAAW,EAAG,CACnB,GAAIioC,IAAc,OAAW,CAGzB,IAAI6Q,GAAA,YAAAA,EAAiB,SAAS7Q,MAAe,GACzC,UAAW5vC,MAAKygD,EAAiB,CAC7B,GAAIzgD,KAAM4vC,EACN,SACJ,MAAMpmB,GAAMJ,GAAQppB,EAAC,EACfihD,GAAUvC,GAAiBl1B,GAAKu3B,GAAmB,QAASxsB,EAAgBC,CAAc,EAChGyrB,GAAA,MAAAA,EAAiBz2B,GAAKy3B,GAASjhD,GAAGihD,IAAWz3B,GAAI,YAAc,GAClE,CAEL,MAAM03B,GAAKxC,GAAiBt1B,GAAQwmB,CAAS,EAAGmR,GAAmB,QAASxsB,EAAgBC,CAAc,EAE1G,GADA2rB,GAAA,MAAAA,EAAoB/2B,GAAQwmB,CAAS,EAAGsR,GAAItR,EAAWsR,IAAM93B,GAAQwmB,CAAS,EAAE,YAAc,IAC1F6Q,EAAgB,SAAS7Q,CAAS,EAClC,UAAW5vC,MAAKygD,EAAiB,CAC7B,GAAIzgD,KAAM4vC,EACN,SACJ,MAAMpmB,GAAMJ,GAAQppB,EAAC,EACf2Y,GAAI+lC,GAAiBl1B,GAAKu3B,GAAmB,QAASxsB,EAAgBC,CAAc,EAC1F2rB,GAAA,MAAAA,EAAoB32B,GAAK7Q,GAAG3Y,GAAG2Y,IAAK6Q,GAAI,YAAc,GACzD,CAER,CACDw3B,KACIhC,IAAY,QAAaE,IAAY,SACrCc,GAAA,MAAAA,EAAgBhB,EAASE,IAEzBM,IAAY,QAAaE,IAAY,SACrCW,IAAA,MAAAA,GAAab,EAASE,GAE7B,CACDxL,IAAA,MAAAA,GAAYvsC,GAAM2yC,GAC1B,EAAO,CACCpG,GACAtE,EACAoP,EACAE,EACAM,EACAE,EACAe,EACAN,EACA/2B,GACAmL,EACAC,EACAyrB,EACAD,EACAK,GACAW,EACR,CAAK,EACKG,GAAa5rB,UAAc,IAAM,CACnC,GAAI,EAAAypB,IAAY,QAAaE,IAAY,SAErCF,IAAYE,IAEZqB,IAAA,YAAAA,GAAsBvB,EAASE,MAAa,GAEhD,MAAO,CACH,IAAKF,EACL,KAAME,CAClB,CACK,EAAE,CAACF,EAASE,EAASqB,EAAmB,CAAC,EACpCnM,GAAc37B,cAAmBxR,IAAU,CAC7C,MAAMquB,GAASkf,IAAA,YAAAA,GAAW,QAC1B,GAAIwK,IAAY,QAAaM,IAAe,OAC3B,KAAK,IAAIr4C,GAAM,QAAUq4C,CAAU,EACrC,IACPD,EAAiB,EAAI,UAGpBG,IAAY,QAAaM,IAAe,OAChC,KAAK,IAAI74C,GAAM,QAAU64C,CAAU,EACrC,IACPD,EAAiB,EAAI,UAGpBjQ,IAAc,QAAaiP,IAAoB,QAAavpB,GAAQ,CAEzE,MAAMuhB,GADOvhB,GAAO,wBACD,MAAQA,GAAO,YAC5B8rB,IAAYn6C,GAAM,QAAU43C,GAAmBhI,GAC/C3Z,GAAS9T,GAAQwmB,CAAS,EAC1BsR,GAAKxC,GAAiBxhB,GAAQkkB,GAAU7sB,EAAgBC,CAAc,EAG5E,GAFAyrB,GAAA,MAAAA,EAAiB/iB,GAAQgkB,GAAItR,EAAWsR,IAAMhkB,GAAO,YAAc,IACnE6jB,GAAmB,QAAUK,IACzBX,GAAA,YAAAA,EAAiB,WAAY7Q,EAC7B,UAAW5vC,MAAKygD,EAAiB,CAC7B,GAAIzgD,KAAM4vC,EACN,SACJ,MAAMpmB,GAAMJ,GAAQppB,EAAC,EACf2Y,GAAI+lC,GAAiBl1B,GAAKu3B,GAAmB,QAASxsB,EAAgBC,CAAc,EAC1FyrB,GAAA,MAAAA,EAAiBz2B,GAAK7Q,GAAG3Y,GAAG2Y,IAAK6Q,GAAI,YAAc,GACtD,CAER,CACT,EAAO,CACCw1B,EACAM,EACAE,EACAM,EACAlQ,EACAiP,EACAz1B,GACAmL,EACAC,EACAyrB,EACAQ,EACAjM,EACR,CAAK,EACK6M,GAAwB5oC,cAAkB,CAACrY,GAAMkhD,KAAgB,CACnE,GAAI9B,IAAY,QAAaE,IAAY,OACrC,OAAOxe,EAAe9gC,GAAMkhD,EAAW,EAE3C,GAAI,CAAC93B,GAAKtN,EAAG,EAAI9b,GACjB,OAAI8b,KAAQwjC,EACRxjC,GAAMsjC,GAGFtjC,GAAMwjC,IACNxjC,IAAO,GACPA,IAAOsjC,IACPtjC,IAAO,IAERglB,EAAe,CAAC1X,GAAKtN,EAAG,EAAGolC,EAAW,CAChD,EAAE,CAAC9B,EAASE,EAASxe,CAAc,CAAC,EAC/B4a,GAAkBrjC,EAAiB,YAAC9Q,IAAQ,CAC9C8sC,GAAA,MAAAA,EAAc9sC,IACTA,GAAK,oBACNq5C,IAEZ,EAAO,CAACA,GAAUvM,CAAW,CAAC,EAC1B,OAAQ92C,gBAAoBy1C,GAAU,CAAE,oBAAqB/nC,EAAE,oBAAqB,UAAWA,EAAE,UAAW,YAAaA,EAAE,YAAa,YAAaA,EAAE,YAAa,QAASA,EAAE,QAAS,aAAcA,EAAE,aAAc,cAAeA,EAAE,cAAe,WAAYA,EAAE,WAAY,SAAUA,EAAE,SAAU,aAAcA,EAAE,aAAc,eAAgBA,EAAE,eAAgB,aAAcA,EAAE,aAAc,WAAYA,EAAE,WAAY,mBAAoBA,EAAE,mBAAoB,aAAcA,EAAE,aAAc,aAAcA,EAAE,aAAc,cAAeA,EAAE,cAAe,gBAAiBA,EAAE,gBAAiB,gBAAiBA,EAAE,gBAAiB,oBAAqBA,EAAE,oBAAqB,kBAAmBA,EAAE,kBAAmB,aAAcA,EAAE,aAAc,YAAaA,EAAE,YAAa,OAAQA,EAAE,OAAQ,iBAAkBA,EAAE,iBAAkB,kBAAmBA,EAAE,kBAAmB,aAAcukC,EAAW,YAAavkC,EAAE,YAAa,UAAWA,EAAE,UAAW,UAAWA,EAAE,UAAW,aAAcA,EAAE,aAAc,gBAAiBA,EAAE,gBAAiB,cAAeA,EAAE,cAAe,cAAeA,EAAE,cAAe,UAAWA,EAAE,UAAW,YAAaA,EAAE,YAAa,eAAgBA,EAAE,eAAgB,OAAQA,EAAE,OAAQ,UAAWA,EAAE,UAAW,QAASA,EAAE,QAAS,YAAaA,EAAE,YAAa,cAAeA,EAAE,cAAe,UAAWA,EAAE,UAAW,KAAMA,EAAE,KAAM,UAAWA,EAAE,UAAW,cAAeA,EAAE,cAAe,cAAeA,EAAE,cAAe,MAAOA,EAAE,MAAO,mBAAoBA,EAAE,mBAAoB,aAAcA,EAAE,aAAc,WAAYA,EAAE,WAAY,WAAYA,EAAE,WAAY,gBAAiBA,EAAE,gBAAiB,eAAgBA,EAAE,eAAgB,MAAOA,EAAE,MAAO,eAAgBg2C,GAAuB,WAAYzR,IAAc,OAAW,kBAAmBgR,GAA0B,uBAAwBE,GAA+B,WAAY1B,EAAe,cAAesB,EAAmB,YAAa5E,GAAiB,YAAa7B,EAAiB,YAAauG,GAAW,UAAWpG,GAAe,iBAAkB+G,GAAY,eAAgB/M,GAAa,IAAKgM,CAAS,EACzhE,ECxOO,SAASmB,GAAkBC,EAAa,CAC3C,MAAM/jD,EAAMgkD,SAAO,IAAI,EACjB,CAAC7sB,EAAM8sB,CAAO,EAAIC,WAAS,CAC7B,MAAOH,GAAA,YAAAA,EAAc,GACrB,OAAQA,GAAA,YAAAA,EAAc,EAC9B,CAAK,EACDI,yBAAgB,IAAM,CAClB,MAAMC,EAAiBC,GAAW,CAC9B,UAAWC,KAASD,EAAS,CACzB,KAAM,CAAE,MAAAt4C,EAAO,OAAA0H,CAAQ,EAAI6wC,GAASA,EAAM,aAAgB,GAC1DL,EAAQrG,GAAOA,EAAG,QAAU7xC,GAAS6xC,EAAG,SAAWnqC,EAASmqC,EAAK,CAAE,MAAA7xC,EAAO,OAAA0H,CAAM,CAAG,CACtF,CACb,EACc8wC,EAAiB,IAAI,OAAO,eAAeH,CAAc,EAC/D,OAAIpkD,EAAI,SACJukD,EAAe,QAAQvkD,EAAI,QAAS,MAAS,EAE1C,IAAM,CACTukD,EAAe,WAAU,CACrC,CAEA,EAAO,CAACvkD,EAAI,OAAO,CAAC,EACT,CAAE,IAAAA,EAAK,GAAGm3B,EACrB,CCxBA,MAAMqtB,GAAmB,CAACC,EAAWl+B,EAAUm+B,IAAmB,CAC9D,MAAMC,EAAQX,SAAO,IAAI,EACnBY,EAAaZ,SAAO,IAAI,EACxBa,EAAqBb,SAAO,IAAI,EAChCc,EAAYd,SAAO,CAAC,EACpBe,EAAcf,SAAOz9B,CAAQ,EACnCw+B,EAAY,QAAUx+B,EACtB,MAAMy+B,EAAWN,EAAe,QAChCO,YAAU,IAAM,CACZ,MAAMC,EAAe,IAAM,SACvB,GAAIN,EAAW,UAAY,IAASI,IAAa,KAAM,CACnD,MAAMG,EAAwB,CAACH,EAAS,WAAYA,EAAS,SAAS,EACtE,KAAI9sC,EAAA2sC,EAAmB,UAAnB,YAAA3sC,EAA6B,MAAOitC,EAAsB,CAAC,KAC3Dxe,EAAAke,EAAmB,UAAnB,YAAAle,EAA6B,MAAOwe,EAAsB,CAAC,EAC3D,GAAIL,EAAU,QAAU,GAAI,CAExBD,EAAmB,QAAU,KAC7BD,EAAW,QAAU,KACrB,MACH,MAEGE,EAAU,eAIdA,EAAU,QAAU,EACpBC,EAAY,QAAQI,EAAsB,CAAC,EAAGA,EAAsB,CAAC,CAAC,EACtEN,EAAmB,QAAUM,EAEjCR,EAAM,QAAU,OAAO,WAAWO,EAAc,iBAAU,CAC7D,CACb,EACcE,EAAa,IAAM,CACrBR,EAAW,QAAU,GACrBC,EAAmB,QAAU,KACzBF,EAAM,UAAY,OAClB,OAAO,aAAaA,EAAM,OAAO,EACjCA,EAAM,QAAU,KAEhC,EACcU,EAAY77C,GAAU,CACpBA,EAAM,QAAQ,SAAW,IAEzBo7C,EAAW,QAAU,GACrBE,EAAU,QAAU,EACpBH,EAAM,QAAU,OAAO,WAAWO,EAAc,iBAAU,EAE1E,EACQ,GAAIT,GAAaO,IAAa,KAAM,CAChC,MAAMrtC,EAAUqtC,EAChB,OAAArtC,EAAQ,iBAAiB,aAAcytC,CAAU,EACjDztC,EAAQ,iBAAiB,WAAY0tC,CAAQ,EACtC,IAAM,CACT1tC,EAAQ,oBAAoB,aAAcytC,CAAU,EACpDztC,EAAQ,oBAAoB,WAAY0tC,CAAQ,EAC5CV,EAAM,UAAY,MAClB,OAAO,aAAaA,EAAM,OAAO,CAErD,CACS,CACT,EAAO,CAACF,EAAWO,CAAQ,CAAC,CAC5B,ECxDMM,GAAoB,IAAM13C,GAAKA,EAAE,SAAW,SAAW,OACvD23C,GAAiCh/C,GAAO,KAAK,EAAE,CACnD,KAAM,oBACN,MAAO,eACP,UAAW,GACX,KAAM,CACJ,aAAc,CAAC++C,IAAM,CACtB,CACH,CAAC,EACD,SAASE,GAAkBC,EAAO,CAChC,KAAM,CAACC,EAAYC,CAAa,EAAI/rC,EAAc,SAAC,EAAK,EAClDgsC,EAAa,OAAO,OAAW,IAAc,KAAO,OACpDC,EAAU9tC,SAAa,CAAC,EAC9B,OAAAN,GAAiB,aAAcuD,cAAkB,IAAM,CACrD,OAAO,aAAa6qC,EAAQ,OAAO,EACnCF,EAAc,EAAI,CACnB,EAAE,CAAE,GAAGC,EAAY,GAAM,EAAK,EAC/BnuC,GAAiB,WAAYuD,EAAiB,YAAC1M,GAAK,CAC9CA,EAAE,QAAQ,SAAW,IACvBu3C,EAAQ,QAAU,OAAO,WAAW,IAAMF,EAAc,EAAK,EAAGF,CAAK,EAE3E,EAAK,CAACA,CAAK,CAAC,EAAGG,EAAY,GAAM,EAAK,EAC7BF,CACT,CACO,MAAMI,GAAmBl4C,GAAK,WACnC,KAAM,CACJ,SAAA9C,EACA,aAAAi7C,EACA,aAAAC,EACA,YAAAC,EACA,OAAAC,EACA,UAAAC,EACA,UAAA9gD,EACA,yBAAA+gD,EAA2B,GAC3B,cAAAC,EAAgB,EAChB,aAAAC,EAAe,EACf,aAAAC,EACA,kBAAAC,EACA,sBAAAC,EAAwB,GACxB,UAAAC,EACA,YAAA3C,CACD,EAAGn2C,EACE+4C,EAAU,GACVC,GAAqBJ,GAAA,YAAAA,EAAmB,SAAU,GAClDK,GAAmBL,GAAA,YAAAA,EAAmB,OAAQ,GAC9CM,EAAU/uC,SAAa,CAAC,EACxBgvC,EAAchvC,SAAa,CAAC,EAC5BivC,EAAWjvC,SAAa,IAAI,EAC5B62B,EAAM,OAAO,OAAW,IAAc,EAAI,OAAO,iBACjDiW,EAAqB9sC,SAAa,CACtC,WAAY,EACZ,UAAW,EACX,cAAe,MACnB,CAAG,EACKkvC,EAAelvC,SAAa,IAAI,EAChC2tC,EAAaF,GAAkB,GAAG,EAClC,CAAC0B,EAAQC,CAAS,EAAIvtC,EAAc,SAAC,EAAI,EACzCwtC,EAAYrvC,SAAa,CAAC,EAChCgC,kBAAsB,IAAM,CAC1B,GAAI,CAACmtC,GAAUxB,GAAcb,EAAmB,QAAQ,gBAAkB,OAAW,OACrF,MAAM/4C,GAAKk7C,EAAS,QACpB,GAAIl7C,KAAO,KAAM,OACjB,KAAM,CAACu7C,EAAIC,CAAE,EAAIzC,EAAmB,QAAQ,cACxCwC,IAAO,OACTv7C,GAAG,WAAau7C,EACPC,IAAO,SAChBx7C,GAAG,UAAYw7C,GAEjBzC,EAAmB,QAAQ,cAAgB,MAC/C,EAAK,CAACa,EAAYwB,CAAM,CAAC,EACvB,MAAMK,EAAWvsC,cAAkB,CAACwsC,GAAYC,IAAc,QAC5D,MAAM37C,EAAKk7C,EAAS,QACpB,GAAIl7C,IAAO,KAAM,OACjB27C,EAAYA,GAAa37C,EAAG,UAC5B07C,GAAaA,IAAc17C,EAAG,WAC9B,MAAM47C,EAAgB7C,EAAmB,QAAQ,UAC3C8C,EAAiB9C,EAAmB,QAAQ,WAC5C+C,GAAKJ,GAAaG,EAClB5yB,GAAK0yB,EAAYC,EACnBhC,GAAckC,KAAO,GAAK7yB,KAAO,IAAM,KAAK,IAAI6yB,EAAE,EAAI,GAAK,KAAK,IAAI7yB,EAAE,EAAI,IAAMqxB,GAA4BvB,EAAmB,QAAQ,gBAAkB,SAC3JA,EAAmB,QAAQ,cAAgB,KAAK,IAAI+C,EAAE,EAAI,KAAK,IAAI7yB,EAAE,EAAI,CAAC4yB,EAAgB,MAAS,EAAI,CAAC,OAAWD,CAAa,GAElI,MAAMG,GAAOhD,EAAmB,QAAQ,cACxC2C,IAAaK,IAAA,YAAAA,GAAO,KAAML,GAC1BC,GAAYI,IAAA,YAAAA,GAAO,KAAMJ,EACzB5C,EAAmB,QAAQ,WAAa2C,GACxC3C,EAAmB,QAAQ,UAAY4C,EACvC,MAAMK,GAASh8C,EAAG,YACZi8C,GAAUj8C,EAAG,aACbk8C,GAAOP,EACPv4C,GAAQ63C,EAAY,QAAUiB,GAC9BC,GAAmBn8C,EAAG,aAAei8C,GAE3C,GADAhB,EAAY,QAAUiB,GAClBC,GAAmB,IAAM,KAAK,IAAI/4C,EAAK,EAAI,KAAQ84C,KAAS,GAAKA,KAASC,KAAqBjC,EAAel6C,EAAG,aAAe,EAAG,CACrI,MAAMo8C,GAAOF,GAAOC,GACdE,IAAcnC,EAAe+B,IAAWG,GAC9CpB,EAAQ,QAAUqB,GAAaH,EAChC,CACGH,KAAS,SACX,OAAO,aAAaT,EAAU,OAAO,EACrCD,EAAU,EAAK,EACfC,EAAU,QAAU,OAAO,WAAW,IAAMD,EAAU,EAAI,EAAG,GAAG,GAElEjB,EAAO,CACL,EAAGsB,GACH,EAAGQ,GAAOlB,EAAQ,QAClB,MAAOgB,GAASxB,EAChB,OAAQyB,GAAU1B,EAClB,eAAcnuC,GAAA+uC,EAAa,UAAb,YAAA/uC,GAAsB,cAAe,CACzD,CAAK,CACL,EAAK,CAACmuC,EAAeC,EAAcN,EAAcE,EAAQE,EAA0BV,CAAU,CAAC,EAC5FlB,GAAiBiC,GAAyB9R,GAAgB,MAAO4S,EAAUP,CAAQ,EACnF,MAAMoB,EAAcrwC,SAAawvC,CAAQ,EACzCa,EAAY,QAAUb,EACtB,MAAMc,GAAYtwC,WACZuwC,EAAiBvwC,SAAa,EAAK,EAGzCgC,kBAAsB,IAAM,CACtBuuC,EAAe,QAASf,EAAQ,EAAQe,EAAe,QAAU,EACtE,EAAE,CAACf,EAAUlB,EAAeC,CAAY,CAAC,EAC1C,MAAMiC,GAAUvtC,EAAiB,YAACzS,IAAY,CAC5Cy+C,EAAS,QAAUz+C,GACfm+C,IAAc,SAChBA,EAAU,QAAUn+C,GAE1B,EAAK,CAACm+C,CAAS,CAAC,EACd,IAAIhlD,GAAM,EACN2pB,GAAI,EAQR,IAPAs7B,EAAQ,KAAKzmD,EAAmB,cAAC,MAAO,CACtC,IAAKwB,KACL,MAAO,CACL,MAAOukD,EACP,OAAQ,CACT,CACF,EAAC,EACK56B,GAAI26B,GAAc,CACvB,MAAMxhD,GAAQ,KAAK,IAAI,IAASwhD,EAAe36B,EAAC,EAChDs7B,EAAQ,KAAKzmD,EAAmB,cAAC,MAAO,CACtC,IAAKwB,KACL,MAAO,CACL,MAAO,EACP,OAAQ8C,EACT,CACF,EAAC,EACF6mB,IAAK7mB,EACN,CACD,KAAM,CACJ,IAAAxE,GACA,MAAA+L,EACA,OAAA0H,EACJ,EAAMqwC,GAAkBC,CAAW,EAQjC,OAPI,OAAO,OAAW,QAAgB7rC,GAAAmwC,GAAU,UAAV,YAAAnwC,GAAmB,UAAWzE,MAAUkzB,GAAA0hB,GAAU,UAAV,YAAA1hB,GAAmB,SAAU56B,KACzG,OAAO,WAAW,IAAMq8C,EAAY,QAAS,EAAE,CAAC,EAChDC,GAAU,QAAU,CAClB,MAAAt8C,EACA,OAAA0H,EACN,IAEO1H,GAAS,KAAO,IAAM0H,IAAU,KAAO,EAAUvT,EAAmB,cAAC,MAAO,CAC/E,IAAKF,EACT,CAAG,EACME,gBAAoB,MAAO,CAChC,IAAKF,EACT,EAAKE,gBAAoBqlD,GAAmB,CACxC,SAAU5Q,GAAgB,KAC9B,EAAKz0C,gBAAoB,MAAO,CAC5B,UAAW,cACf,EAAK4K,CAAQ,EAAG5K,EAAmB,cAAC,MAAO,CACvC,IAAKqoD,GACL,MAAOF,GAAU,QACjB,UAAWlC,EACX,YAAa73C,IAAK,CACX63C,IACH73C,GAAE,gBAAe,EACjBA,GAAE,eAAc,EAEnB,EACD,UAAW,iBAAmBjJ,GAAa,IAC3C,SAAU,IAAMkiD,EAAU,CAC9B,EAAKrnD,gBAAoB,MAAO,CAC5B,UAAW,oBAAsBqmD,IAAiB,OAAY,cAAgB,GAClF,EAAKrmD,gBAAoB,MAAO,CAC5B,UAAW,WACZ,EAAEymD,CAAO,EAAGJ,IAAiB,QAAarmD,EAAmB,cAAC2gD,WAAgB,KAAM,CAACgG,GAAoB3mD,EAAmB,cAAC,MAAO,CACnI,UAAW,YACf,CAAG,EAAGA,EAAmB,cAAC,MAAO,CAC7B,IAAK+mD,EACL,MAAO,CACL,OAAAxzC,GACA,UAAWsyC,EAAe,KAAK,KAAKnX,EAAM,CAAC,EAC3C,SAAU,SACV,IAAK,EACL,YAAa,EACb,aAAc,IACd,YAAa0X,EACb,SAAUO,EAAmB,EAAI,OACjC,MAAOD,EAAqBN,GAAgB,EAAI,OAChD,cAAe,MAChB,CACF,EAAEC,CAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CACtB,EC5MMiC,GAAe56C,GAAK,CACtB,KAAM,CAAE,QAAA+d,EAAS,KAAAgC,EAAM,UAAAkB,EAAW,aAAAF,EAAc,kBAAAC,EAAmB,aAAAga,EAAc,cAAAhd,EAAe,aAAAisB,EAAc,aAAA4Q,EAAc,WAAAC,EAAY,UAAArjD,EAAW,uBAAAsjD,EAAwB,UAAAjC,EAAW,yBAAAN,EAA0B,aAAAG,EAAc,kBAAAC,EAAmB,YAAAoC,EAAa,YAAAC,EAAa,YAAA9E,EAAa,cAAApM,EAAgB,GAAO,cAAAC,EAAgB,GAAO,YAAAR,CAAW,EAAMxpC,EACjV,CAAE,aAAA04C,EAAc,cAAAD,GAAkBxO,GAAgB,GAClD,CAACrgB,EAAauuB,CAAY,EAAI2C,EAC9B/Z,EAAO52B,WACP+wC,EAAQ/wC,WACRgxC,EAAQhxC,WACRixC,EAAWjxC,WACXhM,GAAQ08C,EAAe,KAAK,IAAI,EAAGG,GAAe,CAAC,EACzD,IAAIn1C,EAASm1B,EAAeja,EAAeC,EAAoBD,EAC/D,GAAI,OAAOE,GAAc,SACrBpb,GAAUka,EAAOkB,MAGjB,SAAS5E,GAAI,EAAGA,GAAI0D,EAAM1D,KACtBxW,GAAUob,EAAU5E,EAAC,EAGzB4+B,IAAgB,SAChBp1C,GAAUo1C,GAEd,MAAM7yC,GAAW+B,WACXkxC,GAAcjuC,cAAkB,IAAM,WACxC,GAAIhF,GAAS,UAAY,OACrB,OACJ,MAAM9L,GAAO,CAAE,GAAG8L,GAAS,OAAO,EAClC,IAAIhS,EAAI,EACJgqB,GAAK9jB,GAAK,EAAI,EAAI,CAACA,GAAK,EAAI,EAC5Bg/C,GAAY,EACZ7pB,GAAQ,EACZn1B,GAAK,EAAIA,GAAK,EAAI,EAAI,EAAIA,GAAK,EAC/B,IAAIi/C,GAAiB,EACrB,QAAS9kD,GAAI,EAAGA,GAAIunB,EAAevnB,KAC/B8kD,IAAkBx9B,EAAQtnB,EAAC,EAAE,MAEjC,UAAW9B,MAAKopB,EAAS,CACrB,MAAM3mB,GAAKhB,EAAImlD,GACf,GAAIj/C,GAAK,GAAKlF,GAAKzC,GAAE,MACjByB,GAAKzB,GAAE,MACP88B,KACA6pB,aAEKh/C,GAAK,EAAIlF,GACdhB,GAAKzB,GAAE,MACHo1C,EACA3pB,IAAMhpB,GAAKkF,GAAK,EAGhBm1B,KAEJ6pB,aAEKh/C,GAAK,EAAIA,GAAK,MAAQlF,GAC3BhB,GAAKzB,GAAE,MACP2mD,SAGA,MAEP,CACD,IAAI95B,EAAK,EACLkQ,EAAQ,EACR8pB,EAAa,EACjB,GAAI,OAAOv6B,GAAc,SACjB+oB,GACAtY,EAAQ,KAAK,MAAMp1B,GAAK,EAAI2kB,CAAS,EACrCO,EAAKkQ,EAAQzQ,EAAY3kB,GAAK,GAG9Bo1B,EAAQ,KAAK,KAAKp1B,GAAK,EAAI2kB,CAAS,EAExCu6B,EAAa,KAAK,KAAKl/C,GAAK,OAAS2kB,CAAS,EAAIyQ,EAC9ClQ,EAAK,GACLg6B,QAEH,CACD,IAAI9+C,GAAI,EACR,QAASmU,GAAM,EAAGA,GAAMkP,EAAMlP,KAAO,CACjC,MAAMyQ,GAAKL,EAAUpQ,EAAG,EAClB4qC,GAAK/+C,IAAKstC,EAAgB,EAAI1oB,GAAK,GACzC,GAAIhlB,GAAK,GAAKI,GAAI4kB,GACd5kB,IAAK4kB,GACLoQ,IACA8pB,YAEKl/C,GAAK,EAAIm/C,GACd/+C,IAAK4kB,GACD0oB,EACAxoB,GAAMi6B,GAAKn/C,GAAK,EAGhBo1B,IAEJ8pB,YAEKl/C,GAAK,EAAIA,GAAK,OAASglB,GAAK,EAAI5kB,GACrCA,IAAK4kB,GACLk6B,QAGA,MAEP,CACJ,CACD,MAAM98B,EAAO,CACT,EAAG+S,GACH,EAAGC,EACH,MAAO4pB,GAAY7pB,GACnB,OAAQ+pB,EAAa9pB,CACjC,EACcgqB,GAAU3a,EAAK,SACjB2a,KAAY,QACZA,GAAQ,IAAMh9B,EAAK,GACnBg9B,GAAQ,IAAMh9B,EAAK,GACnBg9B,GAAQ,SAAWh9B,EAAK,QACxBg9B,GAAQ,QAAUh9B,EAAK,OACvBw8B,EAAM,UAAY96B,IAClB+6B,EAAM,UAAY35B,GAClBllB,GAAK,UAAUgO,GAAA8wC,EAAS,UAAT,YAAA9wC,GAAmB,KAClChO,GAAK,WAAWy8B,GAAAqiB,EAAS,UAAT,YAAAriB,GAAmB,OACnCgiB,GAAA,MAAAA,EAAyB,CACrB,EAAGtpB,GACH,EAAGC,EACH,MAAO4pB,GAAY7pB,GACnB,OAAQ+pB,EAAa9pB,CACrC,EAAep1B,GAAK,MAAOA,GAAK,OAAQA,GAAK,cAAgB,EAAG8jB,GAAIoB,GACxDuf,EAAK,QAAUriB,EACfw8B,EAAM,QAAU96B,GAChB+6B,EAAM,QAAU35B,EAChB45B,EAAS,QAAU,CAAC9+C,GAAK,MAAOA,GAAK,MAAM,EAEvD,EAAO,CAACyhB,EAASkD,EAAWlB,EAAMg7B,EAAwB/8B,EAAe+rB,EAAeC,CAAa,CAAC,EAC5F2R,GAAiBvuC,cAAmB9Q,IAAS,CAC/C8L,GAAS,QAAU9L,GACnB++C,IACR,EAAO,CAACA,EAAW,CAAC,EAChBjxC,mBAAgB,IAAM,CAClBixC,IACR,EAAO,CAACA,EAAW,CAAC,EACR/oD,EAAmB,cAAC4lD,GAAkB,CAAE,UAAWY,EAAW,UAAWrhD,EAAW,sBAAuBwyC,GAAA,YAAAA,EAAc,sBAAuB,yBAA0BuO,EAA0B,UAAWhP,IAAgB,IAAQ,OAAOA,GAAgB,SAAU,YAAarrC,IAASu6C,GAAgB,GAAI,aAAc7yC,GAAU4yC,GAAiB,GAAI,aAAcN,EAAc,aAAcQ,EAAc,cAAeF,EAAe,aAAcC,EAAc,kBAAmBE,EAAmB,OAAQ+C,GAAgB,YAAaxF,CAAa,EAC7iB7jD,gBAAoBihD,GAAa,CAAE,eAAgBuF,EAAW,MAAOlvB,EAAa,OAAQuuB,EAAc,oBAAqBn4C,EAAE,oBAAqB,UAAWA,EAAE,UAAW,YAAaA,EAAE,YAAa,YAAaA,EAAE,YAAa,QAASA,EAAE,QAAS,aAAcA,EAAE,aAAc,aAAcA,EAAE,aAAc,WAAYA,EAAE,WAAY,mBAAoBA,EAAE,mBAAoB,aAAcA,EAAE,aAAc,aAAcA,EAAE,aAAc,cAAeA,EAAE,cAAe,eAAgBA,EAAE,eAAgB,gBAAiBA,EAAE,gBAAiB,gBAAiBA,EAAE,gBAAiB,oBAAqBA,EAAE,oBAAqB,kBAAmBA,EAAE,kBAAmB,aAAcA,EAAE,aAAc,iBAAkBA,EAAE,iBAAkB,kBAAmBA,EAAE,kBAAmB,UAAWA,EAAE,UAAW,UAAWA,EAAE,UAAW,YAAaA,EAAE,YAAa,eAAgBA,EAAE,eAAgB,eAAgBA,EAAE,eAAgB,kBAAmBA,EAAE,kBAAmB,uBAAwBA,EAAE,uBAAwB,YAAaA,EAAE,YAAa,cAAeA,EAAE,cAAe,UAAWA,EAAE,UAAW,KAAMA,EAAE,KAAM,UAAWA,EAAE,UAAW,MAAOA,EAAE,MAAO,mBAAoBA,EAAE,mBAAoB,aAAcA,EAAE,aAAc,WAAYA,EAAE,WAAY,WAAYA,EAAE,WAAY,oBAAqBA,EAAE,oBAAqB,eAAgBA,EAAE,eAAgB,cAAeA,EAAE,cAAe,WAAYA,EAAE,WAAY,SAAUA,EAAE,SAAU,aAAcA,EAAE,aAAc,QAASA,EAAE,QAAS,YAAaA,EAAE,YAAa,YAAaA,EAAE,YAAa,aAAcA,EAAE,aAAc,gBAAiBA,EAAE,gBAAiB,cAAeA,EAAE,cAAe,cAAeA,EAAE,cAAe,eAAgBA,EAAE,eAAgB,kBAAmBA,EAAE,kBAAmB,oBAAqBA,EAAE,oBAAqB,cAAeA,EAAE,cAAe,UAAWA,EAAE,UAAW,YAAaA,EAAE,YAAa,eAAgBA,EAAE,eAAgB,YAAaA,EAAE,YAAa,OAAQA,EAAE,OAAQ,cAAeA,EAAE,cAAe,UAAWA,EAAE,UAAW,QAASA,EAAE,QAAS,YAAaA,EAAE,YAAa,UAAWA,EAAE,UAAW,WAAYA,EAAE,WAAY,cAAeA,EAAE,cAAe,cAAeA,EAAE,cAAe,gBAAiBA,EAAE,eAAe,CAAE,CAAC,CACzpE,EC/Ia47C,GAA6BjjD,GAAO,KAAK,EAAE,CACtD,KAAM,gBACN,MAAO,cACP,UAAW,EACb,CAAC,ECEKkjD,GAAWvpD,EAAmB,cAAC,MAAO,CAAE,UAAW,cAAe,QAAS,aAAe,EAC5FA,EAAmB,cAAC,OAAQ,CAAE,KAAM,OAAQ,OAAQ,eAAgB,cAAe,QAAS,eAAgB,QAAS,YAAa,KAAM,EAAG,sCAAsC,CAAE,CAAC,EAClLwpD,GAAaxpD,EAAmB,cAAC,MAAO,CAAE,UAAW,cAAe,QAAS,aAAe,EAC9FA,EAAmB,cAAC,OAAQ,CAAE,KAAM,OAAQ,OAAQ,eAAgB,cAAe,QAAS,eAAgB,QAAS,YAAa,KAAM,EAAG,sCAAsC,CAAE,CAAC,EAClLypD,GAAUzpD,EAAmB,cAAC,MAAO,CAAE,UAAW,cAAe,QAAS,aAAe,EAC3FA,EAAmB,cAAC,OAAQ,CAAE,KAAM,OAAQ,OAAQ,eAAgB,cAAe,QAAS,eAAgB,QAAS,YAAa,KAAM,EAAG,kCAAkC,CAAE,CAAC,EAC9K0pD,GAAqB,GACrBC,GAAiBj8C,GAAK,CACxB,KAAM,CAAE,UAAAmpC,EAAW,YAAAjoB,EAAa,KAAAnB,EAAM,QAAAhC,EAAS,eAAAm+B,EAAgB,YAAAC,EAAa,cAAeC,EAAiB,oBAAAC,EAAqB,qBAAA1yB,EAAsB,uBAAA2yB,EAAwB,WAAAC,EAAa,GAAO,cAAAC,CAAgB,EAAGx8C,EAChN,CAACy8C,CAAQ,EAAIzwC,EAAc,SAAC,IAAM,cAAgB,KAAK,MAAM,KAAK,SAAW,GAAI,CAAC,EAClF,CAAC0wC,EAAmBC,CAAoB,EAAI3wC,EAAc,SAAC,EAAE,EAC7D4wC,EAAeT,GAAeO,EAE9BG,EAAkBzvC,cAAmB0iC,GAAW,CAClD6M,EAAqB7M,CAAM,EAC3BuM,GAAA,MAAAA,EAAsBvM,EAC9B,EAAO,CAACuM,CAAmB,CAAC,EAClB,CAACS,EAAcC,CAAe,EAAI/wC,EAAc,WAChDgxC,EAAkB7yC,SAAa2yC,CAAY,EACjDE,EAAgB,QAAUF,EAC1B1yC,YAAgB,IAAM,CACdgyC,IAAoB,SAEpBA,EAAgB,OAAS,EACzBW,EAAgB/M,IAAO,CACnB,aAAcjwB,EACd,QAASq8B,EAAgB,OACzB,eAAepM,GAAA,YAAAA,EAAI,gBAAiB,EACvC,EAAC,EAGF+M,EAAgB,MAAS,EAErC,EAAO,CAACh9B,EAAMq8B,CAAe,CAAC,EAC1B,MAAMa,EAAqB9yC,WACvB8yC,EAAmB,UAAY,SAC/BA,EAAmB,QAAU,IAAI,iBACrC,MAAMC,EAAe/yC,WACf,CAACgzC,EAAoBC,CAAqB,EAAIpxC,EAAc,SAAC,CAAE,GAC/DqxC,EAAgBjB,GAAmBe,EACnCG,EAAelwC,cAAkB,IAAM,CACrC8vC,EAAa,UAAY,SACzB,OAAO,qBAAqBA,EAAa,OAAO,EAChDA,EAAa,QAAU,OACvBD,EAAmB,QAAQ,QAElC,EAAE,CAAE,GACCM,EAAiBpzC,SAAa+W,CAAW,EAC/Cq8B,EAAe,QAAUr8B,EACzB,MAAMs8B,EAAcpwC,cAAmBQ,GAAQ,CAC3C,MAAM6B,GAAQ,IAAI,OAAO7B,EAAI,QAAQ,yBAA0B,MAAM,EAAG,GAAG,EAC3E,IAAImR,GAASw+B,EAAe,QAIxBE,GAAe,KAAK,IAAI,GAAI19B,CAAI,EAChC29B,GAAe,EACnBX,EAAgB,MAAS,EACzBK,EAAsB,CAAE,GACxB,MAAMO,EAAgB,GAChBC,EAAO,SAAY,QACrB,GAAIj0B,IAAyB,OACzB,OACJ,MAAMk0B,EAAS,YAAY,MACrBC,EAAW/9B,EAAO29B,GACxB,IAAI/5B,GAAOgG,EAAqB,CAC5B,EAAG,EACH,EAAG5K,GACH,MAAOhB,EAAQ,OACf,OAAQ,KAAK,IAAI0/B,GAAcK,EAAU/9B,EAAOhB,EAAM,CACtE,EAAek+B,EAAmB,QAAQ,MAAM,EAChC,OAAOt5B,IAAS,aAChBA,GAAO,MAAMA,MAEjB,IAAIo6B,GAAQ,GACZ,SAAW,CAACltC,GAAKgL,EAAC,IAAK8H,GAAK,QAAO,EAC/B,SAAW,CAACxF,GAAKppB,EAAI,IAAK8mB,GAAE,QAAO,EAAI,CACnC,IAAImiC,GACJ,OAAQjpD,GAAK,KAAI,CACb,KAAKR,EAAa,KAClB,KAAKA,EAAa,OACdypD,GAAajpD,GAAK,YAClB,MACJ,KAAKR,EAAa,IAClB,KAAKA,EAAa,SACdypD,GAAajpD,GAAK,KAClB,MACJ,KAAKR,EAAa,QACdypD,GAAa,OAAOjpD,GAAK,MAAS,UAAYA,GAAK,KAAK,SAAU,EAAG,OACrE,MACJ,KAAKR,EAAa,MAClB,KAAKA,EAAa,OAIdypD,GAAajpD,GAAK,KAAK,KAAK,IAAI,EAChC,MACJ,KAAKR,EAAa,OACdypD,GAAajpD,GAAK,SAClB,KACP,CACGipD,KAAe,QAAavuC,GAAM,KAAKuuC,EAAU,IACjDL,EAAc,KAAK,CAACx/B,GAAKtN,GAAMkO,EAAM,CAAC,EACtCg/B,GAAQ,GAEf,CAEL,MAAME,GAAO,YAAY,MACrBF,IACAX,EAAsB,CAAC,GAAGO,CAAa,CAAC,EAE5CD,IAAgB/5B,GAAK,OACrB/wB,GAAO8qD,IAAgB39B,CAAI,EAC3B,MAAMm+B,KAAgB5zC,GAAA0yC,EAAgB,UAAhB,YAAA1yC,GAAyB,gBAAiB,GAChEyyC,EAAgB,CACZ,QAASY,EAAc,OACvB,aAAAD,GACA,cAAAQ,EAChB,CAAa,EACD5B,GAAA,MAAAA,EAAyBqB,EAAeO,IACpCn/B,GAAS0+B,IAAgB19B,EACzBhB,GAAS,EAGTA,IAAU0+B,GAEd,MAAMU,GAAWF,GAAOJ,EAClBO,GAAU,KAAK,IAAID,GAAU,CAAC,EAC9BE,GAASrC,GAAqBoC,GACpCX,GAAe,KAAK,KAAKA,GAAeY,EAAM,EAC1CX,GAAe39B,GAAQ49B,EAAc,OAAS,MAC9CT,EAAa,QAAU,OAAO,sBAAsBU,CAAI,EAExE,EACQN,IACAJ,EAAa,QAAU,OAAO,sBAAsBU,CAAI,CAChE,EAAO,CAACN,EAAcv/B,EAAQ,OAAQ4L,EAAsB2yB,EAAwBv8B,CAAI,CAAC,EAC/Eu+B,EAAUlxC,cAAkB,IAAM,OACpCovC,GAAA,MAAAA,IACAO,EAAgB,MAAS,EACzBK,EAAsB,CAAE,GACxBd,GAAA,MAAAA,EAAyB,GAAI,IAC7BgB,KACAhzC,EAAA6+B,GAAA,YAAAA,EAAW,UAAX,MAAA7+B,EAAoB,OACvB,EAAE,CAACgzC,EAAcnU,EAAWqT,EAAeF,CAAsB,CAAC,EAC7DiC,EAAiBnxC,cAAmBxR,GAAU,CAChDihD,EAAgBjhD,EAAM,OAAO,KAAK,EAC9BwgD,IAAoB,SAEpBxgD,EAAM,OAAO,QAAU,IACvBmhD,EAAgB,MAAS,EACzBK,EAAsB,CAAE,GACxBE,KAGAE,EAAY5hD,EAAM,OAAO,KAAK,EAErC,EAAE,CAAC4hD,EAAaF,EAAcT,EAAiBT,CAAe,CAAC,EAChEhyC,YAAgB,IAAM,CACdmyC,GAAcL,EAAe,UAAY,OACzCW,EAAgB,EAAE,EAClBX,EAAe,QAAQ,MAAM,CAAE,cAAe,EAAM,GAE3D,EAAE,CAACK,EAAYL,EAAgBW,CAAe,CAAC,EAChD,MAAM2B,GAASpxC,cAAmBs+B,GAAO,QAErC,IADAphC,GAAAohC,GAAA,YAAAA,EAAI,kBAAJ,MAAAphC,GAAA,KAAAohC,GACIoR,IAAiB,OACjB,OACJ,MAAMv3C,IAAYu3C,EAAa,cAAgB,GAAKA,EAAa,QACjEC,EAAgB,CACZ,GAAGD,EACH,cAAev3C,EAC3B,CAAS,EACD+2C,GAAA,MAAAA,EAAyBe,EAAe93C,GAC3C,EAAE,CAACu3C,EAAcR,EAAwBe,CAAa,CAAC,EAClDoB,EAASrxC,cAAmBs+B,GAAO,QAErC,IADAphC,GAAAohC,GAAA,YAAAA,EAAI,kBAAJ,MAAAphC,GAAA,KAAAohC,GACIoR,IAAiB,OACjB,OACJ,IAAIv3C,IAAYu3C,EAAa,cAAgB,GAAKA,EAAa,QAC3Dv3C,GAAW,IACXA,IAAYu3C,EAAa,SAC7BC,EAAgB,CACZ,GAAGD,EACH,cAAev3C,EAC3B,CAAS,EACD+2C,GAAA,MAAAA,EAAyBe,EAAe93C,GAC3C,EAAE,CAAC+2C,EAAwBe,EAAeP,CAAY,CAAC,EAClD4B,GAAkBtxC,cAAmBxR,GAAU,EAC3CA,EAAM,SAAWA,EAAM,UAAYA,EAAM,YAAY,OAAS,QAAWA,EAAM,MAAQ,UACzF0iD,IACA1iD,EAAM,gBAAe,EACrBA,EAAM,eAAc,GAEfA,EAAM,MAAQ,UACfA,EAAM,SACN6iD,IAGAD,KAGX,EAAE,CAACF,EAASE,GAAQC,CAAM,CAAC,EAE5Br0C,YAAgB,IACL,IAAM,CACTkzC,GACZ,EACO,CAACA,CAAY,CAAC,EACjB,KAAM,CAACqB,GAAgBC,EAAiB,EAAI5yC,EAAc,SAAC,EAAK,EAChE5B,YAAgB,IAAM,CAClB,GAAImyC,EACAqC,GAAkB,EAAI,MAErB,CACD,MAAMC,EAAY,WAAW,IAAMD,GAAkB,EAAK,EAAG,GAAG,EAChE,MAAO,IAAM,aAAaC,CAAS,CACtC,CACT,EAAO,CAACtC,CAAU,CAAC,EACf,MAAMuC,GAAY50B,UAAc,IAAM,CAClC,GAAI,CAACqyB,GAAc,CAACoC,GAChB,OAAO,KAEX,IAAII,EACAjC,IAAiB,SACjBiC,EACIjC,EAAa,SAAW,IAClB,YACA,GAAGA,EAAa,OAAO,UAAUA,EAAa,UAAY,EAAI,IAAM,EAAE,GAC5EA,EAAa,eAAiB,IAC9BiC,EAAe,GAAGjC,EAAa,cAAgB,CAAC,OAAOiC,CAAY,KAG3E,MAAMC,GAAetT,IAAO,CACxBA,GAAG,gBAAe,CAC9B,EAEcuT,GAAgB,CAClB,MAAO,GAFkB,KAAK,QAAQnC,GAAA,YAAAA,EAAc,eAAgB,GAAK/8B,EAAQ,GAAG,CAEtD,GAC1C,EACQ,OAAQztB,gBAAoBspD,GAAe,CAAE,UAAWW,EAAa,GAAK,MAAO,YAAayC,GAAa,YAAaA,GAAa,UAAWA,GAAa,QAASA,EAAa,EAC/K1sD,gBAAoB,MAAO,CAAE,UAAW,sBAAwB,EAC5DA,gBAAoB,QAAS,CAAE,GAAImqD,EAAU,cAAe,CAACF,EAAY,cAAe,eAAgB,IAAKL,EAAgB,SAAUqC,EAAgB,MAAO3B,EAAc,SAAUL,EAAa,OAAY,GAAI,iBAAkBmC,GAAiB,EACtPpsD,gBAAoB,SAAU,CAAE,aAAc,kBAAmB,cAAe,CAACiqD,EAAY,SAAUA,EAAa,OAAY,GAAI,QAASkC,EAAQ,WAAW3B,GAAA,YAAAA,EAAc,UAAW,KAAO,CAAG,EAAEjB,EAAO,EAC5MvpD,gBAAoB,SAAU,CAAE,aAAc,cAAe,cAAe,CAACiqD,EAAY,SAAUA,EAAa,OAAY,GAAI,QAASiC,GAAQ,WAAW1B,GAAA,YAAAA,EAAc,UAAW,KAAO,CAAG,EAAEhB,EAAS,EAC1MU,IAAkB,QAAclqD,gBAAoB,SAAU,CAAE,aAAc,eAAgB,cAAe,CAACiqD,EAAY,cAAe,sBAAuB,SAAUA,EAAa,OAAY,GAAI,QAAS+B,CAAO,EAAIvC,EAAM,CAAE,EACvOe,IAAiB,OAAaxqD,gBAAoB2gD,WAAgB,KAC9D3gD,gBAAoB,MAAO,CAAE,UAAW,mBAAqB,EACzDA,EAAmB,cAAC,MAAO,CAAE,cAAe,oBAAsB,EAAEysD,CAAY,CAAC,EACrFzsD,gBAAoB,MAAO,CAAE,UAAW,sBAAuB,MAAO2sD,GAAe,CAAC,EAAM3sD,gBAAoB,MAAO,CAAE,UAAW,mBAAqB,EACzJA,EAAmB,cAAC,QAAS,CAAE,QAASmqD,CAAQ,EAAI,gBAAgB,CAAC,CAAE,CACvF,EAAO,CACCF,EACAoC,GACA7B,EACA/8B,EACA08B,EACAP,EACAqC,EACA3B,EACA8B,GACAD,EACAD,GACAhC,EACA8B,CACR,CAAK,EACD,OAAQhsD,gBAAoB2gD,WAAgB,KACxC3gD,gBAAoB4sD,GAAmB,CAAE,cAAe7B,EAAe,oBAAqBr9C,EAAE,oBAAqB,UAAWA,EAAE,UAAW,YAAaA,EAAE,YAAa,YAAaA,EAAE,YAAa,UAAWA,EAAE,UAAW,WAAYA,EAAE,WAAY,QAASA,EAAE,QAAS,aAAcA,EAAE,aAAc,aAAcA,EAAE,aAAc,WAAYA,EAAE,WAAY,mBAAoBA,EAAE,mBAAoB,aAAcA,EAAE,aAAc,aAAcA,EAAE,aAAc,aAAcA,EAAE,aAAc,cAAeA,EAAE,cAAe,eAAgBA,EAAE,eAAgB,gBAAiBA,EAAE,gBAAiB,gBAAiBA,EAAE,gBAAiB,oBAAqBA,EAAE,oBAAqB,kBAAmBA,EAAE,kBAAmB,aAAcA,EAAE,aAAc,iBAAkBA,EAAE,iBAAkB,kBAAmBA,EAAE,kBAAmB,YAAaA,EAAE,YAAa,UAAWA,EAAE,UAAW,UAAWA,EAAE,UAAW,YAAaA,EAAE,YAAa,eAAgBA,EAAE,eAAgB,eAAgBA,EAAE,eAAgB,kBAAmBA,EAAE,kBAAmB,uBAAwBA,EAAE,uBAAwB,YAAaA,EAAE,YAAa,uBAAwBA,EAAE,uBAAwB,YAAaA,EAAE,YAAa,YAAaA,EAAE,YAAa,yBAA0BA,EAAE,yBAA0B,aAAcA,EAAE,aAAc,kBAAmBA,EAAE,kBAAmB,UAAWA,EAAE,UAAW,KAAMA,EAAE,KAAM,UAAWA,EAAE,UAAW,UAAWA,EAAE,UAAW,MAAOA,EAAE,MAAO,mBAAoBA,EAAE,mBAAoB,aAAcA,EAAE,aAAc,WAAYA,EAAE,WAAY,WAAYA,EAAE,WAAY,eAAgBA,EAAE,eAAgB,oBAAqBA,EAAE,oBAAqB,cAAeA,EAAE,cAAe,SAAUA,EAAE,SAAU,WAAYA,EAAE,WAAY,aAAcA,EAAE,aAAc,QAASA,EAAE,QAAS,YAAaA,EAAE,YAAa,YAAaA,EAAE,YAAa,aAAcA,EAAE,aAAc,gBAAiBA,EAAE,gBAAiB,cAAeA,EAAE,cAAe,cAAeA,EAAE,cAAe,eAAgBA,EAAE,eAAgB,kBAAmBA,EAAE,kBAAmB,oBAAqBA,EAAE,oBAAqB,cAAeA,EAAE,cAAe,UAAWA,EAAE,UAAW,YAAaA,EAAE,YAAa,eAAgBA,EAAE,eAAgB,YAAaA,EAAE,YAAa,OAAQA,EAAE,OAAQ,cAAeA,EAAE,cAAe,UAAWA,EAAE,UAAW,QAASA,EAAE,QAAS,YAAaA,EAAE,YAAa,UAAWA,EAAE,UAAW,WAAYA,EAAE,WAAY,cAAeA,EAAE,cAAe,cAAeA,EAAE,cAAe,gBAAiBA,EAAE,eAAe,CAAE,EACz7E8+C,EAAS,CACjB,ECnRe,MAAMK,WAA8BC,eAAoB,CAAxD,kCACXnpD,GAAA,kBAAaopD,EAAe,aAW5BppD,GAAA,oBAAgB2F,GAAU,CACtB,GAAI,OAAK,MAAM,gBAAkB,CAAC,KAAK,MAAM,eAAeA,CAAK,IAG7D,KAAK,WAAW,UAAY,MAAQ,CAAC,KAAK,WAAW,QAAQ,SAASA,EAAM,MAAM,EAAG,CACrF,IAAIoB,EAAOpB,EAAM,OACjB,KAAOoB,IAAS,MAAM,CAClB,GAAIA,EAAK,UAAU,SAAS,sBAAsB,EAC9C,OAEJA,EAAOA,EAAK,aACf,CACD,KAAK,MAAM,gBACd,CACT,GAxBI,mBAAoB,CAChB,SAAS,iBAAiB,WAAY,KAAK,aAAc,EAAI,EAC7D,SAAS,iBAAiB,YAAa,KAAK,aAAc,EAAI,EAC9D,SAAS,iBAAiB,cAAe,KAAK,aAAc,EAAI,CACnE,CACD,sBAAuB,CACnB,SAAS,oBAAoB,WAAY,KAAK,aAAc,EAAI,EAChE,SAAS,oBAAoB,YAAa,KAAK,aAAc,EAAI,EACjE,SAAS,oBAAoB,cAAe,KAAK,aAAc,EAAI,CACtE,CAgBD,QAAS,CACL,KAAM,CAAE,eAAAsiD,EAAgB,eAAAC,EAAgB,GAAG7lD,CAAM,EAAG,KAAK,MACzD,OAAQpH,gBAAoB,MAAO,CAAE,GAAGoH,EAAM,IAAK,KAAK,YAAc,KAAK,MAAM,QAAQ,CAC5F,CACL,CC7BA,MAAMg+C,GAAoB,IAAM13C,GAAK,KAAK,IAAI,GAAIA,EAAE,aAAe,EAAE,EAC/Dw/C,GAA2B7mD,GAAO,OAAO,EAAE,CAC/C,KAAM,cACN,MAAO,eACP,UAAW,GACX,KAAM,CACJ,aAAc,CAAC++C,GAAM,EAAE,IAAI,CAC5B,CACH,CAAC,EACY+H,GAAcz/C,GAAK,CAC9B,KAAM,CACJ,OAAAysC,EACA,MAAAxlB,EACA,QAAAq3B,EACA,aAAAoB,EACA,SAAAC,CACD,EAAG3/C,EACE,CAACvH,EAAOmnD,CAAQ,EAAIpmD,GAAM,SAASytB,CAAK,EAC9C,OAAOztB,GAAM,cAAc2lD,GAAuB,CAChD,MAAO,CACL,SAAU,WACV,KAAM1S,EAAO,EAAIiT,EAAa,KAAO,EACrC,IAAKjT,EAAO,EAAIiT,EAAa,IAC7B,MAAOjT,EAAO,MAAQ,EACtB,OAAQA,EAAO,MAChB,EACD,UAAW,eACX,eAAgB6R,CACpB,EAAK9kD,GAAM,cAAcgmD,GAAa,CAClC,aAAc/S,EAAO,OACrB,cAAe,qBACf,MAAOh0C,EACP,OAAQ6lD,EACR,QAAS59C,GAAKA,EAAE,OAAO,kBAAkB,EAAGjI,EAAM,MAAM,EACxD,SAAUiI,GAAKk/C,EAASl/C,EAAE,OAAO,KAAK,EACtC,UAAWA,GAAK,CACVA,EAAE,MAAQ,QACZi/C,EAASlnD,CAAK,EACLiI,EAAE,MAAQ,UACnB49C,GAEH,EACD,UAAW,EACZ,EAAC,CACJ,ECrCA,SAASuB,GAAS/rD,EAAKwI,EAAM,CACzB,OAAIxI,IAAQ,OACD,GACPA,EAAI,OAAS,GAAKA,EAAI,WAAW,GAAG,EACpB,OAAO,SAASA,EAAI,MAAM,CAAC,CAAC,IACzBwI,EAAK,QAExBxI,EAAI,SAAW,GAAKA,GAAO,KAAOA,GAAO,IAClCA,EAAI,cAAc,YAAY,CAAC,IAAMwI,EAAK,QAE9CxI,IAAQwI,EAAK,GACxB,CACO,SAASwjD,GAASC,EAAQzjD,EAAM0jD,EAAS,CAC5C,MAAM9oD,EAAS+oD,GAAcF,EAAQzjD,CAAI,EACzC,OAAIpF,IACA8oD,EAAQ,SAAW,IAChB9oD,CACX,CACA,SAAS+oD,GAAcF,EAAQzjD,EAAM,CACjC,GAAIyjD,EAAO,SAAW,EAClB,MAAO,GACX,GAAIA,EAAO,SAAS,GAAG,EAAG,CACtB,MAAMG,EAAQH,EAAO,MAAM,GAAG,EAC9B,UAAWI,KAAQD,EACf,GAAID,GAAcE,EAAM7jD,CAAI,EACxB,MAAO,GAEf,MAAO,EACV,CACD,IAAI8jD,EAAW,GACXC,EAAY,GACZC,EAAU,GACVC,EAAW,GACf,MAAMj8B,EAAQy7B,EAAO,MAAM,GAAG,EACxBjsD,EAAMwwB,EAAM,MAClB,GAAI,CAACu7B,GAAS/rD,EAAKwI,CAAI,EACnB,MAAO,GACX,GAAIgoB,EAAM,CAAC,IAAM,MACb,MAAO,GACX,UAAWk8B,KAASl8B,EAChB,OAAQk8B,EAAK,CACT,IAAK,OACDJ,EAAW,GACX,MACJ,IAAK,QACDC,EAAY,GACZ,MACJ,IAAK,MACDC,EAAU,GACV,MACJ,IAAK,OACDC,EAAW,GACX,MACJ,IAAK,UACGvZ,GAAa,MACbuZ,EAAW,GAGXH,EAAW,GAEf,KACP,CAEL,OAAQ9jD,EAAK,SAAWgkD,GAAWhkD,EAAK,UAAY8jD,GAAY9jD,EAAK,WAAa+jD,GAAa/jD,EAAK,UAAYikD,CACpH,CCxEO,SAASE,GAAqBC,EAAeC,EAAkBC,EAAeC,EAAgBC,EAAaC,EAAaC,EAA8B,CAEzJ,MAAMC,EAAaznD,GAAM,YAAY,CAACf,EAAOyoD,EAAQC,EAAQC,IAAY,QAChEL,IAAgB,QAAUA,IAAgB,eAAiBtoD,IAAU,SACtEA,EAAQ,CACJ,GAAGA,EACH,MAAO,CACH,EAAGA,EAAM,KAAK,CAAC,EACf,EAAGA,EAAM,KAAK,CAAC,EACf,MAAO,EACP,OAAQ,CACX,CACjB,GAEY,CAACuoD,GAAgCvoD,IAAU,QAAaA,EAAM,MAAM,MAAQ,IAC5EA,EAAQ,CACJ,GAAGA,EACH,MAAO,CACH,GAAGA,EAAM,MACT,MAAO,EACP,EAAGA,EAAM,KAAK,CAAC,CAClB,CACjB,GAEQ,MAAM4oD,EAAeT,IAAkB,UAAYO,GAAUC,IAAY,QACnEE,EAAsBT,IAAmB,SAAWQ,EACpDE,EAAmBT,IAAgB,SAAWO,EACpD,IAAIvR,EAAS,CACT,QAASr3C,IAAU,OACb,OACA,CACE,GAAGA,EACH,WAAY2oD,IAAY,SAAS92C,EAAAo2C,EAAc,UAAd,YAAAp2C,EAAuB,aAAc,GAAK,CAAE,CAChF,EACL,QAASg3C,EAAsBZ,EAAc,QAAUvpD,GAAiB,MAAO,EAC/E,KAAMoqD,EAAmBb,EAAc,KAAOvpD,GAAiB,MAAO,CAClF,EAC6BgqD,IAAWJ,IAAgB,cAAgBA,IAAgB,eAC5DjR,EAAO,UAAY,QAAa4Q,EAAc,UAAY,SAC1E5Q,EAAS,CACL,GAAGA,EACH,QAAS,CACL,GAAGA,EAAO,QACV,WAAY,CAAC,GAAG4Q,EAAc,QAAQ,WAAYA,EAAc,QAAQ,KAAK,CAChF,CACjB,GAEQC,EAAiB7Q,EAAQoR,CAAM,CACvC,EAAO,CACCL,EACAH,EACAE,EACAG,EACAC,EACAF,EACAH,CACR,CAAK,EACKa,EAAkBhoD,GAAM,YAAY,CAACioD,EAASN,EAAQO,IAAe,CACvED,EAAUA,GAAWf,EAAc,KAC/BS,IAAW,SACXM,EAAUA,EAAQ,IAAIN,CAAM,GAEhC,IAAIrR,EACJ,GAAIgR,IAAgB,aAAeW,EAAQ,OAAS,EAChD3R,EAAS,CACL,QAAS,OACT,QAAS34C,GAAiB,MAAO,EACjC,KAAMsqD,CACtB,MAEa,CACD,MAAME,EAAaD,GAAcd,IAAkB,QAC7CgB,EAAcF,GAAcb,IAAmB,QAErD/Q,EAAS,CACL,QAFa6R,EAAyBjB,EAAc,QAA1B,OAG1B,QAASkB,EAAclB,EAAc,QAAUvpD,GAAiB,MAAO,EACvE,KAAMsqD,CACtB,CACS,CACDd,EAAiB7Q,EAAQ,EAAK,CACtC,EAAO,CAAC+Q,EAAgBH,EAAeE,EAAeE,EAAaH,CAAgB,CAAC,EAC1EkB,EAAqBroD,GAAM,YAAY,CAACsoD,EAASX,EAAQO,IAAe,CAC1EI,EAAUA,GAAWpB,EAAc,QAC/BS,IAAW,SACXW,EAAUA,EAAQ,IAAIX,CAAM,GAEhC,IAAIrR,EACJ,GAAI+Q,IAAmB,aAAeiB,EAAQ,OAAS,EACnDhS,EAAS,CACL,QAAS,OACT,KAAM34C,GAAiB,MAAO,EAC9B,QAAS2qD,CACzB,MAEa,CACD,MAAMH,EAAaD,GAAcd,IAAkB,QAC7CmB,EAAWL,GAAcZ,IAAgB,QAE/ChR,EAAS,CACL,QAFa6R,EAAyBjB,EAAc,QAA1B,OAG1B,KAAMqB,EAAWrB,EAAc,KAAOvpD,GAAiB,MAAO,EAC9D,QAAS2qD,CACzB,CACS,CACDnB,EAAiB7Q,EAAQ,EAAK,CACtC,EAAO,CAAC+Q,EAAgBH,EAAeE,EAAeE,EAAaH,CAAgB,CAAC,EAChF,MAAO,CAACM,EAAYO,EAAiBK,CAAkB,CAC3D,CC5GO,SAASG,GAAqBC,EAAwBpsB,EAAgBqsB,EAAiBr4B,EAAiB9J,EAAM,CACjH,MAAMoiC,EAAsC/0C,EAAiB,YAACsR,GAAQ,CAClE,GAAIujC,IAA2B,GAAM,CACjC,MAAM/qD,EAAS,GACf,QAASwF,EAAIgiB,EAAK,EAAGhiB,EAAIgiB,EAAK,EAAIA,EAAK,OAAQhiB,IAAK,CAChD,MAAMmU,EAAM,GACZ,QAASza,EAAIsoB,EAAK,EAAGtoB,EAAIsoB,EAAK,EAAIA,EAAK,MAAOtoB,IACtCA,EAAI,GAAKsG,GAAKqjB,EACdlP,EAAI,KAAK,CACL,KAAMtc,EAAa,QACnB,aAAc,EAC1C,CAAyB,EAGDsc,EAAI,KAAKglB,EAAe,CAACz/B,EAAGsG,CAAC,CAAC,CAAC,EAGvCxF,EAAO,KAAK2Z,CAAG,CAClB,CACD,OAAO3Z,CACV,CACD,OAAO+qD,GAAA,YAAAA,EAAyBvjC,EAAMmL,EAAgB,UAAW,EACzE,EAAO,CAACA,EAAgB,OAAQgM,EAAgBosB,EAAwBliC,CAAI,CAAC,EACnEqiC,EAA6BH,IAA2B,OAAYE,EAAsC,OAC1GE,EAA8Bj1C,EAAiB,YAACsR,GAAQ,CAC1D,GAAI0jC,IAA+B,OAC/B,MAAO,GACX,MAAME,EAAU,CACZ,GAAG5jC,EACH,EAAGA,EAAK,EAAIwjC,CACxB,EACQ,GAAII,EAAQ,EAAI,EAAG,CACfA,EAAQ,EAAI,EACZA,EAAQ,QACR,MAAMjmC,EAAI+lC,EAA2BE,EAASz4B,EAAgB,MAAM,EACpE,OAAI,OAAOxN,GAAM,WACN,UAEN,MAAMA,EAAC,GAAI,IAAIxL,GAAO,CACnB,CAAE,KAAMtc,EAAa,QAAS,aAAc,EAAO,EACnD,GAAGsc,CACvB,CAAiB,EAEEwL,EAAE,IAAIxL,GAAO,CAAC,CAAE,KAAMtc,EAAa,QAAS,aAAc,EAAK,EAAI,GAAGsc,CAAG,CAAC,CACpF,CACD,OAAOuxC,EAA2BE,EAASz4B,EAAgB,MAAM,CACpE,EAAE,CAACA,EAAgB,OAAQu4B,EAA4BF,CAAe,CAAC,EAExE,MAAO,CADsBD,IAA2B,OAAYI,EAA8B,OACpED,CAA0B,CAC5D,CChDA,SAASG,GAAoBxtD,EAAM,CAC/B,GAAIA,EAAK,WAAa,OAClB,MAAO,CACH,UAAWA,EAAK,SAChB,SAAUA,EAAK,SACf,OAAQ,QACpB,EAEI,OAAQA,EAAK,KAAI,CACb,KAAKR,EAAa,QACd,MAAO,CACH,UAAWQ,EAAK,OAAS,GACnB,OACAA,EAAK,OAAS,GACV,QACAA,EAAK,OAAST,GACV,gBACA,GACd,SAAUS,EAAK,KACf,OAAQ,SACxB,EACQ,KAAKR,EAAa,OACd,MAAO,CACH,UAAWQ,EAAK,SAChB,SAAUA,EAAK,SACf,OAAQ,QACxB,EACQ,KAAKR,EAAa,MAClB,KAAKA,EAAa,OACd,MAAO,CACH,UAAWQ,EAAK,KAChB,SAAUA,EAAK,KACf,OAAQ,cACxB,EACQ,KAAKR,EAAa,UACd,MAAO,CACH,UAAWQ,EAAK,KAAK,IAAIqB,GAAKA,EAAE,IAAI,EACpC,SAAUrB,EAAK,KAAK,IAAIqB,GAAKA,EAAE,IAAI,EACnC,OAAQ,cACxB,EACQ,KAAK7B,EAAa,KACd,MAAO,CACH,UAAWQ,EAAK,aAAeA,EAAK,KACpC,SAAUA,EAAK,KACf,OAAQ,QACxB,EACQ,KAAKR,EAAa,IACd,MAAO,CACH,UAAWQ,EAAK,aAAeA,EAAK,KACpC,SAAUA,EAAK,KACf,OAAQ,KACxB,EACQ,KAAKR,EAAa,SAClB,KAAKA,EAAa,MACd,MAAO,CACH,UAAWQ,EAAK,KAChB,SAAUA,EAAK,KACf,OAAQ,QACxB,EACQ,KAAKR,EAAa,OACd,MAAO,CACH,UAAWQ,EAAK,YAChB,SAAUA,EAAK,KACf,OAAQ,QACxB,EACQ,KAAKR,EAAa,QACd,MAAO,CACH,UAAW,WACX,SAAU,GACV,OAAQ,QACxB,EACQ,KAAKA,EAAa,UACd,MAAO,CACH,UAAW,eACX,SAAU,GACV,OAAQ,QACxB,EACQ,QACIzB,GAAgB,CACvB,CACL,CACA,SAAS0vD,GAA0BtxC,EAAOuxC,EAAe,CAarD,OAZmBvxC,EAAM,IAAI,CAACL,EAAKha,IAAU,CACzC,MAAM6rD,EAAcD,EAAc5rD,CAAK,EACvC,OAAOga,EAAI,IAAI9b,GACPA,EAAK,OAAS,QAAaA,EAAK,KAAK,CAAC,IAAM2tD,EACrC,CACH,UAAW,GACX,SAAU,GACV,OAAQ,QAC5B,EACmBH,GAAoBxtD,CAAI,CAClC,CACT,CAAK,CAEL,CACA,SAAS4tD,GAAe/0C,EAAKg1C,EAAW,CACpC,OAAKA,EAAY,WAAa,WAAW,KAAKh1C,CAAG,IAC7CA,EAAM,IAAIA,EAAI,QAAQ,KAAM,IAAI,CAAC,KAE9BA,CACX,CACA,SAASi1C,GAAiBC,EAAY,OAClC,MAAMC,EAAQ,GACd,UAAWlyC,KAAOiyC,EAAY,CAC1B,MAAM5vC,EAAO,GACb,UAAWne,KAAQ8b,EACX9b,EAAK,SAAW,MAChBme,EAAK,OAAK5I,EAAAvV,EAAK,WAAL,YAAAuV,EAAe,aAAc,EAAE,EAEpCvV,EAAK,SAAW,eACrBme,EAAK,KAAKne,EAAK,UAAU,IAAIqB,GAAKusD,GAAevsD,EAAG,EAAI,CAAC,EAAE,KAAK,GAAG,CAAC,EAGpE8c,EAAK,KAAKyvC,GAAe5tD,EAAK,UAAW,EAAK,CAAC,EAGvDguD,EAAM,KAAK7vC,EAAK,KAAK,GAAI,CAAC,CAC7B,CACD,OAAO6vC,EAAM,KAAK;AAAA,CAAI,CAC1B,CACA,SAASC,GAAsB9wC,EAAM,CAMjC,OAAOA,EAAK,QAAQ,MAAO,MAAM,EAAE,QAAQ,SAAUpB,GAAS,iBAAiB,OAAOA,EAAM,MAAM,CAAC,CACvG,CACA,SAASmyC,GAA2BC,EAAU,CAE1C,MAAQ,IAAMA,EAAS,QAAQ,KAAM,OAAO,EAAE,QAAQ,KAAM,QAAQ,EAAE,QAAQ,KAAM,MAAM,EAAE,QAAQ,KAAM,MAAM,EAAI,GACxH,CACA,SAASC,GAAoBv1C,EAAK,CAE9B,OAAOA,EACF,QAAQ,UAAW,GAAG,EACtB,QAAQ,QAAS,GAAG,EACpB,QAAQ,QAAS,GAAG,EACpB,QAAQ,SAAU,GAAG,CAC9B,CACA,SAASw1C,GAAiBN,EAAY,OAClC,MAAMC,EAAQ,GACdA,EAAM,KAAK,2EAA4E,gBAAgB,EACvG,UAAWlyC,KAAOiyC,EAAY,CAC1BC,EAAM,KAAK,MAAM,EACjB,UAAWhuD,KAAQ8b,EAAK,CACpB,MAAMwyC,EAAY,eAAetuD,EAAK,MAAM,IACxCA,EAAK,SAAW,MAChBguD,EAAM,KAAK,OAAOM,CAAS,aAAatuD,EAAK,QAAQ,KAAKiuD,GAAsBjuD,EAAK,SAAS,CAAC,WAAW,EAGtGA,EAAK,SAAW,eAChBguD,EAAM,KAAK,OAAOM,CAAS,QAAQtuD,EAAK,UACnC,IAAI,CAACqB,EAAGktD,IAAQ,qBAAqBL,GAA2BluD,EAAK,SAASuuD,CAAG,CAAC,CAAC,IACpFN,GAAsB5sD,CAAC,EACvB,OAAO,EACN,KAAK,EAAE,CAAC,YAAY,EAGzB2sD,EAAM,KAAK,qBAAqBE,KAA2B34C,EAAAvV,EAAK,WAAL,YAAAuV,EAAe,aAAc,EAAE,CAAC,IAAI+4C,CAAS,IAAIL,GAAsBjuD,EAAK,SAAS,CAAC,OAAO,CAGnK,CACDguD,EAAM,KAAK,OAAO,CACrB,CACD,OAAAA,EAAM,KAAK,kBAAkB,EACtBA,EAAM,KAAK,EAAE,CACxB,CAMO,SAASQ,GAAsBryC,EAAOuxC,EAAe,CACxD,MAAMK,EAAaN,GAA0BtxC,EAAOuxC,CAAa,EAC3De,EAAYX,GAAiBC,CAAU,EACvCW,EAAWL,GAAiBN,CAAU,EAC5C,MAAO,CACH,UAAAU,EACA,SAAAC,CACR,CACA,CACO,SAASC,GAAWv0C,EAAM,OAC7B,MAAMw0C,EAAW,SAAS,cAAc,MAAM,EAE9CA,EAAS,UAAYx0C,EAAK,QAAQ,UAAW,GAAG,EAChD,MAAMy0C,EAAUD,EAAS,cAAc,OAAO,EAC9C,GAAIC,IAAY,KACZ,OACJ,MAAMC,EAAS,CAACD,CAAO,EACjB1sD,EAAS,GACf,IAAI8L,EACJ,KAAO6gD,EAAO,OAAS,GAAG,CACtB,MAAM3lD,EAAK2lD,EAAO,MAClB,GAAI3lD,IAAO,OACP,MACJ,GAAIA,aAAc,kBAAoBA,EAAG,WAAa,QAClD2lD,EAAO,KAAK,GAAG,CAAC,GAAG3lD,EAAG,QAAQ,EAAE,QAAO,CAAE,UAEpCA,aAAc,oBACf8E,IAAY,QACZ9L,EAAO,KAAK8L,CAAO,EAEvBA,EAAU,GACV6gD,EAAO,KAAK,GAAG,CAAC,GAAG3lD,EAAG,QAAQ,EAAE,QAAO,CAAE,UAEpCA,aAAc,qBAAsB,CAEzC,MAAM4lD,EAAQ5lD,EAAG,UAAU,EAAI,EAIzB6lD,EADiBD,EAAM,SAAS,SAAW,GAAKA,EAAM,SAAS,CAAC,EAAE,WAAa,IACvDA,EAAM,SAAS,CAAC,EAAI,KAC5CE,GAAiBD,GAAA,YAAAA,EAAM,SAAS,UAAW,GAAKA,EAAK,SAAS,CAAC,EAAE,WAAa,OAC9EE,EAAMH,EAAM,iBAAiB,IAAI,EACvC,UAAWlnC,KAAMqnC,EACbrnC,EAAG,YAAY;AAAA,CAAI,EAEvB,MAAMsnC,EAAiBJ,EAAM,aAAa,eAAe,EACnDK,EAAeL,EAAM,aAAa,YAAY,GAAK,SACzD,GAAIA,EAAM,cAAc,GAAG,IAAM,KAC7B9gD,GAAA,MAAAA,EAAS,KAAK,CAEV,WAAUsH,EAAAw5C,EAAM,cAAc,GAAG,IAAvB,YAAAx5C,EAA0B,aAAa,UAAW,GAC5D,UAAWw5C,EAAM,aAAe,GAChC,OAAQK,CAC5B,WAEqBL,EAAM,cAAc,IAAI,IAAM,KAAM,CACzC,MAAMM,EAAYN,EAAM,iBAAiB,IAAI,EAC7C9gD,GAAA,MAAAA,EAAS,KAAK,CACV,SAAU,CAAC,GAAGohD,CAAS,EAAE,IAAIhuD,GAAKA,EAAE,aAAa,eAAe,GAAK,EAAE,EACvE,UAAW,CAAC,GAAGguD,CAAS,EAAE,IAAIhuD,GAAKA,EAAE,aAAe,EAAE,EACtD,OAAQ,cAC5B,EACa,SACQ8tD,IAAmB,KACxBlhD,GAAA,MAAAA,EAAS,KAAK,CACV,SAAUmgD,GAAoBe,CAAc,EAC5C,UAAWJ,EAAM,aAAe,GAChC,OAAQK,CAC5B,OAEiB,CACD,IAAIE,EAAcP,EAAM,aAAe,GACnCE,IAEAK,EAAcA,EAAY,QAAQ,YAAa,EAAE,GAErDrhD,GAAA,MAAAA,EAAS,KAAK,CACV,SAAUqhD,GAAe,GACzB,UAAWA,GAAe,GAC1B,OAAQF,CAC5B,EACa,CACJ,CACJ,CACD,OAAInhD,IAAY,QACZ9L,EAAO,KAAK8L,CAAO,EAEhB9L,CACX,CCvQO,SAASotD,GAAgBxU,EAAQnmB,EAAsBu4B,EAAiBqC,EAAmB16B,EAAiB,OAC/G,MAAM26B,EAAU1U,EAChB,GAAIyU,IAAsB,gBAAkBzU,EAAO,UAAY,QAAanmB,IAAyB,OACjG,OAAOmmB,EACX,IAAI2U,EAAW,GACf,EAAG,CACC,IAAI3U,GAAA,YAAAA,EAAQ,WAAY,OACpB,MACJ,MAAMzzB,GAAI/R,EAAAwlC,EAAO,UAAP,YAAAxlC,EAAgB,MACpB4G,EAAQ,GACd,GAAImL,EAAE,MAAQ,EAAG,CACb,MAAMqoC,EAAY/6B,EAAqB,CACnC,EAAGtN,EAAE,EACL,EAAGA,EAAE,EACL,MAAO,EACP,OAAQA,EAAE,MAC1B,EAAewN,EAAgB,MAAM,EACzB,GAAI,OAAO66B,GAAc,WACrB,OAAOF,EAEXtzC,EAAM,KAAK,GAAGwzC,CAAS,EACvB,MAAMC,EAAah7B,EAAqB,CACpC,EAAGtN,EAAE,EAAIA,EAAE,MAAQ,EACnB,EAAGA,EAAE,EACL,MAAO,EACP,OAAQA,EAAE,MAC1B,EAAewN,EAAgB,MAAM,EACzB,GAAI,OAAO86B,GAAe,WACtB,OAAOH,EAEXtzC,EAAM,KAAK,GAAGyzC,CAAU,CAC3B,KACI,CACD,MAAMC,EAASj7B,EAAqB,CAChC,EAAGtN,EAAE,EACL,EAAGA,EAAE,EACL,MAAOA,EAAE,MACT,OAAQA,EAAE,MAC1B,EAAewN,EAAgB,MAAM,EACzB,GAAI,OAAO+6B,GAAW,WAClB,OAAOJ,EAEXtzC,EAAM,KAAK,GAAG0zC,CAAM,CACvB,CACD,IAAI5tD,EAAOqlB,EAAE,EAAI6lC,EACbjrD,EAAQolB,EAAE,EAAIA,EAAE,MAAQ,EAAI6lC,EAChC,UAAWrxC,KAAOK,EACd,UAAWnc,KAAQ8b,EACX9b,EAAK,OAAS,SAElBiC,EAAO,KAAK,IAAIjC,EAAK,KAAK,CAAC,EAAGiC,CAAI,EAClCC,EAAQ,KAAK,IAAIlC,EAAK,KAAK,CAAC,EAAGkC,CAAK,GAGxCD,IAASqlB,EAAE,EAAI6lC,GAAmBjrD,IAAUolB,EAAE,EAAIA,EAAE,MAAQ,EAAI6lC,EAChEuC,EAAW,GAGX3U,EAAS,CACL,QAAS,CACL,KAAMA,EAAO,QAAQ,MAAQ,CAAC,EAAG,CAAC,EAClC,MAAO,CACH,EAAG94C,EAAOkrD,EACV,EAAG7lC,EAAE,EACL,MAAOplB,EAAQD,EAAO,EACtB,OAAQqlB,EAAE,MACb,EACD,WAAYyzB,EAAO,QAAQ,UAC9B,EACD,QAASA,EAAO,QAChB,KAAMA,EAAO,IAC7B,CAEK,OAAQ,CAAC2U,GACV,OAAO3U,CACX,CACA,SAAS+U,GAAQv3C,EAAG,CAChB,OAAIA,EAAE,WAAW,GAAG,GAAKA,EAAE,SAAS,GAAG,IACnCA,EAAIA,EAAE,MAAM,EAAG,EAAE,EAAE,QAAQ,MAAO,GAAG,GAElCA,CACX,CACO,SAASw3C,GAAQl3C,EAAK,CACzB,IAAIm3C,GACH,SAAUA,EAAO,CACdA,EAAMA,EAAM,KAAU,CAAC,EAAI,OAC3BA,EAAMA,EAAM,SAAc,CAAC,EAAI,WAC/BA,EAAMA,EAAM,kBAAuB,CAAC,EAAI,mBAC3C,GAAEA,IAAUA,EAAQ,CAAE,EAAC,EACxB,MAAM7tD,EAAS,GACf,IAAI8L,EAAU,GACVtM,EAAQ,EACRgN,EAAQqhD,EAAM,KAClBn3C,EAAMA,EAAI,QAAQ,QAAS;AAAA,CAAI,EAC/B,IAAI/W,EAAQ,EACZ,UAAWmuD,KAAQp3C,EAAK,CACpB,OAAQlK,EAAK,CACT,KAAKqhD,EAAM,KACHC,IAAS,KAAQA,IAAS;AAAA,GAC1BhiD,EAAQ,KAAK4K,EAAI,MAAMlX,EAAOG,CAAK,CAAC,EACpCH,EAAQG,EAAQ,EACZmuD,IAAS;AAAA,IACT9tD,EAAO,KAAK8L,CAAO,EACnBA,EAAU,KAGTgiD,IAAS,MACdthD,EAAQqhD,EAAM,UAElB,MACJ,KAAKA,EAAM,SACHC,IAAS,MACTthD,EAAQqhD,EAAM,mBAElB,MACJ,KAAKA,EAAM,kBACHC,IAAS,IACTthD,EAAQqhD,EAAM,WAETC,IAAS,KAAQA,IAAS;AAAA,KAC/BhiD,EAAQ,KAAK6hD,GAAQj3C,EAAI,MAAMlX,EAAOG,CAAK,CAAC,CAAC,EAC7CH,EAAQG,EAAQ,EACZmuD,IAAS;AAAA,IACT9tD,EAAO,KAAK8L,CAAO,EACnBA,EAAU,KAEdU,EAAQqhD,EAAM,MAKlB,KACP,CACDluD,GACH,CACD,OAAIH,EAAQkX,EAAI,QACZ5K,EAAQ,KAAK6hD,GAAQj3C,EAAI,MAAMlX,EAAOkX,EAAI,MAAM,CAAC,CAAC,EAEtD1W,EAAO,KAAK8L,CAAO,EACZ9L,EAAO,IAAImlB,GAAKA,EAAE,IAAI1nB,IAAM,CAAE,SAAUA,EAAG,UAAWA,EAAG,OAAQ,QAAQ,EAAG,CAAC,CACxF,CACO,SAASswD,GAAgB/zC,EAAOuxC,EAAe/hD,EAAG,OACrD,MAAMoiD,EAAaS,GAAsBryC,EAAOuxC,CAAa,EAEvDyC,EAAqB53C,GAAM,QACxBhD,EAAA,OAAO,UAAU,YAAjB,MAAAA,EAA4B,UAAUgD,EACnD,EACU63C,EAAgB,CAAC73C,EAAG6B,IAAS,OAC/B,QAAI7E,EAAA,OAAO,UAAU,YAAjB,YAAAA,EAA4B,SAAU,OAC/B,IACN,OAAO,UAAU,UAAU,MAAM,CAClC,IAAI,cAAc,CAEd,aAAc,IAAI,KAAK,CAACgD,CAAC,EAAG,CAAE,KAAM,aAAc,EAClD,YAAa,IAAI,KAAK,CAAC6B,CAAI,EAAG,CAC1B,KAAM,WAC1B,CAAiB,CACjB,CAAa,CACb,CAAS,EACM,GACf,EACUi2C,EAAwB,CAAC93C,EAAG6B,IAAS,SACvC,GAAI,CACA,GAAIzO,IAAM,QAAaA,EAAE,gBAAkB,KACvC,MAAM,IAAI,MAAM,mBAAmB,GAEvC4J,EAAA5J,GAAA,YAAAA,EAAG,gBAAH,MAAA4J,EAAkB,QAAQ,aAAcgD,IACxCyrB,EAAAr4B,GAAA,YAAAA,EAAG,gBAAH,MAAAq4B,EAAkB,QAAQ,YAAa5pB,EAC1C,MACK,CACGg2C,EAAc73C,EAAG6B,CAAI,GACtB+1C,EAAkB53C,CAAC,CAE1B,CACT,IACQhD,EAAA,OAAO,UAAU,YAAjB,YAAAA,EAA4B,SAAU,SAAa5J,GAAA,YAAAA,EAAG,iBAAkB,OACnE0kD,EAAsBtC,EAAW,UAAWA,EAAW,QAAQ,EAG/DoC,EAAkBpC,EAAW,SAAS,EAE/CpiD,GAAA,MAAAA,EAAG,gBACP,CASO,SAAS2kD,GAAc1hC,EAAM,CAChC,OAAOA,IAAS,EACpB,CCjMA,SAAS2hC,GAAMlvD,EAAG,CAChB,OAAI,OAAOA,GAAM,SAAiBA,EAC3B,GAAGA,CAAC,IACb,CACA,MAAMshD,GAAoB,IAAM13C,GAAKA,EAAE,WACjCulD,GAAqB,IAAMvlD,GAAKA,EAAE,YAClCwlD,GAAuB7sD,GAAO,KAAK,EAAE,CACzC,KAAM,UACN,MAAO,cACP,UAAW,GACX,KAAM,CACJ,YAAa,CAAC++C,IAAM,EACpB,YAAa,CAAC6N,IAAO,CACtB,CACH,CAAC,EACYE,GAAsBzlD,GAAK,CACtC,KAAM,CACJ,QAAA0lD,EACA,SAAAC,EACA,SAAAzoD,EACA,GAAGxD,CACJ,EAAGsG,EACJ,OAAO1N,gBAAoBkzD,GAAS,CAClC,YAAaF,GAAMK,CAAQ,EAC3B,WAAYL,GAAMI,CAAO,EACzB,GAAGhsD,CACJ,EAAEwD,CAAQ,CACb,EC5BM0oD,GAAa,EACbC,GAAgB,KACf,SAASC,GAAcC,EAAiBjN,EAAWa,EAAU,CAChE,MAAMqM,EAAcxsD,GAAM,OAAO,CAAC,EAC5B,CAACysD,EAAMC,CAAI,EAAIH,GAAmB,CAAC,EAAG,CAAC,EAC7CvsD,GAAM,UAAU,IAAM,CAClB,GAAIysD,IAAS,GAAKC,IAAS,EAAG,CAC1BF,EAAY,QAAU,EACtB,MACH,CACD,IAAIG,EAAY,GACZC,EAAW,EACf,MAAMC,EAAYC,GAAY,OAC1B,GAAI,CAAAH,EAEJ,IAAIC,IAAa,EACbA,EAAWE,MAEV,CACD,MAAMC,EAAOD,EAAUF,EACvBJ,EAAY,QAAU,KAAK,IAAI,EAAGA,EAAY,QAAUO,EAAOV,EAAa,EAC5E,MAAMW,EAASR,EAAY,SAAW,MAAQO,EAAOX,IACrDt7C,EAAAwuC,EAAU,UAAV,MAAAxuC,EAAmB,SAAS27C,EAAOO,EAAQN,EAAOM,GAClDJ,EAAWE,EACX3M,GAAA,MAAAA,GACH,CACD,OAAO,sBAAsB0M,CAAQ,EACjD,EACQ,cAAO,sBAAsBA,CAAQ,EAC9B,IAAM,CACTF,EAAY,EACxB,CACK,EAAE,CAACrN,EAAWmN,EAAMC,EAAMvM,CAAQ,CAAC,CACxC,CChCO,SAAS8M,GAAe,CAAE,UAAWC,EAAa,aAAcC,EAAgB,kBAAmBC,EAAqB,MAAOC,EAAS,YAAaC,EAAe,YAAaC,EAAe,WAAAC,EAAY,QAAAC,GAAY,CAC3N,KAAM,CAAChmC,EAAWF,EAAcC,EAAmBmC,EAAO63B,EAAaC,CAAW,EAAIzhD,GAAM,QAAQ,IAAM,CACtG,GAAI,CAACwtD,GAAcC,IAAY,GAC3B,MAAO,CAACP,EAAaC,EAAgBC,EAAqBC,EAASC,EAAeC,CAAa,EACnG,MAAMG,EAASD,EAAU,GACnB3lC,EAAKolC,EACLS,EAAK9+B,KACX,MAAO,CACH,OAAO/G,GAAO,SAAWA,EAAK4lC,EAAU5pC,GAAM,KAAK,KAAKgE,EAAGhE,CAAC,EAAI4pC,CAAM,EACtE,KAAK,KAAKP,EAAiBO,CAAM,EACjC,KAAK,KAAKN,EAAsBM,CAAM,EACtC,CACI,GAAGL,EACH,iBAAiBA,GAAA,YAAAA,EAAS,iBAAkBM,EAAG,gBAAkBD,EACjE,wBAAwBL,GAAA,YAAAA,EAAS,wBAAyBM,EAAG,uBAAyBD,EACtF,sBAAsBL,GAAA,YAAAA,EAAS,sBAAuBM,EAAG,qBAAuBD,CACnF,EACD,KAAK,MAAMJ,GAAiB,GAAKI,CAAM,EACvC,KAAK,MAAMH,GAAiB,GAAKG,CAAM,CACnD,CACA,EAAO,CAACN,EAAqBD,EAAgBG,EAAeC,EAAeE,EAASP,EAAaM,EAAYH,CAAO,CAAC,EACjH,MAAO,CAAE,UAAA5lC,EAAW,aAAAF,EAAc,kBAAAC,EAAmB,MAAAmC,EAAO,YAAA63B,EAAa,YAAAC,EAC7E,CCrBO,MAAMmM,GAAqB,CAC9B,SAAU,GACV,UAAW,GACX,MAAO,GACP,aAAc,GACd,kBAAmB,GACnB,gBAAiB,GACjB,kBAAmB,GACnB,mBAAoB,GACpB,KAAM,GACN,MAAO,GACP,IAAK,GACL,OAAQ,GACR,OAAQ,GACR,aAAc,GACd,qBAAsB,GACtB,cAAe,GACf,gBAAiB,GACjB,aAAc,GACd,aAAc,GACd,eAAgB,GAChB,YAAa,GACb,aAAc,GACd,iBAAkB,GAClB,kBAAmB,GACnB,oBAAqB,GACrB,iBAAkB,GAClB,iBAAkB,GAClB,mBAAoB,GACpB,gBAAiB,GACjB,UAAW,GACX,UAAW,GACX,aAAc,GACd,SAAU,GACV,YAAa,GACb,WAAY,GACZ,WAAY,GACZ,wBAAyB,GACzB,2BAA4B,GAC5B,0BAA2B,GAC3B,0BAA2B,GAC3B,aAAc,GACd,gBAAiB,GACjB,eAAgB,GAChB,eAAgB,EACpB,EACA,SAASC,GAAeC,EAASC,EAAY,CACzC,OAAID,IAAY,GACLC,EACPD,IAAY,GACL,GACJA,CACX,CACO,SAASE,GAAgBC,EAAU,CACtC,MAAMC,EAAQ1gB,GAAa,MAC3B,MAAO,CACH,aAAcqgB,GAAeI,EAAS,aAAc,qBAAqB,EACzE,MAAOJ,GAAeI,EAAS,MAAO,YAAY,EAClD,aAAcJ,GAAeI,EAAS,aAAc,YAAY,EAChE,kBAAmBJ,GAAeI,EAAS,kBAAmB,OAAO,EACrE,gBAAiBJ,GAAeI,EAAS,gBAAiB,aAAa,EACvE,kBAAmBJ,GAAeI,EAAS,kBAAmB,WAAW,EACzE,mBAAoBJ,GAAeI,EAAS,mBAAoB,KAAK,EACrE,KAAMA,EAAS,KACf,IAAKA,EAAS,IACd,OAAQJ,GAAeI,EAAS,OAAQC,EAAQ,mBAAqB,QAAQ,EAC7E,SAAUL,GAAeI,EAAS,SAAU,aAAa,EACzD,qBAAsBJ,GAAeI,EAAS,qBAAsB,eAAe,EACnF,WAAYJ,GAAeI,EAAS,WAAY,WAAW,EAC3D,0BAA2BJ,GAAeI,EAAS,0BAA2B,eAAe,EAC7F,WAAYJ,GAAeI,EAAS,WAAY,qBAAqB,EACrE,0BAA2BJ,GAAeI,EAAS,0BAA2B,eAAe,EAC7F,YAAaJ,GAAeI,EAAS,YAAa,gBAAgB,EAClE,2BAA4BJ,GAAeI,EAAS,2BAA4B,gBAAgB,EAChG,SAAUJ,GAAeI,EAAS,SAAU,SAAS,EACrD,wBAAyBJ,GAAeI,EAAS,wBAAyB,aAAa,EACvF,cAAeJ,GAAeI,EAAS,cAAe,cAAc,EACpE,gBAAiBJ,GAAeI,EAAS,gBAAiB,wBAAwB,EAClF,aAAcJ,GAAeI,EAAS,aAAc,iBAAiB,EACrE,aAAcJ,GAAeI,EAAS,aAAc,aAAa,EACjE,eAAgBJ,GAAeI,EAAS,eAAgB,wBAAwB,EAChF,YAAaJ,GAAeI,EAAS,YAAa,mBAAmB,EACrE,aAAcJ,GAAeI,EAAS,aAAc,UAAU,EAC9D,iBAAkBJ,GAAeI,EAAS,iBAAkB,QAAQ,EACpE,MAAOA,EAAS,MAChB,UAAWJ,GAAeI,EAAS,UAAW,aAAa,EAC3D,OAAQJ,GAAeI,EAAS,OAAQ,WAAW,EACnD,UAAWJ,GAAeI,EAAS,UAAW,WAAW,EACzD,aAAcJ,GAAeI,EAAS,aAAc,QAAQ,EAC5D,eAAgBJ,GAAeI,EAAS,eAAgB,iBAAiB,EACzE,eAAgBJ,GAAeI,EAAS,eAAgB,iBAAiB,EACzE,gBAAiBJ,GAAeI,EAAS,gBAAiB,kBAAkB,EAC5E,aAAcJ,GAAeI,EAAS,aAAc,eAAe,EACnE,UAAWJ,GAAeI,EAAS,UAAW,SAAS,EACvD,kBAAmBJ,GAAeI,EAAS,kBAAmB,oBAAoB,EAClF,oBAAqBJ,GAAeI,EAAS,oBAAqB,yBAAyB,EAC3F,iBAAkBJ,GAAeI,EAAS,iBAAkB,uBAAuB,EACnF,iBAAkBJ,GAAeI,EAAS,iBAAkB,mBAAmB,EAC/E,mBAAoBJ,GAAeI,EAAS,mBAAoB,0BAA0B,EAC1F,gBAAiBJ,GAAeI,EAAS,gBAAiB,yBAAyB,CAC3F,CACA,CACO,SAASE,GAA2BC,EAAe,CACtD,MAAM7vD,EAAO8V,GAAY+5C,CAAa,EACtC,OAAOpuD,GAAM,QAAQ,IAAM,CACvB,GAAIzB,IAAS,OACT,OAAOyvD,GAAgBJ,EAAkB,EAC7C,MAAMS,EAAwB,CAC1B,GAAG9vD,EACH,cAAcA,GAAA,YAAAA,EAAM,gBAAgBA,GAAA,YAAAA,EAAM,WAAYqvD,GAAmB,aACzE,kBAAkBrvD,GAAA,YAAAA,EAAM,oBAAoBA,GAAA,YAAAA,EAAM,SAAUqvD,GAAmB,iBAC/E,eAAervD,GAAA,YAAAA,EAAM,iBAAiBA,GAAA,YAAAA,EAAM,QAASqvD,GAAmB,cACxE,cAAcrvD,GAAA,YAAAA,EAAM,gBAAgBA,GAAA,YAAAA,EAAM,OAAQqvD,GAAmB,aACrE,mBAAmBrvD,GAAA,YAAAA,EAAM,qBAAqBA,GAAA,YAAAA,EAAM,QAASqvD,GAAmB,kBAChF,kBAAkBrvD,GAAA,YAAAA,EAAM,oBAAoBA,GAAA,YAAAA,EAAM,OAAQqvD,GAAmB,gBACzF,EACQ,OAAOI,GAAgB,CACnB,GAAGJ,GACH,GAAGS,CACf,CAAS,CACT,EAAO,CAAC9vD,CAAI,CAAC,CACb,CC1HO,SAAS+vD,GAAgBrnB,EAAQ,CACpC,SAASsnB,EAAa9gC,EAAO+gC,EAAO7zD,EAAM,CACtC,GAAI,OAAO8yB,GAAU,SACjB,MAAO,CACH,YAAaA,EACb,YAAa,GACb,MAAA+gC,EACA,KAAA7zD,CAChB,EAEQ,MAAM8zD,EAAgB,CAClB,YAAahhC,EAAM,YACnB,YAAaA,EAAM,YACnB,MAAA+gC,EACA,KAAA7zD,CACZ,EACQ,OAAI8yB,EAAM,YAAc,SACpBghC,EAAc,UAAYhhC,EAAM,UAC3B,IAAI,CAAC7wB,EAAGktD,IAAQyE,EAAa3xD,EAAG4xD,EAAQ,EAAG,CAAC,GAAG7zD,EAAMmvD,CAAG,CAAC,CAAC,EAC1D,KAAK,CAAC5tD,EAAGC,IAAMD,EAAE,YAAcC,EAAE,WAAW,GAE9CsyD,CACV,CAGD,OAFiBxnB,EAAO,IAAI,CAACxZ,EAAOxwB,IAAMsxD,EAAa9gC,EAAO,EAAG,CAACxwB,CAAC,CAAC,CAAC,EAErD,KAAK,CAACf,EAAGC,IAAMD,EAAE,YAAcC,EAAE,WAAW,CAChE,CACO,SAASuyD,GAAiBC,EAAapoC,EAAM,CAChD,MAAMqoC,EAAY,GAClB,SAASL,EAAa9gC,EAAOohC,EAAiBC,EAAe,GAAO,CAChE,IAAIC,EAAcF,IAAoB,KAAOA,EAAkBphC,EAAM,YAAclH,EAAOkH,EAAM,YAchG,GAbIA,EAAM,YAAc,SACpBshC,EAActhC,EAAM,UAAU,CAAC,EAAE,YAAcA,EAAM,aAEzDshC,IACAH,EAAU,KAAK,CACX,YAAanhC,EAAM,YACnB,aAAc,GACd,KAAMqhC,EACN,YAAarhC,EAAM,YACnB,MAAOA,EAAM,MACb,KAAMA,EAAM,KACZ,KAAMshC,CAClB,CAAS,EACGthC,EAAM,UACN,QAASxwB,EAAI,EAAGA,EAAIwwB,EAAM,UAAU,OAAQxwB,IAAK,CAC7C,MAAM+xD,EAAqB/xD,EAAIwwB,EAAM,UAAU,OAAS,EAAIA,EAAM,UAAUxwB,EAAI,CAAC,EAAE,YAAc4xD,EACjGN,EAAa9gC,EAAM,UAAUxwB,CAAC,EAAG+xD,EAAoBF,GAAgBrhC,EAAM,WAAW,CACzF,CAER,CACD,MAAMwhC,EAAiBX,GAAgBK,EAAY,MAAM,EACzD,QAAS1xD,EAAI,EAAGA,EAAIgyD,EAAe,OAAQhyD,IAAK,CAC5C,MAAM4xD,EAAkB5xD,EAAIgyD,EAAe,OAAS,EAAIA,EAAehyD,EAAI,CAAC,EAAE,YAAc,KAC5FsxD,EAAaU,EAAehyD,CAAC,EAAG4xD,CAAe,CAClD,CACD,IAAIK,EAAe,EACnB,UAAWpsC,KAAK8rC,EACZ9rC,EAAE,aAAeosC,EACjBA,GAAgBpsC,EAAE,KAEtB,OAAO8rC,EACF,OAAOhyD,GAAKA,EAAE,OAAS,EAAK,EAC5B,IAAIA,GAAK,CACV,KAAM,CAAE,KAAAuyD,EAAM,GAAGjvD,CAAI,EAAKtD,EAC1B,OAAOsD,CACf,CAAK,CACL,CAEO,SAASkvD,GAAkB/3C,EAAKg4C,EAAoB,CACvD,GAAIA,IAAuB,QAAaX,GAAiB,SAAW,EAChE,MAAO,CACH,KAAM,CAACr3C,CAAG,EACV,cAAeA,EACf,cAAe,GACf,WAAYA,EACZ,aAAcA,EACd,UAAW,EACvB,EACI,IAAIi4C,EAAOj4C,EACX,UAAWoW,KAAS4hC,EAAoB,CACpC,GAAIC,IAAS,EACT,MAAO,CACH,KAAM,CAAC,GAAG7hC,EAAM,KAAM,EAAE,EACxB,cAAeA,EAAM,YACrB,cAAe,GACf,WAAY,GACZ,aAAc,GACd,UAAWA,EAAM,IACjC,EAEQ,GADA6hC,IACI,CAAC7hC,EAAM,YAAa,CACpB,GAAI6hC,EAAO7hC,EAAM,KACb,MAAO,CACH,KAAM,CAAC,GAAGA,EAAM,KAAM6hC,CAAI,EAC1B,cAAe7hC,EAAM,YAAc6hC,EACnC,cAAe,GACf,WAAYA,EACZ,aAAc7hC,EAAM,aAAe6hC,EACnC,UAAW7hC,EAAM,IACrC,EACY6hC,GAAQ7hC,EAAM,IACjB,CACJ,CAID,MAAO,CACH,KAAM,CAACpW,CAAG,EACV,cAAeA,EACf,cAAe,GACf,WAAYA,EACZ,aAAcA,EACd,UAAW,EACnB,CACA,CACO,SAASk4C,GAAoBjwD,EAASinB,EAAM2mC,EAAasC,EAAuB,CACnF,MAAMH,EAAqBrvD,GAAM,QAAQ,IAAOV,IAAY,OAAY,OAAYovD,GAAiBpvD,EAASinB,CAAI,EAAI,CAACjnB,EAASinB,CAAI,CAAC,EAC/HwB,EAAgB/nB,GAAM,QAAQ,IAC5BqvD,IAAuB,OAChB9oC,EACJ8oC,EAAmB,OAAO,CAACI,EAAKhiC,IAAUgiC,GAAOhiC,EAAM,YAAc,EAAIA,EAAM,KAAO,GAAI,CAAC,EACnG,CAAC4hC,EAAoB9oC,CAAI,CAAC,EACvBkB,EAAYznB,GAAM,QAAQ,IACxBV,IAAY,QAEZ,OAAO4tD,GAAgB,UAAY5tD,EAAQ,SAAW4tD,EAC/CA,EACHwC,GAAa,CACjB,KAAM,CAAE,cAAAC,CAAe,EAAGP,GAAkBM,EAAUL,CAAkB,EACxE,OAAIM,EACOrwD,EAAQ,OACZ,OAAO4tD,GAAgB,SAAWA,EAAcA,EAAYwC,CAAQ,CACvF,EACO,CAACL,EAAoB/vD,EAAS4tD,CAAW,CAAC,EACvC0C,EAAqB5vD,GAAM,YAAaqX,GAAQ,CAClD,GAAIg4C,IAAuB,OACvB,OAAOh4C,EACX,IAAIi4C,EAAOj4C,EACX,UAAWoW,KAAS4hC,EAAoB,CACpC,GAAIC,IAAS,EACT,OAEJ,GADAA,IACI,CAAC7hC,EAAM,YAAa,CACpB,GAAI6hC,EAAO7hC,EAAM,KACb,OAAOA,EAAM,aAAe6hC,EAChCA,GAAQ7hC,EAAM,IACjB,CACJ,CACD,OAAOpW,CACf,EAAO,CAACg4C,CAAkB,CAAC,EACjB9yB,EAAsBxrB,GAAYy+C,IAAyBlwD,GAAA,YAAAA,EAAS,eAAeU,GAAM,YAAaqX,GAAQ,CAChH,GAAI/X,IAAY,OACZ,OAAOkwD,GAAA,YAAAA,EAAwBn4C,EAAKA,EAAKA,GAC7C,GAAIm4C,IAA0B,SAAalwD,GAAA,YAAAA,EAAS,iBAAkB,OAClE,OACJ,KAAM,CAAE,cAAAqwD,EAAe,aAAAT,EAAc,WAAAW,CAAY,EAAGT,GAAkB/3C,EAAKg4C,CAAkB,EAC7F,OAAIM,EACOrwD,EAAQ,cACZkwD,GAAA,YAAAA,EAAwBn4C,EAAKw4C,EAAYX,EACnD,EAAE,CAACG,EAAoBG,EAAuBlwD,CAAO,CAAC,CAAC,EACxD,OAAIA,IAAY,OACL,CACH,UAAAmoB,EACA,KAAMlB,EACN,gBAAiBqpC,EACjB,oBAAArzB,CACZ,EACW,CACH,UAAA9U,EACA,KAAMM,EACN,gBAAiB6nC,EACjB,oBAAArzB,CACR,CACA,CC9KO,SAASuzB,GAAexwD,EAASinB,EAAM,CAC1C,MAAM8oC,EAAqBrvD,GAAM,QAAQ,IAAOV,IAAY,OAAY,OAAYovD,GAAiBpvD,EAASinB,CAAI,EAAI,CAACjnB,EAASinB,CAAI,CAAC,EACrI,MAAO,CACH,sBAAAwpC,GACA,wBAAAC,GACA,OAAQhwD,GAAM,YAAaiwD,GAAc,CACrC,GAAI,OAAOA,GAAc,SACrB,OAAOb,GAAkBa,EAAWZ,CAAkB,EAE1D,MAAM,EAAID,GAAkBa,EAAU,CAAC,EAAGZ,CAAkB,EAC5D,MAAO,CACH,GAAG,EACH,cAAe,CAACY,EAAU,CAAC,EAAG,EAAE,aAAa,CAC7D,CACA,EAAW,CAACZ,CAAkB,CAAC,CAC/B,CACA,CACO,SAASW,GAAwBrB,EAAah0D,EAAMmkD,EAAQ,CAC/D,KAAM,CAACzhD,EAAO,GAAG6C,CAAI,EAAIvF,EACzB,OAAIuF,EAAK,CAAC,IAAM,GACLyuD,EAAY,IAAI,CAAClhC,EAAOxwB,IAAOA,IAAMI,EAAQ,CAAE,GAAGowB,EAAO,GAAGqxB,CAAM,EAAKrxB,CAAM,EAEjFkhC,EAAY,IAAI,CAAClhC,EAAOxwB,IAAMA,IAAMI,EAAQ,CAAE,GAAGowB,EAAO,UAAWuiC,GAAwBviC,EAAM,WAAa,CAAE,EAAEvtB,EAAM4+C,CAAM,CAAC,EAAKrxB,CAAK,CACpJ,CACO,SAASsiC,GAAsBpB,EAAah0D,EAAM,CACrD,KAAM,CAAC0C,EAAO,GAAG6C,CAAI,EAAIvF,EACzB,OAAIuF,EAAK,CAAC,IAAM,GACLyuD,EAAYtxD,CAAK,EAErB0yD,GAAsBpB,EAAYtxD,CAAK,EAAE,WAAa,GAAI6C,CAAI,CACzE,CC5BA,SAASgwD,GAAeC,EAAchxC,EAAU,CAC5C,KAAM,CAACvmB,CAAG,EAAI4Z,WAAe,KAAO,CAChC,MAAO29C,EACP,SAAAhxC,EACA,OAAQ,CACJ,IAAI,SAAU,CACV,OAAOvmB,EAAI,KACd,EACD,IAAI,QAAQqG,EAAO,CACf,MAAMsoC,EAAO3uC,EAAI,MACb2uC,IAAStoC,IACTrG,EAAI,MAAQqG,EACZrG,EAAI,SAASqG,EAAOsoC,CAAI,EAE/B,CACJ,CACJ,EAAC,EACF,OAAA3uC,EAAI,SAAWumB,EACRvmB,EAAI,MACf,CACO,SAASw3D,GAAuBC,EAAeC,EAAe7oC,EAAW8oC,EAAkBC,EAAa,CAC3G,KAAM,CAACC,EAAgBC,CAAe,EAAIhgC,EAAa,QAAC,IAC7C,CACH4/B,IAAkB,QAAa,OAAO7oC,GAAc,SAAW,KAAK,MAAM6oC,EAAgB7oC,CAAS,EAAI,EACvG6oC,IAAkB,QAAa,OAAO7oC,GAAc,SAAW,EAAE6oC,EAAgB7oC,GAAa,CAC1G,EACO,CAAC6oC,EAAe7oC,CAAS,CAAC,EACvBkpC,EAAqBjgC,UAAc,KAAO,CAC5C,EAAG6/B,EAAiB,QAAQ,EAC5B,EAAGE,EACH,MAAOF,EAAiB,QAAQ,OAAS,EACzC,OAAQA,EAAiB,QAAQ,QAAU,EAE3C,GAAIG,CACP,GAAG,CAACH,EAAkBG,EAAiBD,CAAc,CAAC,EACjD,CAACG,EAAeC,EAAkBv9C,CAAK,EAAIC,GAA0Bo9C,CAAkB,EACvFG,EAAiBngD,SAAa6/C,CAAW,EAC/CM,EAAe,QAAUN,EACzB,MAAMlR,EAAY4Q,GAAe,KAAM5Z,GAAU,CACzCA,IAAW,MAAQga,IAAkB,OACrCha,EAAO,UAAYga,EAEdha,IAAW,MAAQ+Z,IAAkB,SAC1C/Z,EAAO,WAAa+Z,EAEhC,CAAK,EACKU,GAAgBH,EAAc,QAAU,GAAK,EACnDj+C,kBAAsB,IAAM,CACxB,GAAI29C,IAAkB,QAAahR,EAAU,UAAY,MAAQyR,EAAc,CAC3E,GAAIzR,EAAU,QAAQ,YAAcgR,EAChC,OACJhR,EAAU,QAAQ,UAAYgR,EAC1BhR,EAAU,QAAQ,YAAcgR,GAChCh9C,IAEJw9C,EAAe,QAAO,CACzB,CACJ,EAAE,CAACR,EAAeS,EAAcz9C,EAAOgsC,CAAS,CAAC,EAClD,MAAM0R,GAAgBJ,EAAc,OAAS,GAAK,EAClDj+C,yBAAsB,IAAM,CACxB,GAAI09C,IAAkB,QAAa/Q,EAAU,UAAY,MAAQ0R,EAAc,CAC3E,GAAI1R,EAAU,QAAQ,aAAe+Q,EACjC,OACJ/Q,EAAU,QAAQ,WAAa+Q,EAC3B/Q,EAAU,QAAQ,aAAe+Q,GACjC/8C,IAEJw9C,EAAe,QAAO,CACzB,CACJ,EAAE,CAACT,EAAeW,EAAc19C,EAAOgsC,CAAS,CAAC,EAC3C,CACH,cAAAsR,EACA,iBAAAC,EACA,UAAAvR,CACR,CACA,CChDA,MAAM2R,GAAwBC,OAAW,SAAY,MAAMC,GAAA,WAAO,wCAAkE,EAAC,+DAErI,IAAIC,GAAY,EAChB,SAASC,GAAa35C,EAAO,CACzB,OAAOkc,GAAK09B,GAAQA,GAAQ55C,CAAK,EAC5B,OAAYvc,KAAE,OAAS,MAAS,EAChC,IAASA,GAAA,gBAAAiB,MAAO0U,EAAA3V,EAAE,OAAF,YAAA2V,EAAS,KAAM,GAAK,KAAIyuB,EAAApkC,EAAE,OAAF,YAAAokC,EAAS,KAAM,GAAK,CAAC,EAAC,CAAC,CAAC,CACzE,CACA,SAASgyB,GAAex1D,EAAOwb,EAAQ,CAC/B,OAAAxb,IAAU,QAAawb,IAAW,GAAMxb,EAAM,QAAQ,SAAW,GAAKA,EAAM,UAAY,OACjFA,EACJ,CACH,QAASA,EAAM,UAAY,OACrB,OACA,CACE,KAAM,CAACA,EAAM,QAAQ,KAAK,CAAC,EAAIwb,EAAQxb,EAAM,QAAQ,KAAK,CAAC,CAAC,EAC5D,MAAO,CACH,GAAGA,EAAM,QAAQ,MACjB,EAAGA,EAAM,QAAQ,MAAM,EAAIwb,CAC/B,EACA,WAAYxb,EAAM,QAAQ,WAAW,IAAU8mB,IAAA,CAC3C,GAAGA,EACH,EAAGA,EAAE,EAAItL,CAAA,EACX,CACN,EACJ,KAAMxb,EAAM,KACZ,QAASA,EAAM,QAAQ,OAAOwb,CAAM,EAE5C,CACA,MAAM4kB,GAAc,CAChB,KAAMphC,EAAa,QACnB,aAAc,EAClB,EACMy2D,GAAqB,CACvB,QAAS7zD,GAAiB,MAAM,EAChC,KAAMA,GAAiB,MAAM,EAC7B,QAAS,MACb,EACM8zD,GAAiB,CAACjrD,EAAGgoC,IAAiB,cACxC,KAAM,CAACkjB,EAAoBC,CAAqB,EAAIn/C,WAAeg/C,EAAkB,EAC/E,CAACriC,EAASyiC,CAAU,EAAIp/C,EAAe,WACvCkwC,EAAiB/xC,SAAa,IAAI,EAClCg/B,EAAYh/B,SAAa,IAAI,EAC7B,CAACkhD,EAAYC,CAAa,EAAIt/C,EAAe,WAC7Cu/C,EAAWphD,WACX6tC,EAAa,OAAO,OAAW,IAAc,KAAO,OACpD,CAAE,oBAAAwT,EAAqB,oBAAqBxC,EAAuB,sBAAAyC,EAAuB,MAAAttD,EAAO,OAAA0H,EAAQ,QAAS6lD,EAAW,KAAMC,EAAQ,eAAA91B,EAAgB,cAAA+1B,EAAe,gBAAAC,EAAiB,cAAAC,EAAe,kBAAAC,EAAmB,iBAAAC,EAAkB,WAAYC,EAAc,SAAUC,EAAY,YAAAC,EAAa,gBAAAC,EAAiB,oBAAAlX,EAAqB,6BAAA8L,EAA+B,GAAM,kBAAAuD,GAAoB,UAAW,qBAAA8H,EAAsB,kBAAAC,GAAmB,UAAA70D,GAAW,oBAAA80D,GAAqB,qBAAsBtK,GAAwB,yBAAAuK,EAA0B,qBAAAC,GAAsB,aAAAC,GAAc,cAAAC,GAAe,uBAAwBC,GAA0B,cAAAvP,EAAe,oBAAAhB,EAAqB,YAAAF,EAAa,UAAW0Q,EAAa,QAASC,GAAW,YAAalF,GAAe,WAAAmF,GAAa,GAAM,cAAAC,GAAe,cAAArY,GAAe,aAAcsY,GAAgB,iBAAkBC,GAAoB,YAAAnM,GAAc,OAAQ,aAAAoM,GAAe,QAAS,UAAAC,GAAY,QAAS,uBAAAC,GAAyB,YAAa,wBAAAC,GAA0B,YAAa,qBAAAC,GAAuB,YAAa,SAAUC,GAAY,YAAApkB,GAAa,YAAAL,GAAa,QAAA0kB,GAAS,YAAAC,GAAc,GAAO,cAAA1vC,GAAgB,EAAG,uBAAA2vC,GAAyB,eAAgB,iBAAAC,GAAmB,OAAQ,kBAAAzlB,GAAmB,uBAAAC,GAAwB,gBAAAtS,GAAiB,YAAAqyB,GAAa,cAAe0F,GAAiB,cAAA7kB,GAAe,mBAAA8kB,GAAoB,WAAYC,GAAc,uBAAAhT,GAAwB,cAAeiT,GAAoB,sBAAAC,GAAuB,eAAgBC,GAAmB,GAAI,eAAgBC,GAAmB,IAAK,mBAAoBC,GAAsB,cAAAC,GAAe,mBAAAC,GAAoB,mBAAAtuC,GAAqB,EAAG,sBAAAuuC,GAAwB,aAAc,cAAA1E,GAAe,cAAAC,GAAe,eAAA3uB,GAAgB,eAAAwO,GAAgB,OAAAC,GAAQ,eAAgB4kB,GAAkB,kBAAmBC,GAAqB,oBAAqBC,GAAuB,gBAAiBC,GAAqB,WAAA7rB,GAAY,aAAAmH,GAAc,aAAAxB,GAAc,aAAAC,GAAc,YAAAlZ,GAAa,kBAAAsa,GAAmB,YAAAqM,GAAa,YAAA3M,EAAa,YAAAK,GAAa,WAAAmL,GAAY,YAAa8R,GAAe,YAAaC,GAAe,yBAAAvO,GAA0B,aAAAG,GAAc,kBAAAC,GAAmB,UAAAgW,GAAY,GAAO,cAAA7kB,GAAe,cAAAC,GAAe,WAAAgd,GAAa,GAAO,UAAWN,GAAc,GAAI,aAAcC,GAAiB,GAAI,kBAAmBC,GAAsBD,GAAgB,MAAOE,GAAS,eAAAtH,GAAgB,UAAAsP,GAAW,gBAAAhqB,GAAiB,mBAAAiqB,GAAqB,GAAM,cAAeC,GAAkB,EAAU,EAAA/uD,EACn8E2oC,GAAgBomB,KAAoB,YAAcpmC,IAAY,OAAYomC,GAC1EC,GAAgB,OAAOhvD,EAAE,YAAe,SAAW,OAAYA,EAAE,WACjEivD,IAAaD,IAAA,YAAAA,GAAe,OAAQhvD,EAAE,YAAc,OACpDkvD,IAAoBF,IAAA,YAAAA,GAAe,QAAShvD,EAAE,eAC9CmvD,IAAsBH,IAAA,YAAAA,GAAe,aAAchvD,EAAE,qBAAuB,EAC5EovD,IAAiBJ,IAAA,YAAAA,GAAe,QAAShvD,EAAE,eAC3CqvD,GAAuBL,IAAA,YAAAA,GAAe,YACtCM,GAA+BN,IAAA,YAAAA,GAAe,oBAC9CO,GAA0BnC,KAAc,QACxCoC,IAAyBR,IAAA,YAAAA,GAAe,gBAAiB,SACzD9lC,GAAiB,KAAK,IAAIglC,GAAkB,EAAE,EAC9C/kC,GAAiB,KAAK,IAAIglC,GAAkBjlC,EAAc,EAC1DumC,GAAqB,KAAK,IAAIrB,IAAwBjlC,GAAgBD,EAAc,EACpFwmC,GAAWxlC,UAAc,IACvB,OAAO,OAAW,IACX,CAAE,SAAU,QAChB,OAAO,iBAAiB,SAAS,eAAe,EACxD,CAAE,GACC,CAAE,KAAAnK,GAAM,gBAAA4vC,GAAiB,UAAWC,GAAuB,oBAAA75B,IAAyBgzB,GAAoBZ,GAAawD,EAAQjF,GAAasC,CAAqB,EAC/J/B,GAAU/8B,UAAc,IAAM,OAAO,WAAWwlC,GAAS,QAAQ,EAAG,CAACA,EAAQ,CAAC,EAC9E,CAAE,UAAAzuC,GAAW,aAAAF,GAAc,kBAAAC,GAAmB,MAAAmC,GAAO,YAAA63B,GAAa,YAAAC,IAAgBwL,GAAe,CACnG,kBAAmBG,GACnB,aAAcD,GACd,YAAaG,GACb,YAAaC,GACb,QAAAE,GACA,UAAW2I,GACX,WAAA5I,GACA,MAAOH,EAAA,CACV,EACKgJ,GAAclI,GAA2BC,EAAa,EACtDkI,GAAiBZ,KAAsBvD,EAAS,IAAQ,GAAKA,EAAS,IAAO,GAAKA,EAAS,IAAM,GAAK,IACtGoE,GAAgBd,KAAe,OAC/B/M,EAAkB6N,GAAgB,EAAI,EACtCC,GAAuBhD,KAAkB,OACzCiD,IAAgB3B,IAAA,YAAAA,GAAoB,UAAW,GAC/C,CAAC4B,GAAiBC,EAAkB,EAAInkD,WAAe,EAAK,EAC5DuwC,GAAawR,IAAgBmC,GAC7B1T,GAAgBpvC,cAAkB,IAAM,CACtCygD,KAAoB,OACJA,KAGhBsC,GAAmB,EAAK,CAC5B,EACD,CAACtC,EAAe,CAAC,EAIdnN,EAH4Bx2B,UAAc,IACrC8jC,KAAuB,OAAY,OAAYjD,GAAeiD,GAAoB9L,CAAe,EACzG,CAAC8L,GAAoB9L,CAAe,CAAC,GACWgJ,EAC7CjO,GAAqB9yC,WACvB8yC,GAAmB,UAAY,SACZA,GAAA,QAAU,IAAI,iBAC/B7yC,EAAA,UAAU,IAAM,IAAM6yC,IAAA,YAAAA,GAAoB,QAAQ,QAAS,EAAE,EAC7D,MAACtzB,GAAsBymC,EAAyB,EAAIpO,GAAqBC,GAAwBpsB,EAAgBqsB,EAAiBjF,GAAmB,QAASl9B,EAAI,EAClKswC,EAAejjD,EAAM,YAAY,CAACrY,EAAMu7D,EAAUC,IAAc,CAClE,GAAItD,KAAmB,OACZ,SACL,MAAA7rD,EAAO,CAACrM,EAAK,CAAC,EAAImtD,EAAiBntD,EAAK,CAAC,CAAC,EACzC,OAAAk4D,IAAA,YAAAA,GAAiB7rD,EAAMkvD,EAAUC,EAAS,EAClD,CAACrO,EAAiB+K,EAAc,CAAC,EAC9BuD,EAAgCrmD,SAAa6jD,EAAkB,EAC/DrN,GAAmBvzC,cAAkB,CAAC0iC,EAAQoR,IAAW,CACvDA,IACApR,EAASwU,GAAgBxU,EAAQnmB,GAAsBu4B,EAAiBqC,GAAmBtH,GAAmB,OAAO,GAErHgR,KAA0B,QAC1BuC,EAA8B,QAAUzF,GAAejb,EAAQ,CAACoS,CAAe,EAC/E+L,GAAsBuC,EAA8B,OAAO,GAG3DrF,EAAsBrb,CAAM,GAEjC,CAACme,GAAuBtkC,GAAsBu4B,EAAiBqC,EAAiB,CAAC,EAC9E3P,GAAiBrqC,GAAYikD,GAAkBphD,cAAkB,CAACxG,EAAGyW,EAAGimC,EAAKmN,IAAO,CACtFjC,IAAA,MAAAA,GAAmB9C,EAAUpI,EAAMpB,CAAe,EAAG7kC,EAAGimC,EAAMpB,EAAiBuO,IAChF,CAACjC,GAAkBtM,EAAiBwJ,CAAS,CAAC,CAAC,EAC5C5W,GAAoBvqC,GAAYkkD,GAAqBrhD,cAAkB,CAACxG,EAAGyW,EAAGimC,EAAKmN,IAAO,CAC5FhC,IAAA,MAAAA,GAAsB/C,EAAUpI,EAAMpB,CAAe,EAAG7kC,EAAGimC,EAAMpB,EAAiBuO,IACnF,CAAChC,GAAqBvM,EAAiBwJ,CAAS,CAAC,CAAC,EAC/C7W,GAAsBtqC,GAAYmkD,GAAuBthD,cAAkB,CAACxG,EAAGyW,EAAGimC,EAAKmN,IAAO,CAChG/B,IAAA,MAAAA,GAAwBhD,EAAUpI,EAAMpB,CAAe,EAAG7kC,EAAGimC,EAAMpB,EAAiBuO,IACrF,CAAC/B,GAAuBxM,EAAiBwJ,CAAS,CAAC,CAAC,EACjDxvB,GAAa3xB,GAAY0hD,EAAc7+C,cAAkB,CAAC9Q,EAAM4qC,KAC3D+kB,GAAA,YAAAA,EAAe,CAAE,GAAG3vD,EAAM,YAAaA,EAAK,YAAc4lD,CAAmB,EAAAhb,KAAS,GAC9F,CAAC+kB,EAAc/J,CAAe,CAAC,CAAC,EAC7BvoB,GAAWpvB,GAAY2hD,EAAY9+C,cAAkB,CAAC9Q,EAAM4qC,KACvDglB,GAAA,YAAAA,EAAa,CAAE,GAAG5vD,EAAM,IAAKA,EAAK,IAAM4lD,CAAmB,EAAAhb,KAAS,GAC5E,CAACglB,EAAYhK,CAAe,CAAC,CAAC,EAC3BwO,GAAWtjD,cAAyB8Q,GAAA,CACtC,GAAIsvC,KAAe,OAAW,CAC1B,MAAMt2D,EAASs2D,GAAWzC,GAAe7sC,EAAK,CAACgkC,CAAe,CAAC,EAC3D,cAAOhrD,GAAW,UACXA,EAEJ6zD,GAAe7zD,EAAQgrD,CAAe,CACjD,CACO,UACR,CAACsL,GAAYtL,CAAe,CAAC,EAC1B,CAACjB,GAAYO,GAAiBK,EAAkB,EAAIpB,GAAqBC,EAAeC,GAAkB0M,GAAwBC,GAAyBC,GAAsBxM,GAAaC,CAA4B,EAC1N2P,GAAczmC,UAAc,IACvB1B,GAAqBH,KAAsBlF,EAAK,EACxD,CAACA,EAAK,CAAC,EACJ,CAAC23B,GAAY8V,EAAa,EAAI5kD,WAAe,CAAC,EAAG,EAAG,CAAC,CAAC,EACtD6kD,GAAc3mC,UAAc,IAAM,CACpC,GAAI2kC,KAAc,OACd,MAAO,GACX,MAAM33D,EAAS,GACf,UAAWmlB,KAAKwyC,GACL33D,EAAAmlB,EAAE,IAAI,EAAIA,EAEd,OAAAnlB,CAAA,EACR,CAAC23D,EAAS,CAAC,EACR/lC,GAAkB1b,cAAmBrY,GACnCA,EAAK,OAASR,EAAa,OACpBs8D,GAAY97D,EAAK,IAAI,EAEzB45D,IAAA,YAAAA,GAAqB,KAAKv4D,GAAKA,EAAE,QAAQrB,CAAI,GACrD,CAAC45D,GAAqBkC,EAAW,CAAC,EAEjC,IAAE,aAAc9yC,GAAS,aAAA88B,EAAa,EAAInxB,GAAegiC,EAAW3rC,GAAMqwC,GAA2BtV,GAAW,CAAC,GAAKoH,IAAoB,EAAI,EAAI4N,IAAkBhV,GAAW,CAAC,EAAG5xB,GAAgBumC,GAAoBkB,GAAa7nC,GAAiBm0B,GAAmB,OAAO,EAC/QgS,KAAe,SACCpU,IAAAiV,IACd,MAAA90B,GAAe9Q,UAAc,IACxBnM,GAAQ,KAAUppB,KAAE,QAAU,MAAS,EAC/C,CAACopB,EAAO,CAAC,EACNqD,GAAoB4Z,GAAeja,GAAeC,GAAoBD,GACtE+vC,GAAkBpQ,EAAc,KAAK,OACrCqQ,GAAmB9B,KAAe,OAAS,OAAY6B,KAAoB,EAAI,GAAQA,KAAoB/wC,GAAO,GAAO,OACzHixC,GAAc9mC,UAAc,IAC1B+kC,KAAe,OACRlxC,GACJ,CACH,CACI,MAAO,GACP,MAAO+xC,GACP,KAAM,OACN,QAAS,GACT,MAAO,SACP,cAAeV,GACf,UAAWI,GACX,iBAAAuB,GACA,qBAAA1B,GACA,6BAAAC,GACA,wBAAAC,EACJ,EACA,GAAGxxC,EAAA,EAER,CACCkxC,GACAlxC,GACA+xC,GACAV,GACAI,GACAuB,GACA1B,GACAC,GACAC,EAAA,CACH,EACKxF,GAAmB5/C,SAAa,CAClC,OAAQ,EACR,MAAO,EACP,EAAG,EACH,EAAG,EACN,EACK8mD,GAAkB9mD,SAAa,EAAK,EACpC,CAAE,iBAAAkgD,GAAkB,cAAAD,GAAe,UAAAtR,EAAc,EAAA8Q,GAAuBC,GAAeC,GAAe7oC,GAAW8oC,GAAkB,IAAOkH,GAAgB,QAAU,EAAK,EAC/KlH,GAAiB,QAAUK,GACrB,MAAAjqC,GAAciqC,GAAc,EAAIlI,EAChChhC,GAAckpC,GAAc,EAC5BrV,GAAU5qC,SAAa,IAAI,EAC3B+mD,GAAQ9jD,cAAmB+jD,GAAc,OACvCA,IAAc,IACd7mD,EAAAyqC,GAAQ,UAAR,MAAAzqC,EAAiB,QAGjB,OAAO,sBAAsB,IAAM,QAC/BA,EAAAyqC,GAAQ,UAAR,MAAAzqC,EAAiB,OAAM,CAC1B,CAET,EAAG,CAAE,GACC8mD,GAAcpB,GAAuBjwC,GAAO,EAAIA,GAChDsxC,GAAuBjkD,cAAmBpX,GAAU,CACtD,MAAMs7D,EAAepP,IAAoB,EACnClsD,EACAA,EAAM,IAAUI,IAAA,CACd,GAAGA,EACH,SAAU,CAACA,EAAE,SAAS,CAAC,EAAI8rD,EAAiB9rD,EAAE,SAAS,CAAC,CAAC,CAC3D,IACAimB,EAAIswC,IAAA,YAAAA,GAAgB2E,GAC1B,GAAIj1C,IAAM,GACN,UAAW5lB,KAAK66D,EACG5E,IAAA,MAAAA,GAAAj2D,EAAE,SAAUA,EAAE,OAE9B,OAAA4lB,CACR,GAACqwC,GAAcC,GAAezK,CAAe,CAAC,EAC3C,CAACqP,GAAqBC,EAAsB,EAAIxlD,EAAe,WAE/DylD,GAAiB/Q,EAAc,UAAY,QAC7CA,EAAc,QAAQ,MAAM,MAAQA,EAAc,QAAQ,MAAM,OAAS,EACvEA,EAAc,QAAQ,MACtB,OACAgR,GAAiB/oB,IAAgBr+B,GAAAo2C,EAAc,UAAd,YAAAp2C,GAAuB,KAAO,OAC/DqnD,GAAoBD,IAAA,YAAAA,GAAiB,GACrCE,GAAoBF,IAAA,YAAAA,GAAiB,GACrCr7B,GAAmBnM,UAAc,IAAM,CACpC,IAAAgjC,KAAuB,QAAaA,GAAmB,SAAW,KAClEuE,IAAkBE,IAAqBC,IAAqBL,MAAyB,OAC/E,OACX,MAAMzrB,EAAU,GAChB,GAAIonB,KAAuB,OACvB,UAAW7wC,KAAK6wC,GAAoB,CAChC,MAAM2E,EAAWb,GAAY,OAAS30C,EAAE,MAAM,EAAI6lC,EAC9C2P,EAAW,GACX/rB,EAAQ,KAAK,CACT,MAAOzpB,EAAE,MACT,MAAO,CACH,GAAGA,EAAE,MACL,EAAGA,EAAE,MAAM,EAAI6lC,EACf,MAAO,KAAK,IAAI2P,EAAUx1C,EAAE,MAAM,KAAK,CAC3C,EACA,MAAOA,EAAE,MACZ,CAET,CAEJ,OAAIk1C,KAAwB,QACxBzrB,EAAQ,KAAK,CACT,MAAO3pB,GAAUw0C,GAAY,YAAa,CAAC,EAC3C,MAAOY,GACP,MAAO,SACV,EAEDE,KAAmB,QACnB3rB,EAAQ,KAAK,CACT,MAAO3pB,GAAUw0C,GAAY,YAAa,EAAG,EAC7C,MAAOc,GACP,MAAO,gBACV,EAEDE,KAAsB,QAAaC,KAAsB,QACzD9rB,EAAQ,KAAK,CACT,MAAO6qB,GAAY,YACnB,MAAO,CACH,EAAGgB,GACH,EAAGC,GACH,MAAO,EACP,OAAQ,CACZ,EACA,MAAO,gBACV,EAEE9rB,EAAQ,OAAS,EAAIA,EAAU,QACvC,CACCyrB,GACAE,GACAE,GACAC,GACA1E,GACA8D,GAAY,OACZL,GAAY,YACZzO,CAAA,CACH,EACK4P,GAAiB3nD,SAAa6mD,EAAW,EAC/Cc,GAAe,QAAUd,GACnB,MAAAhb,GAAwB5oC,cAAkB,CAAC,CAAC+Q,EAAKtN,CAAG,EAAGolC,EAAc,KAAU,qBAC3E,MAAA8b,EAAa/B,IAAwBn/C,IAAQugD,GAAc,EAEjE,GADuBjzC,IAAQ,GAAK4xC,GAChB,CAChB,GAAIgC,EACO,OAAAp8B,GAEL,MAAAq8B,GAAYrC,GAAgB9+C,CAAG,EACrC,OAAImhD,KAAc,OACPr8B,GACJ,CACH,KAAM1gC,GAAkB,OACxB,aAAc,GACd,cAAeu6D,GACf,SAAS9O,GAAA,YAAAA,EAAe,KAAK,SAAS7vC,MAAS,GAC/C,WAAYo+C,KAAe,mBAAqB,SAAWA,GAC3D,IAAKE,GAAsB6C,GAC3B,WAAYhd,KAAe,OAC3B,OAAQia,KAAe,mBAAqB,UAAY,gBAGvD8C,EAAY,CAGjB,MAAME,GADU9zC,IAAQ+jC,GACeoM,IAAA,YAAAA,GAAoB,OAAQ,GAAK,GAClE35D,GAAIm9D,GAAe,QAAQ3zC,CAAG,EAChC,KAAA7T,EAAA3V,IAAA,YAAAA,GAAG,qBAAH,YAAA2V,EAAuB,YAAa,GAC7B,OAAAqrB,GAEN,CACK,MAAAu8B,KAAOn5B,EAAApkC,IAAA,YAAAA,GAAG,qBAAH,YAAAokC,EAAuB,OAAQk5B,GACtCE,KAAOv4B,EAAAjlC,IAAA,YAAAA,GAAG,qBAAH,YAAAilC,EAAuB,WAAW00B,IAAA,YAAAA,GAAoB,SAC5D,OACH,KAAMr5D,GAAkB,OACxB,KAAAi9D,GACA,aAAc,GACd,KAAAC,EAAA,CAER,MAEC,CACD,MAAMC,GAAWj0C,EAAM+jC,EACnB,GAAAjM,IAAehM,IAAA,YAAAA,GAAc,UAAW,GAAM,CAC9C,MAAMooB,GAAKtI,GAAiB,QACtBuI,GAAoBD,GAAG,EAAID,IAC7BA,GAAWC,GAAG,EAAIA,GAAG,OACrBA,GAAG,EAAIxhD,GACPA,EAAMwhD,GAAG,EAAIA,GAAG,QAChBxhD,GAAOiZ,GAAQ,QACb1jB,GAAagsD,OAAaG,GAAA72B,EAAA22B,GAAG,SAAH,YAAA32B,EAAW,WAAX,YAAA62B,EAAsB,KAAM1hD,MAAQ2hD,GAAAH,GAAG,SAAH,YAAAG,GAAW,SAAS,IACxF,IAAIC,GAAiB,GACjB,KAAAC,GAAAL,GAAG,SAAH,YAAAK,GAAW,iBAAkB,QAClB,UAAArxC,MAAMgxC,GAAG,OAAO,cACvB,GAAI9+B,GAAYlS,GAAI+wC,GAAUvhD,CAAG,EAAG,CACf4hD,GAAA,GACjB,KACJ,EAGR,GAAIH,IAAqB,CAAClsD,IAAc,CAACqsD,GAC9B,OAAA98B,EAEf,CACA,IAAIz+B,GAAS2+B,EAAe,CAACu8B,GAAUvhD,CAAG,CAAC,EAC3C,OAAIqxC,IAAoB,GAAKhrD,GAAO,OAAS,SAChCA,GAAA,CACL,GAAGA,GACH,KAAM,CAACA,GAAO,KAAK,CAAC,EAAIgrD,EAAiBhrD,GAAO,KAAK,CAAC,EAAIgrD,CAAe,IAG1EhrD,EACX,GACD,CACC84D,GACAoB,GACArB,GACAJ,GACAH,GACA9O,GAAA,YAAAA,EAAe,KACfuO,GACAE,GACAna,GACAkN,EACAoM,IAAA,YAAAA,GAAoB,KACpBA,IAAA,YAAAA,GAAoB,QACpBrkB,IAAA,YAAAA,GAAc,OACdpU,CAAA,CACH,EACK88B,GAAyBvlD,cAA2B6Z,GAAA,CACtD,IAAI/vB,GAAS4+B,IAAA,YAAAA,GAAkB7O,KAAU,CAAE,KAAMA,GAC7C,OAAAwlC,KAAyB,QAAaxlC,IAAU,KACvC/vB,EAAA,CAEL,KAAMA,EAAO,KACb,KAAMA,EAAO,KACb,cAAeA,EAAO,cACtB,QAAS,CACL,GAAIA,EAAO,SAAW,CAAC,EACvB,CACI,MAAO,SACP,KAAM,aACN,WAAc07D,GAAe,CACzB,MAAO17D,EAAO,KACd,OAAQwJ,EAAE,OACb,CACL,CACJ,IAGDxJ,CAAA,EACR,CAAC4+B,GAAiB22B,EAAoB,CAAC,EACpCoG,GAAmBzlD,cAAmBuC,GAAQ,OAChD,KAAM,CAACwO,EAAKtN,CAAG,EAAIlB,EAAI,KACjBkiB,EAASm/B,GAAY7yC,CAAG,EACxB4Z,GAAalG,GAAA,YAAAA,EAAQ,SAAU,QAAYvnB,EAAAqoD,GAAuB9gC,EAAO,KAAK,IAAnC,YAAAvnB,EAAsC,cAAgB,OACjG0tB,EAAWnG,GAAA,YAAAA,EAAQ,cACnBgH,EAAW9C,IAAA,YAAAA,GAAsBllB,GAC5Bu6C,EAAA,CACP,GAAGz7C,EACH,MAAO6Y,GAAqBmoC,GAAa54B,EAAYC,EAAUa,EAAUlpB,EAAI,QAAQ,aAAa,EACrG,GACF,CAAComB,GAAqBi7B,GAAa2B,GAAwBhC,EAAW,CAAC,EACpEmC,GAAW1lD,EAAM,YAAY,CAACq/B,EAAQsmB,EAAcpJ,IAAiB,OACvE,GAAIjJ,EAAc,UAAY,OAC1B,OACJ,KAAM,CAACviC,EAAKtN,CAAG,EAAI6vC,EAAc,QAAQ,KACnC/rD,EAAIqhD,GAAsB,CAAC73B,EAAKtN,CAAG,CAAC,EAC1C,GAAIlc,EAAE,OAASJ,EAAa,SAAWI,EAAE,aAAc,CACnD,IAAI0iB,EAAU1iB,EACd,GAAIg1D,IAAiB,OACjB,OAAQtyC,EAAQ,KAAM,CAClB,KAAK9iB,EAAa,OAAQ,CAChB,MAAAsnB,EAAI5oB,GAAM,IAAO02D,IAAiB,IAAM,GAAK,OAAO,WAAWA,CAAY,EAAI,CAAC,EAC5EtyC,EAAA,CACN,GAAGA,EACH,KAAM,OAAO,MAAMwE,CAAC,EAAI,EAAIA,CAAA,EAEhC,KACJ,CACA,KAAKtnB,EAAa,KAClB,KAAKA,EAAa,SAClB,KAAKA,EAAa,IACJ8iB,EAAA,CACN,GAAGA,EACH,KAAMsyC,CAAA,EAEV,KACR,CAEakJ,GAAA,CACb,OAAQpmB,EACR,QAAAp1B,EACA,aAAAsyC,EACA,KAAM,CAACxrC,EAAKtN,CAAG,EACf,UAAW84C,IAAiB,OAC5B,cAAeA,IAAiB,OACnC,OAEIh1D,EAAE,OAASJ,EAAa,SAAWw+D,GAAgBp+D,EAAE,WAAa,KAClD08D,GAAA,CACjB,CACI,SAAU3Q,EAAc,QAAQ,KAChC,MAAO,CACH,GAAG/rD,EACH,KAAM0wD,GAAc1wD,EAAE,IAAI,CAC9B,CACJ,EACH,GACO2V,EAAAyqC,GAAA,gBAAAzqC,EAAS,OAAO,CAAC,CAAE,KAAMo2C,EAAc,QAAQ,IAAM,MAElE,CAAC1K,GAAuB0K,EAAe2Q,GAAsBwB,EAAgB,CAAC,EAC3EG,GAAiC5lD,cAAkB,CAAC+Q,EAAKtN,IAAQ,OACnE,MAAM47B,GAASniC,EAAAyqC,GAAQ,UAAR,YAAAzqC,EAAiB,UAAU6T,EAAKtN,GAC/C,GAAI47B,IAAW,QAAaqM,GAAU,UAAY,KAC9C,OAEJ,MAAMzhC,EAAU2+B,GAAsB,CAAC73B,EAAKtN,CAAG,CAAC,EAC3CwG,EAAQ,cAGIw7C,GAAA,CACb,OAAQpmB,EACR,QAAAp1B,EACA,aAAc,OACd,UAAW,GACX,KAAM,CAAC8G,EAAKtN,CAAG,EACf,cAAe,GAClB,CACF,GAACmlC,GAAuB8C,GAAW+Z,EAAgB,CAAC,EACjDI,GAAW7lD,EAAkB,aAAC+Q,EAAKtN,EAAKkW,EAAM,OAAQmsC,EAAW,EAAGC,EAAW,EAAGr6D,EAAU,SAAc,CACxG,GAAAggD,GAAU,UAAY,KAAM,CAC5B,MAAMsa,EAAOre,GAAQ,QACf9qB,EAASkf,EAAU,QACnBkqB,EAAU,OAAOl1C,GAAQ,SAAYA,EAAI,OAAS,OAASA,EAAI,OAAS,OAAaA,EACrFm1C,EAAU,OAAOziD,GAAQ,SAAYA,EAAI,OAAS,OAASA,EAAI,OAAS,OAAaA,EACrF0iD,GAAW,OAAOp1C,GAAQ,UAAYA,EAAI,OAAS,KAAOA,EAAI,OAAS,OACvEq1C,GAAW,OAAO3iD,GAAQ,UAAYA,EAAI,OAAS,KAAOA,EAAI,OAAS,OACzE,GAAAuiD,IAAS,MAAQnpC,IAAW,KAAM,CAClC,IAAIwpC,GAAa,CACb,EAAG,EACH,EAAG,EACH,MAAO,EACP,OAAQ,GAERvtB,GAAU,EACVC,GAAU,EACV,IAAAktB,IAAY,QAAaC,IAAY,UACrCG,GAAaL,EAAK,WAAWC,GAAW,GAAKnR,EAAiBoR,GAAW,CAAC,GAAKG,GAC3EA,GAAW,QAAU,GAAKA,GAAW,SAAW,GAChD,OAEF,MAAAC,GAAezpC,EAAO,wBACtBuhB,GAAQkoB,GAAa,MAAQzpC,EAAO,YAe1C,GAdIspC,KAAa,SACAE,GAAA,CACT,GAAGA,GACH,EAAGF,GAAWG,GAAa,KAAO5a,GAAU,QAAQ,WACpD,MAAO,IAGX0a,KAAa,SACAC,GAAA,CACT,GAAGA,GACH,EAAGD,GAAWE,GAAa,IAAM5a,GAAU,QAAQ,UACnD,OAAQ,IAGZ2a,KAAe,OAAW,CAC1B,MAAMhnB,GAAS,CACX,EAAGgnB,GAAW,EAAIP,EAClB,EAAGO,GAAW,EAAIN,EAClB,MAAOM,GAAW,MAAQ,EAAIP,EAC9B,OAAQO,GAAW,OAAS,EAAIN,CAAA,EAEpC,IAAIQ,GAAc,EAClB,QAASl9D,GAAI,EAAGA,GAAIunB,GAAevnB,KAChBk9D,IAAA51C,GAAQtnB,EAAC,EAAE,MAE9B,IAAIm9D,GAAoB,EAClB,MAAAC,GAA8B7zC,IAAsBiwC,GAAgB,EAAI,GAC1E4D,GAA8B,IACVD,GAAA9zC,GAAwBsxC,GAAayC,GAA6B5yC,EAAS,GAGnG,IAAI6yC,GAAQH,GAAcnoB,GAAQkoB,GAAa,KAAOxR,EAAkB4N,GAAiBtkB,GACrFuoB,GAASL,GAAa,MACtBM,GAAON,GAAa,IAAMtyC,GAAoBoqB,GAC9CyoB,GAAUP,GAAa,OAASE,GAAoBpoB,GAClD,MAAA0oB,GAAOT,GAAW,MAAQP,EAAW,EAC3C,OAAQp6D,GAAA,YAAAA,EAAS,OAAQ,CACrB,IAAK,QACDi7D,GAASD,GAAQI,GACjB,MACJ,IAAK,MACDJ,GAAQC,GAASG,GACjB,MACJ,IAAK,SACDJ,GAAQ,KAAK,OAAOA,GAAQC,IAAU,CAAC,EAAIG,GAAO,EAClDH,GAASD,GAAQI,GACjB,KACR,CACM,MAAAC,GAAOV,GAAW,OAASN,EAAW,EAC5C,OAAQr6D,GAAA,YAAAA,EAAS,OAAQ,CACrB,IAAK,QACDm7D,GAAUD,GAAOG,GACjB,MACJ,IAAK,MACDH,GAAOC,GAAUE,GACjB,MACJ,IAAK,SACDH,GAAO,KAAK,OAAOA,GAAOC,IAAW,CAAC,EAAIE,GAAO,EACjDF,GAAUD,GAAOG,GACjB,KACR,CACIL,GAAQrnB,GAAO,EACfvG,GAAUuG,GAAO,EAAIqnB,GAEhBC,GAAStnB,GAAO,EAAIA,GAAO,QACtBvG,GAAAuG,GAAO,EAAIA,GAAO,MAAQsnB,IAEpCC,GAAOvnB,GAAO,EACdtG,GAAUsG,GAAO,EAAIunB,GAEhBC,GAAUxnB,GAAO,EAAIA,GAAO,SACvBtG,GAAAsG,GAAO,EAAIA,GAAO,OAASwnB,IAErCltC,IAAQ,YAAe,OAAO5I,GAAQ,UAAYA,EAAMH,GAC9CkoB,GAAA,GAELnf,IAAQ,cACZ,OAAOlW,GAAQ,UAAYA,GAAOugD,GAAcyC,MACvC1tB,GAAA,IAEVD,KAAY,GAAKC,KAAY,KAEzBqF,KAAU,IACCtF,IAAAsF,GACArF,IAAAqF,IAELsN,GAAA,QAAQ,SAAS5S,GAAU4S,GAAU,QAAQ,WAAY3S,GAAU2S,GAAU,QAAQ,SAAS,EAEhH,CACJ,CACJ,GACD,CACCoJ,EACAliC,GACA8vC,GACAhX,GACA13B,GACApD,GACAD,GACAqzC,GACAnB,GACAhvC,EAAA,CACH,EACKmzC,GAAgBjqD,SAAa6oD,EAA8B,EAC3DqB,GAAoBlqD,SAAa0rB,CAAc,EAC/C/L,GAAU3f,SAAa4V,EAAI,EACjCq0C,GAAc,QAAUpB,GACxBqB,GAAkB,QAAUx+B,EAC5B/L,GAAQ,QAAU/J,GAClB,MAAMu0C,GAAYlnD,EAAM,YAAY,MAAO+Q,EAAKo2C,EAAc,KAAS,OAC7D,MAAA5/D,EAAIq8D,GAAY7yC,CAAG,EACrB,KAAA7T,EAAA3V,GAAA,YAAAA,EAAG,qBAAH,YAAA2V,EAAuB,YAAa,GACpC,OAEJ,MAAMkqD,EAAexH,IAAA,YAAAA,KACrB,IAAI3wC,EACA8X,EAAS,GACTqgC,IAAiB,SACjBn4C,EAAI,MAAMm4C,EACNn4C,IAAM,QACG8X,EAAA,IACT,OAAO9X,GAAM,WACJ8X,EAAA,KAEjB,IAAIsgC,EAAU,EACd,MAAMC,EAAU,IAAM,CACd,GAAA5qC,GAAQ,SAAW/J,GAAM,CACrB00C,EAAU,KACH,kBAAWC,EAASD,CAAO,EAEtCA,EAAU,GAAKA,EAAU,EACzB,MACJ,CACA,MAAM5jD,EAAM,OAAOwL,GAAM,SAAWA,EAAI8X,EAASpU,GAAO,EAC5C40C,GAAA,QAAQx2C,EAAM+jC,EAAiBrxC,CAAG,EACnCowC,GAAA,CACP,KAAM,CAAC9iC,EAAKtN,CAAG,EACf,MAAO,CACH,EAAGsN,EACH,EAAGtN,EACH,MAAO,EACP,OAAQ,CACZ,GACD,GAAO,GAAO,MAAM,EACvB,MAAM9b,GAAOs/D,GAAkB,QAAQ,CAACl2C,EAAM+jC,EAAiBrxC,CAAG,CAAC,EAC/D9b,GAAK,cAAgBG,GAAgBH,EAAI,GAAKA,GAAK,WAAa,IAAQw/D,GAExE,OAAO,WAAW,IAAM,CACNH,GAAA,QAAQj2C,EAAKtN,CAAG,GAC/B,CAAC,CACR,EAGI6jD,GAAA,EACT,CAAC1D,GAAahE,GAAe9K,EAAiBniC,GAAMkhC,EAAU,CAAC,EAC5D2T,GAA8BxnD,cAAmB+Q,GAAQ,SAC3D,MAAM02C,IAAqB97B,GAAAzuB,EAAAyT,GAAQI,CAAG,IAAX,YAAA7T,EAAc,qBAAd,YAAAyuB,EAAkC,gBAAgBu1B,IAAA,YAAAA,GAAoB,cAC7F,UAAOuG,GAAuB,SAE9B,OAAOA,GADoB9E,GAAgB,EAAI,GAG/C,UAAO8E,GAAuB,SAAU,CAClC,MAAAC,EAAapJ,EAAU,QAAQmJ,CAAkB,EACvD,GAAIC,GAAc,EAEd,OAAOA,GADoB/E,GAAgB,EAAI,EAGvD,CACO,EACR,CAAChyC,GAAS2tC,EAAWqE,GAAezB,IAAA,YAAAA,GAAoB,YAAY,CAAC,EAClEyG,GAAqB5qD,WACrB6qD,GAAqB7qD,WACrB8qD,GAAe7nD,cAAkB,CAACrY,EAAMmgE,IAAQ,OAC5C,MAAC/2C,EAAKtN,CAAG,EAAIqkD,EACZ,OAAA1sC,GAAqBmoC,IAAarmD,EAAA0mD,GAAY7yC,CAAG,IAAf,YAAA7T,EAAkB,cAAeyrB,IAAA,YAAAA,GAAsBllB,GAAM9b,EAAK,aAAa,CACzH,GAACghC,GAAqBi7B,GAAaL,EAAW,CAAC,EAC5C,CAAE,OAAAwE,EAAW,EAAA7L,GAAenB,GAAawD,CAAM,EAC/CyJ,GAAyBjN,IAAA,YAAAA,GAAa,mBACtCkN,GAAejoD,cAAmB9Q,GAAS,cAC7C,MAAMg5D,EAAatuB,GAAa,MAAQ1qC,EAAK,QAAUA,EAAK,QACtDi5D,EAAaD,GAAclI,KAAc,QACzCoI,EAAaF,GAAcnI,KAAiB,QAC5C,CAAChvC,EAAKtN,CAAG,EAAIvU,EAAK,SAClB84C,EAAkBsL,EAAc,QAChCthB,EAAeshB,EAAc,KAC7B,CAACzhC,EAASC,CAAO,IAAI5U,GAAAo2C,EAAc,UAAd,YAAAp2C,GAAuB,OAAQ,GAEtD,GAAAhO,EAAK,OAAS,QAGV,GAFJ04D,GAAmB,QAAU,OACLS,GAAA,QAAU,CAACt3C,EAAKtN,CAAG,EACvCsN,IAAQ,GAAK4xC,GAAe,CAC5B,GAAKC,KAAyB,IAAQn/C,IAAQkP,IAC1CkvC,KAAe,UACf7B,KAAc,OACd,OACE,MAAAsI,GAAa1f,GAAsB15C,EAAK,QAAQ,EAClD,GAAAo5D,GAAW,OAASzgE,GAAkB,OACtC,OAEJ,GAAI+/C,KAAe,OAAW,CACpB,MAAA38B,GAAWyQ,GAAgB4sC,EAAU,EACpC9iE,IAAAylB,IAAA,YAAAA,GAAU,QAASpjB,GAAkB,MAAM,EAC5C,MAAA0gE,IAAY58B,GAAA1gB,IAAA,YAAAA,GAAU,UAAV,YAAA0gB,GAAA,KAAA1gB,GAAoB,CAClC,GAAG/b,EACH,KAAMo5D,GACN,KAAMp5D,EAAK,YACX,KAAMA,EAAK,YACX,OAAQA,EAAK,OACb,MAAO24D,GAAaS,GAAYp5D,EAAK,QAAQ,EAC7C,eAAgB,IAAM,KAE1B,GAAIq5D,KAAc,QAAaA,GAAU,UAAYD,GAAW,QAC5D,MACR,CACAtK,EAAW,MAAS,EACd8F,KACA,MAAA9qD,GAAag5B,EAAa,SAASvuB,CAAG,EACtC+kD,GAAkBb,GAAmB,QAC3C,GAAI3H,KAAc,UACb9wD,EAAK,UAAYA,EAAK,cAAgB,KACvCs5D,KAAoB,QACpBx2B,EAAa,SAASw2B,EAAe,EAAG,CACxC,MAAMC,GAAW,CAAC,KAAK,IAAID,GAAiB/kD,CAAG,EAAG,KAAK,IAAI+kD,GAAiB/kD,CAAG,EAAI,CAAC,EAChF0kD,GAAc3H,KAAqB,QACnBpM,GAAA,OAAWqU,GAAU,EAAI,EAGzCrU,GAAgBrqD,GAAiB,oBAAoB0+D,EAAQ,EAAG,OAAWN,CAAU,CACzF,MAEKnI,KAAc,UAAYmI,GAAcj5D,EAAK,SAAWsxD,KAAqB,SAC9ExnD,GACAo7C,GAAgBpiB,EAAa,OAAOvuB,CAAG,EAAG,OAAW,EAAI,GAGzC2wC,GAAA,OAAW3wC,EAAK,EAAI,EACpCkkD,GAAmB,QAAUlkD,GAG5BzK,IAAcg5B,EAAa,SAAW,EAC3CoiB,GAAgBrqD,GAAiB,QAAS,OAAWm+D,CAAU,GAG/D9T,GAAgBrqD,GAAiB,oBAAoB0Z,CAAG,EAAG,OAAWykD,CAAU,EAChFP,GAAmB,QAAUlkD,EAG5B,SAAAsN,GAAO+jC,GAAmB8N,IAAwBn/C,IAAQkP,GAAM,CAC/D,MAAA80C,GAAqBD,GAA4Bz2C,CAAG,EACrDm2C,GAAUO,IAAsB12C,CAAG,UAGpCc,IAAYd,GAAOe,IAAYrO,EAAK,CAC9B,MAAA9b,GAAOihD,GAAsB15C,EAAK,QAAQ,EAC1C+b,GAAWyQ,GAAgB/zB,EAAI,EACjC,IAAAsjB,IAAA,YAAAA,GAAU,YAAa,OAAW,CAClC,IAAI84B,GAAY,GAUhB,GATA94B,GAAS,SAAS,CACd,GAAG/b,EACH,KAAAvH,GACA,KAAMuH,EAAK,YACX,KAAMA,EAAK,YACX,OAAQA,EAAK,OACb,eAAgB,IAAO60C,GAAY,GACnC,MAAO8jB,GAAalgE,GAAMuH,EAAK,QAAQ,EAC1C,EACG60C,GACA,MAER,CACA,GAAIikB,KAA2B,SAAWD,GAAOtkD,CAAG,EAAE,cAClD,OAEE,MAAAilD,GAAkB7F,IAAiBp/C,IAAQkP,GAC3Cg2C,GAAwB9F,IAAiBvP,IAAkB,UAAa9mB,GAAA8mB,EAAc,UAAd,YAAA9mB,GAAuB,KAAK,MAAO7Z,GACjH,IAAKzjB,EAAK,UAAYA,EAAK,cAAgB,KACvC2iB,IAAY,QACZC,IAAY,QACZwhC,EAAc,UAAY,QAC1B,CAACqV,GAAuB,CACxB,GAAID,GAGA,OAEJ,MAAM9+D,GAAO,KAAK,IAAImnB,EAAKc,CAAO,EAC5BhoB,GAAQ,KAAK,IAAIknB,EAAKc,CAAO,EAC7BppB,GAAM,KAAK,IAAIgb,EAAKqO,CAAO,EAC3BiV,GAAS,KAAK,IAAItjB,EAAKqO,CAAO,EACzB+hC,GAAA,CACP,GAAGP,EAAc,QACjB,MAAO,CACH,EAAG1pD,GACH,EAAGnB,GACH,MAAOoB,GAAQD,GAAO,EACtB,OAAQm9B,GAASt+B,GAAM,CAC3B,GACD,GAAMy/D,EAAY,OAAO,EAC5BP,GAAmB,QAAU,OACvB7D,IAAA,MAGKjQ,GAAA,CACP,KAAM,CAAC9iC,EAAKtN,CAAG,EACf,MAAO,CAAE,EAAGsN,EAAK,EAAGtN,EAAK,MAAO,EAAG,OAAQ,CAAE,GAC9C,GAAMykD,EAAY,OAAO,EAC5BP,GAAmB,QAAU,OAC7B3J,EAAW,MAAS,EACd8F,IAEd,UAGC50D,EAAK,OAAS,SAGf,GAFoBm5D,GAAA,QAAU,CAACt3C,EAAKtN,CAAG,EAC3Cu6C,EAAW,MAAS,EAChB2E,IAAiB5xC,IAAQ,EACzB42C,GAAmB,QAAU,OAC7BC,GAAmB,QAAU,OACzB5H,KAAc,UACVhuB,EAAa,SAAWrf,GACRyhC,GAAArqD,GAAiB,oBAAoB,CAAC,EAAG4oB,EAAI,CAAC,EAAG,OAAWu1C,CAAU,EAGtF9T,GAAgBrqD,GAAiB,QAAS,OAAWm+D,CAAU,EAE7DpE,UAGT,CACD,MAAMvvB,GAAUqzB,GAAmB,QACnC,GAAI7H,KAAiB,UAChB7wD,EAAK,UAAYA,EAAK,cAAgB,KACvCqlC,KAAY,QACZyT,EAAgB,SAASzT,EAAO,EAAG,CACnC,MAAMk0B,GAAW,CAAC,KAAK,IAAIl0B,GAASxjB,CAAG,EAAG,KAAK,IAAIwjB,GAASxjB,CAAG,EAAI,CAAC,EAChEq3C,EACmB3T,GAAA,OAAWgU,GAAUP,CAAU,EAGlDzT,GAAmB1qD,GAAiB,oBAAoB0+D,EAAQ,EAAG,OAAWP,CAAU,OAGvFE,GACDpgB,EAAgB,SAASj3B,CAAG,EAC5B0jC,GAAmBzM,EAAgB,OAAOj3B,CAAG,EAAG,OAAWm3C,CAAU,EAGlDzT,GAAA,OAAW1jC,EAAKm3C,CAAU,EAEjDN,GAAmB,QAAU72C,GAExBgvC,KAAiB,SACtBtL,GAAmB1qD,GAAiB,oBAAoBgnB,CAAG,EAAG,OAAWm3C,CAAU,EACnFN,GAAmB,QAAU72C,GAEjC42C,GAAmB,QAAU,OACvB7D,IACV,MAEK50D,EAAK,OAASmrC,GACKguB,GAAA,QAAU,CAACt3C,EAAKtN,CAAG,EAEtCvU,EAAK,OAASorC,IAAmB,CAACprC,EAAK,mBAC5CqkD,GAAiBqK,GAAoB,EAAK,EAC1CI,EAAW,MAAS,EACd8F,KACepD,IAAA,MAAAA,KACrBiH,GAAmB,QAAU,OAC7BC,GAAmB,QAAU,OACjC,EACD,CACC5H,GACAD,GACAzM,EACAqP,GACA7N,EACA8N,GACAjwC,GACAkvC,GACAjZ,GACAhB,GACAkc,GACAtD,GACA9kC,GACAmsC,GACAzT,GACAoT,GACAN,GACAc,GACAD,GACAlF,GACAhP,GACAY,GACAlB,GACAmN,EAAA,CACH,EACKkI,GAA2B7rD,SAAa,EAAK,EAC7CsrD,GAA0BtrD,WAC1B8rD,GAAgB9rD,SAAaigD,EAAa,EAC1C8L,GAAgB/rD,WAChBy+B,GAAcx7B,cAAmB9Q,GAAS,CAG5C,GAFA65D,GAAY,QAAU,GACtBF,GAAc,QAAUlM,GAAiB,QACrCztD,EAAK,SAAW,GAAKA,EAAK,SAAW,EAAG,CACxC45D,GAAc,QAAU,OACxB,MACJ,CACM,MAAAptD,EAAO,YAAY,MACzBotD,GAAc,QAAU,CACpB,OAAQ55D,EAAK,OACb,KAAAwM,EACA,SAAUxM,EAAK,WAEfA,GAAA,YAAAA,EAAM,QAAS,WACf05D,GAAyB,QAAU,IAEvC,MAAMI,EAAK95D,EAAK,OAAS,QAAUA,EAAK,aACpC,CAAC85D,GAAM95D,EAAK,OAAS,QAAUA,EAAK,SAE1BgvD,EAAA,CACV,kBAAmB5K,EACnB,WAAY0V,CAAA,CACf,EACDX,GAAwB,QAAU,OAC9B,CAACn5D,EAAK,SAAWA,EAAK,SAAW,GAAK,CAAC85D,EACvCf,GAAa/4D,CAAI,EAEZ,CAACA,EAAK,SAAWA,EAAK,SAAW,IACtCm5D,GAAwB,QAAUn5D,EAAK,UAC3C,EACD,CAACokD,EAAe2U,EAAY,CAAC,EAC1B,CAACgB,GAAazD,EAAc,EAAI5mD,EAAe,WAC/CsqD,GAA6BlpD,cAAmB9Q,GAAS,CAC3D,GAAIA,EAAK,OAASmrC,IAAmB0lB,KAAiB,QAClD,OAEJ,MAAMmI,EAAatuB,GAAa,MAAQ1qC,EAAK,QAAUA,EAAK,QACtD,CAAC6hB,CAAG,EAAI7hB,EAAK,SACb84C,EAAkBsL,EAAc,QACtC,GAAIviC,EAAM+jC,EACN,OACE,MAAAqU,EAASvF,GAAY7yC,CAAG,EAC9B,IAAIznB,EAAQynB,EACRxnB,EAAMwnB,EACV,QAAS1nB,EAAI0nB,EAAM,EAAG1nB,GAAKyrD,GAClB5jC,GAAai4C,EAAO,MAAOvF,GAAYv6D,CAAC,EAAE,KAAK,EADZA,IAGxCC,IAEJ,QAASD,EAAI0nB,EAAM,EAAG1nB,EAAIu6D,GAAY,QAC7B1yC,GAAai4C,EAAO,MAAOvF,GAAYv6D,CAAC,EAAE,KAAK,EADVA,IAG1CE,IAGJ,GADMu6D,KACFoE,EACA,GAAIlgB,EAAgB,OAAO,CAAC1+C,EAAOC,EAAM,CAAC,CAAC,EAAG,CAC1C,IAAIm5C,EAASsF,EACb,QAASv+C,EAAQH,EAAOG,GAASF,EAAKE,IACzBi5C,IAAO,OAAOj5C,CAAK,EAEbgrD,GAAA/R,EAAQ,OAAWwlB,CAAU,OAGhDzT,GAAmB,OAAW,CAACnrD,EAAOC,EAAM,CAAC,EAAG2+D,CAAU,OAI3CzT,GAAA1qD,GAAiB,oBAAoB,CAACT,EAAOC,EAAM,CAAC,CAAC,EAAG,OAAW2+D,CAAU,CACpG,EACD,CAACnI,GAAc+D,GAAOxQ,EAAc,QAASsQ,GAAa9O,EAAiBL,EAAkB,CAAC,EAC3FsU,GAAchsD,SAAa,EAAK,EAChCqsD,GAAmBppD,cAAkB,MAAO+Q,GAAQ,CAClD,GAAAwL,KAAyB,QAAairB,KAAmB,OAAW,CAC9D,MAAAl+C,EAAQqzD,GAAiB,QAAQ,EACjCpzD,EAAMozD,GAAiB,QAAQ,OACrC,IAAI74C,EAAQyY,GAAqB,CAC7B,EAAGxL,EACH,EAAGznB,EACH,MAAO,EACP,OAAQ,KAAK,IAAIC,EAAKopB,GAAOrpB,CAAK,GACnCumD,GAAmB,QAAQ,MAAM,EAChC,OAAO/rC,GAAU,WACjBA,EAAQ,MAAMA,KAEZ,MAAAulD,EAAW14C,GAAQI,EAAM+jC,CAAe,EAExClgC,EADY,SAAS,cAAc,QAAQ,EAC3B,WAAW,KAAM,CAAE,MAAO,GAAO,EACvD,GAAIA,IAAQ,KAAM,CACdA,EAAI,KAAO2uC,GAAY,aACjB,MAAA+F,EAAS3tC,GAAc/G,EAAK2uC,GAAa8F,EAAU,EAAGvlD,EAAOgY,GAAgBC,GAAgB,GAAOL,EAAe,EACzH8rB,IAAA,MAAAA,GAAiB6hB,EAAUC,EAAO,MAAOv4C,EAAKu4C,EAAO,MACzD,CACJ,GACD,CACC34C,GACA4L,GACAR,GACAwnC,GACAznC,GACA0rB,GACAsN,EACAniC,GACA+I,EAAA,CACH,EACK,CAAC6tC,GAAWC,EAAY,EAAI5qD,EAAe,WAC3C6qD,GAAczpD,cAAkB,MAAO0pD,EAAmBC,IAAqB,SAC3E,MAAAC,GAAe1sD,EAAAwsD,EAAkB,UAAlB,YAAAxsD,EAA2B,MAChD,GAAI0sD,IAAiB,QACjBrtC,KAAyB,QACzBotC,EAAiB,UAAY,OAC7B,OAEE,MAAAE,EAAeF,EAAiB,QAAQ,MAC9C,GAAIjL,IAAkB,OAAW,CAC7B,IAAIoL,EAAW,GAMX,GALUpL,EAAA,CACV,gBAAiB,CAAE,GAAGmL,EAAc,EAAGA,EAAa,EAAI/U,CAAgB,EACxE,cAAe,CAAE,GAAG8U,EAAc,EAAGA,EAAa,EAAI9U,CAAgB,EACtE,eAAgB,IAAOgV,EAAW,GACrC,EACGA,EACA,MACR,CACA,IAAIhmD,EAAQyY,GAAqBqtC,EAAc/Z,GAAmB,QAAQ,MAAM,EAC5E,OAAO/rC,GAAU,WACjBA,EAAQ,MAAMA,KAClB,MAAMS,EAAUT,EAEVimD,EAAe,GACrB,QAAS/gE,EAAI,EAAGA,EAAI6gE,EAAa,MAAO7gE,IACpC,QAASsG,GAAI,EAAGA,GAAIu6D,EAAa,OAAQv6D,KAAK,CAC1C,MAAM3H,GAAO,CAACkiE,EAAa,EAAI7gE,EAAG6gE,EAAa,EAAIv6D,EAAC,EAChD,GAAA+hB,GAAa1pB,GAAMiiE,CAAY,EAC/B,SACE,MAAAI,GAAczlD,EAAQjV,GAAIs6D,EAAa,MAAM,EAAE5gE,EAAI4gE,EAAa,KAAK,EACvEhiE,GAAgBoiE,EAAW,GAAK,CAACliE,GAAgBkiE,EAAW,GAEhED,EAAa,KAAK,CACd,SAAUpiE,GACV,MAAO,CAAE,GAAGqiE,EAAY,EAC3B,CACL,CAEJ/F,GAAqB8F,CAAY,GACjCp+B,EAAAgc,GAAQ,UAAR,MAAAhc,EAAiB,OAAOo+B,EAAa,IAAUxiE,IAAA,CAC3C,KAAMA,EAAE,UACV,IACH,CAACg1B,GAAsB0nC,GAAsBvF,EAAe5J,CAAe,CAAC,EACzEmV,GAAYjqD,cAAkB,IAAM,CACtC,GAAIszC,EAAc,UAAY,QAAaA,EAAc,QAAQ,MAAM,OAAS,EAC5E,OACJ,MAAM4W,EAAoB,CACtB,GAAG5W,EACH,QAAS,CACL,GAAGA,EAAc,QACjB,MAAO,CACH,GAAGA,EAAc,QAAQ,MACzB,MAAO,CACX,CACJ,GAECmW,GAAYS,EAAmB5W,CAAa,GAClD,CAACmW,GAAanW,CAAa,CAAC,EACzB6W,GAAWnqD,cAAkB,IAAM,CACrC,GAAIszC,EAAc,UAAY,QAAaA,EAAc,QAAQ,MAAM,QAAU,EAC7E,OACJ,MAAM8W,EAAoB,CACtB,GAAG9W,EACH,QAAS,CACL,GAAGA,EAAc,QACjB,MAAO,CACH,GAAGA,EAAc,QAAQ,MACzB,OAAQ,CACZ,CACJ,GAECmW,GAAYW,EAAmB9W,CAAa,GAClD,CAACmW,GAAanW,CAAa,CAAC,EACzB7X,GAAYz7B,cAAkB,CAAC9Q,EAAM2yC,IAAc,WACrD,MAAMwoB,EAAQpM,EAKV,GAJJC,EAAc,MAAS,EACvBkG,GAAuB,MAAS,EAChCoF,GAAa,MAAS,EACtBZ,GAAyB,QAAU,GAC/B/mB,EACA,OACA,IAAAwoB,GAAA,YAAAA,EAAO,cAAe,IACtB/W,EAAc,UAAY,UAC1Bp2C,GAAAmtD,EAAM,oBAAN,YAAAntD,GAAyB,WAAY,OAAW,CAChD,GAAIinD,KAAwB,OACxB,OACJ,MAAMmG,GAAW,CACb,GAAGhX,EACH,QAAS,CACL,GAAGA,EAAc,QACjB,MAAOhuB,GAAa+kC,EAAM,kBAAkB,QAAQ,MAAOlG,EAAmB,CAClF,GAECsF,GAAYY,EAAM,kBAAmBC,EAAQ,EAClD/W,GAAiB+W,GAAU,EAAI,EAC/B,MACJ,CACA,KAAM,CAACv5C,EAAKtN,CAAG,EAAIvU,EAAK,SAClB,CAACq7D,EAAkBC,CAAgB,EAAInC,GAAwB,SAAW,GAC1EoC,EAAiB,IAAM,CACzB1B,GAAY,QAAU,IAEpB2B,EAAoBpiE,IAAM,cAC5B,MAAMqiE,GAAeriE,GAAE,SAAYiiE,IAAqBx5C,GAAOy5C,IAAqB/mD,EAOpF,GANIknD,KACAnM,GAAA,MAAAA,EAAgB,CAACztC,EAAM+jC,EAAiBrxC,CAAG,EAAG,CAC1C,GAAGnb,GACH,eAAAmiE,CAAA,IAGJniE,GAAE,SAAW,EACb,MAAO,CAACygE,GAAY,QACpB,IAACA,GAAY,QAAS,CAChB,MAAAxhE,GAAIqhD,GAAsB15C,EAAK,QAAQ,EACvC+f,GAAIyM,GAAgBn0B,EAAC,EAC3B,GAAI0nB,KAAM,QAAaA,GAAE,UAAY,QAAa07C,GAAc,CACtD,MAAAjoB,GAASzzB,GAAE,QAAQ,CACrB,GAAG3mB,GACH,KAAMf,GACN,KAAMe,GAAE,YACR,KAAMA,GAAE,YACR,OAAQA,GAAE,OACV,MAAOu/D,GAAatgE,GAAG2H,EAAK,QAAQ,EACpC,eAAAu7D,CAAA,CACH,EACG/nB,KAAW,QAAa,CAAC96C,GAAgB86C,EAAM,GAAKh7C,GAAmBg7C,EAAM,IACxDuhB,GAAA,CAAC,CAAE,SAAU37D,GAAE,SAAU,MAAOo6C,EAAQ,EAAC,GAC9DxlC,GAAAyqC,GAAQ,UAAR,MAAAzqC,GAAiB,OAAO,CACpB,CACI,KAAM5U,GAAE,QACZ,IAGZ,CACI,GAAAygE,GAAY,SAAWzV,EAAc,UAAY,OAC1C,SACX,IAAIsX,GAAiB,GACb,OAAArjE,GAAE,4BAA8Bg5D,GAAwB,CAC5D,IAAK,eACL,IAAK,eAAgB,CACb,KAAA/zB,IAAAb,GAAA0+B,GAAA,YAAAA,EAAO,oBAAP,YAAA1+B,GAA0B,UAA1B,YAAAa,GAAmC,QAAS,OAC5C,MACJ,KAAM,CAACq+B,GAAaC,EAAW,EAAIxX,EAAc,QAAQ,KACnD,CAACyX,GAASC,EAAO,EAAIX,EAAM,kBAAkB,QAAQ,KAE3DO,GAD0B75C,IAAQ85C,IAAe95C,IAAQg6C,IAAWtnD,IAAQqnD,IAAernD,IAAQunD,KAG1F1iE,GAAE,gBAAkB,IAAQi4D,KAA2B,gBAChE,KACJ,CACA,IAAK,eAAgB,CACAqK,GAAA,GACjB,KACJ,CACJ,CACA,GAAIA,GACA,OAAAnM,GAAA,MAAAA,EAAkB,CAAC1tC,EAAM+jC,EAAiBrxC,CAAG,GACpCiiD,GAAAp9D,GAAE,OAAQ,EAAK,EACjB,EAEf,CACO,UAEL2iE,EAAgB/7D,EAAK,SAAS,CAAC,EAAI4lD,EACzC,GAAI5lD,EAAK,QAAS,CACd,MAAM+1D,GAAKtI,GAAiB,QACtBuO,GAAUrC,GAAc,QAC9B,GAAI5D,GAAG,IAAMiG,GAAQ,GAAKjG,GAAG,IAAMiG,GAAQ,EAEvC,OAGA,GAAAh8D,EAAK,cAAgB,IACjB,GAAAA,EAAK,OAAS,QAAU8hB,IAAc2a,GAAA2nB,EAAc,UAAd,YAAA3nB,GAAuB,KAAMz8B,EAAK,QAAQ,EAAG,CACnFgwD,IAAA,MAAAA,GAAoB,CAAC+L,EAAe/7D,EAAK,SAAS,CAAC,CAAC,EAAG,CACnD,GAAGA,EACH,eAAAu7D,CAAA,GAEJ,eAEKv7D,EAAK,OAAS,UAAYokD,EAAc,QAAQ,SAASviC,CAAG,EAAG,CACpEouC,IAAA,MAAAA,GAAsB8L,EAAe,CAAE,GAAG/7D,EAAM,eAAAu7D,CAAgB,GAChE,eAEKv7D,EAAK,OAASmrC,GAAiB,CACpC,GAAI4wB,EAAgB,EAChB,OAEJ7L,GAAA,MAAAA,EAA2B6L,EAAe,CAAE,GAAG/7D,EAAM,eAAAu7D,CAAgB,GACrE,MACJ,EAEAv7D,EAAK,OAAS,OAETw7D,EAAiBx7D,CAAI,GACtB+4D,GAAa/4D,CAAI,EAGhBA,EAAK,OAASmrC,GACnB4kB,GAAA,MAAAA,EAAuBgM,EAAe,CAAE,GAAG/7D,EAAM,eAAAu7D,CAAgB,IAG7Dv7D,EAAK,OAASkrC,KACd4kB,GAAA,MAAAA,EAAkBiM,EAAe,CAC7B,GAAG/7D,EACH,eAAAu7D,CAAA,IAGRxC,GAAa/4D,CAAI,GAErB,MACJ,CACI,GAAAA,EAAK,OAAS,SAAU,CACxB,GAAI+7D,EAAgB,EAChB,OAEA/7D,EAAK,OACDA,EAAK,gBAAkB,IAClBk6D,GAAiBr4C,CAAG,EAGxB7hB,EAAK,SAAW,GAAK6hB,IAAQw5C,GAAoB9mD,IAAQ+mD,IAC9DxL,GAAA,MAAAA,EAAkBiM,EAAe,CAAE,GAAG/7D,EAAM,eAAAu7D,CAAgB,GAEpE,CACI,GAAAv7D,EAAK,OAASmrC,GAAiB,CAC/B,GAAI4wB,EAAgB,EAChB,OAEA/7D,EAAK,SAAW,GAAK6hB,IAAQw5C,GAAoB9mD,IAAQ+mD,IACzDvL,GAAA,MAAAA,EAAuBgM,EAAe,CAAE,GAAG/7D,EAAM,eAAAu7D,CAAgB,GAC5D1B,GAAY,SACbG,GAA2Bh6D,CAAI,EAG3C,CACIA,EAAK,OAAS,SAAWA,EAAK,SAAW,GAAKA,EAAK,SAAW,IAC9Dw7D,EAAiBx7D,CAAI,EAEzBm5D,GAAwB,QAAU,QACnC,CACCpK,EACA3K,EACAwB,EACAqP,GACAsF,GACAlW,GACAiL,EACA5V,GACAltB,GACA6kC,GACAsH,GACA5D,GACAxF,EACAiH,GACAxG,GACAC,GACAC,EACA6I,GACAhJ,EACAD,EACAoK,GACAF,EAAA,CACH,EACK3mB,GAAkBviC,cAAmB9Q,GAAS,CAChD,MAAM5G,EAAI,CACN,GAAG4G,EACH,SAAU,CAACA,EAAK,SAAS,CAAC,EAAI4lD,EAAiB5lD,EAAK,SAAS,CAAC,CAAC,GAEnEysC,IAAA,MAAAA,GAAcrzC,GACV21D,IAAe,QAAa/uD,EAAK,UAAY,IAC7CgvD,EAAc,MAAS,EACvBkG,GAAuB,MAAS,EAChCoF,GAAa,MAAS,EACtBZ,GAAyB,QAAU,IAEvCY,GAAmB5mB,GAAA,OACf,OAAIgmB,GAAyB,QAClB,CAAC15D,EAAK,WAAW,CAAC,EAAG,CAAC,EAC7BA,EAAK,WAAW,CAAC,KAAM0zC,GAAA,YAAAA,EAAK,KAAM1zC,EAAK,WAAW,CAAC,IAAM0zC,EAAG,CAAC,EACtDA,EACJqb,IAAe,WAAc/gD,EAAA4rD,GAAc,UAAd,YAAA5rD,EAAuB,SAAS,KAAM,GAAK43C,EACzE,OACA5lD,EAAK,WACd,CACF,GAAC+uD,EAAYtiB,GAAamZ,CAAe,CAAC,EACvCqW,GAAyBnrD,cAAkB,CAAC+Q,EAAKq3B,IAAmB,CAClDrN,IAAA,MAAAA,GAAAhqB,EAAM+jC,EAAiB1M,EAAc,EAC1D,CAACrN,GAAmB+Z,CAAe,CAAC,EACjCsW,GAA8BprD,cAAkB,CAAC+Q,EAAKq3B,IAAmB,CAClDpN,IAAA,MAAAA,GAAAjqB,EAAM+jC,EAAiB1M,EAAc,EAC/D,CAACpN,GAAwB8Z,CAAe,CAAC,EACtCuW,IAAc1/B,GAAA2nB,GAAA,YAAAA,EAAe,UAAf,YAAA3nB,GAAwB,KACtC2/B,GAA6BtrD,EAAkB,aAACisB,EAAQzP,EAAauuB,EAAcwgB,EAAcv4C,EAAIoB,IAAO,CAC9GyvC,GAAgB,QAAU,GAC1B,IAAIpzD,EAAW46D,GACX56D,IAAa,SACbA,EAAW,CAACA,EAAS,CAAC,EAAIqkD,EAAiBrkD,EAAS,CAAC,CAAC,GAEpD,MAAA+6D,EAAe56C,KAAkB,EACjC,OACA,CACE,EAAG,EACH,EAAGqb,EAAO,EACV,MAAOrb,GACP,OAAQqb,EAAO,QAEjBw/B,EAAgB,GAClBD,IAAiB,QACjBC,EAAc,KAAKD,CAAY,EAC/B54C,GAAqB,IACrB64C,EAAc,KAAK,CACf,EAAGx/B,EAAO,EAAI6oB,EACd,EAAGniC,GAAOC,GACV,MAAOqZ,EAAO,MACd,OAAQrZ,EAAA,CACX,EACGhC,GAAgB,GAChB66C,EAAc,KAAK,CACf,EAAG,EACH,EAAG94C,GAAOC,GACV,MAAOhC,GACP,OAAQgC,EAAA,CACX,GAGT,MAAM84C,EAAY,CACd,EAAGz/B,EAAO,EAAI6oB,EACd,EAAG7oB,EAAO,EACV,MAAOA,EAAO,MACd,OAAQ22B,IAAwB32B,EAAO,EAAIA,EAAO,QAAUtZ,GAAOsZ,EAAO,OAAS,EAAIA,EAAO,OAC9F,GAAAjZ,EACA,GAAAoB,EACA,OAAQ,CACJ,SAAA3jB,EACA,aAAA+6D,EACA,cAAAC,CACJ,GAEJ9O,GAAiB,QAAU+O,EAC3BzO,GAAiByO,CAAS,EAC1BlI,GAAc,CAAChnC,EAAauuB,EAAcwgB,CAAY,CAAC,EACvD5d,IAAA,MAAAA,GAAyB+d,EAAWA,EAAU,GAAIA,EAAU,GAAIA,EAAU,OAAM,EACjF,CACCL,GACAvW,EACA8N,GACAjwC,GACA/B,GACAgC,GACAqqC,GACAtP,EAAA,CACH,EACKge,GAAoBxuD,GAAYoqC,GAAevnC,cAAkB,CAAC8I,EAAYoK,IAAa,CAC7Eq0B,IAAA,MAAAA,GAAAz+B,EAAagsC,EAAiB5hC,EAAW4hC,GACrDiL,KAAiB,QACjBtL,GAAmB1qD,GAAiB,oBAAoBmpB,CAAQ,EAAG,OAAW,EAAI,CACtF,EACD,CAAC6sC,GAAcxY,GAAeuN,EAAiBL,EAAkB,CAAC,CAAC,EAChEmX,GAAqB7uD,SAAa,EAAK,EACvCsmC,GAAkBrjC,cAAmB9Q,GAAS,CAChD,GAAIA,EAAK,SAAS,CAAC,IAAM,GAAK4lD,EAAkB,EAAG,CAC/C5lD,EAAK,eAAe,EACpB,MACJ,CACc8sC,IAAA,MAAAA,GAAA,CACV,GAAG9sC,EACH,SAAU,CAACA,EAAK,SAAS,CAAC,EAAI4lD,EAAiB5lD,EAAK,SAAS,CAAC,CAAC,IAE9DA,EAAK,qBACN08D,GAAmB,QAAU,IAEjC1N,EAAc,MAAS,GACxB,CAACliB,GAAa8Y,CAAe,CAAC,EAC3B7Y,GAAYj8B,cAAkB,IAAM,CACtC4rD,GAAmB,QAAU,EACjC,EAAG,CAAE,GACCC,GAA+B9Q,IAAA,YAAAA,GAAa,kBAC5C+Q,GAAwB9rD,cAAmB8qD,GAAgB,CAC7D,GAAIe,KAAiC,iBAC1B,OACX,KAAM,CAAE,cAAA9P,EAAe,KAAAh1D,EAAM,UAAAglE,CAAU,EAAIhE,GAAO+C,CAAW,EAC7D,GAAI/O,EACO,OAAC+O,EAAaA,CAAW,EAEpC,MAAMkB,EAAgBjlE,EAAKA,EAAK,OAAS,CAAC,EACpCklE,EAAcnB,EAAckB,EAC5BE,EAAcpB,EAAciB,EAAYC,EAAgB,EACvD,OAACC,EAAaC,CAAW,GACjC,CAACnE,GAAQ8D,EAA4B,CAAC,EACnCvpB,GAAavlC,WACbkrC,GAAoBjoC,cAAmB9Q,GAAS,WAE9C,IAAAsrC,GAAuBtrC,EAAMozC,GAAW,OAAO,IAEnDA,GAAW,QAAUpzC,EACjB,IAAAgO,EAAA4rD,IAAA,YAAAA,GAAe,UAAf,YAAA5rD,EAAwB,UAAW,QAAa4rD,GAAc,QAAQ,QAAU,IAEpF,IAAI55D,EAAK,UAAY,GACjB+uD,IAAe,UACftyB,EAAAm9B,GAAc,UAAd,YAAAn9B,EAAuB,SAAS,MAAO,GACvCz8B,EAAK,SAAS,CAAC,IAAM,GACrB4lD,IAAoB,GACpBkL,KAAc,SACd/B,EAAW,mBACX,CAACA,EAAW,kBAAkB,KAAK,SAAS6K,GAAc,QAAQ,SAAS,CAAC,CAAC,GAC7ExV,EAAc,KAAK,SAASwV,GAAc,QAAQ,SAAS,CAAC,CAAC,EAAG,CAC1D,MAAAx/D,EAAQ,KAAK,IAAIw/D,GAAc,QAAQ,SAAS,CAAC,EAAG55D,EAAK,SAAS,CAAC,CAAC,EACpE3F,EAAM,KAAK,IAAIu/D,GAAc,QAAQ,SAAS,CAAC,EAAG55D,EAAK,SAAS,CAAC,CAAC,EAAI,EAC5DklD,GAAArqD,GAAiB,oBAAoB,CAACT,EAAOC,CAAG,CAAC,EAAG,OAAW,EAAK,CACxF,CACA,GAAI2F,EAAK,UAAY,GACjB+uD,IAAe,QACf3K,EAAc,UAAY,QAC1B,CAACsY,GAAmB,SACpB,CAAChD,GAAyB,UACzBjV,KAAgB,QAAUA,KAAgB,cAAe,CAC1D,KAAM,CAACkX,EAAaC,CAAW,EAAIxX,EAAc,QAAQ,KAEzD,GAAI,CAACviC,EAAKtN,CAAG,EAAIvU,EAAK,SAItB,GAHIuU,EAAM,IACNA,EAAMk5C,GAAiB,QAAQ,GAE/BsB,EAAW,aAAe,MAAQzxB,EAAAyxB,EAAW,oBAAX,YAAAzxB,EAA8B,WAAY,OAAW,CACjF,MAAA2/B,EAAYlO,EAAW,kBAAkB,QAAQ,MACvDx6C,EAAM,KAAK,IAAIA,EAAKm/C,GAAuBjwC,GAAO,EAAIA,EAAI,EAC1D,MAAMrB,EAAO4T,GAAeinC,EAAWp7C,EAAKtN,EAAK09C,EAAqB,EACtEiD,GAAuB9yC,CAAI,MAE1B,CAEG,GAD6BsxC,IAAwBkI,IAAgBn4C,GAErE,OAEJ,GAD8BiwC,IAAwBn/C,IAAQkP,GAE1D,GAAIzjB,EAAK,OAASorC,GACd72B,QAEA,QAEFsN,EAAA,KAAK,IAAIA,EAAK+jC,CAAe,EAC7B,MAAAsX,GAAcN,GAAsBhB,CAAW,EAC/CrnD,EAAA2oD,KAAgB,OAAY3oD,EAAM+a,GAAM/a,EAAK2oD,GAAY,CAAC,EAAGA,GAAY,CAAC,CAAC,EAEjF,MAAM58D,GAASuhB,EAAM85C,EACfp7D,GAASgU,EAAMqnD,EACfR,GAAW,CACb,EAAG96D,IAAU,EAAIq7D,EAAc95C,EAC/B,EAAGthB,IAAU,EAAIq7D,EAAcrnD,EAC/B,MAAO,KAAK,IAAIjU,EAAM,EAAI,EAC1B,OAAQ,KAAK,IAAIC,EAAM,EAAI,GAEpBokD,GAAA,CACP,GAAGP,EAAc,QACjB,MAAOgX,EAAA,EACR,GAAM,GAAO,MAAM,CAC1B,CACJ,CACA1uB,IAAA,MAAAA,GAAgB,CAAE,GAAG1sC,EAAM,SAAU,CAACA,EAAK,SAAS,CAAC,EAAI4lD,EAAiB5lD,EAAK,SAAS,CAAC,CAAC,CAAG,KAC9F,CACC+uD,EACAnJ,EACAkL,GACA1M,EACAK,GACA/X,GACAwY,GACAwO,GACAjwC,GACAwuC,GACA2K,GACAjY,EAAA,CACH,EACKwY,GAA0BrsD,cAAkB,IAAM,SACpD,MAAM9Q,EAAOozC,GAAW,QACxB,GAAIpzC,IAAS,OACT,OACJ,KAAM,CAAC2pD,EAAMC,CAAI,EAAI5pD,EAAK,WAC1B,GAAI,CAAC6hB,EAAKtN,CAAG,EAAIvU,EAAK,SACtB,MAAMo9D,EAAU3P,GAAiB,QAC7B9D,IAAS,GACT9nC,IAAM4a,GAAAzuB,EAAAovD,EAAQ,SAAR,YAAApvD,EAAgB,eAAhB,YAAAyuB,EAA8B,IAAK2gC,EAAQ,EAE5CzT,IAAS,IACR9nC,EAAAu7C,EAAQ,EAAIA,EAAQ,OAE1BxT,IAAS,GACTr1C,EAAM,KAAK,IAAI,EAAG6oD,EAAQ,CAAC,EAEtBxT,IAAS,IACdr1C,EAAM,KAAK,IAAIkP,GAAO,EAAG25C,EAAQ,EAAIA,EAAQ,MAAM,GAEvDv7C,EAAMyN,GAAMzN,EAAK,EAAG6yC,GAAY,OAAS,CAAC,EAC1CngD,EAAM+a,GAAM/a,EAAK,EAAGkP,GAAO,CAAC,EACVs1B,GAAA,CACd,GAAG/4C,EACH,SAAU,CAAC6hB,EAAKtN,CAAG,EACtB,GACF,CAACmgD,GAAY,OAAQ3b,GAAmBt1B,EAAI,CAAC,EAClC+lC,GAAA6Q,GAAW7d,GAAW2gB,EAAuB,EAG3D,MAAME,GAAkBvsD,cAAmBb,GAAc,CACrD,GAAIm0C,EAAc,UAAY,OAC1B,OACE,MAACtqD,EAAGsG,CAAC,EAAI6P,EACT,CAAC4R,EAAKtN,CAAG,EAAI6vC,EAAc,QAAQ,KACnCkZ,EAAMlZ,EAAc,QAAQ,MAClC,IAAI1pD,EAAO4iE,EAAI,EACX3iE,EAAQ2iE,EAAI,EAAIA,EAAI,MACpB/jE,EAAM+jE,EAAI,EACVzlC,EAASylC,EAAI,EAAIA,EAAI,OACnB,MAACC,GAAQC,EAAS,EAAIZ,GAAsBroD,CAAG,GAAK,CAAC,EAAGkP,GAAO,CAAC,EAChEg6C,GAASD,GAAY,EAE3B,GAAIp9D,IAAM,EACN,OAAQA,EAAG,CACP,IAAK,GAAG,CAEKy3B,EAAA4lC,GACHlkE,EAAAgb,EACGoiD,GAAA,EAAG9+B,EAAQ,UAAU,EAC9B,KACJ,CACA,IAAK,GAAI,CAECt+B,EAAAgkE,GACN1lC,EAAStjB,EAAM,EACNoiD,GAAA,EAAGp9D,EAAK,UAAU,EAC3B,KACJ,CACA,IAAK,GAAG,CAEAA,EAAMgb,GACNhb,IACSo9D,GAAA,EAAGp9D,EAAK,UAAU,IAG3Bs+B,EAAS,KAAK,IAAI4lC,GAAQ5lC,EAAS,CAAC,EAC3B8+B,GAAA,EAAG9+B,EAAQ,UAAU,GAElC,KACJ,CACA,IAAK,GAAI,CAEDA,EAAStjB,EAAM,GACfsjB,IACS8+B,GAAA,EAAG9+B,EAAQ,UAAU,IAG9Bt+B,EAAM,KAAK,IAAIgkE,GAAQhkE,EAAM,CAAC,EACrBo9D,GAAA,EAAGp9D,EAAK,UAAU,GAE/B,KACJ,CACA,QACI/C,GAAa,CAErB,CAEJ,GAAIsD,IAAM,EACN,GAAIA,IAAM,EACNa,EAAQ+5D,GAAY,OACbh6D,EAAAmnB,EACP80C,GAASh8D,EAAQ,EAAIirD,EAAiB,EAAG,YAAY,UAEhD9rD,IAAM,GACJY,EAAAkrD,EACPjrD,EAAQknB,EAAM,EACL80C,GAAAj8D,EAAOkrD,EAAiB,EAAG,YAAY,MAE/C,CACD,IAAI8X,GAAa,GACjB,GAAIrwC,KAAyB,OAAW,CACpC,MAAMzY,GAAQyY,GAAqB,CAC/B,EAAG3yB,EACH,EAAGnB,EACH,MAAOoB,EAAQD,EAAOkrD,EACtB,OAAQ/tB,EAASt+B,CAAA,EAClBonD,GAAmB,QAAQ,MAAM,EAChC,OAAO/rC,IAAU,WACjB8oD,GAAanP,GAAa35C,EAAK,EAEvC,CACA,GAAI9a,IAAM,EAAG,CAET,IAAI8iB,GAAO,GACX,GAAIliB,EAAOmnB,EAAK,CACR,GAAA67C,GAAW,OAAS,EAAG,CACvB,MAAMz/D,GAAS3E,GAAMoB,EAAO,EAAGmnB,EAAM,CAAC,EAAE,KAAKb,IAAK,CAAC08C,GAAW,SAAS18C,GAAI4kC,CAAe,CAAC,EACvF3nD,KAAW,SACJvD,EAAAuD,GACA2e,GAAA,GACX,MAGAliB,IACOkiB,GAAA,GAEPA,IACS+5C,GAAAj8D,EAAM,EAAG,YAAY,CACtC,CACKkiB,KACDjiB,EAAQ,KAAK,IAAI+5D,GAAY,OAAQ/5D,EAAQ,CAAC,EAC9Cg8D,GAASh8D,EAAQ,EAAIirD,EAAiB,EAAG,YAAY,EACzD,SAEK9rD,IAAM,GAAI,CAEf,IAAI8iB,GAAO,GACP,GAAAjiB,EAAQknB,EAAM,EAAG,CACb,GAAA67C,GAAW,OAAS,EAAG,CACvB,MAAMz/D,GAAS3E,GAAMqB,EAAQ,EAAGknB,EAAK,EAAE,EAAE,KAAKb,IAAK,CAAC08C,GAAW,SAAS18C,GAAI4kC,CAAe,CAAC,EACxF3nD,KAAW,SACHtD,EAAAsD,GACD2e,GAAA,GACX,MAGAjiB,IACOiiB,GAAA,GAEPA,IACS+5C,GAAAh8D,EAAQirD,EAAiB,EAAG,YAAY,CACzD,CACKhpC,KACDliB,EAAO,KAAK,IAAIkrD,EAAiBlrD,EAAO,CAAC,EAChCi8D,GAAAj8D,EAAOkrD,EAAiB,EAAG,YAAY,EACpD,MAGApvD,GAAa,CAErB,CAEOmuD,GAAA,CACP,KAAMP,EAAc,QAAQ,KAC5B,MAAO,CACH,EAAG1pD,EACH,EAAGnB,EACH,MAAOoB,EAAQD,EACf,OAAQm9B,EAASt+B,CACrB,GACD,GAAM,GAAO,iBAAiB,GAClC,CACC8zB,GACAuvC,GACAxY,EACAsQ,GAAY,OACZ9O,EACAniC,GACAkzC,GACAhS,EAAA,CACH,EACKgZ,GAAwB9vD,SAAa2kD,EAAkB,EAC7DmL,GAAsB,QAAUnL,GAChC,MAAMoL,GAAqB9sD,cAAkB,CAAC+Q,EAAKtN,EAAKspD,EAAwBC,IAAa,CACnF,MAAAC,EAASjJ,IAAe+I,EAAyB,EAAI,GAC3Dh8C,EAAMyN,GAAMzN,EAAK+jC,EAAiBnkC,GAAQ,OAAS,EAAImkC,CAAe,EAChErxC,EAAA+a,GAAM/a,EAAK,EAAGwpD,CAAM,EACpB,MAAA34B,EAAS+2B,IAAA,YAAAA,GAAc,GACvB6B,EAAS7B,IAAA,YAAAA,GAAc,GACzB,GAAAt6C,IAAQujB,GAAU7wB,IAAQypD,EACnB,SACP,GAAAF,GAAY1Z,EAAc,UAAY,OAAW,CACjD,MAAM6Z,EAAW,CAAC,GAAG7Z,EAAc,QAAQ,UAAU,GACjDA,EAAc,QAAQ,MAAM,MAAQ,GAAKA,EAAc,QAAQ,MAAM,OAAS,IACrE6Z,EAAA,KAAK7Z,EAAc,QAAQ,KAAK,EAE5BC,GAAA,CACb,GAAGD,EACH,QAAS,CACL,KAAM,CAACviC,EAAKtN,CAAG,EACf,MAAO,CAAE,EAAGsN,EAAK,EAAGtN,EAAK,MAAO,EAAG,OAAQ,CAAE,EAC7C,WAAY0pD,CAChB,GACD,EAAI,OAGItZ,GAAA,CACP,KAAM,CAAC9iC,EAAKtN,CAAG,EACf,MAAO,CAAE,EAAGsN,EAAK,EAAGtN,EAAK,MAAO,EAAG,OAAQ,CAAE,GAC9C,GAAM,GAAO,cAAc,EAElC,OAAI06C,EAAS,UAAY,QAAaA,EAAS,QAAQ,CAAC,IAAMptC,GAAOotC,EAAS,QAAQ,CAAC,IAAM16C,IACzF06C,EAAS,QAAU,QAEnB0O,GAAsB,SACbhH,GAAA90C,EAAM+jC,EAAiBrxC,CAAG,EAEhC,IACR,CACCugD,GACAlP,EACAnkC,GAAQ,OACR06C,GACA/X,EACAuS,GACAtS,GACAM,EAAA,CACH,EACKuZ,GAAkBptD,cAAkB,CAACkjD,EAAUmK,IAAa,EAC1D9xC,GAAA,YAAAA,EAAS,QAAS,QAAa2nC,IAAa,QAAax7D,GAAmBw7D,CAAQ,IAC/De,GAAA,CAAC,CAAE,SAAU1oC,EAAQ,KAAM,MAAO2nC,CAAU,EAAC,EAClE,OAAO,sBAAsB,IAAM,QAC/BhmD,EAAAyqC,GAAQ,UAAR,MAAAzqC,EAAiB,OAAO,CACpB,CACI,KAAMqe,EAAQ,IAClB,GACH,CACJ,GAELuoC,GAAM,EAAI,EACV9F,EAAW,MAAS,EACd,MAACsP,EAAMC,CAAI,EAAIF,EACrB,GAAI/Z,EAAc,UAAY,SAAcga,IAAS,GAAKC,IAAS,GAAI,CAC7D,MAAAC,EAAuBla,EAAc,QAAQ,KAAK,CAAC,IAAM0Q,GAAc,GAAKd,IAAa,OAC5E4J,GAAAtuC,GAAM80B,EAAc,QAAQ,KAAK,CAAC,EAAIga,EAAM,EAAG1J,GAAY,OAAS,CAAC,EAAGplC,GAAM80B,EAAc,QAAQ,KAAK,CAAC,EAAIia,EAAM,EAAGvJ,GAAc,CAAC,EAAGwJ,EAAsB,EAAK,CAC3L,CACA7O,GAAA,MAAAA,EAAoBuE,EAAUmK,EAAQ,EACvC,CACC9xC,GAAA,YAAAA,EAAS,KACTuoC,GACAxQ,EACAqL,EACAsF,GACAD,GACA8I,GACAlJ,GAAY,OACf,EACK6J,GAAY3wC,UAAc,IACrB,eAAe0gC,IAAW,GAClC,CAAE,GACCkQ,GAAc1tD,cAAmBiP,GAAM,aACnC60C,KACN,MAAM6J,EAAW,GACR,QAAA3kE,EAAIimB,EAAE,EAAGjmB,EAAIimB,EAAE,EAAIA,EAAE,MAAOjmB,IACxB,QAAAsG,EAAI2f,EAAE,EAAG3f,EAAI2f,EAAE,EAAIA,EAAE,OAAQ3f,IAAK,CACvC,MAAMs+D,EAAYnlC,EAAe,CAACz/B,EAAI8rD,EAAiBxlD,CAAC,CAAC,EACzD,GAAI,CAACs+D,EAAU,cAAgBA,EAAU,OAASzmE,EAAa,QAC3D,SACJ,IAAIu7C,EACA,GAAAkrB,EAAU,OAASzmE,EAAa,OAAQ,CAClC,MAAA0mE,GAAWnyC,GAAgBkyC,CAAS,EACpCE,IAAS5wD,EAAA2wD,IAAA,YAAAA,GAAU,gBAAV,YAAA3wD,EAAA,KAAA2wD,GAA0BD,IACrCC,IAAA,YAAAA,GAAU,YAAa,OACdnrB,EAAAmrB,GAAS,SAASD,CAAS,EAE/B7lE,GAA6B+lE,EAAM,IAC/BprB,GAAA/W,EAAAmiC,IAAA,YAAAA,GAAQ,eAAR,YAAAniC,EAAA,KAAAmiC,GAAuBF,GACpC,SAEMlmE,GAAmBkmE,CAAS,GAAKA,EAAU,cACjDA,EAAU,OAASzmE,EAAa,QAAS,CACnC,MAAA0mE,GAAWnyC,GAAgBkyC,CAAS,EACjClrB,GAAAlW,EAAAqhC,IAAA,YAAAA,GAAU,WAAV,YAAArhC,EAAA,KAAAqhC,GAAqBD,EAClC,CACIlrB,IAAW,QAAa,CAAC96C,GAAgB86C,CAAM,GAAKh7C,GAAmBg7C,CAAM,GACpEirB,EAAA,KAAK,CAAE,SAAU,CAAC3kE,EAAGsG,CAAC,EAAG,MAAOozC,CAAA,CAAQ,CAEzD,CAEJuhB,GAAqB0J,CAAQ,GACrBr/B,EAAAqZ,GAAA,gBAAArZ,EAAS,OAAOq/B,EAAS,IAAI3kE,IAAM,CAAE,KAAMA,EAAE,QAAS,EAAE,EAAC,EAClE,CAAC86D,GAAOr7B,EAAgB/M,GAAiBuoC,GAAsBnP,CAAe,CAAC,EAC5EiZ,GAAcxyC,IAAY,OAC1ByyC,GAAyBhuD,cAAmBxR,GAAU,WACxD,MAAM4N,EAAS,IAAM,CACjB5N,EAAM,gBAAgB,EACtBA,EAAM,eAAe,GAEnBokD,EAAU,CACZ,SAAU,IAER,CAAE,OAAAvT,CAAW,EAAA7wC,EACbw5C,EAAkBsL,EAAc,QAChCthB,EAAeshB,EAAc,KAC7B3oD,EAAO83D,GACb,GAAI,CAACsL,IAAerb,GAAS/nD,EAAK,MAAO6D,EAAOokD,CAAO,EACnDW,GAAiBqK,GAAoB,EAAK,EACrB8C,IAAA,MAAAA,aAEhB,CAACqN,IAAerb,GAAS/nD,EAAK,UAAW6D,EAAOokD,CAAO,EAC3CW,GAAA,CACb,QAASxpD,GAAiB,MAAM,EAChC,KAAMA,GAAiB,MAAM,EAC7B,QAAS,CACL,OAAMmT,GAAAo2C,EAAc,UAAd,YAAAp2C,GAAuB,OAAQ,CAAC43C,EAAiB,CAAC,EACxD,MAAO,CACH,EAAGA,EACH,EAAG,EACH,MAAOwJ,EAAU,OACjB,OAAQ3rC,EACZ,EACA,WAAY,CAAC,CACjB,GACD,EAAK,UAEH+/B,GAAS/nD,EAAK,OAAQ6D,EAAOokD,CAAO,GACzCjnB,GAAAmjB,GAAA,YAAAA,EAAgB,UAAhB,MAAAnjB,GAAyB,MAAM,CAAE,cAAe,EAAM,GACtDo3B,GAAmB,EAAI,UAElBrQ,GAAS/nD,EAAK,OAAQ6D,EAAOokD,CAAO,EAAG,CACtC,MAAAqb,IAAiB3K,IAAA,YAAAA,GAAWhQ,KAAkB,GACpD,GAAI2a,KAAmB,GAAO,CACpB,MAAAJ,GAAWI,KAAmB,GAAO3a,EAAgB2a,GAMvD,GAAAJ,GAAS,UAAY,OAAW,CACpBH,GAAAG,GAAS,QAAQ,KAAK,EACvB,UAAA5+C,MAAK4+C,GAAS,QAAQ,WAC7BH,GAAYz+C,EAAC,CAErB,CACW,UAAAA,MAAK4+C,GAAS,KACTH,GAAA,CACR,EAAG5Y,EACH,EAAG7lC,GACH,MAAOqvC,EAAU,OACjB,OAAQ,EACX,EAEMvtC,gBAAO88C,GAAS,QACXH,GAAA,CACR,EAAG38C,GACH,EAAG,EACH,MAAO,EACP,OAAQ4B,EAAA,CACX,CAET,CACJ,CACA,GAAIigC,EAAQ,SACD,OAAAx2C,IACA,GAEX,GAAIk3C,EAAc,UAAY,OACnB,SACX,GAAI,CAACviC,EAAKtN,CAAG,EAAI6vC,EAAc,QAAQ,KACvC,KAAM,CAAG,CAAAlwB,CAAQ,EAAIkwB,EAAc,QAAQ,KAC3C,IAAI0Z,GAAW,GACXkB,GAAmB,GAoKnB,GAnKAxb,GAAS/nD,EAAK,qBAAsB6D,EAAOokD,CAAO,EACtC2U,GAAA,QAAQx2C,EAAM+jC,EAAiBrxC,CAAG,EAEzCs8C,KAAiB,QAAUrN,GAAS/nD,EAAK,aAAc6D,EAAOokD,CAAO,EACtE5K,EAAgB,SAASj3B,CAAG,EAC5B0jC,GAAmBzM,EAAgB,OAAOj3B,CAAG,EAAG,OAAW,EAAI,EAG3DgvC,KAAiB,SACjBtL,GAAmB1qD,GAAiB,oBAAoBgnB,CAAG,EAAG,OAAW,EAAI,EAG1D0jC,GAAA,OAAW1jC,EAAK,EAAI,EAI1CivC,KAAc,QAAUtN,GAAS/nD,EAAK,UAAW6D,EAAOokD,CAAO,EAChE5gB,EAAa,SAASvuB,CAAG,EACzB2wC,GAAgBpiB,EAAa,OAAOvuB,CAAG,EAAG,OAAW,EAAI,EAGrDu8C,KAAc,SACd5L,GAAgBrqD,GAAiB,oBAAoB0Z,CAAG,EAAG,OAAW,EAAI,EAG1D2wC,GAAA,OAAW3wC,EAAK,EAAI,EAIvC,CAACsqD,IAAe1uB,IAAW,QAAaqT,GAAS/nD,EAAK,aAAc6D,EAAOokD,CAAO,EACnFnvC,IAAQkP,IAAQiwC,GAChB,OAAO,WAAW,IAAM,CACd,MAAA6E,GAAqBD,GAA4Bz2C,CAAG,EACrDm2C,GAAUO,IAAsB12C,CAAG,GACzC,CAAC,GAGJ0tC,GAAA,MAAAA,EAAkB,CAAC1tC,EAAM+jC,EAAiBrxC,CAAG,GAC7CiiD,GAASrmB,EAAQ,EAAI,GAGpBiU,EAAc,QAAQ,MAAM,OAAS,GAAKZ,GAAS/nD,EAAK,SAAU6D,EAAOokD,CAAO,EAC5EuX,KAEJ7W,EAAc,QAAQ,MAAM,MAAQ,GAAKZ,GAAS/nD,EAAK,UAAW6D,EAAOokD,CAAO,EAC3EqX,KAELvX,GAAS/nD,EAAK,aAAc6D,EAAOokD,CAAO,EAC/CnvC,GAAO,KAAK,IAAI,EAAGk5C,GAAiB,QAAQ,OAAS,CAAC,EAEjDjK,GAAS/nD,EAAK,iBAAkB6D,EAAOokD,CAAO,EACnDnvC,GAAO,KAAK,IAAI,EAAGk5C,GAAiB,QAAQ,OAAS,CAAC,EAEjDjK,GAAS/nD,EAAK,cAAe6D,EAAOokD,CAAO,GAChDoL,EAAW,MAAS,EACdv6C,EAAA,EACAsN,EAAA,GAED2hC,GAAS/nD,EAAK,aAAc6D,EAAOokD,CAAO,GAC/CoL,EAAW,MAAS,EACpBv6C,EAAM,OAAO,iBACbsN,EAAM,OAAO,kBAER2hC,GAAS/nD,EAAK,kBAAmB6D,EAAOokD,CAAO,GACpDoL,EAAW,MAAS,EACJuO,GAAA,CAAC,GAAI,EAAE,CAAC,GAEnB7Z,GAAS/nD,EAAK,iBAAkB6D,EAAOokD,CAAO,GACnDoL,EAAW,MAAS,EACJuO,GAAA,CAAC,EAAG,CAAC,CAAC,GAEhBwB,IAsEFrb,GAAS/nD,EAAK,aAAc6D,EAAOokD,CAAO,GAC1CoL,EAAW,MAAS,EAEpBtL,GAAS/nD,EAAK,kBAAmB6D,EAAOokD,CAAO,IAC/CoL,EAAW,MAAS,EACpBv6C,KAEAivC,GAAS/nD,EAAK,gBAAiB6D,EAAOokD,CAAO,IAC7CoL,EAAW,MAAS,EACpBv6C,KAEAivC,GAAS/nD,EAAK,kBAAmB6D,EAAOokD,CAAO,IAC/CoL,EAAW,MAAS,EACpBjtC,KAEA2hC,GAAS/nD,EAAK,mBAAoB6D,EAAOokD,CAAO,IAChDoL,EAAW,MAAS,EACpBjtC,OAtFA2hC,GAAS/nD,EAAK,WAAY6D,EAAOokD,CAAO,EACjCnvC,GAAA,EAEFivC,GAAS/nD,EAAK,SAAU6D,EAAOokD,CAAO,EACpCnvC,GAAA,EAEFivC,GAAS/nD,EAAK,YAAa6D,EAAOokD,CAAO,EACvC7hC,GAAA,EAEF2hC,GAAS/nD,EAAK,WAAY6D,EAAOokD,CAAO,EACtC7hC,GAAA,EAEF2hC,GAAS/nD,EAAK,0BAA2B6D,EAAOokD,CAAO,GACrDnvC,GAAA,EACIupD,GAAA,IAENta,GAAS/nD,EAAK,wBAAyB6D,EAAOokD,CAAO,GACnDnvC,GAAA,EACIupD,GAAA,IAENta,GAAS/nD,EAAK,2BAA4B6D,EAAOokD,CAAO,GACtD7hC,GAAA,EACIi8C,GAAA,IAENta,GAAS/nD,EAAK,0BAA2B6D,EAAOokD,CAAO,GACrD7hC,GAAA,EACIi8C,GAAA,IAENta,GAAS/nD,EAAK,YAAa6D,EAAOokD,CAAO,EAC9CnvC,EAAMkP,GAAO,EAER+/B,GAAS/nD,EAAK,aAAc6D,EAAOokD,CAAO,EAC/CnvC,EAAM,OAAO,iBAERivC,GAAS/nD,EAAK,eAAgB6D,EAAOokD,CAAO,EACjD7hC,EAAM,OAAO,iBAER2hC,GAAS/nD,EAAK,gBAAiB6D,EAAOokD,CAAO,EAClD7hC,EAAM,OAAO,kBAER4iC,KAAgB,QAAUA,KAAgB,gBAC3CjB,GAAS/nD,EAAK,eAAgB6D,EAAOokD,CAAO,EAC5B2Z,GAAA,CAAC,EAAG,CAAC,CAAC,EAEjB7Z,GAAS/nD,EAAK,aAAc6D,EAAOokD,CAAO,EAC/B2Z,GAAA,CAAC,EAAG,EAAE,CAAC,EAElB7Z,GAAS/nD,EAAK,gBAAiB6D,EAAOokD,CAAO,EAClC2Z,GAAA,CAAC,EAAG,CAAC,CAAC,EAEjB7Z,GAAS/nD,EAAK,eAAgB6D,EAAOokD,CAAO,EACjC2Z,GAAA,CAAC,GAAI,CAAC,CAAC,EAElB7Z,GAAS/nD,EAAK,gBAAiB6D,EAAOokD,CAAO,EAClC2Z,GAAA,CAAC,EAAG,CAAC,CAAC,EAEjB7Z,GAAS/nD,EAAK,iBAAkB6D,EAAOokD,CAAO,EACnC2Z,GAAA,CAAC,EAAG,EAAE,CAAC,EAElB7Z,GAAS/nD,EAAK,mBAAoB6D,EAAOokD,CAAO,EACrC2Z,GAAA,CAAC,EAAG,CAAC,CAAC,EAEjB7Z,GAAS/nD,EAAK,oBAAqB6D,EAAOokD,CAAO,GACtC2Z,GAAA,CAAC,GAAI,CAAC,CAAC,GAG/B2B,GAAmBtb,EAAQ,UAwBPoV,KAA2B,QAAaA,KAA2B,UACpEvkD,IAAQ2f,EAAU,CACrC,MAAM+qC,GAASnG,KAA2B,WACtCA,KAA2B,QAC3BA,KAA2B,QACzBoG,GAAWpG,KAA2B,aACxCA,KAA2B,QAC3BA,KAA2B,QACzBqG,GAAY5qD,EAAM2f,EACxB,GAAIirC,IAAaF,GAAQ,CACrB,KAAO1qD,GAAO,GAAKskD,GAAOtkD,CAAG,EAAE,eAC3BA,IAEAA,EAAM,IACAA,EAAA2f,EACV,SAEK,CAACirC,IAAaD,GAAU,CAC7B,KAAO3qD,EAAMkP,IAAQo1C,GAAOtkD,CAAG,EAAE,eAC7BA,IAEAA,GAAOkP,KACDlP,EAAA2f,EAEd,CACJ,CACA,MAAMkrC,GAAQxB,GAAmB/7C,EAAKtN,EAAK,GAAOupD,EAAQ,EACpDuB,GAAW3b,EAAQ,SACzB,OAAI2b,KAAaD,IAAS,CAACJ,IAAoB1M,KACpCplD,IAEJmyD,EAAA,EACR,CACCvG,GACA+F,GACAza,EACAmP,GACA1C,GACAC,GACArM,GACAmB,EACAiT,GACAp1C,GACAm6C,GACAvZ,GACAmN,GACApC,EAAU,OACVgF,GACA9B,GACAkM,GACAjZ,GACAL,GACAwO,GACA4E,GACAN,GACAzI,EACAiH,GACAyE,GACAF,GACAsC,EAAA,CACH,EACK1+C,GAAY7N,cAAmBxR,GAAU,CAC3C,IAAIuqD,EAAY,GAahB,GAZI0G,IAAgB,QACJA,EAAA,CACR,GAAGjxD,EACH,OAAQ,IAAM,CACEuqD,EAAA,EAChB,EACH,EAEDA,GAEAiV,GAAuBx/D,CAAK,GAE5B8kD,EAAc,UAAY,OAC1B,OACJ,KAAM,CAACviC,EAAKtN,CAAG,EAAI6vC,EAAc,QAAQ,KACnC2R,EAAKtI,GAAiB,QAC5B,GAAIgD,IACA,CAACnxD,EAAM,SACP,CAACA,EAAM,SACP8kD,EAAc,UAAY,QAC1B9kD,EAAM,IAAI,SAAW,GACrB,SAAS,KAAKA,EAAM,GAAG,GACvBA,EAAM,SAAW,QACjB1G,GAAgB2gC,EAAe,CAAC1X,EAAM+jC,EAAiB,KAAK,IAAI,EAAG,KAAK,IAAIrxC,EAAKkP,GAAO,CAAC,CAAC,CAAC,CAAC,CAAC,EAAG,CAChG,IAAK,CAACiwC,IAAwBn/C,IAAQkP,MACjCsyC,EAAG,EAAIxhD,GAAOA,EAAMwhD,EAAG,EAAIA,EAAG,QAAUA,EAAG,EAAIl0C,GAAOA,EAAMk0C,EAAG,EAAIA,EAAG,OACvE,OAEJS,GAASl3D,EAAM,OAAQ,GAAMA,EAAM,GAAG,EACtCA,EAAM,gBAAgB,EACtBA,EAAM,eAAe,CACzB,GACD,CACCmxD,GACAF,EACAuO,GACA1a,EACA7qB,EACAqsB,EACAniC,GACAiwC,GACA8C,EAAA,CACH,EACKtqB,GAAgBp7B,cAAkB,CAAC9Q,EAAMu7D,IAAmB,CAC9D,MAAM+D,EAAct/D,EAAK,SAAS,CAAC,EAAI4lD,EAInC,GAHA5lD,EAAK,OAAS,WACdiwD,IAAA,MAAAA,GAAsBqP,EAAa,CAAE,GAAGt/D,EAAM,eAAAu7D,CAAgB,IAE9Dv7D,EAAK,OAASmrC,GAAiB,CAC/B,GAAIm0B,EAAc,EACd,OAEJpP,GAAA,MAAAA,EAA2BoP,EAAa,CAAE,GAAGt/D,EAAM,eAAAu7D,CAAgB,EACvE,CACI,GAAAv7D,EAAK,OAAS,OAAQ,CACtB,KAAM,CAAC6hB,EAAKtN,CAAG,EAAIvU,EAAK,SACJgwD,IAAA,MAAAA,GAAA,CAACsP,EAAa/qD,CAAG,EAAG,CACpC,GAAGvU,EACH,eAAAu7D,CAAA,GAEC55C,GAAqByiC,EAAepkD,EAAK,QAAQ,GAC/B49D,GAAA/7C,EAAKtN,EAAK,GAAO,EAAK,CAEjD,GACD,CACC6vC,EACA4L,GACAE,EACAD,GACArK,EACAgY,EAAA,CACH,EACK2B,GAAkBzuD,cAAkB,MAAO1M,GAAM,WACnD,GAAI,CAACmvD,GAAY,MACb,OACJ,SAASiM,EAAYpvD,EAAOnS,GAAQwhE,GAAUC,GAAW,WAC/C,MAAAC,GAAsB,OAAOF,IAAa,UAAWA,IAAA,YAAAA,GAAU,KAAK;AAAA,KAAS,IAAKA,IAAA,YAAAA,GAAU,aAAc,GAC5G,IAAC/mE,GAAgB0X,CAAK,GAAKxX,GAAgBwX,CAAK,GAAKA,EAAM,WAAa,GAAM,CACxE,MAAAwvD,GAAUlQ,GAAA,YAAAA,EAAmBiQ,GAAqBvvD,GACxD,GAAIwvD,KAAY,QAAapnE,GAAmBonE,EAAO,EAK5C,OACH,SAAU3hE,GACV,MAAO2hE,EAAA,EAGT,MAAA7/C,GAAIyM,GAAgBpc,CAAK,EAC/B,GAAI2P,KAAM,OACC,OACP,GAAAA,GAAE,OAAS9nB,EAAa,OAAQ,CACzB3B,GAAA8Z,EAAM,OAASnY,EAAa,MAAM,EACzC,MAAMu7C,IAASxlC,GAAA+R,GAAE,UAAF,YAAA/R,GAAA,KAAA+R,GAAY4/C,GAAqBvvD,EAAM,MACtD,OAAIojC,KAAW,OACJ,OACJ,CACH,SAAUv1C,GACV,MAAO,CACH,GAAGmS,EACH,KAAMojC,EACV,EACJ,KAEC,CACD,MAAMA,IAAS/W,GAAA1c,GAAE,UAAF,YAAA0c,GAAA,KAAA1c,GAAY4/C,GAAqBvvD,EAAO,CACnD,UAAAsvD,GACA,gBAAiB,OAAOA,IAAc,SAAWA,GAAYA,IAAA,YAAAA,GAAW,KAAK;AAAA,GAC7E,SAAAD,EAAA,GAEJ,OAAIjsB,KAAW,OACJ,QACJl9C,GAAAk9C,GAAO,OAASpjC,EAAM,IAAI,EAC1B,CACH,SAAUnS,GACV,MAAOu1C,EAAA,EAEf,CACJ,CAEJ,CACA,MAAMsF,EAAkBsL,EAAc,QAChCthB,EAAeshB,EAAc,KAC7BjO,IAAUnoC,EAAAwuC,GAAU,UAAV,YAAAxuC,EAAmB,SAAS,SAAS,kBAAmB,MACpEyuB,EAAAoQ,EAAU,UAAV,YAAApQ,EAAmB,SAAS,SAAS,kBAAmB,GACxD,IAAAx+B,EAUA,GATAmmD,EAAc,UAAY,OACjBnmD,EAAA,CAACmmD,EAAc,QAAQ,MAAM,EAAGA,EAAc,QAAQ,MAAM,CAAC,EAEjEtL,EAAgB,SAAW,EAChC76C,EAAS,CAAC66C,EAAgB,MAAM,GAAK,EAAG,CAAC,EAEpChW,EAAa,SAAW,IAC7B7kC,EAAS,CAAC2nD,EAAiB9iB,EAAa,SAAW,CAAC,GAEpDqT,GAAWl4C,IAAW,OAAW,CAC7B,IAAAopB,EACAzR,GACJ,MAAMsxC,GAAY,aACZC,GAAW,YACb,aAAU,UAAU,OAAS,OAAW,CACxC,MAAM0Y,GAAmB,MAAM,UAAU,UAAU,KAAK,EACxD,UAAW/6D,MAAQ+6D,GAAkB,CACjC,GAAI/6D,GAAK,MAAM,SAASqiD,EAAQ,EAAG,CAEzB,MAAAt0C,GAAO,MADI,MAAM/N,GAAK,QAAQqiD,EAAQ,GAChB,OACtB2Y,GAAU1Y,GAAWv0C,EAAI,EAC/B,GAAIitD,KAAY,OAAW,CAChBz4C,EAAAy4C,GACP,KACJ,CACJ,CACIh7D,GAAK,MAAM,SAASoiD,EAAS,IAE7BtxC,GAAO,MAAO,MAAM9Q,GAAK,QAAQoiD,EAAS,GAAG,OAErD,CAEK,mBAAU,UAAU,WAAa,OAC/BtxC,GAAA,MAAM,UAAU,UAAU,SAAS,UAErCxR,IAAM,SAAaA,GAAA,YAAAA,EAAG,iBAAkB,KAAM,CACnD,GAAIA,EAAE,cAAc,MAAM,SAAS+iD,EAAQ,EAAG,CAC1C,MAAMt0C,GAAOzO,EAAE,cAAc,QAAQ+iD,EAAQ,EAC7C9/B,EAAO+/B,GAAWv0C,EAAI,CAC1B,CACIwU,IAAS,QAAajjB,EAAE,cAAc,MAAM,SAAS8iD,EAAS,IACvDtxC,GAAAxR,EAAE,cAAc,QAAQ8iD,EAAS,EAC5C,KAGA,QAEE,MAACvgB,GAAWC,EAAS,EAAI3oC,EACzBwgE,GAAW,GACd,GACC,GAAItN,KAAY,OAAW,CACjB,MAAA4O,GAAWrmB,GAAsBz7C,CAAM,EACvCwhE,GAAW7pD,KAAQyR,GAAA,YAAAA,EAAM,IAAItH,IAAKA,GAAE,IAAIsU,IAAMA,GAAG,QAAQ,EAAE,KAAK,GAAI,GAAG,KAAK,OAAS,GACrFmf,GAASgsB,EAAYO,GAAU9hE,EAAQwhE,GAAU,MAAS,EAC5DjsB,KAAW,QACXirB,GAAS,KAAKjrB,EAAM,EAExB,KACJ,CACA,GAAInsB,IAAS,OAAW,CACpB,GAAIzR,KAAS,OACT,OACJyR,EAAOmhC,GAAQ5yC,EAAI,CACvB,CACA,GAAIu7C,KAAY,IACX,OAAOA,IAAY,aAChBA,IAAA,YAAAA,GAAU,CAAClzD,EAAO,CAAC,EAAI2nD,EAAiB3nD,EAAO,CAAC,CAAC,EAAGopB,EAAK,IAAItH,IAAKA,GAAE,IAAUsU,IAAA,gBAAArmB,GAAAqmB,GAAG,WAAH,YAAArmB,GAAa,aAAc,GAAE,CAAC,MAAO,GACvH,OAEJ,SAAW,CAACuG,GAAKyrD,EAAO,IAAK34C,EAAK,UAAW,CACzC,GAAI9S,GAAMqyB,IAAanjB,GACnB,MACJ,SAAW,CAAC5B,GAAKo+C,EAAQ,IAAKD,GAAQ,UAAW,CAC7C,MAAMzlE,GAAQ,CAACsnB,GAAM8kB,GAAWpyB,GAAMqyB,EAAS,EACzC,CAACs5B,GAAUC,EAAQ,EAAI5lE,GAG7B,GAFI2lE,IAAYxL,GAAY,QAExByL,IAAYrL,GACZ,SACE,MAAAiL,GAAWrmB,GAAsBn/C,EAAK,EACtCi5C,GAASgsB,EAAYO,GAAUxlE,GAAO0lE,GAAS,SAAUA,GAAS,SAAS,EAC7EzsB,KAAW,QACXirB,GAAS,KAAKjrB,EAAM,CAE5B,CACJ,CAEK,WACTuhB,GAAqB0J,EAAQ,GAC7BnhC,EAAAmb,GAAQ,UAAR,MAAAnb,EAAiB,OAAOmhC,GAAS,IAAUpmE,KAAA,CACvC,KAAMA,GAAE,UACV,EACN,GACD,CACCq3D,EACAljC,GACAktB,GACA0K,EACAmP,GAAY,MACZ/W,GACAkY,GAAY,OACZK,GACAD,GACA3D,GACAvL,EACAniC,EAAA,CACH,EACDlW,GAAiB,QAASgyD,GAAiB7jB,EAAY,GAAO,EAAI,EAIlE,MAAM0kB,GAAStvD,cAAkB,MAAO1M,EAAGi8D,IAAgB,SACvD,GAAI,CAAC9M,GAAY,KACb,OACJ,MAAMpd,EAAUkqB,IAAgB,MAC5BryD,EAAAwuC,GAAU,UAAV,YAAAxuC,EAAmB,SAAS,SAAS,kBAAmB,MACxDyuB,EAAAoQ,EAAU,UAAV,YAAApQ,EAAmB,SAAS,SAAS,kBAAmB,GACtDqc,EAAkBsL,EAAc,QAChCthB,EAAeshB,EAAc,KAC7Bkc,EAA6B,CAAC1rD,EAAOuxC,IAAkB,CACzD,GAAI,CAACiL,GACezI,GAAA/zC,EAAOuxC,EAAe/hD,CAAC,MAEtC,CACK,MAAAm8D,GAAUpa,EAAc,IAAc5rD,KAAA,CACxC,KAAMtC,EAAa,KACnB,KAAMm3D,EAAU70D,EAAK,EAAE,MACvB,YAAa60D,EAAU70D,EAAK,EAAE,MAC9B,aAAc,EAChB,IACFouD,GAAgB,CAAC4X,GAAS,GAAG3rD,CAAK,EAAGuxC,EAAe/hD,CAAC,CACzD,GAEA,GAAA+xC,GAAW9oB,KAAyB,QAChC,GAAA+2B,EAAc,UAAY,OAAW,CACrC,IAAI7rD,EAAQ80B,GAAqB+2B,EAAc,QAAQ,MAAOzD,GAAmB,QAAQ,MAAM,EAC3F,OAAOpoD,GAAU,WACjBA,EAAQ,MAAMA,KAElB+nE,EAA2B/nE,EAAOe,GAAM8qD,EAAc,QAAQ,MAAM,EAAIwB,EAAiBxB,EAAc,QAAQ,MAAM,EAAIA,EAAc,QAAQ,MAAM,MAAQwB,CAAe,CAAC,UAExK9iB,IAAiB,QAAaA,EAAa,OAAS,EAAG,CAEtD,MAAAluB,EADS,CAAC,GAAGkuB,CAAY,EACV,IAAgB8pB,IAAA,CACjC,MAAMr0D,GAAQ80B,GAAqB,CAC/B,EAAGu4B,EACH,EAAGgH,GACH,MAAOwC,EAAU,OACjB,OAAQ,GACTzO,GAAmB,QAAQ,MAAM,EAChC,cAAOpoD,IAAU,SACVA,GAAM,CAAC,EAEXA,GAAQ,OAAUuoB,OAAE,CAAC,CAAC,EAChC,EACD,GAAIlM,EAAM,KAAU9a,kBAAa,OAAO,EAAG,CACvC,MAAM0mE,GAAU,MAAM,QAAQ,IAAI5rD,CAAK,EACvC0rD,EAA2BE,GAASlnE,GAAM81D,EAAU,MAAM,CAAC,OAG3DkR,EAA2B1rD,EAAOtb,GAAM81D,EAAU,MAAM,CAAC,CAC7D,SAEKtW,EAAgB,OAAS,EAAG,CACjC,MAAM2nB,EAAU,GACVC,EAAO,GACb,UAAW7+C,MAAOi3B,EAAiB,CAC/B,IAAIvgD,GAAQ80B,GAAqB,CAC7B,EAAGxL,GACH,EAAG,EACH,MAAO,EACP,OAAQ4B,EAAA,EACTk9B,GAAmB,QAAQ,MAAM,EAChC,OAAOpoD,IAAU,WACjBA,GAAQ,MAAMA,MAElBkoE,EAAQ,KAAKloE,EAAK,EACbmoE,EAAA,KAAK7+C,GAAM+jC,CAAe,CACnC,CACI,GAAA6a,EAAQ,SAAW,EACQH,EAAAG,EAAQ,CAAC,EAAGC,CAAI,MAE1C,CAED,MAAMC,GAASF,EAAQ,OAAO,CAACxvD,GAAIyiC,KAAOziC,GAAG,IAAI,CAACsD,GAAKha,KAAU,CAAC,GAAGga,GAAK,GAAGm/B,GAAGn5C,EAAK,CAAC,CAAC,CAAC,EACxF+lE,EAA2BK,GAAQD,CAAI,CAC3C,CACJ,EACJ,EACD,CACCtR,EACA/hC,GACA+2B,EACAmP,GAAY,KACZ3N,EACApJ,GACA/4B,GACA2tC,EAAA,CACH,EACD7jD,GAAiB,OAAQ6yD,GAAQ1kB,EAAY,GAAO,EAAK,EACzD,MAAMklB,GAAQ9vD,cAAkB,MAAO1M,GAAM,SAKzC,GAJI,GAACmvD,GAAY,KAIb,IAFYvlD,EAAAwuC,GAAU,UAAV,YAAAxuC,EAAmB,SAAS,SAAS,kBAAmB,MACpEyuB,EAAAoQ,EAAU,UAAV,YAAApQ,EAAmB,SAAS,SAAS,kBAAmB,OAG5D,MAAM2jC,GAAOh8D,CAAC,EACVggD,EAAc,UAAY,QAAW,CACrC,IAAIyc,EAAqB,CACrB,QAAS,CACL,KAAMzc,EAAc,QAAQ,KAC5B,MAAOA,EAAc,QAAQ,MAC7B,WAAY,CAAC,CACjB,EACA,KAAMvpD,GAAiB,MAAM,EAC7B,QAASA,GAAiB,MAAM,GAE9B,MAAAimE,EAAiB1M,IAAA,YAAAA,GAAWyM,GAIlC,GAHIC,IAAmB,KAEFD,EAAAC,IAAmB,GAAOD,EAAqBC,EAChED,EAAmB,UAAY,QAC/B,OACQrC,GAAAqC,EAAmB,QAAQ,KAAK,CAChD,GACD,CAACrC,GAAapa,EAAemP,GAAY,IAAK6M,GAAQ5jB,GAAW4X,EAAQ,CAAC,EAC7E7mD,GAAiB,MAAOqzD,GAAOllB,EAAY,GAAO,EAAK,EACvD,MAAMsE,GAAyBlvC,cAAkB,CAAC2vD,EAASM,IAAa,CACpE,GAAIzQ,KAA6B,OAAW,CACpC1K,IAAoB,IACV6a,IAAQ,IAAI37D,GAAQ,CAACA,EAAK,CAAC,EAAI8gD,EAAiB9gD,EAAK,CAAC,CAAC,CAAC,GAEtEwrD,GAAyBmQ,EAASM,CAAQ,EAC1C,MACJ,CACI,GAAAN,EAAQ,SAAW,GAAKM,IAAa,GACrC,OACJ,KAAM,CAACl/C,EAAKtN,CAAG,EAAIksD,EAAQM,CAAQ,EAC/B9R,EAAS,UAAY,QAAaA,EAAS,QAAQ,CAAC,IAAMptC,GAAOotC,EAAS,QAAQ,CAAC,IAAM16C,IAGpF06C,EAAA,QAAU,CAACptC,EAAKtN,CAAG,EACTqpD,GAAA/7C,EAAKtN,EAAK,GAAO,EAAK,EAC1C,GAAC+7C,GAA0B1K,EAAiBgY,EAAkB,CAAC,EAI5D,CAACoD,GAAQC,EAAM,IAAI3jC,GAAAo0B,IAAA,YAAAA,GAAoB,UAApB,YAAAp0B,GAA6B,OAAQ,GACxD+6B,GAAcxqD,SAAa8oD,EAAQ,EACzC0B,GAAY,QAAU1B,GACtB9mD,kBAAsB,IAAM,aACpB8tD,GAAsB,SACtB,CAAChJ,GAAgB,SACjBqM,KAAW,QACXC,KAAW,SACVD,OAAWvkC,GAAAzuB,EAAAkmD,EAA8B,UAA9B,YAAAlmD,EAAuC,UAAvC,YAAAyuB,EAAgD,KAAK,KAC7DwkC,OAAW7hC,GAAA9B,EAAA42B,EAA8B,UAA9B,YAAA52B,EAAuC,UAAvC,YAAA8B,EAAgD,KAAK,MACxDi5B,GAAA,QAAQ2I,GAAQC,EAAM,EAEtCtM,GAAgB,QAAU,IAC3B,CAACqM,GAAQC,EAAM,CAAC,EACnB,MAAMC,GAAuB9c,EAAc,UAAY,SAClDA,EAAc,QAAQ,KAAK,CAAC,GAAKsQ,GAAY,QAAUtQ,EAAc,QAAQ,KAAK,CAAC,GAAK0Q,IAC7FjlD,kBAAsB,IAAM,CACpBqxD,IACA7c,GAAiBqK,GAAoB,EAAK,CAC9C,EACD,CAACwS,GAAsB7c,EAAgB,CAAC,EACrC,MAAA3qB,GAAe9L,UAAc,IAC3B8lC,KAAyB,KAAQ1B,IAAA,YAAAA,GAAoB,QAAS,GACvDn3D,GAAiB,oBAAoBi6D,GAAc,CAAC,EAExDj6D,GAAiB,QACzB,CAACi6D,GAAapB,GAAsB1B,IAAA,YAAAA,GAAoB,IAAI,CAAC,EAC1DmP,GAAwBrwD,cAAmB+Q,GACtC,OAAOgd,IAAmB,UAC3BA,IACAA,IAAA,YAAAA,GAAiBhd,EAAM+jC,KAAoB,GAClD,CAACA,EAAiB/mB,EAAc,CAAC,EAC9BuiC,GAAkBxzC,UAAc,IAAM,CACpC,GAAAmsC,KAAgB,QAAaltB,EAAU,UAAY,KAC5C,YACL,MAAE,OAAAsD,EAAQ,MAAAxlB,CAAU,EAAAovC,GACpB3W,EAAevW,EAAU,QAAQ,sBAAsB,EAC7D,OAAQ72C,EAAM,cAAcmtD,GAAa,CAAE,OAAAhT,EAAgB,MAAAxlB,EAAc,aAAAy4B,EAA4B,QAAS,IAAMkT,GAAe,MAAS,EAAG,SAAoB9iB,GAAA,CAC3J8iB,GAAe,MAAS,EACxBnG,IAAA,MAAAA,GAAuBxlC,EAAO6oB,IAC/B,GACR,CAAC2c,GAAsB4J,EAAW,CAAC,EAChCsH,GAAuB,KAAK,IAAI3M,GAAY,OAAQhzC,IAAiB+xC,GAAgB,EAAI,EAAE,EAC3F/d,EAAA,oBAAoBhK,EAAc,KAAO,CAC3C,UAAW,CAAC7pB,EAAKo2C,IAAgBD,GAAUn2C,EAAM+jC,EAAiBqS,CAAW,EAC7E,YAA2BqJ,GAAA,OACvB,OAAI1b,IAAoB,IACpB0b,EAAaA,EAAW,IAAIxnE,IAAM,CAAE,KAAM,CAACA,EAAE,KAAK,CAAC,EAAI8rD,EAAiB9rD,EAAE,KAAK,CAAC,CAAC,CAAI,MAElFkU,EAAAyqC,GAAQ,UAAR,YAAAzqC,EAAiB,OAAOszD,EACnC,EACA,UAAW,CAACz/C,EAAKtN,IAAQ,OACrB,GAAI,GAAAs4B,GAAA,YAAAA,EAAW,WAAY,OAAQ2P,IAAA,YAAAA,GAAW,WAAY,MAGtD,IAAA36B,IAAQ,QAAatN,IAAQ,OAAW,CAElC,MAAA6N,EAAOyqB,EAAU,QAAQ,sBAAsB,EAC/CqC,EAAQ9sB,EAAK,MAAQo6B,GAAU,QAAQ,YACtC,OACH,EAAGp6B,EAAK,EAAIo6B,GAAU,QAAQ,WAAatN,EAC3C,EAAG9sB,EAAK,EAAIo6B,GAAU,QAAQ,UAAYtN,EAC1C,MAAOsN,GAAU,QAAQ,YAActN,EACvC,OAAQsN,GAAU,QAAQ,aAAetN,CAAA,CAEjD,CACA,OAAOlhC,EAAAyqC,GAAQ,UAAR,YAAAzqC,EAAiB,WAAW6T,GAAO,GAAK+jC,EAAiBrxC,GACpE,EACA,MAAO,IAAM,cAAAvG,EAAAyqC,GAAQ,UAAR,YAAAzqC,EAAiB,SAC9B,KAAM,MAAO5J,GAAM,CACf,OAAQA,EAAG,CACP,IAAK,SACSua,GAAA,CACN,OAAQ,OACR,OAAQ,IAAM,GACd,gBAAiB,IAAM,GACvB,eAAgB,IAAM,GACtB,QAAS,GACT,IAAK,SACL,QAAS,GACT,QAAS,GACT,SAAU,GACV,OAAQ,GACR,SAAU,OACV,SAAU,OACb,EACD,MACJ,IAAK,aACSA,GAAA,CACN,OAAQ,OACR,OAAQ,IAAM,GACd,gBAAiB,IAAM,GACvB,eAAgB,IAAM,GACtB,QAAS,GACT,IAAK,IACL,QAAS,GACT,QAAS,GACT,SAAU,GACV,OAAQ,GACR,SAAU,OACV,SAAU,OACb,EACD,MACJ,IAAK,YACSA,GAAA,CACN,OAAQ,OACR,OAAQ,IAAM,GACd,gBAAiB,IAAM,GACvB,eAAgB,IAAM,GACtB,QAAS,GACT,IAAK,IACL,QAAS,GACT,QAAS,GACT,SAAU,GACV,OAAQ,GACR,SAAU,OACV,SAAU,OACb,EACD,MACJ,IAAK,OACK,MAAAyhD,GAAO,OAAW,EAAI,EAC5B,MACJ,IAAK,QACD,MAAMb,GAAgB,EACtB,KACR,CACJ,EACA,SAAA5I,GACA,iBAA0B+J,GAAA,CACtB,UAAW7+C,KAAO6+C,EACTxG,GAAiBr4C,EAAM+jC,CAAe,CAEnD,CACJ,GAAI,CAACoS,GAAWkC,GAAkB1d,GAAW4jB,GAAQzhD,GAAW4gD,GAAiB3Z,EAAiB+Q,EAAQ,CAAC,EAC3G,KAAM,CAAC4K,GAAQC,EAAM,EAAIrF,IAAe,GAClC/uB,GAAgBt8B,cAAmBrY,GAAS,CACxC,MAACopB,EAAKtN,CAAG,EAAI9b,EACnB,GAAI8b,IAAQ,GAAI,CACRs8C,KAAiB,SACjBtL,GAAmB1qD,GAAiB,oBAAoBgnB,CAAG,EAAG,OAAW,EAAK,EACxE+yC,MAEV,MACJ,CACI2M,KAAW1/C,GAAO2/C,KAAWjtD,IAEtBowC,GAAA,CACP,KAAAlsD,EACA,MAAO,CAAE,EAAGopB,EAAK,EAAGtN,EAAK,MAAO,EAAG,OAAQ,CAAE,GAC9C,GAAM,GAAO,cAAc,EAC9BoiD,GAAS90C,EAAKtN,CAAG,IAClB,CAACs8C,GAAc+D,GAAO+B,GAAU4K,GAAQC,GAAQ7c,GAAYY,EAAkB,CAAC,EAC5E,CAAC5rB,GAAW8nC,EAAY,EAAI/xD,WAAe,EAAK,EAChDgyD,GAAwB7zD,SAAalC,GAAU0H,GAAQ,CACzDouD,GAAapuD,CAAG,GACjB,CAAC,CAAC,EACC24B,GAAkBl7B,cAAkB,IAAM,CAC5C4wD,GAAsB,QAAQ,EAAI,EAE9Btd,EAAc,UAAY,QAC1BA,EAAc,QAAQ,SAAW,GACjCA,EAAc,KAAK,SAAW,GAC9B2K,IAAe,QACJpK,GAAA,CACP,KAAM,CAACiB,EAAiBhhC,EAAW,EACnC,MAAO,CACH,EAAGghC,EACH,EAAGhhC,GACH,MAAO,EACP,OAAQ,CACZ,GACD,GAAM,GAAO,iBAAiB,CACrC,EACD,CAACA,GAAaw/B,EAAe2K,EAAYnJ,EAAiBjB,EAAU,CAAC,EAClEgd,GAAa7wD,cAAkB,IAAM,CACvC4wD,GAAsB,QAAQ,EAAK,CACvC,EAAG,CAAE,GACC,CAACE,GAAYC,EAAW,EAAIj0C,UAAc,IAAM,CAC9C,IAAAzM,EACE,MAAA2gD,GAAiBn0B,IAAA,YAAAA,GAAc,yBAA0Bx9B,GAAkB,EAC3E4xD,EAA2Bt+C,IAAQiwC,GAAuB,EAAI,GAChE,UAAO/uC,IAAc,SACrBxD,EAAI2D,GAAoBi9C,EAA2Bp9C,OAElD,CACD,IAAIq9C,EAAM,EACV,MAAMC,EAAY,KAAK,IAAIF,EAA0B,EAAE,EACvD,QAAS5nE,EAAI,EAAGA,EAAI8nE,EAAW9nE,IAC3B6nE,GAAOr9C,GAAUxqB,CAAC,EAEhB6nE,EAAA,KAAK,MAAMA,EAAMC,CAAS,EAChC9gD,EAAI2D,GAAoBi9C,EAA2BC,CACvD,CACK7gD,GAAA2gD,EACC,MAAA/gD,EAAI2zC,GAAY,OAAO,CAAC/H,EAAK7yD,IAAMA,EAAE,MAAQ6yD,EAAK,CAAC,EAAImV,EAG7D,MAAO,CAAC,GAAG,KAAK,IAAI,IAAQ/gD,CAAC,CAAC,KAAM,GAAG,KAAK,IAAI,IAAQI,CAAC,CAAC,IAAI,GAC/D,CAACuzC,GAAa/mB,IAAA,YAAAA,GAAc,uBAAwBhpB,GAAWlB,GAAMiwC,GAAsB5uC,EAAiB,CAAC,EAC1Go9C,GAAWt0C,UAAc,IACpB/B,GAAawoC,EAAW,EAChC,CAACA,EAAW,CAAC,EAChB,OAAQr+D,EAAM,cAAcg2B,GAAa,SAAU,CAAE,MAAOqoC,EAAY,EACpEr+D,EAAM,cAAcmzD,GAAqB,CAAE,MAAO+Y,GAAU,UAAA/mE,GAAsB,QAAS0G,GAAS+/D,GAAY,SAAUr4D,GAAUs4D,EAAY,EAC5I7rE,EAAM,cAAc2pD,GAAgB,CAAE,WAAAnZ,GAAwB,cAAA6F,GAA8B,aAAAsB,GAA4B,aAAAxB,GAA4B,aAAAC,GAA4B,oBAAA3S,GAA0C,YAAAvG,GAA0B,kBAAAsa,GAAsC,YAAAqM,GAA0B,YAAA3M,EAA0B,YAAAK,GAA0B,WAAAmL,GAAwB,YAAAgG,GAA0B,YAAAC,GAA0B,yBAAAzC,GAAoD,aAAAG,GAA4B,kBAAAC,GAAsC,cAAA7O,GAA8B,cAAAC,GAA8B,UAAAvyC,GAAsB,aAAAujC,GAA4B,gBAAAsN,GAAkC,aAAc21B,GAAY,UAAA90B,EAAsB,cAAAX,GAA8B,MAAOmoB,GAAa,YAAAxwC,GAA0B,YAAAe,GAA0B,oBAAqBkpC,GAAc,OAAQ,UAAA/gB,GAAsB,QAAS2nB,GAAa,aAAAnW,GAA4B,WAAA3e,GAAwB,oBAAAgZ,EAA0C,SAAAvb,GAAoB,aAAA3D,GAA4B,cAAe2nC,GAAsB,YAAazb,EAAiB,mBAAoBA,IAAoB,EAAG,eAAgBlM,GAAuB,eAAA9sB,GAAgC,eAAAC,GAAgC,eAAA+yB,EAAgC,WAAAK,GAAwB,cAAAC,GAA8B,iBAAAnmB,GAAoC,qBAAA1M,GAA4C,gBAAiBgpC,GAAwB,aAAA5xC,GAA4B,UAAAkV,GAAsB,kBAAmB+E,GAAeha,GAAoB,EAAG,mBAAoBhB,IAAsBgwC,KAAwB1B,IAAA,YAAAA,GAAoB,UAAW,GAAO,EAAI,GAAI,aAAc0B,GAAsB,eAAApb,GAAgC,kBAAAE,GAAsC,oBAAAD,GAA0C,cAAAnL,GAA8B,cAAeqvB,GAAmB,YAAatoB,GAAiB,kBAAmB8nB,GAAwB,uBAAwBC,GAA6B,cAAenjB,GAAmB,WAAWgW,GAAA,YAAAA,EAAY,cAAe,GAAM,YAAa1b,GAAiB,UAAA10B,GAAsB,QAAS6xC,GAAW,YAAAlkB,GAA0B,UAAAC,GAAsB,eAAAc,GAAgC,OAAAC,GAAgB,uBAAA0S,GAAgD,uBAAwBoc,GAA4B,WAAA5d,GAAwB,UAAA75B,GAAsB,cAAAo8B,EAA8B,YAAAlB,EAA0B,oBAAAE,EAA0C,KAAM+U,GAAa,UAAAtY,GAAsB,UAAW4H,EAAe,WAAY0J,GAAc,GAAI,WAAYA,GAAc,GAAI,eAAgBqT,GAAuB,QAAA1oB,GAAkB,gBAAAjsB,GAAkC,gBAAA+b,GAAkC,EAC5uF64B,GACA/0C,IAAY,QAAcr2B,EAAM,cAAcmsE,EAAM,SAAU,CAAE,SAAU,IAAK,EAC3EnsE,gBAAoBm4D,GAAuB,CAAE,GAAG9hC,EAAS,aAAA0nC,EAA4B,MAAOlE,EAAa,GAAI0O,GAAW,gBAAA/xC,GAAkC,WAAWmhB,IAAA,YAAAA,GAAc,aAAc,GAAO,uBAAyB,OAAW,cAAAokB,GAA8B,oBAAA7C,EAA0C,gBAAAgP,GAAkC,sBAAA/O,EAA8C,eAAAlM,GAAgC,CAAC,CAAE,EACvb,EAMamf,GAAaxsE,EAAM,WAAW+4D,EAAc,EC9pFnD0T,GAAqB,GAC3B,SAASC,GAAqB,EAAG,CAC7B,KAAM,CAAE,KAAA7pE,EAAM,KAAM8pE,EAAU,KAAMC,EAAU,OAAAryB,EAAQ,MAAAtpB,CAAO,EAAG,EAC1D,CAAE,MAAAhlB,EAAO,OAAA0H,EAAQ,EAAG4rB,EAAO,EAAGC,CAAO,EAAG+a,EACxColB,EAAW98D,EAAK,SAAW4pE,GAC3BI,EAAc,KAAK,MAAMtyB,EAAO,EAAI5mC,EAAS,CAAC,EAC9C+0B,EAAgBvvB,GAAewmD,EAAUhsD,EAAQsd,EAAM,mBAAmB,EAC1EvY,EAAOG,GAAuBhW,EAAK,cAAgB,SAAU08B,EAAOtzB,EAAOglB,EAAM,sBAAuByX,CAAa,EACrHlvB,EAAKf,GAAYC,EAAMm0D,EAAankC,CAAa,EACjDokC,EAAkBvzD,GAAgBgmB,EAAQotC,EAAUntC,EAAQotC,EAAUpzD,CAAE,EAC9E,OAAOrW,GAAsBN,CAAI,GAAKiqE,CAC1C,CACO,MAAMC,GAAsB,CAC/B,uBAAwBtqE,GAAK,eAAA2V,EAAA3V,EAAE,OAAF,YAAA2V,EAAQ,aAAc,SACnD,KAAM/V,EAAa,QACnB,WAAY,GACZ,SAAU,GACV,mBAAoB,GACpB,QAAS,IAAM,GACf,KAAMmB,GAAKwpE,GAAYxpE,EAAGA,EAAE,KAAK,KAAML,GAAsBK,EAAE,IAAI,EAAGA,EAAE,KAAK,SAAWipE,GAAoBjpE,EAAE,KAAK,sBAAwB,GAAI,EAC/I,SAAUf,IAAM,CACZ,GAAGA,EACH,KAAM,EACd,GACI,SAAU,GAAK,CACPiqE,GAAqB,CAAC,GACtB,EAAE,eAAc,CAEvB,EACD,QAAS,GAAK,CACV,GAAIA,GAAqB,CAAC,EACtB,MAAO,CACH,GAAG,EAAE,KACL,KAAMvZ,GAAc,EAAE,KAAK,IAAI,CAC/C,CAGK,EACD,QAAS,CAAC8Z,EAASpqE,IAAS,CACxB,IAAI+6C,EAASz7C,GACb,OAAI8qE,EAAQ,YAAa,IAAK,OAC1BrvB,EAAS,GAEJqvB,EAAQ,YAAa,IAAK,QAC/BrvB,EAAS,GAEJqvB,EAAQ,YAAa,IAAK,kBAC/BrvB,EAASx7C,IAENw7C,IAAW/6C,EAAK,KACjB,OACA,CACE,GAAGA,EACH,KAAM+6C,CACtB,CACK,CACL,EACA,SAASovB,GAAY5iE,EAAMqnB,EAAMy7C,EAAS9zD,EAAS+zD,EAAsB,CACrE,GAAI,CAACD,GAAWz7C,IAAStvB,GACrB,OAEJ,KAAM,CAAE,IAAA2tB,EAAK,YAAAoY,EAAa,MAAAjX,EAAO,KAAAzE,EAAM,YAAAwb,EAAa,OAAAG,EAAQ,OAAAC,EAAQ,KAAM,CAAE,aAAA1W,CAAc,GAAMtnB,EAC1F,CAAE,EAAAlG,EAAG,EAAAsG,EAAG,MAAO2gB,EAAG,OAAQI,CAAG,EAAGiB,EAEtC,IAAI4gD,EAAqB,GACzB,GAAID,EAAuB,EAAG,CAC1B,IAAIjjD,EAAQgjD,EAAU,EAAIC,EAAuBA,EAAuBjlC,EAAc,GAItF,GAHIzW,IAAStvB,KACT+nB,GAASge,GAEThe,IAAU,EACV,OAEAA,EAAQ,IACRkjD,EAAqB,GACrBt9C,EAAI,YAAc5F,EAEzB,CACDqe,GAAazY,EAAKmB,EAAOQ,EAAMvtB,EAAGsG,EAAG2gB,EAAGI,EAAGyc,EAAaG,EAAQC,EAAQhvB,EAASsY,CAAY,EACzF07C,IACAt9C,EAAI,YAAc,EAE1B,CCrFO,MAAMu9C,GAAyC5mE,GAAO,KAAK,EAAE,CAClE,KAAM,4BACN,MAAO,eACP,UAAW,EACb,CAAC,ECHK6mE,GAAuBx/D,GAAK,CAC9B,KAAM,CAAE,QAAAy/D,CAAS,EAAGz/D,EACpB,OAAQ1N,gBAAoBitE,GAA2B,KACnDE,EAAQ,IAAI,CAAC9pE,EAAG,IAAOrD,EAAmB,cAAC,MAAO,CAAE,IAAK,EAAG,UAAW,YAAY,EAAIqD,CAAC,CAAE,EAC1FrD,EAAmB,cAAC,WAAY,CAAE,UAAW,YAAa,UAAW,EAAM,EAAC,CACpF,ECDaotE,GAAqB,CAC9B,uBAAwB/qE,GAAK8Y,GAAgC9Y,EAAE,IAAI,EACnE,KAAMJ,EAAa,OACnB,WAAY,GACZ,SAAU,GACV,mBAAoB,GACpB,QAAS,CAACytB,EAAKjtB,EAAM4e,IAAM5e,EAAK,KAAK,OAAO,CAACk0D,EAAKtlC,IAAS3B,EAAI,YAAY2B,CAAI,EAAE,MAAQslC,EAAM,GAAI,CAAC,EAAI,EAAIt1C,EAAE,sBAAwB,EACtI,KAAMje,GAAKiqE,GAAYjqE,EAAGA,EAAE,KAAK,IAAI,EACrC,cAAe,IAAMsK,GAAK,CACtB,KAAM,CAAE,MAAAvH,CAAO,EAAGuH,EAClB,OAAO1N,gBAAoBktE,GAAsB,CAAE,QAAS/mE,EAAM,IAAI,CAAE,CAC3E,EACD,QAAS,MACb,EACMmnE,GAAa,EACnB,SAASD,GAAYrjE,EAAMqnB,EAAM,CAC7B,KAAM,CAAE,KAAAjF,EAAM,MAAAyE,EAAO,IAAAnB,EAAK,YAAAkY,CAAW,EAAK59B,EACpC,CAAE,EAAAlG,EAAG,EAAAsG,EAAG,MAAO2gB,EAAG,OAAQI,CAAG,EAAGiB,EAChCmhD,EAAe,GACfC,EAAY,EACZC,EAAeH,GACrB,IAAII,EAAU5pE,EAAI+sB,EAAM,sBACxB,MAAM88C,EAAc,GACpB,UAAW3yD,KAAKqW,EAAM,CAClB,GAAIq8C,EAAU5pE,EAAIinB,EACd,MACJ,MAAM8gB,EAAYhc,GAAkB7U,EAAG0U,EAAKmB,EAAM,YAAY,EAAE,MAChE88C,EAAY,KAAK,CACb,EAAGD,EACH,MAAO7hC,CACnB,CAAS,EACD6hC,GAAW7hC,EAAY2hC,EAAY,EAAIC,CAC1C,CACD/9C,EAAI,UAAS,EACb,UAAWk+C,KAAYD,EACnBh7C,GAAYjD,EAAKk+C,EAAS,EAAGxjE,GAAK+gB,EAAIoiD,GAAgB,EAAGK,EAAS,MAAQJ,EAAY,EAAGD,EAAc18C,EAAM,gBAAkB08C,EAAe,CAAC,EAEnJ79C,EAAI,UAAYkY,EAAc/W,EAAM,iBAAmBA,EAAM,SAC7DnB,EAAI,KAAI,EACR,SAAW,CAACvrB,EAAGypE,CAAQ,IAAKD,EAAY,QAAO,EAC3Cj+C,EAAI,UAAS,EACbA,EAAI,UAAYmB,EAAM,WACtBnB,EAAI,SAAS2B,EAAKltB,CAAC,EAAGypE,EAAS,EAAIJ,EAAWpjE,EAAI+gB,EAAI,EAAI6E,GAAoBN,EAAKmB,CAAK,CAAC,CAEjG,CChDA,MAAMg9C,GAA2CxnE,GAAO,KAAK,EAAE,CAC7D,KAAM,8BACN,MAAO,cACP,UAAW,EACb,CAAC,EACKynE,GAAyBpgE,GAAK,CAClC,KAAM,CACJ,WAAAqgE,CACD,EAAGrgE,EACJ,OAAO1N,EAAmB,cAAC6tE,GAA6B,KAAME,EAAW,IAAI,CAACxkD,EAAG,IAAMvpB,EAAmB,cAAC,MAAO,CAChH,IAAK,EACL,UAAW,YACZ,EAAEupB,EAAE,MAAQ,QAAavpB,gBAAoB,MAAO,CACnD,IAAKupB,EAAE,GACX,CAAG,EAAGvpB,EAAmB,cAAC,MAAO,KAAMupB,EAAE,IAAI,CAAC,CAAC,CAAC,CAChD,ECXaykD,GAAwB,CACjC,uBAAwB3rE,GAAK8Y,GAAgC9Y,EAAE,KAAK,IAAIknB,GAAKA,EAAE,IAAI,CAAC,EACpF,KAAMtnB,EAAa,UACnB,WAAY,GACZ,SAAU,GACV,mBAAoB,GACpB,QAAS,CAACytB,EAAKjtB,EAAM4e,IAAM5e,EAAK,KAAK,OAAO,CAACk0D,EAAKtlC,IAAS3B,EAAI,YAAY2B,EAAK,IAAI,EAAE,MAAQslC,EAAM,IAAMtlC,EAAK,MAAQ,OAAY,GAAK,GAAI,CAAC,EACzI,EAAIhQ,EAAE,sBACN,EACJ,KAAMje,GAAK6qE,GAAkB7qE,EAAGA,EAAE,KAAK,IAAI,EAC3C,cAAe,IAAMsK,GAAK,CACtB,KAAM,CAAE,MAAAvH,CAAO,EAAGuH,EAClB,OAAO1N,gBAAoB8tE,GAAwB,CAAE,WAAY3nE,EAAM,IAAI,CAAE,CAChF,EACD,QAAS,MACb,EACMmnE,GAAa,EACbY,GAAiB,GACvB,SAASC,GAA2BvnC,EAAQwnC,EAAQ76D,EAAQ86D,EAAU,CAClE,MAAM3/B,EAAM,KAAK,KAAK,OAAO,gBAAgB,EACvC4/B,EAAa,EACbC,EAAeh7D,EAAS+6D,EAAa,EACrCE,EAAc,EACdC,EAAcl7D,EAASm7B,EACvBggC,EAAYL,EAAWC,EACvBK,EAAcN,EAAW,EACzBO,GAAcD,EAAcL,EAAa,GAAK5/B,EAC9CltC,EAAM,GAAGolC,CAAM,IAAIwnC,CAAM,IAAI1/B,CAAG,IAAIn7B,CAAM,GAChD,GAAI26D,GAAe1sE,CAAG,IAAM,OACxB,MAAO,CACH,GAAI0sE,GAAe1sE,CAAG,EACtB,OAAQitE,EACR,MAAOG,EACP,YAAaJ,EAAc9/B,EAC3B,UAAWggC,EAAYhgC,EACvB,QAAS4/B,EAAa5/B,EACtB,IAAAA,CACZ,EAEI,MAAM/W,EAAS,SAAS,cAAc,QAAQ,EACxCjI,EAAMiI,EAAO,WAAW,IAAI,EAClC,OAAIjI,IAAQ,KACD,MACXiI,EAAO,MAAQi3C,EACfj3C,EAAO,OAAS82C,EAChB/+C,EAAI,MAAMgf,EAAKA,CAAG,EAClBw/B,GAAe1sE,CAAG,EAAIm2B,EACtBjI,EAAI,UAAS,EACbiD,GAAYjD,EAAK4+C,EAAYA,EAAYK,EAAaJ,EAAcF,CAAQ,EAC5E3+C,EAAI,YAAc,wBAClBA,EAAI,WAAa,EACjBA,EAAI,UAAYkX,EAChBlX,EAAI,KAAI,EACRA,EAAI,YAAc,wBAClBA,EAAI,cAAgB,EACpBA,EAAI,WAAa,EACjBA,EAAI,UAAYkX,EAChBlX,EAAI,KAAI,EACRA,EAAI,cAAgB,EACpBA,EAAI,WAAa,EACjBA,EAAI,WAAa,EACjBA,EAAI,UAAS,EACbiD,GAAYjD,EAAK4+C,EAAa,GAAKA,EAAa,GAAKK,EAAaJ,EAAcF,CAAQ,EACxF3+C,EAAI,YAAc0+C,EAClB1+C,EAAI,UAAY,EAChBA,EAAI,OAAM,EACH,CACH,GAAIiI,EACJ,OAAQ82C,EACR,MAAOG,EACP,UAAWF,EAAYhgC,EACvB,YAAa2/B,EAAW3/B,EACxB,QAAS4/B,EAAa5/B,EACtB,IAAAA,CACR,EACA,CACA,SAASu/B,GAAkBjkE,EAAMqnB,EAAM,CACnC,KAAM,CAAE,KAAAjF,EAAM,MAAAyE,EAAO,IAAAnB,EAAK,YAAAsU,EAAa,IAAAnY,EAAK,IAAAtN,CAAK,EAAGvU,EAC9C,CAAE,EAAAlG,EAAG,MAAOinB,CAAC,EAAKqB,EAClBwD,EAAOiB,EAAM,aACbqB,EAAWT,GAAY/B,EAAKE,CAAI,EAChCzE,EAAI,KAAK,IAAIiB,EAAK,OAAQ,KAAK,IAAI,GAAI,KAAK,KAAK8F,EAAWrB,EAAM,UAAU,EAAI,CAAC,CAAC,EAClFzmB,EAAI,KAAK,MAAMgiB,EAAK,GAAKA,EAAK,OAASjB,GAAK,CAAC,EAC7CoiD,EAAepiD,EAAI,GACnBqiD,EAAY,EACZC,EAAeH,GACrB,IAAII,EAAU5pE,EAAI+sB,EAAM,sBACxB,MAAMw9C,EAAWx9C,EAAM,gBAAkB,EACnCg+C,EAAUV,GAA2Bt9C,EAAM,OAAQA,EAAM,gBAAiB1F,EAAGkjD,CAAQ,EACrFV,EAAc,GACpB,UAAW/hE,KAAMylB,EAAM,CACnB,GAAIq8C,EAAU5pE,EAAIinB,EACd,MAEJ,MAAM8gB,EADchc,GAAkBjkB,EAAG,KAAM8jB,EAAKE,CAAI,EAC1B,MAC9B,IAAIk/C,EAAW,EACXljE,EAAG,MAAQ,QACCo4B,EAAY,eAAep4B,EAAG,IAAKigB,EAAKtN,CAAG,IAC3C,SACRuwD,EAAWvB,EAAe,EAAI,GAGtC,MAAMwB,EAAcljC,EAAYijC,EAAWtB,EAAY,EACvDG,EAAY,KAAK,CACb,EAAGD,EACH,MAAOqB,CACnB,CAAS,EACDrB,GAAWqB,EAActB,CAC5B,CACD,GAAIoB,IAAY,KAAM,CAClB,KAAM,CAAE,GAAAjjE,EAAI,OAAA2H,EAAQ,YAAAi7D,EAAa,UAAAE,EAAW,MAAA7iE,EAAO,IAAA6iC,EAAK,QAAAsgC,CAAS,EAAGH,EAC9DI,EAAiBP,EAAYhgC,EAC7BwgC,EAAeF,EAAUtgC,EAC/B,UAAWk/B,KAAYD,EAAa,CAChC,MAAMwB,GAAK,KAAK,MAAMvB,EAAS,CAAC,EAC1BwB,EAAK,KAAK,MAAMxB,EAAS,KAAK,EAC9ByB,GAAmBD,GAAMH,EAAiBC,GAAgB,EAChEx/C,EAAI,sBAAwB,GAC5BA,EAAI,UAAU9jB,EAAI,EAAG,EAAG8iE,EAAWn7D,EAAQ47D,GAAKD,EAAc9kE,EAAG6kE,EAAgB9jD,CAAC,EAC9EkkD,GAAmB,GACnB3/C,EAAI,UAAU9jB,EAAI8iE,EAAW,EAAGF,EAAaj7D,EAAQ47D,IAAMF,EAAiBC,GAAe9kE,EAAGilE,GAAkBlkD,CAAC,EACrHuE,EAAI,UAAU9jB,EAAIC,EAAQ6iE,EAAW,EAAGA,EAAWn7D,EAAQ47D,GAAKC,GAAMH,EAAiBC,GAAe9kE,EAAG6kE,EAAgB9jD,CAAC,EAC1HuE,EAAI,sBAAwB,EAC/B,CACJ,CACDA,EAAI,UAAS,EACb,SAAW,CAACvrB,EAAGypE,CAAQ,IAAKD,EAAY,QAAO,EAAI,CAC/C,MAAMpkD,EAAI8H,EAAKltB,CAAC,EAChB,IAAIw6B,EAAQivC,EAAS,EAAIJ,EACzB,GAAIjkD,EAAE,MAAQ,OAAW,CACrB,MAAM3Z,EAAMo0B,EAAY,eAAeza,EAAE,IAAKsC,EAAKtN,CAAG,EACtD,GAAI3O,IAAQ,OAAW,CACnB,MAAM0/D,EAAU/B,EAAe,EAC/B,IAAIgC,EAAO,EACPC,EAAO,EACPC,EAAW7/D,EAAI,MACf8/D,EAAY9/D,EAAI,OAChB6/D,EAAWC,GAEXH,IAASE,EAAWC,GAAa,EACjCD,EAAWC,GAENA,EAAYD,IAEjBD,IAASE,EAAYD,GAAY,EACjCC,EAAYD,GAEhB//C,EAAI,UAAS,EACbiD,GAAYjD,EAAKiP,EAAOv0B,EAAI+gB,EAAI,EAAImkD,EAAU,EAAGA,EAASA,EAASz+C,EAAM,gBAAkB,CAAC,EAC5FnB,EAAI,KAAI,EACRA,EAAI,KAAI,EACRA,EAAI,UAAU9f,EAAK2/D,EAAMC,EAAMC,EAAUC,EAAW/wC,EAAOv0B,EAAI+gB,EAAI,EAAImkD,EAAU,EAAGA,EAASA,CAAO,EACpG5/C,EAAI,QAAO,EACXiP,GAAS2wC,EAAU,CACtB,CACJ,CACD5/C,EAAI,UAAS,EACbA,EAAI,UAAYmB,EAAM,WACtBnB,EAAI,SAASnG,EAAE,KAAMoV,EAAOv0B,EAAI+gB,EAAI,EAAI6E,GAAoBN,EAAKmB,CAAK,CAAC,CAC1E,CACL,CCjKO,MAAM8+C,GAAoB,CAC7B,uBAAwBttE,GAAKA,EAAE,KAAK,KAAK,IAAI,EAC7C,KAAMJ,EAAa,MACnB,WAAY,GACZ,SAAU,GACV,mBAAoB,GACpB,KAAMmB,GAAKwsE,GAAUxsE,EAAGA,EAAE,KAAK,aAAeA,EAAE,KAAK,KAAMA,EAAE,KAAK,UAAYA,EAAE,MAAM,gBAAkB,EAAGA,EAAE,KAAK,YAAY,EAC9H,QAAS,CAACysE,EAAMptE,IAASA,EAAK,KAAK,OAAS,GAC5C,SAAUJ,IAAM,CACZ,GAAGA,EACH,KAAM,CAAE,CAChB,GACI,cAAe,IAAMqL,GAAK,CACtB,KAAM,CAAE,MAAAvH,EAAO,kBAAAszD,EAAmB,oBAAAP,CAAmB,EAAKxrD,EACpDoiE,EAAc5W,GAAuB19C,GAC3C,OAAQxb,EAAmB,cAAC8vE,EAAa,CAAE,KAAM3pE,EAAM,KAAM,SAAUA,EAAM,WAAa,GAAM,SAAUszD,EAAmB,SAAUsW,GAAY,CAC3ItW,EAAkB,CACd,GAAGtzD,EACH,KAAM,CAAC4pE,CAAQ,CACnC,CAAiB,CACJ,EAAE,CACV,EACD,QAAS,CAAClD,EAASpqE,IAAS,CACxBoqE,EAAUA,EAAQ,OAElB,MAAMmD,EADYnD,EAAQ,MAAM,GAAG,EAE9B,IAAI5hD,GAAK,CACV,GAAI,CACA,WAAI,IAAIA,CAAC,EACFA,CACV,MACK,CACF,MACH,CACb,CAAS,EACI,OAAOnnB,GAAKA,IAAM,MAAS,EAChC,GAAI,EAAAksE,EAAK,SAAWvtE,EAAK,KAAK,QAAUutE,EAAK,MAAM,CAACl0D,EAAG3X,IAAM2X,IAAMrZ,EAAK,KAAK0B,CAAC,CAAC,GAE/E,MAAO,CACH,GAAG1B,EACH,KAAMutE,CAClB,CACK,CACL,EACM1C,GAAa,EACZ,SAASsC,GAAU5lE,EAAMqnB,EAAMg9C,EAAU/8C,EAAc,CAC1D,KAAM,CAAE,KAAAlF,EAAM,IAAAP,EAAK,IAAAtN,EAAK,MAAAsS,EAAO,IAAAnB,EAAK,YAAAsU,CAAa,EAAGh6B,EAC9C,CAAE,EAAAlG,EAAG,EAAAsG,EAAG,OAAQ+gB,EAAG,MAAOJ,CAAG,EAAGqB,EAChC6jD,EAAY9kD,EAAI0F,EAAM,oBAAsB,EAC5C3d,EAAS,GACf,IAAIulB,EAAa,EAEjB,QAASl0B,EAAQ,EAAGA,EAAQ8sB,EAAK,OAAQ9sB,IAAS,CAC9C,MAAMJ,EAAIktB,EAAK9sB,CAAK,EACpB,GAAIJ,EAAE,SAAW,EACb,SACJ,MAAMyL,EAAMo0B,EAAY,eAAe7/B,EAAG0nB,EAAKtN,CAAG,EAClD,GAAI3O,IAAQ,OAAW,CACnBsD,EAAO3O,CAAK,EAAIqL,EAChB,MAAMk/D,EAAWl/D,EAAI,OAASqgE,EAAYrgE,EAAI,QAC9C6oB,GAAcq2C,EAAWxB,EAC5B,CACJ,CACD,GAAI70C,IAAe,EACf,OACJA,GAAc60C,GACd,IAAI3uC,EAAQ76B,EAAI+sB,EAAM,sBAClBS,IAAiB,QACjBqN,EAAQ,KAAK,MAAM76B,EAAIinB,EAAI8F,EAAM,sBAAwB4H,CAAU,EAC9DnH,IAAiB,WACtBqN,EAAQ,KAAK,MAAM76B,EAAIinB,EAAI,EAAI0N,EAAa,CAAC,GACjD,UAAW7oB,KAAOsD,EAAQ,CACtB,GAAItD,IAAQ,OACR,SACJ,MAAMk/D,EAAWl/D,EAAI,OAASqgE,EAAYrgE,EAAI,QAC1Cy+D,EAAW,IACX3+C,EAAI,UAAS,EACbiD,GAAYjD,EAAKiP,EAAOv0B,EAAIymB,EAAM,oBAAqBi+C,EAAUmB,EAAW5B,CAAQ,EACpF3+C,EAAI,KAAI,EACRA,EAAI,KAAI,GAEZA,EAAI,UAAU9f,EAAK+uB,EAAOv0B,EAAIymB,EAAM,oBAAqBi+C,EAAUmB,CAAS,EACxE5B,EAAW,GACX3+C,EAAI,QAAO,EAEfiP,GAASmwC,EAAWxB,EACvB,CACL,CCxFA,SAAS4C,GAAgBpsE,EAAGsG,EAAG,CAC3B,IAAI+lE,EAAOrsE,EAAI,MAAQsG,EAAI,OAE3B,OAAA+lE,GAAQA,GAAQ,GAChBA,GAAQA,GAAQ,GAChBA,GAAQA,GAAQ,EAERA,EAAO,WAAc,CACjC,CACO,MAAMC,GAAsB,CAC/B,uBAAwB,IAAM,GAC9B,KAAMnuE,EAAa,QACnB,WAAY,GACZ,SAAU,GACV,mBAAoB,GACpB,QAAS,IAAM,IACf,KAAMmB,GAAK,CACP,KAAM,CAAE,KAAAX,EAAM,IAAAopB,EAAK,IAAAtN,EAAK,IAAAmR,EAAK,KAAAtD,EAAM,MAAAyE,CAAO,EAAGztB,EAC7C,GAAIX,EAAK,gBAAkB,QAAaA,EAAK,gBAAkB,EAC3D,OAEJ,IAAIoJ,EAAQpJ,EAAK,cACbA,EAAK,2BAA6B,QAAaA,EAAK,yBAA2B,IAC/EoJ,GAAS,KAAK,MAAMqkE,GAAgBrkD,EAAKtN,CAAG,EAAI9b,EAAK,wBAAwB,GAEjF,MAAM4tE,EAAOx/C,EAAM,sBACfhlB,EAAQwkE,EAAO,GAAKjkD,EAAK,QACzBvgB,EAAQugB,EAAK,MAAQikD,EAAO,EAAI,GAEpC,MAAMC,EAAa7tE,EAAK,gBAAkB,KAAK,IAAI,GAAI2pB,EAAK,OAAS,EAAIyE,EAAM,mBAAmB,EAClG8B,GAAYjD,EAAKtD,EAAK,EAAIikD,EAAMjkD,EAAK,GAAKA,EAAK,OAASkkD,GAAc,EAAGzkE,EAAOykE,EAAYz/C,EAAM,gBAAkB,CAAC,EACrHnB,EAAI,UAAY7F,GAAUgH,EAAM,SAAU,EAAG,EAC7CnB,EAAI,KAAI,CACX,EACD,QAAS,MACb,ECtCM01B,GAAoB,IAAM13C,GAAKA,EAAE,YAC1B6iE,GAA0ClqE,GAAO,KAAK,EAAE,CACnE,KAAM,6BACN,MAAO,eACP,UAAW,GACX,KAAM,CACJ,aAAc,CAAC++C,GAAM,EAAE,IAAI,CAC5B,CACH,CAAC,ECJYorB,GAAwB9iE,GAAK,CACtC,KAAM,CAAE,MAAAvH,EAAO,SAAA2iB,EAAU,cAAA2nD,EAAe,WAAA1oD,EAAY,WAAAo5C,EAAY,SAAA9T,EAAU,mBAAAxkC,CAAoB,EAAGnb,EAC3FuY,EAAW9f,EAAM,KACjBuqE,EAAWvqE,EAAM,WAAa,GAC9B,CAACwqE,EAAUC,CAAW,EAAIl3D,EAAc,SAACuM,IAAa,IAAMwqD,CAAa,EACzE90D,EAAcb,cAAkB,IAAM,CACxC81D,EAAYxiE,GAAK,CAACA,CAAC,CACtB,EAAE,CAAE,GACCyiE,EAAa5qD,EAAW,WAAa,GAC3C,OAAI0qD,EACQ3wE,gBAAoBuwE,GAA4B,CAAE,YAAapP,EAAW,MAAQ,EAAI,EAC1FnhE,gBAAoByoB,GAAc,CAAE,UAAW,GAAM,UAAW,GAAO,mBAAoBI,EAAoB,MAAO5C,EAAU,UAAW7X,GAAK,CACpIA,EAAE,MAAQ,SACVA,EAAE,gBAAe,CACzC,EAAmB,SAAU0a,EAAU,EAC3B9oB,gBAAoB,MAAO,CAAE,UAAW,qCAAqC6wE,CAAU,GAAI,QAAS,IAAMxjB,EAASlnD,CAAK,CAAG,EACvHnG,gBAAoBuZ,GAAW,IAAI,CAAC,CAAC,EAEzCvZ,EAAmB,cAACuwE,GAA4B,CAAE,YAAapP,EAAW,KAAO,EACrFnhE,EAAmB,cAAC4nB,GAAa,CAAE,SAAU3B,EAAU,WAAY8B,EAAY,EAC/E,CAAC2oD,GAAa1wE,gBAAoB2gD,WAAgB,KAC9C3gD,gBAAoB,MAAO,CAAE,UAAW,QAAQ,CAAE,EAClDA,gBAAoB,MAAO,CAAE,UAAW,gCAAgC6wE,CAAU,GAAI,QAASl1D,CAAa,EACxG3b,gBAAoBqZ,GAAY,IAAI,CAAC,CAAC,EAC9CrZ,EAAmB,cAAC,WAAY,CAAE,UAAW,iCAAkC,UAAW,EAAM,EAAC,CACzG,ECzBa8wE,GAAuB,CAChC,uBAAwBzuE,GAAK,eAAA2V,EAAA3V,EAAE,OAAF,YAAA2V,EAAQ,aAAc,IACnD,KAAM/V,EAAa,SACnB,WAAY,GACZ,mBAAoB,GACpB,SAAUgvB,GACV,QAAS,CAACvB,EAAKjtB,EAAM4e,IAAM,CACvB,MAAM0vD,EAAYtuE,EAAK,KAAK,MAAM;AAAA,CAAI,EAAE,CAAC,EACzC,OAAOitB,EAAI,YAAYqhD,CAAS,EAAE,MAAQ,EAAI1vD,EAAE,qBACnD,EACD,KAAMje,GAAKmuB,GAAanuB,EAAGA,EAAE,KAAK,KAAMA,EAAE,KAAK,YAAY,EAC3D,SAAUf,IAAM,CACZ,GAAGA,EACH,KAAM,EACd,GACI,cAAe,IAAMqL,GAAK,CACtB,KAAM,CAAE,SAAAob,EAAU,MAAA3iB,EAAO,OAAA8B,EAAQ,kBAAAwxD,EAAmB,sBAAAN,EAAuB,cAAAsX,EAAe,mBAAA5nD,CAAoB,EAAGnb,EACjH,OAAQ1N,EAAmB,cAACwwE,GAAuB,CAAE,SAAU/W,EAAmB,WAAYxxD,EAAQ,MAAO9B,EAAO,mBAAoB0iB,EAAoB,SAAUza,GAAK0a,EAAS,CAC5K,GAAG3iB,EACH,KAAMiI,EAAE,OAAO,KAClB,GAAG,cAAeqiE,EAAe,WAAYtX,CAAuB,EAC5E,EACD,QAAS,CAAC0T,EAASpqE,IAAUoqE,IAAYpqE,EAAK,KAAO,OAAY,CAAE,GAAGA,EAAM,KAAMoqE,CAAO,CAC7F,ECzBamE,GAAqB,CAC9B,uBAAwB3uE,GAAKA,EAAE,IAAI,SAAU,EAC7C,KAAMM,GAAkB,OACxB,WAAY,GACZ,mBAAoB,GACpB,SAAUsuE,GACV,QAAS,IAAM,GACf,KAAM7tE,GAAK8tE,GAAkB9tE,EAAGA,EAAE,KAAK,IAAKA,EAAE,KAAK,QAASA,EAAE,KAAK,WAAYA,EAAE,KAAK,WAAYA,EAAE,KAAK,aAAa,EACtH,QAAS,GAAK,CACV,KAAM,CAAE,OAAA+2C,EAAQ,KAAA13C,EAAM,KAAMqB,EAAG,KAAMsG,CAAG,EAAG,EACrC,CAAE,MAAAyB,EAAO,OAAA0H,CAAQ,EAAG4mC,EACpBg3B,EAAU1uE,EAAK,WAAa,GAAKoJ,EAAQ,GAAK,EAAIA,EAAQ,EAC1Du8B,EAAU70B,EAAS,EACzB,GAAI,KAAK,IAAIzP,EAAIqtE,CAAO,GAAK,IAAM,KAAK,IAAI/mE,EAAIg+B,CAAO,GAAK,GACxD,MAAO,CACH,GAAG3lC,EACH,QAAS,CAACA,EAAK,OAC/B,CAGK,EACD,QAAS,MACb,EACA,SAASwuE,GAAkBjnE,EAAM0mB,EAAU,CACvC,KAAM,CAAE,IAAAhB,EAAK,MAAAmB,CAAO,EAAG7mB,EACjBonE,EAAUvgD,EAAM,eAChBjsB,EAAS8rB,GAAY,GAC3B,OAAI9rB,GAAA,YAAAA,EAAQ,QAASwsE,IACjB1hD,EAAI,KAAO0hD,EACXxsE,EAAO,KAAOwsE,GAElBxsE,EAAO,OAASysE,GAChB3hD,EAAI,UAAY,SACT9qB,CACX,CACA,SAASysE,GAAoBrnE,EAAM,CAC/B,KAAM,CAAE,IAAA0lB,CAAK,EAAG1lB,EAChB0lB,EAAI,UAAY,OACpB,CACA,SAASwhD,GAAkBlnE,EAAMzF,EAAOsgB,EAASysD,EAAYC,EAAY1qE,EAAO,CAC5E,KAAM,CAAE,IAAA6oB,EAAK,KAAAtD,EAAM,YAAA0b,EAAa,MAAAjX,CAAK,EAAK7mB,EACpC,CAAE,EAAAlG,EAAG,EAAAsG,EAAG,MAAAyB,EAAO,OAAA0H,CAAM,EAAK6Y,EAC1BolD,EAAkB3sD,EAAU,EAAIysD,IAAe,mBAAqB,GAAM,GAAMxpC,EAAcA,EACpG,GAAIwpC,IAAe,UAAYE,EAAkB,EAAG,CAChD9hD,EAAI,YAAc8hD,EAClB,MAAMC,EAAe,GAAK5sD,EAAUijB,EAAc,GAElD,GADAK,GAAazY,EAAKmB,EAAOhM,EAAS0sD,EAAaztE,EAAI2tE,EAAe3tE,EAAGsG,EAAGmnE,EAAa1lE,EAAQ4lE,EAAe5lE,EAAO0H,EAAQ,GAAM,OAAW,OAAW,GAAI,SAAU1M,CAAK,EACtK0qE,EAAY,CACZ7hD,EAAI,YAAcoY,EAClBpY,EAAI,UAAS,EACb,UAAWia,IAAW,CAAC,EAAG,CAAC,EACvB,UAAW0G,IAAW,CAAC,GAAI,GAAI,CAAC,EAC5B3gB,EAAI,KAAK5rB,EAAI6lC,EAASv/B,EAAImJ,EAAS,EAAI88B,EAAS,EAAG,CAAC,EAG5D3gB,EAAI,UAAYmB,EAAM,UACtBnB,EAAI,KAAI,EACRA,EAAI,UAAS,CAChB,CACDA,EAAI,YAAc,CACrB,CACD,GAAI4hD,IAAe,UAAaA,IAAe,QAAU,CAACzsD,EAAU,CAChE,MAAMjF,EAAOrb,EAAM,WACbmtB,EAAYb,EAAM,eAClBzsB,EAAQN,EAAI+H,EAAQ,EACtBylE,IAAe,QAAUxpC,IAAgB,IACzCpY,EAAI,YAAc,EAAIoY,GAE1BpY,EAAI,UAAYmB,EAAM,UACtBnB,EAAI,KAAOgC,EACXhC,EAAI,SAAS9P,EAAMxb,EAAOgG,EAAImJ,EAAS,EAAIyc,GAAoBN,EAAKgC,CAAS,CAAC,EAC1EoW,IAAgB,IAChBpY,EAAI,YAAc,EAEzB,CACL,CC5EO,MAAMgiD,GAAqB,CAC9B,uBAAwB,IAAM,GAC9B,KAAM/uE,GAAkB,OACxB,WAAY,GACZ,mBAAoB,GACpB,QAAS,IAAM,IACf,KAAMS,GAAKuuE,GAAevuE,EAAGA,EAAE,KAAK,KAAMA,EAAE,KAAK,IAAI,EACrD,QAAS,MACb,EACA,SAASuuE,GAAe3nE,EAAMqnB,EAAMwuC,EAAM,CACtC,KAAM,CAAE,IAAAnwC,EAAK,KAAAtD,EAAM,YAAA0b,EAAa,MAAAjX,EAAO,cAAAoT,CAAe,EAAGj6B,EACnD,CAAE,EAAAlG,EAAG,EAAAsG,EAAG,MAAO2gB,EAAG,OAAQI,CAAG,EAAGiB,EACtCsD,EAAI,UAAS,EACbA,EAAI,YAAcoY,EAClBpY,EAAI,KAAK5rB,EAAI,EAAGsG,EAAI,EAAG2gB,EAAGI,EAAI,CAAC,EAC/BuE,EAAI,UAAYmB,EAAM,gBACtBnB,EAAI,KAAI,EACRA,EAAI,YAAc,EAClBA,EAAI,UAAS,EACb,MAAMkiD,EAAiBvgD,IAAS,GAChC,IAAIwgD,EAAQ,EACZ,GAAIhS,IAAS,OAAW,CAEpB,MAAM5oC,EAAO9L,EAAI,EACX8U,EAAKn8B,EAAI,EAAU,EACnBo8B,EAAK91B,EAAI,EAAU,EACzB65B,EAAc,WAAW47B,EAAM,SAAUnwC,EAAKuQ,EAAIC,EAAIjJ,EAAMpG,EAAO+gD,EAAiB,EAAI9pC,CAAW,EACnG+pC,EAAQ56C,CACX,KACI,CACD46C,EAAQ,GACR,MAAMC,EAAgB,GAChBC,EAAWH,EAAiBE,EAAgBhqC,EAAcgqC,EAC1DE,EAAaJ,EAAiB,GAAK,EAAI9pC,GAAegqC,EAAgB,GACtEG,EAAUphD,EAAM,sBAAwB,EAC1CkhD,EAAW,IACXriD,EAAI,OAAO5rB,EAAImuE,EAAUD,EAAY5nE,EAAI+gB,EAAI,CAAC,EAC9CuE,EAAI,OAAO5rB,EAAImuE,EAAUD,EAAaD,EAAU3nE,EAAI+gB,EAAI,CAAC,EACzDuE,EAAI,OAAO5rB,EAAImuE,EAAUD,EAAaD,EAAW,GAAK3nE,EAAI+gB,EAAI,EAAI4mD,EAAW,EAAG,EAChFriD,EAAI,OAAO5rB,EAAImuE,EAAUD,EAAaD,EAAW,GAAK3nE,EAAI+gB,EAAI,EAAI4mD,EAAW,EAAG,EAChFriD,EAAI,UAAY,EAChBA,EAAI,YAAcmB,EAAM,aACxBnB,EAAI,QAAU,QACdA,EAAI,OAAM,EAEjB,CACDA,EAAI,UAAYmB,EAAM,WACtBnB,EAAI,SAAS2B,EAAMwgD,EAAQ/tE,EAAI+sB,EAAM,sBAAwB,GAAKzmB,EAAI+gB,EAAI,EAAI6E,GAAoBN,EAAKmB,CAAK,CAAC,EAC7GnB,EAAI,UAAS,CACjB,CCjDO,SAASwiD,GAAuBxiD,EAAKmB,EAAOshD,EAAaC,EAAahmD,EAAM0b,EAAatD,EAAgB,CAC5G9U,EAAI,aAAe,aACnB,MAAM2iD,EAAaC,GAAmB5iD,EAAKtD,EAAMgmD,EAAavhD,GAAOshD,GAAA,YAAAA,EAAa,WAAY,EAAK,EACnGziD,EAAI,UAAS,EACbiD,GAAYjD,EAAK2iD,EAAW,EAAGA,EAAW,EAAGA,EAAW,MAAOA,EAAW,OAAQxhD,EAAM,gBAAkB,CAAC,EAC3GnB,EAAI,YAAcoY,EAClBpY,EAAI,WAAYyiD,GAAA,YAAAA,EAAa,UAAWtoD,GAAUgH,EAAM,SAAU,EAAG,EACrEnB,EAAI,KAAI,EAERA,EAAI,YAAc,EAClBA,EAAI,UAAYmB,EAAM,SACtBnB,EAAI,aAAe,SACnB8U,GAAA,MAAAA,EAAiB,OACrB,CACA,SAAS8tC,GAAmB5iD,EAAK6iD,EAAUH,EAAavhD,EAAO2hD,EAAU,CACrE,MAAMC,EAAO5hD,EAAM,sBACb6hD,EAAO7hD,EAAM,oBACnB,GAAI2hD,EACA,MAAO,CACH,EAAGD,EAAS,EAAIE,EAAO,EACvB,EAAGF,EAAS,EAAIG,EAAO,EAAI,EAC3B,MAAOH,EAAS,MAAQE,EACxB,OAAQF,EAAS,OAASG,EAAO,CAC7C,EAEI,MAAMxnD,EAAI2E,GAAkBuiD,EAAa1iD,EAAKmB,EAAM,aAAc,YAAY,EACxE8hD,EAAOJ,EAAS,OAASG,EACzBvnD,EAAI,KAAK,IAAIwnD,EAAMznD,EAAE,wBAA0B,GAAG,EACxD,MAAO,CACH,EAAGqnD,EAAS,EAAIE,EAAO,EACvB,EAAGF,EAAS,GAAKA,EAAS,OAASpnD,GAAK,EAAI,EAC5C,MAAOD,EAAE,MAAQunD,EAAO,EACxB,OAAQtnD,EAAI,CACpB,CACA,CC/BA,MAAMynD,GAAsBxa,OAAW,SAAY,MAAKC,GAAA,IAAC,OAAO,qCAAuE,EAAC,gEAC3Hwa,GAAqB,CAC9B,uBAAwBxwE,GAAK,eAAA2V,EAAA3V,EAAE,OAAF,YAAA2V,EAAQ,aAAc,IACnD,KAAM/V,EAAa,OACnB,WAAYQ,GAAQA,EAAK,cAAgB,GACzC,mBAAoB,GACpB,SAAU,GACV,SAAUwuB,GACV,KAAM7tB,GAAK,CACP,KAAM,CAAE,YAAA0kC,EAAa,KAAArlC,EAAM,IAAAitB,EAAK,MAAAmB,EAAO,KAAAzE,EAAM,eAAAoY,CAAgB,EAAGphC,EAC1D,CAAE,YAAA0vE,EAAa,YAAAV,EAAa,iBAAAW,CAAgB,EAAKtwE,EACnDqwE,IAAgB,IAAQhrC,EAAc,GACtCoqC,GAAuBxiD,EAAKmB,EAAOkiD,EAAkBX,EAAahmD,EAAM0b,EAAatD,CAAc,EAEvGjT,GAAanuB,EAAGA,EAAE,KAAK,YAAaA,EAAE,KAAK,YAAY,CAC1D,EACD,QAAS,CAACssB,EAAKjtB,EAAMouB,IAAUnB,EAAI,YAAYjtB,EAAK,WAAW,EAAE,MAAQouB,EAAM,sBAAwB,EACvG,SAAUxuB,IAAM,CACZ,GAAGA,EACH,KAAM,MACd,GACI,cAAe,IAAMqL,GAAK,CACtB,KAAM,CAAE,cAAAslE,EAAe,SAAAlqD,EAAU,MAAA3iB,EAAO,mBAAA0iB,CAAkB,EAAKnb,EAC/D,OAAQ1N,gBAAoBmsE,WAAgB,CAAE,SAAU,IAAM,EAC1DnsE,gBAAoB4yE,GAAqB,CAAE,UAAWI,EAAe,SAAU7sE,EAAM,WAAa,GAAM,MAAOA,EAAM,KAAM,cAAeA,EAAM,cAAe,cAAeA,EAAM,cAAe,kBAAmBA,EAAM,kBAAmB,iBAAkBA,EAAM,iBAAkB,mBAAoB0iB,EAAoB,SAAU/kB,GAAKglB,EAAS,CACjV,GAAG3iB,EACH,KAAM,OAAO,MAAMrC,EAAE,YAAc,CAAC,EAAI,EAAIA,EAAE,UAClE,CAAiB,CAAC,CAAE,CAAC,CAChB,EACD,QAAS,CAAC+oE,EAASpqE,EAAMirD,IAAY,CACjC,MAAMulB,EAAY,OAAOvlB,EAAQ,UAAa,SACxCA,EAAQ,SACR,OAAO,WAAW,OAAOA,EAAQ,UAAa,SAAWA,EAAQ,SAAWmf,CAAO,EACzF,GAAI,SAAO,MAAMoG,CAAS,GAAKxwE,EAAK,OAASwwE,GAE7C,MAAO,CAAE,GAAGxwE,EAAM,KAAMwwE,EAAW,YAAavlB,EAAQ,iBAAmBjrD,EAAK,YACnF,CACL,ECxCaywE,GAAwB,CACjC,uBAAwB,IAAM,GAC9B,QAAS,IAAM,IACf,KAAMjxE,EAAa,UACnB,WAAY,GACZ,mBAAoB,GACpB,KAAMkxE,GACN,QAAS,MACb,EACA,SAASA,GAAkBnpE,EAAM,CAC7B,KAAM,CAAE,IAAA0lB,EAAK,MAAAmB,EAAO,KAAAzE,CAAI,EAAKpiB,EACvB,CAAE,EAAAlG,EAAG,EAAAsG,EAAG,OAAQ+gB,CAAC,EAAKiB,EAC5BsD,EAAI,UAAS,EACb,MAAMkD,EAAS,IACf,IAAIwgD,EAAStvE,EAAI+sB,EAAM,sBAAwB+B,EAC/C,MAAMygD,EAASjpE,EAAI+gB,EAAI,EACjBzd,EAAI,KAAK,IAAIyK,GAAiB,EAAE,CAAC,EAAIya,EACrC0gD,EAAI,KAAK,IAAIn7D,GAAiB,EAAE,CAAC,EAAIya,EAC3C,QAASzuB,EAAI,EAAGA,EAAI,GAAIA,IACpBurB,EAAI,OAAO0jD,EAAQC,EAASzgD,CAAM,EAClClD,EAAI,OAAO0jD,EAAQC,EAASzgD,CAAM,EAClClD,EAAI,OAAO0jD,EAAS1lE,EAAG2lE,EAASC,CAAC,EACjC5jD,EAAI,OAAO0jD,EAAS1lE,EAAG2lE,EAASC,CAAC,EACjC5jD,EAAI,OAAO0jD,EAAS1lE,EAAG2lE,EAASC,CAAC,EACjC5jD,EAAI,OAAO0jD,EAAS1lE,EAAG2lE,EAASC,CAAC,EACjCF,GAAU,EAEd1jD,EAAI,UAAY,IAChBA,EAAI,QAAU,SACdA,EAAI,YAAcmB,EAAM,UACxBnB,EAAI,OAAM,CACd,CC7BO,MAAM6jD,GAAoB,CAC7B,uBAAwBlxE,GAAK,eAAA2V,EAAA3V,EAAE,OAAF,YAAA2V,EAAQ,aAAc,IACnD,KAAM/V,EAAa,MACnB,WAAY,GACZ,mBAAoB,GACpB,SAAU,CAACmB,EAAGC,IAAM4tB,GAAa7tB,EAAGC,EAAGD,EAAE,MAAM,SAAS,EACxD,KAAMA,GAAKmuB,GAAanuB,EAAGA,EAAE,KAAK,KAAMA,EAAE,KAAK,YAAY,EAC3D,QAAS,CAACssB,EAAKjtB,EAAMouB,IAAUnB,EAAI,YAAYjtB,EAAK,IAAI,EAAE,MAAQouB,EAAM,sBAAwB,EAEhG,cAAe,IAAMnjB,GAAK,CACtB,KAAM,CAAE,cAAAslE,EAAe,SAAAlqD,EAAU,MAAA3iB,EAAO,mBAAA0iB,CAAkB,EAAKnb,EAC/D,OAAQxG,GAAM,cAAcuhB,GAAc,CAAE,UAAWuqD,EAAe,UAAW7sE,EAAM,WAAa,GAAM,SAAUA,EAAM,WAAa,GAAO,MAAOA,EAAM,KAAM,mBAAoB0iB,EAAoB,SAAUza,GAAK0a,EAAS,CACzN,GAAG3iB,EACH,KAAMiI,EAAE,OAAO,KAClB,EAAG,EACX,EACD,QAAS,MACb,ECfaolE,GAAmB,CAC5B,uBAAwBnxE,GAAK,eAAA2V,EAAA3V,EAAE,OAAF,YAAA2V,EAAQ,aAAc,IACnD,KAAM/V,EAAa,KACnB,WAAYwxE,GAAYA,EAAS,cAAgB,GACjD,mBAAoB,GACpB,SAAUxiD,GACV,SAAU,GACV,KAAM7tB,GAAK,CACP,KAAM,CAAE,KAAAX,EAAM,YAAAqlC,EAAa,cAAA/V,EAAe,IAAArC,EAAK,KAAAtD,EAAM,MAAAyE,EAAO,eAAA2T,CAAgB,EAAGphC,EACzE,CAAE,YAAAgvE,EAAa,aAAA9gD,EAAc,YAAAwhD,EAAa,cAAAtgD,EAAe,iBAAAugD,CAAkB,EAAGtwE,EAChFqwE,IAAgB,IAAQhrC,EAAc,GACtCoqC,GAAuBxiD,EAAKmB,EAAOkiD,EAAkBX,EAAahmD,EAAM0b,EAAatD,CAAc,EAEvGjT,GAAanuB,EAAGgvE,EAAa9gD,EAAckB,EAAeT,CAAa,CAC1E,EACD,QAAS,CAACrC,EAAKjtB,EAAM4e,IAAM,CACvB,MAAMovC,EAAQhuD,EAAK,YAAY,MAAM;AAAA,EAAMA,EAAK,gBAAkB,GAAO,OAAY,CAAC,EACtF,IAAIixE,EAAe,EACnB,UAAW9yD,KAAQ6vC,EACfijB,EAAe,KAAK,IAAIA,EAAchkD,EAAI,YAAY9O,CAAI,EAAE,KAAK,EAErE,OAAO8yD,EAAe,EAAIryD,EAAE,qBAC/B,EACD,SAAUhf,IAAM,CACZ,GAAGA,EACH,KAAM,EACd,GACI,cAAeI,IAAS,CACpB,eAAgBA,EAAK,gBAAkB,GACvC,OAAQiL,GAAK,CACT,KAAM,CAAE,cAAAslE,EAAe,SAAAlqD,EAAU,MAAA3iB,EAAO,mBAAA0iB,CAAkB,EAAKnb,EAC/D,OAAQ1N,gBAAoByoB,GAAc,CAAE,MAAOhmB,EAAK,gBAAkB,GAAO,CAAE,QAAS,WAAa,EAAG,OAAW,UAAWuwE,EAAe,UAAW7sE,EAAM,WAAa,GAAM,SAAUA,EAAM,WAAa,GAAM,WAAY,GAAM,MAAOA,EAAM,KAAM,mBAAoB0iB,EAAoB,SAAUza,GAAK0a,EAAS,CACrT,GAAG3iB,EACH,KAAMiI,EAAE,OAAO,KAClB,EAAG,EACX,CACT,GACI,QAAS,CAACy+D,EAASpqE,EAAMirD,IAAYmf,IAAYpqE,EAAK,KAChD,OACA,CAAE,GAAGA,EAAM,KAAMoqE,EAAS,YAAanf,EAAQ,iBAAmBjrD,EAAK,WAAa,CAC9F,EC7CakxE,GAAqCttE,GAAO,KAAK,EAAE,CAC9D,KAAM,wBACN,MAAO,cACP,UAAW,EACb,CAAC,ECDKutE,GAAmBlmE,GAAK,CAC1B,KAAM,CAAE,IAAAmmE,EAAK,SAAA/qD,EAAU,cAAA2nD,EAAe,SAAAC,EAAU,mBAAA7nD,EAAoB,QAAAirD,CAAS,EAAGpmE,EAC1E,CAACijE,EAAUC,CAAW,EAAIl3D,EAAc,SAAC,CAACg3D,IAAamD,IAAQ,IAAMpD,EAAc,EACnF90D,EAAcb,cAAkB,IAAM,CACxC81D,EAAY,EAAI,CACnB,EAAE,CAAE,GACL,OAAID,EACQ3wE,EAAmB,cAACyoB,GAAc,CAAE,mBAAoBI,EAAoB,UAAW,GAAM,UAAW,GAAM,MAAOgrD,EAAK,SAAU/qD,CAAU,GAElJ9oB,gBAAoB2zE,GAAuB,KAC/C3zE,gBAAoB,IAAK,CAAE,UAAW,gBAAiB,KAAM6zE,EAAK,OAAQ,SAAU,IAAK,qBAAqB,EAAIC,CAAO,EACzH,CAACpD,GAAa1wE,gBAAoB,MAAO,CAAE,UAAW,gBAAiB,QAAS2b,CAAa,EACzF3b,gBAAoBqZ,GAAY,IAAI,CAAC,EACzCrZ,EAAmB,cAAC,WAAY,CAAE,UAAW,YAAa,UAAW,EAAM,EAAC,CACpF,ECZA,SAAS+zE,GAAYjkD,EAAS1D,EAAMyE,EAAOS,EAAc,CACrD,IAAIxtB,EAAI+sB,EAAM,sBACd,MAAMzmB,EAAIgiB,EAAK,OAAS,EAAI0D,EAAQ,wBAA0B,EACxDjkB,EAAQikB,EAAQ,MAChBvc,EAASuc,EAAQ,wBACvB,OAAIwB,IAAiB,QACjBxtB,EAAIsoB,EAAK,MAAQvgB,EAAQglB,EAAM,sBAE1BS,IAAiB,WACtBxtB,EAAIsoB,EAAK,MAAQ,EAAIvgB,EAAQ,GAE1B,CAAE,EAAA/H,EAAG,EAAAsG,EAAG,MAAAyB,EAAO,OAAA0H,CAAM,CAChC,CACA,SAASygE,GAAe,EAAG,CACvB,KAAM,CAAE,KAAAvxE,EAAM,OAAA03C,EAAQ,KAAA7hC,EAAM,KAAAC,EAAM,MAAAsY,CAAO,EAAG,EACtCojD,EAAMxxE,EAAK,aAAeA,EAAK,KACrC,GAAIA,EAAK,cAAgB,IAAQA,EAAK,aAAe,OACjD,MAAO,GACX,MAAMyoB,EAAI6E,GAAqBkkD,EAAKpjD,EAAM,YAAY,EACtD,GAAI3F,IAAM,OACN,MAAO,GACX,MAAMgpD,EAAWH,GAAY7oD,EAAGivB,EAAQtpB,EAAOpuB,EAAK,YAAY,EAChE,OAAOw+B,GAAY,CACf,EAAGizC,EAAS,EAAI,EAChB,EAAGA,EAAS,EAAI,EAChB,MAAOA,EAAS,MAAQ,EACxB,OAAQA,EAAS,OAAS,CAClC,EAAO57D,EAAMC,CAAI,CACjB,CACO,MAAM47D,GAAkB,CAC3B,uBAAwB9xE,GAAK,eAAA2V,EAAA3V,EAAE,OAAF,YAAA2V,EAAQ,aAAc,IACnD,KAAM/V,EAAa,IACnB,WAAYmyE,GAAWA,EAAQ,cAAgB,GAC/C,mBAAoB,GACpB,SAAU,GACV,SAAUnjD,GACV,KAAM7tB,GAAK,CACP,KAAM,CAAE,KAAAX,EAAM,MAAAouB,EAAO,eAAA2T,EAAgB,OAAAuD,EAAQ,OAAAC,EAAQ,KAAA5b,EAAM,IAAAsD,CAAK,EAAGtsB,EAC7D6wE,EAAMxxE,EAAK,aAAeA,EAAK,KAC/B4xE,EAAU5xE,EAAK,cAAgB,GACrC,GAAI+hC,IAAmB,QAAa6vC,GAAWtsC,IAAW,QAAaC,IAAW,OAAW,CACzF,MAAM9c,EAAI2E,GAAkBokD,EAAKvkD,EAAKmB,EAAM,YAAY,EAClDqjD,EAAWH,GAAY7oD,EAAGkB,EAAMyE,EAAOpuB,EAAK,YAAY,EACxD,CAAE,EAAAqB,EAAG,EAAAsG,EAAG,MAAO2gB,EAAG,OAAQI,CAAG,EAAG+oD,EAEtC,GAAInsC,GAAUjkC,EAAI,GAAKikC,GAAUjkC,EAAI,EAAIinB,EAAI,GAAKid,GAAU59B,EAAI,GAAK49B,GAAU59B,EAAI,EAAI+gB,EAAI,EAAG,CAC1F,MAAMmpD,EAAmBtkD,GAAoBN,EAAKmB,EAAM,YAAY,EACpE2T,EAAe,SAAS,EACxB,MAAM+vC,EAAkB,EAClBhiD,EAAQnoB,EAAIkqE,EAClB5kD,EAAI,UAAS,EACbA,EAAI,OAAOtD,EAAK,EAAItoB,EAAG,KAAK,MAAMsoB,EAAK,EAAImG,EAAQpH,EAAIopD,CAAe,EAAI,EAAG,EAC7E7kD,EAAI,OAAOtD,EAAK,EAAItoB,EAAIinB,EAAG,KAAK,MAAMqB,EAAK,EAAImG,EAAQpH,EAAIopD,CAAe,EAAI,EAAG,EACjF7kD,EAAI,YAAcmB,EAAM,UACxBnB,EAAI,OAAM,EACVA,EAAI,KAAI,EACRA,EAAI,UAAYtsB,EAAE,cAClBmuB,GAAa,CAAE,GAAGnuB,EAAG,KAAM,CAAE,GAAGgpB,EAAM,EAAGA,EAAK,EAAI,CAAC,CAAI,EAAE6nD,EAAKxxE,EAAK,YAAY,EAC/E8uB,GAAa,CAAE,GAAGnuB,EAAG,KAAM,CAAE,GAAGgpB,EAAM,EAAGA,EAAK,EAAI,CAAC,CAAI,EAAE6nD,EAAKxxE,EAAK,YAAY,EAC/E8uB,GAAa,CAAE,GAAGnuB,EAAG,KAAM,CAAE,GAAGgpB,EAAM,EAAGA,EAAK,EAAI,CAAC,CAAI,EAAE6nD,EAAKxxE,EAAK,YAAY,EAC/E8uB,GAAa,CAAE,GAAGnuB,EAAG,KAAM,CAAE,GAAGgpB,EAAM,EAAGA,EAAK,EAAI,CAAC,CAAI,EAAE6nD,EAAKxxE,EAAK,YAAY,EAC/EitB,EAAI,QAAO,CACd,CACJ,CACDA,EAAI,UAAY2kD,EAAUxjD,EAAM,UAAYA,EAAM,SAClDU,GAAanuB,EAAG6wE,EAAKxxE,EAAK,YAAY,CACzC,EACD,SAAU,GAAK,CACPuxE,GAAe,CAAC,GAChB,EAAE,eAAc,CAEvB,EACD,QAAS5wE,GAAK,OACV,KAAM,CAAE,KAAAX,CAAM,EAAGW,EACA4wE,GAAe5wE,CAAC,KAE7B4U,EAAAvV,EAAK,aAAL,MAAAuV,EAAA,KAAAvV,EAAkBW,GAGzB,EACD,QAAS,CAACssB,EAAKjtB,EAAMouB,IAAUnB,EAAI,YAAYjtB,EAAK,aAAeA,EAAK,IAAI,EAAE,MAAQouB,EAAM,sBAAwB,EACpH,SAAUxuB,IAAM,CACZ,GAAGA,EACH,KAAM,EACd,GACI,cAAeI,GAAQiL,GAAK,CACxB,KAAM,CAAE,SAAAob,EAAU,MAAA3iB,EAAO,cAAAsqE,EAAe,mBAAA5nD,CAAkB,EAAKnb,EAC/D,OAAQ1N,gBAAoB4zE,GAAkB,CAAE,cAAeztE,EAAM,WAAa,KACzEsqE,GAAkBhuE,EAAK,cAAgB,IAAQA,EAAK,aAAe,QAAa,IAAK0D,EAAM,KAAM,QAASA,EAAM,aAAeA,EAAM,KAAM,mBAAoB0iB,EAAoB,SAAU1iB,EAAM,WAAa,GAAM,SAAUiI,GAAK0a,EAAS,CAC/O,GAAG3iB,EACH,KAAMiI,EAAE,OAAO,KAClB,EAAG,EACX,EACD,QAAS,CAACy+D,EAASpqE,EAAMirD,IAAYmf,IAAYpqE,EAAK,KAChD,OACA,CAAE,GAAGA,EAAM,KAAMoqE,EAAS,YAAanf,EAAQ,iBAAmBjrD,EAAK,WAAa,CAC9F,ECxFa+xE,GAAmB,CAC5BxD,GACAU,GACA/E,GACAS,GACAY,GACA2B,GACAS,GACAU,GACA+B,GACAK,GACAK,GACAC,GACAW,EACJ,EC5BA,IAAIx+D,GAAWjU,GACX4T,GAAW1T,GAGX4T,GAAkB,sBA8CtB,SAASi/D,GAAS7+D,EAAMC,EAAMrP,EAAS,CACrC,IAAI4P,EAAU,GACVE,EAAW,GAEf,GAAI,OAAOV,GAAQ,WACjB,MAAM,IAAI,UAAUJ,EAAe,EAErC,OAAIF,GAAS9O,CAAO,IAClB4P,EAAU,YAAa5P,EAAU,CAAC,CAACA,EAAQ,QAAU4P,EACrDE,EAAW,aAAc9P,EAAU,CAAC,CAACA,EAAQ,SAAW8P,GAEnDX,GAASC,EAAMC,EAAM,CAC1B,QAAWO,EACX,QAAWP,EACX,SAAYS,CAChB,CAAG,CACH,CAEA,IAAAo+D,GAAiBD,mBCjEXE,GAAU,GAChB,MAAMC,WAA8Bx/C,EAAqB,CAAzD,kCACIzxB,GAAA,mBAAc,IAAM,IACpBA,GAAA,uBAAkB,IAClBA,GAAA,aAAQ,IAKRA,GAAA,kBAAa8wE,GAAS,IAAM,CACxB,KAAK,YAAY,IAAI9+C,GAAQ,KAAK,eAAe,CAAC,EAClD,KAAK,gBAAkB,EAC1B,EAAE,EAAE,GACLhyB,GAAA,wBAAmB,IAAM,CACrB,MAAM8B,EAAO,OAAO,KAAK,KAAK,KAAK,EACnC,UAAWjE,KAAOiE,EAAM,CACpB,MAAM3C,EAAM,KAAK,MAAMtB,CAAG,EAC1B,IAAIqzE,EAAO,GACX,QAASjzD,EAAI,EAAGA,EAAI9e,EAAI,MAAM,OAAQ8e,IAAK,CACvC,MAAMqT,EAASnyB,EAAI,MAAM8e,CAAC,EAC1B,GAAI,KAAK,WAAWqT,CAAM,EAAG,CACzB4/C,EAAO,GACP,KACH,CACJ,CACGA,EACA/xE,EAAI,MAAQA,EAAI,MAAM,OAAO,KAAK,UAAU,GAG5CA,EAAI,OAAM,EACV,OAAO,KAAK,MAAMtB,CAAG,EAE5B,CACT,GA5BI,YAAYszE,EAAa,CACrB,KAAK,YAAcA,CACtB,CA2BD,UAAU94D,EAAK6P,EAAKtN,EAAK/c,EAAK,CAC1B,IAAIuzE,EAAS,GACb,MAAMnlE,EAAM+kE,GAAQ,IAAG,GAAM,IAAI,MACjC,IAAI/P,EAAW,GACf,MAAMhgE,EAAS,CACX,IAAK,OACL,MAAO,CAACmwB,GAAmBlJ,EAAKtN,CAAG,CAAC,EACpC,IAAAvC,EACA,OAAQ,IAAM,CACN4oD,IAEJA,EAAW,GACP+P,GAAQ,OAAS,GACjBA,GAAQ,QAAQ/kE,CAAG,EAEbmlE,IACNnlE,EAAI,IAAM,IAEjB,CACb,EACcolE,EAAc,IAAI,QAAQjrD,GAAKna,EAAI,iBAAiB,OAAQ,IAAMma,EAAE,IAAI,CAAC,CAAC,EAEhF,sBAAsB,SAAY,CAC9B,GAAI,CACAna,EAAI,IAAMoM,EACV,MAAMg5D,EACN,MAAMplE,EAAI,SACV,MAAMqlE,EAAU,KAAK,MAAMzzE,CAAG,EAC9B,GAAIyzE,IAAY,QAAa,CAACrQ,EAAU,CACpCqQ,EAAQ,IAAMrlE,EACd,UAAWqlB,KAAUggD,EAAQ,MACzB,KAAK,gBAAgB,KAAK9/C,GAAqBF,CAAM,CAAC,EAE1D8/C,EAAS,GACT,KAAK,WAAU,CAClB,CACJ,MACK,CACFnwE,EAAO,OAAM,CAChB,CACb,CAAS,EACD,KAAK,MAAMpD,CAAG,EAAIoD,CACrB,CACD,eAAeoX,EAAK6P,EAAKtN,EAAK,CAC1B,MAAM/c,EAAMwa,EACNtL,EAAU,KAAK,MAAMlP,CAAG,EAC9B,GAAIkP,IAAY,OAAW,CACvB,MAAMukB,EAASF,GAAmBlJ,EAAKtN,CAAG,EAC1C,OAAK7N,EAAQ,MAAM,SAASukB,CAAM,GAC9BvkB,EAAQ,MAAM,KAAKukB,CAAM,EAEtBvkB,EAAQ,GAClB,MAEG,KAAK,UAAUsL,EAAK6P,EAAKtN,EAAK/c,CAAG,CAGxC,CACL,CC1FA,MAAM0zE,GAAoB,CAACxnE,EAAG5N,IAAQ,CAClC,MAAMq1E,EAAav9C,UAAc,KACtB,CAAE,GAAGkF,GAAS,GAAGpvB,EAAE,WAAW,GACtC,CAACA,EAAE,WAAW,CAAC,EACZ8pC,EAAoB5f,UAAc,IAC7BlqB,EAAE,mBAAqB,IAAIknE,GACnC,CAAClnE,EAAE,iBAAiB,CAAC,EACxB,OAAQ1N,EAAmB,cAACosE,GAAY,CAAE,GAAG1+D,EAAG,UAAW8mE,GAAkB,YAAaW,EAAY,IAAKr1E,EAAK,kBAAmB03C,CAAmB,EAC1J,EACa49B,GAAgBx1E,EAAgB,WAACs1E,EAAiB;;;;;;;;;mBCH9D,SAAU//D,EAAM3N,EAAS,CAOlB,GAAI,CACA6tE,EAAiB,QAAA7tE,EAAQ9F,EAAiB,CAC7C,MAAW,CAGR2zE,EAAA,QAAiB7tE,CACpB,CAGD2N,IAEAA,EAAK,0BAA4BA,EAAK,OAAS3N,EAAQ2N,EAAK,MAAM,EAAI3N,EAE9E,GAAGE,GAAM,SAAU4tE,EAAQ,CAMvB,IAAIC,EAAsB,GAOtBC,EAA8B,GAQ9BC,EAAwB,GAQxBC,EAAgC,GAGhCC,EAAQ,4EAA4E,MAAM,GAAG,EAE7FxI,EAAU,CACV,CACI,KAAM,UACN,QAAS,CACL,CAAE,KAAM,UAAW,MAAO,EAAI,EAC9B,CAAE,KAAM,QAAS,MAAO,IAAM,EAC9B,CAAE,KAAM,OAAQ,MAAO,KAAO,EAC9B,CAAE,KAAM,QAAS,MAAO,MAAQ,EAChC,CAAE,KAAM,SAAU,MAAO,OAAS,EAClC,CAAE,KAAM,QAAS,MAAO,OAAU,CACrC,CACJ,EACD,CACI,KAAM,UACN,QAAS,CACL,CAAE,KAAM,QAAS,MAAO,EAAI,EAC5B,CAAE,KAAM,OAAQ,MAAO,IAAM,EAC7B,CAAE,KAAM,QAAS,MAAO,KAAO,EAC/B,CAAE,KAAM,SAAU,MAAO,KAAO,EAChC,CAAE,KAAM,QAAS,MAAO,MAAQ,CACnC,CACJ,EACD,CACI,KAAM,QACN,QAAS,CACL,CAAE,KAAM,OAAQ,MAAO,EAAI,EAC3B,CAAE,KAAM,QAAS,MAAO,GAAK,EAC7B,CAAE,KAAM,SAAU,MAAO,GAAK,EAC9B,CAAE,KAAM,QAAS,MAAO,IAAM,CACjC,CACJ,EACD,CACI,KAAM,OACN,QAAS,CACL,CAAE,KAAM,QAAS,MAAO,CAAG,EAC3B,CAAE,KAAM,SAAU,MAAO,EAAI,EAC7B,CAAE,KAAM,QAAS,MAAO,GAAK,CAChC,CACJ,EACD,CACI,KAAM,SACN,QAAS,CACL,CAAE,KAAM,QAAS,MAAO,EAAI,CAC/B,CACJ,CACT,EAGI,SAASyI,EAAet6D,EAAKu6D,EAAQ,CACjC,OAAIA,EAAO,OAASv6D,EAAI,OACf,GAGFA,EAAI,QAAQu6D,CAAM,IAAM,EAClC,CAKD,SAASC,EAAWC,EAAK,CAGrB,QAFInxE,EAAS,GAENmxE,GACHnxE,GAAU,IACVmxE,GAAO,EAGX,OAAOnxE,CACV,CAED,SAASoxE,EAAYC,EAAQ,CAKzB,QAJIC,EAAcD,EAAO,MAAM,EAAE,EAAE,QAAO,EACtC9xE,EAAI,EACJgyE,GAAQ,GAELA,IAAShyE,EAAI+xE,EAAY,QACxB/xE,EACI+xE,EAAY/xE,CAAC,IAAM,IACnB+xE,EAAY/xE,CAAC,EAAI,KAEjB+xE,EAAY/xE,CAAC,GAAK,SAAS+xE,EAAY/xE,CAAC,EAAG,EAAE,EAAI,GAAG,WACpDgyE,GAAQ,KAGR,SAASD,EAAY/xE,CAAC,EAAG,EAAE,EAAI,IAC/BgyE,GAAQ,IAGZD,EAAY/xE,CAAC,EAAI,KAGrBA,GAAK,EAGT,OAAIgyE,IACAD,EAAY,KAAK,GAAG,EAGjBA,EAAY,QAAO,EAAG,KAAK,EAAE,CACvC,CAMD,SAASE,EAAmBC,EAAQ7vE,EAAS,CAGzC,IAAI8vE,EAAgBC,EAChB9wE,GAAKe,CAAO,EAAE,KAAM,EACpB,SAAShF,GAAK,CACV,OAAOA,GAAM,IAAMgF,EAAQhF,EAAG,CACjC,CACb,EAAU,KAAK,GAAG,EAGN4oB,GAAWisD,EAAS,IAAMC,EAG9B,OAAKF,EAAmB,MAAMhsD,EAAQ,IAClCgsD,EAAmB,MAAMhsD,EAAQ,EAAI,KAAK,aAAaisD,EAAQ7vE,CAAO,GAInE4vE,EAAmB,MAAMhsD,EAAQ,CAC3C,CACDgsD,EAAmB,MAAQ,GAkB3B,SAASI,EAAat9C,EAAQ1yB,EAASiwE,EAAY,CAC/C,IAAIC,GAAoBlwE,EAAQ,kBAC5BmwE,GAAcnwE,EAAQ,YACtBowE,GAAWD,IAAenwE,EAAQ,SAAS,MAAK,EAChDqwE,GAA2BrwE,EAAQ,yBACnCswE,GAAuBtwE,EAAQ,sBAAwB,EACvDuwE,GAAiBvwE,EAAQ,gBAAkB,EAC3CwwE,GAAoBxwE,EAAQ,kBAC5BywE,GAAmBzwE,EAAQ,iBAE/B,GAAIkwE,IAAqBD,EAAY,CACjC,IAAIS,GAAsB,CACtB,qBAAsBJ,GACtB,YAAaH,EAC7B,EAaY,GAXII,KACAG,GAAoB,sBAAwBH,GAC5CG,GAAoB,sBAAwBH,IAK5CF,IAA4B39C,EAAS,IACrCg+C,GAAoB,yBAA2BL,IAG/CpB,EAAuB,CACvB,GAAI,CAACC,EAA+B,CAChC,IAAIyB,GAAkBC,EAAO,CAAE,EAAE5wE,CAAO,EACxC2wE,GAAgB,YAAc,GAC9BA,GAAgB,iBAAmB,IACnCj+C,EAAS,WAAWs9C,EAAat9C,EAAQi+C,EAAe,EAAG,EAAE,CAChE,CAED,OAAOf,EAAmBK,EAAYS,EAAmB,EAAE,OAAOh+C,CAAM,CACxF,KAAmB,CACH,GAAI,CAACs8C,EAA6B,CAC9B,IAAI2B,GAAkBC,EAAO,CAAE,EAAE5wE,CAAO,EACxC2wE,GAAgB,YAAc,GAC9BA,GAAgB,iBAAmB,IACnCj+C,EAAS,WAAWs9C,EAAat9C,EAAQi+C,EAAe,EAAG,EAAE,CAChE,CAED,OAAOj+C,EAAO,eAAeu9C,EAAYS,EAAmB,CAC/D,CACJ,CAED,IAAIG,GAGAR,GACAQ,GAAen+C,EAAO,YAAY29C,GAA2B,CAAC,EAE9DQ,GAAen+C,EAAO,QAAQ69C,GAAiB,CAAC,EAGpD,IAAIO,GACAC,GACAC,GAEAnqD,GAAOgqD,GAAa,MAAM,GAAG,EAEjCG,GAAiBnqD,GAAK,CAAC,GAAK,GAE5BA,GAAOA,GAAK,CAAC,EAAE,MAAM,GAAG,EAExBkqD,GAAiBlqD,GAAK,CAAC,GAAK,GAC5BiqD,GAAgBjqD,GAAK,CAAC,GAAK,GAY3B,IAAIoqD,GAAgBH,GAAc,OAC9BI,GAAiBH,GAAe,OAChCI,GAAaF,GAAgBC,GAC7BzB,GAASqB,GAAgBC,IAEzBV,IAA4Bc,KAAgBd,GAA2B,GAAM,CAACA,IAA4Ba,KAAoBX,GAAiB,KAE/Id,GAASD,EAAYC,EAAM,EAEvBA,GAAO,SAAW0B,GAAa,IAC/BF,GAAgBA,GAAgB,GAIhCC,KACAzB,GAASA,GAAO,MAAM,EAAG,EAAE,GAI/BqB,GAAgBrB,GAAO,MAAM,EAAGwB,EAAa,EAC7CF,GAAiBtB,GAAO,MAAMwB,EAAa,GAK3CZ,KACAU,GAAiBA,GAAe,QAAQ,MAAO,EAAE,GAIrD,IAAIK,GAAW,SAASJ,GAAgB,EAAE,EAEtCI,GAAW,EACPL,GAAe,QAAUK,IACzBL,GAAiBA,GAAiBzB,EAAW8B,GAAWL,GAAe,MAAM,EAE7ED,GAAgBA,GAAgBC,GAChCA,GAAiB,KAEjBD,GAAgBA,GAAgBC,GAAe,MAAM,EAAGK,EAAQ,EAChEL,GAAiBA,GAAe,MAAMK,EAAQ,GAE3CA,GAAW,IAClBL,GAAkBzB,EAAW,KAAK,IAAI8B,EAAQ,EAAIN,GAAc,MAAM,EAAIA,GAAgBC,GAE1FD,GAAgB,KAGfT,KAEDU,GAAiBA,GAAe,MAAM,EAAGR,EAAc,EAEnDQ,GAAe,OAASR,KACxBQ,GAAiBA,GAAiBzB,EAAWiB,GAAiBQ,GAAe,MAAM,GAKnFD,GAAc,OAASR,KACvBQ,GAAgBxB,EAAWgB,GAAuBQ,GAAc,MAAM,EAAIA,KAIlF,IAAIO,GAAkB,GAGtB,GAAIlB,GAAa,CACbtpD,GAAOiqD,GAGP,QAFI3iD,GAEGtH,GAAK,QACJupD,GAAS,SACTjiD,GAAQiiD,GAAS,SAGjBiB,KACAA,GAAkBb,GAAoBa,IAG1CA,GAAkBxqD,GAAK,MAAM,CAACsH,EAAK,EAAIkjD,GAEvCxqD,GAAOA,GAAK,MAAM,EAAG,CAACsH,EAAK,CAE3C,MACYkjD,GAAkBP,GAItB,OAAIC,KACAM,GAAkBA,GAAkBZ,GAAmBM,IAGpDM,EACV,CAGD,SAASC,EAAqB10E,EAAGC,EAAG,CAChC,OAAID,EAAE,MAAM,OAASC,EAAE,MAAM,OAClB,GAGPD,EAAE,MAAM,OAASC,EAAE,MAAM,OAClB,EAIJ,CACV,CAGD,SAAS00E,EAAkBl4D,EAAOm4D,EAAY,CAC1C,IAAI5jE,EAAS,GAEb,OAAA6jE,EAAKxyE,GAAKuyE,CAAU,EAAG,SAAUE,GAAe,CAC5C,GAAIA,GAAc,MAAM,EAAG,EAAE,IAAM,kBAInC,KAAIC,GAAYD,GAAc,MAAM,EAAE,EAAE,YAAW,EAEnDD,EAAKxyE,GAAKuyE,EAAWE,EAAa,CAAC,EAAG,SAAUE,GAAU,CAClDA,GAAS,MAAM,EAAG,CAAC,IAAMv4D,GACzBzL,EAAO,KAAK,CACR,KAAM+jE,GACN,IAAKC,GACL,MAAOJ,EAAWE,EAAa,EAAEE,EAAQ,CACjE,CAAqB,CAErB,CAAa,EACb,CAAS,EAEMhkE,CACV,CAGD,SAASikE,EAAkBx4D,EAAOy4D,EAAcC,EAAc,CAE1D,OAAID,IAAiB,GAAKC,IAAiB,KAChC14D,EAGJA,EAAQA,CAClB,CAED,IAAI24D,EAAY,CACZ,uBAAwB,CACpB,EAAG,cACH,GAAI,eACJ,EAAG,SACH,GAAI,UACJ,EAAG,SACH,GAAI,UACJ,EAAG,OACH,GAAI,QACJ,EAAG,MACH,GAAI,OACJ,EAAG,OACH,GAAI,QACJ,EAAG,QACH,GAAI,SACJ,EAAG,OACH,GAAI,OACP,EACD,oBAAqB,CACjB,EAAG,OACH,GAAI,QACJ,EAAG,MACH,GAAI,OACJ,EAAG,MACH,GAAI,OACJ,EAAG,KACH,GAAI,MACJ,EAAG,KACH,GAAI,MACJ,EAAG,KACH,GAAI,MACJ,EAAG,KACH,GAAI,MACJ,EAAG,KACH,GAAI,KACP,EACD,sBAAuB,CACnB,IAAK,UACL,GAAI,OACJ,GAAI,MACP,EACD,mBAAoB,CAChB,CAAE,KAAM,WAAY,OAAQ,IAAM,EAClC,CAAE,KAAM,QAAS,OAAQ,GAAK,CACjC,EACD,kBAAmBH,CAC3B,EAGI,SAASI,EAAQr+C,EAAO,CACpB,OAAO,OAAO,UAAU,SAAS,KAAKA,CAAK,IAAM,gBACpD,CAGD,SAAS9kB,EAASxS,EAAK,CACnB,OAAO,OAAO,UAAU,SAAS,KAAKA,CAAG,IAAM,iBAClD,CAGD,SAAS41E,EAASt+C,EAAO/T,EAAU,CAG/B,QAFI9hB,EAAQ61B,EAAM,OAEX71B,GAAS,GACZ,GAAI8hB,EAAS+T,EAAM71B,CAAK,CAAC,EAAK,OAAO61B,EAAM71B,CAAK,CAEvD,CAGD,SAASo0E,EAAKv+C,EAAO/T,EAAU,CAC3B,IAAI9hB,EAAQ,EAERstB,GAAMuI,GAASA,EAAM,QAAU,EAE/B5b,GASJ,IAPI,OAAO6H,GAAa,aACpB7H,GAAQ6H,EACRA,EAAW,SAAUvX,GAAM,CACvB,OAAOA,KAAS0P,EAChC,GAGeja,EAAQstB,IAAK,CAChB,GAAIxL,EAAS+T,EAAM71B,CAAK,CAAC,EAAK,OAAO61B,EAAM71B,CAAK,EAChDA,GAAS,CACZ,CACJ,CAGD,SAAS0zE,EAAK79C,EAAO/T,EAAU,CAC3B,IAAI9hB,EAAQ,EACRstB,GAAMuI,EAAM,OAEhB,GAAI,GAACA,GAAS,CAACvI,IAEf,KAAOttB,EAAQstB,IAAK,CAChB,GAAIxL,EAAS+T,EAAM71B,CAAK,EAAGA,CAAK,IAAM,GAAS,OAC/CA,GAAS,CACZ,CACJ,CAGD,SAASgyE,EAAIn8C,EAAO/T,EAAU,CAC1B,IAAI9hB,EAAQ,EACRstB,GAAMuI,EAAM,OACZtU,GAAM,GAEV,GAAI,CAACsU,GAAS,CAACvI,GAAO,OAAO/L,GAE7B,KAAOvhB,EAAQstB,IACX/L,GAAIvhB,CAAK,EAAI8hB,EAAS+T,EAAM71B,CAAK,EAAGA,CAAK,EACzCA,GAAS,EAGb,OAAOuhB,EACV,CAGD,SAAS8yD,EAAMx+C,EAAO9qB,EAAM,CACxB,OAAOinE,EAAIn8C,EAAO,SAAUtrB,EAAM,CAC9B,OAAOA,EAAKQ,CAAI,CAC5B,CAAS,CACJ,CAGD,SAASupE,EAAQz+C,EAAO,CACpB,IAAItU,EAAM,GAEV,OAAAmyD,EAAK79C,EAAO,SAAUtrB,EAAM,CACpBA,GAAQgX,EAAI,KAAKhX,CAAI,CACrC,CAAS,EAEMgX,CACV,CAGD,SAASgzD,EAAO1+C,EAAO,CACnB,IAAItU,EAAM,GAEV,OAAAmyD,EAAK79C,EAAO,SAAUpiB,EAAI,CACjB2gE,EAAK7yD,EAAK9N,CAAE,GAAK8N,EAAI,KAAK9N,CAAE,CAC7C,CAAS,EAEM8N,CACV,CAGD,SAASizD,EAAa31E,EAAGC,EAAG,CACxB,IAAIyiB,EAAM,GAEV,OAAAmyD,EAAK70E,EAAG,SAAU4U,GAAI,CAClBigE,EAAK50E,EAAG,SAAUojC,GAAI,CACdzuB,KAAOyuB,IAAM3gB,EAAI,KAAK9N,EAAE,CAC5C,CAAa,CACb,CAAS,EAEM8gE,EAAOhzD,CAAG,CACpB,CAGD,SAAS1e,EAAKgzB,EAAO/T,EAAU,CAC3B,IAAIP,EAAM,GAEV,OAAAmyD,EAAK79C,EAAO,SAAUtrB,GAAMvK,GAAO,CAC/B,GAAI,CAAC8hB,EAASvX,EAAI,EACd,OAAAgX,EAAMsU,EAAM,MAAM71B,EAAK,EAChB,EAEvB,CAAS,EAEMuhB,CACV,CAGD,SAASkzD,EAAQ5+C,EAAO/T,EAAU,CAC9B,IAAI4yD,EAAW7+C,EAAM,MAAO,EAAC,QAAO,EAEpC,OAAOhzB,EAAK6xE,EAAU5yD,CAAQ,EAAE,QAAO,CAC1C,CAGD,SAAS+wD,EAAOh0E,EAAGC,EAAG,CAClB,QAAS7B,KAAO6B,EACRA,EAAE,eAAe7B,CAAG,IAAK4B,EAAE5B,CAAG,EAAI6B,EAAE7B,CAAG,GAG/C,OAAO4B,CACV,CAGD,SAASqC,GAAKrC,EAAG,CACb,IAAI0iB,EAAM,GAEV,QAAStkB,KAAO4B,EACRA,EAAE,eAAe5B,CAAG,GAAKskB,EAAI,KAAKtkB,CAAG,EAG7C,OAAOskB,CACV,CAGD,SAASozD,EAAI9+C,EAAO/T,EAAU,CAC1B,IAAI9hB,EAAQ,EACRstB,GAAMuI,EAAM,OAEhB,GAAI,CAACA,GAAS,CAACvI,GAAO,MAAO,GAE7B,KAAOttB,EAAQstB,IAAK,CAChB,GAAIxL,EAAS+T,EAAM71B,CAAK,EAAGA,CAAK,IAAM,GAAQ,MAAO,GACrDA,GAAS,CACZ,CAED,MAAO,EACV,CAGD,SAASi0D,GAAQp+B,EAAO,CACpB,IAAItU,EAAM,GAEV,OAAAmyD,EAAK79C,EAAO,SAAS++C,EAAO,CACxBrzD,EAAMA,EAAI,OAAOqzD,CAAK,CAClC,CAAS,EAEMrzD,CACV,CAED,SAASszD,IAAgC,CACrC,IAAIlgD,EAAS,EACb,GAAI,CACAA,EAAO,eAAe,GAAG,CAC5B,OAAQ9qB,EAAG,CACR,OAAOA,EAAE,OAAS,YACrB,CACD,MAAO,EACV,CAED,SAASirE,GAA6BC,EAAW,CAC7C,OAAOA,EAAU,KAAM,KAAM,CACzB,YAAa,GACb,qBAAsB,EACtB,sBAAuB,EACvB,sBAAuB,CAC1B,KAAM,KACV,CAED,SAASC,GAAqBD,EAAW,CACrC,IAAIE,EAAS,GA0Bb,OAvBAA,EAASA,GAAUF,EAAU,EAAG,KAAM,CAAE,qBAAsB,EAAG,IAAM,IACvEE,EAASA,GAAUF,EAAU,EAAG,KAAM,CAAE,qBAAsB,EAAG,IAAM,KACvEE,EAASA,GAAUF,EAAU,EAAG,KAAM,CAAE,qBAAsB,EAAG,IAAM,MACnE,GAACE,IAGLA,EAASA,GAAUF,EAAU,MAAO,KAAM,CAAE,sBAAuB,EAAG,sBAAuB,CAAG,KAAM,MACtGE,EAASA,GAAUF,EAAU,MAAO,KAAM,CAAE,sBAAuB,EAAG,sBAAuB,CAAG,KAAM,QACtGE,EAASA,GAAUF,EAAU,MAAO,KAAM,CAAE,sBAAuB,EAAG,sBAAuB,CAAG,KAAM,QACtGE,EAASA,GAAUF,EAAU,MAAO,KAAM,CAAE,sBAAuB,EAAG,sBAAuB,CAAG,KAAM,SAClG,CAACE,KAGLA,EAASA,GAAUF,EAAU,MAAO,KAAM,CAAE,yBAA0B,EAAG,IAAM,MAC/EE,EAASA,GAAUF,EAAU,MAAO,KAAM,CAAE,yBAA0B,EAAG,IAAM,MAC/EE,EAASA,GAAUF,EAAU,MAAO,KAAM,CAAE,yBAA0B,EAAG,IAAM,MAC/EE,EAASA,GAAUF,EAAU,MAAO,KAAM,CAAE,yBAA0B,EAAG,IAAM,QAC/EE,EAASA,GAAUF,EAAU,MAAO,KAAM,CAAE,yBAA0B,EAAG,IAAM,QAC3E,CAACE,KAGLA,EAASA,GAAUF,EAAU,IAAM,KAAM,CAAE,YAAa,GAAM,IAAM,QACpEE,EAASA,GAAUF,EAAU,IAAM,KAAM,CAAE,YAAa,GAAO,IAAM,OACjE,CAACE,GAGR,CAGD,SAASC,GAAkB,CACvB,IAAIzvE,EAAO,CAAE,EAAC,MAAM,KAAK,SAAS,EAC9B0vE,EAAW,GACXC,EA2BJ,GAxBA1B,EAAKjuE,EAAM,SAAU9E,GAAKX,GAAO,CAC7B,GAAI,CAACA,GAAO,CACR,GAAI,CAACk0E,EAAQvzE,EAAG,EACZ,KAAM,2DAGVy0E,EAAYz0E,EACf,CAED,GAAI,OAAOA,IAAQ,UAAY,OAAOA,IAAQ,WAAY,CACtDw0E,EAAS,SAAWx0E,GACpB,MACH,CAED,GAAI,OAAOA,IAAQ,SAAU,CACzBw0E,EAAS,UAAYx0E,GACrB,MACH,CAEGoQ,EAASpQ,EAAG,GACZkyE,EAAOsC,EAAUx0E,EAAG,CAEpC,CAAS,EAEG,CAACy0E,GAAa,CAACA,EAAU,OACzB,MAAO,GAGXD,EAAS,kBAAoB,GAE7B,IAAIE,GAAqBrD,EAAIoD,EAAW,SAAUE,GAAK,CACnD,OAAOA,GAAI,OAAOH,CAAQ,CACtC,CAAS,EAGGI,GAAcf,EAAapD,EAAOmD,EAAOF,EAAMpgB,GAAQohB,EAAkB,EAAG,MAAM,CAAC,CAAC,EAEpFG,GAAUL,EAAS,QAEvB,OAAIK,KACAD,GAAcA,GAAY,MAAM,EAAGC,EAAO,GAG9CL,EAAS,kBAAoB,GAC7BA,EAAS,YAAcI,GAEhBvD,EAAIoD,EAAW,SAAUE,GAAK,CACjC,OAAOA,GAAI,OAAOH,CAAQ,CACtC,CAAS,CACJ,CAGD,SAASM,IAAiB,CAEtB,IAAIhwE,EAAO,CAAE,EAAC,MAAM,KAAK,SAAS,EAC9B0vE,EAAWtC,EAAO,GAAI,KAAK,OAAO,QAAQ,EAK1C6C,EAAiB,KAAK,iBACtBC,GAAW,KAAK,WAGhB,OAAO,KAAK,SAAY,YAAc,KAAK,QAAS,IAAK,KACzDD,EAAiB,EACjBC,GAAW,GAGf,IAAIC,GAAaF,EAAiB,EAI9BG,GAAY9E,EAAO,SAAS,KAAK,IAAI2E,CAAc,EAAG,cAAc,EACpEI,GAAkB/E,EAAO,SAAS,KAAK,IAAI4E,EAAQ,EAAG,QAAQ,EAGlEjC,EAAKjuE,EAAM,SAAU9E,EAAK,CACtB,GAAI,OAAOA,GAAQ,UAAY,OAAOA,GAAQ,WAAY,CACtDw0E,EAAS,SAAWx0E,EACpB,MACH,CAED,GAAI,OAAOA,GAAQ,SAAU,CACzBw0E,EAAS,UAAYx0E,EACrB,MACH,CAEGoQ,EAASpQ,CAAG,GACZkyE,EAAOsC,EAAUx0E,CAAG,CAEpC,CAAS,EAED,IAAIo1E,GAAe,CACf,MAAO,IACP,OAAQ,IACR,MAAO,IACP,KAAM,IACN,MAAO,IACP,QAAS,IACT,QAAS,IACT,aAAc,GAC1B,EAEYC,GAAY,CACZ,OAAQ,YACR,MAAO,WACP,OAAQ,QACR,MAAO,WACP,KAAM,WACN,MAAO,WACP,QAAS,QACT,QAAS,QACT,aAAc,QACd,QAAS,KACrB,EAGQb,EAAS,MAAQ/D,EAEjB,IAAI6E,GAAU,SAAU36D,EAAO,CAC3B,OAAO84D,EAAKhD,EAAO,SAAUhxD,GAAM,CAC/B,OAAO41D,GAAU51D,EAAI,EAAE,KAAK9E,CAAK,CACjD,CAAa,CACb,EAEYuH,GAAY,IAAI,OAAOmvD,EAAIZ,EAAO,SAAUhxD,EAAM,CAClD,OAAO41D,GAAU51D,CAAI,EAAE,MAC1B,GAAE,KAAK,GAAG,EAAG,GAAG,EAGjB+0D,EAAS,SAAW,KAGpB,IAAIe,GAAW,OAAOf,EAAS,UAAa,WAAaA,EAAS,SAAS,MAAMA,CAAQ,EAAIA,EAAS,SAOlGI,GAAcJ,EAAS,YAIvBgB,GAAoBhB,EAAS,kBAE7BK,GAAUL,EAAS,QAGnBiB,GAAW,GAEVb,KACGrB,EAAQiB,EAAS,QAAQ,IACzBA,EAAS,SAAWA,EAAS,SAAS,KAAK,EAAE,GAI7CA,EAAS,UACTzB,EAAKyB,EAAS,SAAS,MAAMtyD,EAAS,EAAG,SAAUvH,EAAO,CACtD,IAAI8E,GAAO61D,GAAQ36D,CAAK,EAEpB8E,KAAS,UAAYA,KAAS,WAIlCg2D,GAAS,KAAKh2D,EAAI,CACtC,CAAiB,GAKT,IAAIqzD,GAAa1C,EAAO,aAEnB0C,KACDA,GAAa,IAIjBC,EAAKxyE,GAAK+yE,CAAS,EAAG,SAAUh3E,EAAK,CACjC,GAAI,OAAOg3E,EAAUh3E,CAAG,GAAM,WAAY,CACjCw2E,GAAWx2E,CAAG,IACfw2E,GAAWx2E,CAAG,EAAIg3E,EAAUh3E,CAAG,GAGnC,MACH,CAEIw2E,GAAW,IAAMx2E,CAAG,IACrBw2E,GAAW,IAAMx2E,CAAG,EAAIg3E,EAAUh3E,CAAG,EAErD,CAAS,EAIDy2E,EAAKxyE,GAAKuyE,GAAW,sBAAsB,EAAG,SAAUlpE,EAAM,CAC1D2rE,GAAWA,GAAS,QAAQ,IAAM3rE,EAAO,IAAKkpE,GAAW,uBAAuBlpE,CAAI,CAAC,CACjG,CAAS,EAGD,IAAI2nE,GAAaiD,EAAS,YAAcpE,EAAO,OAAM,EAEjDsF,GAAelB,EAAS,aACxBmB,GAAYnB,EAAS,UACrBoB,GAAYpB,EAAS,UACrBqB,GAAcrB,EAAS,YACvB/C,GAAc+C,EAAS,YACvBsB,GAAQtB,EAAS,MAGjBuB,GAAuBvB,EAAS,sBAAwBoB,GAAY,EACpEI,GAAoBD,GAAuBvB,EAAS,UAAY,EAChEyB,GAAyBD,GAEzBE,GAAW1B,EAAS,SACpB2B,GAAa,GAEbC,GAAW5B,EAAS,SACpB6B,GAAa,GAGb7E,GAAoBgD,EAAS,kBAC7B1C,GAAoB0C,EAAS,kBAC7BzC,GAAmByC,EAAS,iBAC5B9C,GAAW8C,EAAS,SAExBhD,GAAoBA,KAAsBnB,GAAuBE,GAGjE,IAAI+F,GAAO9B,EAAS,KAEhBjB,EAAQ+C,EAAI,IACZA,GAAOA,GAAK,KAAK,GAAG,GAGpBA,KAAS,OAASzB,IAAWuB,IAAYL,MACzCO,GAAO,QAGPA,KAAS,MAAQA,KAAS,IAAQA,KAAS,QAAUA,KAAS,WAC9DA,GAAO,SAGPA,KAAS,KACTA,GAAO,IAGX,IAAIC,GAAe,SAAU3sE,EAAM,CAC/B,OAAOA,EAAK,KAAK0sE,EAAI,CACjC,EAEYE,GAAS,QACTC,GAAS,QACTC,GAAQ,OACRC,GAAO,MACPC,GAAO,gBACPC,GAAS,QAETC,GAAYjC,GAAU,GAAKb,EAAI,CAACwC,GAAQE,GAAOE,EAAI,EAAGL,EAAY,EAClEQ,GAAY/C,EAAI,CAACyC,GAAQC,GAAOE,EAAI,EAAGL,EAAY,EACnDS,GAAUhD,EAAI,CAAC2C,GAAMC,EAAI,EAAGL,EAAY,EACxCU,GAAYjD,EAAI,CAAC6C,GAAQD,EAAI,EAAGL,EAAY,EAG5CW,GAAY7F,EAAIkE,GAAS,MAAMrzD,EAAS,EAAG,SAAUvH,EAAOtb,GAAO,CACnE,IAAIogB,GAAO61D,GAAQ36D,CAAK,EAExB,OAAIA,EAAM,MAAM,EAAG,CAAC,IAAM,MACtBA,EAAQA,EAAM,MAAM,CAAC,EAEjB8E,KAAS,UAAYA,KAAS,WAC9Bg2D,GAAS,KAAKh2D,EAAI,GAInB,CACH,MAAOpgB,GACP,OAAQsb,EAAM,OACd,KAAM,GAGN,MAAQ8E,KAAS,SAAW9E,EAAM,QAAQ06D,GAAU,OAAQ,IAAI,EAAI16D,EAGpE,KAAQ8E,KAAS,UAAYA,KAAS,UAAa,KAAOA,EAC1E,CACA,CAAS,EAGG03D,GAAe,CACf,MAAO,EACP,OAAQ,EACR,MAAO,GACP,KAAM,GACN,KAAM,IAClB,EAEY/7D,GAAS,GAETs6D,IACAwB,GAAU,QAAO,EAGrBnE,EAAKmE,GAAW,SAAUv8D,EAAO,CAC7B,GAAIA,EAAM,KAAM,EACRw8D,GAAa,MAAQA,GAAa,OAClC/7D,GAAO,KAAK+7D,EAAY,EAG5BA,GAAex8D,EAEf,MACH,CAEG+6D,GACAyB,GAAa,KAAOx8D,EAAM,MAAQw8D,GAAa,KAE/CA,GAAa,MAAQx8D,EAAM,KAE3C,CAAS,GAEGw8D,GAAa,MAAQA,GAAa,OAClC/7D,GAAO,KAAK+7D,EAAY,EAGxBzB,IACAt6D,GAAO,QAAO,EAKlB,IAAIg8D,GAAcvD,EAAapD,EAAOmD,EAAOD,EAAQD,EAAMt4D,GAAQ,MAAM,CAAC,CAAC,CAAC,EAG5E,GAAI,CAACg8D,GAAY,OACb,OAAO1D,EAAMt4D,GAAQ,MAAM,EAAE,KAAK,EAAE,EAOxCg8D,GAAc/F,EAAI+F,GAAa,SAAUC,EAAYh4E,GAAO,CAExD,IAAIi4E,GAAej4E,GAAQ,IAAO+3E,GAAY,OAG1CG,GAAa,CAACl4E,GAGdklE,GAEA8S,IAAe,SAAWA,IAAe,SACzC9S,GAAW4Q,GAAgB,GAAGkC,CAAU,EAExC9S,GAAW2Q,GAAU,GAAGmC,CAAU,EAGtC,IAAIG,GAAa,KAAK,MAAMjT,EAAQ,EAChC8O,GAAe9O,GAAWiT,GAE1B78D,GAAQ84D,EAAKr4D,GAAQ,SAAUT,GAAO,CACtC,OAAO08D,IAAe18D,GAAM,IAC5C,CAAa,EAED,OAAI48D,IAAanB,IAAY7R,GAAW6R,KACpCC,GAAa,IAGbiB,IAAcpB,IAAY,KAAK,IAAI1B,EAAS,SAAS,GAAG6C,CAAU,CAAC,EAAInB,KACvEC,GAAa,IAoBboB,IAAa1B,KAAgB,MAAQl7D,GAAM,OAAS,IACpDk7D,GAAc,IAIlBX,GAAU,SAASsC,GAAYH,CAAU,EACzClC,GAAgB,SAASqC,GAAYH,CAAU,EAExC,CACH,SAAU9S,GACV,WAAYiT,GAGZ,aAAcF,GAAajE,GAAe,EAC1C,WAAYiE,GACZ,UAAWC,GACX,KAAMF,EAGN,YAAa18D,GAAM,MACnC,CACA,CAAS,EAED,IAAI88D,GAAc3B,GAAQ,KAAK,MAAQ,KAAK,MACxC4B,GAAW,SAAUz2E,EAAO02E,GAAQ,CACpC,IAAIC,GAAS,KAAK,IAAI,GAAID,EAAM,EAChC,OAAOF,GAAYx2E,EAAQ22E,EAAM,EAAIA,EACjD,EAEYC,GAAa,GACbC,GAAU,GAEVnrB,GAAc,SAAU0qB,EAAYh4E,GAAO,CAC3C,IAAI04E,GAAgB,CAChB,YAAatG,GACb,kBAAmBK,GACnB,iBAAkBC,GAClB,SAAUL,GACV,kBAAmBF,EACnC,EAEY,OAAIuE,KACIC,IAAqB,GACrBqB,EAAW,SAAW,EACtBA,EAAW,WAAa,EACxBA,EAAW,aAAe,IAE1BU,GAAc,yBAA2B/B,GACzCqB,EAAW,kBAAoBrB,KAInCK,IAAc,CAACyB,KACXT,EAAW,WACXA,EAAW,WAAajB,GACxBiB,EAAW,aAAe,IAE1BA,EAAW,WAAa,EACxBA,EAAW,aAAe,IAI9BlB,IAAc,CAAC2B,KACXT,EAAW,YACXA,EAAW,WAAanB,GACxBmB,EAAW,aAAe,IAE1BA,EAAW,WAAa,EACxBA,EAAW,aAAe,IAI9BA,EAAW,YAAcA,EAAW,mBAAqBA,EAAW,kBAAoBA,EAAW,WAAW,WAAW,QAAU,EAE/HzB,GAAY,EACZyB,EAAW,MAAQK,GAASL,EAAW,WAAYzB,EAAS,EACrDA,KAAc,EACrByB,EAAW,MAAQI,GAAYJ,EAAW,WAAaA,EAAW,YAAY,EAE1EtB,IACID,GACAuB,EAAW,MAAQK,GAASL,EAAW,SAAUrB,GAAoBqB,EAAW,WAAW,SAAU,EAAC,MAAM,EAE5GA,EAAW,MAAQA,EAAW,SAG9BA,EAAW,aACXrB,IAAqBqB,EAAW,WAAW,SAAQ,EAAG,UAG1DU,GAAc,eAAiBnC,GAE3BE,GACAuB,EAAW,MAAQA,EAAW,WAAaK,GAASL,EAAW,aAAczB,EAAS,EAEtFyB,EAAW,MAAQA,EAAW,WAAaA,EAAW,cAK9DtB,IAAwBsB,EAAW,YAEnCA,EAAW,MAAQ,KAAK,MAAMK,GAASL,EAAW,WAAYA,EAAW,kBAAoBA,EAAW,WAAW,SAAQ,EAAG,MAAM,CAAC,EAErIrB,IAAqBqB,EAAW,WAAW,SAAQ,EAAG,QAEtDA,EAAW,MAAQA,EAAW,WAIlCA,EAAW,YAAc,IAAMxB,IAAegC,MAC9CE,GAAc,qBAAuBV,EAAW,YAE5CS,IAAWC,GAAc,yBAA2BV,EAAW,aAC/D,OAAOU,GAAc,0BAIzB,CAACF,KAAeR,EAAW,MAAQ,GAAKf,KAAS,IAAwB7C,EAAKgC,GAAU4B,EAAW,IAAI,GAAK5D,EAAKmB,GAAayC,EAAW,IAAI,KAC7IQ,GAAa,IAGjBR,EAAW,eAAiB/F,EAAa+F,EAAW,MAAOU,GAAexG,EAAU,EAEpFwG,GAAc,YAAc,GAC5BA,GAAc,iBAAmB,IACjCV,EAAW,iBAAmB/F,EAAa+F,EAAW,MAAOU,GAAe,IAAI,EAE5EV,EAAW,cAAgB,GAAKA,EAAW,OAAS,iBACpDA,EAAW,iBAAmB/F,EAAa+F,EAAW,MAAO,CACzD,qBAAsB,EACtB,YAAa,EAChB,EAAE,IAAI,EAAE,MAAM,EAAG,CAAC,GAGhBA,CACnB,EAOQ,GAJAD,GAAc/F,EAAI+F,GAAazqB,EAAW,EAC1CyqB,GAAczD,EAAQyD,EAAW,EAG7BA,GAAY,OAAS,EAAG,CACxB,IAAIY,GAAW,SAAUv4D,EAAM,CAC3B,OAAOg0D,EAAK2D,GAAa,SAAUC,GAAY,CAC3C,OAAOA,GAAW,OAAS53D,CAC/C,CAAiB,CACjB,EAEgBw4D,GAAc,SAAUC,EAAQ,CAChC,IAAIC,GAAmBH,GAASE,EAAO,IAAI,EAEtCC,IAILpF,EAAKmF,EAAO,QAAS,SAAUn1E,GAAQ,CACnC,IAAIq1E,GAAmBJ,GAASj1E,GAAO,IAAI,EAEtCq1E,IAID,SAASD,GAAiB,iBAAkB,EAAE,IAAMp1E,GAAO,QAC3Do1E,GAAiB,SAAW,EAC5BA,GAAiB,WAAa,EAC9BA,GAAiB,aAAe,EAChCC,GAAiB,UAAY,EAC7BA,GAAiB,YAAc,EAC/BA,GAAiB,aAAe,EAChCA,GAAiB,iBAAmBA,GAAiB,WAAW,SAAQ,EACxEN,GAAU,GAElC,CAAiB,CACjB,EAEY/E,EAAK9K,EAASgQ,EAAW,CAC5B,CAqED,OAlEIH,KACAD,GAAa,GACb7B,GAAoBC,GACpBmB,GAAc/F,EAAI+F,GAAazqB,EAAW,EAC1CyqB,GAAczD,EAAQyD,EAAW,GAGjCxC,IAAe,EAAEyB,IAAc,CAAC7B,EAAS,OACzC4C,GAAc/F,EAAI+F,GAAa,SAAUC,EAAY,CACjD,OAAI5D,EAAKmB,GAAa,SAAUyD,GAAY,CACxC,OAAOhB,EAAW,OAASgB,EAC/C,CAAiB,EACUhB,EAGJ,IACvB,CAAa,EAEDD,GAAczD,EAAQyD,EAAW,IAG7BN,KACAM,GAAcl1E,EAAKk1E,GAAa,SAAUC,EAAY,CAKlD,MAAO,CAACA,EAAW,YAAc,CAACA,EAAW,YAAc,CAAC5D,EAAKgC,GAAU4B,EAAW,IAAI,CAC9G,CAAiB,GAIDxC,IAAWuC,GAAY,SACvBA,GAAcA,GAAY,MAAM,EAAGvC,EAAO,GAI1CkC,IAAaK,GAAY,OAAS,IAClCA,GAActD,EAAQsD,GAAa,SAAUC,EAAY,CAKrD,MAAO,CAACA,EAAW,YAAc,CAAC5D,EAAKgC,GAAU4B,EAAW,IAAI,GAAK,CAACA,EAAW,SACrG,CAAiB,GAIDL,KACAI,GAAc/F,EAAI+F,GAAa,SAAUC,EAAYh4E,GAAO,CACxD,OAAIA,GAAQ,GAAKA,GAAQ+3E,GAAY,OAAS,GAAK,CAACC,EAAW,WACpD,KAGJA,CAC3B,CAAiB,EAEDD,GAAczD,EAAQyD,EAAW,GAIjCH,IAAaG,GAAY,SAAW,GAAK,CAACA,GAAY,CAAC,EAAE,YAAc,EAAE,CAACtB,IAASsB,GAAY,CAAC,EAAE,YAAcA,GAAY,CAAC,EAAE,SAAWlB,MAC1IkB,GAAc,KAIlB5B,GACO4B,IAIXrE,EAAK33D,GAAQ,SAAUT,EAAO,CAC1B,IAAIre,GAAM84E,GAAaz6D,EAAM,IAAI,EAE7B08D,GAAa5D,EAAK2D,GAAa,SAAUC,GAAY,CACrD,OAAOA,GAAW,OAAS18D,EAAM,IACjD,CAAa,EAED,GAAI,GAACre,IAAO,CAAC+6E,IAIb,KAAI90D,GAAS80D,GAAW,iBAAiB,MAAM,GAAG,EAElD90D,GAAO,CAAC,EAAI,SAASA,GAAO,CAAC,EAAG,EAAE,EAE9BA,GAAO,CAAC,EACRA,GAAO,CAAC,EAAI,WAAW,KAAOA,GAAO,CAAC,EAAG,EAAE,EAE3CA,GAAO,CAAC,EAAI,KAGhB,IAAI+1D,GAAYxF,GAAW,kBAAkBx2E,GAAKimB,GAAO,CAAC,EAAGA,GAAO,CAAC,CAAC,EAElErT,GAAS2jE,EAAkBv2E,GAAKw2E,EAAU,EAE1CyF,GAAgB,GAEhBC,GAAmB,GAGvBzF,EAAKD,GAAW,oBAAqB,SAAUG,GAAW,CACtD,IAAInjE,GAAQ2jE,EAAKvkE,GAAQ,SAAUY,GAAO,CACtC,OAAOA,GAAM,OAASmjE,GAAU,MAAQnjE,GAAM,MAAQwoE,EAC1E,CAAiB,EAEGxoE,KACA0oE,GAAiB1oE,GAAM,IAAI,EAAIA,GAAM,MAEjC4gE,EAAe/1D,EAAM,KAAMs4D,GAAU,MAAM,IAC3Ct4D,EAAM,KAAOA,EAAM,KAAK,QAAQs4D,GAAU,OAAQnjE,GAAM,KAAK,EAC7DyoE,GAAgB,IAGxC,CAAa,EAGG5C,IAAa,CAAC4C,KACdrpE,GAAO,KAAK0jE,CAAoB,EAEhCG,EAAK7jE,GAAQ,SAAUY,GAAO,CAC1B,GAAI0oE,GAAiB1oE,GAAM,IAAI,IAAMA,GAAM,MACvC,OAAI4gE,EAAe/1D,EAAM,KAAM7K,GAAM,KAAK,EAG/B,GAKX,OAGJ,GAAI4gE,EAAe/1D,EAAM,KAAM7K,GAAM,KAAK,EAEtC,OAAA6K,EAAM,KAAOA,EAAM,KAAK,QAAQ7K,GAAM,MAAO0oE,GAAiB1oE,GAAM,IAAI,CAAC,EAClE,EAE/B,CAAiB,GAEjB,CAAS,EAGDsL,GAASi2D,EAAIj2D,GAAQ,SAAUT,EAAO,CAClC,GAAI,CAACA,EAAM,KACP,OAAOA,EAAM,KAGjB,IAAI08D,GAAa5D,EAAK2D,GAAa,SAAUC,GAAY,CACrD,OAAOA,GAAW,OAAS18D,EAAM,IACjD,CAAa,EAED,GAAI,CAAC08D,GACD,MAAO,GAGX,IAAIp5D,GAAM,GAEV,OAAIy3D,KACAz3D,IAAOtD,EAAM,OAGbs6D,IAAcoB,IAAc,CAACpB,IAAckB,MAC3Cl4D,IAAO,KACPo4D,GAAa,GACbF,GAAa,KAGblB,IAAckB,IAAc,CAAClB,IAAcoB,MAC3Cp4D,IAAO,KACPo4D,GAAa,GACbF,GAAa,IAGblB,KAAeoC,GAAW,MAAQ,GAAKf,KAAS,IAAM7C,EAAKgC,GAAU4B,GAAW,IAAI,GAAK5D,EAAKmB,GAAayC,GAAW,IAAI,KAC1Hp5D,IAAO,IACPg3D,GAAa,IAGbt6D,EAAM,OAAS,gBAAkB08D,GAAW,iBAC5Cp5D,IAAOo5D,GAAW,iBAElBp5D,IAAOo5D,GAAW,eAGjB3B,KACDz3D,IAAOtD,EAAM,MAGVsD,EACnB,CAAS,EAGM7C,GAAO,KAAK,EAAE,EAAE,QAAQ,eAAgB,EAAE,EAAE,QAAQ,eAAgB,EAAE,EAChF,CAGD,SAASq9D,IAAwB,CAC7B,IAAI9D,EAAM,KAAK,SAEXqD,EAAW,SAAkBv4D,GAAM,CACnC,OAAOk1D,EAAI,MAAMl1D,EAAI,CACjC,EAEYi5D,EAAYjF,EAAK,KAAK,MAAOuE,CAAQ,EAErCW,GAAWnF,EAAS,KAAK,MAAOwE,CAAQ,EAG5C,OAAQU,EAAS,CACb,IAAK,eACD,MAAO,OACX,IAAK,UACL,IAAK,UACD,MAAO,QACX,IAAK,QACD,MAAO,QACX,IAAK,OACD,GAAIA,IAAcC,GACd,MAAO,OAEf,IAAK,QACD,OAAID,IAAcC,GACP,QAGP,KAAK,OAAS,OACd,KAAK,KAAO,QAGT,oBACX,IAAK,SACD,GAAID,IAAcC,GACd,MAAO,OAEf,IAAK,QACD,OAAID,IAAcC,GACP,QAGP,KAAK,OAAS,OACd,KAAK,KAAO,QAGT,oBACX,QACI,OAAI,KAAK,OAAS,OACd,KAAK,KAAO,QAGT,8BACd,CACJ,CAGD,SAASC,GAAKC,EAAS,CACnB,GAAI,CAACA,EACD,KAAM,2DAGVA,EAAQ,SAAS,OAAStE,EAC1BsE,EAAQ,SAAS,GAAG,OAAS/D,GAE7B+D,EAAQ,SAAS,GAAG,OAAO,SAAW,CA0BlC,KAAM,KAQN,SAAU,KAOV,QAAS,KAMT,SAAU,KAMV,SAAU,KAQV,UAAW,EAMX,MAAO,GAKP,YAAa,KAQb,WAAY,KAYZ,UAAW,GAWX,aAAc,GAId,YAAa,GAQb,qBAAsB,GAStB,SAAUJ,GAMV,kBAAmB,GAWnB,kBAAmB,IAKnB,iBAAkB,IAQlB,SAAU,CAAC,CAAC,CACxB,EAEQI,EAAQ,aAAa,KAAMvF,CAAS,CACvC,CAGD,IAAIwF,GAA0B,SAAS9kD,EAAQm9C,EAAQ7vE,EAAS,CAC5D,OAAO0yB,EAAO,eAAem9C,EAAQ7vE,CAAO,CACpD,EAEI+uE,EAAsB6D,GAA6B,GAAMG,GAAqByE,EAAuB,EACrGxI,EAA8BD,GAAuB8D,GAA6B2E,EAAuB,EAGzG,IAAIC,EAA4B,SAAS/kD,EAAQm9C,EAAQ7vE,EAAS,CAC9D,GAAI,OAAO,OAAW,KAAe,QAAU,OAAO,MAAQ,OAAO,KAAK,aACtE,OAAO,OAAO,KAAK,aAAa6vE,EAAQ7vE,CAAO,EAAE,OAAO0yB,CAAM,CAE1E,EAEI,OAAAu8C,EAAwB8D,GAAqB0E,CAAyB,EACtEvI,EAAgCD,GAAyB4D,GAA6B4E,CAAyB,EAG/GH,GAAKxI,CAAM,EAIJwI,EACX,CAAC,QCplDD,MAAMI,GAAsB,CAAC,OAAQ,IAAK,MAAO,IAAK,KAAM,GAAI,EAC1DC,GAAuB,CAAC,QAAS,IAAK,KAAM,IAAK,MAAO,GAAI,EAkBlDC,YAAaC,EAAkBC,EAAe,GAAE,CAC9DD,SAAW,MAAMA,IACV,CACLE,KAAMt8E,EAAau8E,KACnB9N,SAAU,GACV+N,aAAc,GACdptD,KAAMgtD,GAAYC,EAAe;AAAA;AAAA,EAAOA,CAAa;AAAA,EAAM,IAC3DlM,YAAaiM,EACbK,QAAS,GAEb,CAOO,SAASC,GAAYl8E,EAAc,CACxC,OAAOA,EAAKpB,eAAe,SAAc,GAACoB,EAAmBi8E,OAC/D,CASO,SAASE,GAAWn8E,EAAkB,CAC3C,OACEA,EAAKpB,eAAe,YAAcoB,EAA0Bo8E,UAAY,EAE5E,CAYO,SAASC,GACdr8E,EAAkB,CAElB,OACEA,EAAKpB,eAAe,gBACpB,GAACoB,EAA0Bs8E,cAE/B,CAKgBC,YAAaC,EAAc,GAAK,CAC9C,OAAIA,EACK,CACLV,KAAMt8E,EAAai9E,QACnBT,aAAc,GACdM,eAAgB,IAIb,CACLR,KAAMt8E,EAAai9E,QACnBT,aAAc,GAElB,CAUgBU,YAAYzO,EAAmB0O,EAAc,CACrDv4E,QAAQu4E,EAAQ,QAAU,SACzB,OACLb,KAAMt8E,EAAau8E,KACnBntD,KAAM,GACN+gD,YAAa,GACbqM,aAAc,GACd/N,WACA7pE,QAEJ,CAKO,SAASw4E,GAAc9/C,EAAkB,CACvC,OACL/a,GAAI+a,EAAO/a,GACX7E,MAAO4f,EAAO5f,MACd2/D,QAAS,GACTC,cAAehgD,EAAOggD,cACtB1f,KAAMtgC,EAAOsgC,KACblrC,MAAO4K,EAAO5K,MACd,GAAI4K,EAAOigD,aAAe,CACxBC,KAAMlgD,EAAOmgD,QAAU,EAAI,CAC7B,EACA,GAAIngD,EAAO1zB,OAAS,CAClBA,MAAO0zB,EAAO1zB,KAChB,EAEJ,CAUgB8zE,YACdC,EACAC,EAAkD,CAE9CC,UAAkBF,CAAgB,EAC7BC,GAAc,GAGnBC,GAAkBD,CAAa,EAC1BD,GAAiB,GAGnBG,GAAMH,EAAeC,EAC9B,CAUO,SAASG,GAAY3uD,EAAS,CAC/ByuD,MAAkBzuD,CAAO,EAC3B,MAAO,GAGT,GAAI,OAAOA,GAAS,UAAY,OAAOA,GAAS,UAEvC,OAACA,GAGN,UAAOA,GAAS,SAAU,CAC5B,GAAIA,IAAS,GAEX,MAAO,GAILA,KAAKmqD,OAAOyE,WAAW,GAAQ5uD,KAAKmqD,KAAI,EAAG0E,SAAS,GAAM,EAExD,IACKC,YAAKC,MAAM/uD,QACJ,CACP,OAACA,EACV,KAGOA,UAAKW,MAAM,IAEtB,CAEI,IACF,MAAMquD,EAAaF,KAAKC,MACtBD,KAAKG,UAAUjvD,EAAM,CAACpnB,EAAM9D,IAC1B,OAAOA,GAAU,SAAWo6E,OAAOp6E,CAASA,MAGhD,OAAKq6E,MAAM/H,QAAQ4H,CAAa,EAIzBA,EAAW9J,IAAKpwE,GACrB,CAAC,SAAU,SAAU,UAAW,QAAQo0B,SAAS,OAAOp0B,GACpDA,EACAs6E,GAAat6E,IANV,CAACs6E,GAAaJ,SAQT,CACP,OAACI,GAAapvD,GACvB,CACF,CAUO,SAASovD,GAAapvD,EAAS,CAChC,IACE,IACF,OAAOqvD,GAASrvD,QACF,CACd,OAAO8uD,KAAKG,UAAUjvD,EAAM,CAACpnB,EAAM9D,IACjC,OAAOA,GAAU,SAAWo6E,OAAOp6E,CAASA,IAEhD,OACc,CAGP,UAAI,OAAOkrB,IACpB,CACF,CAWO,SAASsvD,GAAcx6E,EAAU,CAClC25E,MAAkB35E,CAAQ,EACrB,YAGL,UAAOA,GAAU,UACZA,SAGT,MAAMy6E,EAAeH,GAAat6E,CAAO06E,gBAAcrF,OACvD,GAAIoF,IAAiB,GACZ,YACE1C,MAAoB3jD,SAASqmD,CAAe,EAC9C,SACEzC,MAAqB5jD,SAASqmD,CAAe,EAC/C,QAIX,CAWO,SAASE,GAAa36E,EAAU,CAGjC25E,MAAkB35E,CAAQ,EACrB,YAGLq6E,SAAM/H,QAAQtyE,CAAQ,EACjB46E,WAGL,UAAO56E,GAAU,SAAU,CAC7B,GAAIA,EAAMq1E,OAAOryD,SAAW,EAEnB,YAGL,IAGF,MAAM63D,EAAmBC,GAAOC,SAAS/6E,EAAMq1E,KAAI,GAC/C2F,MAAmBH,CAAmB,EACjCA,cAEK,CAEhB,UACS76E,aAAiBi7E,WAGnBb,cAAOp6E,EAAM,CAAE,GAGxB,OAAOo6E,OAAOp6E,EAChB,CAYgBqwE,YACdrwE,EACAk7E,EACAC,EAAiC,CAE7Bf,cAAOgB,MAAMp7E,IAAU,CAACo6E,OAAOiB,SAASr7E,CAAQ,EAC3C,GAGL25E,GAAkBuB,CAAWA,OAAW,IACtCC,IAAiB,IAEXG,OAAKC,MAAMv7E,IAEd86E,GAAO96E,CAAOk7E,SACnBF,GAAmBG,GACf,OAAO,IAAIK,OAAOL,KAClB,eAIJD,IAAW,UACN,IAAIO,KAAKC,aAAaC,OAAW,CACtCj7E,MAAO,UACPk7E,sBAAuB,EACvBC,sBAAuB,EACzB,EAAGX,OAAOl7E,GACD,CAAC,UAAW,aAAc,eAAeo0B,SAAS8mD,CAAS,EAC7D,IAAIO,KAAKC,aAAaC,OAAW,CACtCG,SAAUZ,EACZ,EAAGA,OAAOl7E,GACDk7E,IAAW,eACb/L,GAAO4M,SAAS/7E,GAAS,IAAO,KAAO,gBAAgBg8E,WACrDd,EAAOpB,WAAW,SAAY,EAChCmC,GAAiBC,OAAOl8E,CAAQk7E,KAGlCiB,WAAQjB,EAAQl7E,EACzB,CAYgBo8E,YAAaC,EAAoBnB,EAAc,CAC7D,OAAIA,IAAW,SACN,IAAIO,KAAKa,eAAeX,OAAW,CACxCY,UAAW,SACXC,UAAW,QACVtB,UAAOmB,EAAWI,OAAM,GAClBvB,IAAW,WACbmB,EAAWK,UACTxB,IAAW,WACbmB,EAAWM,WAEbN,EAAWnB,OAAOA,EAC3B,CAYO,SAAS0B,GAAW58E,EAAU,CAC/B25E,MAAkB35E,CAAQ,EACrB,YAIT,GAAIA,aAAiB68E,KACnB,OAAKzB,MAAMp7E,EAAM88E,QAAY,GAGtBnB,OAFE37E,EAKX,GAAI,OAAOA,GAAU,UAAYA,EAAMq1E,KAAOryD,WAAW,EAEhD,YAGL,IACI+5D,QAAkB3C,OAAOp6E,GAC3B,IAACo7E,MAAM2B,CAAkB,GAO3B,IAAIC,EAAqBD,EACrBA,GAAmB,IAAM,GAG3BC,EAAqBD,EAAkB,KAAQ,EACtCA,GAAmB,IAAM,GAGlCC,EAAqBD,EAAkB,KAAQ,EACtCA,GAAmB,IAAM,KAGlCC,EAAqBD,EAAkB,KAIzC,MAAME,EAAmB9N,GAAO+N,KAAKF,GAAoBG,IAAG,EACxDF,KAAiBG,UACnB,OAAOH,EAAiBR,QAE5B,CAEI,UAAOz8E,GAAU,SAAU,CAEvBi9E,QAAmB9N,GAAOgO,IAAIn9E,GAChCi9E,KAAiBG,UACnB,OAAOH,EAAiBR,SAIpBY,QAAmBlO,GAAOgO,IAAIn9E,EAAO,CACzCmvE,GAAOmO,UAAUC,QACjBpO,GAAOmO,UAAUE,aACjBrO,GAAOmO,UAAUG,KAClB,EACGJ,KAAiBD,UACnB,OAAOC,EAAiBZ,QAE5B,OACc,CACPd,MACT,CAIF,CASO,SAAS+B,GAAc19E,EAAa,CACrCA,KAAQ,IAAM,EACT,SAGL29E,MAAY39E,EAAMu6E,WAUtB,OARIoD,EAAUC,QAAQ,OAAS,KAEjB59E,IAAM69E,eAAe,WAAY,CAC3CrN,YAAa,GACbqL,sBAAuB,GACzB,GAGE8B,EAAUC,QAAQ,OAAS,GAGtB,EAGFD,EAAU9xD,MAAM,KAAK,GAAG7I,MACjC,CAcgB86D,YAAiB99E,EAAe+9E,EAAgB,CAC9D,OAAOA,IAAa,EAChBzC,KAAKzG,MAAM70E,GACXs7E,KAAKzG,MAAM70E,EAAQ,IAAM+9E,GAAY,IAAMA,CACjD,CAEA,MAAMC,GAAmB,IAAIC,OAAO,kBAO7B,SAASC,GAAiBzkE,EAAY,CAC3C,OAAIA,EAAKmkE,QAAQ;AAAA,KAAU,GAClBnkE,EAAK0kE,QAAQH,GAAkB,KAEjCvkE,CACT,CAegB2kE,YACdC,EACA7mE,EAAoB,CAEhBmiE,MAAkBniE,CAAO,EACpB,SAGL,IAEI8mE,QAAe9mE,EAAKa,MAAMgmE,GAChC,OAAIC,GAAgBA,EAAa,KAAO3C,OAI/B4C,mBAAmBD,EAAa,GAAGH,QAAQ,MAAO,QAIpD3mE,OACO,CAEPA,QACT,CACF,CCvoBO,MAAMgnE,GAAkB,aAClBC,GAAkB,aAClBC,GAAiB,YAa9B,SAASC,GACPvG,EACA1+E,EACAklF,EAAmC,CAEnC,MAAMC,EAAarF,GAEjB,CACEsF,MAAO,EACPC,MAAO,CACT,EAEArlF,EAAMslF,mBAGFC,EAAe,CACnB7G,KAAMt8E,EAAaojF,OACnB5G,aAAc,GACd6G,SAAU,GACVh0D,aAAczxB,EAAM0lF,iBACpBl0D,KAAM,CACJktD,KAAM,iBACN92D,OAAQ,CAAE,EACV+9D,cAAe,CAAE,EACjBC,UAAWV,EACXW,MAAO,CAACV,EAAWC,MAAOD,EAAWE,KAAM,CAC7C,GAGK,OACL,GAAGrlF,EACH0+E,OACAoH,SAAU,UACVC,WAAY,GACZC,QAAQx0D,EAAU,CAEdyuD,MAAkBkF,EAAWC,KAAK,GAClCnF,GAAkBkF,EAAWE,KAAK,GAClC3E,OAAOgB,MAAMyD,EAAWC,KAAK,GAC7B1E,OAAOgB,MAAMyD,EAAWE,KAAK,GAC7BF,EAAWC,OAASD,EAAWE,MAExB9G,UACL,uCACA,cAAc4G,EAAWC,KAAK,gBAAgBD,EAAWE,KAAK,gDAAgD,EAI9GpF,MAAkBzuD,CAAO,EAE3B,OAAO2tD,KAGH8G,QAAY9F,GAAY3uD,GAExB00D,EAA+B,GACrC,IAAIC,EAAgC,GAChCF,KAAU38D,SAAW,EACvB,OAAO61D,KAIT,IAAI1D,EAAWiF,OAAO0F,iBAClB7K,EAAWmF,OAAO2F,iBAGtB,QAAS/hF,EAAI,EAAGA,EAAI2hF,EAAU38D,OAAQhlB,IAAK,CACzC,MAAMgiF,EAAiBrF,GAAagF,EAAU3hF,CAAE,GAChD,GACEo8E,OAAOgB,MAAM4E,IACbrG,GAAkBqG,CAClB,EACO/H,UACLqC,GAAaqF,CACb,yDAAuDrF,GACrD0F,CACA,oBAAkB,EAIpBA,EAAiB7K,IACR6K,KAGTA,EAAiB/K,IACR+K,KAGbJ,EAAmBK,KAAKD,EAC1B,CAGEJ,SAAmB58D,OAAS,IAC3BmyD,EAAW0J,EAAWE,OAAS9J,EAAW4J,EAAWC,OAGtDe,EAAsBD,EAAmBxP,IAAIzrD,GAC3CwwD,EAAWF,IAAa,EACpBE,GAAY0J,EAAWE,OAAS,GAC9BF,EAAWE,OAAS,EACpBF,EAAWC,OAAS,IACpBD,EAAWE,OAAS,IAAMF,EAAWC,OAAS,MAC5Cn6D,EAAIswD,IAAaE,EAAWF,KAC/B4J,EAAWC,OAAS,IAILc,IAGjB,CACL,GAAGX,EACHE,SAAUS,EAAmBM,KAAK,KAClCh1D,KAAM,CACJ,GAAG+zD,EAAa/zD,KAChB5J,OAAQu+D,EACRR,cAAeO,EAAmBxP,IAAIzrD,GAAK0rD,GAAa1rD,GAC1D,EACAi0D,eAAgBe,GAAkBzuD,GAEtC,EACAi1D,aACE7jF,EAAqC,SAEjCA,SAAK87E,OAASt8E,EAAai9E,WAIxBz8E,IAAK4uB,OAAL5uB,cAAWglB,UAAWq6D,OAHpB,MAGuCr/E,IAAK4uB,OAAL5uB,cAAWglB,MAC7D,EAEJ,CAQO,SAAS8+D,GAAgB1mF,EAAsB,CAC7CilF,UAAgBH,GAAiB9kF,EAAO,OACjD,CAEA0mF,GAAgBC,eAAiB,GAQ1B,SAASC,GAAe5mF,EAAsB,CAC5CilF,UAAgBD,GAAgBhlF,EAAO,MAChD,CAEA4mF,GAAeD,eAAiB,GAQzB,SAASE,GAAgB7mF,EAAsB,CAC7CilF,UAAgBF,GAAiB/kF,EAAO,OACjD,CAEA6mF,GAAgBF,eAAiB,GCvLjC,SAASG,GAAe9mF,EAAsB,CAC5C,MAAMulF,EAAe,CACnB7G,KAAMt8E,EAAa2kF,QACnBv1D,KAAM,GACNotD,aAAc,GACdntD,aAAczxB,EAAM0lF,iBACpB7U,SAAU,CAAC7wE,EAAM+lF,WACjB/+E,MAAO,UAGF,OACL,GAAGhH,EACH0+E,KAAM,WACNoH,SAAU,UACVE,QAAQx0D,EAAU,CAChB,IAAI04C,EAAW,KAGf,OADAA,EAAW4W,GAActvD,GACrB04C,IAAa+X,OACR1D,GACLqC,GAAapvD,CACb,+CAA6C,EAM1C,CACL,GAAG+zD,EACH/zD,KAAM04C,EACNgV,eAAgBe,GAAkB/V,GAEtC,EACAuc,aAAa7jF,EAAiB,CAC5B,OAAOA,EAAK4uB,OAASywD,OAAY,KAAOr/E,EAAK4uB,IAC/C,EAEJ,CAEAs1D,GAAeH,eAAiB,GChChC,SAASK,GAAcrE,EAAoBsE,EAAgB,CACzD,OAAIA,EAAS7G,WAAW,MAAQ6G,EAAS7G,WAAW,GAAM,EAE3CuC,IAAWuE,UAAUD,EAAU,IAG/BtE,IAAWwE,GAAGF,GAEtBtE,CACT,CA+BA,SAASyE,GACP1I,EACA1+E,EACAqnF,EACAC,EACAC,EACAC,EACAP,EAAiB,SAEjB,MAAM9B,EAAarF,GAEjB,CACE0B,OAAQ6F,EACRjzB,KAAMkzB,EACNL,UACF,EAEAjnF,EAAMslF,mBAGR,IAAImC,EACAnG,MAAmB6D,EAAW8B,QAAQ,EAKpC,IACFQ,IACET,KAAcvR,KAAU0P,EAAW8B,QAAQ,IAA3CD,cAA8CE,cAAejF,YACjD,CAEhB,CAGF,IAAIyF,EACApG,GAAmB6D,EAAWwC,SAAS,IAC/BzE,KAAWiC,EAAWwC,SAAS,GAAK1F,QAGhD,IAAI2F,EACAtG,GAAmB6D,EAAW0C,SAAS,IAC/B3E,KAAWiC,EAAW0C,SAAS,GAAK5F,QAGhD,MAAMsD,EAAe,CACnB7G,KAAMt8E,EAAaojF,OACnB5G,aAAc,GACd6G,SAAU,GACV5U,SAAU,CAAC7wE,EAAM+lF,WACjBt0D,aAAczxB,EAAM0lF,iBAEpB1+E,MAAOhH,EAAM8nF,SAAW,QAAU,SAClCt2D,KAAM,CACJktD,KAAM,mBACNqJ,KAAM9F,OACN+F,YAAa,GACb5zB,OAAM+wB,IAAW/wB,OAAX+wB,cAAiBtE,aAAc,IACrCW,OAAQ+F,EACRpmC,IAAKumC,EACL11D,IAAK41D,CACP,GAGIK,EAAiBz2D,IACf04C,QAAoCgZ,GAAW1xD,GACrD,OAAI04C,IAAa,KACXlqE,GAAMkoF,WAMRhe,MAAa+X,QAOfX,GAAmBoG,IAEnBF,EAAYtd,GAAYsd,EAAYE,CACpC,GAMApG,GAAmBsG,IACnBJ,EAAYtd,GAAYsd,EAAYI,CACpC,EAMK,EAGF,OACL,GAAG5nF,EACH0+E,OACAoH,SAAU,UACVmC,gBACAjC,QAAQx0D,EAAY22D,EAAkB,CACpC,GAAIA,IAAa,GAAM,CACfC,QAAmBH,EAAcz2D,GACvC,GAAI42D,IAAqB,GAGvB,OAAO7J,GAAaqC,GAAapvD,CAAO,oBAC/B42D,aAA4BjF,OAE9BiF,IAEX,CAEMle,QAAWgZ,GAAW1xD,GAE5B,IAAIi0D,EAAW,GACXuC,EAAc,GAEdK,EAAiBZ,EAErB,GAAIvd,IAAa+X,OACf,OAAO1D,GACLqC,GAAapvD,CACb,2DAIJ,GAAI04C,IAAa,KAAM,CAEjByY,MAAalN,GAAOgO,IAAIvZ,GAExB,IAACyY,EAAWe,UAEPnF,UACLqC,GAAa1W,CACb;AAAA,SAA8DyY,EAAW9B,UAAQ,EAAI,EAIzF,GAAIsE,EAAW8B,SAAU,CACnB,IACWD,KAAcrE,EAAYwC,EAAW8B,QAAQ,QACnDqB,EAAO,CACd,OAAO/J,GACLoE,EAAW6E,cACX,8CAA8CrC,EAAW8B,QAAQ;AAAA,SAAcqB,GAAO,CAE1F,CAEAD,EAAiB1F,EAAWuE,WAC9B,CAEI,IACFc,EAActF,GACZC,EACAwC,EAAW3D,QAAU6F,SAEhBiB,EAAO,CACd,OAAO/J,GACLoE,EAAW6E,cACX,iDAAiDrC,EAAW3D,MAAM;AAAA,SAAc8G,GAAO,CAE3F,CAEW5F,KAAaC,EAAY0E,EACtC,CAEO,OACL,GAAG9B,EACHE,WACAvG,eAAgBe,GAAkB/V,GAClC14C,KAAM,CACJ,GAAG+zD,EAAa/zD,KAChBu2D,KAAM7d,EACN8d,cACAK,gBACF,EAEJ,EACA5B,aAAa7jF,EAAoB,OACxBq9E,WAAkBr9E,mBAAM4uB,OAAN5uB,cAAYmlF,MACjC,KACAP,EAAY5kF,EAAK4uB,KAAKu2D,IAAI,CAChC,EAEJ,CASA,SAAwBQ,GAAevoF,EAAsB,eAE3D,IAAIqnF,EAAgB,wBAChBrnF,IAAMslF,oBAANtlF,cAAyBo0D,OAAQ,GACnBizB,EAAA,qBACPrnF,IAAMslF,oBAANtlF,cAAyBo0D,MAAO,IACzBizB,EAAA,2BAGZJ,SAA+BjnF,OAAMwoF,YAANxoF,cAAiByoF,OAAjBzoF,cAAuBinF,SACtDyB,EACJpH,GAAmB2F,IAEnB3F,IAAmBthF,mBAAOslF,oBAAPtlF,cAA0BinF,UAExCG,UACL,WACApnF,EACA0oF,EAAcrB,EAAgB,IAAMA,EACpC,EACA,iBACCU,GACKW,EACKX,EAAKP,cAEPO,EAAKP,YAAc/C,UAAQ,IAAK,IAEzCwC,EAEJ,CAEAsB,GAAe5B,eAAiB,GASzB,SAASgC,GAAW3oF,EAAsB,SAE/C,IAAIqnF,EAAgB,WAChBrnF,YAAMslF,oBAANtlF,cAAyBo0D,OAAQ,GACnBizB,EAAA,UACPrnF,IAAMslF,oBAANtlF,cAAyBo0D,MAAO,IACzBizB,EAAA,gBAGXD,GACL,OACApnF,EACAqnF,EACA,EACA,OACCU,GAEQA,EAAKP,cAAcr1D,MAAM,GAAI,EAAC,CAAE,EAACsyD,QAAQ,IAAK,GACvD,CAEJ,CAEAkE,GAAWhC,eAAiB,GASrB,SAASiC,GAAW5oF,EAAsB,CAC/C,OAAOonF,GACL,OACApnF,EACA,aACA,EACA,OACC+nF,GAEQA,EAAKP,YAAW,EAAGr1D,MAAM,KAAK,CAAE,CACzC,CAEJ,CAEAy2D,GAAWjC,eAAiB,GClV5B,SAASkC,GAAY7oF,EAAsB,CACzC,MAAMulF,EAAe,CACnB7G,KAAMt8E,EAAa0mF,MACnBt3D,KAAM,CAAE,EACR+gD,YAAa,CAAE,EACf1B,SAAU,GACV+N,aAAc,GACdntD,aAAczxB,EAAM0lF,kBAAoB,SACxC1+E,MAAO,UAGF,OACL,GAAGhH,EACH0+E,KAAM,QACNoH,SAAU,UACVC,WAAY,GACZC,QAAQx0D,EAAU,CAKVu3D,QAAYzH,GAAmB9vD,CAAQ,GAACovD,GAAapvD,IAAS,GAE7D,OACL,GAAG+zD,EACH/zD,KAAMu3D,EACN7J,eAAgB,CAACoC,GAAmB9vD,GACpC+gD,YAAawW,EAEjB,EACAtC,aAAa7jF,EAAe,CAC1B,OAAIA,EAAK4uB,OAASywD,QAAar/E,EAAK4uB,KAAKlI,SAAW,EAC3C,KAKF1mB,EAAK4uB,KAAK,CAAE,CACrB,EAEJ,CAEAq3D,GAAYlC,eAAiB,GC7B7B,SAASqC,GAAWhpF,EAAsB,CAClCmlF,QAAcnlF,EAAMslF,mBAA0C,GAEpE,IAAI2D,EAEJ,GAAI9D,EAAWgD,SAET,IAGFc,EAAgB,IAAI1E,OAAOY,EAAWgD,SAAU,YACzCG,EAAO,CAEEW,EAAA,2BAA2B9D,EAAWgD,QAAQ;AAAA,SAAaG,GAC7E,CAIF,IAAI3D,EACJ,GACE,CAAC1E,GAAkBkF,EAAW+D,YAAY,GAC1C/D,EAAW+D,aAAaxuD,SAAS,MACjCyqD,EAAW+D,aAAaxuD,SAAS,GACjC,EACI,IACFiqD,EAAmB,IAAIJ,OAAOY,EAAW+D,aAAc,WACzC,CAEKjH,QACrB,CAGF,MAAMsD,EAAe,CACnB7G,KAAMt8E,EAAa+mF,IACnBtY,SAAU,CAAC7wE,EAAM+lF,WACjBnH,aAAc,GACdntD,aAAczxB,EAAM0lF,iBACpB1+E,MAAO,SACPisE,YAAa,GACbzhD,KAAM,GACN+gD,YAAa,GACbkT,SAAU,IAGNwC,EAAiBnqE,IACjBmiE,MAAkBniE,CAAO,EAC3B,MAAI9d,GAAMkoF,WAMNkB,QAAWxI,GAAa9iE,GAO9B,MALIqnE,IAAWkE,WAAaD,EAAS9/D,OAAS67D,EAAWkE,WAMvDJ,aAAyB1E,QACzB0E,EAAcK,KAAKF,KAAc,GAK5B,EAGF,OACL,GAAGppF,EACH0+E,KAAM,OACNoH,SAAU,UACVmC,gBACAjC,QAAQx0D,EAAY22D,EAAkB,CAChClI,MAAkBzuD,CAAO,EACpB,OACL,GAAG+zD,EACH/zD,KAAM,KACN0tD,eAAgB,GAChBqK,WAAY,IAAO,IAIvB,MAAMzrE,EAAe0T,EACjB,UAAOy3D,GAAkB,SAG3B,OAAO1K,GAAaqC,GAAa9iE,CAAOmrE,KAG1C,GAAId,GACuBF,EAAcnqE,KACd,GAMvB,OAAOygE,GAAaqC,GAAa9iE,CAAO,oBAI5C,IAAI0rE,EAAc,GAClB,OAAI1rE,IACE6mE,IAAqB1C,OAETyC,KAA6BC,EAAkB7mE,GAI7D0rE,EAAcrE,EAAW+D,cAAgBprE,GAItC,CACL,GAAGynE,EACH/zD,KAAM1T,EACNy0D,YAAaiX,EACbtK,eAAgBe,GAAkBniE,GAClCyrE,WAAYhmF,IACHkmF,YACL3rE,EAAKsiE,WAAW,QAAU,WAAWtiE,IAASA,EAC9C,SACA,uBAEFva,EAAEmiE,eAAc,CAClB,EACA+f,SAAU3nE,EAEd,EACA2oE,aAAa7jF,EAAa,CACxB,OAAOq9E,GAAkBr9E,EAAK4uB,IAAI,EAAI,KAAO5uB,EAAK4uB,IACpD,EAEJ,CAEAw3D,GAAWrC,eAAiB,GCnJ5B,SAAS+C,GAAW1pF,EAAsB,CACxC,MAAMulF,EAAe,CACnB7G,KAAMt8E,EAAaunF,OACnBn4D,KAAM,CAAE,EACRotD,aAAc,GACdntD,aAAczxB,EAAM0lF,iBACpB1+E,MAAO,UAGF,OACL,GAAGhH,EACH0+E,KAAM,OACNoH,SAAU,UACVC,WAAY,GACZC,QAAQx0D,EAAU,CAChB,MAAM04C,EAAW+V,GAAkBzuD,CAAQ,KAAK2uD,GAAY3uD,GAErD,OACL,GAAG+zD,EACH/zD,KAAM04C,EACNgV,eAAgBe,GAAkBzuD,GAClCi0D,SAAUxF,GAAkBzuD,GACxB,GACAovD,GACE1W,EAASwM,IAAKzyE,GAGZ,OAAOA,GAAM,UAAYA,EAAEy2B,SAAS,KAChCz2B,EAAEwgF,QAAQ,KAAM,GAChBxgF,MAIhB,EACAwiF,aAAa7jF,EAAgB,CAC3B,OAAIq9E,GAAkBr9E,EAAK4uB,IAAI,GAAKytD,GAAmBr8E,CAAO,EACrD,KAGFA,EAAK4uB,IACd,EAEJ,CAEAk4D,GAAW/C,eAAiB,GCxDrB,SAASiD,GAAcC,EAAqB,CACjD,OACEA,EAAezJ,WAAW,QACxB,CAACyJ,EAAczJ,WAAW,UAC5ByJ,OAAkB,SAClBA,EAAczJ,WAAW,OAE7B,CC8BA,SAAS0J,GAAa9pF,EAAsB,CACpC6pF,QAAgBE,GAAY/pF,EAAMwoF,SAAS,EACjD,IAAIhH,EACAqI,IAAkB,kBAEXrI,EAAA,eACAqI,EAAczJ,WAAW,SAAY,IAErCyJ,KAEX,MAAM1E,EAAarF,GAEjB,CAEE1rB,KAAMw1B,GAAcC,GAAiB,EAAI5H,OAEzC0F,UAAWkC,EAAczJ,WAAW,QAAU,EAAI6B,OAClDT,QACF,EAEAxhF,EAAMslF,mBAGF0E,EACJ/J,GAAkBkF,EAAWwC,SAAS,GAAKxC,EAAWwC,UAAY,EAE9DsC,EACJ3I,GAAmB6D,EAAW/wB,IAAI,GAAK,CAACssB,OAAOgB,MAAMyD,EAAW/wB,IAAI,EAChE4vB,GAAcmB,EAAW/wB,IAAI,EAC7B6tB,OAEAsD,EAAe,CACnB7G,KAAMt8E,EAAas+E,OACnBlvD,KAAMywD,OACN1P,YAAa,GACb1B,SAAU,CAAC7wE,EAAM+lF,WACjBnH,aAAc,GACdntD,aAAczxB,EAAM0lF,kBAAoB,QAExC1+E,MAAOhH,EAAM8nF,SAAW,QAAU,SAClCkC,gBACAC,gBAGAC,kBAAmB,IAGfjC,EAAiBz2D,IACjB04C,MAA0B+W,GAAazvD,GAEvCyuD,MAAkB/V,CAAW,EAC/B,MAAIlqE,GAAMkoF,WAMRxH,UAAOgB,MAAMxX,CAAW,EACnB,SAMT,IAAIigB,EAAY,GAYhB,OARE7I,GAAmB6D,EAAW0C,SAAS,GACvC3d,EAAWib,EAAW0C,YAEtB3d,EAAWib,EAAW0C,UACVsC,EAAA,IAKZ7I,GAAmB6D,EAAWwC,SAAS,GACvCzd,EAAWib,EAAWwC,UAIf,GAMFwC,EAAYjgB,EAAW,IAGzB,OACL,GAAGlqE,EACH0+E,KAAM,SACNoH,SAAU,QACVmC,gBACAjC,QAAQx0D,EAAY22D,EAAkB,CACpC,GAAIA,IAAa,GAAM,CACfC,QAAmBH,EAAcz2D,GACvC,GAAI42D,IAAqB,GAMvB,OAAO7J,GAAaqC,GAAapvD,CAAO,oBAC/B,OAAO42D,GAAqB,WAE9BA,IAEX,CAEIle,MAA0B+W,GAAazvD,GACvC+gD,EAAc,GAEd+O,MAAmBpX,CAAW,GAC5BwW,UAAOgB,MAAMxX,CAAW,EAC1B,OAAOqU,GACLqC,GAAapvD,CACb,kDAUAkvD,GALAY,GAAmB2I,CAAgB,IAC1B7F,KAAiBla,EAAU+f,IAIpCvJ,OAAO0J,UAAUlgB,IAAa,CAACwW,OAAO2J,cAAcngB,CAAW,EACjE,OAAOqU,GACLqC,GAAapvD,CACb,6FAIA,IACF+gD,EAAcoE,GACZzM,EACAib,EAAW3D,OACXyI,SAEK3B,EAAO,CACd,OAAO/J,GACLqC,GAAa1W,CACboX,KAAmB6D,EAAW3D,MAAM,EAChC,4EAA4E2D,EAAW3D,MAAM,aAAa8G,CAAM,GAChH,uCAAuCA,GAAO,CAEtD,CACF,CAEO,OACL,GAAG/C,EACH/zD,KAAM04C,EACNqI,cACA2M,eAAgBe,GAAkB/V,GAElCub,SAAUxF,GAAkB/V,CAAY,KAAK0W,GAAa1W,GAE9D,EACAuc,aAAa7jF,EAAgB,CAC3B,OAAOA,EAAK4uB,OAASywD,OAAY,KAAOr/E,EAAK4uB,IAC/C,EAEJ,CAEAs4D,GAAanD,eAAiB,GC5L9B,SAAS2D,GAAatqF,EAAsB,CAC1C,MAAMulF,EAAe,CACnB7G,KAAMt8E,EAAau8E,KACnBntD,KAAM,GACN+gD,YAAa,GACbqM,aAAc,GACd8G,iBAAkB1lF,EAAM0lF,iBACxB7U,SAAU,GAEV7pE,MAAOhH,EAAM8nF,SAAW,QAAU,UAE7B,OACL,GAAG9nF,EACH0+E,KAAM,SACNoH,SAAU,UACVC,WAAY,GACZC,QAAQx0D,EAAU,CACZ,IACF,MAAM04C,EAAWoX,GAAmB9vD,CAAQovD,KAAapvD,CAAQ,OAC3D+gD,EAAc+O,GAAmBpX,CACnCsa,KAAiBta,GACjB,GACG,OACL,GAAGqb,EACH/zD,KAAM04C,EACNqI,cACA2M,eAAgBe,GAAkBzuD,UAE7B82D,EAAO,CACd,OAAO/J,GACLqC,GAAapvD,GACb,uDAAuD82D,GAAO,CAElE,CACF,EACA7B,aAAa7jF,EAAc,CACzB,OAAOA,EAAK4uB,OAASywD,OAAY,KAAOr/E,EAAK4uB,IAC/C,EAEJ,CAEA84D,GAAa3D,eAAiB,GChB9B,SAAS4D,GAAevqF,EAAsB,CACtC6pF,QAAgBE,GAAY/pF,EAAMwoF,SAAS,EAC3C4B,EAAYR,GAAcC,GAE1B1E,EAAarF,GAEjB,CACE6H,UAAW,EACXE,UAAWuC,EAAY,IAAM,EAC7Bh2B,KAAMg2B,EAAY,EAAI,IACtB5I,OAAQ4I,EAAY,QAAU,SAChC,EAEApqF,EAAMslF,mBAIJkF,MACA,IACFA,EAAe7T,GACbwO,EAAW0C,UACX1C,EAAW3D,MAAM,OAEL,CACCZ,KAAauE,EAAW0C,SAAS,CAClD,CAEA,MAAMoC,EACJhK,GAAkBkF,EAAW/wB,IAAI,GAAKssB,OAAOgB,MAAMyD,EAAW/wB,IAAI,EAC9D6tB,OACA+B,GAAcmB,EAAW/wB,IAAI,EAE7BmxB,EAAe,CACnB7G,KAAMt8E,EAAaojF,OACnB5G,aAAc,GACd6G,SAAU,GACVh0D,aAAczxB,EAAM0lF,iBACpBl0D,KAAM,CACJktD,KAAM,aACNv9B,IAAKgkC,EAAWwC,UAChB31D,IAAKmzD,EAAW0C,UAChBzzB,KAAM+wB,EAAW/wB,KACjB9tD,MAAO6+E,EAAWwC,UAClBxyE,MAAOs1E,OAAOtF,EAAWwC,SAAS,EAClC6C,eACA3Z,SAAU,EACZ,GAGK,OACL,GAAG7wE,EACH0+E,KAAM,WACNoH,SAAU,QACVC,WAAY,GACZC,QAAQx0D,EAAU,CACZyuD,MAAkBzuD,CAAO,EAE3B,OAAO2tD,KAIPc,MAAkBkF,EAAWwC,SAAS,GACtC1H,GAAkBkF,EAAW0C,SAAS,GACtCnH,OAAOgB,MAAMyD,EAAWwC,SAAS,GACjCjH,OAAOgB,MAAMyD,EAAW0C,SAAS,GACjC1C,EAAWwC,WAAaxC,EAAW0C,UAE5BtJ,UACL,6BACA,kBAAkB4G,EAAWwC,SAAS,oBAAoBxC,EAAW0C,SAAS,qCAAqC,EAKrH5H,MAAkBkF,EAAW/wB,IAAI,GACjCssB,OAAOgB,MAAMyD,EAAW/wB,IAAI,EAE5B,OAAOmqB,GACL,yBACA,uBAAuB4G,EAAW/wB,IAAI,2BAA2B,EAI/D8V,QAAW+W,GAAazvD,GAE9B,GAAIkvD,OAAOgB,MAAMxX,IAAa+V,GAAkB/V,CAAW,EACzD,OAAOqU,GACLqC,GAAapvD,CACb,kDAKAkvD,UAAO0J,UAAUlgB,IAAa,CAACwW,OAAO2J,cAAcngB,CAAW,EACjE,OAAOqU,GACLqC,GAAapvD,CACb,6FAIJ,IAAI+gD,EAAc,GAEd,IACFA,EAAcoE,GAAazM,EAAUib,EAAW3D,OAAQyI,SACjD3B,EAAO,CACd,OAAO/J,GACLqC,GAAa1W,CACboX,KAAmB6D,EAAW3D,MAAM,EAChC,4EAA4E2D,EAAW3D,MAAM,aAAa8G,CAAM,GAChH,uCAAuCA,GAAO,CAEtD,CAIMoC,QAAqB9I,KAAKzgC,IAC9BgkC,EAAW0C,UACXjG,KAAK5vD,IAAImzD,EAAWwC,UAAWzd,IAG1B,OACL,GAAGqb,EACHrG,eAAgBe,GAAkBzuD,GAClCi0D,SAAUgF,OAAOvgB,GACjB14C,KAAM,CACJ,GAAG+zD,EAAa/zD,KAChBlrB,MAAOokF,EACPv1E,MAAOo9D,CACT,EAEJ,EACAkU,aAAa7jF,EAAiC,SACxCA,SAAK87E,OAASt8E,EAAai9E,WAGxBz8E,IAAK4uB,OAAL5uB,cAAW0D,SAAU27E,OAFnB,MAEsCr/E,IAAK4uB,OAAL5uB,cAAW0D,KAC5D,EAEJ,CAEAikF,GAAe5D,eAAiB,GCzJhC,SAASgE,GAAgB3qF,EAAsB,CAG7C,IAAI4qF,EAA4C,SAEhD,MAAMzF,EAAarF,GAEjB,CACEn5E,QAASojF,GAAY/pF,EAAMwoF,SAAS,IAAM,OAAS,CAAC,GAAM,IAAS,CAAE,CACvE,EAEAxoF,EAAMslF,mBAGFuF,EAAc,IAAIjxD,IAAIurD,EAAWx+E,QAAQ+vE,IAAIzyE,GAAK,OAAOA,IAC3D4mF,EAAYzzD,OAAS,IACnByzD,EAAY5pF,IAAI,WAAa4pF,EAAY5pF,IAAI,QAAW,EAC/C2pF,EAAA,SACFC,EAAY5pF,IAAI,SAAY,IAC1B2pF,EAAA,YAIf,MAAMrF,EAAe,CACnB7G,KAAMt8E,EAAaojF,OACnB5G,aAAc,GACd6G,SAAU,GACVh0D,aAAczxB,EAAM0lF,iBACpB7U,SAAU,CAAC7wE,EAAM+lF,WAEjB/+E,MAAOhH,EAAM8nF,SAAW,QAAU,SAClCt2D,KAAM,CACJktD,KAAM,gBACNoM,cAAe,IAET9qF,EAAMkoF,aAAe,GAAO,CAAC,MAAQ,CAAE,KACxC/C,EAAWx+E,QACXokF,OAAOxtE,GAAOA,IAAQ,MAAQA,IAAQ,IACtCm5D,IAAIn5D,GAAOqjE,GAAarjE,GAC5B,EACDjX,MAAO,EACT,GAGK,OACL,GAAGtG,EACH0+E,KAAM,YACNoH,SAAU,UACVE,QAAQx0D,EAAY22D,EAAkB,CAEpC,IAAIje,EAAW,KAKf,OAJIoX,GAAmB9vD,CAASA,OAAS,KACvC04C,EAAW0W,GAAapvD,IAGtB22D,GAAY,CAAC5C,EAAa/zD,KAAKs5D,cAAcpwD,SAASwvC,CAAW,EAC5DqU,GACLqC,GAAa1W,CACb,iDAA+C,EAI5C,CACL,GAAGqb,EACHrG,eAAgBhV,IAAa,KAC7Bub,SAAUvb,GAAY,GACtB14C,KAAM,CACJ,GAAG+zD,EAAa/zD,KAChBlrB,MAAO4jE,CACT,EAEJ,EACAuc,aAAa7jF,EAAsB,eAC7Bq9E,WAAkBr9E,IAAK4uB,OAAL5uB,cAAW0D,UAAU1D,IAAK4uB,OAAL5uB,cAAW0D,SAAU,GACvD,KAELskF,IAAa,SACR3J,IAAar+E,IAAK4uB,OAAL5uB,cAAW0D,KAAU,QAChCskF,IAAa,UACf9J,IAAcl+E,IAAK4uB,OAAL5uB,cAAW0D,KAAU,SAErC1D,IAAK4uB,OAAL5uB,cAAW0D,KACpB,EAEJ,CAEAqkF,GAAgBhE,eAAiB,GC5FjC,SAASqE,GAAWhrF,EAAsB,CAClCmlF,QAAcnlF,EAAMslF,mBAA0C,GAEpE,IAAI2D,EAEJ,GAAI9D,EAAWgD,SAET,IAGFc,EAAgB,IAAI1E,OAAOY,EAAWgD,SAAU,YACzCG,EAAO,CAEEW,EAAA,2BAA2B9D,EAAWgD,QAAQ;AAAA,SAAaG,GAC7E,CAGF,MAAM/C,EAAe,CACnB7G,KAAMt8E,EAAau8E,KACnBntD,KAAM,GACN+gD,YAAa,GACbqM,aAAc,GACd8G,iBAAkB1lF,EAAM0lF,iBACxB7U,SAAU,CAAC7wE,EAAM+lF,WAEjB/+E,MAAOhH,EAAM8nF,SAAW,QAAU,UAG9BG,EAAiBz2D,IACjByuD,MAAkBzuD,CAAO,EAC3B,MAAIxxB,GAAMkoF,WAMRhe,MAAW0W,GAAapvD,GAIxB24D,EAAY,GAOhB,OALIhF,EAAWkE,WAAanf,EAAS5gD,OAAS67D,EAAWkE,YACvDnf,EAAWA,EAAS/lE,MAAM,EAAGghF,EAAWkE,SAAS,EACrCc,EAAA,IAIZlB,aAAyB1E,QACzB0E,EAAcK,KAAKpf,KAAc,GAE1B,GAGFigB,EAAYjgB,EAAW,IAGzB,OACL,GAAGlqE,EACH0+E,KAAM,OACNoH,SAAU,UACVmC,gBACAjC,QAAQx0D,EAAY22D,EAAkB,CAChC,UAAOc,GAAkB,SAG3B,OAAO1K,GAAaqC,GAAapvD,CAAOy3D,KAG1C,GAAId,EAAU,CACNC,QAAmBH,EAAcz2D,GACvC,GAAI42D,IAAqB,GAMvB,OAAO7J,GAAaqC,GAAapvD,CAAO,oBAC/B,OAAO42D,GAAqB,WAE9BA,IAEX,CAEI,IACF,MAAMle,EAAWoX,GAAmB9vD,CAAQovD,KAAapvD,CAAQ,OAC3D+gD,EAAc+O,GAAmBpX,CACnCsa,KAAiBta,GACjB,GACG,OACL,GAAGqb,EACHrG,eAAgBe,GAAkB/V,GAClC14C,KAAM04C,EACNqI,qBAEK+V,EAAO,CAEd,OAAO/J,GACL,qBACA,qDAAqD+J,GAAO,CAEhE,CACF,EACA7B,aAAa7jF,EAAc,CACzB,OAAOA,EAAK4uB,OAASywD,OAAY,KAAOr/E,EAAK4uB,IAC/C,EAEJ,CAEAw5D,GAAWrE,eAAiB,GClI5B,MAAMsE,MAAczkF,wBAAW,IAC7Bk5D,SAAU,OACVwrB,UAAW,UACXC,UAAW,YACb,GAEaC,GAAmC,CAAC,CAAExvE,UAAM,CACvD,MAAMyvE,EAAYzvE,GAAQA,EAAK0N,OAAS,EAAI1N,EAAK,GAAK,GAElDyvE,SAAUjL,WAAW,MAAS,KAE7B78E,KAAEua,KAAMutE,EAAWjjF,OAAO,SAASkjF,IAAI,sBACtC,YAACL,IAAY1qE,IAAK8qE,SAKhBJ,IAAY1qE,IAAK8qE,GAC3B,ECOaE,GAAc,IAAIC,IAC7BC,OAAOnnC,QAAQ,CACb5iD,OAAQ4oF,GACRvqE,KAAMirE,GACNhlE,SAAU8gE,GACV4E,UAAWf,GACXrpE,KAAMooE,GACNrwD,OAAQywD,GACRnqE,KAAMqpE,GACN2C,SAAUpD,GACVR,KAAMa,GACNjyE,KAAMgyE,GACNiD,WAAYlF,GACZmF,UAAWjF,GACXkF,WAAYjF,GACZtzE,MAAOs1E,GACP53D,SAAUs5D,EACZ,CACD,GAEYwB,GAAc,GCKXC,YACdC,EACAC,EACA7f,EAAgB,CAIV/uD,QAAQ,IAAIinE,OAChB,GAAG0H,CAAc,+BAA8BC,wBAC/C,MAGS7f,IAASoY,QAAQ,KAAM,MAE5B9lE,QAAQrB,EAAM6uE,KAAK9f,GACzB,GAAI1tD,EACKA,SAAM,CAAE,EAACg9D,MAIpB,CAUgByQ,YACdxpF,EACAypF,EACAC,EAAiB,CAEjB,MAAM5M,EAAgB,GAGhB6M,EAAYP,GAAmBK,EAAO,QAASC,GACjDC,IACF7M,EAAc8M,SAAWD,GAI3B,MAAME,EAAkBT,GACtBK,EACA,mBACAC,GAcF,OAZIG,IACF/M,EAAc34C,OAAS0lD,GAGrBA,IAAoB,UAAYF,IAActK,SAKhDvC,EAAc8M,SAAW,WAGvB9M,EAEK,CACL,GAAG98E,EACH88E,iBAGG98E,CACT,CAKO,SAAS8pF,GAAuBlE,EAAoB,CACzD,IAAImE,EAAWnE,EAAYuB,GAAYvB,CAAa,OAEpD,OAAKmE,GAKMA,IAAS3L,YAAW,EAAGrF,KAAI,EAElC,CAAC,UAAW,QAAS,yBAAyBjhD,SAASiyD,CAAW,EAC7D3B,GAGL,CAAC,WAAY,cAActwD,SAASiyD,CAAW,EAC1CpE,GAELoE,IAAa,OACRhE,GAELgE,IAAa,OACR/D,GAEL,CAAC,SAAU,SAASluD,SAASiyD,CAAW,EACnCrC,GAEL,CAAC,QAAQ5vD,SAASiyD,CAAW,EACxB7F,GAGP,CACE,OACA,QACA,QACA,QACA,QACA,SACA,SACA,SACA,UACA,UACA,UACA,UACA,WACA,QACA,WACApsD,SAASiyD,CACX,EACO7C,GAEL6C,IAAa,cACRhC,GAELgC,EAASvM,WAAW,MAAS,EACxBsJ,GAGFY,IApDEA,EAqDX,CAUgBsC,YACdp7D,EACAq7D,EAAqB,CAErB,MAAMrE,EAAYh3D,EAAKskD,MAAMpxE,MAAMmoF,CAAc,EAC3C/sE,EAAQ0R,EAAKs7D,WAAWD,CAAc,EAC5C,IAAI9G,EAAa,GAEbgE,UAAYvB,KAAe,UAEhBzC,EAAA,IAGR,CACLphE,GAAI,SAASkoE,IACb5lF,KAAM6Y,EACNA,QACAimE,aACAyC,YACA3I,QAAS,GACTiI,SAAU,GACViF,SAAU,GAEd,CAWgBC,YACdx7D,EACAy7D,EAAsB,CAIhBC,QAAoB17D,EAAK5F,QAAQ8qD,IAAIh3C,GAAUA,EAAOutD,CAAe,GACrEntE,EACJotE,EAAkB5jE,OAAS,EACvB4jE,EAAkBA,EAAkB5jE,OAAS,GAC7C,GASAwL,EACJo4D,EAAkB5jE,OAAS,EACvB4jE,EACGnC,OAAOrrD,GAAUA,IAAW,IAC5Bv7B,MAAM,EAAG,EACTqiF,OAAK,KACRvE,SAEN,IAAIuG,EAAYh3D,EAAKskD,MAAMtkD,KAAKy7D,CAAe,EAE3ChN,GAAkBuI,CAAY,IAEpBA,EAAA,CACVC,KAAM,KACN0E,WAAY,SACZC,YAAa,WAIb9H,MACAyE,MAAYvB,KAAe,cAAe,CAEtC7hF,QAAU6qB,EAAK67D,sBAAsBJ,GACvC3L,GAAmB36E,CAAU,IACX2+E,EAAA,CAClB3+E,WAGN,CAEO,OACLge,GAAI,UAAU7E,KAASmtE,IACvBhmF,KAAM6Y,EACNA,QACAimE,WAAY,GACZyC,YACAlD,oBACAzF,QAAS,GACTiI,SAAU,GACViF,SAAU,GACVj4D,QAEJ,CAOO,SAASw4D,KACP,OACL3oE,GAAI,cACJ7E,MAAO,GACPytE,YAAa,EACbxH,WAAY,GACZlG,QAAS,GACTiI,SAAU,GAEd,CAQO,SAAS0F,GAAuBh8D,EAAY,CACjD,MAAM5F,EAA6B,GAE7B,CAAE/f,YAAe2lB,IACjBi8D,EAAa5hF,EAAW6hF,cACxBC,EAAa9hF,EAAW+hF,YAE1BH,OAAe,GAAKE,IAAe,EAG7BpH,cAAK+G,MACN1hE,EAGT,QAAStnB,EAAI,EAAGA,EAAImpF,EAAYnpF,IAAK,CACnC,MAAMo7B,EAAS,CACb,GAAGktD,GAAkBp7D,EAAMltB,CAAE,EAC7BipF,YAAajpF,GAGfsnB,EAAQ26D,KAAK7mD,EACf,CAEA,QAASp7B,EAAI,EAAGA,EAAIqpF,EAAYrpF,IAAK,CACnC,MAAMo7B,EAAS,CACb,GAAGstD,GAAmBx7D,EAAMltB,CAAE,EAC9BipF,YAAajpF,EAAImpF,GAGnB7hE,EAAQ26D,KAAK7mD,EACf,CACO9T,QACT,CAaO,SAASiiE,GACdnuD,EACAouD,EACAxB,EAAgCrK,OAAS,qBAEzC,MAAM0K,EAAWjtD,EAAO8oD,UAAYuB,GAAYrqD,EAAO8oD,SAAS,EAAI,KAEhEjD,MACA7lD,KAAOg/C,OAAS,SAGlB6G,EAAe7lD,EAAOsmD,QACpB1E,GAAmBwM,EAAU5oE,OAAO,EAChCs/D,GACEuJ,GACED,EAAU5oE,QACV4oE,EAAUE,YACVF,EAAUG,KAAK,CAGnB,gBAGN,CAAC,OAAQ,OAAQ,YAAYvzD,SAASgF,EAAOg/C,IAAI,GACjD4C,GAAmBwM,EAAU5oE,OAAO,IACnC,OAAO4oE,EAAU5oE,SAAY,UAC5B,OAAO4oE,EAAU5oE,SAAY,UAC/B,CAKIgpE,MAEFvB,IAAa,QACbrL,IAAmBwM,OAAUG,QAAVH,cAAiBhpE,OAAjBgpE,cAAuB3mF,IAC1C,EAEA+mF,EAAazY,GACV+N,KACC2K,GAAiBL,EAAU5oE,UAAS4oE,OAAUG,QAAVH,cAAiBhpE,OAAjBgpE,cAAuB3mF,OAAQ,CAEpEs8E,SACAV,SAGHmL,EAAazY,GAAOgO,IAAI/C,OAAOoN,EAAU5oE,OAAO,GAAG69D,SAGtCrjD,IAAOsmD,QAAQkI,WACrBvB,IAAa,UAAW,CAIjC,MAAMyB,EAAanO,GAAkB6N,EAAU5oE,OAAO,EAClD,KACA6oE,GACED,EAAU5oE,QACV4oE,EAAUE,YACVF,EAAUG,KAAK,EAENvuD,IAAOsmD,QAAQoI,QAEf1uD,IAAOsmD,QAAQ8H,EAAU5oE,OAAO,EAG7C45D,MAAYyG,CAAe,EAEtBA,SAGL,IAAC7lD,EAAOqmD,WAAY,CAElBzE,MAAmBwM,EAAUO,cAAc,EAAG,CAC1C9b,QAAciS,GAAiBsJ,EAAUO,cAAc,EAKzD9I,EAAa7G,OAASt8E,EAAau8E,KACtB4G,EAAA,CACb,GAAGA,EACHhT,eAGFgT,EAAa7G,OAASt8E,EAAas+E,QAEnCT,IACGvgD,IAAO4lD,oBAAP5lD,cAAiD8hD,MAEpD,EACe+D,EAAA,CACb,GAAGA,EACHhT,eAGFgT,EAAa7G,OAASt8E,EAAa+mF,KAEnClJ,IACGvgD,IAAO4lD,oBAAP5lD,cAA+CwpD,YAElD,EACe3D,EAAA,CACb,GAAGA,EACHhT,eAGFgT,EAAa7G,OAASt8E,EAAaojF,UAClCD,IAAgC/zD,OAAhC+zD,cAAsC7G,QAAS,oBAEhDuB,IACGvgD,IAAO4lD,oBAAP5lD,cAAmD8hD,MAEtD,IACe+D,EAAA,CACb,GAAGA,EACH/zD,KAAM,CACJ,GAAI+zD,EAAgC/zD,KACpCw2D,YAAazV,CACf,GAGN,CAEI+Z,GAAawB,EAAUzB,QACzB9G,EAAe6G,GACb7G,EACAuI,EAAUzB,MACVC,GAGN,CACO/G,QACT,CCndO,MAAM+I,GAAmB,SAEnBC,GAAyB,QAGzBC,GAAuB,CAClCC,MAAO,GACPC,OAAQ,IACRC,MAAO,GACT,EAyBA,SAASC,GACP5iF,EAA6C,CAEzCi0E,OAAkBj0E,CAAQ,EAI1B,WAAOA,GAAU,SACZA,SAGT,GAAIA,KAASwiF,GACX,OAAOA,GAAqBxiF,CAAM,EAItC,CAUgB6iF,YACdC,EACAC,EAA4D,CAE5D,GAAI,CAACA,EAEID,SAGLE,MAwBJ,OAtBED,EAAoB9tF,IAAI6tF,EAAY7nF,IAAI,GACxC6nF,EAAY7nF,OAASqnF,GAGNS,IAAoBE,IAAIH,EAAY7nF,IAAI,EAEvD8nF,EAAoB9tF,IAClB,GAAGstF,EAAuB,GAAEO,EAAYvB,WAAW,EAAE,EAIvDyB,EAAeD,EAAoBE,IACjC,GAAGV,KAAyBO,EAAYvB,WAAW,EAAE,EAGvDuB,EAAYjP,SACZkP,EAAoB9tF,IAAIqtF,EACxB,IAEeS,IAAoBE,IAAIX,KAGpCU,EAOE9O,GAAM,CAAE,GAAG4O,GAAe,CAC/BhvE,MAAOkvE,EAAa75E,MACpBnJ,MAAO4iF,GAAiBI,EAAahjF,KAAK,EAC1C+5E,WAAYzE,GAAmB0N,EAAapjF,QAAQ,EAChD,CAACojF,EAAapjF,SACdq2E,OACJ8K,SAAUiC,EAAaE,OACvBpH,SAAUkH,EAAaG,OACvBjH,WAAY8G,EAAaI,SACzB9J,kBAAmB0J,EAAaK,YAChC3J,iBAAkBsJ,EAAan2E,UAC/B7X,aAAcguF,EAAaM,QAC3BC,KAAMP,EAAaO,KACrB,EAlBST,CAmBX,CASO,SAASU,GAAgBC,EAAkB,CAChD,GAAI,CAACA,EACH,WAAWjE,IAET,IACK,WAAIA,IAAIC,OAAOnnC,QAAQg8B,KAAKC,MAAMkP,WAClCnH,EAAO,CAGdoH,UAASpH,OACEkD,GACb,CACF,CAaO,SAASmE,GAAcjwD,EAAuB,OAC7CkwD,SAAalwD,IAAO4lD,oBAAP5lD,cAA0B5a,KAEzC+qE,MACAvO,UAAmBsO,CAAa,GAC9BrE,GAAYtqF,IAAI2uF,CAAa,IAClBrE,KAAY0D,IAAIW,IAO7B3P,GAAkB4P,CAAa,IAEpBnD,KAAuBhtD,EAAO8oD,SAAS,GAE/CqH,CACT,CAWA,SAASC,GACPl4E,EACA4Z,EACA5lB,EAAiB,CAEjB,MAAMolB,EAAsBoF,KAEtB24D,EAAsB1nF,GAAM0oF,QAAQ,IACjCP,GAAgB53E,EAAQgU,OAAO,EACrC,CAAChU,EAAQgU,QAAQ,EAEdokE,EACJp4E,EAAQq4E,mBACP3O,GAAmB1pE,EAAQ5L,KAAK,GAAK4L,EAAQ5L,MAAQ,EAoGjD,OACL4f,QAlG4BvkB,GAAM0oF,QAAQ,WAC1C,IAAIG,EAAoB1C,GAAuBh8D,CAC5CklD,MAAIh3C,IAEH,IAAIywD,EAAgB,CAClB,GAAGzwD,EACH,GAAGmvD,GAAkBnvD,EAAQqvD,CAAoB,EACjDpP,YAAaqQ,GAETH,QAAaF,GAAcQ,GAK/Bv4E,SAAQw4E,cAAgBC,GAAWC,YAAYC,WAC/C3kF,GACAikF,EAAWlJ,iBAAmB,MAEdwJ,EAAA,CACd,GAAGA,EACHpK,WAAY,KAKdnuE,EAAQw4E,cAAgBC,GAAWC,YAAYC,WAC/CJ,EAAcpK,YAAc,KAGZoK,EAAA,CACd,GAAGA,EACHnwB,KAAM,YAKNmwB,EAAcjI,YACdtwE,EAAQw4E,cAAgBC,GAAWC,YAAYE,UAE/BL,EAAA,CACd,GAAGA,EACHpD,SAAU,MAKT8C,EAAWM,EAAen/D,GAElC+5D,SAAOrrD,GAEC,CAACA,EAAOqtD,QACjB,EAEF,MAAM0D,EAA+B,GAG/BC,EAAgC,GACpBC,iBAAQjxD,IACpBA,EAAOooD,SACT2I,EAAelK,KAAK7mD,GAEpBgxD,EAAgBnK,KAAK7mD,EACvB,CACF,GAEI9nB,IAAQg5E,cAARh5E,QAAqB0R,OAEfsnE,cAAYD,QAAQE,IAC1B,MAAMnxD,EAASwwD,EAAkBpX,KAC/Bp5C,GAAUA,EAAOz4B,OAAS4pF,GAExBnxD,GAAU,CAACA,EAAOooD,UACpB2I,EAAelK,KAAK7mD,EACtB,CACF,EAGe6mD,OAAQmK,MAGLD,IAIbP,EAAkB5mE,OAAS,EAC9B4mE,EACA,CAAC5F,GAAagD,MAAuB,EACxC,CACD97D,EACAu9D,EACAiB,EACApkF,EACAgM,EAAQw4E,YACRx4E,EAAQg5E,YACR5/D,EACD,CAGCpF,CAEJ,CCjTO,SAASklE,GAAcpxD,EAAkB,CAEvCA,SAAOmgD,QACVyO,GACArO,GAAkBvgD,EAAOz4B,IAAI,EAC7B,GACAy4B,EAAOz4B,IACb,CAKA,MAAM8pF,GAcJC,YAAYC,EAAiB,CAXrBC,qBAAsD1F,IAGtD2F,eAA0C,GAG1CC,iBAAwB,GAGd,eAGhB,KAAKH,QAAUA,CACjB,CAQAI,OAAOzlE,EAA+B,CAC9B0lE,YAAqB9F,IACnBmF,UAAQjxD,IACC7E,MAAI6E,EAAO6tD,YAAa7tD,GACzC,EAEA,MAAM6xD,EAAe,CAInBC,YAAa,CAAC,EACdC,WAAY,CAAE,EACdC,aAAc,CAAE,GAMlB,YAAKR,YAAYP,QACf,CAACjyE,EAA4Bq4C,EAAkB46B,KAC7C,MAAMC,EAAiC,GACvClzE,EAAIiyE,QAAQ,CAAC/tF,EAAgBi0B,EAAkB86D,KACvCjyD,QAAS4xD,EAAerC,IAAIp4D,GAC9B6I,IACFkyD,EAAUd,GAAcpxD,IAAWA,EAAO+mD,aAAa7jF,GACzD,CACF,EACa4uF,cAAYz6B,GAAY66B,EACvC,EAMGT,eAAUR,QAASjyE,IACtB,MAAMmzE,EAAgC,GAItC,IAAIC,EAAe,GACnBpzE,EAAIiyE,QAAQ,CAAC/tF,EAAgBi0B,EAAkB86D,KACvCjyD,QAAS4xD,EAAerC,IAAIp4D,GAClC,GAAI6I,EAAQ,CACJmpC,QAAYnpC,EAAO+mD,aAAa7jF,GAGpC88B,EAAOwoD,YACPxoD,EAAOqmD,YACP9G,GAAmBr8E,CACnB,IAEekvF,EAAA,IAGbxQ,GAAmBzY,CAAY,IACxBioB,KAAcpxD,IAAWmpC,EAEtC,EACF,EACKipB,GACUL,aAAWlL,KAAKsL,EAC/B,CACF,EAGAN,EAAaG,aAAe,KAAKN,YAIpB9Q,KAAKG,UAAU8Q,EAAc,CAACQ,EAAI9mE,IAC7CA,IAAMg3D,OAAY,KAAOh3D,EAG7B,CAQA+mE,SAASC,EAA0BrmE,EAA6B,CAEzDslE,qBAAkB1F,IACvB,KAAK2F,UAAY,GACjB,KAAKC,YAAc,GAGbc,QAAe5R,KAAKC,MAAM0R,GAE1BX,MAAqB9F,IACnBmF,UAAQjxD,IACC7E,MAAI6E,EAAO6tD,YAAa7tD,GACzC,EAGMyyD,YAAoB3G,IAClBmF,UAAQjxD,IACdyyD,EAAct3D,IAAIi2D,GAAcpxD,CAASA,KAC3C,EAKA+rD,OAAO7lF,KAAKssF,EAAaV,WAAW,EAAEb,QAAQhvF,IACtCo1D,QAAW2pB,OAAO/+E,GAClBiwF,EAAYM,EAAaV,YAAY7vF,CAAI,EAC/C8pF,OAAO7lF,KAAKgsF,CAAWjB,UAASyB,UACxBvpB,QAAY+oB,EAAUQ,CAAQ,EAC9B1yD,EAASyyD,EAAclD,IAAImD,GACjC,GAAI1yD,EAAQ,CACJ98B,QAAO88B,EAAOsmD,QAAQnd,GACxBjmE,IACG,KAAKsuF,YAAYjwF,IAAI81D,CAAW,GACnC,KAAKm6B,YAAYr2D,IAAIk8B,EAAU,IAAIy0B,MAErCrzE,EAAA,KAAK+4E,YAAYjC,IAAIl4B,CAAWl8B,IAAhC,MAAA1iB,EAAgC0iB,IAAI6E,EAAO6tD,YAAa3qF,GAE5D,EACF,EACF,EAKa6uF,aAAWd,QAASjyE,IACzBmzE,YAAsCrG,IAMpCmF,UAAQjxD,IACdmyD,EAASh3D,IAAI6E,EAAO6tD,YAAa7tD,EAAOsmD,QAAQ,OAClD,EAGAyF,OAAO7lF,KAAK8Y,CAAKiyE,UAAQyB,IACjBvpB,QAAYnqD,EAAI0zE,CAAQ,EAExB1yD,EAASyyD,EAAclD,IAAImD,GAEjC,GAAI1yD,EAAQ,CACJ98B,QAAO88B,EAAOsmD,QAAQnd,GACxBjmE,GACOi4B,MAAI6E,EAAO6tD,YAAa3qF,EAErC,EACF,EACKuuF,eAAU5K,KAAKsL,GACtB,EAGA,KAAKT,YAAcc,EAAaR,YAClC,CAKAW,WAAW3zE,EAAsB,CAC/B,OAAOA,GAAO,KAAKuyE,OACrB,CAWAjL,QAAQh6D,EAAatN,EAAmC,CAClD,QAAK2zE,WAAW3zE,CAAM,EAExB,OAAO,KAAKyyE,UAAUzyE,EAAM,KAAKuyE,OAAO,EAAEhC,IAAIjjE,GAGhD,MAAMsmE,EAAW,KAAKpB,YAAYjC,IAAIvwE,GACtC,GAAI4zE,IAAarQ,OAIVqQ,SAASrD,IAAIjjE,EACtB,CASAumE,QAAQvmE,EAAatN,EAAa9b,EAAsB,CAClD,QAAKyvF,WAAW3zE,CAAM,GACxB,GAAIA,EAAM,KAAKuyE,SAAW,KAAKE,UAAU7nE,OAGvC,OAGF,KAAK6nE,UAAUzyE,EAAM,KAAKuyE,OAAO,EAAEp2D,IAAI7O,EAAKppB,QAExC,KAAKsuF,YAAYjC,IAAIvwE,KAASujE,QAChC,KAAKiP,YAAYr2D,IAAInc,EAAK,IAAI8sE,KAGf,KAAK0F,YAAYjC,IAAIvwE,GAC7Bmc,IAAI7O,EAAKppB,EAEtB,CAOA4vF,OAAOC,EAAuC,CACvCtB,eAAU5K,KAAKkM,EACtB,CAOAC,WAAW9kE,EAAsB,CAG5B+kE,OAAK,CAACpvF,EAAGC,IAAMA,EAAID,GACnBotF,QAAQjyE,IACP,KAAKk0E,UAAUl0E,GACjB,CACJ,CAOAk0E,UAAUl0E,EAAmB,CAC3B,GAAIuhE,KAAkBvhE,CAAQA,KAAM,GAKhC,SAAK2zE,WAAW3zE,CAAM,GAExB,KAAKyyE,UAAU0B,OAAOn0E,EAAM,KAAKuyE,QAAS,GAE1C,MACF,CAEK,KAAKG,YAAY12D,SAAShc,CAAM,IAE9B0yE,iBAAY7K,KAAK7nE,GAEjB0yE,iBAAc,KAAKA,YAAYuB,KAAK,CAACpvF,EAAGC,IAAMD,EAAIC,IAIpD0tF,iBAAY4B,OAAOp0E,GAC1B,CAWAq0E,oBAAoBr0E,EAAqB,CAEvC,IAAIs0E,EAAgBt0E,EACpB,QAASpa,EAAI,EAAGA,EAAI,KAAK8sF,YAAY9nE,QAC/B,OAAK8nE,YAAY9sF,GAAK0uF,GADiB1uF,IAI1B0uF,GAAA,EAEZA,QACT,CAKAC,YAAqB,CACnB,OAAO,KAAKhC,QAAU,KAAKE,UAAU7nE,OAAS,KAAK8nE,YAAY9nE,MACjE,CACF,CClTA,SAAS4pE,KACP,MAAMliE,EAAsBoF,KAuErB+8D,OArE4B9rF,GAAM0oF,QAAyB,KAChE,MAAM1yD,EAAc,CAIlB+1D,SAAWvlF,GACT,+FAA+FA,EAAE2vB,OAAO,qXAgDrG,OACL61D,WA9CiB,CAEjBC,YAAatiE,EAAMuiE,OAAOC,QAC1BC,SAAUziE,EAAMuiE,OAAOG,MACvBC,YAAaC,GAAe5iE,EAAMuiE,OAAOC,QAAS,IAClDK,YAAa7iE,EAAMuiE,OAAOO,iBAC1BC,sBAAuB/iE,EAAMuiE,OAAOO,iBACpCE,WAAYhjE,EAAMijE,aAAaC,SAC/BC,eAAgBP,GAAe5iE,EAAMuiE,OAAOC,QAAS,IACrDY,qBAAsBpjE,EAAMuiE,OAAOC,QAEnCa,aAAcrjE,EAAMuiE,OAAOe,YAC3BC,aAAcvjE,EAAMuiE,OAAOG,MAC3Bc,SAAUxjE,EAAMuiE,OAAOkB,MACvBC,iBAAkB1jE,EAAMuiE,OAAOoB,YAC/BC,gBAAiB5jE,EAAMuiE,OAAOoB,YAC9BE,WAAY7jE,EAAMuiE,OAAOe,YACzBQ,mBAAoB9jE,EAAMuiE,OAAOG,MACjCqB,gBAAiB/jE,EAAMuiE,OAAOe,YAC9BU,gBAAiB,GAAGhkE,EAAMikE,UAAUC,EAAE,GAEtCC,cAAenkE,EAAMikE,UAAUC,GAC/BE,eAAgBpkE,EAAMikE,UAAUC,GAChC1I,SAAUx7D,EAAMuiE,OAAO8B,SACvBC,WAAY1B,GAAe5iE,EAAMuiE,OAAO8B,SAAU,IAClDE,UAAWvkE,EAAMuiE,OAAOiC,YACxBC,WAAYzkE,EAAMuiE,OAAOe,YACzBvtD,OAAQ/V,EAAMuiE,OAAO/1D,QAErBk4D,aAAc1kE,EAAMuiE,OAAO/1D,QAC3Bm4D,sBAAuB/T,KAAKC,MAAM+T,GAAe5kE,EAAM6kE,QAAQX,EAAE,GACjEY,oBAAqBlU,KAAKC,MAAM+T,GAAe,cAE/CG,SAAU/kE,EAAMuiE,OAAOoB,YACvBqB,iBAAkBhlE,EAAMuiE,OAAOoB,YAC/BsB,UAAWjlE,EAAMuiE,OAAO2C,SACxBC,gBAAiBnlE,EAAMuiE,OAAO6C,iBAW9BC,kBAAmBrlE,EAAMslE,MAAMhH,QAC/BiH,iBAAkB,EAElBC,mBAAoB5U,KAAKC,MAAM+T,GAAe,UAC9C7+D,eAAgB6qD,KAAKC,MAAM+T,GAAe,aAC1C5+D,eAAgB4qD,KAAKC,MAAM+T,GAAe,YAC1Ct4B,mBAAoBskB,KAAKC,MAAM+T,GAAe,aAC9Ca,iBAAkB7U,KAAKC,MAAM+T,GAAe,cAC5Cc,oBAAqB9U,KAAKC,MAAM+T,GAAe,cAC/Cv4D,cACF,EACC,CAACrM,EAAM,CAGZ,CCnFA,SAAS2lE,GACPnlE,EACA5F,EACAqlE,EACAiB,EAAkD,CAG5C0E,QAAgBplE,EAAK5F,QAAQtC,OA0D5B,OACLoa,eA1DqBr8B,GAAMwvF,YAC3B,CAAC,CAAC7qE,EAAKtN,CAA+B,KAChCsN,KAAMJ,EAAQtC,OAAS,EAClBi1D,UACL,8BACA,qDAIA7/D,KAAMuyE,EAAU,EACX1S,UACL,2BACA,qDAGE7+C,QAAS9T,EAAQI,CAAI,EAErB8qE,EAAcp3D,EAAO6tD,YACrBwJ,EAAc7E,EAAarhF,QAAQkiF,oBAAoBr0E,GACvD2zE,EAAaH,EAAarhF,QAAQwhF,WAAW0E,GAE/Cr3D,KAAOqmD,YAAcsM,EAAY,CACnC,MAAM2E,EAAa9E,EAAarhF,QAAQm1E,QACtC8Q,EACAC,GAEEzV,MAAmB0V,CAAa,EAC3BA,YACE3E,EAGT,OAAO9T,GACL,8BACA,yFACyCuY,CAAY,SAAQC,GAAa,CAGhF,CAEI,IAGF,MAAMjJ,EAAYt8D,EAAKw0D,QACrB+Q,EAAcH,EACdE,GAEF,OAAOjJ,GAAiBnuD,EAAQouD,EAAWt8D,EAAK86D,SAAS,QAClDhE,EAAO,CACd,OAAO/J,GACL,8BACA;AAAA,SAA8D+J,GAAO,CAEzE,GAEF,CAAC18D,EAASqlE,EAASz/D,EAAM0gE,EAAc0E,EAAc,CAIrDlzD,CAEJ,CClDA,SAASuzD,GACPr/E,EACAu7E,EACAlC,EACAiG,EACAn+E,EACAK,EACA+9E,EAAsB,CAEtB,MAAMroE,EAAYqkE,EAAUsD,iBAGtBW,EACJjE,EAAUuD,oBAAsB5nE,EAAY,EAAIqkE,EAAUoD,iBAGtDK,EAAgBM,EAAe,EAAI,EACnCG,EACJz/E,EAAQw4E,cAAgBC,GAAWC,YAAYE,QAAU,EAAI,EAEzD8G,EAAgBrG,EAAUoG,EAC5BnM,MAAYtJ,KAAK5vD,IACnBslE,EAAgBxoE,EACd8nE,EAAgBzD,EAAUuD,oBAC1B,EAAIvD,EAAUoD,iBAChBa,GAQEG,EAAgB3V,KAAKzgC,IAAI+pC,EAAWiI,EAAUqD,kBAAkB,EAEhE5+E,EAAQlE,SAEV6jF,EAAgB3V,KAAK5vD,IAAIpa,EAAQlE,OAAQ0jF,GACzClM,EAAYtJ,KAAK5vD,IAAIpa,EAAQlE,OAAQw3E,IAGnC9xE,IAGcwoE,OAAKzgC,IAAIo2C,EAAen+E,GAC5BwoE,OAAKzgC,IAAI+pC,EAAW9xE,GAE3BxB,EAAQlE,SAEKw3E,MAMpB,MAAMsM,EAAWrE,EAAUp8D,eAAiB,EAAIo8D,EAAUoD,iBAOpDkB,EAAiB7V,KAAK5vD,IAAIjZ,EAAgBy+E,GAO5CE,MAEAh4B,EAAW+3B,EAEX7/E,EAAQq4E,kBAGKwH,IACN7/E,EAAQ5L,QAIF41E,OAAKzgC,IAAIygC,KAAK5vD,IAAIpa,EAAQ5L,MAAOwrF,CAAWC,KAGhD7V,OAAKzgC,IAAIygC,KAAK5vD,IAAIpa,EAAQ5L,MAAO0zD,CAAW+3B,MAGzD,KAAM,CAACE,EAAeC,GAAoBvwF,GAAM88C,SAAwB,CAItEn4C,MAAO0rF,GAAgB,OACvBhkF,OAAQ6jF,EACV,EAEAlwF,UAAM+8C,gBAAgB,KAGhBxsC,EAAQq4E,mBAAqB0H,EAAc3rF,QAAU,QACtC4rF,EAAA,CACf5rF,MAAOyrF,EACP/jF,OAAQikF,EAAcjkF,OACxB,CACF,EACC,CAAC+jF,EAAe,EAGnBpwF,GAAM+8C,gBAAgB,KACHwzC,EAAA,CACf5rF,MAAO2rF,EAAc3rF,MACrB0H,OAAQ6jF,EACV,GACC,CAACtG,EAAQ,EAGZ5pF,GAAM+8C,gBAAgB,KACHwzC,EAAA,CACf5rF,MAAO0rF,GAAgB,OACvBhkF,OAAQikF,EAAcjkF,OACxB,GACC,CAACgkF,EAAa,EAGjBrwF,GAAM+8C,gBAAgB,KACHwzC,EAAA,CACf5rF,MAAO2rF,EAAc3rF,MACrB0H,OAAQ6jF,EACV,GACC,CAACA,EAAc,EAGlBlwF,GAAM+8C,gBAAgB,KACpB,GAAI+yC,EAAc,CACVnH,QACJp4E,EAAQq4E,mBACP3O,GAAmB1pE,EAAQ5L,KAAK,GAAK4L,EAAQ5L,MAAQ,EACvC4rF,EAAA,CACf5rF,MAAOgkF,EAAiBtwB,EAAW,OACnChsD,OAAQw3E,EACV,OAEiB0M,EAAA,CACf5rF,MAAO0rF,GAAgB,OACvBhkF,OAAQ6jF,EACV,CACF,EACC,CAACJ,EAAa,EAEV,CACLC,YACAlM,YACAsM,WACA93B,WACA5wC,YACA6oE,gBACAC,mBAEJ,CC5JA,SAASC,GACPjsE,EACAksE,EACA5F,EACAxuD,EACAq0D,EACAC,EAKAC,EACAC,EACAC,EAA0B,CAEpB59B,QAAelzD,GAAMwvF,YACzB,CACE,CAAC7qE,EAAKtN,GACN05E,KAEM14D,QAAS9T,EAAQI,CAAI,EAEvB,IAAC0T,EAAOqmD,WACV,OAGF,MAAM+Q,EAAcp3D,EAAO6tD,YAKrBwJ,EAAc7E,EAAarhF,QAAQkiF,oBACvCgF,EAAiBr5E,IAEb4nD,EAAc5iC,EAAe,CAAC1X,EAAKtN,EAAI,EACvC25E,EAAe34D,EAAO+mD,aAAangB,GACnCnI,EAAWz+B,EAAO+mD,aAAa2R,GACrC,GAAI,CAACtZ,GAAYxY,CAAgBnI,OAAak6B,EAE5C,OAGF,MAAMC,EAAU54D,EAAOsmD,QAAQ7nB,EAAU,IAEpC2gB,GAAYwZ,CAAU,EASvBC,GAAA;AAAA,GAA4DD,EAAQ9mE,IAAI,EAAE,GAR/D3gB,UAAQ0hF,QAAQuE,EAAaC,EAAa,CACrD,GAAGuB,EACHE,YAAaC,YAAYljF,IAAG,EAC9B,EAEA2iF,IAKF,EAEF,CAACtsE,EAASsmE,EAAc6F,EAAkBr0D,EAAgBw0D,EAAc,EAMpEQ,EAAiBrxF,GAAMwvF,YAAY,KACvC,GAAIiB,EAEF,OAGIa,YAAoCnN,IAClCmF,UAAQjxD,IAGdi5D,EAAO99D,IAAI6E,EAAO6tD,YAAa7tD,EAAOsmD,QAAQtmD,EAAO1+B,YAAY,GACnE,EACa6P,UAAQ2hF,OAAOmG,GAC5BV,KACC,CAACrsE,EAASsmE,EAAc4F,EAAcG,EAAc,EAKjDp9B,EAAgBxzD,GAAMwvF,YAAY,KAClCiB,IAKJY,IACAR,MACC,CAACQ,EAAgBR,EAAeJ,EAAa,EAK1Cv5B,EAAWl3D,GAAMwvF,YACpB3yF,UACKA,KAAU0pB,KAAKtE,OAAS,EAAG,CAE7B,GAAIwuE,EAEK,SAGT,MAAMc,EAAe10F,EAAU0pB,KAAKirE,UAAUniB,IAAIh4D,GACzCwzE,EAAarhF,QAAQkiF,oBAC1BgF,EAAiBr5E,GAErB,EAEa7N,iBAAQ6hF,WAAWkG,GAChCX,IACAE,IACAD,IACO,EACT,CACIh0F,QAAU2M,UAAV3M,QAAmBT,MAAO,CAE5B,MAAMq1F,EAA6C,GAC7CC,EAAe70F,EAAU2M,QAAQpN,MAEjCib,UAAMq6E,EAAaxuF,EACvBmU,EAAMq6E,EAAaxuF,EAAIwuF,EAAarlF,OACpCgL,IAGMsN,UAAM+sE,EAAa90F,EACvB+nB,EAAM+sE,EAAa90F,EAAI80F,EAAa/sF,MACpCggB,IACA,CACM0T,QAAS9T,EAAQI,CAAI,EAEvB0T,EAAOqmD,YAAc,CAACrmD,EAAOwoD,aAC/B4Q,EAAavS,KAAK,CAChB3jF,KAAM,CAACopB,EAAKtN,CAAI,EAClB,EAEE67C,EAAA,CAACvuC,EAAKtN,CACNghB,IAAOsmD,QAAQ,OAGrB,CAGE8S,SAAaxvE,OAAS,IACxB4uE,IACAF,EAAac,IAER,EACT,CACO,UAET,CACEltE,EACAsmE,EACA4F,EACAE,EACAD,EACAG,EACA39B,EACA49B,EACAF,EACD,EAMG38B,EAAUj0D,GAAMwvF,YACpB,CAACzuF,EAAcwf,KACP,MAACkpB,EAAWC,GAAa3oC,EAEzB0wF,EAA6C,GAEnD,QAASp6E,EAAM,EAAGA,EAAMkJ,EAAO0B,OAAQ5K,IAAO,CACtCs6E,QAAUpxE,EAAOlJ,CAAI,EAC3B,GAAIA,EAAMqyB,GAAamhD,EAAarhF,QAAQoiF,aAAc,CACxD,GAAI6E,EAEF,MAIFY,GACF,CACA,QAAS1sE,EAAM,EAAGA,EAAMgtE,EAAQ1vE,OAAQ0C,IAAO,CACvCitE,QAAiBD,EAAQhtE,CAAI,EAE7B+qC,EAAWr4C,EAAMqyB,EACjBla,EAAW7K,EAAM8kB,EAEnBja,MAAYjL,EAAQtC,OAEtB,MAGIoW,QAAS9T,EAAQiL,CAAS,EAEhC,GAAI6I,EAAOqmD,WAAY,CACrB,MAAMuS,EAAU54D,EAAOsmD,QAAQiT,EAAgB,IAG/C,GAAI3X,GAAmBgX,IAAY,CAACxZ,GAAYwZ,CAAU,GACxD,MAAMxB,EAAcp3D,EAAO6tD,YACrBwJ,EAAc7E,EAAarhF,QAAQkiF,oBACvCgF,EAAiBhhC,IAEbshC,EAAe34D,EAAO+mD,aAC1B/iD,EAAe,CAAC7M,EAAUkgC,CAAS,IAEpBr3B,EAAO+mD,aAAa6R,KAEpBD,IACFxnF,UAAQ0hF,QAAQuE,EAAaC,EAAa,CACrD,GAAGuB,EACHE,YAAaC,YAAYljF,IAAG,EAC9B,EAEAujF,EAAavS,KAAK,CAChB3jF,KAAM,CAACi0B,EAAUkgC,CAAS,EAC5B,EAEJ,CACF,CACF,CAEI+hC,EAAaxvE,OAAS,IACxB4uE,IACAF,EAAac,GAEjB,CAEO,UAET,CACEltE,EACAsmE,EACA4F,EACAC,EACAr0D,EACAg1D,EACAR,EACAF,EACD,EAMG95B,EAAe72D,GAAMwvF,YACzB,CAACj0F,EAAYu7D,KACLnyC,QAAMppB,EAAK,CAAE,EACfopB,MAAOJ,EAAQtC,OAGV,SAGHoW,QAAS9T,EAAQI,CAAI,EAC3B,GAAI0T,EAAOuoD,cAAe,CAGxB,MAAMG,EAAmB1oD,EAAOuoD,cAC9BvoD,EAAO+mD,aAAatoB,IAElBiqB,WAAqB,IAAQA,IAAqB,GAG7CA,EAGF1oD,EAAOsmD,QAAQoC,EACxB,CAEO,UAET,CAACx8D,EAAQ,EAGJ,OACL2uC,eACAe,UACAT,gBACA0D,WACAL,eAEJ,CC3TA,SAAS3mC,GAAe3L,EAAqB,CAErC,MAACstE,EAAaC,GAAkBh1C,WACpC,IAAM,IAAIqnC,KAGN/oC,EAAiBp7C,GAAMwvF,YAC3B,CACEn3D,EACA05D,EACAC,EACAC,KAEI55D,EAAO/a,IACMw0E,EAAA,IAAI3N,IAAI0N,GAAar+D,IAAI6E,EAAO/a,GAAI20E,GACrD,EAEF,CAACJ,EAAY,EAqBR,OACLttE,QAnBmBvkB,GAAM0oF,QAAQ,IAC1BnkE,EAAQ8qD,IAAIh3C,GAEfA,EAAO/a,IACPu0E,EAAYj4F,IAAIy+B,EAAO/a,EAAE,GACzBu0E,EAAYjK,IAAIvvD,EAAO/a,EAAE,IAAMs9D,OAExB,CACL,GAAGviD,EACH1zB,MAAOktF,EAAYjK,IAAIvvD,EAAO/a,EAAE,EAEhCi7D,KAAM,GAGHlgD,CACT,EACC,CAAC9T,EAASstE,EAAY,EAIvBz2C,iBAEJ,CCtEA,SAAS82C,GAAe/2F,EAAG,SACvB,OAAQA,EAAE,KAAI,CACV,KAAKJ,EAAa,OACd,QAAO+V,EAAA3V,EAAE,OAAF,YAAA2V,EAAQ,aAAc,GACjC,KAAK/V,EAAa,QACd,QAAOwkC,EAAApkC,EAAE,OAAF,YAAAokC,EAAQ,aAAc,GACjC,KAAKxkC,EAAa,SAClB,KAAKA,EAAa,MAClB,KAAKA,EAAa,KAClB,KAAKA,EAAa,IACd,OAAOI,EAAE,MAAQ,GACrB,KAAKJ,EAAa,OAClB,KAAKA,EAAa,MACd,OAAOI,EAAE,KAAK,KAAK,EAAE,EACzB,KAAKJ,EAAa,UACd,OAAOI,EAAE,KAAK,IAAIyB,GAAKA,EAAE,IAAI,EAAE,KAAK,EAAE,EAC1C,KAAK7B,EAAa,UAClB,KAAKA,EAAa,QACd,MAAO,GACX,KAAKA,EAAa,OACd,OAAOI,EAAE,QAChB,CACL,CACA,SAASg3F,GAASh8E,EAAK,CACnB,GAAI,OAAOA,GAAQ,SACf,OAAOA,EACX,GAAIA,EAAI,OAAS,EAAG,CAChB,MAAMvZ,EAAI,OAAOuZ,CAAG,EACf,MAAMvZ,CAAC,IACRuZ,EAAMvZ,EAEb,CACD,OAAOuZ,CACX,CACO,SAASi8E,GAAal2F,EAAGC,EAAG,CAG/B,OAFAD,EAAIi2F,GAASj2F,CAAC,EACdC,EAAIg2F,GAASh2F,CAAC,EACV,OAAOD,GAAM,UAAY,OAAOC,GAAM,SAC/BD,EAAE,cAAcC,CAAC,EAEnB,OAAOD,GAAM,UAAY,OAAOC,GAAM,SACvCD,IAAMC,EACC,EACJD,EAAIC,EAAI,EAAI,GAEdD,GAAKC,EACH,EAEJD,EAAIC,EAAI,EAAI,EACvB,CACO,SAASk2F,GAAWn2F,EAAGC,EAAG,CAC7B,OAAID,EAAIC,EACG,EACPD,IAAMC,EACC,EACJ,EACX,CACO,SAASm2F,GAAc9rF,EAAG,CAC7B,KAAM,CAAE,KAAA8kF,EAAM,KAAA/kE,EAAM,eAAgBgsE,CAAgB,EAAK/rF,EACzD,IAAIgsF,EAAUlH,IAAS,OACjB,OACA9kF,EAAE,QAAQ,UAAUrL,GAAKmwF,EAAK,SAAWnwF,GAAMA,EAAE,KAAO,QAAamwF,EAAK,OAAO,KAAOnwF,EAAE,EAAG,EAC/Fq3F,IAAY,KACZA,EAAU,QAKd,MAAMjlE,GAAM+9D,GAAA,YAAAA,EAAM,YAAa,MACzBmH,EAAU/hE,UAAc,IAAM,CAChC,GAAI8hE,IAAY,OACZ,OACJ,MAAME,EAAO,IAAI,MAAMnsE,CAAI,EACrBlpB,EAAQ,CAACm1F,EAAS,CAAC,EACzB,QAASv1F,EAAI,EAAGA,EAAIspB,EAAMtpB,IACtBI,EAAM,CAAC,EAAIJ,EACXy1F,EAAKz1F,CAAC,EAAIi1F,GAAeK,EAAiBl1F,CAAK,CAAC,EAEpD,IAAIK,EACJ,OAAI4tF,GAAA,YAAAA,EAAM,QAAS,MACf5tF,EAAStB,GAAMmqB,CAAI,EAAE,KAAK,CAACrqB,EAAGC,IAAMk2F,GAAWK,EAAKx2F,CAAC,EAAGw2F,EAAKv2F,CAAC,CAAC,CAAC,GAE3DmvF,GAAA,YAAAA,EAAM,QAAS,QACpB5tF,EAAStB,GAAMmqB,CAAI,EAAE,KAAK,CAACrqB,EAAGC,IAAMi2F,GAAaM,EAAKx2F,CAAC,EAAGw2F,EAAKv2F,CAAC,CAAC,CAAC,EAGlEuB,EAAStB,GAAMmqB,CAAI,EAAE,KAAK,CAACrqB,EAAGC,IAAMu2F,EAAKx2F,CAAC,EAAE,cAAcw2F,EAAKv2F,CAAC,CAAC,CAAC,EAElEoxB,IAAQ,QACR7vB,EAAO,QAAO,EAEXA,CACf,EAAO,CAAC60F,EAAkBhsE,EAAM+kE,GAAA,YAAAA,EAAM,KAAM/9D,EAAKilE,CAAO,CAAC,EAC/C9B,EAAmB98E,cAAmBvW,GACpCo1F,IAAY,OACLp1F,EACJo1F,EAAQp1F,CAAK,EACrB,CAACo1F,CAAO,CAAC,EACNp2D,EAAiBzoB,EAAiB,YAAC,CAAC,CAAC+Q,EAAKtN,CAAG,IAC3Co7E,IAAY,OACLF,EAAiB,CAAC5tE,EAAKtN,CAAG,CAAC,GACtCA,EAAMo7E,EAAQp7E,CAAG,EACVk7E,EAAiB,CAAC5tE,EAAKtN,CAAG,CAAC,GACnC,CAACk7E,EAAkBE,CAAO,CAAC,EAC9B,OAAIA,IAAY,OACL,CAAE,eAAgBjsF,EAAE,eAAgB,iBAAAkqF,CAAgB,EAExD,CACH,iBAAAA,EACA,eAAAr0D,CACR,CACA,CCnEA,SAASs2D,GACPpuE,EACA+mE,EAAkC,CAElC,OAAIA,IAAS1Q,OACJr2D,EAEFA,EAAQ8qD,IAAIh3C,GACbA,EAAO/a,KAAOguE,EAAKjzD,OAAO/a,GACrB,CACL,GAAG+a,EACH5f,MACE6yE,EAAKv4E,YAAc,MAAQ,KAAKslB,EAAO5f,KAAK,GAAK,KAAK4f,EAAO5f,KAAK,IAGjE4f,CACT,CACF,CAoBA,SAASi6D,GACP1I,EACArlE,EACA8X,EAAmE,CAEnE,KAAM,CAACivD,EAAMsH,CAAQ,EAAG5yF,GAAM88C,SAAQ,EAEhC,CAAEzgB,eAAgBw2D,EAAsBnC,oBAC5CoC,GAAmB,CACjBvuE,QAASA,EAAQ8qD,IAAIh3C,GAAU8/C,GAAc9/C,IAC7CgE,iBACA9V,KAAMqjE,EACN0B,OACF,EAEIyH,EAAiB/yF,GAAM0oF,QAAQ,IAC5BiK,GAAoBpuE,EAAS+mE,GACnC,CAAC/mE,EAAS+mE,EAAK,EAEZ0H,EAAahzF,GAAMwvF,YACtBnyF,IACC,IAAI41F,EAAgB,MACdC,QAAgBH,EAAe11F,CAAM,EAE3C,GAAIiuF,GAAQA,EAAKjzD,OAAO/a,KAAO41E,EAAc51E,GAEvCguE,KAAKv4E,YAAc,MAELkgF,EAAA,WACX,CAELL,EAAQhY,QACR,MACF,CAGMgY,EAAA,CACNv6D,OAAQ8/C,GAAc+a,GACtBngF,UAAWkgF,EACXE,KAAMD,EAAczU,SACtB,GAEF,CAAC6M,EAAMyH,EAAe,EAGjB,OACLxuE,QAASwuE,EACTC,aACAtC,mBACAr0D,eAAgBw2D,EAEpB,CCvGO,MAAMO,GAAmB,IAEnBC,GAAwB,gCAqBrC,SAASC,GACP/uE,EACA8X,EAAmE,CAEnE,KAAM,CAACs7C,EAAS4b,CAAW,EAAGvzF,GAAM88C,SAAQ,EAGtC02C,EAAaxzF,GAAM48C,OAAY,MAE/BpN,EAAgBxvC,GAAMwvF,YACzB1sF,IAMC,GAJA2wF,aAAaD,EAAWhqF,OAAO,EAC/BgqF,EAAWhqF,QAAU,EACrB+pF,EAAW3Y,SAEN93E,EAAKu0E,OAAS,UAAYv0E,EAAKu0E,OAAS,SAAWv0E,EAAKkiB,SAAU,CAC/D0uE,QAAS5wF,EAAKkiB,SAAS,CAAE,EACzB2uE,EAAS7wF,EAAKkiB,SAAS,CAAE,EAC3B4uE,MAEJ,GAAIF,EAAS,GAAKA,GAAUnvE,EAAQtC,OAGlC,OAGIoW,QAAS9T,EAAQmvE,CAAO,EAE9B,GAAI5wF,EAAKu0E,OAAS,UAAY4C,GAAmB5hD,CAAS,EACxDu7D,EAAiBv7D,EAAO6vD,aACfplF,EAAKu0E,OAAS,OAAQ,CAG/B,MAAM97E,EAAO8gC,EAAe,CAACq3D,EAAQC,EAAO,EAE1Ct7D,EAAOwoD,YACPxoD,EAAOqmD,YACP9G,GAAmBr8E,CACnB,EACiB83F,KACR3b,GAAWn8E,CAAO,IAC3Bq4F,EAAiBr4F,EAAKo8E,QAE1B,CAEIic,IACSpqF,UAAUqqF,WAAW,KAC1BD,GACSL,EAAA,CACT11E,QAAS+1E,EACTp2F,KAAMsF,EAAKmwC,OAAOr2C,EAAIkG,EAAKmwC,OAAOtuC,MAAQ,EAC1CtI,IAAKyG,EAAKmwC,OAAO/vC,EACnB,GAEDkwF,IAEP,GAEF,CAAC7uE,EAAS8X,EAAgBk3D,EAAYC,EAAW,EAG7CM,EAAe9zF,GAAMwvF,YAAY,KACrC+D,EAAW3Y,SACV,CAAC2Y,EAAW,EAER,OACL5b,UACAmc,eACAtkD,gBAEJ,CC7HA,MAAM3wB,GAAW,CACb,KAAM9jB,EAAa,OACnB,QAAUQ,GAASA,EAAK,KAAK,OAAS,iBACtC,WAAY,GACZ,mBAAoB,GACpB,KAAM,CAACuH,EAAMvH,IAAS,CAClB,KAAM,CAAE,IAAAitB,EAAK,MAAAmB,EAAO,KAAAzE,EAAM,YAAA0b,EAAa,OAAAC,CAAQ,EAAG/9B,EAElD,GAAI,CAAE,OAAAyd,EAAQ,MAAAi+D,EAAO,MAAAj8D,EAAO,UAAAg8D,EAAY,OAAQ,cAAAD,EAAe,SAAAyV,CAAQ,EAAKx4F,EAAK,KACjF,KAAM,CAACgrC,EAAMC,CAAI,EAAIg4C,EACrB,GAAIj+D,EAAO,SAAW,EAClB,MAAO,GACXA,EAASA,EAAO,IAAI,GAAK,KAAK,IAAI,EAAG,KAAK,IAAI,GAAI,EAAIgmB,IAASC,EAAOD,EAAK,CAAC,CAAC,EAC7E,MAAMglC,EAAO5hD,EAAM,sBACb8N,EAAQ8zC,EAAOrmD,EAAK,EACpB,EAAIA,EAAK,EAAI,EACb7Y,EAAS6Y,EAAK,OAAS,EACvBvgB,EAAQugB,EAAK,MAAQqmD,EAAO,EAC5BzjE,EAAQ0+B,EAAOD,EACfytD,EAAQxtD,GAAQ,EAAI,EAAID,GAAQ,EAAI,EAAIl6B,EAAS,EAAIA,GAAUm6B,EAAO1+B,GAY5E,GAVI,CAACisF,GAAYxtD,GAAQ,GAAKC,GAAQ,IAClChe,EAAI,UAAS,EACbA,EAAI,OAAOiP,EAAOu8D,CAAK,EACvBxrE,EAAI,OAAOiP,EAAQ9yB,EAAOqvF,CAAK,EAC/BxrE,EAAI,YAAc,GAClBA,EAAI,UAAY,EAChBA,EAAI,YAAcmB,EAAM,UACxBnB,EAAI,OAAM,EACVA,EAAI,YAAc,GAElB+1D,IAAc,MAAO,CACrB/1D,EAAI,UAAS,EACb,MAAMyrE,EAAS,EACTzF,GAAWjuE,EAAO,OAAS,GAAK0zE,EAChCC,GAAYvvF,EAAQ6pF,GAAWjuE,EAAO,OAC5C,IAAI3jB,EAAI66B,EACR,UAAWthB,KAAOoK,EAAQ,CACtB,MAAM4zE,EAAO,EAAI9nF,EAAS8J,EAAM9J,EAChCmc,EAAI,OAAO5rB,EAAGo3F,CAAK,EACnBxrE,EAAI,OAAO5rB,EAAIs3F,EAAUF,CAAK,EAC9BxrE,EAAI,OAAO5rB,EAAIs3F,EAAUC,CAAI,EAC7B3rE,EAAI,OAAO5rB,EAAGu3F,CAAI,EAClBv3F,GAAKs3F,EAAWD,CACnB,CACDzrE,EAAI,UAAYjtB,EAAK,KAAK,OAASouB,EAAM,YACzCnB,EAAI,KAAI,CACX,KACI,CACGjI,EAAO,SAAW,IAClBA,EAAS,CAACA,EAAO,CAAC,EAAGA,EAAO,CAAC,CAAC,EAC1B+9D,IACAA,EAAgB,CAACA,EAAc,CAAC,EAAGA,EAAc,CAAC,CAAC,IAI3D91D,EAAI,UAAS,EACb,MAAM4rE,GAASlvE,EAAK,MAAQ,KAAO3E,EAAO,OAAS,GAC7CwL,EAASxL,EAAO,IAAI,CAACpK,EAAK2zC,KACrB,CACH,EAAGryB,EAAQ28D,EAAQtqC,EACnB,EAAG,EAAIz9C,EAAS8J,EAAM9J,CAC1C,EACa,EACDmc,EAAI,OAAOuD,EAAO,CAAC,EAAE,EAAGA,EAAO,CAAC,EAAE,CAAC,EACnC,IAAI9uB,EAAI,EACR,GAAI8uB,EAAO,OAAS,EAChB,IAAK9uB,EAAI,EAAGA,EAAI8uB,EAAO,OAAS,EAAG9uB,IAAK,CACpC,MAAMo3F,GAAYtoE,EAAO9uB,CAAC,EAAE,EAAI8uB,EAAO9uB,EAAI,CAAC,EAAE,GAAK,EAC7Cq3F,GAAYvoE,EAAO9uB,CAAC,EAAE,EAAI8uB,EAAO9uB,EAAI,CAAC,EAAE,GAAK,EACnDurB,EAAI,iBAAiBuD,EAAO9uB,CAAC,EAAE,EAAG8uB,EAAO9uB,CAAC,EAAE,EAAGo3F,EAAUC,CAAQ,CACpE,CASL,GAPA9rE,EAAI,iBAAiBuD,EAAO9uB,CAAC,EAAE,EAAG8uB,EAAO9uB,CAAC,EAAE,EAAG8uB,EAAO9uB,EAAI,CAAC,EAAE,EAAG8uB,EAAO9uB,EAAI,CAAC,EAAE,CAAC,EAC/EurB,EAAI,YAAcjG,GAASoH,EAAM,YACjCnB,EAAI,UAAY,EAAIoY,EAAc,GAClCpY,EAAI,OAAM,EACVA,EAAI,OAAOtD,EAAK,EAAIA,EAAK,MAAQqmD,EAAMyoB,CAAK,EAC5CxrE,EAAI,OAAOtD,EAAK,EAAIqmD,EAAMyoB,CAAK,EAC/BxrE,EAAI,UAAS,EACT+1D,IAAc,OAAQ,CACtB/1D,EAAI,YAAc,GAAM,GAAMoY,EAC9B,MAAMyC,EAAO7a,EAAI,qBAAqB,EAAG,EAAG,EAAG,EAAInc,EAAS,GAAG,EAC/Dg3B,EAAK,aAAa,EAAG9gB,GAASoH,EAAM,WAAW,EAC/C,KAAM,CAAC9G,EAAGC,EAAG3mB,CAAC,EAAImmB,GAAYC,GAASoH,EAAM,WAAW,EACxD0Z,EAAK,aAAa,EAAG,QAAQxgB,CAAC,KAAKC,CAAC,KAAK3mB,CAAC,MAAM,EAChDqsB,EAAI,UAAY6a,EAChB7a,EAAI,KAAI,EACRA,EAAI,YAAc,CACrB,CACD,GAAIqY,IAAW,SAAc09C,IAAc,QAAUA,IAAc,SAAWD,IAAkB,OAAW,CACvG91D,EAAI,UAAS,EACb,MAAM+rE,EAAU,KAAK,IAAIh0E,EAAO,OAAS,EAAG,KAAK,IAAI,EAAG,KAAK,OAAOsgB,EAAS0qC,GAAQ6oB,CAAK,CAAC,CAAC,EAC5F5rE,EAAI,OAAOiP,EAAQ88D,EAAUH,EAAOlvE,EAAK,EAAI,CAAC,EAC9CsD,EAAI,OAAOiP,EAAQ88D,EAAUH,EAAOlvE,EAAK,EAAIA,EAAK,MAAM,EACxDsD,EAAI,UAAY,EAChBA,EAAI,YAAcmB,EAAM,UACxBnB,EAAI,OAAM,EACVA,EAAI,KAAI,EACRA,EAAI,KAAO,OAAOmB,EAAM,UAAU,GAClCnB,EAAI,UAAYmB,EAAM,WACtBnB,EAAI,aAAe,MACnBA,EAAI,SAAS81D,EAAciW,CAAO,EAAG98D,EAAOvS,EAAK,EAAIyE,EAAM,mBAAmB,EAC9EnB,EAAI,QAAO,CACd,CACJ,CACD,MAAO,EACV,EACD,cAAe,OACf,QAAS,CAACgsE,EAAInyE,IAAMA,CACxB,EC/GO,SAASoJ,GAAYjD,EAAK5rB,EAAGsG,EAAGyB,EAAO0H,EAAQqf,EAAQ,CAC1D,GAAI,EAAA/mB,GAAS,GAAK0H,GAAU,GAE5B,IAAI,OAAOqf,GAAW,UAAYA,GAAU,EAAG,CAC3ClD,EAAI,KAAK5rB,EAAGsG,EAAGyB,EAAO0H,CAAM,EAC5B,MACH,CACG,OAAOqf,GAAW,WAClBA,EAAS,CAAE,GAAIA,EAAQ,GAAIA,EAAQ,GAAIA,EAAQ,GAAIA,IAGvDA,EAAS,CACL,GAAI,KAAK,IAAIA,EAAO,GAAIrf,EAAS,EAAG1H,EAAQ,CAAC,EAC7C,GAAI,KAAK,IAAI+mB,EAAO,GAAIrf,EAAS,EAAG1H,EAAQ,CAAC,EAC7C,GAAI,KAAK,IAAI+mB,EAAO,GAAIrf,EAAS,EAAG1H,EAAQ,CAAC,EAC7C,GAAI,KAAK,IAAI+mB,EAAO,GAAIrf,EAAS,EAAG1H,EAAQ,CAAC,CACrD,EACI+mB,EAAO,GAAK,KAAK,IAAI,EAAGA,EAAO,EAAE,EACjCA,EAAO,GAAK,KAAK,IAAI,EAAGA,EAAO,EAAE,EACjCA,EAAO,GAAK,KAAK,IAAI,EAAGA,EAAO,EAAE,EACjCA,EAAO,GAAK,KAAK,IAAI,EAAGA,EAAO,EAAE,EACjClD,EAAI,OAAO5rB,EAAI8uB,EAAO,GAAIxoB,CAAC,EAC3BslB,EAAI,MAAM5rB,EAAI+H,EAAOzB,EAAGtG,EAAI+H,EAAOzB,EAAIwoB,EAAO,GAAIA,EAAO,EAAE,EAC3DlD,EAAI,MAAM5rB,EAAI+H,EAAOzB,EAAImJ,EAAQzP,EAAI+H,EAAQ+mB,EAAO,GAAIxoB,EAAImJ,EAAQqf,EAAO,EAAE,EAC7ElD,EAAI,MAAM5rB,EAAGsG,EAAImJ,EAAQzP,EAAGsG,EAAImJ,EAASqf,EAAO,GAAIA,EAAO,EAAE,EAC7DlD,EAAI,MAAM5rB,EAAGsG,EAAGtG,EAAI8uB,EAAO,GAAIxoB,EAAGwoB,EAAO,EAAE,EAC/C,CCzBA,SAAS9hB,GAAQ,EAAGiZ,EAAG,CACrB,IAAI1I,EAAI,OAAO,KAAK,CAAC,EACrB,GAAI,OAAO,sBAAuB,CAChC,IAAI5T,EAAI,OAAO,sBAAsB,CAAC,EACtCsc,IAAMtc,EAAIA,EAAE,OAAO,SAAU,EAAG,CAC9B,OAAO,OAAO,yBAAyB,EAAG,CAAC,EAAE,UACnD,CAAK,GAAI4T,EAAE,KAAK,MAAMA,EAAG5T,CAAC,CACvB,CACD,OAAO4T,CACT,CACA,SAASs6E,GAAe,EAAG,CACzB,QAAS5xE,EAAI,EAAGA,EAAI,UAAU,OAAQA,IAAK,CACzC,IAAI1I,EAAY,UAAU0I,CAAC,GAAnB,KAAuB,UAAUA,CAAC,EAAI,GAC9CA,EAAI,EAAIjZ,GAAQ,OAAOuQ,CAAC,EAAG,EAAE,EAAE,QAAQ,SAAU0I,EAAG,CAClD6xE,GAAe,EAAG7xE,EAAG1I,EAAE0I,CAAC,CAAC,CAC/B,CAAK,EAAI,OAAO,0BAA4B,OAAO,iBAAiB,EAAG,OAAO,0BAA0B1I,CAAC,CAAC,EAAIvQ,GAAQ,OAAOuQ,CAAC,CAAC,EAAE,QAAQ,SAAU0I,EAAG,CAChJ,OAAO,eAAe,EAAGA,EAAG,OAAO,yBAAyB1I,EAAG0I,CAAC,CAAC,CACvE,CAAK,CACF,CACD,OAAO,CACT,CChBA,IAAI8xE,GAAY,CAAC,oBAAqB,oBAAqB,eAAgB,aAAc,aAAc,WAAY,gBAAiB,cAAe,aAAc,OAAO,EACxK,SAASC,GAAgBhyF,EAAM,CAC7B,IAAIiyF,EAAwBjyF,EAAK,kBAC/BkyF,EAAoBD,IAA0B,OAAS,GAAKA,EAC5DE,EAAwBnyF,EAAK,kBAC7BoyF,EAAoBD,IAA0B,OAAS,GAAQA,EAC/DE,EAAoBryF,EAAK,aACzBjJ,EAAes7F,IAAsB,OAAS,KAAOA,EACrDC,EAAkBtyF,EAAK,WACvBuyF,EAAkBvyF,EAAK,WACvBwyF,EAAgBxyF,EAAK,SACrByyF,EAAqBzyF,EAAK,cAC1B0yF,EAAmB1yF,EAAK,YACxB2yF,EAAkB3yF,EAAK,WACvB4yF,EAAa5yF,EAAK,MAClB6yF,EAAkBx0F,GAAyB2B,EAAM+xF,EAAS,EACxDe,EAAY54C,WAASo4C,IAAoB,OAAYA,EAAkBJ,CAAiB,EAC1Fa,EAAaC,GAAeF,EAAW,CAAC,EACxCG,EAAkBF,EAAW,CAAC,EAC9BG,EAAqBH,EAAW,CAAC,EAC/BI,EAAaj5C,WAASq4C,IAAoB,OAAYA,EAAkBH,CAAiB,EAC3FgB,EAAaJ,GAAeG,EAAY,CAAC,EACzCE,EAAkBD,EAAW,CAAC,EAC9BE,EAAqBF,EAAW,CAAC,EAC/BG,EAAar5C,WAAS04C,IAAe,OAAYA,EAAa77F,CAAY,EAC5Ey8F,EAAaR,GAAeO,EAAY,CAAC,EACzCE,EAAaD,EAAW,CAAC,EACzBE,EAAgBF,EAAW,CAAC,EAC1Bx0E,EAAW4tE,cAAY,SAAUvwF,GAAOs3F,GAAY,CAClD,OAAOnB,GAAkB,YAC3BA,EAAcn2F,GAAOs3F,EAAU,EAEjCD,EAAcr3F,EAAK,CACvB,EAAK,CAACm2F,CAAa,CAAC,EACdoB,EAAgBhH,cAAY,SAAUvwF,GAAOs3F,GAAY,CAC3D,IAAIz/B,GACA,OAAOu+B,GAAuB,aAChCv+B,GAAWu+B,EAAmBp2F,GAAOs3F,EAAU,GAEjDT,EAAmBh/B,KAAa,OAAYA,GAAW73D,EAAK,CAChE,EAAK,CAACo2F,CAAkB,CAAC,EACnBoB,EAAajH,cAAY,UAAY,CACnC,OAAO+F,GAAoB,YAC7BA,IAEFW,EAAmB,EAAI,CAC3B,EAAK,CAACX,CAAe,CAAC,EAChBmB,EAAclH,cAAY,UAAY,CACpC,OAAO8F,GAAqB,YAC9BA,IAEFY,EAAmB,EAAK,CAC5B,EAAK,CAACZ,CAAgB,CAAC,EACjBqB,GAAazB,IAAoB,OAAYA,EAAkBW,EAC/De,EAAazB,IAAoB,OAAYA,EAAkBc,EAC/Dh3F,GAAQu2F,IAAe,OAAYA,EAAaa,EACpD,OAAOrsF,GAAcA,GAAc,CAAE,EAAEyrF,CAAe,EAAG,GAAI,CAC3D,WAAYkB,GACZ,WAAYC,EACZ,SAAUh1E,EACV,cAAe40E,EACf,YAAaE,EACb,WAAYD,EACZ,MAAOx3F,EACX,CAAG,CACH,CCtEA,SAAS43F,GAAuB,EAAG,EAAG,CACpC,OAAO,IAAM,EAAI,EAAE,MAAM,CAAC,GAAI,OAAO,OAAO,OAAO,iBAAiB,EAAG,CACrE,IAAK,CACH,MAAO,OAAO,OAAO,CAAC,CACvB,CACF,EAAC,CACJ,CCEA,MAAM/8C,GAAM,KAAK,IACXnvB,GAAM,KAAK,IACX6vD,GAAQ,KAAK,MACbsc,GAAQ,KAAK,MACbC,GAAenzE,IAAM,CACzB,EAAGA,EACH,EAAGA,CACL,GAuGA,SAASozE,GAAiB9xE,EAAM,CAC9B,KAAM,CACJ,EAAAtoB,EACA,EAAAsG,EACA,MAAAyB,EACA,OAAA0H,CACD,EAAG6Y,EACJ,MAAO,CACL,MAAAvgB,EACA,OAAA0H,EACA,IAAKnJ,EACL,KAAMtG,EACN,MAAOA,EAAI+H,EACX,OAAQzB,EAAImJ,EACZ,EAAAzP,EACA,EAAAsG,CACJ,CACA,CCvIA,SAAS+zF,IAAY,CACnB,OAAO,OAAO,OAAW,GAC3B,CACA,SAASC,GAAY1zF,EAAM,CACzB,OAAI2zF,GAAO3zF,CAAI,GACLA,EAAK,UAAY,IAAI,YAAW,EAKnC,WACT,CACA,SAAS4zF,GAAU5zF,EAAM,CACvB,IAAI6zF,EACJ,OAAQ7zF,GAAQ,OAAS6zF,EAAsB7zF,EAAK,gBAAkB,KAAO,OAAS6zF,EAAoB,cAAgB,MAC5H,CACA,SAASC,GAAmB9zF,EAAM,CAChC,IAAIZ,EACJ,OAAQA,GAAQu0F,GAAO3zF,CAAI,EAAIA,EAAK,cAAgBA,EAAK,WAAa,OAAO,WAAa,KAAO,OAASZ,EAAK,eACjH,CACA,SAASu0F,GAAOl4F,EAAO,CACrB,OAAKg4F,GAAS,EAGPh4F,aAAiB,MAAQA,aAAiBm4F,GAAUn4F,CAAK,EAAE,KAFzD,EAGX,CACA,SAASs4F,GAAUt4F,EAAO,CACxB,OAAKg4F,GAAS,EAGPh4F,aAAiB,SAAWA,aAAiBm4F,GAAUn4F,CAAK,EAAE,QAF5D,EAGX,CACA,SAASu4F,GAAcv4F,EAAO,CAC5B,OAAKg4F,GAAS,EAGPh4F,aAAiB,aAAeA,aAAiBm4F,GAAUn4F,CAAK,EAAE,YAFhE,EAGX,CACA,SAASw4F,GAAax4F,EAAO,CAC3B,MAAI,CAACg4F,GAAS,GAAM,OAAO,WAAe,IACjC,GAEFh4F,aAAiB,YAAcA,aAAiBm4F,GAAUn4F,CAAK,EAAE,UAC1E,CACA,SAASy4F,GAAkBnnF,EAAS,CAClC,KAAM,CACJ,SAAAonF,EACA,UAAAC,EACA,UAAAC,EACA,QAAAC,CACJ,EAAMC,GAAiBxnF,CAAO,EAC5B,MAAO,kCAAkC,KAAKonF,EAAWE,EAAYD,CAAS,GAAK,CAAC,CAAC,SAAU,UAAU,EAAE,SAASE,CAAO,CAC7H,CAgCA,SAASE,IAAW,CAClB,OAAI,OAAO,IAAQ,KAAe,CAAC,IAAI,SAAiB,GACjD,IAAI,SAAS,0BAA2B,MAAM,CACvD,CACA,SAASC,GAAsBz0F,EAAM,CACnC,MAAO,CAAC,OAAQ,OAAQ,WAAW,EAAE,SAAS0zF,GAAY1zF,CAAI,CAAC,CACjE,CACA,SAASu0F,GAAiBxnF,EAAS,CACjC,OAAO6mF,GAAU7mF,CAAO,EAAE,iBAAiBA,CAAO,CACpD,CAaA,SAAS2nF,GAAc10F,EAAM,CAC3B,GAAI0zF,GAAY1zF,CAAI,IAAM,OACxB,OAAOA,EAET,MAAM9F,EAEN8F,EAAK,cAELA,EAAK,YAELi0F,GAAaj0F,CAAI,GAAKA,EAAK,MAE3B8zF,GAAmB9zF,CAAI,EACvB,OAAOi0F,GAAa/5F,CAAM,EAAIA,EAAO,KAAOA,CAC9C,CACA,SAASy6F,GAA2B30F,EAAM,CACxC,MAAM40F,EAAaF,GAAc10F,CAAI,EACrC,OAAIy0F,GAAsBG,CAAU,EAC3B50F,EAAK,cAAgBA,EAAK,cAAc,KAAOA,EAAK,KAEzDg0F,GAAcY,CAAU,GAAKV,GAAkBU,CAAU,EACpDA,EAEFD,GAA2BC,CAAU,CAC9C,CACA,SAASC,GAAqB70F,EAAMyW,EAAMq+E,EAAiB,CACzD,IAAIC,EACAt+E,IAAS,SACXA,EAAO,IAELq+E,IAAoB,SACtBA,EAAkB,IAEpB,MAAME,EAAqBL,GAA2B30F,CAAI,EACpDi1F,EAASD,MAAyBD,EAAuB/0F,EAAK,gBAAkB,KAAO,OAAS+0F,EAAqB,MACrHG,EAAMtB,GAAUoB,CAAkB,EACxC,GAAIC,EAAQ,CACV,MAAME,EAAeC,GAAgBF,CAAG,EACxC,OAAOz+E,EAAK,OAAOy+E,EAAKA,EAAI,gBAAkB,CAAE,EAAEhB,GAAkBc,CAAkB,EAAIA,EAAqB,CAAE,EAAEG,GAAgBL,EAAkBD,GAAqBM,CAAY,EAAI,EAAE,CAC7L,CACD,OAAO1+E,EAAK,OAAOu+E,EAAoBH,GAAqBG,EAAoB,CAAE,EAAEF,CAAe,CAAC,CACtG,CACA,SAASM,GAAgBF,EAAK,CAC5B,OAAOA,EAAI,QAAU,OAAO,eAAeA,EAAI,MAAM,EAAIA,EAAI,aAAe,IAC9E,CCjJA,SAASG,GAAiBtoF,EAAS,CACjC,MAAMuoF,EAAMf,GAAiBxnF,CAAO,EAGpC,IAAI5L,EAAQ,WAAWm0F,EAAI,KAAK,GAAK,EACjCzsF,EAAS,WAAWysF,EAAI,MAAM,GAAK,EACvC,MAAMC,EAAYvB,GAAcjnF,CAAO,EACjCyoF,EAAcD,EAAYxoF,EAAQ,YAAc5L,EAChDs0F,EAAeF,EAAYxoF,EAAQ,aAAelE,EAClD6sF,EAAiB1e,GAAM71E,CAAK,IAAMq0F,GAAexe,GAAMnuE,CAAM,IAAM4sF,EACzE,OAAIC,IACFv0F,EAAQq0F,EACR3sF,EAAS4sF,GAEJ,CACL,MAAAt0F,EACA,OAAA0H,EACA,EAAG6sF,CACP,CACA,CAEA,SAASC,GAAc5oF,EAAS,CAC9B,OAAQgnF,GAAUhnF,CAAO,EAA6BA,EAAzBA,EAAQ,cACvC,CAEA,SAAS6oF,GAAS7oF,EAAS,CACzB,MAAM8oF,EAAaF,GAAc5oF,CAAO,EACxC,GAAI,CAACinF,GAAc6B,CAAU,EAC3B,OAAOtC,GAAa,CAAC,EAEvB,MAAM7xE,EAAOm0E,EAAW,wBAClB,CACJ,MAAA10F,EACA,OAAA0H,EACA,EAAAitF,CACJ,EAAMT,GAAiBQ,CAAU,EAC/B,IAAIz8F,GAAK08F,EAAI9e,GAAMt1D,EAAK,KAAK,EAAIA,EAAK,OAASvgB,EAC3CzB,GAAKo2F,EAAI9e,GAAMt1D,EAAK,MAAM,EAAIA,EAAK,QAAU7Y,EAIjD,OAAI,CAACzP,GAAK,CAAC,OAAO,SAASA,CAAC,KAC1BA,EAAI,IAEF,CAACsG,GAAK,CAAC,OAAO,SAASA,CAAC,KAC1BA,EAAI,GAEC,CACL,EAAAtG,EACA,EAAAsG,CACJ,CACA,CAEA,MAAMq2F,GAAyBxC,GAAa,CAAC,EAC7C,SAASyC,GAAiBjpF,EAAS,CACjC,MAAMmoF,EAAMtB,GAAU7mF,CAAO,EAC7B,MAAI,CAACynF,GAAQ,GAAM,CAACU,EAAI,eACfa,GAEF,CACL,EAAGb,EAAI,eAAe,WACtB,EAAGA,EAAI,eAAe,SAC1B,CACA,CACA,SAASe,GAAuBlpF,EAASmpF,EAASC,EAAsB,CAKpE,MAAO,EAGX,CAEA,SAASC,GAAsBrpF,EAASspF,EAAcC,EAAiBC,EAAc,CAC/EF,IAAiB,SACnBA,EAAe,IAKjB,MAAMG,EAAazpF,EAAQ,wBACrB8oF,EAAaF,GAAc5oF,CAAO,EACxC,IAAIyhC,EAAQ+kD,GAAa,CAAC,EACtB8C,IAMA7nD,EAAQonD,GAAS7oF,CAAO,GAG5B,MAAM0pF,EAAgBR,GAAgE,EAAID,GAAiBH,CAAU,EAAItC,GAAa,CAAC,EACvI,IAAIn6F,GAAKo9F,EAAW,KAAOC,EAAc,GAAKjoD,EAAM,EAChD9uC,GAAK82F,EAAW,IAAMC,EAAc,GAAKjoD,EAAM,EAC/CrtC,EAAQq1F,EAAW,MAAQhoD,EAAM,EACjC3lC,EAAS2tF,EAAW,OAAShoD,EAAM,EACvC,GAAIqnD,EAAY,CACd,MAAMX,EAAMtB,GAAUiC,CAAU,EAC1Ba,EAAgFH,EACtF,IAAII,EAAazB,EACb0B,EAAgBxB,GAAgBuB,CAAU,EAC9C,KAAOC,GAAiBL,GAAgBG,IAAcC,GAAY,CAChE,MAAME,EAAcjB,GAASgB,CAAa,EACpCE,EAAaF,EAAc,wBAC3BtB,EAAMf,GAAiBqC,CAAa,EACpC58F,EAAO88F,EAAW,MAAQF,EAAc,WAAa,WAAWtB,EAAI,WAAW,GAAKuB,EAAY,EAChGh+F,EAAMi+F,EAAW,KAAOF,EAAc,UAAY,WAAWtB,EAAI,UAAU,GAAKuB,EAAY,EAClGz9F,GAAKy9F,EAAY,EACjBn3F,GAAKm3F,EAAY,EACjB11F,GAAS01F,EAAY,EACrBhuF,GAAUguF,EAAY,EACtBz9F,GAAKY,EACL0F,GAAK7G,EACL89F,EAAa/C,GAAUgD,CAAa,EACpCA,EAAgBxB,GAAgBuB,CAAU,CAC3C,CACF,CACD,OAAOnD,GAAiB,CACtB,MAAAryF,EACA,OAAA0H,EACA,EAAAzP,EACA,EAAAsG,CACJ,CAAG,CACH,CAuVA,SAASq3F,GAAYhqF,EAASiqF,EAAQ,CACpC,IAAIC,EAAK,KACLp1C,EACJ,MAAMp3C,EAAOqpF,GAAmB/mF,CAAO,EACvC,SAASmqF,GAAU,CACjB,IAAIC,EACJ,aAAat1C,CAAS,GACrBs1C,EAAMF,IAAO,MAAQE,EAAI,WAAU,EACpCF,EAAK,IACN,CACD,SAASG,EAAQzrC,EAAM0rC,EAAW,CAC5B1rC,IAAS,SACXA,EAAO,IAEL0rC,IAAc,SAChBA,EAAY,GAEdH,IACA,KAAM,CACJ,KAAAl9F,EACA,IAAAnB,EACA,MAAAsI,EACA,OAAA0H,CACN,EAAQkE,EAAQ,wBAIZ,GAHK4+C,GACHqrC,IAEE,CAAC71F,GAAS,CAAC0H,EACb,OAEF,MAAMyuF,EAAWhE,GAAMz6F,CAAG,EACpB0+F,EAAajE,GAAM7oF,EAAK,aAAezQ,EAAOmH,EAAM,EACpDq2F,EAAclE,GAAM7oF,EAAK,cAAgB5R,EAAMgQ,EAAO,EACtD4uF,EAAYnE,GAAMt5F,CAAI,EAEtB8B,EAAU,CACd,WAFiB,CAACw7F,EAAW,MAAQ,CAACC,EAAa,MAAQ,CAACC,EAAc,MAAQ,CAACC,EAAY,KAG/F,UAAWtwE,GAAI,EAAGmvB,GAAI,EAAG+gD,CAAS,CAAC,GAAK,CAC9C,EACI,IAAIK,EAAgB,GACpB,SAASC,EAAcl+C,EAAS,CAC9B,MAAMm+C,EAAQn+C,EAAQ,CAAC,EAAE,kBACzB,GAAIm+C,IAAUP,EAAW,CACvB,GAAI,CAACK,EACH,OAAON,EAAO,EAEXQ,EAOHR,EAAQ,GAAOQ,CAAK,EAJpB/1C,EAAY,WAAW,IAAM,CAC3Bu1C,EAAQ,GAAO,IAAI,CACpB,EAAE,GAAI,CAIV,CACDM,EAAgB,EACjB,CAID,GAAI,CACFT,EAAK,IAAI,qBAAqBU,EAAe,CAC3C,GAAG77F,EAEH,KAAM2O,EAAK,aACnB,CAAO,CACF,MAAW,CACVwsF,EAAK,IAAI,qBAAqBU,EAAe77F,CAAO,CACrD,CACDm7F,EAAG,QAAQlqF,CAAO,CACnB,CACD,OAAAqqF,EAAQ,EAAI,EACLF,CACT,CAUA,SAASW,GAAWC,EAAWC,EAAUz8C,EAAQx/C,EAAS,CACpDA,IAAY,SACdA,EAAU,IAEZ,KAAM,CACJ,eAAAk8F,EAAiB,GACjB,eAAAC,EAAiB,GACjB,cAAAC,EAAgB,OAAO,gBAAmB,WAC1C,YAAAC,EAAc,OAAO,sBAAyB,WAC9C,eAAAC,EAAiB,EAClB,EAAGt8F,EACEu8F,EAAc1C,GAAcmC,CAAS,EACrCQ,EAAYN,GAAkBC,EAAiB,CAAC,GAAII,EAAcxD,GAAqBwD,CAAW,EAAI,GAAK,GAAGxD,GAAqBkD,CAAQ,CAAC,EAAI,GACtJO,EAAU,QAAQC,GAAY,CAC5BP,GAAkBO,EAAS,iBAAiB,SAAUj9C,EAAQ,CAC5D,QAAS,EACf,CAAK,EACD28C,GAAkBM,EAAS,iBAAiB,SAAUj9C,CAAM,CAChE,CAAG,EACD,MAAMk9C,EAAYH,GAAeF,EAAcpB,GAAYsB,EAAa/8C,CAAM,EAAI,KAClF,IAAIm9C,EAAiB,GACjB9+C,EAAiB,KACjBu+C,IACFv+C,EAAiB,IAAI,eAAev6C,GAAQ,CAC1C,GAAI,CAACs5F,CAAU,EAAIt5F,EACfs5F,GAAcA,EAAW,SAAWL,GAAe1+C,IAGrDA,EAAe,UAAUo+C,CAAQ,EACjC,qBAAqBU,CAAc,EACnCA,EAAiB,sBAAsB,IAAM,CAC3C,IAAIE,GACHA,EAAkBh/C,IAAmB,MAAQg/C,EAAgB,QAAQZ,CAAQ,CACxF,CAAS,GAEHz8C,GACN,CAAK,EACG+8C,GAAe,CAACD,GAClBz+C,EAAe,QAAQ0+C,CAAW,EAEpC1+C,EAAe,QAAQo+C,CAAQ,GAEjC,IAAIa,EACAC,EAAcT,EAAiBhC,GAAsB0B,CAAS,EAAI,KAClEM,GACFU,IAEF,SAASA,GAAY,CACnB,MAAMC,EAAc3C,GAAsB0B,CAAS,EAC/Ce,IAAgBE,EAAY,IAAMF,EAAY,GAAKE,EAAY,IAAMF,EAAY,GAAKE,EAAY,QAAUF,EAAY,OAASE,EAAY,SAAWF,EAAY,SACtKv9C,IAEFu9C,EAAcE,EACdH,EAAU,sBAAsBE,CAAS,CAC1C,CACD,OAAAx9C,IACO,IAAM,CACX,IAAI09C,EACJV,EAAU,QAAQC,GAAY,CAC5BP,GAAkBO,EAAS,oBAAoB,SAAUj9C,CAAM,EAC/D28C,GAAkBM,EAAS,oBAAoB,SAAUj9C,CAAM,CACrE,CAAK,EACDk9C,GAAa,MAAQA,KACpBQ,EAAmBr/C,IAAmB,MAAQq/C,EAAiB,WAAU,EAC1Er/C,EAAiB,KACby+C,GACF,qBAAqBQ,CAAO,CAElC,CACA,CChnBA,IAAI/+F,GAAS0/C,EAAe,gBCWxB0/C,GAAc,CAAC,YAAa,aAAc,KAAM,YAAa,gBAAiB,WAAY,WAAY,UAAW,QAAS,UAAW,eAAgB,cAAe,WAAY,OAAO,EAKvLnzF,GAAO,UAAgB,CAAC,EAe5B,SAASozF,GAAkBC,EAAQ/8F,EAAM,CACvC,OAAKA,EAEMA,EAAK,CAAC,IAAM,IACd+8F,EAAS/8F,EAET+8F,EAAS,KAAO/8F,EAJhB+8F,CAMX,CACA,SAASC,GAAWD,EAAQzyF,EAAO,CACjC,QAASrH,EAAO,UAAU,OAAQg6F,EAAgB,IAAI,MAAMh6F,EAAO,EAAIA,EAAO,EAAI,CAAC,EAAGE,EAAO,EAAGA,EAAOF,EAAME,IAC3G85F,EAAc95F,EAAO,CAAC,EAAI,UAAUA,CAAI,EAE1C,IAAImR,EAAM,GAAG,OAAO2oF,CAAa,EACjC,GAAI3yF,GAASyyF,EACX,QAASriG,KAAO4P,EACVA,EAAM,eAAe5P,CAAG,GAAK4P,EAAM5P,CAAG,GACxC4Z,EAAI,KAAK,GAAG,OAAOwoF,GAAkBC,EAAQriG,CAAG,CAAC,CAAC,EAIjD,OAAA4Z,EAAI,OAAO,SAAUjX,EAAG,CACtB,OAAAA,CAAA,CACR,EAAE,IAAI,SAAUA,EAAG,CACX,cAAOA,CAAC,EAAE,MAAK,CACvB,EAAE,KAAK,GAAG,CACb,CAKA,IAAI6/F,GAAa,SAAoB79F,EAAO,CAC1C,OAAIsyE,GAAQtyE,CAAK,EAAUA,EAAM,OAAO,OAAO,EAC3CgH,GAAQhH,CAAK,IAAM,UAAYA,IAAU,KAAa,CAACA,CAAK,EACzD,EACT,EAMI89F,GAAmB,SAA0BpkG,EAAO,CAEhDA,EAAA,UACEA,EAAA,WACAA,EAAA,GACAA,EAAA,UACAA,EAAA,cACAA,EAAA,SACAA,EAAA,SACAA,EAAA,QACAA,EAAA,MACAA,EAAA,QACAA,EAAA,aACAA,EAAA,YACAA,EAAA,SACAA,EAAA,MACF,IAAAqkG,EAAa/7F,GAAyBtI,EAAO8jG,EAAW,EACvD,OAAAzyF,GAAc,GAAIgzF,CAAU,CACrC,EAMIC,GAAgB,SAAuBtkG,EAAOiH,EAAMs9F,EAAiB,CACnE,IAAAt/F,EAAKjF,EAAM,GACbwkG,EAAYxkG,EAAM,UAClBykG,EAAgBzkG,EAAM,cACtBsF,EAAYtF,EAAM,UACb,OACL,IAAKwkG,EAAUv9F,EAAMjH,CAAK,EAC1B,UAAWiF,EAAGs/F,GAA2E,CAAI,EAAAE,EAAcx9F,EAAMjH,CAAK,EAAGsF,CAAS,EAEtI,EAkBA,SAASo/F,GAAkB34F,EAAI,CACtB,OAAC,SAAS,gBAAiB,SAAS,KAAM,MAAM,EAAE,QAAQA,CAAE,EAAI,EACzE,CAKA,SAAS44F,GAAiB54F,EAAI,CACxB,OAAA24F,GAAkB34F,CAAE,EACf,OAAO,YAETA,EAAG,YACZ,CAKA,SAAS64F,GAAa74F,EAAI,CACpB,OAAA24F,GAAkB34F,CAAE,EACf,OAAO,YAETA,EAAG,SACZ,CACA,SAAS+0D,GAAS/0D,EAAIrI,EAAK,CAErB,GAAAghG,GAAkB34F,CAAE,EAAG,CAClB,gBAAS,EAAGrI,CAAG,EACtB,MACF,CACAqI,EAAG,UAAYrI,CACjB,CAKA,SAASmhG,GAAgBjtF,EAAS,CAC5B,IAAA5Q,EAAQ,iBAAiB4Q,CAAO,EAChCktF,EAAsB99F,EAAM,WAAa,WACzC+9F,EAAa,gBACjB,GAAI/9F,EAAM,WAAa,QAAS,OAAO,SAAS,gBAChD,QAASg+F,EAASptF,EAASotF,EAASA,EAAO,eAErC,GADJh+F,EAAQ,iBAAiBg+F,CAAM,EAC3B,EAAAF,GAAuB99F,EAAM,WAAa,WAG1C+9F,EAAW,KAAK/9F,EAAM,SAAWA,EAAM,UAAYA,EAAM,SAAS,EAC7D,OAAAg+F,EAGX,OAAO,SAAS,eAClB,CAWA,SAAS9wD,GAAa1yB,EAAGhe,EAAGhB,EAAGknB,EAAG,CAChC,OAAOlnB,IAAMgf,EAAIA,EAAIkI,EAAI,GAAKlI,EAAIA,EAAI,GAAKhe,CAC7C,CACA,SAASyhG,GAAiBrtF,EAASstF,EAAI,CACjC,IAAA7iB,EAAW,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,IAC/E77D,EAAW,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI7V,GAC/EpM,EAAQqgG,GAAahtF,CAAO,EAC5ButF,EAASD,EAAK3gG,EACd6gG,EAAY,GACZC,EAAc,EAClB,SAASC,GAAgB,CACRD,GAAAD,EACf,IAAI5nF,EAAM02B,GAAamxD,EAAa9gG,EAAO4gG,EAAQ9iB,CAAQ,EAC3DvhB,GAASlpD,EAAS4F,CAAG,EACjB6nF,EAAchjB,EAChB,OAAO,sBAAsBijB,CAAa,EAE1C9+E,EAAS5O,CAAO,CAEpB,CACc0tF,GAChB,CAKA,SAASC,GAAeC,EAAQC,EAAW,CACrC,IAAAC,EAAWF,EAAO,wBAClBG,EAAcF,EAAU,wBACxBG,EAAaH,EAAU,aAAe,EACtCE,EAAY,OAASC,EAAaF,EAAS,OAC7C5kC,GAAS0kC,EAAQ,KAAK,IAAIC,EAAU,UAAYA,EAAU,aAAeD,EAAO,aAAeI,EAAYJ,EAAO,YAAY,CAAC,EACtHG,EAAY,IAAMC,EAAaF,EAAS,KACjD5kC,GAAS0kC,EAAQ,KAAK,IAAIC,EAAU,UAAYG,EAAY,CAAC,CAAC,CAElE,CAOA,SAASC,GAAqBjuF,EAAS,CACjC,IAAA2U,EAAO3U,EAAQ,wBACZ,OACL,OAAQ2U,EAAK,OACb,OAAQA,EAAK,OACb,KAAMA,EAAK,KACX,MAAOA,EAAK,MACZ,IAAKA,EAAK,IACV,MAAOA,EAAK,MAEhB,CAMA,SAASu5E,IAAiB,CACpB,IACF,gBAAS,YAAY,YAAY,EAC1B,QACG,CACH,QACT,CACF,CAMA,SAASC,IAAiB,CACpB,IACK,uEAAiE,KAAK,UAAU,SAAS,OACtF,CACH,QACT,CACF,CAOA,IAAIC,GAAwB,GACxBr/F,GAAU,CACZ,IAAI,SAAU,CACZ,OAAOq/F,GAAwB,EACjC,CACF,EAEI96E,GAAI,OAAO,OAAW,IAAc,OAAS,GAC7CA,GAAE,kBAAoBA,GAAE,sBACxBA,GAAA,iBAAiB,IAAKva,GAAMhK,EAAO,EACnCukB,GAAA,oBAAoB,IAAKva,GAAM,EAAK,GAExC,IAAIs1F,GAAwBD,GAC5B,SAASE,GAAWj3F,EAAM,CACxB,OAAOA,GAAQ,IACjB,CACA,SAAS2pE,GAAQvzE,EAAK,CACb,aAAM,QAAQA,CAAG,CAC1B,CACA,SAAS8gG,GAAaC,EAASC,EAAYC,EAAa,CACtD,OAAOF,EAAUC,EAAaC,CAChC,CAOA,IAAIC,GAAc,SAAqBC,EAAU,CAC/C,QAASC,EAAQ,UAAU,OAAQC,EAAa,IAAI,MAAMD,EAAQ,EAAIA,EAAQ,EAAI,CAAC,EAAGE,EAAQ,EAAGA,EAAQF,EAAOE,IAC9GD,EAAWC,EAAQ,CAAC,EAAI,UAAUA,CAAK,EAEzC,IAAIC,EAAW,OAAO,QAAQJ,CAAQ,EAAE,OAAO,SAAUv8F,EAAM,CAC7D,IAAI48F,EAAQ5J,GAAehzF,EAAM,CAAC,EAChCtI,EAAMklG,EAAM,CAAC,EACR,OAACH,EAAW,SAAS/kG,CAAG,EAChC,EACD,OAAOilG,EAAS,OAAO,SAAUE,EAAUC,EAAO,CAC5C,IAAAC,EAAQ/J,GAAe8J,EAAO,CAAC,EACjCplG,EAAMqlG,EAAM,CAAC,EACbxpF,EAAMwpF,EAAM,CAAC,EACf,OAAAF,EAASnlG,CAAG,EAAI6b,EACTspF,CACT,EAAG,CAAE,EACP,EAEIG,GAAc,CAAC,WAAY,YAAY,EACzCC,GAAe,CAAC,WAAY,YAAY,EAC1C,SAASC,GAAiBl9F,EAAM,CAC9B,IAAIm9F,EAAqBn9F,EAAK,UAC5Bu7F,EAASv7F,EAAK,OACdmtF,EAAYntF,EAAK,UACjBo9F,EAAqBp9F,EAAK,UAC1Bq9F,EAAer9F,EAAK,aACpBs9F,EAAkBt9F,EAAK,gBACvBu9F,EAAgBv9F,EAAK,cACnBw9F,EAAe5C,GAAgBW,CAAM,EACrCkC,EAAe,CACjB,UAAW,SACX,UAAWN,CAAA,EAIb,GAAI,CAAC5B,GAAU,CAACA,EAAO,aAAqB,OAAAkC,EAI5C,IAAIC,EAAwBF,EAAa,sBAAsB,EAC7DxhD,EAAe0hD,EAAsB,OACnCC,EAAwBpC,EAAO,sBACjC,EAAAqC,EAAaD,EAAsB,OACnCE,EAAaF,EAAsB,OACnCG,EAAUH,EAAsB,IAC9BI,EAAwBxC,EAAO,aAAa,sBAAsB,EACpEyC,EAAeD,EAAsB,IACnCE,EAAaX,EAAkB,OAAO,YAAc5C,GAAiB8C,CAAY,EACjF//C,EAAYk9C,GAAa6C,CAAY,EACrCU,EAAe,SAAS,iBAAiB3C,CAAM,EAAE,aAAc,EAAE,EACjE4C,EAAY,SAAS,iBAAiB5C,CAAM,EAAE,UAAW,EAAE,EAC3D6C,EAAiBJ,EAAeG,EAChCE,EAAiBJ,EAAaH,EAC9BQ,EAAmBF,EAAiB3gD,EACpC8gD,EAAmBviD,EAAeyB,EAAYqgD,EAC9CU,EAAaZ,EAAaK,EAAaxgD,EAAYygD,EACnDO,EAAWhhD,EAAYqgD,EAAUK,EACjCO,EAAiB,IACrB,OAAQtB,EAAoB,CAC1B,IAAK,OACL,IAAK,SAEH,GAAIiB,GAAkBR,EACb,OACL,UAAW,SACX,UAAWV,CAAA,EAKX,GAAAoB,GAAoBV,GAAc,CAACP,EACrC,OAAID,GACerC,GAAAwC,EAAcgB,EAAYE,CAAc,EAEpD,CACL,UAAW,SACX,UAAWvB,CAAA,EAKf,GAAI,CAACG,GAAmBiB,GAAoBpR,GAAamQ,GAAmBe,GAAkBlR,EAAW,CACnGkQ,GACerC,GAAAwC,EAAcgB,EAAYE,CAAc,EAK3D,IAAIC,EAAoBrB,EAAkBe,EAAiBH,EAAeK,EAAmBL,EACtF,OACL,UAAW,SACX,UAAWS,CAAA,CAEf,CAKI,GAAAvB,IAAuB,QAAUE,EAAiB,CAEpD,IAAIsB,EAAqBzB,EACrB0B,GAAavB,EAAkBc,EAAiBE,EACpD,OAAIO,IAAc1R,IAChByR,EAAqB,KAAK,IAAIC,GAAaX,EAAeX,EAAeJ,CAAkB,GAEtF,CACL,UAAW,MACX,UAAWyB,CAAA,CAEf,CAGA,GAAIxB,IAAuB,SACzB,OAAIC,GACFxmC,GAAS2mC,EAAcgB,CAAU,EAE5B,CACL,UAAW,SACX,UAAWrB,CAAA,EAGf,MACF,IAAK,MAEH,GAAIiB,GAAkBP,EACb,OACL,UAAW,MACX,UAAWV,CAAA,EAKX,GAAAmB,GAAoBT,GAAc,CAACP,EACrC,OAAID,GACerC,GAAAwC,EAAciB,EAAUC,CAAc,EAElD,CACL,UAAW,MACX,UAAWvB,CAAA,EAKf,GAAI,CAACG,GAAmBgB,GAAoBnR,GAAamQ,GAAmBc,GAAkBjR,EAAW,CACvG,IAAI2R,EAAsB3B,EAI1B,OAAI,CAACG,GAAmBgB,GAAoBnR,GAAamQ,GAAmBc,GAAkBjR,KACtE2R,EAAAxB,EAAkBc,EAAiBD,EAAYG,EAAmBH,GAEtFd,GACerC,GAAAwC,EAAciB,EAAUC,CAAc,EAElD,CACL,UAAW,MACX,UAAWI,CAAA,CAEf,CAKO,OACL,UAAW,SACX,UAAW3B,CAAA,EAEf,QACE,MAAM,IAAI,MAAM,+BAAgC,OAAOC,EAAoB,IAAK,CAAC,CACrF,CACO,OAAAK,CACT,CAKA,SAASsB,GAAeC,EAAW,CACjC,IAAIC,EAAqB,CACvB,OAAQ,MACR,IAAK,UAEA,OAAAD,EAAYC,EAAmBD,CAAS,EAAI,QACrD,CACA,IAAIE,GAAkB,SAAyBt7F,EAAG,CACzC,OAAAA,IAAM,OAAS,SAAWA,CACnC,EACIu7F,GAAU,SAAiBvC,EAAOwC,EAAU,CAC1C,IAAAvN,EACAmN,EAAYpC,EAAM,UACpByC,EAAczC,EAAM,MACpB0C,EAAeD,EAAY,aAC3BzT,EAAUyT,EAAY,QACtB/V,EAAS+V,EAAY,OACvB,OAAOj4F,IAAeyqF,EAAiB,CACrC,MAAO,MACT,EAAG1wF,GAAgB0wF,EAAgBkN,GAAeC,CAAS,EAAG,MAAM,EAAG79F,GAAgB0wF,EAAgB,WAAY,UAAU,EAAG1wF,GAAgB0wF,EAAgB,QAAS,MAAM,EAAG1wF,GAAgB0wF,EAAgB,SAAU,CAAC,EAAGA,GAAiBuN,EAAW,GAAK,CAC/P,gBAAiB9V,EAAO,SACxB,aAAAgW,EACA,UAAW,kEACX,aAAc1T,EAAQ,WACtB,UAAWA,EAAQ,WACpB,CACH,EACI2T,mBAAoD,IAAI,EAGxDC,GAAa,SAAoBzpG,EAAO,CAC1C,IAAI+K,EAAW/K,EAAM,SACnB0pG,EAAgB1pG,EAAM,cACtB2pG,EAAgB3pG,EAAM,cACtB4pG,EAAgB5pG,EAAM,cACtB6pG,EAAe7pG,EAAM,aACrB8pG,EAA2B9pG,EAAM,yBACjCgxB,EAAQhxB,EAAM,MACZ+mG,EAAQgD,aAAWP,EAAsB,GAAK,GAChDQ,EAAqBjD,EAAM,mBACzB9mG,EAAMgkD,SAAO,IAAI,EACjB84C,EAAY54C,WAASwlD,CAAa,EACpC3M,EAAaC,GAAeF,EAAW,CAAC,EACxC7R,EAAY8R,EAAW,CAAC,EACxBiN,EAAejN,EAAW,CAAC,EACzBI,EAAaj5C,WAAS,IAAI,EAC5Bk5C,EAAaJ,GAAeG,EAAY,CAAC,EACzC6L,EAAY5L,EAAW,CAAC,EACxB6M,EAAe7M,EAAW,CAAC,EACzBmK,EAAgBx2E,EAAM,QAAQ,cAClCozB,UAAgB,UAAY,CAC1B,IAAIohD,EAASvlG,EAAI,QACjB,GAAKulG,EAGL,KAAI+B,EAAkBsC,IAAiB,QACnCvC,EAAewC,GAA4B,CAACvC,EAC5Ch2F,EAAQ41F,GAAiB,CAC3B,UAAWwC,EACX,OAAAnE,EACA,UAAWkE,EACX,UAAWE,EACX,aAAAtC,EACA,gBAAAC,EACA,cAAAC,CAAA,CACD,EACDyC,EAAa14F,EAAM,SAAS,EAC5B24F,EAAa34F,EAAM,SAAS,EAC5By4F,GAAuB,MAAiDA,EAAmBz4F,EAAM,SAAS,IACzG,CAACo4F,EAAeC,EAAeC,EAAcC,EAA0BJ,EAAeM,EAAoBxC,CAAa,CAAC,EACpHz8F,EAAS,CACd,IAAA9K,EACA,YAAaoR,GAAcA,GAAc,GAAIrR,CAAK,EAAG,GAAI,CACvD,UAAWipG,GAAaE,GAAgBS,CAAa,EACrD,UAAA1e,CAAA,CACD,EACF,CACH,EACIif,GAAO,SAAcnqG,EAAO,CAC9B,IAAI+K,EAAW/K,EAAM,SACnBoqG,EAAWpqG,EAAM,SACjBqkG,EAAarkG,EAAM,WACrB,OAAOqqG,GAAI,MAAOhqG,GAAS,CAAI,EAAAikG,GAActkG,EAAO,OAAQ,CAC1D,KAAM,GACP,EAAG,CACF,IAAKoqG,CAAA,EACJ/F,CAAU,EAAGt5F,CAAQ,CAC1B,EACIu/F,GAASH,GAMTI,GAAc,SAAqBvD,EAAOqC,EAAU,CACtD,IAAIne,EAAY8b,EAAM,UACpBwD,EAAWxD,EAAM,MAAM,QAAQ,SACjC,OAAO31F,GAAc,CACnB,UAAA65E,EACA,UAAW,OACX,SAAU,WAEV,wBAAyB,SACxBme,EAAW,GAAK,CACjB,cAAemB,EACf,WAAYA,CAAA,CACb,CACH,EACIC,GAAW,SAAkBzqG,EAAO,CAClC,IAAA+K,EAAW/K,EAAM,SACnBqkG,EAAarkG,EAAM,WACnBoqG,EAAWpqG,EAAM,SACjBomG,EAAUpmG,EAAM,QAClB,OAAOqqG,GAAI,MAAOhqG,GAAS,CAAI,EAAAikG,GAActkG,EAAO,WAAY,CAC9D,YAAa,GACb,sBAAuBomG,CAAA,CACxB,EAAG,CACF,IAAKgE,CAAA,EACJ/F,CAAU,EAAGt5F,CAAQ,CAC1B,EAMI2/F,GAAY,SAAmBC,EAAOtB,EAAU,CAC9C,IAAAuB,EAAcD,EAAM,MACtBH,EAAWI,EAAY,QAAQ,SAC/BrX,EAASqX,EAAY,OACvB,OAAOv5F,GAAc,CACnB,UAAW,UACVg4F,EAAW,GAAK,CACjB,MAAO9V,EAAO,UACd,QAAS,GAAG,OAAOiX,EAAW,EAAG,KAAK,EAAE,OAAOA,EAAW,EAAG,IAAI,EAClE,CACH,EACIK,GAAsBH,GACtBI,GAAoBJ,GACpBK,GAAmB,SAA0BC,EAAO,CACtD,IAAIC,EAAiBD,EAAM,SACzBjgG,EAAWkgG,IAAmB,OAAS,aAAeA,EACtD5G,EAAa2G,EAAM,WACnBE,EAAY5iG,GAAyB0iG,EAAO/D,EAAW,EACzD,OAAOoD,GAAI,MAAOhqG,GAAS,GAAIikG,GAAcjzF,GAAcA,GAAc,GAAI65F,CAAS,EAAG,GAAI,CAC3F,SAAAngG,EACA,WAAAs5F,CACD,GAAG,mBAAoB,CACtB,cAAe,GACf,0BAA2B,GAC5B,EAAGA,CAAU,EAAGt5F,CAAQ,CAC3B,EACIogG,GAAiB,SAAwBC,EAAO,CAClD,IAAIC,EAAiBD,EAAM,SACzBrgG,EAAWsgG,IAAmB,OAAS,aAAeA,EACtDhH,EAAa+G,EAAM,WACnBF,EAAY5iG,GAAyB8iG,EAAOlE,EAAY,EAC1D,OAAOmD,GAAI,MAAOhqG,GAAS,GAAIikG,GAAcjzF,GAAcA,GAAc,GAAI65F,CAAS,EAAG,GAAI,CAC3F,SAAAngG,EACA,WAAAs5F,CACD,GAAG,iBAAkB,CACpB,cAAe,GACf,uBAAwB,GACzB,EAAGA,CAAU,EAAGt5F,CAAQ,CAC3B,EAMIugG,GAAgB,SAAuBC,EAAO,CAChD,IAAIh/E,EAAOg/E,EAAM,KACf3sF,EAAS2sF,EAAM,OACfr/F,EAAWq/F,EAAM,SACZ,OACL,KAAMh/E,EAAK,KACX,SAAArgB,EACA,IAAK0S,EACL,MAAO2N,EAAK,MACZ,OAAQ,EAEZ,EACIi/E,GAAa,SAAoBxrG,EAAO,CAC1C,IAAIyrG,EAAWzrG,EAAM,SACnB+K,EAAW/K,EAAM,SACjB0rG,EAAiB1rG,EAAM,eACvBqkG,EAAarkG,EAAM,WACnB4pG,EAAgB5pG,EAAM,cACtB6pG,EAAe7pG,EAAM,aACnB2rG,EAAgB1nD,SAAO,IAAI,EAC3B2nD,EAAa3nD,SAAO,IAAI,EACxBu5C,EAAar5C,WAASglD,GAAgBS,CAAa,CAAC,EACtDnM,EAAaR,GAAeO,EAAY,CAAC,EACzCyL,EAAYxL,EAAW,CAAC,EACxBuM,EAAqBvM,EAAW,CAAC,EAC/BoO,EAAyB9b,UAAQ,UAAY,CACxC,OACL,mBAAAia,CAAA,CAEJ,EAAG,CAAE,GACD8B,EAAa3nD,WAAS,IAAI,EAC5B4nD,EAAa9O,GAAe6O,EAAY,CAAC,EACzCE,EAAmBD,EAAW,CAAC,EAC/BE,EAAsBF,EAAW,CAAC,EAChCG,EAAyBrV,cAAY,UAAY,CACnD,GAAK6U,EACD,KAAAn/E,EAAOs5E,GAAqB6F,CAAc,EAC1CS,EAAiBtC,IAAiB,QAAU,EAAI,OAAO,YACvDjrF,EAAS2N,EAAK08E,CAAS,EAAIkD,GAC3BvtF,KAAYotF,GAAqB,KAAsC,OAASA,EAAiB,SAAWz/E,EAAK,QAAUy/E,GAAqB,KAAsC,OAASA,EAAiB,KAAK,OAASz/E,EAAK,SAAWy/E,GAAqB,KAAsC,OAASA,EAAiB,KAAK,SACtTC,EAAA,CAClB,OAAArtF,EACA,KAAA2N,CAAA,CACD,EACH,EACC,CAACm/E,EAAgB7B,EAAcZ,EAAW+C,GAAqB,KAAsC,OAASA,EAAiB,OAAQA,GAAqB,KAAsC,OAASA,EAAiB,KAAK,KAAMA,GAAqB,KAAsC,OAASA,EAAiB,KAAK,KAAK,CAAC,EAC1U5nD,GAAgB,UAAY,CACH8nD,GAAA,EACtB,CAACA,CAAsB,CAAC,EACvB,IAAAE,EAAgBvV,cAAY,UAAY,CACtC,OAAO+U,EAAW,SAAY,aAChCA,EAAW,QAAQ,EACnBA,EAAW,QAAU,MAEnBF,GAAkBC,EAAc,UAClCC,EAAW,QAAUlJ,GAAWgJ,EAAgBC,EAAc,QAASO,EAAwB,CAC7F,cAAe,mBAAoB,OACpC,EACH,EACC,CAACR,EAAgBQ,CAAsB,CAAC,EAC3C9nD,GAAgB,UAAY,CACZgoD,GAAA,EACb,CAACA,CAAa,CAAC,EACd,IAAAC,EAAuBxV,cAAY,SAAUyV,EAAmB,CAClEX,EAAc,QAAUW,EACVF,GAAA,EACb,CAACA,CAAa,CAAC,EAGlB,GAAI,CAACX,GAAY5B,IAAiB,SAAW,CAACmC,EAAyB,YAGnE,IAAAO,EAAclC,GAAI,MAAOhqG,GAAS,CACpC,IAAKgsG,CAAA,EACJ/H,GAAcjzF,GAAcA,GAAc,GAAIrR,CAAK,EAAG,GAAI,CAC3D,OAAQgsG,EAAiB,OACzB,SAAUnC,EACV,KAAMmC,EAAiB,IACxB,GAAG,aAAc,CAChB,cAAe,GAChB,EAAG3H,CAAU,EAAGt5F,CAAQ,EAClB,OAAAs/F,GAAIb,GAAuB,SAAU,CAC1C,MAAOqC,CAAA,EACNJ,EAAwBe,gBAAaD,EAAad,CAAQ,EAAIc,CAAW,CAC9E,EAMIE,GAAe,SAAsBxiG,EAAM,CAC7C,IAAIyiG,EAAaziG,EAAK,WACpB2oB,EAAQ3oB,EAAK,MACR,OACL,MAAO,YACP,UAAW2oB,EAAQ,MAAQ,OAC3B,cAAe85E,EAAa,OAAS,OAErC,SAAU,WAEd,EACIC,GAAkB,SAAyB3sG,EAAO,CAChD,IAAA+K,EAAW/K,EAAM,SACnBqkG,EAAarkG,EAAM,WACnB0sG,EAAa1sG,EAAM,WACnB4yB,EAAQ5yB,EAAM,MAChB,OAAOqqG,GAAI,MAAOhqG,GAAS,CAAI,EAAAikG,GAActkG,EAAO,YAAa,CAC/D,gBAAiB0sG,EACjB,WAAY95E,CAAA,CACb,EAAGyxE,CAAU,EAAGt5F,CAAQ,CAC3B,EAMI6hG,GAAoB,SAA2B/F,EAAOwC,EAAU,CAClE,IAAIxT,EAAUgR,EAAM,MAAM,QACxBT,EAAUS,EAAM,QAChBgG,EAAWhG,EAAM,SACjBiG,EAA2BjG,EAAM,YAAY,yBAC/C,OAAOx1F,GAAc,CACnB,WAAY,SACZ,QAAS+0F,GAAWyG,GAAYC,EAA2B,OAAS,OACpE,KAAM,EACN,SAAU,OACV,wBAAyB,QACzB,SAAU,WACV,SAAU,UACTzD,EAAW,GAAK,CACjB,QAAS,GAAG,OAAOxT,EAAQ,SAAW,EAAG,KAAK,EAAE,OAAOA,EAAQ,SAAW,EAAG,IAAI,EAClF,CACH,EACIkX,GAAiB,SAAwB/sG,EAAO,CAC9C,IAAA+K,EAAW/K,EAAM,SACnBqkG,EAAarkG,EAAM,WACnBomG,EAAUpmG,EAAM,QAChB6sG,EAAW7sG,EAAM,SACnB,OAAOqqG,GAAI,MAAOhqG,GAAS,CAAI,EAAAikG,GAActkG,EAAO,iBAAkB,CACpE,kBAAmB,GACnB,4BAA6BomG,EAC7B,6BAA8ByG,CAAA,CAC/B,EAAGxI,CAAU,EAAGt5F,CAAQ,CAC3B,EAMIiiG,GAAyB,UAAkC,CACtD,OACL,WAAY,SACZ,UAAW,UACX,QAAS,OACT,WAAY,EAEhB,EACIC,GAAsB,SAA6BjtG,EAAO,CAC5D,IAAI+K,EAAW/K,EAAM,SACnBqkG,EAAarkG,EAAM,WACrB,OAAOqqG,GAAI,MAAOhqG,GAAS,CAAI,EAAAikG,GAActkG,EAAO,sBAAuB,CACzE,WAAY,GACb,EAAGqkG,CAAU,EAAGt5F,CAAQ,CAC3B,EAEImiG,GACAC,GAAc,CAAC,MAAM,EACvBC,GAAa,CAAC,aAAc,QAAS,MAAM,EAMzCvG,GAAgD,CAClD,KAAM,SACN,OAAQ,yFACV,EAMIwG,GAAM,SAAapjG,EAAM,CAC3B,IAAImtB,EAAOntB,EAAK,KACdjK,EAAQsI,GAAyB2B,EAAMkjG,EAAW,EAC7C,OAAA9C,GAAI,MAAOhqG,GAAS,CACzB,OAAQ+2B,EACR,MAAOA,EACP,QAAS,YACT,cAAe,OACf,UAAW,QACX,IAAKyvE,EAAA,EACJ7mG,CAAK,CAAC,CACX,EACIstG,GAAY,SAAmBttG,EAAO,CACjC,OAAAqqG,GAAIgD,GAAKhtG,GAAS,CACvB,KAAM,IACLL,CAAK,EAAGqqG,GAAI,OAAQ,CACrB,EAAG,4VACJ,EAAC,CACJ,EACIkD,GAAc,SAAqBvtG,EAAO,CACrC,OAAAqqG,GAAIgD,GAAKhtG,GAAS,CACvB,KAAM,IACLL,CAAK,EAAGqqG,GAAI,OAAQ,CACrB,EAAG,uRACJ,EAAC,CACJ,EAMImD,GAAU,SAAiBzG,EAAOsC,EAAU,CAC1C,IAAAvlE,EAAYijE,EAAM,UACpB0G,EAAc1G,EAAM,MACpByD,EAAWiD,EAAY,QAAQ,SAC/Bla,EAASka,EAAY,OACvB,OAAOp8F,GAAc,CACnB,MAAO,qBACP,QAAS,OACT,WAAY,eACXg4F,EAAW,GAAK,CACjB,MAAOvlE,EAAYyvD,EAAO,UAAYA,EAAO,UAC7C,QAASiX,EAAW,EACpB,SAAU,CACR,MAAO1mE,EAAYyvD,EAAO,UAAYA,EAAO,SAC/C,EACD,CACH,EACIma,GAAuBF,GACvBG,GAAoB,SAA2B3tG,EAAO,CACxD,IAAI+K,EAAW/K,EAAM,SACnBqkG,EAAarkG,EAAM,WACrB,OAAOqqG,GAAI,MAAOhqG,GAAS,CAAI,EAAAikG,GAActkG,EAAO,oBAAqB,CACvE,UAAW,GACX,qBAAsB,GACvB,EAAGqkG,CAAU,EAAGt5F,GAAYs/F,GAAIkD,GAAa,IAAI,CAAC,CACrD,EACIK,GAAoBJ,GACpBK,GAAiB,SAAwB7tG,EAAO,CAClD,IAAI+K,EAAW/K,EAAM,SACnBqkG,EAAarkG,EAAM,WACrB,OAAOqqG,GAAI,MAAOhqG,GAAS,CAAI,EAAAikG,GAActkG,EAAO,iBAAkB,CACpE,UAAW,GACX,kBAAmB,GACpB,EAAGqkG,CAAU,EAAGt5F,GAAYs/F,GAAIiD,GAAW,IAAI,CAAC,CACnD,EAMIQ,GAAwB,SAA+B9G,EAAOqC,EAAU,CACtE,IAAAqD,EAAa1F,EAAM,WACrB+G,EAAc/G,EAAM,MACpBwD,EAAWuD,EAAY,QAAQ,SAC/Bxa,EAASwa,EAAY,OACvB,OAAO18F,GAAc,CACnB,MAAO,qBACP,UAAW,UACX,MAAO,GACNg4F,EAAW,GAAK,CACjB,gBAAiBqD,EAAanZ,EAAO,UAAYA,EAAO,UACxD,aAAciX,EAAW,EACzB,UAAWA,EAAW,EACvB,CACH,EACIwD,GAAqB,SAA4BhuG,EAAO,CAC1D,IAAIqkG,EAAarkG,EAAM,WAChB,OAAAqqG,GAAI,OAAQhqG,GAAS,GAAIgkG,EAAYC,GAActkG,EAAO,qBAAsB,CACrF,sBAAuB,EACxB,EAAC,CAAC,CACL,EAMIiuG,GAAuBC,GAAUhB,KAAoBA,GAAkBhP,GAAuB,CAAC;AAAA;AAAA;AAAA,CAA4D,CAAC,EAAE,EAC9JiQ,GAAsB,SAA6BxD,EAAOtB,EAAU,CACtE,IAAIvlE,EAAY6mE,EAAM,UACpBvzE,EAAOuzE,EAAM,KACbC,EAAcD,EAAM,MACpBpX,EAASqX,EAAY,OACrBJ,EAAWI,EAAY,QAAQ,SACjC,OAAOv5F,GAAc,CACnB,MAAO,mBACP,QAAS,OACT,WAAY,cACZ,UAAW,SACX,SAAU+lB,EACV,WAAY,EACZ,YAAaA,EACb,UAAW,SACX,cAAe,UACdiyE,EAAW,GAAK,CACjB,MAAOvlE,EAAYyvD,EAAO,UAAYA,EAAO,UAC7C,QAASiX,EAAW,EACrB,CACH,EACI4D,GAAa,SAAoBpD,EAAO,CAC1C,IAAItlD,EAAQslD,EAAM,MAChBpsF,EAASosF,EAAM,OACjB,OAAOX,GAAI,OAAQ,CACjB,IAAwBgE,GAAA,CACtB,UAAW,GAAG,OAAOJ,GAAsB,kBAAkB,EAAE,OAAOvoD,EAAO,cAAc,EAC3F,gBAAiB,eACjB,aAAc,MACd,QAAS,eACT,WAAY9mC,EAAS,MAAQ,OAC7B,OAAQ,MACR,cAAe,MACf,MAAO,OACkC,GAAmE,EAAkmW,EACjtW,CACH,EACI0vF,GAAmB,SAA0BlD,EAAO,CACtD,IAAI/G,EAAa+G,EAAM,WACrBx4E,EAAQw4E,EAAM,MACdmD,EAAanD,EAAM,KACnBh0E,EAAOm3E,IAAe,OAAS,EAAIA,EACnCrD,EAAY5iG,GAAyB8iG,EAAOgC,EAAU,EACxD,OAAO/C,GAAI,MAAOhqG,GAAS,GAAIikG,GAAcjzF,GAAcA,GAAc,GAAI65F,CAAS,EAAG,GAAI,CAC3F,WAAA7G,EACA,MAAAzxE,EACA,KAAAwE,CACD,GAAG,mBAAoB,CACtB,UAAW,GACX,oBAAqB,EACtB,GAAGitE,CAAU,EAAGgG,GAAI+D,GAAY,CAC/B,MAAO,EACP,OAAQx7E,CAAA,CACT,EAAGy3E,GAAI+D,GAAY,CAClB,MAAO,IACP,OAAQ,GACT,EAAG/D,GAAI+D,GAAY,CAClB,MAAO,IACP,OAAQ,CAACx7E,CACV,EAAC,CACJ,EAEI47E,GAAQ,SAAavkG,EAAMo/F,EAAU,CACvC,IAAIqD,EAAaziG,EAAK,WACpB65B,EAAY75B,EAAK,UACjBwkG,EAAaxkG,EAAK,MAClBspF,EAASkb,EAAW,OACpBlF,EAAekF,EAAW,aAC1B5Y,EAAU4Y,EAAW,QACvB,OAAOp9F,GAAc,CACnB,MAAO,UACP,WAAY,SACZ,OAAQ,UACR,QAAS,OACT,SAAU,OACV,eAAgB,gBAChB,UAAWwkF,EAAQ,cACnB,QAAS,eACT,SAAU,WACV,WAAY,aACXwT,EAAW,GAAK,CACjB,gBAAiBqD,EAAanZ,EAAO,SAAWA,EAAO,SACvD,YAAamZ,EAAanZ,EAAO,UAAYzvD,EAAYyvD,EAAO,QAAUA,EAAO,UACjF,aAAAgW,EACA,YAAa,QACb,YAAa,EACb,UAAWzlE,EAAY,aAAa,OAAOyvD,EAAO,OAAO,EAAI,OAC7D,UAAW,CACT,YAAazvD,EAAYyvD,EAAO,QAAUA,EAAO,SACnD,EACD,CACH,EACImb,GAAU,SAAiB1uG,EAAO,CACpC,IAAI+K,EAAW/K,EAAM,SACnB0sG,EAAa1sG,EAAM,WACnB8jC,EAAY9jC,EAAM,UAClBoqG,EAAWpqG,EAAM,SACjBqkG,EAAarkG,EAAM,WACnBi+F,EAAaj+F,EAAM,WACd,OAAAqqG,GAAI,MAAOhqG,GAAS,CACzB,IAAK+pG,CAAA,EACJ9F,GAActkG,EAAO,UAAW,CACjC,QAAS,GACT,uBAAwB0sG,EACxB,sBAAuB5oE,EACvB,wBAAyBm6D,CAC1B,GAAGoG,EAAY,CACd,gBAAiBqI,GAAc,OAChC,EAAG3hG,CAAQ,CACd,EACI4jG,GAAYD,GAEZE,GAAc,CAAC,MAAM,EACrBC,GAAW,SAAkB5kG,EAAMo/F,EAAU,CAC3C,IAAAxT,EAAU5rF,EAAK,MAAM,QAClB,OAAAo/F,EAAW,GAAK,CACrB,cAAexT,EAAQ,SAAW,EAClC,WAAYA,EAAQ,SAAW,EAEnC,EACIiZ,GAAQ,SAAe9uG,EAAO,CAChC,IAAI+K,EAAW/K,EAAM,SACnBiF,EAAKjF,EAAM,GACXwkG,EAAYxkG,EAAM,UAClBykG,EAAgBzkG,EAAM,cACtB+uG,EAAU/uG,EAAM,QAChBgvG,EAAehvG,EAAM,aACrBqkG,EAAarkG,EAAM,WACnBmV,EAAQnV,EAAM,MACdgxB,EAAQhxB,EAAM,MACdivG,EAAcjvG,EAAM,YACtB,OAAOqqG,GAAI,MAAOhqG,GAAS,CAAI,EAAAikG,GAActkG,EAAO,QAAS,CAC3D,MAAO,GACR,EAAGqkG,CAAU,EAAGgG,GAAI0E,EAAS1uG,GAAS,CAAC,EAAG2uG,EAAc,CACvD,YAAAC,EACA,MAAAj+E,EACA,UAAAwzE,EACA,cAAAC,EACA,GAAAx/F,CAAA,CACD,EAAGkQ,CAAK,EAAGk1F,GAAI,MAAO,KAAMt/F,CAAQ,CAAC,CACxC,EACImkG,GAAkB,SAAyBrI,EAAOwC,EAAU,CAC9D,IAAIC,EAAczC,EAAM,MACtBtT,EAAS+V,EAAY,OACrBzT,EAAUyT,EAAY,QACxB,OAAOj4F,GAAc,CACnB,MAAO,QACP,OAAQ,UACR,QAAS,SACRg4F,EAAW,GAAK,CACjB,MAAO9V,EAAO,UACd,SAAU,MACV,WAAY,IACZ,aAAc,SACd,YAAasC,EAAQ,SAAW,EAChC,aAAcA,EAAQ,SAAW,EACjC,cAAe,YAChB,CACH,EACIsZ,GAAe,SAAsBnvG,EAAO,CAC1C,IAAAovG,EAAoBhL,GAAiBpkG,CAAK,EAC1BovG,EAAA,KACd,IAAA/K,EAAa/7F,GAAyB8mG,EAAmBR,EAAW,EAC1E,OAAOvE,GAAI,MAAOhqG,GAAS,CAAI,EAAAikG,GAActkG,EAAO,eAAgB,CAClE,gBAAiB,GAClB,EAAGqkG,CAAU,CAAC,CACjB,EACIgL,GAAUP,GAEV9S,GAAY,CAAC,WAAY,aAAc,WAAY,gBAAgB,EACnEsT,GAAW,SAAkBrlG,EAAMo/F,EAAU,CAC/C,IAAIqD,EAAaziG,EAAK,WACpB3D,EAAQ2D,EAAK,MACbwkG,EAAaxkG,EAAK,MAClB4rF,EAAU4Y,EAAW,QACrBlb,EAASkb,EAAW,OACtB,OAAOp9F,GAAcA,GAAc,CACjC,WAAYq7F,EAAa,SAAW,UAGpC,UAAWpmG,EAAQ,gBAAkB,IACpCipG,EAAc,EAAGlG,EAAW,GAAK,CAClC,OAAQxT,EAAQ,SAAW,EAC3B,cAAeA,EAAQ,SAAW,EAClC,WAAYA,EAAQ,SAAW,EAC/B,MAAOtC,EAAO,UACf,CACH,EACIic,GAAe,CACjB,SAAU,QACV,KAAM,UACN,SAAU,MACV,OAAQ,EACR,OAAQ,EACR,QAAS,EACT,QAAS,CACX,EACID,GAAiB,CACnB,KAAM,WACN,QAAS,cACT,SAAU,gBACV,oBAAqB,gBACrB,UAAWl+F,GAAc,CACvB,QAAS,uBACT,WAAY,SACZ,WAAY,OACXm+F,EAAY,CACjB,EACIC,GAAa,SAAoB1iB,EAAU,CAC7C,OAAO17E,GAAc,CACnB,MAAO,QACP,MAAO,UACP,WAAY,EACZ,QAAS07E,EAAW,EAAI,EACxB,MAAO,QACNyiB,EAAY,CACjB,EACIE,GAAQ,SAAe1vG,EAAO,CAChC,IAAIiF,EAAKjF,EAAM,GACbsG,EAAQtG,EAAM,MACZovG,EAAoBhL,GAAiBpkG,CAAK,EAC5CoqG,EAAWgF,EAAkB,SAC7B1C,EAAa0C,EAAkB,WAC/BriB,EAAWqiB,EAAkB,SAC7BO,EAAiBP,EAAkB,eACnC/K,EAAa/7F,GAAyB8mG,EAAmBpT,EAAS,EACpE,OAAOqO,GAAI,MAAOhqG,GAAS,CAAI,EAAAikG,GAActkG,EAAO,QAAS,CAC3D,kBAAmB,GACpB,EAAG,CACF,aAAcsG,GAAS,GACxB,EAAG+jG,GAAI,QAAShqG,GAAS,CACxB,UAAW4E,EAAG,CACZ,MAAO,IACN0qG,CAAc,EACjB,IAAKvF,EACL,MAAOqF,GAAW1iB,CAAQ,EAC1B,SAAU2f,CAAA,EACTrI,CAAU,CAAC,CAAC,CACjB,EACIuL,GAAUF,GAEVG,GAAgB,SAAuB5lG,EAAMo/F,EAAU,CACrD,IAAAoF,EAAaxkG,EAAK,MACpB4rF,EAAU4Y,EAAW,QACrBlF,EAAekF,EAAW,aAC1Blb,EAASkb,EAAW,OACtB,OAAOp9F,GAAc,CACnB,MAAO,aACP,QAAS,OACT,SAAU,GACTg4F,EAAW,GAAK,CACjB,gBAAiB9V,EAAO,UACxB,aAAcgW,EAAe,EAC7B,OAAQ1T,EAAQ,SAAW,EAC5B,CACH,EACIia,GAAqB,SAA4BjJ,EAAOwC,EAAU,CAChE,IAAAC,EAAczC,EAAM,MACtB0C,EAAeD,EAAY,aAC3B/V,EAAS+V,EAAY,OACrByG,EAAmBlJ,EAAM,iBAC3B,OAAOx1F,GAAc,CACnB,SAAU,SACV,aAAc0+F,GAAoBA,IAAqB,OAAY,WAAa,OAChF,WAAY,UACX1G,EAAW,GAAK,CACjB,aAAcE,EAAe,EAC7B,MAAOhW,EAAO,UACd,SAAU,MACV,QAAS,EACT,YAAa,EACd,CACH,EACIyc,GAAsB,SAA6BjJ,EAAOsC,EAAU,CACtE,IAAIoE,EAAc1G,EAAM,MACtBlR,EAAU4X,EAAY,QACtBlE,EAAekE,EAAY,aAC3Bla,EAASka,EAAY,OACrB3pE,EAAYijE,EAAM,UACpB,OAAO11F,GAAc,CACnB,WAAY,SACZ,QAAS,QACRg4F,EAAW,GAAK,CACjB,aAAcE,EAAe,EAC7B,gBAAiBzlE,EAAYyvD,EAAO,YAAc,OAClD,YAAasC,EAAQ,SACrB,aAAcA,EAAQ,SACtB,SAAU,CACR,gBAAiBtC,EAAO,YACxB,MAAOA,EAAO,MAChB,EACD,CACH,EACI0c,GAAoB,SAA2BjJ,EAAO,CACxD,IAAIj8F,EAAWi8F,EAAM,SACnB3C,EAAa2C,EAAM,WACd,OAAAqD,GAAI,MAAOhG,EAAYt5F,CAAQ,CACxC,EACImlG,GAAsBD,GACtBE,GAAkBF,GACtB,SAASG,GAAiBzF,EAAO,CAC/B,IAAI5/F,EAAW4/F,EAAM,SACnBtG,EAAasG,EAAM,WACd,OAAAN,GAAI,MAAOhqG,GAAS,CACzB,KAAM,QACL,EAAAgkG,CAAU,EAAGt5F,GAAYs/F,GAAIiD,GAAW,CACzC,KAAM,EACP,EAAC,CACJ,CACA,IAAI+C,GAAa,SAAoBrwG,EAAO,CAC1C,IAAI+K,EAAW/K,EAAM,SACnBswG,EAAatwG,EAAM,WACnBwxB,EAAOxxB,EAAM,KACbqkG,EAAarkG,EAAM,WACnB0sG,EAAa1sG,EAAM,WACnBumG,EAAcvmG,EAAM,YACpBivG,EAAcjvG,EAAM,YAClBuwG,EAAYD,EAAW,UACzBE,EAAQF,EAAW,MACnBG,EAASH,EAAW,OACtB,OAAOjG,GAAIkG,EAAW,CACpB,KAAA/+E,EACA,WAAYngB,GAAcA,GAAc,CAAI,EAAAizF,GAActkG,EAAO,aAAc,CAC7E,cAAe,GACf,2BAA4B0sG,CAAA,CAC7B,CAAC,EAAGrI,CAAU,EACf,YAAA4K,CAAA,EACC5E,GAAImG,EAAO,CACZ,KAAAh/E,EACA,WAAYngB,GAAc,GAAIizF,GAActkG,EAAO,kBAAmB,CACpE,qBAAsB,GACvB,CAAC,EACF,YAAAivG,CAAA,EACClkG,CAAQ,EAAGs/F,GAAIoG,EAAQ,CACxB,KAAAj/E,EACA,WAAYngB,GAAcA,GAAc,CAAI,EAAAizF,GAActkG,EAAO,mBAAoB,CACnF,sBAAuB,GACxB,CAAC,EAAG,GAAI,CACP,aAAc,UAAU,OAAO+K,GAAY,QAAQ,GAClDw7F,CAAW,EACd,YAAA0I,CACD,EAAC,CACJ,EACIyB,GAAeL,GAEfM,GAAY,SAAmB1mG,EAAMo/F,EAAU,CACjD,IAAIqD,EAAaziG,EAAK,WACpB65B,EAAY75B,EAAK,UACjBgK,EAAahK,EAAK,WAClBwkG,EAAaxkG,EAAK,MAClB4rF,EAAU4Y,EAAW,QACrBlb,EAASkb,EAAW,OACtB,OAAOp9F,GAAc,CACnB,MAAO,SACP,OAAQ,UACR,QAAS,QACT,SAAU,UACV,MAAO,OACP,WAAY,OACZ,wBAAyB,oBACxBg4F,EAAW,GAAK,CACjB,gBAAiBp1F,EAAas/E,EAAO,QAAUzvD,EAAYyvD,EAAO,UAAY,cAC9E,MAAOmZ,EAAanZ,EAAO,UAAYt/E,EAAas/E,EAAO,SAAW,UACtE,QAAS,GAAG,OAAOsC,EAAQ,SAAW,EAAG,KAAK,EAAE,OAAOA,EAAQ,SAAW,EAAG,IAAI,EAEjF,UAAW,CACT,gBAAkB6W,EAA8D,OAAjDz4F,EAAas/E,EAAO,QAAUA,EAAO,SACtE,EACD,CACH,EACIqd,GAAS,SAAgB5wG,EAAO,CAClC,IAAI+K,EAAW/K,EAAM,SACnB0sG,EAAa1sG,EAAM,WACnB8jC,EAAY9jC,EAAM,UAClBiU,EAAajU,EAAM,WACnBoqG,EAAWpqG,EAAM,SACjBqkG,EAAarkG,EAAM,WACrB,OAAOqqG,GAAI,MAAOhqG,GAAS,CAAI,EAAAikG,GAActkG,EAAO,SAAU,CAC5D,OAAQ,GACR,sBAAuB0sG,EACvB,qBAAsB5oE,EACtB,sBAAuB7vB,CAAA,CACxB,EAAG,CACF,IAAKm2F,EACL,gBAAiBsC,CAAA,EAChBrI,CAAU,EAAGt5F,CAAQ,CAC1B,EACI8lG,GAAWD,GAEXE,GAAiB,SAAwB7mG,EAAMo/F,EAAU,CAC3D,IAAIoF,EAAaxkG,EAAK,MACpB4rF,EAAU4Y,EAAW,QACrBlb,EAASkb,EAAW,OACtB,OAAOp9F,GAAc,CACnB,MAAO,cACP,SAAU,iBACTg4F,EAAW,GAAK,CACjB,MAAO9V,EAAO,UACd,WAAYsC,EAAQ,SAAW,EAC/B,YAAaA,EAAQ,SAAW,EACjC,CACH,EACIkb,GAAc,SAAqB/wG,EAAO,CAC5C,IAAI+K,EAAW/K,EAAM,SACnBqkG,EAAarkG,EAAM,WACrB,OAAOqqG,GAAI,MAAOhqG,GAAS,CAAI,EAAAikG,GAActkG,EAAO,cAAe,CACjE,YAAa,GACd,EAAGqkG,CAAU,EAAGt5F,CAAQ,CAC3B,EACIimG,GAAgBD,GAEhB5Q,GAAM,SAAal2F,EAAMo/F,EAAU,CACjC,IAAAqD,EAAaziG,EAAK,WACpBwkG,EAAaxkG,EAAK,MAClB4rF,EAAU4Y,EAAW,QACrBlb,EAASkb,EAAW,OACtB,OAAOp9F,GAAc,CACnB,MAAO,cACP,SAAU,gBACV,SAAU,OACV,SAAU,SACV,aAAc,WACd,WAAY,UACXg4F,EAAW,GAAK,CACjB,MAAOqD,EAAanZ,EAAO,UAAYA,EAAO,UAC9C,WAAYsC,EAAQ,SAAW,EAC/B,YAAaA,EAAQ,SAAW,EACjC,CACH,EACIob,GAAc,SAAqBjxG,EAAO,CAC5C,IAAI+K,EAAW/K,EAAM,SACnB0sG,EAAa1sG,EAAM,WACnBqkG,EAAarkG,EAAM,WACrB,OAAOqqG,GAAI,MAAOhqG,GAAS,CAAI,EAAAikG,GAActkG,EAAO,cAAe,CACjE,eAAgB,GAChB,4BAA6B0sG,CAAA,CAC9B,EAAGrI,CAAU,EAAGt5F,CAAQ,CAC3B,EACImmG,GAAgBD,GAEhBX,GAAa,CACf,eAAAzC,GACA,QAASc,GACT,kBAAAhB,GACA,YAAAJ,GACA,UAAAD,GACA,MAAO+B,GACP,aAAAF,GACA,oBAAAlC,GACA,mBAAAe,GACA,MAAO4B,GACP,iBAAAtB,GACA,KAAMhE,GACN,SAAAG,GACA,WAAAe,GACA,eAAAL,GACA,iBAAAJ,GACA,WAAY2F,GACZ,oBAAAR,GACA,gBAAAC,GACA,iBAAAC,GACA,OAAQS,GACR,YAAaG,GACb,gBAAArE,GACA,YAAauE,GACb,eAAAnE,EACF,EACIoE,GAAoB,SAA2BnxG,EAAO,CACxD,OAAOqR,GAAcA,GAAc,GAAIi/F,EAAU,EAAGtwG,EAAM,UAAU,CACtE,ECh3CIoxG,GAAY,OAAO,OACnB,SAAkB9qG,EAAO,CACrB,OAAO,OAAOA,GAAU,UAAYA,IAAUA,CACtD,EACA,SAAS+qG,GAAQC,EAAOC,EAAQ,CAI5B,MAHI,GAAAD,IAAUC,GAGVH,GAAUE,CAAK,GAAKF,GAAUG,CAAM,EAI5C,CACA,SAASC,GAAeC,EAAWC,EAAY,CAC3C,GAAID,EAAU,SAAWC,EAAW,OAChC,MAAO,GAEX,QAASptG,EAAI,EAAGA,EAAImtG,EAAU,OAAQntG,IAClC,GAAI,CAAC+sG,GAAQI,EAAUntG,CAAC,EAAGotG,EAAWptG,CAAC,CAAC,EACpC,MAAO,GAGf,MAAO,EACX,CAEA,SAASqtG,GAAWC,EAAUP,EAAS,CAC/BA,IAAY,SAAUA,EAAUG,IACpC,IAAInkG,EAAQ,KACZ,SAASwkG,GAAW,CAEhB,QADIC,EAAU,GACLC,EAAK,EAAGA,EAAK,UAAU,OAAQA,IACpCD,EAAQC,CAAE,EAAI,UAAUA,CAAE,EAE9B,GAAI1kG,GAASA,EAAM,WAAa,MAAQgkG,EAAQS,EAASzkG,EAAM,QAAQ,EACnE,OAAOA,EAAM,WAEjB,IAAI2kG,EAAaJ,EAAS,MAAM,KAAME,CAAO,EAC7C,OAAAzkG,EAAQ,CACJ,WAAY2kG,EACZ,SAAUF,EACV,SAAU,IACtB,EACeE,CACV,CACD,OAAAH,EAAS,MAAQ,UAAiB,CAC9BxkG,EAAQ,IAChB,EACWwkG,CACX,CC/BA,IAAI5nG,GAA+C,CACjD,KAAM,kBACN,OAAQ,wJACV,EAMIgoG,GAAW,SAAkBjyG,EAAO,CAC/B,OAAAqqG,GAAI,OAAQhqG,GAAS,CAC1B,IAAK4J,EAAA,EACJjK,CAAK,CAAC,CACX,EACIkyG,GAAaD,GAEbE,GAA0B,CAC5B,SAAU,SAAkBnyG,EAAO,CACjC,IAAIoyG,EAAepyG,EAAM,aACvBomG,EAAUpmG,EAAM,QAChBqyG,EAAkBryG,EAAM,gBACxBk+E,EAAUl+E,EAAM,QAChBsyG,EAAiBtyG,EAAM,eACzB,OAAQk+E,EAAS,CACf,IAAK,OACH,MAAO,uHAAuH,OAAOm0B,EAAkB,qDAAuD,GAAI,GAAG,EACvN,IAAK,QACH,OAAOC,EAAiB,GAAG,OAAOtyG,EAAM,YAAY,GAAK,SAAU,cAAc,EAAE,OAAOoyG,EAAe,uBAAyB,GAAI,iCAAiC,EAAE,OAAOhM,EAAU,uCAAyC,EAAE,EAAI,GAC3O,IAAK,QACI,mHACT,QACS,QACX,CACF,EACA,SAAU,SAAkBpmG,EAAO,CACjC,IAAI8qC,EAAS9qC,EAAM,OACjBuyG,EAAevyG,EAAM,MACrBmV,EAAQo9F,IAAiB,OAAS,GAAKA,EACvCh+F,EAASvU,EAAM,OACf0sG,EAAa1sG,EAAM,WACrB,OAAQ8qC,EAAQ,CACd,IAAK,kBACL,IAAK,YACL,IAAK,eACI,gBAAU,OAAO31B,EAAO,eAAe,EAChD,IAAK,QACI,gDACT,IAAK,sBACH,MAAO,SAAS,OAAOZ,EAAO,OAAS,EAAI,IAAM,GAAI,GAAG,EAAE,OAAOA,EAAO,KAAK,GAAG,EAAG,aAAa,EAClG,IAAK,gBACI,OAAAm4F,EAAa,UAAU,OAAOv3F,EAAO,sCAAsC,EAAI,UAAU,OAAOA,EAAO,aAAa,EAC7H,QACS,QACX,CACF,EACA,QAAS,SAAiBnV,EAAO,CAC3B,IAAAk+E,EAAUl+E,EAAM,QAClBsgD,EAAUtgD,EAAM,QAChB2G,EAAU3G,EAAM,QAChBwyG,EAAgBxyG,EAAM,MACtBmV,EAAQq9F,IAAkB,OAAS,GAAKA,EACxCC,EAAczyG,EAAM,YACpB0sG,EAAa1sG,EAAM,WACnBiU,EAAajU,EAAM,WACnB0yG,EAAgB1yG,EAAM,cACpB2yG,EAAgB,SAAuBp3F,EAAKtM,EAAM,CACpD,OAAOsM,GAAOA,EAAI,OAAS,GAAG,OAAOA,EAAI,QAAQtM,CAAI,EAAI,EAAG,MAAM,EAAE,OAAOsM,EAAI,MAAM,EAAI,IAEvF,GAAA2iE,IAAY,SAAWu0B,EAClB,eAAS,OAAOt9F,EAAO,YAAY,EAAE,OAAOw9F,EAAcF,EAAanyD,CAAO,EAAG,GAAG,EAEzF,GAAA49B,IAAY,QAAUw0B,EAAe,CACnC,IAAA9mG,EAAW8gG,EAAa,YAAc,GACtCkG,EAAS,GAAG,OAAO3+F,EAAa,YAAc,EAAE,EAAE,OAAOrI,CAAQ,EACrE,MAAO,GAAG,OAAOuJ,CAAK,EAAE,OAAOy9F,EAAQ,IAAI,EAAE,OAAOD,EAAchsG,EAAS25C,CAAO,EAAG,GAAG,CAC1F,CACO,QACT,EACA,SAAU,SAAkBtgD,EAAO,CACjC,IAAIg+F,EAAah+F,EAAM,WACrB6yG,EAAiB7yG,EAAM,eAClB,SAAG,OAAO6yG,CAAc,EAAE,OAAO7U,EAAa,oBAAsBA,EAAa,GAAI,GAAG,CACjG,CACF,EAEI8U,GAAa,SAAoB9yG,EAAO,CACtC,IAAA+yG,EAAgB/yG,EAAM,cACxBgzG,EAAgBhzG,EAAM,cACtBizG,EAAejzG,EAAM,aACrBkzG,EAAmBlzG,EAAM,iBACzB8jC,EAAY9jC,EAAM,UAClByyG,EAAczyG,EAAM,YACpBivG,EAAcjvG,EAAM,YACpB2kB,EAAK3kB,EAAM,GACX0yG,EAAgB1yG,EAAM,cACpBmzG,EAAmBlE,EAAY,iBACjCmE,EAAiBnE,EAAY,eAC7BjR,EAAaiR,EAAY,WACzB7I,EAAU6I,EAAY,QACtBoE,EAAmBpE,EAAY,iBAC/BmD,EAAenD,EAAY,aAC3BhR,EAAagR,EAAY,WACzBtoG,EAAUsoG,EAAY,QACtBqE,EAAqBrE,EAAY,mBACjCoD,EAAkBpD,EAAY,gBAC9BsE,EAAYtE,EAAY,UACtBuE,EAAYvE,EAAY,YAAY,EACpCwE,EAAWxE,EAAY,WAAW,EAGlCyE,EAAW3jB,UAAQ,UAAY,CAC1B,OAAA1+E,GAAcA,GAAc,CAAC,EAAG8gG,EAAuB,EAAGgB,GAAoB,EAAE,GACtF,CAACA,CAAgB,CAAC,EAGjBQ,EAAe5jB,UAAQ,UAAY,CACrC,IAAIvvF,GAAU,GACV,GAAAuyG,GAAiBW,EAAS,SAAU,CACtC,IAAIE,EAASb,EAAc,OACzBc,GAAkBd,EAAc,QAChCe,GAAef,EAAc,aAC7BgB,GAAgBhB,EAAc,cAC9BzsG,GAAQysG,EAAc,MAEpBiB,EAAW,SAAkBx2F,EAAK,CACpC,OAAQ,MAAM,QAAQA,CAAG,EAAU,KAANA,CAAM,EAIjC9R,GAAWooG,IAAgBF,GAAUI,EAAS1tG,EAAK,EACnD6O,GAAQzJ,GAAW0nG,EAAe1nG,EAAQ,EAAI,GAG9CuoG,GAAgBJ,IAAmBE,IAAiB,OACpDx/F,GAAS0/F,GAAgBA,GAAc,IAAIb,CAAc,EAAI,GAC7Dc,EAAgB7iG,GAAc,CAGhC,WAAY3F,IAAY2nG,EAAiB3nG,GAAU+mG,CAAW,EAC9D,MAAAt9F,GACA,OAAAZ,IACCw+F,CAAa,EACNvyG,GAAAkzG,EAAS,SAASQ,CAAa,CAC3C,CACO,OAAA1zG,EAAA,EACN,CAACuyG,EAAeW,EAAUL,EAAkBZ,EAAaW,CAAc,CAAC,EACvEe,EAAcpkB,UAAQ,UAAY,CACpC,IAAIqkB,GAAW,GACX9zD,EAAU0yD,GAAiBC,EAC3Bh/F,GAAa,CAAC,EAAE++F,GAAiBP,GAAeA,EAAY,SAASO,CAAa,GAClF,GAAA1yD,GAAWozD,EAAS,QAAS,CAC/B,IAAIW,GAAe,CACjB,QAAA/zD,EACA,MAAO8yD,EAAe9yD,CAAO,EAC7B,WAAY+yD,EAAiB/yD,EAASmyD,CAAW,EACjD,WAAAx+F,GACA,QAASi/F,EACT,QAAS5yD,IAAY0yD,EAAgB,OAAS,QAC9C,YAAAP,EACA,cAAeC,CAAA,EAEN0B,GAAAV,EAAS,QAAQW,EAAY,CAC1C,CACO,OAAAD,EAAA,EACN,CAACpB,EAAeC,EAAcG,EAAgBC,EAAkBK,EAAUR,EAAkBT,EAAaC,CAAa,CAAC,EACtH4B,EAAcvkB,UAAQ,UAAY,CACpC,IAAIwkB,GAAa,GACjB,GAAItW,GAAct3F,EAAQ,QAAU,CAAC4sG,GAAaG,EAAS,SAAU,CACnE,IAAIb,EAAiBS,EAAmB,CACtC,MAAOJ,EAAiB,OACzB,EACDqB,GAAab,EAAS,SAAS,CAC7B,WAAA1V,EACA,eAAA6U,CAAA,CACD,CACH,CACO,OAAA0B,EAAA,EACN,CAACrB,EAAkBlV,EAAYC,EAAYyV,EAAU/sG,EAAS2sG,EAAoBC,CAAS,CAAC,EAC3FjB,GAAkBS,GAAkB,KAAmC,OAASA,EAAc,UAAY,sBAC1GyB,EAAezkB,UAAQ,UAAY,CACrC,IAAI0kB,GAAc,GAClB,GAAIf,EAAS,SAAU,CACrB,IAAIx1B,EAAU+0B,EAAe,QAAUhV,EAAa,OAAS,QAC7DwW,GAAcf,EAAS,SAAS,CAC9B,aAAcF,EACd,QAAAt1B,EACA,WAAY80B,GAAiBK,EAAiBL,EAAeP,CAAW,EACxE,QAAArM,EACA,aAAAgM,EACA,gBAAAC,EACA,eAAAC,CAAA,CACD,CACH,CACO,OAAAmC,EACN,GAACjB,EAAWR,EAAeC,EAAc7M,EAASiN,EAAkBjB,EAAcnU,EAAYyV,EAAUjB,EAAaJ,EAAiBC,CAAc,CAAC,EACpJoC,EAAmBrK,GAAIsK,WAAU,KAAMtK,GAAI,OAAQ,CACrD,GAAI,kBACHsJ,CAAY,EAAGtJ,GAAI,OAAQ,CAC5B,GAAI,gBACH8J,CAAW,EAAG9J,GAAI,OAAQ,CAC3B,GAAI,gBACHiK,CAAW,EAAGjK,GAAI,OAAQ,CAC3B,GAAI,iBACHmK,CAAY,CAAC,EAChB,OAAOnK,GAAIsK,EAAA,SAAU,KAAMtK,GAAI6H,GAAY,CACzC,GAAAvtF,CACC,EAAA2tF,GAAkBoC,CAAgB,EAAGrK,GAAI6H,GAAY,CACtD,YAAauB,EACb,cAAe,QACf,gBAAiB,iBACjB,KAAM,KACL,EAAA3vE,GAAa,CAACwuE,GAAkBoC,CAAgB,CAAC,CACtD,EACIE,GAAe9B,GAEf+B,GAAa,CAAC,CAChB,KAAM,IACN,QAAS,oCACX,EAAG,CACD,KAAM,KACN,QAAS,GACX,EAAG,CACD,KAAM,KACN,QAAS,KACX,EAAG,CACD,KAAM,KACN,QAAS,GACX,EAAG,CACD,KAAM,KACN,QAAS,GACX,EAAG,CACD,KAAM,KACN,QAAS,IACX,EAAG,CACD,KAAM,KACN,QAAS,GACX,EAAG,CACD,KAAM,IACN,QAAS,WACX,EAAG,CACD,KAAM,IACN,QAAS,cACX,EAAG,CACD,KAAM,IACN,QAAS,gBACX,EAAG,CACD,KAAM,KACN,QAAS,IACX,EAAG,CACD,KAAM,KACN,QAAS,IACX,EAAG,CACD,KAAM,IACN,QAAS,gCACX,EAAG,CACD,KAAM,IACN,QAAS,QACX,EAAG,CACD,KAAM,IACN,QAAS,iBACX,EAAG,CACD,KAAM,IACN,QAAS,gBACX,EAAG,CACD,KAAM,IACN,QAAS,sBACX,EAAG,CACD,KAAM,IACN,QAAS,OACX,EAAG,CACD,KAAM,IACN,QAAS,gBACX,EAAG,CACD,KAAM,IACN,QAAS,oBACX,EAAG,CACD,KAAM,KACN,QAAS,GACX,EAAG,CACD,KAAM,KACN,QAAS,GACX,EAAG,CACD,KAAM,IACN,QAAS,UACX,EAAG,CACD,KAAM,IACN,QAAS,kBACX,EAAG,CACD,KAAM,KACN,QAAS,GACX,EAAG,CACD,KAAM,KACN,QAAS,GACX,EAAG,CACD,KAAM,IACN,QAAS,6CACX,EAAG,CACD,KAAM,KACN,QAAS,GACX,EAAG,CACD,KAAM,KACN,QAAS,GACX,EAAG,CACD,KAAM,KACN,QAAS,GACX,EAAG,CACD,KAAM,IACN,QAAS,YACX,EAAG,CACD,KAAM,IACN,QAAS,QACX,EAAG,CACD,KAAM,IACN,QAAS,mBACX,EAAG,CACD,KAAM,IACN,QAAS,mBACX,EAAG,CACD,KAAM,IACN,QAAS,iBACX,EAAG,CACD,KAAM,KACN,QAAS,GACX,EAAG,CACD,KAAM,IACN,QAAS,oCACX,EAAG,CACD,KAAM,IACN,QAAS,UACX,EAAG,CACD,KAAM,KACN,QAAS,GACX,EAAG,CACD,KAAM,IACN,QAAS,YACX,EAAG,CACD,KAAM,IACN,QAAS,OACX,EAAG,CACD,KAAM,IACN,QAAS,iBACX,EAAG,CACD,KAAM,IACN,QAAS,gBACX,EAAG,CACD,KAAM,IACN,QAAS,qCACX,EAAG,CACD,KAAM,KACN,QAAS,GACX,EAAG,CACD,KAAM,KACN,QAAS,KACX,EAAG,CACD,KAAM,KACN,QAAS,GACX,EAAG,CACD,KAAM,KACN,QAAS,GACX,EAAG,CACD,KAAM,KACN,QAAS,IACX,EAAG,CACD,KAAM,KACN,QAAS,GACX,EAAG,CACD,KAAM,IACN,QAAS,WACX,EAAG,CACD,KAAM,IACN,QAAS,eACX,EAAG,CACD,KAAM,IACN,QAAS,gBACX,EAAG,CACD,KAAM,KACN,QAAS,IACX,EAAG,CACD,KAAM,IACN,QAAS,iCACX,EAAG,CACD,KAAM,IACN,QAAS,QACX,EAAG,CACD,KAAM,IACN,QAAS,iBACX,EAAG,CACD,KAAM,IACN,QAAS,iBACX,EAAG,CACD,KAAM,KACN,QAAS,GACX,EAAG,CACD,KAAM,IACN,QAAS,sBACX,EAAG,CACD,KAAM,IACN,QAAS,QACX,EAAG,CACD,KAAM,IACN,QAAS,gBACX,EAAG,CACD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","names":["Add","React.forwardRef","props","ref","attrs","React.createElement","EmotionIconBase","_extends","Search","panic","message","assert","fact","assertNever","_never","msg","maybe","fn","defaultValue","has","deepEqual","foo","bar","ctor","len","objectProto","hasOwnProperty","baseHas","object","key","_baseHas","require$$0","hasPath","require$$1","path","has_1","BooleanEmpty","BooleanIndeterminate","GridCellKind","GridColumnIcon","GridColumnMenuIcon","isSizedGridColumn","c","resolveCellsThunk","thunk","isEditableGridCell","cell","isInnerOnlyCell","InnerGridCellKind","isReadWriteCell","isObjectEditorCallbackResult","obj","booleanCellIsEditable","mergeRanges","input","ranges","stack","a","b","range","top","emptyCompactSelection","_CompactSelection","items","__publicField","amount","newItems","x","selection","slice","selMin","selMax","i","start","end","toAdd","index","predicate","other","left","right","result","CompactSelection","cx","presentClassNames","atomicClasses","nonAtomicClasses","arg","className","keyHash","cx_default","isCapital","ch","filterKey","keys","omit","res","filterProps","asIs","omitKeys","filteredProps","interopValidAttr","validAttr","warnIfInvalid","value","componentName","styled","tag","mockedClass","options","render","component","shouldKeepProps","vars","style","name","variable","unit","ownStyle","React","Result","rest","styled_default","ImageOverlayEditorStyle","global","factory","exports","this","_react","_propTypes","setHasSupportToCaptureOption","_react2","_interopRequireDefault","_propTypes2","target","source","_objectWithoutProperties","_classCallCheck","instance","Constructor","_createClass","defineProperties","descriptor","protoProps","staticProps","_possibleConstructorReturn","self","call","_inherits","subClass","superClass","supportsCaptureOption","hasSupport","getSafeEventHandlerOpts","getPosition","event","_event$touches$","pageX","pageY","screenX","screenY","ReactSwipe","_Component","_ref","_len","args","_key","_this","_getPosition","y","_getPosition2","deltaX","deltaY","shouldPreventDefault","tolerance","node","_props","children","_reactSwipe","_reactSwipe2","cssClasses","_classnames","_defineProperty","_default","customClassName","isSlider","axis","isSwiping","selected","previous","disabled","dimensions","outerWidth","el","width","CSSTranslate","position","metric","positionPercent","positionCss","transitionProp","translatedPosition","window_1","Thumbs_1","_interopRequireWildcard","_cssClasses","_dimensions","require$$2","_CSSTranslate","require$$3","_reactEasySwipe","require$$4","_window","require$$5","_getRequireWildcardCache","cache","_typeof","newObj","hasPropertyDescriptor","desc","_defineProperties","_setPrototypeOf","o","p","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","Super","_getPrototypeOf","NewTarget","_assertThisInitialized","isKeyboardEvent","e","Thumbs","_super","total","wrapperSize","itemSize","visibleItems","showArrows","lastPosition","_state","item","handler","delta","leftBoundary","childrenLength","currentPosition","lastLeftItem","lastLeftBoundary","prop","positions","prevProps","selectedItem","firstItem","_this2","img","itemClass","thumbProps","_this3","isSwipeable","hasPrev","hasNext","itemListStyles","transformProp","transitionTime","document_1","utils","noop","defaultStatusFormatter","current","setPosition","animations","_utils","ownKeys","enumerableOnly","symbols","sym","_objectSpread","slideAnimationHandler","state","returnStyles","previousItem","needClonedSlide","slideSwipeAnimationHandler","setState","isHorizontal","initialBoundry","finalBoundry","axisDelta","handledDelta","hasMoved","slideStopSwipingHandler","itemListStyle","fadeAnimationHandler","transitionTimingFunction","slideStyle","Carousel_1","_Thumbs","_document","require$$6","_animations","require$$7","Carousel","_React$Component","keyNames","nextKey","prevKey","animationHandlerResponse","newIndex","images","slideImages","image","onImageLoad","displayItem","height","initState","prevState","initialImage","carouselWrapper","_this$carouselWrapper","isClone","isSelected","isPrevious","slideProps","_this4","_this$props","showIndicators","labels","renderIndicator","_","_this5","canShowArrows","itemsClone","firstClone","lastClone","swiperProps","containerStyles","itemHeight","onClickHandler","label","_Carousel","_types","root","now","now_1","isObject","toNumber","FUNC_ERROR_TEXT","nativeMax","nativeMin","debounce","func","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","invokeFunc","time","thisArg","leadingEdge","timerExpired","remainingWait","timeSinceLastCall","timeSinceLastInvoke","timeWaiting","shouldInvoke","trailingEdge","cancel","flush","debounced","isInvoking","debounce_1","useEventListener","eventName","element","passive","capture","savedHandler","React.useRef","React.useEffect","eventListener","_a","whenDefined","PI","degreesToRadians","degrees","getSquareBB","posX","posY","squareSideLength","getSquareXPosFromAlign","alignment","containerX","containerWidth","horizontalPadding","squareWidth","getSquareWidth","maxSize","containerHeight","verticalPadding","pointIsWithinBB","bb","EditPencil","fg","Checkmark","useDebouncedMemo","deps","React.useState","mountedRef","debouncedSetState","React.useLayoutEffect","rtlRange","ltrRange","rtl","direction","scrollbarWidthCache","getScrollBarWidth","inner","outer","w1","w2","empty","useStateWithReactiveInput","inputState","inputStateRef","forceRender","setStateOuter","React.useCallback","nv","s","pv","onEmpty","makeAccessibilityStringForArray","arr","count","str","useDeepMemo","ImageOverlayEditor","urls","canWrite","onEditClick","renderImage","filtered","u","allowMove","url","innerContent","getDefaults","defaults","changeDefaults","newDefaults","escapeTest","escapeReplace","escapeTestNoEncode","escapeReplaceNoEncode","escapeReplacements","getEscapeReplacement","escape","html","encode","unescapeTest","unescape","caret","edit","regex","opt","val","nonWordAndColonTest","originIndependentUrl","cleanUrl","sanitize","base","href","prot","resolveUrl","baseUrls","justDomain","protocol","domain","rtrim","relativeBase","noopTest","splitCells","tableRow","row","match","offset","escaped","curr","cells","invert","l","suffLen","currChar","findClosingBracket","level","checkSanitizeDeprecation","repeatString","pattern","outputLink","cap","link","raw","lexer","title","text","token","indentCodeCompensation","matchIndentToCode","indentToCode","matchIndentInNode","indentInNode","Tokenizer","src","trimmed","tokens","istask","ischecked","indent","blankLine","endsWithBlankLine","line","nextLine","rawLine","itemContents","endEarly","bull","isordered","list","itemRegex","t","nextBulletRegex","hrRegex","fencesBeginRegex","headingBeginRegex","spacers","hasMultipleLineBreaks","j","k","trimmedUrl","rtrimSlash","lastParenIndex","linkLen","links","maskedSrc","prevChar","nextChar","lLength","rDelim","rLength","delimTotal","midDelimTotal","endReg","hasNonSpaceChars","hasSpaceCharsOnBothEnds","mangle","prevCapZero","smartypants","block","inline","out","Lexer","rules","next","tabs","lastToken","cutSrc","lastParagraphClipped","extTokenizer","startIndex","tempSrc","tempStart","getStartIndex","errMsg","keepPrevChar","Renderer","code","infostring","lang","quote","slugger","id","body","ordered","type","startatt","checked","header","content","flags","TextRenderer","Slugger","originalSlug","isDryRun","slug","occurenceAccumulator","Parser","l2","l3","loose","itemBody","task","checkbox","ret","renderer","Hooks","markdown","onError","silent","async","callback","parseMarkdown","parser","origOpt","marked","throwError","highlight","done","err","pending","extensions","pack","opts","ext","prevRenderer","tokenizer","prevTokenizer","hooks","prevHook","walkTokens","values","childTokens","MarkdownContainer","MarkdownDiv","targetElement","contents","createNode","innerHTML","childRange","newChild","childDoc","tags","InputBox","ShadowBox","GrowingEntryStyle","globalInputID","GrowingEntry","placeholder","onKeyDown","altNewline","validatedSelection","onChange","inputRef","useText","inputID","ta","length","onKeyDownInner","div","createDiv","d","parseToRgba","color","normalizedColor","control","computedColor","withAlpha","alpha","r","g","blendResultCache","blendCache","background","cacheKey","blend","br","bg","ba","ao","ro","go","bo","z","v","w","n","f","m","h","M","C","R","T","useMappedColumns","columns","freezeColumns","gridSelectionHasItem","sel","col","itemsAreEqual","toCheck","isGroupEqual","cellIsSelected","location","itemIsInRect","rect","rectBottomRight","cellIsInRect","startX","endX","startY","endY","cellCol","cellRow","spanStart","spanEnd","cellIsInRange","includeSingleSelection","remapForDnDState","dndState","mappedCols","writable","temp","getStickyWidth","remapped","getFreezeTrailingHeight","rows","freezeTrailingRows","getRowHeight","getEffectiveColumns","cellXOffset","tx","sticky","endIndex","curX","getColumnIndexForX","targetX","effectiveColumns","translateX","getRowIndexForY","targetY","hasGroups","headerHeight","groupHeaderHeight","rowHeight","cellYOffset","translateY","totalHeaderHeight","fr","rh","effectiveRows","ty","curY","metricsSize","metricsCache","isSSR","clearCacheOnLoad","clearCache","makeCacheKey","ctx","baseline","font","measureTextCached","metrics","getMeasuredTextCache","getMiddleCenterBias","getMiddleCenterBiasInner","loadMetric","sample","biasCache","alphabeticMetrics","bias","drawLastUpdateUnderlay","lastUpdate","frameTime","lastPrep","isLastCol","isLastRow","theme","progress","animTime","fade","prepTextCell","overrideColor","newFill","drawTextCellExternal","data","contentAlign","drawTextCell","drawSingleTextLine","getEmHeight","fontStyle","textMetrics","truncateString","max","drawMultiLineText","hyperWrapping","split","splitText","emHeight","lineHeight","actualHeight","mustClip","optimalY","drawY","allowWrapping","isRtl","changed","roundedRect","radius","drawMenuDots","dotsX","dotsY","roundedPoly","points","radiusAll","asVec","pp","vx","vy","vlen","vnx","vny","p1","p2","p3","v1","v2","sinA","sinA90","angle","radDirection","drawDirection","halfAngle","lenOut","cRadius","computeBounds","mappedColumns","dir","freezeWidth","group","clip","dy","rowShift","packColRowToNumber","unpackCol","packed","unpackRow","unpackNumberToColRow","WindowingTrackerBase","colInWindow","rowInWindow","newWindow","freezeCols","freezeRows","RenderStateProvider","CellSet","cellNumber","makeCSSStyle","dataEditorBaseTheme","getDataEditorTheme","ThemeContext","useTheme","mergeAndRealizeTheme","overlays","merged","overlay","defaultSize","measureCell","getCellRenderer","measureColumn","colIndex","selectedData","minColumnWidth","maxColumnWidth","removeOutliers","sizes","sum","size","average","final","useColumnSizer","getCellsForSelection","clientWidth","abortController","rowsRef","getCellsForSelectionRef","themeRef","canvas","React.useMemo","offscreen","memoMap","lastColumns","setSelectionData","getCells","computeRows","tailRows","computeArea","tailComputeArea","getResult","tailGetResult","toSet","totalWidth","totalGrow","distribute","writeable","extra","remaining","di","weighted","baseClamp","number","lower","upper","_baseClamp","clamp","clamp_1","noop_1","Set","setToArray","INFINITY","createSet","_createSet","SetCache","arrayIncludes","arrayIncludesWith","cacheHas","LARGE_ARRAY_SIZE","baseUniq","array","iteratee","comparator","includes","isCommon","seen","set","computed","seenIndex","_baseUniq","uniq","uniq_1","iconHead","headerRowID","headerCode","headerNumber","headerString","headerBoolean","headerUri","renameIcon","headerAudioUri","headerVideoUri","headerEmoji","headerImage","headerPhone","headerMarkdown","headerDate","headerTime","headerEmail","headerReference","headerIfThenElse","headerSingleValue","headerLookup","headerTextTemplate","headerMath","headerRollup","headerJoinStrings","headerSplitString","headerGeoDistance","headerArray","rowOwnerOverlay","protectedColumnOverlay","sprites","getColors","variant","SpriteManager","headerIcons","onSettled","sprite","bgColor","fgColor","rSize","spriteCanvas","spriteCb","spriteCtx","imgSource","promise","getSkipPoint","drawRegions","drawRegionsLowestY","dr","walkRowsInCol","startRow","hasAppendRow","skipToY","cb","rowEnd","didBreak","walkColumns","effectiveCols","clipX","drawX","walkGroups","startCol","boxWidth","endCol","localX","getSpanBounds","span","cellX","cellY","cellW","cellH","column","allColumns","frozenRect","contentRect","firstNonSticky","renderFromCol","tempX","tempW","renderToCol","getClosestRect","px","py","allowedDirections","combineRects","distanceToLeft","distanceToRight","distanceToTop","distanceToBottom","minDistance","intersectRect","x1","y1","h1","x2","y2","h2","pointInRect","rectContains","hugRectToTarget","mod","leftMax","topMax","rightMax","bottomMax","leftOverflow","rightOverflow","topOverflow","bottomOverflow","bottom","splitRectIntoRegions","splitIndicies","splitLocations","lSplit","tSplit","rSplit","bSplit","lClip","tClip","rClip","bClip","inX","inY","inW","inH","inRight","inBottom","isOverLeft","isOverTop","isOverRight","isOverBottom","isOverCenterVert","isOverCenterHoriz","loadingCell","drawCells","getCellContent","getGroupDetails","getRowThemeOverride","disabledRows","isFocused","drawFocus","damage","prelightCells","highlightRegions","imageLoader","spriteManager","hoverValues","hoverInfo","drawCellCallback","outerTheme","enqueue","renderStateProvider","overrideCursor","minimumCellWidth","toDraw","deprepArg","cellIndex","freezeTrailingRowsHeight","handledSpans","skipPoint","colDrawStartY","diff","colDrawX","colDrawY","colWidth","colHeight","found","reclip","colSelected","groupTheme","colTheme","colFont","prepResult","isSticky","isTrailingRow","rowSelected","rowDisabled","cellWidth","drawingSpan","skipContents","spanKey","areas","area","rowTheme","trailingTheme","_b","accentCount","spanIsHighlighted","bgCell","fill","pre","region","didDamageClip","isLastColumn","hoverValue","hv","cellFont","drawCell","_c","allocatedItem","reusableRect","drawState","animationFrameRequested","animRequest","highlighted","finalCellFillColor","hoverAmount","hoverX","hoverY","needsAnim","partialPrepResult","drawCheckbox","centerY","rectBordRadius","checkBoxWidth","checkBoxHalfWidth","hovered","drawGridHeaders","enableGroups","dragAndDropState","isResizing","verticalBorder","drawHeaderCallback","touchMode","hCol","hRow","hPosX","hPosY","_d","_y","noHover","hoveredBoolean","hover","hasSelectedCell","bgFillStyle","xOffset","drawHeader","drawGroups","_hoverValues","finalX","groupName","isHovered","fillColor","actionBoxes","getActionBoundsForGroup","fadeStartX","fadeWidth","grad","trans","mouseX","mouseY","action","box","actionHovered","menuButtonSize","getHeaderMenuBounds","actions","flipHorizontal","toFlip","mirrorX","isRTL","computeHeaderLayout","xPad","headerIconSize","menuBounds","iconBounds","iconOverlayBounds","textBounds","indicatorIconBounds","textWidth","mirrorPoint","drawHeaderInner","headerLayout","markerTheme","fillStyle","shouldDrawMenu","fadeStart","fadeEnd","fadeStartPercent","fadeEndPercent","triangleX","triangleY","iconX","iconY","drawBlanks","getRowTheme","selectedRows","blankTheme","overdrawStickyBoundaries","drawFreezeBorder","hColor","vColor","vStroke","hStroke","getMinMaxXY","minX","maxX","minY","maxY","drawExtraRowThemes","freezeY","extraRowsStartY","rowThemeBgCell","colThemeBgCell","drawGridLines","spans","verticalOnly","groups","groupBy","blitLastFrame","blitSource","blitSourceScroll","targetScroll","last","dpr","doubleBuffer","stickyWidth","blitWidth","blitHeight","blitResizedCol","resizedIndex","_drawY","computeCanBlit","resized","curCol","lastCol","curRest","lastWidth","lastRest","drawHighlightRings","allHighlightRegions","freezeLeft","freezeBottom","drawRects","topLeftBounds","bottomRightBounds","drawCb","dashed","wasDashed","needsClip","drawColumnResizeOutline","yOffset","drawFillHandle","selectedCell","fillHandle","currentItem","fillHandleTarget","targetCol","targetRow","targetColSpan","isStickyRow","stickRowHeight","fillHandleRow","drawHandleCb","isBeforeTarget","isAfterTarget","isFillHandleCol","clipHeaderDamage","_group","_colDrawY","finalWidth","getLastRow","__drawX","_clipX","_rh","drawGrid","lastArg","canvasCtx","headerCanvasCtx","resizeCol","lastBlitData","maxScaleFactor","renderStrategy","bufferACtx","bufferBCtx","resizeIndicator","canBlit","overlayCanvas","overlayHeight","bufferA","bufferB","mainCtx","overlayCtx","targetCtx","targetBuffer","mustDrawFocusOnHeader","mustDrawHighlightRingsOnHeader","drawHeaderTexture","viewRegionWidth","damageInView","doDamage","selectionCurrent","regions","highlightRedraw","focusRedraw","lastRowDrawn","scrollX","scrollY","hoverTime","easeOutCubic","AnimationManager","leavingItem","hasLeavingItems","currentHoveredIsAnimating","timestamp","animating","Lazy","lazy","browserIsFirefox","browserIsSafari","browserIsOSX","useAnimationQueue","draw","queue","seq","drawRef","loop","requeue","headerKind","groupHeaderKind","outOfBoundsKind","OutOfBoundsRegionAxis","mouseEventArgsAreEqual","fillHandleClickSize","getRowData","DataGrid","forwardedRef","accessibilityHeight","cellXOffsetReal","onHeaderMenuClick","onHeaderIndicatorClick","isFilling","onCanvasFocused","onCanvasBlur","onContextMenu","fixedShadowX","fixedShadowY","drawFocusRing","onMouseDown","onMouseUp","onMouseMoveRaw","onMouseMove","onItemHovered","firstColAccessible","onKeyUp","canvasRef","onDragStart","onDragEnd","eventTargetRef","isDragging","isDraggable","allowResize","onCellFocused","onDragOverCell","onDrop","onDragLeave","imageWindowLoader","smoothScrollX","smoothScrollY","experimental","windowEventTargetRef","windowEventTarget","damageRegion","scrolling","setScrolling","hoveredItemInfo","setHoveredItemInfo","hoveredOnEdge","setHoveredOnEdge","overlayRef","drawCursorOverride","setDrawCursorOverride","lastWasTouch","setLastWasTouch","lastWasTouchRef","lastArgsRef","lastDrawRef","scrollingStopRef","enableFirefoxRescaling","enableSafariRescaling","stickyX","getBoundsForItem","scale","getMouseArgsForPosition","ev","edgeDetectionBuffer","button","buttons","shiftKey","ctrlKey","metaKey","isTouch","scrollEdge","horizontal","vertical","innerHorizontal","innerVertical","isEdge","isMaybeScrollbar","bounds","previousCol","isFillHandle","fillHandleLocation","fillHandleCellBounds","handleLogicalCenterX","handleLogicalCenterY","hoveredItem","enqueueRef","hoverInfoRef","maxDPR","didOverride","cursor","damageInternal","locations","overFill","setOverFill","headerHovered","groupHeaderHovered","clickableInnerCellHovered","editableBoolHovered","cursorOverride","lastSetCursor","groupHeaderActionForEvent","localEventX","localEventY","groupDesc","boxes","isOverHeaderElement","clientX","clientY","headerBounds","downTime","downPosition","mouseDown","onMouseDownImpl","eventTarget","lastUpTime","onMouseUpImpl","lastUpTimeValue","isOutside","canCancel","onClickImpl","onContextMenuImpl","onAnimationFrame","animManagerValue","animationManager","am","cellNeedsHover","hoveredRef","onMouseMoveImpl","isIndirect","maybeSetHoveredInfo","newVal","needPosition","cv","needsDamageCell","needsHoverPosition","newInfo","notRowMarkerCol","onKeyDownImpl","onKeyUpImpl","refImpl","docRoot","onDragStartImpl","dragMime","dragData","setData","mime","payload","dragImage","dragImageX","dragImageY","setDragImage","prevented","boundsForDragTarget","activeDropTarget","onDragOverImpl","rawCol","activeCol","activeRow","onDragEndImpl","onDropImpl","onDragLeaveImpl","selectionRef","focusRef","focusElement","React.useImperativeHandle","lastFocusedSubdomNode","accessibilityTree","colOffset","fCol","fRow","visibleCols","visibleRows","makeRange","focused","cellContent","opacityX","absoluteOffsetY","opacityY","stickyShadow","styleX","styleY","React.Fragment","overlayStyle","DataGrid$1","React.memo","offsetColumnSize","min","DataGridDnd","resizeColStartX","setResizeColStartX","setResizeCol","dragCol","setDragCol","dropCol","setDropCol","dragColActive","setDragColActive","dragStartX","setDragStartX","dragRow","setDragRow","dropRow","setDropRow","dragRowActive","setDragRowActive","dragStartY","setDragStartY","onColumnMoved","onColumnResize","onColumnResizeStart","onColumnResizeEnd","gridRef","onRowMoved","lockColumns","onColumnProposeMove","canResize","selectedColumns","onItemHoveredImpl","canDragCol","onHeaderMenuClickMangled","screenPosition","onHeaderIndicatorClickMangled","lastResizeWidthRef","clearAll","newSize","ns","dragOffset","newWidth","getMangledCellContent","forceStrict","useResizeDetector","initialSize","useRef","setSize","useState","useLayoutEffect","resizeCallback","entries","entry","resizeObserver","useKineticScroll","isEnabled","targetScroller","rafId","isTouching","lastScrollPosition","sameCount","callbackRef","scrollEl","useEffect","handleScroll","currentScrollPosition","startTouch","endTouch","_exp","ScrollRegionStyle","useTouchUpDelayed","delay","hasTouches","setHasTouches","safeWindow","cbTimer","InfiniteScroller","clientHeight","scrollHeight","scrollWidth","update","draggable","preventDiagonalScrolling","paddingBottom","paddingRight","rightElement","rightElementProps","kineticScrollPerfHack","scrollRef","padders","rightElementSticky","rightElementFill","offsetY","lastScrollY","scroller","rightWrapRef","isIdle","setIsIdle","idleTimer","lx","ly","onScroll","scrollLeft","scrollTop","lastScrollTop","lastScrollLeft","dx","lock","cWidth","cHeight","newY","scrollableHeight","prog","recomputed","onScrollRef","lastProps","didFirstScroll","setRefs","GridScroller","nonGrowWidth","clientSize","onVisibleRegionChanged","overscrollX","overscrollY","lastX","lastY","lastSize","processArgs","cellRight","stickyColWidth","cellBottom","cy","oldRect","onScrollUpdate","SearchWrapper","upArrow","downArrow","closeX","targetSearchTimeMS","DataGridSearch","searchInputRef","searchValue","searchResultsIn","onSearchValueChange","onSearchResultsChanged","showSearch","onSearchClose","searchID","searchStringInner","setSearchStringInner","searchString","setSearchString","searchStatus","setSearchStatus","searchStatusRef","abortControllerRef","searchHandle","searchResultsInner","setSearchResultsInner","searchResults","cancelSearch","cellYOffsetRef","beginSearch","searchStride","rowsSearched","runningResult","tick","tStart","rowsLeft","added","testString","tEnd","selectedIndex","tElapsed","rounded","scalar","onClose","onSearchChange","onNext","onPrev","onSearchKeyDown","isAnimatingOut","setIsAnimatingOut","timeoutId","searchbox","resultString","cancelEvent","progressStyle","ScrollingDataGrid","ClickOutsideContainer","React.PureComponent","React.createRef","onClickOutside","isOutsideClick","RenameInput","GroupRename","canvasBounds","onFinish","setValue","checkKey","isHotkey","hotkey","details","isHotkeyInner","parts","part","wantCtrl","wantShift","wantAlt","wantMeta","accel","useSelectionBehavior","gridSelection","setGridSelection","rangeBehavior","columnBehavior","rowBehavior","rangeSelect","rangeSelectionColumnSpanning","setCurrent","expand","append","trigger","rangeMixable","allowColumnCoSelect","allowRowCoSelect","setSelectedRows","newRows","allowMixed","rangeMixed","columnMixed","setSelectedColumns","newCols","rowMixed","useCellsForSelection","getCellsForSelectionIn","rowMarkerOffset","getCellsForSelectionDirectWhenValid","getCellsForSelectionDirect","getCellsForSelectionMangled","newRect","convertCellToBuffer","createBufferFromGridCells","columnIndexes","mappedIndex","escapeIfNeeded","withComma","createTextBuffer","copyBuffer","lines","formatHtmlTextContent","formatHtmlAttributeContent","attrText","restoreHtmlEntities","createHtmlBuffer","formatStr","ind","getCopyBufferContents","textPlain","textHtml","decodeHTML","fragment","tableEl","walkEl","clone","para","isAppleNumbers","brs","attributeValue","formatValue","rawValues","textContent","expandSelection","spanRangeBehavior","origVal","isFilled","leftCells","rightCells","rCells","descape","unquote","State","char","copyToClipboard","copyWithWriteText","copyWithWrite","copyWithClipboardData","toggleBoolean","toCss","_exp2","Wrapper","DataEditorContainer","inWidth","inHeight","maxPxPerMs","msToFullSpeed","useAutoscroll","scrollDirection","speedScalar","xDir","yDir","cancelled","lastTime","scrollFn","curTime","step","motion","useRemAdjuster","rowHeightIn","headerHeightIn","groupHeaderHeightIn","themeIn","overscrollXIn","overscrollYIn","scaleToRem","remSize","scaler","bt","keybindingDefaults","realizeKeybind","keybind","defaultVal","realizeKeybinds","keybinds","isOSX","useKeybindingsWithDefaults","keybindingsIn","withBackCompatApplied","expandRowGroups","processGroup","depth","expandedGroup","flattenRowGroups","rowGrouping","flattened","nextHeaderIndex","skipChildren","rowsInGroup","nextSubHeaderIndex","expandedGroups","contentIndex","skip","mapRowIndexToPath","flattenedRowGroups","toGo","useRowGroupingInner","getRowThemeOverrideIn","acc","rowIndex","isGroupHeader","rowNumberMapperOut","groupIndex","useRowGrouping","getRowGroupingForPath","updateRowGroupingByPath","itemOrRow","useCallbackRef","initialValue","useInitialScrollOffset","scrollOffsetX","scrollOffsetY","visibleRegionRef","onDidScroll","visibleRegionY","visibleRegionTy","visibleRegionInput","visibleRegion","setVisibleRegion","onDidScrollRef","vScrollReady","hScrollReady","DataGridOverlayEditor","React.lazy","__vitePreload","idCounter","getSpanStops","flatten","shiftSelection","emptyGridSelection","DataEditorImpl","gridSelectionInner","setGridSelectionInner","setOverlay","mouseState","setMouseState","lastSent","imageEditorOverride","markdownDivCreateNode","columnsIn","rowsIn","onCellClicked","onCellActivated","onFillPattern","onFinishedEditing","coercePasteValue","drawHeaderIn","drawCellIn","editorBloom","onHeaderClicked","onGroupHeaderClicked","onCellContextMenu","onHeaderContextMenu","onGroupHeaderContextMenu","onGroupHeaderRenamed","onCellEdited","onCellsEdited","onSearchResultsChangedIn","onKeyDownIn","onKeyUpIn","editOnType","onRowAppended","validateCellIn","highlightRegionsIn","columnSelect","rowSelect","rangeSelectionBlending","columnSelectionBlending","rowSelectionBlending","onDeleteIn","onPaste","copyHeaders","cellActivationBehavior","rowSelectionMode","onSearchCloseIn","onSelectionCleared","showSearchIn","gridSelectionOuter","onGridSelectionChange","minColumnWidthIn","maxColumnWidthIn","maxColumnAutoWidthIn","provideEditor","trailingRowOptions","allowedFillDirections","onColumnResizeIn","onColumnResizeEndIn","onColumnResizeStartIn","additionalRenderers","trapFocus","renderers","scrollToActiveCell","drawFocusRingIn","rowMarkersObj","rowMarkers","rowMarkerWidthRaw","rowMarkerStartIndex","rowMarkerTheme","headerRowMarkerTheme","headerRowMarkerAlwaysVisible","headerRowMarkerDisabled","rowMarkerCheckboxStyle","maxColumnAutoWidth","docStyle","rowNumberMapper","rowHeightPostGrouping","keybindings","rowMarkerWidth","hasRowMarkers","showTrailingBlankRow","lastRowSticky","showSearchInner","setShowSearchInner","getCellsForSeletionDirect","validateCell","newValue","prevValue","expectedExternalGridSelection","wg","onDelete","mergedTheme","setClientSize","rendererMap","numSelectedRows","rowMarkerChecked","mangledCols","hasJustScrolled","focus","immediate","mangledRows","mangledOnCellsEdited","mangledItems","fillHighlightRegion","setFillHighlightRegion","highlightRange","highlightFocus","highlightFocusCol","highlightFocusRow","maxWidth","mangledColsRef","isTrailing","mappedRow","maybeFirstColumnHint","hint","icon","outerCol","vr","isOutsideMainArea","_e","_f","isInFreezeArea","_g","mangledGetGroupDetails","setRenameGroup","setOverlaySimple","reselect","fromKeyboard","focusOnRowFromTrailingBlankRow","scrollTo","paddingX","paddingY","grid","trueCol","trueRow","desiredX","desiredY","targetRect","scrollBounds","frozenWidth","trailingRowHeight","freezeTrailingRowsEffective","sLeft","sRight","sTop","sBottom","minx","miny","focusCallback","getCellContentRef","appendRow","openOverlay","appendResult","backoff","doFocus","scrollToRef","getCustomNewRowTargetColumn","customTargetColumn","maybeIndex","lastSelectedRowRef","lastSelectedColRef","themeForCell","pos","mapper","rowGroupingNavBehavior","handleSelect","isMultiKey","isMultiRow","isMultiCol","lastMouseSelectLocation","markerCell","postClick","lastHighlighted","newSlice","isLastStickyRow","startedFromLastSticky","isActivelyDraggingHeader","touchDownArgs","mouseDownData","isPrevented","fh","renameGroup","handleGroupHeaderSelection","needle","normalSizeColumn","inputCol","newCol","scrollDir","setScrollDir","fillPattern","previousSelection","currentSelection","patternRange","currentRange","canceled","editItemList","patternCell","fillRight","firstColSelection","fillDown","firstRowSelection","mouse","newRange","lastMouseDownCol","lastMouseDownRow","preventDefault","handleMaybeClick","isValidClick","shouldActivate","selectedCol","selectedRow","prevCol","prevRow","clickLocation","touchVr","onHeaderMenuClickInner","onHeaderIndicatorClickInner","currentCell","onVisibleRegionChangedImpl","rightElWidth","freezeRegion","freezeRegions","newRegion","onColumnMovedImpl","isActivelyDragging","rowGroupingSelectionBehavior","getSelectionRowLimits","groupRows","groupRowIndex","lowerBounds","upperBounds","prevRange","clampLimits","adjustSelectionOnScroll","visible","adjustSelection","old","minRow","maxRowRaw","maxRow","disallowed","scrollToActiveCellRef","updateSelectedCell","fromEditingTrailingRow","freeMove","rowMax","curRow","newStack","onFinishEditing","movement","movX","movY","isEditingTrailingRow","overlayID","deleteRange","editList","cellValue","toDelete","editor","overlayOpen","handleFixedKeybindings","callbackResult","cancelOnlyOnMove","skipUp","skipDown","didMoveUp","moved","didMatch","adjustedCol","onPasteInternal","pasteToCell","rawValue","formatted","stringifiedRawValue","coerced","clipboardContent","decoded","cellData","dataRow","dataItem","writeCol","writeRow","onCopy","ignoreFocus","copyToClipboardWithHeaders","headers","settled","results","cols","toCopy","onCut","effectiveSelection","onDeleteResult","navIndex","outCol","outRow","selectionOutOfBounds","mangledVerticalBorder","renameGroupNode","mangledFreezeColumns","damageList","selCol","selRow","setIsFocused","setIsFocusedDebounced","onFocusOut","idealWidth","idealHeight","scrollbarWidth","rowsCountWithTrailingRow","avg","toAverage","cssStyle","React.Suspense","DataEditor","defaultCellMaxSize","isOverEditableRegion","pointerX","pointerY","cellCenterY","checkBoxClicked","booleanCellRenderer","drawBoolean","toPaste","canEdit","hoverEffectIntensity","shouldRestoreAlpha","BubblesOverlayEditorStyle","BubblesOverlayEditor","bubbles","bubbleCellRenderer","drawBubbles","itemMargin","bubbleHeight","bubblePad","bubbleMargin","renderX","renderBoxes","rectInfo","DrilldownOverlayEditorStyle","DrilldownOverlayEditor","drilldowns","drilldownCellRenderer","drawDrilldownCell","drilldownCache","getAndCacheDrilldownBorder","border","rounding","shadowBlur","targetHeight","middleWidth","innerHeight","sideWidth","targetWidth","innerWidth","tileMap","imgWidth","renderWidth","padding","outerSideWidth","outerPadding","rx","rw","outerMiddleWidth","imgSize","srcX","srcY","srcWidth","srcHeight","imageCellRenderer","drawImage","_ctx","ImageEditor","newImage","uris","imgHeight","getRandomNumber","seed","loadingCellRenderer","hpad","rectHeight","MarkdownOverlayEditorStyle","MarkdownOverlayEditor","forceEditMode","readonly","editMode","setEditMode","addLeftPad","markdownCellRenderer","firstLine","markerCellRenderer","prepMarkerRowCell","drawMarkerRowCell","centerX","newFont","deprepMarkerRowCell","markerKind","drawHandle","checkedboxAlpha","offsetAmount","newRowCellRenderer","drawNewRowCell","alwaysShowIcon","textX","finalLineSize","lineSize","xTranslate","padPlus","drawEditHoverIndicator","effectTheme","displayData","effectRect","getHoverEffectRect","cellRect","fullSize","padX","padY","maxH","NumberOverlayEditor","numberCellRenderer","hoverEffect","hoverEffectTheme","isHighlighted","newNumber","protectedCellRenderer","drawProtectedCell","xStart","center","q","rowIDCellRenderer","textCellRenderer","textCell","maxLineWidth","UriOverlayEditorStyle","UriOverlayEditor","uri","preview","getTextRect","isOverLinkText","txt","textRect","uriCellRenderer","uriCell","isLinky","middleCenterBias","underlineOffset","AllCellRenderers","throttle","throttle_1","imgPool","ImageWindowLoaderImpl","keep","imageLoaded","loaded","loadPromise","toWrite","DataEditorAllImpl","allSprites","DataEditorAll","module","moment","toLocaleStringWorks","toLocaleStringRoundingWorks","intlNumberFormatWorks","intlNumberFormatRoundingWorks","types","stringIncludes","search","repeatZero","qty","stringRound","digits","digitsArray","carry","cachedNumberFormat","locale","optionsString","map","formatNumber","userLocale","useToLocaleString","useGrouping","grouping","maximumSignificantDigits","minimumIntegerDigits","fractionDigits","groupingSeparator","decimalSeparator","localeStringOptions","roundingOptions","extend","numberString","integerString","fractionString","exponentString","integerLength","fractionLength","digitCount","exponent","formattedString","durationLabelCompare","durationGetLabels","localeData","each","localeDataKey","labelType","labelKey","durationPluralKey","integerValue","decimalValue","engLocale","isArray","findLast","find","pluck","compact","unique","intersection","initial","reversed","any","child","toLocaleStringSupportsLocales","featureTestFormatterRounding","formatter","featureTestFormatter","passed","durationsFormat","settings","durations","formattedDurations","dur","outputTypes","largest","durationFormat","asMilliseconds","asMonths","isNegative","remainder","remainderMonths","momentTokens","tokenDefs","typeMap","template","returnMomentTypes","stopTrim","useLeftUnits","usePlural","precision","forceLength","trunc","useSignificantDigits","significantDigits","significantDigitsCache","minValue","isMinValue","maxValue","isMaxValue","trim","trimIncludes","rLarge","rSmall","rBoth","rMid","rAll","rFinal","trimLarge","trimSmall","trimMid","trimFinal","rawTokens","currentToken","momentTypes","momentType","isSmallest","isLargest","wholeValue","truncMethod","truncate","places","factor","foundFirst","bubbled","formatOptions","findType","bubbleTypes","bubble","bubbleMomentType","targetMomentType","outputType","pluralKey","autoLocalized","pluralizedLabels","defaultFormatTemplate","firstType","lastType","init","context","toLocaleStringFormatter","intlNumberFormatFormatter","BOOLEAN_TRUE_VALUES","BOOLEAN_FALSE_VALUES","getErrorCell","errorMsg","errorDetails","kind","Text","allowOverlay","isError","isErrorCell","hasTooltip","tooltip","isMissingValueCell","isMissingValue","getEmptyCell","missingCell","Loading","getTextCell","faded","toGlideColumn","hasMenu","themeOverride","isStretched","grow","isIndex","mergeColumnParameters","defaultParams","userParams","isNullOrUndefined","merge","toSafeArray","startsWith","endsWith","JSON","parse","parsedData","stringify","Number","Array","toSafeString","toString","toSafeBoolean","cleanedValue","toLowerCase","toSafeNumber","NaN","unformattedValue","numbro","unformat","notNullOrUndefined","Int32Array","format","maxPrecision","isNaN","isFinite","Math","round","repeat","Intl","NumberFormat","undefined","minimumFractionDigits","maximumFractionDigits","notation","duration","humanize","formatPeriodType","BigInt","sprintf","formatMoment","momentDate","DateTimeFormat","dateStyle","timeStyle","toDate","fromNow","calendar","toSafeDate","Date","getTime","parsedTimestamp","timestampInSeconds","parsedMomentDate","unix","utc","isValid","parsedMomentTime","HTML5_FMT","TIME_MS","TIME_SECONDS","TIME","countDecimals","numberStr","indexOf","toLocaleString","truncateDecimals","decimals","LINE_BREAK_REGEX","RegExp","removeLineBreaks","replace","getLinkDisplayValueFromRegex","displayTextRegex","patternMatch","decodeURIComponent","LINE_CHART_TYPE","AREA_CHART_TYPE","BAR_CHART_TYPE","BaseChartColumn","chart_type","parameters","y_min","y_max","columnTypeOptions","cellTemplate","Custom","copyData","contentAlignment","displayValues","graphKind","yAxis","sortMode","isEditable","getCell","chartData","convertedChartData","normalizedChartData","MIN_SAFE_INTEGER","MAX_SAFE_INTEGER","convertedValue","push","join","getCellValue","LineChartColumn","isEditableType","BarChartColumn","AreaChartColumn","CheckboxColumn","Boolean","applyTimezone","timezone","utcOffset","tz","BaseDateTimeColumn","defaultFormat","defaultStep","inputType","toISOString","defaultTimezoneOffset","minDate","min_value","maxDate","max_value","isPinned","date","displayDate","validateInput","isRequired","validate","validationResult","timezoneOffset","error","DateTimeColumn","arrowType","meta","hasTimezone","TimeColumn","DateColumn","ImageColumn","Image","imageUrls","LinkColumn","validateRegex","display_text","Uri","cellHref","max_chars","test","onClickUri","displayText","open","ListColumn","Bubble","isIntegerType","arrowTypeName","NumberColumn","getTypeName","allowNegative","fixedDecimals","thousandSeparator","corrected","isInteger","isSafeInteger","ObjectColumn","ProgressColumn","measureLabel","String","normalizeCellValue","SelectboxColumn","dataType","uniqueTypes","allowedValues","filter","TextColumn","StyledImage","maxHeight","objectFit","ImageCellEditor","imageData","rel","ColumnTypes","Map","Object","selectbox","datetime","line_chart","bar_chart","area_chart","CustomCells","extractCssProperty","htmlElementId","property","exec","applyPandasStylerCss","cssId","cssStyles","fontColor","textDark","backgroundColor","getColumnTypeFromArrow","typeName","getIndexFromArrow","indexPosition","indexNames","isHidden","getColumnFromArrow","columnPosition","columnHeaderNames","numpy_type","pandas_type","getCategoricalOptions","getEmptyIndexColumn","indexNumber","getAllColumnsFromArrow","numIndices","headerColumns","numColumns","dataColumns","getCellFromArrow","arrowCell","formatArrowCell","contentType","field","parsedDate","convertToSeconds","decimalStr","displayContent","INDEX_IDENTIFIER","COLUMN_POSITION_PREFIX","COLUMN_WIDTH_MAPPING","small","medium","large","parseWidthConfig","applyColumnConfig","columnProps","columnConfigMapping","columnConfig","get","hidden","pinned","required","type_config","default","help","getColumnConfig","configJson","logError","getColumnType","customType","ColumnType","useColumnLoader","useMemo","stretchColumns","useContainerWidth","configuredColumns","updatedColumn","editingMode","ArrowProto","EditingMode","READ_ONLY","DYNAMIC","orderedColumns","unpinnedColumns","forEach","columnOrder","columnName","getColumnName","EditingState","constructor","numRows","editedCells","addedRows","deletedRows","toJson","columnsByIndex","currentState","edited_rows","added_rows","deleted_rows","_map","editedRow","addedRow","isIncomplete","_k","fromJson","editingStateJson","editingState","columnsByName","colName","isAddedRow","rowCache","setCell","addRow","rowCells","deleteRows","sort","deleteRow","splice","delete","getOriginalRowIndex","originalIndex","getNumRows","useCustomTheme","gridTheme","editable","glideTheme","accentColor","colors","primary","accentFg","white","accentLight","transparentize","borderColor","borderColorLight","horizontalBorderColor","fontFamily","genericFonts","bodyFont","bgSearchResult","resizeIndicatorColor","bgIconHeader","fadedText60","fgIconHeader","bgHeader","bgMix","bgHeaderHasFocus","secondaryBg","bgHeaderHovered","textHeader","textHeaderSelected","textGroupHeader","headerFontStyle","fontSizes","sm","baseFontStyle","editorFontSize","bodyText","textMedium","textLight","fadedText40","textBubble","bgCellMedium","cellHorizontalPadding","convertRemToPx","spacing","cellVerticalPadding","bgBubble","bgBubbleSelected","linkColor","linkText","drilldownBorder","darkenedBgMix25","tableBorderRadius","radii","tableBorderWidth","defaultTableHeight","defaultRowHeight","defaultHeaderHeight","useDataLoader","numHeaderRows","useCallback","originalCol","originalRow","editedCell","useTableSizer","usesGroupRow","isFullScreen","minHeight","numTrailingRows","totalDataRows","initialHeight","minWidth","availableWidth","initialWidth","resizableSize","setResizableSize","useDataEditor","fixedNumRows","getOriginalIndex","refreshCells","updateNumRows","syncEditState","clearSelection","updatedCell","currentValue","newCell","logWarning","lastUpdated","performance","appendEmptyRow","newRow","rowsToDelete","toArray","updatedCells","selectedArea","rowData","pasteDataValue","columnSizes","setColumnSizes","_newSize","_colIndex","newSizeWithGrow","cellToSortData","tryParse","compareSmart","compareRaw","useColumnSort","getCellContentIn","sortCol","sortMap","vals","updateSortingHeader","setSort","getCellContentSorted","useGlideColumnSort","updatedColumns","sortColumn","sortDirection","clickedColumn","mode","DEBOUNCE_TIME_MS","REQUIRED_CELL_TOOLTIP","useTooltips","setTooltip","timeoutRef","clearTimeout","colIdx","rowIdx","tooltipContent","setTimeout","clearTooltip","hideAxis","zeroY","margin","barWidth","barY","xStep","xControl","yControl","closest","_v","_objectSpread2","defineProperty","_excluded","useStateManager","_ref$defaultInputValu","defaultInputValue","_ref$defaultMenuIsOpe","defaultMenuIsOpen","_ref$defaultValue","propsInputValue","propsMenuIsOpen","propsOnChange","propsOnInputChange","propsOnMenuClose","propsOnMenuOpen","propsValue","restSelectProps","_useState","_useState2","_slicedToArray","stateInputValue","setStateInputValue","_useState3","_useState4","stateMenuIsOpen","setStateMenuIsOpen","_useState5","_useState6","stateValue","setStateValue","actionMeta","onInputChange","onMenuOpen","onMenuClose","inputValue","menuIsOpen","_taggedTemplateLiteral","floor","createCoords","rectToClientRect","hasWindow","getNodeName","isNode","getWindow","_node$ownerDocument","getDocumentElement","isElement","isHTMLElement","isShadowRoot","isOverflowElement","overflow","overflowX","overflowY","display","getComputedStyle","isWebKit","isLastTraversableNode","getParentNode","getNearestOverflowAncestor","parentNode","getOverflowAncestors","traverseIframes","_node$ownerDocument2","scrollableAncestor","isBody","win","frameElement","getFrameElement","getCssDimensions","css","hasOffset","offsetWidth","offsetHeight","shouldFallback","unwrapElement","getScale","domElement","$","noOffsets","getVisualOffsets","shouldAddVisualOffsets","isFixed","floatingOffsetParent","getBoundingClientRect","includeScale","isFixedStrategy","offsetParent","clientRect","visualOffsets","offsetWin","currentWin","currentIFrame","iframeScale","iframeRect","observeMove","onMove","io","cleanup","_io","refresh","threshold","insetTop","insetRight","insetBottom","insetLeft","isFirstUpdate","handleObserve","ratio","autoUpdate","reference","floating","ancestorScroll","ancestorResize","elementResize","layoutShift","animationFrame","referenceEl","ancestors","ancestor","cleanupIo","reobserveFrame","firstEntry","_resizeObserver","frameId","prevRefRect","frameLoop","nextRefRect","_resizeObserver2","_excluded$4","applyPrefixToName","prefix","classNames","classNameList","cleanValue","cleanCommonProps","innerProps","getStyleProps","classNamesState","getStyles","getClassNames","isDocumentElement","normalizedHeight","getScrollTop","getScrollParent","excludeStaticParent","overflowRx","parent","animatedScrollTo","to","change","increment","currentTime","animateScroll","scrollIntoView","menuEl","focusedEl","menuRect","focusedRect","overScroll","getBoundingClientObj","isTouchCapable","isMobileDevice","passiveOptionAccessed","supportsPassiveEvents","notNullish","valueTernary","isMulti","multiValue","singleValue","removeProps","propsObj","_len2","properties","_key2","propsMap","_ref2","newProps","_ref3","_ref4","_excluded$3","_excluded2$1","getMenuPlacement","preferredMaxHeight","preferredPlacement","shouldScroll","isFixedPosition","controlHeight","scrollParent","defaultState","_scrollParent$getBoun","_menuEl$getBoundingCl","menuBottom","menuHeight","menuTop","_menuEl$offsetParent$","containerTop","viewHeight","marginBottom","marginTop","viewSpaceAbove","viewSpaceBelow","scrollSpaceAbove","scrollSpaceBelow","scrollDown","scrollUp","scrollDuration","constrainedHeight","_constrainedHeight","spaceAbove","_constrainedHeight2","alignToControl","placement","placementToCSSProp","coercePlacement","menuCSS","unstyled","_ref2$theme","borderRadius","PortalPlacementContext","MenuPlacer","minMenuHeight","maxMenuHeight","menuPlacement","menuPosition","menuShouldScrollIntoView","useContext","setPortalPlacement","setMaxHeight","setPlacement","Menu","innerRef","jsx","Menu$1","menuListCSS","baseUnit","MenuList","noticeCSS","_ref5","_ref5$theme","noOptionsMessageCSS","loadingMessageCSS","NoOptionsMessage","_ref6","_ref6$children","restProps","LoadingMessage","_ref7","_ref7$children","menuPortalCSS","_ref8","MenuPortal","appendTo","controlElement","menuPortalRef","cleanupRef","portalPlacementContext","_useState7","_useState8","computedPosition","setComputedPosition","updateComputedPosition","scrollDistance","runAutoUpdate","setMenuPortalElement","menuPortalElement","menuWrapper","createPortal","containerCSS","isDisabled","SelectContainer","valueContainerCSS","hasValue","controlShouldRenderValue","ValueContainer","indicatorsContainerCSS","IndicatorsContainer","_templateObject","_excluded$2","_excluded2","Svg","CrossIcon","DownChevron","baseCSS","_ref3$theme","dropdownIndicatorCSS","DropdownIndicator","clearIndicatorCSS","ClearIndicator","indicatorSeparatorCSS","_ref4$theme","IndicatorSeparator","loadingDotAnimations","keyframes","loadingIndicatorCSS","LoadingDot","css$2","LoadingIndicator","_ref7$size","css$1","_ref$theme","Control","Control$1","_excluded$1","groupCSS","Group","Heading","headingProps","selectProps","groupHeadingCSS","GroupHeading","_cleanCommonProps","Group$1","inputCSS","containerStyle","spacingStyle","inputStyle","Input","inputClassName","Input$1","multiValueCSS","multiValueLabelCSS","cropWithEllipsis","multiValueRemoveCSS","MultiValueGeneric","MultiValueContainer","MultiValueLabel","MultiValueRemove","MultiValue","components","Container","Label","Remove","MultiValue$1","optionCSS","Option","Option$1","placeholderCSS","Placeholder","Placeholder$1","SingleValue","SingleValue$1","defaultComponents","safeIsNaN","isEqual","first","second","areInputsEqual","newInputs","lastInputs","memoizeOne","resultFn","memoized","newArgs","_i","lastResult","A11yText","A11yText$1","defaultAriaLiveMessages","isSearchable","tabSelectsValue","isInitialFocus","_props$label","_props$label2","selectValue","isAppleDevice","getArrayIndex","status","resultsMessage","LiveRegion","ariaSelection","focusedOption","focusedValue","focusableOptions","ariaLiveMessages","getOptionLabel","isOptionDisabled","screenReaderStatus","isLoading","ariaLabel","ariaLive","messages","ariaSelected","option","selectedOptions","removedValue","removedValues","asOption","multiSelected","onChangeProps","ariaFocused","focusMsg","onFocusProps","ariaResults","resultsMsg","ariaGuidance","guidanceMsg","ScreenReaderText","Fragment","LiveRegion$1","diacritics","anyDiacritic","diacriticToBase","diacritic","stripDiacritics","memoizedStripDiacriticsForInput","trimString","defaultStringify","createFilter","config","rawInput","_ignoreCase$ignoreAcc","ignoreCase","ignoreAccents","matchFrom","candidate","DummyInput","cancelScroll","useScrollCapture","onBottomArrive","onBottomLeave","onTopArrive","onTopLeave","isBottom","isTop","touchStart","scrollTarget","handleEventDelta","_scrollTarget$current","isDeltaPositive","availableScroll","shouldCancelScroll","onWheel","onTouchStart","onTouchMove","startListening","notPassive","stopListening","STYLE_KEYS","LOCK_STYLES","preventTouchMove","allowTouchMove","preventInertiaScroll","totalScroll","currentScroll","isTouchDevice","canUseDOM","activeScrollLocks","listenerOptions","useScrollLock","_ref$accountForScroll","accountForScrollbars","originalStyles","addScrollLock","touchScrollTarget","targetStyle","currentPadding","adjustedPadding","removeScrollLock","blurSelectInput","_ref2$1","ScrollManager","lockEnabled","_ref$captureEnabled","captureEnabled","setScrollCaptureTarget","setScrollLockTarget","targetRef","RequiredInput","onFocus","RequiredInput$1","testPlatform","re","_window$navigator$use","isIPhone","isMac","isIPad","isIOS","formatGroupLabel","getOptionLabel$1","getOptionValue$1","defaultStyles","menuGutter","defaultTheme","defaultProps","toCategorizedOption","_isOptionDisabled","_isOptionSelected","getOptionValue","buildCategorizedOptions","groupOrOption","groupOrOptionIndex","categorizedOptions","optionIndex","categorizedOption","isFocusable","buildFocusableOptionsFromCategorizedOptions","optionsAccumulator","_toConsumableArray","buildFocusableOptionsWithIds","optionId","buildFocusableOptions","_props$inputValue","shouldHideSelectedOptions","_filterOption","getNextFocusedValue","nextSelectValue","lastSelectValue","lastFocusedIndex","nextFocusedIndex","getNextFocusedOption","lastFocusedOption","getFocusedOptionId","focusableOptionsWithIds","_focusableOptionsWith","focusedOptionId","hideSelectedOptions","instanceId","Select","_this$props2","closeMenuOnSelect","_this$props3","blurInputOnSelect","deselected","newValueArray","lastSelectedValue","custom","_this$props$className","_this$props$className2","openMenuOnClick","_this$props4","touches","touch","moveThreshold","prevInputValue","focusedOptionIndex","_this$props5","backspaceRemovesValue","escapeClearsValue","isClearable","openMenuOnFocus","_this$state","_this$props6","focusOption","_this$state2","openAtIndex","_this$state3","focusedIndex","lastIndex","nextFocus","pageSize","clearValue","getValue","selectOption","_this$props7","_inputValue","_selectValue","_this$props8","inputId","tabIndex","form","_this$getComponents","_this$state4","inputIsHidden","commonProps","ariaAttributes","_this$getComponents2","_this$props9","_this$state5","isOptionFocused","_this$getComponents3","_this$props10","_this$getComponents4","_this$props11","_this$getComponents5","_this$getComponents6","_this$getComponents7","_this$props12","captureMenuScroll","loadingMessage","menuPortalTarget","menuShouldBlockScroll","noOptionsMessage","onMenuScrollToTop","onMenuScrollToBottom","onHover","onSelect","menuUI","_data","groupId","headingId","_message","menuPlacementProps","menuElement","_ref4$placerProps","scrollTargetRef","_this$props13","delimiter","_value","_this$state6","_this$getComponents8","_this$props14","clearFocusValueOnUpdate","inputIsHiddenAfterUpdate","prevWasFocused","instancePrefix","newMenuOptionsState","newInputIsHiddenState","newAriaSelection","hasKeptFocus","Component","StateManagedSelect","forwardRef","baseSelectProps","StateManagedSelect$1","CustomMenu","Wrap","PortalWrap","ReadOnlyWrap","Editor","valueIn","setInputValue","TextCellEntry","foundOption","RANGE_HEIGHT","wrapperStyle","yMid","rangeSize","fillRatio","labelWidth","rangeWidth","gradient","strValue","strMin","strMax","strStep","num","StyledInputBox","formatValueForHTMLInput","dateKind","isoDate","timezoneOffsetMs","parseDateTimestamp","NULL_VALUE_TOKEN","drawRequiredIndicator","save","beginPath","moveTo","lineTo","restore","drawMissingPlaceholder","headerFontFull","baseFontFull","markerFontFull","markerFontStyle","useCustomRenderer","colPos","customRenderers","SparklineCell","DropdownCell","RangeCell","DatePickerCell","CSV_DELIMITER","CSV_QUOTE_CHAR","CSV_ESCAPE_CHAR","CSV_ROW_DELIMITER","CSV_UTF8_BOM","CSV_SPECIAL_CHARS_REGEX","toCsvRow","rowValues","escapeValue","writeCsv","textEncoder","TextEncoder","write","close","useDataExporter","enforceDownloadInNewTab","exportToCsv","suggestedName","writer","showSaveFilePicker","accept","excludeAcceptAllOption","createWritable","Error","csvContent","inMemoryWriter","WritableStream","chunk","TextDecoder","decode","getWriter","blob","Blob","URL","createObjectURL","createDownloadLinkElement","filename","appendChild","click","removeChild","revokeObjectURL","useSelectionHandler","isEmptyTable","syncSelectionState","isRowSelectionActivated","selectionMode","SelectionMode","MULTI_ROW","SINGLE_ROW","isMultiRowSelectionActivated","isColumnSelectionActivated","SINGLE_COLUMN","MULTI_COLUMN","isMultiColumnSelectionActivated","isRowSelected","isColumnSelected","isCellSelected","processSelectionChange","newSelection","rowSelectionChanged","columnSelectionChanged","cellSelectionChanged","syncSelection","updatedSelection","cleanedColumns","idx","remove","keepRows","keepColumns","emptySelection","Tooltip","setOpen","fontWeights","closeTooltip","Popover","StyledTooltipContentWrapper","data-testid","StreamlitMarkdown","fontSize","allowHTML","PLACEMENT","accessibilityType","ACCESSIBILITY_TYPE","showArrow","popoverMargin","onEsc","overrides","Body","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","paddingTop","paddingLeft","Inner","hasLightBackgroundColor","fontWeight","normal","isOpen","StyledResizableContainer","hasCustomizedScrollbars","LARGE_TABLE_ROWS_THRESHOLD","WEBKIT_SCROLLBAR_SIZE","DataFrame","widgetMgr","disableFullscreenMode","fragmentId","expanded","collapse","useRequiredContext","ElementFullscreenContext","resizableRef","dataEditorRef","resizableContainerRef","libConfig","LibContext","setShowSearch","hasVerticalScroll","setHasVerticalScroll","hasHorizontalScroll","setHasHorizontalScroll","window","matchMedia","matches","navigator","userAgent","dataDimensions","originalNumRows","dataRows","isLargeTable","setNumRows","resetEditingState","originalColumns","initialWidgetValue","getStringValue","formId","getOriginalCellContent","selectionState","columnIdx","newWidgetState","currentWidgetState","setStringValue","fromUi","updateCells","columnNames","rowSelection","columnSelection","add","initialSelection","currentEditingState","transformedColumns","glideColumns","getEmptyStateContent","_col","_row","onFormCleared","useFormClearHelper","isDynamicAndEditable","isPinnedColumnsWidthTooLarge","reduce","scrollAreaBounds","querySelector","boundingClient","stopPropagation","onBlur","currentTarget","contains","relatedTarget","Toolbar","locked","onExpand","onCollapse","ToolbarAction","Close","onClick","_jsx","Delete","FileDownload","Resizable","enable","topRight","bottomRight","bottomLeft","topLeft","snapGap","onResizeStop","_event","_direction","_delta","borderThreshold","GlideDataEditor","downFill","scrollbarWidthOverride","checkboxStyle","tint","withFullScreenWrapper"],"ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,130,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148],"sources":["../../../../node_modules/@emotion-icons/material-outlined/Add/Add.esm.js","../../../../node_modules/@emotion-icons/material-outlined/Search/Search.esm.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/common/support.js","../../../../node_modules/lodash/_baseHas.js","../../../../node_modules/lodash/has.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/internal/data-grid/data-grid-types.js","../../../../node_modules/@linaria/core/dist/index.mjs","../../../../node_modules/@linaria/react/dist/index.mjs","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/internal/data-grid-overlay-editor/private/image-overlay-editor-style.js","../../../../node_modules/react-easy-swipe/lib/react-swipe.js","../../../../node_modules/react-easy-swipe/lib/index.js","../../../../node_modules/react-responsive-carousel/lib/js/cssClasses.js","../../../../node_modules/react-responsive-carousel/lib/js/dimensions.js","../../../../node_modules/react-responsive-carousel/lib/js/CSSTranslate.js","../../../../node_modules/react-responsive-carousel/lib/js/shims/window.js","../../../../node_modules/react-responsive-carousel/lib/js/components/Thumbs.js","../../../../node_modules/react-responsive-carousel/lib/js/shims/document.js","../../../../node_modules/react-responsive-carousel/lib/js/components/Carousel/utils.js","../../../../node_modules/react-responsive-carousel/lib/js/components/Carousel/animations.js","../../../../node_modules/react-responsive-carousel/lib/js/components/Carousel/index.js","../../../../node_modules/react-responsive-carousel/lib/js/index.js","../../../../node_modules/lodash/now.js","../../../../node_modules/lodash/debounce.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/common/utils.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/internal/data-grid-overlay-editor/private/image-overlay-editor.js","../../../../node_modules/marked/lib/marked.esm.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/internal/markdown-div/private/markdown-container.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/internal/markdown-div/markdown-div.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/internal/growing-entry/growing-entry-style.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/internal/growing-entry/growing-entry.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/internal/data-grid/color-parser.js","../../../../node_modules/canvas-hypertxt/dist/js/index.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/internal/data-grid/render/data-grid-lib.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/common/render-state-provider.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/internal/data-grid/cell-set.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/common/styles.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/data-editor/use-column-sizer.js","../../../../node_modules/lodash/_baseClamp.js","../../../../node_modules/lodash/clamp.js","../../../../node_modules/lodash/noop.js","../../../../node_modules/lodash/_createSet.js","../../../../node_modules/lodash/_baseUniq.js","../../../../node_modules/lodash/uniq.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/internal/data-grid/sprites.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/internal/data-grid/data-grid-sprites.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/internal/data-grid/render/data-grid-render.walk.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/common/math.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/internal/data-grid/render/data-grid-render.cells.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/internal/data-grid/render/draw-checkbox.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/internal/data-grid/render/data-grid-render.header.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/internal/data-grid/render/data-grid-render.lines.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/internal/data-grid/render/data-grid-render.blit.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/internal/data-grid/render/data-grid.render.rings.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/internal/data-grid/render/data-grid-render.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/internal/data-grid/animation-manager.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/common/browser-detect.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/internal/data-grid/use-animation-queue.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/internal/data-grid/event-args.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/internal/data-grid/data-grid.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/internal/data-grid-dnd/data-grid-dnd.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/common/resize-detector.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/internal/scrolling-data-grid/use-kinetic-scroll.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/internal/scrolling-data-grid/infinite-scroller.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/internal/scrolling-data-grid/scrolling-data-grid.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/internal/data-grid-search/data-grid-search-style.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/internal/data-grid-search/data-grid-search.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/internal/click-outside-container/click-outside-container.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/data-editor/group-rename.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/common/is-hotkey.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/internal/data-grid/use-selection-behavior.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/data-editor/use-cells-for-selection.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/data-editor/copy-paste.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/data-editor/data-editor-fns.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/internal/data-editor-container/data-grid-container.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/data-editor/use-autoscroll.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/data-editor/use-rem-adjuster.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/data-editor/data-editor-keybindings.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/data-editor/row-grouping.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/data-editor/row-grouping-api.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/data-editor/use-initial-scroll-offset.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/data-editor/data-editor.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/cells/boolean-cell.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/internal/data-grid-overlay-editor/private/bubbles-overlay-editor-style.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/internal/data-grid-overlay-editor/private/bubbles-overlay-editor.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/cells/bubble-cell.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/internal/data-grid-overlay-editor/private/drilldown-overlay-editor.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/cells/drilldown-cell.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/cells/image-cell.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/cells/loading-cell.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/internal/data-grid-overlay-editor/private/markdown-overlay-editor-style.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/internal/data-grid-overlay-editor/private/markdown-overlay-editor.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/cells/markdown-cell.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/cells/marker-cell.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/cells/new-row-cell.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/internal/data-grid/render/draw-edit-hover-indicator.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/cells/number-cell.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/cells/protected-cell.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/cells/row-id-cell.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/cells/text-cell.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/internal/data-grid-overlay-editor/private/uri-overlay-editor-style.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/internal/data-grid-overlay-editor/private/uri-overlay-editor.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/cells/uri-cell.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/cells/index.js","../../../../node_modules/lodash/throttle.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/common/image-window-loader.js","../../../../node_modules/@glideapps/glide-data-grid/dist/esm/data-editor-all.js","../../../../node_modules/moment-duration-format/lib/moment-duration-format.js","../../../../lib/src/components/widgets/DataFrame/columns/utils.ts","../../../../lib/src/components/widgets/DataFrame/columns/ChartColumn.ts","../../../../lib/src/components/widgets/DataFrame/columns/CheckboxColumn.ts","../../../../lib/src/components/widgets/DataFrame/columns/DateTimeColumn.ts","../../../../lib/src/components/widgets/DataFrame/columns/ImageColumn.ts","../../../../lib/src/components/widgets/DataFrame/columns/LinkColumn.ts","../../../../lib/src/components/widgets/DataFrame/columns/ListColumn.ts","../../../../lib/src/components/widgets/DataFrame/isIntegerType.ts","../../../../lib/src/components/widgets/DataFrame/columns/NumberColumn.ts","../../../../lib/src/components/widgets/DataFrame/columns/ObjectColumn.ts","../../../../lib/src/components/widgets/DataFrame/columns/ProgressColumn.ts","../../../../lib/src/components/widgets/DataFrame/columns/SelectboxColumn.ts","../../../../lib/src/components/widgets/DataFrame/columns/TextColumn.ts","../../../../lib/src/components/widgets/DataFrame/columns/cells/ImageCellEditor.tsx","../../../../lib/src/components/widgets/DataFrame/columns/index.ts","../../../../lib/src/components/widgets/DataFrame/arrowUtils.ts","../../../../lib/src/components/widgets/DataFrame/hooks/useColumnLoader.ts","../../../../lib/src/components/widgets/DataFrame/EditingState.ts","../../../../lib/src/components/widgets/DataFrame/hooks/useCustomTheme.ts","../../../../lib/src/components/widgets/DataFrame/hooks/useDataLoader.ts","../../../../lib/src/components/widgets/DataFrame/hooks/useTableSizer.ts","../../../../lib/src/components/widgets/DataFrame/hooks/useDataEditor.ts","../../../../lib/src/components/widgets/DataFrame/hooks/useColumnSizer.ts","../../../../node_modules/@glideapps/glide-data-grid-source/dist/esm/use-column-sort.js","../../../../lib/src/components/widgets/DataFrame/hooks/useColumnSort.ts","../../../../lib/src/components/widgets/DataFrame/hooks/useTooltips.ts","../../../../node_modules/@glideapps/glide-data-grid-cells/dist/esm/cells/sparkline-cell.js","../../../../node_modules/@glideapps/glide-data-grid-cells/dist/esm/draw-fns.js","../../../../node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../../../../node_modules/react-select/dist/useStateManager-7e1e8489.esm.js","../../../../node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js","../../../../node_modules/@floating-ui/utils/dist/floating-ui.utils.mjs","../../../../node_modules/@floating-ui/utils/dist/floating-ui.utils.dom.mjs","../../../../node_modules/@floating-ui/dom/dist/floating-ui.dom.mjs","../../../../node_modules/use-isomorphic-layout-effect/dist/use-isomorphic-layout-effect.browser.esm.js","../../../../node_modules/react-select/dist/index-a301f526.esm.js","../../../../node_modules/react-select/node_modules/memoize-one/dist/memoize-one.esm.js","../../../../node_modules/react-select/dist/Select-c7902d94.esm.js","../../../../node_modules/react-select/dist/react-select.esm.js","../../../../node_modules/@glideapps/glide-data-grid-cells/dist/esm/cells/dropdown-cell.js","../../../../node_modules/@glideapps/glide-data-grid-cells/dist/esm/cells/range-cell.js","../../../../node_modules/@glideapps/glide-data-grid-cells/dist/esm/cells/date-picker-cell.js","../../../../lib/src/components/widgets/DataFrame/hooks/useCustomRenderer.ts","../../../../lib/src/components/widgets/DataFrame/hooks/useDataExporter.ts","../../../../lib/src/components/widgets/DataFrame/hooks/useSelectionHandler.ts","../../../../lib/src/components/widgets/DataFrame/Tooltip.tsx","../../../../lib/src/components/widgets/DataFrame/styled-components.ts","../../../../lib/src/components/widgets/DataFrame/DataFrame.tsx"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/extends\";\nimport * as React from 'react';\nimport { EmotionIconBase } from '@emotion-icons/emotion-icon';\nexport var Add = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var attrs = {\n    \"fill\": \"currentColor\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\"\n  };\n  return /*#__PURE__*/React.createElement(EmotionIconBase, _extends({\n    iconAttrs: attrs,\n    iconVerticalAlign: \"middle\",\n    iconViewBox: \"0 0 24 24\"\n  }, props, {\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"none\",\n    d: \"M0 0h24v24H0V0z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"\n  }));\n});\nAdd.displayName = 'Add';\nexport var AddDimensions = {\n  height: 24,\n  width: 24\n};","import _extends from \"@babel/runtime/helpers/extends\";\nimport * as React from 'react';\nimport { EmotionIconBase } from '@emotion-icons/emotion-icon';\nexport var Search = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var attrs = {\n    \"fill\": \"currentColor\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\"\n  };\n  return /*#__PURE__*/React.createElement(EmotionIconBase, _extends({\n    iconAttrs: attrs,\n    iconVerticalAlign: \"middle\",\n    iconViewBox: \"0 0 24 24\"\n  }, props, {\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"none\",\n    d: \"M0 0h24v24H0V0z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"\n  }));\n});\nSearch.displayName = 'Search';\nexport var SearchDimensions = {\n  height: 24,\n  width: 24\n};","export function proveType(_val) {\n    // do nothing, just prove the compiler thinks the types match\n}\nfunction panic(message = \"This should not happen\") {\n    throw new Error(message);\n}\nexport function assert(fact, message = \"Assertion failed\") {\n    if (fact)\n        return;\n    return panic(message);\n}\nexport function assertNever(_never, msg) {\n    return panic(msg ?? \"Hell froze over\");\n}\nexport function maybe(fn, defaultValue) {\n    try {\n        return fn();\n    }\n    catch {\n        return defaultValue;\n    }\n}\n// The following code is licensed under the MIT license to Luke Edwards\n// Original license and code can be found here: https://github.com/lukeed/dequal/blob/master/license\n// I have merely \"ported\" it to be TS (any any any) and directly included it for convenience.\nconst has = Object.prototype.hasOwnProperty;\n// eslint-disable-next-line sonarjs/cognitive-complexity\nexport function deepEqual(foo, bar) {\n    let ctor, len;\n    if (foo === bar)\n        return true;\n    // eslint-disable-next-line @typescript-eslint/strict-boolean-expressions\n    if (foo && bar && (ctor = foo.constructor) === bar.constructor) {\n        if (ctor === Date)\n            return foo.getTime() === bar.getTime();\n        if (ctor === RegExp)\n            return foo.toString() === bar.toString();\n        if (ctor === Array) {\n            if ((len = foo.length) === bar.length) {\n                while (len-- && deepEqual(foo[len], bar[len]))\n                    ;\n            }\n            return len === -1;\n        }\n        // eslint-disable-next-line @typescript-eslint/strict-boolean-expressions\n        if (!ctor || typeof foo === \"object\") {\n            len = 0;\n            // eslint-disable-next-line guard-for-in\n            for (ctor in foo) {\n                if (has.call(foo, ctor) && ++len && !has.call(bar, ctor))\n                    return false;\n                if (!(ctor in bar) || !deepEqual(foo[ctor], bar[ctor]))\n                    return false;\n            }\n            return Object.keys(bar).length === len;\n        }\n    }\n    return foo !== foo && bar !== bar;\n}\n//# sourceMappingURL=support.js.map","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.has` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHas(object, key) {\n  return object != null && hasOwnProperty.call(object, key);\n}\n\nmodule.exports = baseHas;\n","var baseHas = require('./_baseHas'),\n    hasPath = require('./_hasPath');\n\n/**\n * Checks if `path` is a direct property of `object`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = { 'a': { 'b': 2 } };\n * var other = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.has(object, 'a');\n * // => true\n *\n * _.has(object, 'a.b');\n * // => true\n *\n * _.has(object, ['a', 'b']);\n * // => true\n *\n * _.has(other, 'a');\n * // => false\n */\nfunction has(object, path) {\n  return object != null && hasPath(object, path, baseHas);\n}\n\nmodule.exports = has;\n","import { assertNever, proveType } from \"../../common/support.js\";\nimport has from \"lodash/has.js\";\n/** @category Types */\nexport const BooleanEmpty = null;\n/** @category Types */\nexport const BooleanIndeterminate = undefined;\n/** @category Cells */\nexport var GridCellKind;\n(function (GridCellKind) {\n    GridCellKind[\"Uri\"] = \"uri\";\n    GridCellKind[\"Text\"] = \"text\";\n    GridCellKind[\"Image\"] = \"image\";\n    GridCellKind[\"RowID\"] = \"row-id\";\n    GridCellKind[\"Number\"] = \"number\";\n    GridCellKind[\"Bubble\"] = \"bubble\";\n    GridCellKind[\"Boolean\"] = \"boolean\";\n    GridCellKind[\"Loading\"] = \"loading\";\n    GridCellKind[\"Markdown\"] = \"markdown\";\n    GridCellKind[\"Drilldown\"] = \"drilldown\";\n    GridCellKind[\"Protected\"] = \"protected\";\n    GridCellKind[\"Custom\"] = \"custom\";\n})(GridCellKind || (GridCellKind = {}));\n/** @category Columns */\nexport var GridColumnIcon;\n(function (GridColumnIcon) {\n    GridColumnIcon[\"HeaderRowID\"] = \"headerRowID\";\n    GridColumnIcon[\"HeaderCode\"] = \"headerCode\";\n    GridColumnIcon[\"HeaderNumber\"] = \"headerNumber\";\n    GridColumnIcon[\"HeaderString\"] = \"headerString\";\n    GridColumnIcon[\"HeaderBoolean\"] = \"headerBoolean\";\n    GridColumnIcon[\"HeaderAudioUri\"] = \"headerAudioUri\";\n    GridColumnIcon[\"HeaderVideoUri\"] = \"headerVideoUri\";\n    GridColumnIcon[\"HeaderEmoji\"] = \"headerEmoji\";\n    GridColumnIcon[\"HeaderImage\"] = \"headerImage\";\n    GridColumnIcon[\"HeaderUri\"] = \"headerUri\";\n    GridColumnIcon[\"HeaderPhone\"] = \"headerPhone\";\n    GridColumnIcon[\"HeaderMarkdown\"] = \"headerMarkdown\";\n    GridColumnIcon[\"HeaderDate\"] = \"headerDate\";\n    GridColumnIcon[\"HeaderTime\"] = \"headerTime\";\n    GridColumnIcon[\"HeaderEmail\"] = \"headerEmail\";\n    GridColumnIcon[\"HeaderReference\"] = \"headerReference\";\n    GridColumnIcon[\"HeaderIfThenElse\"] = \"headerIfThenElse\";\n    GridColumnIcon[\"HeaderSingleValue\"] = \"headerSingleValue\";\n    GridColumnIcon[\"HeaderLookup\"] = \"headerLookup\";\n    GridColumnIcon[\"HeaderTextTemplate\"] = \"headerTextTemplate\";\n    GridColumnIcon[\"HeaderMath\"] = \"headerMath\";\n    GridColumnIcon[\"HeaderRollup\"] = \"headerRollup\";\n    GridColumnIcon[\"HeaderJoinStrings\"] = \"headerJoinStrings\";\n    GridColumnIcon[\"HeaderSplitString\"] = \"headerSplitString\";\n    GridColumnIcon[\"HeaderGeoDistance\"] = \"headerGeoDistance\";\n    GridColumnIcon[\"HeaderArray\"] = \"headerArray\";\n    GridColumnIcon[\"RowOwnerOverlay\"] = \"rowOwnerOverlay\";\n    GridColumnIcon[\"ProtectedColumnOverlay\"] = \"protectedColumnOverlay\";\n})(GridColumnIcon || (GridColumnIcon = {}));\n/** @category Columns */\nexport var GridColumnMenuIcon;\n(function (GridColumnMenuIcon) {\n    GridColumnMenuIcon[\"Triangle\"] = \"triangle\";\n    GridColumnMenuIcon[\"Dots\"] = \"dots\";\n})(GridColumnMenuIcon || (GridColumnMenuIcon = {}));\n/** @category Columns */\nexport function isSizedGridColumn(c) {\n    return \"width\" in c && typeof c.width === \"number\";\n}\n/** @category Types */\nexport async function resolveCellsThunk(thunk) {\n    if (typeof thunk === \"object\")\n        return thunk;\n    return await thunk();\n}\n// All EditableGridCells are inherently ValidatedGridCells, and this is more specific and thus more useful.\n/** @category Cells */\nexport function isEditableGridCell(cell) {\n    if (cell.kind === GridCellKind.Loading ||\n        cell.kind === GridCellKind.Bubble ||\n        cell.kind === GridCellKind.RowID ||\n        cell.kind === GridCellKind.Protected ||\n        cell.kind === GridCellKind.Drilldown) {\n        return false;\n    }\n    proveType(cell);\n    return true;\n}\n/** @category Cells */\nexport function isTextEditableGridCell(cell) {\n    if (cell.kind === GridCellKind.Loading ||\n        cell.kind === GridCellKind.Bubble ||\n        cell.kind === GridCellKind.RowID ||\n        cell.kind === GridCellKind.Protected ||\n        cell.kind === GridCellKind.Drilldown ||\n        cell.kind === GridCellKind.Boolean ||\n        cell.kind === GridCellKind.Image ||\n        cell.kind === GridCellKind.Custom) {\n        return false;\n    }\n    proveType(cell);\n    return true;\n}\n/** @category Cells */\nexport function isInnerOnlyCell(cell) {\n    return cell.kind === InnerGridCellKind.Marker || cell.kind === InnerGridCellKind.NewRow;\n}\n/** @category Cells */\nexport function isReadWriteCell(cell) {\n    if (!isEditableGridCell(cell) || cell.kind === GridCellKind.Image)\n        return false;\n    if (cell.kind === GridCellKind.Text ||\n        cell.kind === GridCellKind.Number ||\n        cell.kind === GridCellKind.Markdown ||\n        cell.kind === GridCellKind.Uri ||\n        cell.kind === GridCellKind.Custom ||\n        cell.kind === GridCellKind.Boolean) {\n        return cell.readonly !== true;\n    }\n    assertNever(cell, \"A cell was passed with an invalid kind\");\n}\nexport function isRectangleEqual(a, b) {\n    if (a === b)\n        return true;\n    if (a === undefined || b === undefined)\n        return false;\n    return a.x === b.x && a.y === b.y && a.width === b.width && a.height === b.height;\n}\n/** @category Renderers */\nexport function isObjectEditorCallbackResult(obj) {\n    return has(obj, \"editor\");\n}\n// Can be written more concisely, not easier to read if more concise.\n/** @category Cells */\nexport function booleanCellIsEditable(cell) {\n    return !(cell.readonly ?? false);\n}\n/** @category Cells */\nexport var InnerGridCellKind;\n(function (InnerGridCellKind) {\n    InnerGridCellKind[\"NewRow\"] = \"new-row\";\n    InnerGridCellKind[\"Marker\"] = \"marker\";\n})(InnerGridCellKind || (InnerGridCellKind = {}));\nfunction mergeRanges(input) {\n    if (input.length === 0) {\n        return [];\n    }\n    const ranges = [...input];\n    const stack = [];\n    ranges.sort(function (a, b) {\n        return a[0] - b[0];\n    });\n    stack.push([...ranges[0]]);\n    for (const range of ranges.slice(1)) {\n        const top = stack[stack.length - 1];\n        if (top[1] < range[0]) {\n            stack.push([...range]);\n        }\n        else if (top[1] < range[1]) {\n            top[1] = range[1];\n        }\n    }\n    return stack;\n}\nlet emptyCompactSelection;\n/** @category Selection */\nexport class CompactSelection {\n    items;\n    constructor(items) {\n        this.items = items;\n    }\n    static empty = () => {\n        return emptyCompactSelection ?? (emptyCompactSelection = new CompactSelection([]));\n    };\n    static fromSingleSelection = (selection) => {\n        return CompactSelection.empty().add(selection);\n    };\n    offset(amount) {\n        if (amount === 0)\n            return this;\n        const newItems = this.items.map(x => [x[0] + amount, x[1] + amount]);\n        return new CompactSelection(newItems);\n    }\n    add(selection) {\n        const slice = typeof selection === \"number\" ? [selection, selection + 1] : selection;\n        const newItems = mergeRanges([...this.items, slice]);\n        return new CompactSelection(newItems);\n    }\n    remove(selection) {\n        const items = [...this.items];\n        const selMin = typeof selection === \"number\" ? selection : selection[0];\n        const selMax = typeof selection === \"number\" ? selection + 1 : selection[1];\n        for (const [i, slice] of items.entries()) {\n            const [start, end] = slice;\n            // Remove part of slice that intersects removed selection.\n            if (start <= selMax && selMin <= end) {\n                const toAdd = [];\n                if (start < selMin) {\n                    toAdd.push([start, selMin]);\n                }\n                if (selMax < end) {\n                    toAdd.push([selMax, end]);\n                }\n                items.splice(i, 1, ...toAdd);\n            }\n        }\n        return new CompactSelection(items);\n    }\n    first() {\n        if (this.items.length === 0)\n            return undefined;\n        return this.items[0][0];\n    }\n    last() {\n        if (this.items.length === 0)\n            return undefined;\n        return this.items.slice(-1)[0][1] - 1;\n    }\n    hasIndex(index) {\n        for (let i = 0; i < this.items.length; i++) {\n            const [start, end] = this.items[i];\n            if (index >= start && index < end)\n                return true;\n        }\n        return false;\n    }\n    hasAll(index) {\n        for (let x = index[0]; x < index[1]; x++) {\n            if (!this.hasIndex(x))\n                return false;\n        }\n        return true;\n    }\n    some(predicate) {\n        for (const i of this) {\n            if (predicate(i))\n                return true;\n        }\n        return false;\n    }\n    equals(other) {\n        if (other === this)\n            return true;\n        if (other.items.length !== this.items.length)\n            return false;\n        for (let i = 0; i < this.items.length; i++) {\n            const left = other.items[i];\n            const right = this.items[i];\n            if (left[0] !== right[0] || left[1] !== right[1])\n                return false;\n        }\n        return true;\n    }\n    // Really old JS wont have access to the iterator and babel will stop people using it\n    // when trying to support browsers so old we don't support them anyway. What goes on\n    // between an engineer and their bundler in the privacy of their CI server is none of\n    // my business anyway.\n    toArray() {\n        const result = [];\n        for (const [start, end] of this.items) {\n            for (let x = start; x < end; x++) {\n                result.push(x);\n            }\n        }\n        return result;\n    }\n    get length() {\n        let len = 0;\n        for (const [start, end] of this.items) {\n            len += end - start;\n        }\n        return len;\n    }\n    *[Symbol.iterator]() {\n        for (const [start, end] of this.items) {\n            for (let x = start; x < end; x++) {\n                yield x;\n            }\n        }\n    }\n}\n//# sourceMappingURL=data-grid-types.js.map","// src/css.ts\nvar idx = 0;\nvar css = () => {\n  if (process.env.NODE_ENV === \"test\") {\n    return `mocked-css-${idx++}`;\n  }\n  throw new Error(\n    'Using the \"css\" tag in runtime is not supported. Make sure you have set up the Babel plugin correctly.'\n  );\n};\nvar css_default = css;\n\n// src/cx.ts\nvar cx = function cx2() {\n  const presentClassNames = Array.prototype.slice.call(arguments).filter(Boolean);\n  const atomicClasses = {};\n  const nonAtomicClasses = [];\n  presentClassNames.forEach((arg) => {\n    const individualClassNames = arg ? arg.split(\" \") : [];\n    individualClassNames.forEach((className) => {\n      if (className.startsWith(\"atm_\")) {\n        const [, keyHash] = className.split(\"_\");\n        atomicClasses[keyHash] = className;\n      } else {\n        nonAtomicClasses.push(className);\n      }\n    });\n  });\n  const result = [];\n  for (const keyHash in atomicClasses) {\n    if (Object.prototype.hasOwnProperty.call(atomicClasses, keyHash)) {\n      result.push(atomicClasses[keyHash]);\n    }\n  }\n  result.push(...nonAtomicClasses);\n  return result.join(\" \");\n};\nvar cx_default = cx;\nexport {\n  css_default as css,\n  cx_default as cx\n};\n//# sourceMappingURL=index.mjs.map","// src/styled.ts\nimport validAttr from \"@emotion/is-prop-valid\";\nimport React from \"react\";\nimport { cx } from \"@linaria/core\";\nvar isCapital = (ch) => ch.toUpperCase() === ch;\nvar filterKey = (keys) => (key) => keys.indexOf(key) === -1;\nvar omit = (obj, keys) => {\n  const res = {};\n  Object.keys(obj).filter(filterKey(keys)).forEach((key) => {\n    res[key] = obj[key];\n  });\n  return res;\n};\nfunction filterProps(asIs, props, omitKeys) {\n  const filteredProps = omit(props, omitKeys);\n  if (!asIs) {\n    const interopValidAttr = typeof validAttr === \"function\" ? { default: validAttr } : validAttr;\n    Object.keys(filteredProps).forEach((key) => {\n      if (!interopValidAttr.default(key)) {\n        delete filteredProps[key];\n      }\n    });\n  }\n  return filteredProps;\n}\nvar warnIfInvalid = (value, componentName) => {\n  if (process.env.NODE_ENV !== \"production\") {\n    if (typeof value === \"string\" || typeof value === \"number\" && isFinite(value)) {\n      return;\n    }\n    const stringified = typeof value === \"object\" ? JSON.stringify(value) : String(value);\n    console.warn(\n      `An interpolation evaluated to '${stringified}' in the component '${componentName}', which is probably a mistake. You should explicitly cast or transform the value to a string.`\n    );\n  }\n};\nvar idx = 0;\nfunction styled(tag) {\n  var _a;\n  let mockedClass = \"\";\n  if (process.env.NODE_ENV === \"test\") {\n    mockedClass += `mocked-styled-${idx++}`;\n    if ((_a = tag == null ? void 0 : tag.__linaria) == null ? void 0 : _a.className) {\n      mockedClass += ` ${tag.__linaria.className}`;\n    }\n  }\n  return (options) => {\n    if (process.env.NODE_ENV !== \"production\" && process.env.NODE_ENV !== \"test\") {\n      if (Array.isArray(options)) {\n        throw new Error(\n          'Using the \"styled\" tag in runtime is not supported. Make sure you have set up the Babel plugin correctly. See https://github.com/callstack/linaria#setup'\n        );\n      }\n    }\n    const render = (props, ref) => {\n      const { as: component = tag, class: className = mockedClass } = props;\n      const shouldKeepProps = options.propsAsIs === void 0 ? !(typeof component === \"string\" && component.indexOf(\"-\") === -1 && !isCapital(component[0])) : options.propsAsIs;\n      const filteredProps = filterProps(shouldKeepProps, props, [\n        \"as\",\n        \"class\"\n      ]);\n      filteredProps.ref = ref;\n      filteredProps.className = options.atomic ? cx(options.class, filteredProps.className || className) : cx(filteredProps.className || className, options.class);\n      const { vars } = options;\n      if (vars) {\n        const style = {};\n        for (const name in vars) {\n          const variable = vars[name];\n          const result = variable[0];\n          const unit = variable[1] || \"\";\n          const value = typeof result === \"function\" ? result(props) : result;\n          warnIfInvalid(value, options.name);\n          style[`--${name}`] = `${value}${unit}`;\n        }\n        const ownStyle = filteredProps.style || {};\n        const keys = Object.keys(ownStyle);\n        if (keys.length > 0) {\n          keys.forEach((key) => {\n            style[key] = ownStyle[key];\n          });\n        }\n        filteredProps.style = style;\n      }\n      if (tag.__linaria && tag !== component) {\n        filteredProps.as = component;\n        return React.createElement(tag, filteredProps);\n      }\n      return React.createElement(component, filteredProps);\n    };\n    const Result = React.forwardRef ? React.forwardRef(render) : (props) => {\n      const rest = omit(props, [\"innerRef\"]);\n      return render(rest, props.innerRef);\n    };\n    Result.displayName = options.name;\n    Result.__linaria = {\n      className: options.class || mockedClass,\n      extends: tag\n    };\n    return Result;\n  };\n}\nvar styled_default = process.env.NODE_ENV !== \"production\" ? new Proxy(styled, {\n  get(o, prop) {\n    return o(prop);\n  }\n}) : styled;\nexport {\n  styled_default as styled\n};\n//# sourceMappingURL=index.mjs.map","import { styled } from \"@linaria/react\";\nexport const ImageOverlayEditorStyle = /*#__PURE__*/styled('div')({\n  name: \"ImageOverlayEditorStyle\",\n  class: \"gdg-i2iowwq\",\n  propsAsIs: false\n});\n\n","(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define(['exports', 'react', 'prop-types'], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(exports, require('react'), require('prop-types'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports, global.react, global.propTypes);\n    global.reactSwipe = mod.exports;\n  }\n})(this, function (exports, _react, _propTypes) {\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.setHasSupportToCaptureOption = setHasSupportToCaptureOption;\n\n  var _react2 = _interopRequireDefault(_react);\n\n  var _propTypes2 = _interopRequireDefault(_propTypes);\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n\n  var _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  function _objectWithoutProperties(obj, keys) {\n    var target = {};\n\n    for (var i in obj) {\n      if (keys.indexOf(i) >= 0) continue;\n      if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n      target[i] = obj[i];\n    }\n\n    return target;\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _possibleConstructorReturn(self, call) {\n    if (!self) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n  }\n\n  var supportsCaptureOption = false;\n  function setHasSupportToCaptureOption(hasSupport) {\n    supportsCaptureOption = hasSupport;\n  }\n\n  try {\n    addEventListener('test', null, Object.defineProperty({}, 'capture', { get: function get() {\n        setHasSupportToCaptureOption(true);\n      } }));\n  } catch (e) {} // eslint-disable-line no-empty\n\n  function getSafeEventHandlerOpts() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : { capture: true };\n\n    return supportsCaptureOption ? options : options.capture;\n  }\n\n  /**\n   * [getPosition returns a position element that works for mouse or touch events]\n   * @param  {[Event]} event [the received event]\n   * @return {[Object]}      [x and y coords]\n   */\n  function getPosition(event) {\n    if ('touches' in event) {\n      var _event$touches$ = event.touches[0],\n          pageX = _event$touches$.pageX,\n          pageY = _event$touches$.pageY;\n\n      return { x: pageX, y: pageY };\n    }\n\n    var screenX = event.screenX,\n        screenY = event.screenY;\n\n    return { x: screenX, y: screenY };\n  }\n\n  var ReactSwipe = function (_Component) {\n    _inherits(ReactSwipe, _Component);\n\n    function ReactSwipe() {\n      var _ref;\n\n      _classCallCheck(this, ReactSwipe);\n\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      var _this = _possibleConstructorReturn(this, (_ref = ReactSwipe.__proto__ || Object.getPrototypeOf(ReactSwipe)).call.apply(_ref, [this].concat(args)));\n\n      _this._handleSwipeStart = _this._handleSwipeStart.bind(_this);\n      _this._handleSwipeMove = _this._handleSwipeMove.bind(_this);\n      _this._handleSwipeEnd = _this._handleSwipeEnd.bind(_this);\n\n      _this._onMouseDown = _this._onMouseDown.bind(_this);\n      _this._onMouseMove = _this._onMouseMove.bind(_this);\n      _this._onMouseUp = _this._onMouseUp.bind(_this);\n\n      _this._setSwiperRef = _this._setSwiperRef.bind(_this);\n      return _this;\n    }\n\n    _createClass(ReactSwipe, [{\n      key: 'componentDidMount',\n      value: function componentDidMount() {\n        if (this.swiper) {\n          this.swiper.addEventListener('touchmove', this._handleSwipeMove, getSafeEventHandlerOpts({\n            capture: true,\n            passive: false\n          }));\n        }\n      }\n    }, {\n      key: 'componentWillUnmount',\n      value: function componentWillUnmount() {\n        if (this.swiper) {\n          this.swiper.removeEventListener('touchmove', this._handleSwipeMove, getSafeEventHandlerOpts({\n            capture: true,\n            passive: false\n          }));\n        }\n      }\n    }, {\n      key: '_onMouseDown',\n      value: function _onMouseDown(event) {\n        if (!this.props.allowMouseEvents) {\n          return;\n        }\n\n        this.mouseDown = true;\n\n        document.addEventListener('mouseup', this._onMouseUp);\n        document.addEventListener('mousemove', this._onMouseMove);\n\n        this._handleSwipeStart(event);\n      }\n    }, {\n      key: '_onMouseMove',\n      value: function _onMouseMove(event) {\n        if (!this.mouseDown) {\n          return;\n        }\n\n        this._handleSwipeMove(event);\n      }\n    }, {\n      key: '_onMouseUp',\n      value: function _onMouseUp(event) {\n        this.mouseDown = false;\n\n        document.removeEventListener('mouseup', this._onMouseUp);\n        document.removeEventListener('mousemove', this._onMouseMove);\n\n        this._handleSwipeEnd(event);\n      }\n    }, {\n      key: '_handleSwipeStart',\n      value: function _handleSwipeStart(event) {\n        var _getPosition = getPosition(event),\n            x = _getPosition.x,\n            y = _getPosition.y;\n\n        this.moveStart = { x: x, y: y };\n        this.props.onSwipeStart(event);\n      }\n    }, {\n      key: '_handleSwipeMove',\n      value: function _handleSwipeMove(event) {\n        if (!this.moveStart) {\n          return;\n        }\n\n        var _getPosition2 = getPosition(event),\n            x = _getPosition2.x,\n            y = _getPosition2.y;\n\n        var deltaX = x - this.moveStart.x;\n        var deltaY = y - this.moveStart.y;\n        this.moving = true;\n\n        // handling the responsability of cancelling the scroll to\n        // the component handling the event\n        var shouldPreventDefault = this.props.onSwipeMove({\n          x: deltaX,\n          y: deltaY\n        }, event);\n\n        if (shouldPreventDefault && event.cancelable) {\n          event.preventDefault();\n        }\n\n        this.movePosition = { deltaX: deltaX, deltaY: deltaY };\n      }\n    }, {\n      key: '_handleSwipeEnd',\n      value: function _handleSwipeEnd(event) {\n        this.props.onSwipeEnd(event);\n\n        var tolerance = this.props.tolerance;\n\n\n        if (this.moving && this.movePosition) {\n          if (this.movePosition.deltaX < -tolerance) {\n            this.props.onSwipeLeft(1, event);\n          } else if (this.movePosition.deltaX > tolerance) {\n            this.props.onSwipeRight(1, event);\n          }\n          if (this.movePosition.deltaY < -tolerance) {\n            this.props.onSwipeUp(1, event);\n          } else if (this.movePosition.deltaY > tolerance) {\n            this.props.onSwipeDown(1, event);\n          }\n        }\n\n        this.moveStart = null;\n        this.moving = false;\n        this.movePosition = null;\n      }\n    }, {\n      key: '_setSwiperRef',\n      value: function _setSwiperRef(node) {\n        this.swiper = node;\n        this.props.innerRef(node);\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        var _props = this.props,\n            tagName = _props.tagName,\n            className = _props.className,\n            style = _props.style,\n            children = _props.children,\n            allowMouseEvents = _props.allowMouseEvents,\n            onSwipeUp = _props.onSwipeUp,\n            onSwipeDown = _props.onSwipeDown,\n            onSwipeLeft = _props.onSwipeLeft,\n            onSwipeRight = _props.onSwipeRight,\n            onSwipeStart = _props.onSwipeStart,\n            onSwipeMove = _props.onSwipeMove,\n            onSwipeEnd = _props.onSwipeEnd,\n            innerRef = _props.innerRef,\n            tolerance = _props.tolerance,\n            props = _objectWithoutProperties(_props, ['tagName', 'className', 'style', 'children', 'allowMouseEvents', 'onSwipeUp', 'onSwipeDown', 'onSwipeLeft', 'onSwipeRight', 'onSwipeStart', 'onSwipeMove', 'onSwipeEnd', 'innerRef', 'tolerance']);\n\n        return _react2.default.createElement(\n          this.props.tagName,\n          _extends({\n            ref: this._setSwiperRef,\n            onMouseDown: this._onMouseDown,\n            onTouchStart: this._handleSwipeStart,\n            onTouchEnd: this._handleSwipeEnd,\n            className: className,\n            style: style\n          }, props),\n          children\n        );\n      }\n    }]);\n\n    return ReactSwipe;\n  }(_react.Component);\n\n  ReactSwipe.displayName = 'ReactSwipe';\n  ReactSwipe.propTypes = {\n    tagName: _propTypes2.default.string,\n    className: _propTypes2.default.string,\n    style: _propTypes2.default.object,\n    children: _propTypes2.default.node,\n    allowMouseEvents: _propTypes2.default.bool,\n    onSwipeUp: _propTypes2.default.func,\n    onSwipeDown: _propTypes2.default.func,\n    onSwipeLeft: _propTypes2.default.func,\n    onSwipeRight: _propTypes2.default.func,\n    onSwipeStart: _propTypes2.default.func,\n    onSwipeMove: _propTypes2.default.func,\n    onSwipeEnd: _propTypes2.default.func,\n    innerRef: _propTypes2.default.func,\n    tolerance: _propTypes2.default.number.isRequired\n  };\n  ReactSwipe.defaultProps = {\n    tagName: 'div',\n    allowMouseEvents: false,\n    onSwipeUp: function onSwipeUp() {},\n    onSwipeDown: function onSwipeDown() {},\n    onSwipeLeft: function onSwipeLeft() {},\n    onSwipeRight: function onSwipeRight() {},\n    onSwipeStart: function onSwipeStart() {},\n    onSwipeMove: function onSwipeMove() {},\n    onSwipeEnd: function onSwipeEnd() {},\n    innerRef: function innerRef() {},\n\n    tolerance: 0\n  };\n  exports.default = ReactSwipe;\n});","(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define(['exports', './react-swipe'], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(exports, require('./react-swipe'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports, global.reactSwipe);\n    global.index = mod.exports;\n  }\n})(this, function (exports, _reactSwipe) {\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _reactSwipe2 = _interopRequireDefault(_reactSwipe);\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n\n  exports.default = _reactSwipe2.default;\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar _default = {\n  ROOT: function ROOT(customClassName) {\n    return (0, _classnames.default)(_defineProperty({\n      'carousel-root': true\n    }, customClassName || '', !!customClassName));\n  },\n  CAROUSEL: function CAROUSEL(isSlider) {\n    return (0, _classnames.default)({\n      carousel: true,\n      'carousel-slider': isSlider\n    });\n  },\n  WRAPPER: function WRAPPER(isSlider, axis) {\n    return (0, _classnames.default)({\n      'thumbs-wrapper': !isSlider,\n      'slider-wrapper': isSlider,\n      'axis-horizontal': axis === 'horizontal',\n      'axis-vertical': axis !== 'horizontal'\n    });\n  },\n  SLIDER: function SLIDER(isSlider, isSwiping) {\n    return (0, _classnames.default)({\n      thumbs: !isSlider,\n      slider: isSlider,\n      animated: !isSwiping\n    });\n  },\n  ITEM: function ITEM(isSlider, selected, previous) {\n    return (0, _classnames.default)({\n      thumb: !isSlider,\n      slide: isSlider,\n      selected: selected,\n      previous: previous\n    });\n  },\n  ARROW_PREV: function ARROW_PREV(disabled) {\n    return (0, _classnames.default)({\n      'control-arrow control-prev': true,\n      'control-disabled': disabled\n    });\n  },\n  ARROW_NEXT: function ARROW_NEXT(disabled) {\n    return (0, _classnames.default)({\n      'control-arrow control-next': true,\n      'control-disabled': disabled\n    });\n  },\n  DOT: function DOT(selected) {\n    return (0, _classnames.default)({\n      dot: true,\n      selected: selected\n    });\n  }\n};\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.outerWidth = void 0;\n\nvar outerWidth = function outerWidth(el) {\n  var width = el.offsetWidth;\n  var style = getComputedStyle(el);\n  width += parseInt(style.marginLeft) + parseInt(style.marginRight);\n  return width;\n};\n\nexports.outerWidth = outerWidth;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _default = function _default(position, metric, axis) {\n  var positionPercent = position === 0 ? position : position + metric;\n  var positionCss = axis === 'horizontal' ? [positionPercent, 0, 0] : [0, positionPercent, 0];\n  var transitionProp = 'translate3d';\n  var translatedPosition = '(' + positionCss.join(',') + ')';\n  return transitionProp + translatedPosition;\n};\n\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _default = function _default() {\n  return window;\n};\n\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _cssClasses = _interopRequireDefault(require(\"../cssClasses\"));\n\nvar _dimensions = require(\"../dimensions\");\n\nvar _CSSTranslate = _interopRequireDefault(require(\"../CSSTranslate\"));\n\nvar _reactEasySwipe = _interopRequireDefault(require(\"react-easy-swipe\"));\n\nvar _window = _interopRequireDefault(require(\"../shims/window\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar isKeyboardEvent = function isKeyboardEvent(e) {\n  return e.hasOwnProperty('key');\n};\n\nvar Thumbs = /*#__PURE__*/function (_Component) {\n  _inherits(Thumbs, _Component);\n\n  var _super = _createSuper(Thumbs);\n\n  function Thumbs(_props) {\n    var _this;\n\n    _classCallCheck(this, Thumbs);\n\n    _this = _super.call(this, _props);\n\n    _defineProperty(_assertThisInitialized(_this), \"itemsWrapperRef\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"itemsListRef\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"thumbsRef\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"setItemsWrapperRef\", function (node) {\n      _this.itemsWrapperRef = node;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setItemsListRef\", function (node) {\n      _this.itemsListRef = node;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setThumbsRef\", function (node, index) {\n      if (!_this.thumbsRef) {\n        _this.thumbsRef = [];\n      }\n\n      _this.thumbsRef[index] = node;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"updateSizes\", function () {\n      if (!_this.props.children || !_this.itemsWrapperRef || !_this.thumbsRef) {\n        return;\n      }\n\n      var total = _react.Children.count(_this.props.children);\n\n      var wrapperSize = _this.itemsWrapperRef.clientWidth;\n      var itemSize = _this.props.thumbWidth ? _this.props.thumbWidth : (0, _dimensions.outerWidth)(_this.thumbsRef[0]);\n      var visibleItems = Math.floor(wrapperSize / itemSize);\n      var showArrows = visibleItems < total;\n      var lastPosition = showArrows ? total - visibleItems : 0;\n\n      _this.setState(function (_state, props) {\n        return {\n          itemSize: itemSize,\n          visibleItems: visibleItems,\n          firstItem: showArrows ? _this.getFirstItem(props.selectedItem) : 0,\n          lastPosition: lastPosition,\n          showArrows: showArrows\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleClickItem\", function (index, item, e) {\n      if (!isKeyboardEvent(e) || e.key === 'Enter') {\n        var handler = _this.props.onSelectItem;\n\n        if (typeof handler === 'function') {\n          handler(index, item);\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSwipeStart\", function () {\n      _this.setState({\n        swiping: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSwipeEnd\", function () {\n      _this.setState({\n        swiping: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSwipeMove\", function (delta) {\n      var deltaX = delta.x;\n\n      if (!_this.state.itemSize || !_this.itemsWrapperRef || !_this.state.visibleItems) {\n        return false;\n      }\n\n      var leftBoundary = 0;\n\n      var childrenLength = _react.Children.count(_this.props.children);\n\n      var currentPosition = -(_this.state.firstItem * 100) / _this.state.visibleItems;\n      var lastLeftItem = Math.max(childrenLength - _this.state.visibleItems, 0);\n      var lastLeftBoundary = -lastLeftItem * 100 / _this.state.visibleItems; // prevent user from swiping left out of boundaries\n\n      if (currentPosition === leftBoundary && deltaX > 0) {\n        deltaX = 0;\n      } // prevent user from swiping right out of boundaries\n\n\n      if (currentPosition === lastLeftBoundary && deltaX < 0) {\n        deltaX = 0;\n      }\n\n      var wrapperSize = _this.itemsWrapperRef.clientWidth;\n      var position = currentPosition + 100 / (wrapperSize / deltaX); // if 3d isn't available we will use left to move\n\n      if (_this.itemsListRef) {\n        ['WebkitTransform', 'MozTransform', 'MsTransform', 'OTransform', 'transform', 'msTransform'].forEach(function (prop) {\n          _this.itemsListRef.style[prop] = (0, _CSSTranslate.default)(position, '%', _this.props.axis);\n        });\n      }\n\n      return true;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"slideRight\", function (positions) {\n      _this.moveTo(_this.state.firstItem - (typeof positions === 'number' ? positions : 1));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"slideLeft\", function (positions) {\n      _this.moveTo(_this.state.firstItem + (typeof positions === 'number' ? positions : 1));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"moveTo\", function (position) {\n      // position can't be lower than 0\n      position = position < 0 ? 0 : position; // position can't be higher than last postion\n\n      position = position >= _this.state.lastPosition ? _this.state.lastPosition : position;\n\n      _this.setState({\n        firstItem: position\n      });\n    });\n\n    _this.state = {\n      selectedItem: _props.selectedItem,\n      swiping: false,\n      showArrows: false,\n      firstItem: 0,\n      visibleItems: 0,\n      lastPosition: 0\n    };\n    return _this;\n  }\n\n  _createClass(Thumbs, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.setupThumbs();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (this.props.selectedItem !== this.state.selectedItem) {\n        this.setState({\n          selectedItem: this.props.selectedItem,\n          firstItem: this.getFirstItem(this.props.selectedItem)\n        });\n      }\n\n      if (this.props.children === prevProps.children) {\n        return;\n      } // This will capture any size changes for arrow adjustments etc.\n      // usually in the same render cycle so we don't see any flickers\n\n\n      this.updateSizes();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.destroyThumbs();\n    }\n  }, {\n    key: \"setupThumbs\",\n    value: function setupThumbs() {\n      // as the widths are calculated, we need to resize\n      // the carousel when the window is resized\n      (0, _window.default)().addEventListener('resize', this.updateSizes); // issue #2 - image loading smaller\n\n      (0, _window.default)().addEventListener('DOMContentLoaded', this.updateSizes); // when the component is rendered we need to calculate\n      // the container size to adjust the responsive behaviour\n\n      this.updateSizes();\n    }\n  }, {\n    key: \"destroyThumbs\",\n    value: function destroyThumbs() {\n      // removing listeners\n      (0, _window.default)().removeEventListener('resize', this.updateSizes);\n      (0, _window.default)().removeEventListener('DOMContentLoaded', this.updateSizes);\n    }\n  }, {\n    key: \"getFirstItem\",\n    value: function getFirstItem(selectedItem) {\n      var firstItem = selectedItem;\n\n      if (selectedItem >= this.state.lastPosition) {\n        firstItem = this.state.lastPosition;\n      }\n\n      if (selectedItem < this.state.firstItem + this.state.visibleItems) {\n        firstItem = this.state.firstItem;\n      }\n\n      if (selectedItem < this.state.firstItem) {\n        firstItem = selectedItem;\n      }\n\n      return firstItem;\n    }\n  }, {\n    key: \"renderItems\",\n    value: function renderItems() {\n      var _this2 = this;\n\n      return this.props.children.map(function (img, index) {\n        var itemClass = _cssClasses.default.ITEM(false, index === _this2.state.selectedItem);\n\n        var thumbProps = {\n          key: index,\n          ref: function ref(e) {\n            return _this2.setThumbsRef(e, index);\n          },\n          className: itemClass,\n          onClick: _this2.handleClickItem.bind(_this2, index, _this2.props.children[index]),\n          onKeyDown: _this2.handleClickItem.bind(_this2, index, _this2.props.children[index]),\n          'aria-label': \"\".concat(_this2.props.labels.item, \" \").concat(index + 1),\n          style: {\n            width: _this2.props.thumbWidth\n          }\n        };\n        return /*#__PURE__*/_react.default.createElement(\"li\", _extends({}, thumbProps, {\n          role: \"button\",\n          tabIndex: 0\n        }), img);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      if (!this.props.children) {\n        return null;\n      }\n\n      var isSwipeable = _react.Children.count(this.props.children) > 1; // show left arrow?\n\n      var hasPrev = this.state.showArrows && this.state.firstItem > 0; // show right arrow\n\n      var hasNext = this.state.showArrows && this.state.firstItem < this.state.lastPosition; // obj to hold the transformations and styles\n\n      var itemListStyles = {};\n      var currentPosition = -this.state.firstItem * (this.state.itemSize || 0);\n      var transformProp = (0, _CSSTranslate.default)(currentPosition, 'px', this.props.axis);\n      var transitionTime = this.props.transitionTime + 'ms';\n      itemListStyles = {\n        WebkitTransform: transformProp,\n        MozTransform: transformProp,\n        MsTransform: transformProp,\n        OTransform: transformProp,\n        transform: transformProp,\n        msTransform: transformProp,\n        WebkitTransitionDuration: transitionTime,\n        MozTransitionDuration: transitionTime,\n        MsTransitionDuration: transitionTime,\n        OTransitionDuration: transitionTime,\n        transitionDuration: transitionTime,\n        msTransitionDuration: transitionTime\n      };\n      return /*#__PURE__*/_react.default.createElement(\"div\", {\n        className: _cssClasses.default.CAROUSEL(false)\n      }, /*#__PURE__*/_react.default.createElement(\"div\", {\n        className: _cssClasses.default.WRAPPER(false),\n        ref: this.setItemsWrapperRef\n      }, /*#__PURE__*/_react.default.createElement(\"button\", {\n        type: \"button\",\n        className: _cssClasses.default.ARROW_PREV(!hasPrev),\n        onClick: function onClick() {\n          return _this3.slideRight();\n        },\n        \"aria-label\": this.props.labels.leftArrow\n      }), isSwipeable ? /*#__PURE__*/_react.default.createElement(_reactEasySwipe.default, {\n        tagName: \"ul\",\n        className: _cssClasses.default.SLIDER(false, this.state.swiping),\n        onSwipeLeft: this.slideLeft,\n        onSwipeRight: this.slideRight,\n        onSwipeMove: this.onSwipeMove,\n        onSwipeStart: this.onSwipeStart,\n        onSwipeEnd: this.onSwipeEnd,\n        style: itemListStyles,\n        innerRef: this.setItemsListRef,\n        allowMouseEvents: this.props.emulateTouch\n      }, this.renderItems()) : /*#__PURE__*/_react.default.createElement(\"ul\", {\n        className: _cssClasses.default.SLIDER(false, this.state.swiping),\n        ref: function ref(node) {\n          return _this3.setItemsListRef(node);\n        },\n        style: itemListStyles\n      }, this.renderItems()), /*#__PURE__*/_react.default.createElement(\"button\", {\n        type: \"button\",\n        className: _cssClasses.default.ARROW_NEXT(!hasNext),\n        onClick: function onClick() {\n          return _this3.slideLeft();\n        },\n        \"aria-label\": this.props.labels.rightArrow\n      })));\n    }\n  }]);\n\n  return Thumbs;\n}(_react.Component);\n\nexports.default = Thumbs;\n\n_defineProperty(Thumbs, \"displayName\", 'Thumbs');\n\n_defineProperty(Thumbs, \"defaultProps\", {\n  axis: 'horizontal',\n  labels: {\n    leftArrow: 'previous slide / item',\n    rightArrow: 'next slide / item',\n    item: 'slide item'\n  },\n  selectedItem: 0,\n  thumbWidth: 80,\n  transitionTime: 350\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _default = function _default() {\n  return document;\n};\n\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setPosition = exports.getPosition = exports.isKeyboardEvent = exports.defaultStatusFormatter = exports.noop = void 0;\n\nvar _react = require(\"react\");\n\nvar _CSSTranslate = _interopRequireDefault(require(\"../../CSSTranslate\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar noop = function noop() {};\n\nexports.noop = noop;\n\nvar defaultStatusFormatter = function defaultStatusFormatter(current, total) {\n  return \"\".concat(current, \" of \").concat(total);\n};\n\nexports.defaultStatusFormatter = defaultStatusFormatter;\n\nvar isKeyboardEvent = function isKeyboardEvent(e) {\n  return e ? e.hasOwnProperty('key') : false;\n};\n/**\n * Gets the list 'position' relative to a current index\n * @param index\n */\n\n\nexports.isKeyboardEvent = isKeyboardEvent;\n\nvar getPosition = function getPosition(index, props) {\n  if (props.infiniteLoop) {\n    // index has to be added by 1 because of the first cloned slide\n    ++index;\n  }\n\n  if (index === 0) {\n    return 0;\n  }\n\n  var childrenLength = _react.Children.count(props.children);\n\n  if (props.centerMode && props.axis === 'horizontal') {\n    var currentPosition = -index * props.centerSlidePercentage;\n    var lastPosition = childrenLength - 1;\n\n    if (index && (index !== lastPosition || props.infiniteLoop)) {\n      currentPosition += (100 - props.centerSlidePercentage) / 2;\n    } else if (index === lastPosition) {\n      currentPosition += 100 - props.centerSlidePercentage;\n    }\n\n    return currentPosition;\n  }\n\n  return -index * 100;\n};\n/**\n * Sets the 'position' transform for sliding animations\n * @param position\n * @param forceReflow\n */\n\n\nexports.getPosition = getPosition;\n\nvar setPosition = function setPosition(position, axis) {\n  var style = {};\n  ['WebkitTransform', 'MozTransform', 'MsTransform', 'OTransform', 'transform', 'msTransform'].forEach(function (prop) {\n    // @ts-ignore\n    style[prop] = (0, _CSSTranslate.default)(position, '%', axis);\n  });\n  return style;\n};\n\nexports.setPosition = setPosition;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.fadeAnimationHandler = exports.slideStopSwipingHandler = exports.slideSwipeAnimationHandler = exports.slideAnimationHandler = void 0;\n\nvar _react = require(\"react\");\n\nvar _CSSTranslate = _interopRequireDefault(require(\"../../CSSTranslate\"));\n\nvar _utils = require(\"./utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/**\n * Main animation handler for the default 'sliding' style animation\n * @param props\n * @param state\n */\nvar slideAnimationHandler = function slideAnimationHandler(props, state) {\n  var returnStyles = {};\n  var selectedItem = state.selectedItem;\n  var previousItem = selectedItem;\n  var lastPosition = _react.Children.count(props.children) - 1;\n  var needClonedSlide = props.infiniteLoop && (selectedItem < 0 || selectedItem > lastPosition); // Handle list position if it needs a clone\n\n  if (needClonedSlide) {\n    if (previousItem < 0) {\n      if (props.centerMode && props.centerSlidePercentage && props.axis === 'horizontal') {\n        returnStyles.itemListStyle = (0, _utils.setPosition)(-(lastPosition + 2) * props.centerSlidePercentage - (100 - props.centerSlidePercentage) / 2, props.axis);\n      } else {\n        returnStyles.itemListStyle = (0, _utils.setPosition)(-(lastPosition + 2) * 100, props.axis);\n      }\n    } else if (previousItem > lastPosition) {\n      returnStyles.itemListStyle = (0, _utils.setPosition)(0, props.axis);\n    }\n\n    return returnStyles;\n  }\n\n  var currentPosition = (0, _utils.getPosition)(selectedItem, props); // if 3d is available, let's take advantage of the performance of transform\n\n  var transformProp = (0, _CSSTranslate.default)(currentPosition, '%', props.axis);\n  var transitionTime = props.transitionTime + 'ms';\n  returnStyles.itemListStyle = {\n    WebkitTransform: transformProp,\n    msTransform: transformProp,\n    OTransform: transformProp,\n    transform: transformProp\n  };\n\n  if (!state.swiping) {\n    returnStyles.itemListStyle = _objectSpread(_objectSpread({}, returnStyles.itemListStyle), {}, {\n      WebkitTransitionDuration: transitionTime,\n      MozTransitionDuration: transitionTime,\n      OTransitionDuration: transitionTime,\n      transitionDuration: transitionTime,\n      msTransitionDuration: transitionTime\n    });\n  }\n\n  return returnStyles;\n};\n/**\n * Swiping animation handler for the default 'sliding' style animation\n * @param delta\n * @param props\n * @param state\n * @param setState\n */\n\n\nexports.slideAnimationHandler = slideAnimationHandler;\n\nvar slideSwipeAnimationHandler = function slideSwipeAnimationHandler(delta, props, state, setState) {\n  var returnStyles = {};\n  var isHorizontal = props.axis === 'horizontal';\n\n  var childrenLength = _react.Children.count(props.children);\n\n  var initialBoundry = 0;\n  var currentPosition = (0, _utils.getPosition)(state.selectedItem, props);\n  var finalBoundry = props.infiniteLoop ? (0, _utils.getPosition)(childrenLength - 1, props) - 100 : (0, _utils.getPosition)(childrenLength - 1, props);\n  var axisDelta = isHorizontal ? delta.x : delta.y;\n  var handledDelta = axisDelta; // prevent user from swiping left out of boundaries\n\n  if (currentPosition === initialBoundry && axisDelta > 0) {\n    handledDelta = 0;\n  } // prevent user from swiping right out of boundaries\n\n\n  if (currentPosition === finalBoundry && axisDelta < 0) {\n    handledDelta = 0;\n  }\n\n  var position = currentPosition + 100 / (state.itemSize / handledDelta);\n  var hasMoved = Math.abs(axisDelta) > props.swipeScrollTolerance;\n\n  if (props.infiniteLoop && hasMoved) {\n    // When allowing infinite loop, if we slide left from position 0 we reveal the cloned last slide that appears before it\n    // if we slide even further we need to jump to other side so it can continue - and vice versa for the last slide\n    if (state.selectedItem === 0 && position > -100) {\n      position -= childrenLength * 100;\n    } else if (state.selectedItem === childrenLength - 1 && position < -childrenLength * 100) {\n      position += childrenLength * 100;\n    }\n  }\n\n  if (!props.preventMovementUntilSwipeScrollTolerance || hasMoved || state.swipeMovementStarted) {\n    if (!state.swipeMovementStarted) {\n      setState({\n        swipeMovementStarted: true\n      });\n    }\n\n    returnStyles.itemListStyle = (0, _utils.setPosition)(position, props.axis);\n  } //allows scroll if the swipe was within the tolerance\n\n\n  if (hasMoved && !state.cancelClick) {\n    setState({\n      cancelClick: true\n    });\n  }\n\n  return returnStyles;\n};\n/**\n * Default 'sliding' style animination handler for when a swipe action stops.\n * @param props\n * @param state\n */\n\n\nexports.slideSwipeAnimationHandler = slideSwipeAnimationHandler;\n\nvar slideStopSwipingHandler = function slideStopSwipingHandler(props, state) {\n  var currentPosition = (0, _utils.getPosition)(state.selectedItem, props);\n  var itemListStyle = (0, _utils.setPosition)(currentPosition, props.axis);\n  return {\n    itemListStyle: itemListStyle\n  };\n};\n/**\n * Main animation handler for the default 'fade' style animation\n * @param props\n * @param state\n */\n\n\nexports.slideStopSwipingHandler = slideStopSwipingHandler;\n\nvar fadeAnimationHandler = function fadeAnimationHandler(props, state) {\n  var transitionTime = props.transitionTime + 'ms';\n  var transitionTimingFunction = 'ease-in-out';\n  var slideStyle = {\n    position: 'absolute',\n    display: 'block',\n    zIndex: -2,\n    minHeight: '100%',\n    opacity: 0,\n    top: 0,\n    right: 0,\n    left: 0,\n    bottom: 0,\n    transitionTimingFunction: transitionTimingFunction,\n    msTransitionTimingFunction: transitionTimingFunction,\n    MozTransitionTimingFunction: transitionTimingFunction,\n    WebkitTransitionTimingFunction: transitionTimingFunction,\n    OTransitionTimingFunction: transitionTimingFunction\n  };\n\n  if (!state.swiping) {\n    slideStyle = _objectSpread(_objectSpread({}, slideStyle), {}, {\n      WebkitTransitionDuration: transitionTime,\n      MozTransitionDuration: transitionTime,\n      OTransitionDuration: transitionTime,\n      transitionDuration: transitionTime,\n      msTransitionDuration: transitionTime\n    });\n  }\n\n  return {\n    slideStyle: slideStyle,\n    selectedStyle: _objectSpread(_objectSpread({}, slideStyle), {}, {\n      opacity: 1,\n      position: 'relative'\n    }),\n    prevStyle: _objectSpread({}, slideStyle)\n  };\n};\n\nexports.fadeAnimationHandler = fadeAnimationHandler;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactEasySwipe = _interopRequireDefault(require(\"react-easy-swipe\"));\n\nvar _cssClasses = _interopRequireDefault(require(\"../../cssClasses\"));\n\nvar _Thumbs = _interopRequireDefault(require(\"../Thumbs\"));\n\nvar _document = _interopRequireDefault(require(\"../../shims/document\"));\n\nvar _window = _interopRequireDefault(require(\"../../shims/window\"));\n\nvar _utils = require(\"./utils\");\n\nvar _animations = require(\"./animations\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar Carousel = /*#__PURE__*/function (_React$Component) {\n  _inherits(Carousel, _React$Component);\n\n  var _super = _createSuper(Carousel);\n\n  // @ts-ignore\n  function Carousel(props) {\n    var _this;\n\n    _classCallCheck(this, Carousel);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"thumbsRef\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"carouselWrapperRef\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"listRef\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"itemsRef\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"timer\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"animationHandler\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"setThumbsRef\", function (node) {\n      _this.thumbsRef = node;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setCarouselWrapperRef\", function (node) {\n      _this.carouselWrapperRef = node;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setListRef\", function (node) {\n      _this.listRef = node;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setItemsRef\", function (node, index) {\n      if (!_this.itemsRef) {\n        _this.itemsRef = [];\n      }\n\n      _this.itemsRef[index] = node;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"autoPlay\", function () {\n      if (_react.Children.count(_this.props.children) <= 1) {\n        return;\n      }\n\n      _this.clearAutoPlay();\n\n      if (!_this.props.autoPlay) {\n        return;\n      }\n\n      _this.timer = setTimeout(function () {\n        _this.increment();\n      }, _this.props.interval);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"clearAutoPlay\", function () {\n      if (_this.timer) clearTimeout(_this.timer);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"resetAutoPlay\", function () {\n      _this.clearAutoPlay();\n\n      _this.autoPlay();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"stopOnHover\", function () {\n      _this.setState({\n        isMouseEntered: true\n      }, _this.clearAutoPlay);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"startOnLeave\", function () {\n      _this.setState({\n        isMouseEntered: false\n      }, _this.autoPlay);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"isFocusWithinTheCarousel\", function () {\n      if (!_this.carouselWrapperRef) {\n        return false;\n      }\n\n      if ((0, _document.default)().activeElement === _this.carouselWrapperRef || _this.carouselWrapperRef.contains((0, _document.default)().activeElement)) {\n        return true;\n      }\n\n      return false;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"navigateWithKeyboard\", function (e) {\n      if (!_this.isFocusWithinTheCarousel()) {\n        return;\n      }\n\n      var axis = _this.props.axis;\n      var isHorizontal = axis === 'horizontal';\n      var keyNames = {\n        ArrowUp: 38,\n        ArrowRight: 39,\n        ArrowDown: 40,\n        ArrowLeft: 37\n      };\n      var nextKey = isHorizontal ? keyNames.ArrowRight : keyNames.ArrowDown;\n      var prevKey = isHorizontal ? keyNames.ArrowLeft : keyNames.ArrowUp;\n\n      if (nextKey === e.keyCode) {\n        _this.increment();\n      } else if (prevKey === e.keyCode) {\n        _this.decrement();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"updateSizes\", function () {\n      if (!_this.state.initialized || !_this.itemsRef || _this.itemsRef.length === 0) {\n        return;\n      }\n\n      var isHorizontal = _this.props.axis === 'horizontal';\n      var firstItem = _this.itemsRef[0];\n\n      if (!firstItem) {\n        return;\n      }\n\n      var itemSize = isHorizontal ? firstItem.clientWidth : firstItem.clientHeight;\n\n      _this.setState({\n        itemSize: itemSize\n      });\n\n      if (_this.thumbsRef) {\n        _this.thumbsRef.updateSizes();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setMountState\", function () {\n      _this.setState({\n        hasMount: true\n      });\n\n      _this.updateSizes();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleClickItem\", function (index, item) {\n      if (_react.Children.count(_this.props.children) === 0) {\n        return;\n      }\n\n      if (_this.state.cancelClick) {\n        _this.setState({\n          cancelClick: false\n        });\n\n        return;\n      }\n\n      _this.props.onClickItem(index, item);\n\n      if (index !== _this.state.selectedItem) {\n        _this.setState({\n          selectedItem: index\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleOnChange\", function (index, item) {\n      if (_react.Children.count(_this.props.children) <= 1) {\n        return;\n      }\n\n      _this.props.onChange(index, item);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleClickThumb\", function (index, item) {\n      _this.props.onClickThumb(index, item);\n\n      _this.moveTo(index);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSwipeStart\", function (event) {\n      _this.setState({\n        swiping: true\n      });\n\n      _this.props.onSwipeStart(event);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSwipeEnd\", function (event) {\n      _this.setState({\n        swiping: false,\n        cancelClick: false,\n        swipeMovementStarted: false\n      });\n\n      _this.props.onSwipeEnd(event);\n\n      _this.clearAutoPlay();\n\n      if (_this.state.autoPlay) {\n        _this.autoPlay();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSwipeMove\", function (delta, event) {\n      _this.props.onSwipeMove(event);\n\n      var animationHandlerResponse = _this.props.swipeAnimationHandler(delta, _this.props, _this.state, _this.setState.bind(_assertThisInitialized(_this)));\n\n      _this.setState(_objectSpread({}, animationHandlerResponse)); // If we have not moved, we should have an empty object returned\n      // Return false to allow scrolling when not swiping\n\n\n      return !!Object.keys(animationHandlerResponse).length;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"decrement\", function () {\n      var positions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n\n      _this.moveTo(_this.state.selectedItem - (typeof positions === 'number' ? positions : 1));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"increment\", function () {\n      var positions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n\n      _this.moveTo(_this.state.selectedItem + (typeof positions === 'number' ? positions : 1));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"moveTo\", function (position) {\n      if (typeof position !== 'number') {\n        return;\n      }\n\n      var lastPosition = _react.Children.count(_this.props.children) - 1;\n\n      if (position < 0) {\n        position = _this.props.infiniteLoop ? lastPosition : 0;\n      }\n\n      if (position > lastPosition) {\n        position = _this.props.infiniteLoop ? 0 : lastPosition;\n      }\n\n      _this.selectItem({\n        // if it's not a slider, we don't need to set position here\n        selectedItem: position\n      }); // don't reset auto play when stop on hover is enabled, doing so will trigger a call to auto play more than once\n      // and will result in the interval function not being cleared correctly.\n\n\n      if (_this.state.autoPlay && _this.state.isMouseEntered === false) {\n        _this.resetAutoPlay();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onClickNext\", function () {\n      _this.increment(1);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onClickPrev\", function () {\n      _this.decrement(1);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSwipeForward\", function () {\n      _this.increment(1);\n\n      if (_this.props.emulateTouch) {\n        _this.setState({\n          cancelClick: true\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSwipeBackwards\", function () {\n      _this.decrement(1);\n\n      if (_this.props.emulateTouch) {\n        _this.setState({\n          cancelClick: true\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"changeItem\", function (newIndex) {\n      return function (e) {\n        if (!(0, _utils.isKeyboardEvent)(e) || e.key === 'Enter') {\n          _this.moveTo(newIndex);\n        }\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"selectItem\", function (state) {\n      // Merge in the new state while updating updating previous item\n      _this.setState(_objectSpread({\n        previousItem: _this.state.selectedItem\n      }, state), function () {\n        // Run animation handler and update styles based on it\n        _this.setState(_this.animationHandler(_this.props, _this.state));\n      });\n\n      _this.handleOnChange(state.selectedItem, _react.Children.toArray(_this.props.children)[state.selectedItem]);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getInitialImage\", function () {\n      var selectedItem = _this.props.selectedItem;\n      var item = _this.itemsRef && _this.itemsRef[selectedItem];\n      var images = item && item.getElementsByTagName('img') || [];\n      return images[0];\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getVariableItemHeight\", function (position) {\n      var item = _this.itemsRef && _this.itemsRef[position];\n\n      if (_this.state.hasMount && item && item.children.length) {\n        var slideImages = item.children[0].getElementsByTagName('img') || [];\n\n        if (slideImages.length > 0) {\n          var image = slideImages[0];\n\n          if (!image.complete) {\n            // if the image is still loading, the size won't be available so we trigger a new render after it's done\n            var onImageLoad = function onImageLoad() {\n              _this.forceUpdate();\n\n              image.removeEventListener('load', onImageLoad);\n            };\n\n            image.addEventListener('load', onImageLoad);\n          }\n        } // try to get img first, if img not there find first display tag\n\n\n        var displayItem = slideImages[0] || item.children[0];\n        var height = displayItem.clientHeight;\n        return height > 0 ? height : null;\n      }\n\n      return null;\n    });\n\n    var initState = {\n      initialized: false,\n      previousItem: props.selectedItem,\n      selectedItem: props.selectedItem,\n      hasMount: false,\n      isMouseEntered: false,\n      autoPlay: props.autoPlay,\n      swiping: false,\n      swipeMovementStarted: false,\n      cancelClick: false,\n      itemSize: 1,\n      itemListStyle: {},\n      slideStyle: {},\n      selectedStyle: {},\n      prevStyle: {}\n    };\n    _this.animationHandler = typeof props.animationHandler === 'function' && props.animationHandler || props.animationHandler === 'fade' && _animations.fadeAnimationHandler || _animations.slideAnimationHandler;\n    _this.state = _objectSpread(_objectSpread({}, initState), _this.animationHandler(props, initState));\n    return _this;\n  }\n\n  _createClass(Carousel, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (!this.props.children) {\n        return;\n      }\n\n      this.setupCarousel();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (!prevProps.children && this.props.children && !this.state.initialized) {\n        this.setupCarousel();\n      }\n\n      if (!prevProps.autoFocus && this.props.autoFocus) {\n        this.forceFocus();\n      }\n\n      if (prevState.swiping && !this.state.swiping) {\n        // We stopped swiping, ensure we are heading to the new/current slide and not stuck\n        this.setState(_objectSpread({}, this.props.stopSwipingHandler(this.props, this.state)));\n      }\n\n      if (prevProps.selectedItem !== this.props.selectedItem || prevProps.centerMode !== this.props.centerMode) {\n        this.updateSizes();\n        this.moveTo(this.props.selectedItem);\n      }\n\n      if (prevProps.autoPlay !== this.props.autoPlay) {\n        if (this.props.autoPlay) {\n          this.setupAutoPlay();\n        } else {\n          this.destroyAutoPlay();\n        }\n\n        this.setState({\n          autoPlay: this.props.autoPlay\n        });\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.destroyCarousel();\n    }\n  }, {\n    key: \"setupCarousel\",\n    value: function setupCarousel() {\n      var _this2 = this;\n\n      this.bindEvents();\n\n      if (this.state.autoPlay && _react.Children.count(this.props.children) > 1) {\n        this.setupAutoPlay();\n      }\n\n      if (this.props.autoFocus) {\n        this.forceFocus();\n      }\n\n      this.setState({\n        initialized: true\n      }, function () {\n        var initialImage = _this2.getInitialImage();\n\n        if (initialImage && !initialImage.complete) {\n          // if it's a carousel of images, we set the mount state after the first image is loaded\n          initialImage.addEventListener('load', _this2.setMountState);\n        } else {\n          _this2.setMountState();\n        }\n      });\n    }\n  }, {\n    key: \"destroyCarousel\",\n    value: function destroyCarousel() {\n      if (this.state.initialized) {\n        this.unbindEvents();\n        this.destroyAutoPlay();\n      }\n    }\n  }, {\n    key: \"setupAutoPlay\",\n    value: function setupAutoPlay() {\n      this.autoPlay();\n      var carouselWrapper = this.carouselWrapperRef;\n\n      if (this.props.stopOnHover && carouselWrapper) {\n        carouselWrapper.addEventListener('mouseenter', this.stopOnHover);\n        carouselWrapper.addEventListener('mouseleave', this.startOnLeave);\n      }\n    }\n  }, {\n    key: \"destroyAutoPlay\",\n    value: function destroyAutoPlay() {\n      this.clearAutoPlay();\n      var carouselWrapper = this.carouselWrapperRef;\n\n      if (this.props.stopOnHover && carouselWrapper) {\n        carouselWrapper.removeEventListener('mouseenter', this.stopOnHover);\n        carouselWrapper.removeEventListener('mouseleave', this.startOnLeave);\n      }\n    }\n  }, {\n    key: \"bindEvents\",\n    value: function bindEvents() {\n      // as the widths are calculated, we need to resize\n      // the carousel when the window is resized\n      (0, _window.default)().addEventListener('resize', this.updateSizes); // issue #2 - image loading smaller\n\n      (0, _window.default)().addEventListener('DOMContentLoaded', this.updateSizes);\n\n      if (this.props.useKeyboardArrows) {\n        (0, _document.default)().addEventListener('keydown', this.navigateWithKeyboard);\n      }\n    }\n  }, {\n    key: \"unbindEvents\",\n    value: function unbindEvents() {\n      // removing listeners\n      (0, _window.default)().removeEventListener('resize', this.updateSizes);\n      (0, _window.default)().removeEventListener('DOMContentLoaded', this.updateSizes);\n      var initialImage = this.getInitialImage();\n\n      if (initialImage) {\n        initialImage.removeEventListener('load', this.setMountState);\n      }\n\n      if (this.props.useKeyboardArrows) {\n        (0, _document.default)().removeEventListener('keydown', this.navigateWithKeyboard);\n      }\n    }\n  }, {\n    key: \"forceFocus\",\n    value: function forceFocus() {\n      var _this$carouselWrapper;\n\n      (_this$carouselWrapper = this.carouselWrapperRef) === null || _this$carouselWrapper === void 0 ? void 0 : _this$carouselWrapper.focus();\n    }\n  }, {\n    key: \"renderItems\",\n    value: function renderItems(isClone) {\n      var _this3 = this;\n\n      if (!this.props.children) {\n        return [];\n      }\n\n      return _react.Children.map(this.props.children, function (item, index) {\n        var isSelected = index === _this3.state.selectedItem;\n        var isPrevious = index === _this3.state.previousItem;\n        var style = isSelected && _this3.state.selectedStyle || isPrevious && _this3.state.prevStyle || _this3.state.slideStyle || {};\n\n        if (_this3.props.centerMode && _this3.props.axis === 'horizontal') {\n          style = _objectSpread(_objectSpread({}, style), {}, {\n            minWidth: _this3.props.centerSlidePercentage + '%'\n          });\n        }\n\n        if (_this3.state.swiping && _this3.state.swipeMovementStarted) {\n          style = _objectSpread(_objectSpread({}, style), {}, {\n            pointerEvents: 'none'\n          });\n        }\n\n        var slideProps = {\n          ref: function ref(e) {\n            return _this3.setItemsRef(e, index);\n          },\n          key: 'itemKey' + index + (isClone ? 'clone' : ''),\n          className: _cssClasses.default.ITEM(true, index === _this3.state.selectedItem, index === _this3.state.previousItem),\n          onClick: _this3.handleClickItem.bind(_this3, index, item),\n          style: style\n        };\n        return /*#__PURE__*/_react.default.createElement(\"li\", slideProps, _this3.props.renderItem(item, {\n          isSelected: index === _this3.state.selectedItem,\n          isPrevious: index === _this3.state.previousItem\n        }));\n      });\n    }\n  }, {\n    key: \"renderControls\",\n    value: function renderControls() {\n      var _this4 = this;\n\n      var _this$props = this.props,\n          showIndicators = _this$props.showIndicators,\n          labels = _this$props.labels,\n          renderIndicator = _this$props.renderIndicator,\n          children = _this$props.children;\n\n      if (!showIndicators) {\n        return null;\n      }\n\n      return /*#__PURE__*/_react.default.createElement(\"ul\", {\n        className: \"control-dots\"\n      }, _react.Children.map(children, function (_, index) {\n        return renderIndicator && renderIndicator(_this4.changeItem(index), index === _this4.state.selectedItem, index, labels.item);\n      }));\n    }\n  }, {\n    key: \"renderStatus\",\n    value: function renderStatus() {\n      if (!this.props.showStatus) {\n        return null;\n      }\n\n      return /*#__PURE__*/_react.default.createElement(\"p\", {\n        className: \"carousel-status\"\n      }, this.props.statusFormatter(this.state.selectedItem + 1, _react.Children.count(this.props.children)));\n    }\n  }, {\n    key: \"renderThumbs\",\n    value: function renderThumbs() {\n      if (!this.props.showThumbs || !this.props.children || _react.Children.count(this.props.children) === 0) {\n        return null;\n      }\n\n      return /*#__PURE__*/_react.default.createElement(_Thumbs.default, {\n        ref: this.setThumbsRef,\n        onSelectItem: this.handleClickThumb,\n        selectedItem: this.state.selectedItem,\n        transitionTime: this.props.transitionTime,\n        thumbWidth: this.props.thumbWidth,\n        labels: this.props.labels,\n        emulateTouch: this.props.emulateTouch\n      }, this.props.renderThumbs(this.props.children));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      if (!this.props.children || _react.Children.count(this.props.children) === 0) {\n        return null;\n      }\n\n      var isSwipeable = this.props.swipeable && _react.Children.count(this.props.children) > 1;\n      var isHorizontal = this.props.axis === 'horizontal';\n      var canShowArrows = this.props.showArrows && _react.Children.count(this.props.children) > 1; // show left arrow?\n\n      var hasPrev = canShowArrows && (this.state.selectedItem > 0 || this.props.infiniteLoop) || false; // show right arrow\n\n      var hasNext = canShowArrows && (this.state.selectedItem < _react.Children.count(this.props.children) - 1 || this.props.infiniteLoop) || false;\n      var itemsClone = this.renderItems(true);\n      var firstClone = itemsClone.shift();\n      var lastClone = itemsClone.pop();\n      var swiperProps = {\n        className: _cssClasses.default.SLIDER(true, this.state.swiping),\n        onSwipeMove: this.onSwipeMove,\n        onSwipeStart: this.onSwipeStart,\n        onSwipeEnd: this.onSwipeEnd,\n        style: this.state.itemListStyle,\n        tolerance: this.props.swipeScrollTolerance\n      };\n      var containerStyles = {};\n\n      if (isHorizontal) {\n        swiperProps.onSwipeLeft = this.onSwipeForward;\n        swiperProps.onSwipeRight = this.onSwipeBackwards;\n\n        if (this.props.dynamicHeight) {\n          var itemHeight = this.getVariableItemHeight(this.state.selectedItem); // swiperProps.style.height = itemHeight || 'auto';\n\n          containerStyles.height = itemHeight || 'auto';\n        }\n      } else {\n        swiperProps.onSwipeUp = this.props.verticalSwipe === 'natural' ? this.onSwipeBackwards : this.onSwipeForward;\n        swiperProps.onSwipeDown = this.props.verticalSwipe === 'natural' ? this.onSwipeForward : this.onSwipeBackwards;\n        swiperProps.style = _objectSpread(_objectSpread({}, swiperProps.style), {}, {\n          height: this.state.itemSize\n        });\n        containerStyles.height = this.state.itemSize;\n      }\n\n      return /*#__PURE__*/_react.default.createElement(\"div\", {\n        \"aria-label\": this.props.ariaLabel,\n        className: _cssClasses.default.ROOT(this.props.className),\n        ref: this.setCarouselWrapperRef,\n        tabIndex: this.props.useKeyboardArrows ? 0 : undefined\n      }, /*#__PURE__*/_react.default.createElement(\"div\", {\n        className: _cssClasses.default.CAROUSEL(true),\n        style: {\n          width: this.props.width\n        }\n      }, this.renderControls(), this.props.renderArrowPrev(this.onClickPrev, hasPrev, this.props.labels.leftArrow), /*#__PURE__*/_react.default.createElement(\"div\", {\n        className: _cssClasses.default.WRAPPER(true, this.props.axis),\n        style: containerStyles\n      }, isSwipeable ? /*#__PURE__*/_react.default.createElement(_reactEasySwipe.default, _extends({\n        tagName: \"ul\",\n        innerRef: this.setListRef\n      }, swiperProps, {\n        allowMouseEvents: this.props.emulateTouch\n      }), this.props.infiniteLoop && lastClone, this.renderItems(), this.props.infiniteLoop && firstClone) : /*#__PURE__*/_react.default.createElement(\"ul\", {\n        className: _cssClasses.default.SLIDER(true, this.state.swiping),\n        ref: function ref(node) {\n          return _this5.setListRef(node);\n        },\n        style: this.state.itemListStyle || {}\n      }, this.props.infiniteLoop && lastClone, this.renderItems(), this.props.infiniteLoop && firstClone)), this.props.renderArrowNext(this.onClickNext, hasNext, this.props.labels.rightArrow), this.renderStatus()), this.renderThumbs());\n    }\n  }]);\n\n  return Carousel;\n}(_react.default.Component);\n\nexports.default = Carousel;\n\n_defineProperty(Carousel, \"displayName\", 'Carousel');\n\n_defineProperty(Carousel, \"defaultProps\", {\n  ariaLabel: undefined,\n  axis: 'horizontal',\n  centerSlidePercentage: 80,\n  interval: 3000,\n  labels: {\n    leftArrow: 'previous slide / item',\n    rightArrow: 'next slide / item',\n    item: 'slide item'\n  },\n  onClickItem: _utils.noop,\n  onClickThumb: _utils.noop,\n  onChange: _utils.noop,\n  onSwipeStart: function onSwipeStart() {},\n  onSwipeEnd: function onSwipeEnd() {},\n  onSwipeMove: function onSwipeMove() {\n    return false;\n  },\n  preventMovementUntilSwipeScrollTolerance: false,\n  renderArrowPrev: function renderArrowPrev(onClickHandler, hasPrev, label) {\n    return /*#__PURE__*/_react.default.createElement(\"button\", {\n      type: \"button\",\n      \"aria-label\": label,\n      className: _cssClasses.default.ARROW_PREV(!hasPrev),\n      onClick: onClickHandler\n    });\n  },\n  renderArrowNext: function renderArrowNext(onClickHandler, hasNext, label) {\n    return /*#__PURE__*/_react.default.createElement(\"button\", {\n      type: \"button\",\n      \"aria-label\": label,\n      className: _cssClasses.default.ARROW_NEXT(!hasNext),\n      onClick: onClickHandler\n    });\n  },\n  renderIndicator: function renderIndicator(onClickHandler, isSelected, index, label) {\n    return /*#__PURE__*/_react.default.createElement(\"li\", {\n      className: _cssClasses.default.DOT(isSelected),\n      onClick: onClickHandler,\n      onKeyDown: onClickHandler,\n      value: index,\n      key: index,\n      role: \"button\",\n      tabIndex: 0,\n      \"aria-label\": \"\".concat(label, \" \").concat(index + 1)\n    });\n  },\n  renderItem: function renderItem(item) {\n    return item;\n  },\n  renderThumbs: function renderThumbs(children) {\n    var images = _react.Children.map(children, function (item) {\n      var img = item; // if the item is not an image, try to find the first image in the item's children.\n\n      if (item.type !== 'img') {\n        img = _react.Children.toArray(item.props.children).find(function (children) {\n          return children.type === 'img';\n        });\n      }\n\n      if (!img) {\n        return undefined;\n      }\n\n      return img;\n    });\n\n    if (images.filter(function (image) {\n      return image;\n    }).length === 0) {\n      console.warn(\"No images found! Can't build the thumb list without images. If you don't need thumbs, set showThumbs={false} in the Carousel. Note that it's not possible to get images rendered inside custom components. More info at https://github.com/leandrowd/react-responsive-carousel/blob/master/TROUBLESHOOTING.md\");\n      return [];\n    }\n\n    return images;\n  },\n  statusFormatter: _utils.defaultStatusFormatter,\n  selectedItem: 0,\n  showArrows: true,\n  showIndicators: true,\n  showStatus: true,\n  showThumbs: true,\n  stopOnHover: true,\n  swipeScrollTolerance: 5,\n  swipeable: true,\n  transitionTime: 350,\n  verticalSwipe: 'standard',\n  width: '100%',\n  animationHandler: 'slide',\n  swipeAnimationHandler: _animations.slideSwipeAnimationHandler,\n  stopSwipingHandler: _animations.slideStopSwipingHandler\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"Carousel\", {\n  enumerable: true,\n  get: function get() {\n    return _Carousel.default;\n  }\n});\nObject.defineProperty(exports, \"CarouselProps\", {\n  enumerable: true,\n  get: function get() {\n    return _types.CarouselProps;\n  }\n});\nObject.defineProperty(exports, \"Thumbs\", {\n  enumerable: true,\n  get: function get() {\n    return _Thumbs.default;\n  }\n});\n\nvar _Carousel = _interopRequireDefault(require(\"./components/Carousel\"));\n\nvar _types = require(\"./components/Carousel/types\");\n\nvar _Thumbs = _interopRequireDefault(require(\"./components/Thumbs\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","import * as React from \"react\";\nimport debounce from \"lodash/debounce.js\";\nimport { deepEqual } from \"./support.js\";\nexport function useEventListener(eventName, handler, element, passive, capture = false) {\n    // Create a ref that stores handler\n    const savedHandler = React.useRef();\n    // Update ref.current value if handler changes.\n    // This allows our effect below to always get latest handler ...\n    // ... without us needing to pass it in effect deps array ...\n    // ... and potentially cause effect to re-run every render.\n    savedHandler.current = handler;\n    React.useEffect(() => {\n        // Make sure element supports addEventListener\n        if (element === null || element.addEventListener === undefined)\n            return;\n        const el = element;\n        // Create event listener that calls handler function stored in ref\n        const eventListener = (event) => {\n            savedHandler.current?.call(el, event);\n        };\n        el.addEventListener(eventName, eventListener, { passive, capture });\n        // Remove event listener on cleanup\n        return () => {\n            el.removeEventListener(eventName, eventListener, { capture });\n        };\n    }, [eventName, element, passive, capture] // Re-run if eventName or element changes\n    );\n}\nexport function whenDefined(obj, result) {\n    return obj === undefined ? undefined : result;\n}\nconst PI = Math.PI;\nexport function degreesToRadians(degrees) {\n    return (degrees * PI) / 180;\n}\nexport const getSquareBB = (posX, posY, squareSideLength) => ({\n    x1: posX - squareSideLength / 2,\n    y1: posY - squareSideLength / 2,\n    x2: posX + squareSideLength / 2,\n    y2: posY + squareSideLength / 2,\n});\nexport const getSquareXPosFromAlign = (alignment, containerX, containerWidth, horizontalPadding, squareWidth) => {\n    switch (alignment) {\n        case \"left\":\n            return Math.floor(containerX) + horizontalPadding + squareWidth / 2;\n        case \"center\":\n            return Math.floor(containerX + containerWidth / 2);\n        case \"right\":\n            return Math.floor(containerX + containerWidth) - horizontalPadding - squareWidth / 2;\n    }\n};\nexport const getSquareWidth = (maxSize, containerHeight, verticalPadding) => Math.min(maxSize, containerHeight - verticalPadding * 2);\nexport const pointIsWithinBB = (x, y, bb) => bb.x1 <= x && x <= bb.x2 && bb.y1 <= y && y <= bb.y2;\nexport const EditPencil = (props) => {\n    const fg = props.fgColor ?? \"currentColor\";\n    return (React.createElement(\"svg\", { viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\" },\n        React.createElement(\"path\", { d: \"M12.7073 7.05029C7.87391 11.8837 10.4544 9.30322 6.03024 13.7273C5.77392 13.9836 5.58981 14.3071 5.50189 14.6587L4.52521 18.5655C4.38789 19.1148 4.88543 19.6123 5.43472 19.475L9.34146 18.4983C9.69313 18.4104 10.0143 18.2286 10.2706 17.9722L16.9499 11.2929\", stroke: fg, strokeWidth: \"1.5\", strokeLinecap: \"round\", strokeLinejoin: \"round\", fill: \"none\", vectorEffect: \"non-scaling-stroke\" }),\n        React.createElement(\"path\", { d: \"M20.4854 4.92901L19.0712 3.5148C18.2901 2.73375 17.0238 2.73375 16.2428 3.5148L14.475 5.28257C15.5326 7.71912 16.4736 8.6278 18.7176 9.52521L20.4854 7.75744C21.2665 6.97639 21.2665 5.71006 20.4854 4.92901Z\", stroke: fg, strokeWidth: \"1.5\", strokeLinecap: \"round\", strokeLinejoin: \"round\", fill: \"none\", vectorEffect: \"non-scaling-stroke\" })));\n};\nexport const Checkmark = (props) => {\n    const fg = props.fgColor ?? \"currentColor\";\n    return (React.createElement(\"svg\", { viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\" },\n        React.createElement(\"path\", { d: \"M19 6L10.3802 17L5.34071 11.8758\", vectorEffect: \"non-scaling-stroke\", stroke: fg, strokeWidth: \"1.5\", strokeLinecap: \"round\", strokeLinejoin: \"round\" })));\n};\nexport function useDebouncedMemo(factory, deps, time) {\n    const [state, setState] = React.useState(factory);\n    const mountedRef = React.useRef(true);\n    React.useEffect(() => () => {\n        mountedRef.current = false;\n    }, []);\n    const debouncedSetState = React.useRef(debounce(x => {\n        if (mountedRef.current) {\n            setState(x);\n        }\n    }, time));\n    React.useLayoutEffect(() => {\n        if (mountedRef.current) {\n            debouncedSetState.current(() => factory());\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, deps);\n    return state;\n}\n// Shamelessly inline direction to avoid conflicts with 1.0 and 2.0.\nconst rtlRange = \"\\u0591-\\u07FF\\uFB1D-\\uFDFD\\uFE70-\\uFEFC\";\nconst ltrRange = \"A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\" +\n    \"\\u00F8-\\u02B8\\u0300-\\u0590\\u0800-\\u1FFF\\u200E\\u2C00-\\uFB1C\" +\n    \"\\uFE00-\\uFE6F\\uFEFD-\\uFFFF\";\n/* eslint-disable no-misleading-character-class */\nconst rtl = new RegExp(\"^[^\" + ltrRange + \"]*[\" + rtlRange + \"]\");\n/* eslint-enable no-misleading-character-class */\nexport function direction(value) {\n    return rtl.test(value) ? \"rtl\" : \"not-rtl\";\n}\nlet scrollbarWidthCache = undefined;\nexport function getScrollBarWidth() {\n    if (typeof document === \"undefined\")\n        return 0;\n    if (scrollbarWidthCache !== undefined)\n        return scrollbarWidthCache;\n    const inner = document.createElement(\"p\");\n    inner.style.width = \"100%\";\n    inner.style.height = \"200px\";\n    const outer = document.createElement(\"div\");\n    outer.id = \"testScrollbar\";\n    outer.style.position = \"absolute\";\n    outer.style.top = \"0px\";\n    outer.style.left = \"0px\";\n    outer.style.visibility = \"hidden\";\n    outer.style.width = \"200px\";\n    outer.style.height = \"150px\";\n    outer.style.overflow = \"hidden\";\n    outer.append(inner);\n    document.body.append(outer);\n    const w1 = inner.offsetWidth;\n    outer.style.overflow = \"scroll\";\n    let w2 = inner.offsetWidth;\n    if (w1 === w2) {\n        w2 = outer.clientWidth;\n    }\n    outer.remove();\n    scrollbarWidthCache = w1 - w2;\n    return scrollbarWidthCache;\n}\n// Dear future reader,\n// This dumb hook is to make sure if the inputState changes, that effectively behaves like an instant \"setState\" call.\n// This is useful in a wide variety of situations. I'm too dumb to know if this is a good idea or a really dumb one.\n// I can't tell. It's like poes law but for code.\n//\n// I'm sorry.\nconst empty = Symbol();\nexport function useStateWithReactiveInput(inputState) {\n    // When [0] is not empty we will return it, [1] is always the last value we saw\n    const inputStateRef = React.useRef([empty, inputState]);\n    if (inputStateRef.current[1] !== inputState) {\n        // it changed, we must use thee!\n        inputStateRef.current[0] = inputState;\n    }\n    inputStateRef.current[1] = inputState;\n    const [state, setState] = React.useState(inputState);\n    // crimes against humanity here\n    const [, forceRender] = React.useState();\n    const setStateOuter = React.useCallback(nv => {\n        // this takes care of the case where the inputState was set, then setState gets called again but back to what\n        // the state was before the inputState changed. Since the useState effect wont trigger a render in this case\n        // we need to be very naughty and force it to see the change. Technically this may not be needed some chunk of\n        // the time (in fact most of it) but checking for it is likely to be more expensive than just over-doing it\n        const s = inputStateRef.current[0];\n        if (s !== empty) {\n            nv = typeof nv === \"function\" ? nv(s) : nv;\n            if (nv === s)\n                return; // they are setting it to what the inputState is anyway so we can just do nothing\n        }\n        if (s !== empty)\n            forceRender({});\n        setState(pv => {\n            if (typeof nv === \"function\") {\n                return nv(s === empty ? pv : s);\n            }\n            return nv;\n        });\n        inputStateRef.current[0] = empty;\n    }, []);\n    const onEmpty = React.useCallback(() => {\n        inputStateRef.current[0] = empty;\n        forceRender({});\n    }, []);\n    return [inputStateRef.current[0] === empty ? state : inputStateRef.current[0], setStateOuter, onEmpty];\n}\nexport function makeAccessibilityStringForArray(arr) {\n    // this is basically just .join(\", \") but checks to make sure it is not going to allocate\n    // a string that is so large it might crash the browser\n    if (arr.length === 0) {\n        return \"\";\n    }\n    let index = 0;\n    let count = 0;\n    for (const str of arr) {\n        count += str.length;\n        if (count > 10000)\n            break;\n        index++;\n    }\n    return arr.slice(0, index).join(\", \");\n}\nexport function useDeepMemo(value) {\n    const ref = React.useRef(value);\n    if (!deepEqual(value, ref.current)) {\n        ref.current = value;\n    }\n    return ref.current;\n}\n//# sourceMappingURL=utils.js.map","import * as React from \"react\";\nimport { ImageOverlayEditorStyle } from \"./image-overlay-editor-style.js\";\nimport { Carousel } from \"react-responsive-carousel\";\nimport { EditPencil } from \"../../../common/utils.js\";\n/** @category Renderers */\nexport const ImageOverlayEditor = p => {\n    const { urls, canWrite, onEditClick, renderImage } = p;\n    const filtered = urls.filter(u => u !== \"\");\n    if (filtered.length === 0) {\n        return null;\n    }\n    const allowMove = filtered.length > 1;\n    return (React.createElement(ImageOverlayEditorStyle, { \"data-testid\": \"GDG-default-image-overlay-editor\" },\n        React.createElement(Carousel, { showArrows: allowMove, showThumbs: false, swipeable: allowMove, emulateTouch: allowMove, infiniteLoop: allowMove }, filtered.map(url => {\n            const innerContent = renderImage?.(url) ?? React.createElement(\"img\", { draggable: false, src: url });\n            return (React.createElement(\"div\", { className: \"gdg-centering-container\", key: url }, innerContent));\n        })),\n        canWrite && onEditClick && (React.createElement(\"button\", { className: \"gdg-edit-icon\", onClick: onEditClick },\n            React.createElement(EditPencil, null)))));\n};\n//# sourceMappingURL=image-overlay-editor.js.map","/**\n * marked v4.3.0 - a markdown parser\n * Copyright (c) 2011-2023, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/markedjs/marked\n */\n\n/**\n * DO NOT EDIT THIS FILE\n * The code in this file is generated from files in ./src/\n */\n\nfunction getDefaults() {\n  return {\n    async: false,\n    baseUrl: null,\n    breaks: false,\n    extensions: null,\n    gfm: true,\n    headerIds: true,\n    headerPrefix: '',\n    highlight: null,\n    hooks: null,\n    langPrefix: 'language-',\n    mangle: true,\n    pedantic: false,\n    renderer: null,\n    sanitize: false,\n    sanitizer: null,\n    silent: false,\n    smartypants: false,\n    tokenizer: null,\n    walkTokens: null,\n    xhtml: false\n  };\n}\n\nlet defaults = getDefaults();\n\nfunction changeDefaults(newDefaults) {\n  defaults = newDefaults;\n}\n\n/**\n * Helpers\n */\nconst escapeTest = /[&<>\"']/;\nconst escapeReplace = new RegExp(escapeTest.source, 'g');\nconst escapeTestNoEncode = /[<>\"']|&(?!(#\\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\\w+);)/;\nconst escapeReplaceNoEncode = new RegExp(escapeTestNoEncode.source, 'g');\nconst escapeReplacements = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;'\n};\nconst getEscapeReplacement = (ch) => escapeReplacements[ch];\nfunction escape(html, encode) {\n  if (encode) {\n    if (escapeTest.test(html)) {\n      return html.replace(escapeReplace, getEscapeReplacement);\n    }\n  } else {\n    if (escapeTestNoEncode.test(html)) {\n      return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\n    }\n  }\n\n  return html;\n}\n\nconst unescapeTest = /&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig;\n\n/**\n * @param {string} html\n */\nfunction unescape(html) {\n  // explicitly match decimal, hex, and named HTML entities\n  return html.replace(unescapeTest, (_, n) => {\n    n = n.toLowerCase();\n    if (n === 'colon') return ':';\n    if (n.charAt(0) === '#') {\n      return n.charAt(1) === 'x'\n        ? String.fromCharCode(parseInt(n.substring(2), 16))\n        : String.fromCharCode(+n.substring(1));\n    }\n    return '';\n  });\n}\n\nconst caret = /(^|[^\\[])\\^/g;\n\n/**\n * @param {string | RegExp} regex\n * @param {string} opt\n */\nfunction edit(regex, opt) {\n  regex = typeof regex === 'string' ? regex : regex.source;\n  opt = opt || '';\n  const obj = {\n    replace: (name, val) => {\n      val = val.source || val;\n      val = val.replace(caret, '$1');\n      regex = regex.replace(name, val);\n      return obj;\n    },\n    getRegex: () => {\n      return new RegExp(regex, opt);\n    }\n  };\n  return obj;\n}\n\nconst nonWordAndColonTest = /[^\\w:]/g;\nconst originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\n\n/**\n * @param {boolean} sanitize\n * @param {string} base\n * @param {string} href\n */\nfunction cleanUrl(sanitize, base, href) {\n  if (sanitize) {\n    let prot;\n    try {\n      prot = decodeURIComponent(unescape(href))\n        .replace(nonWordAndColonTest, '')\n        .toLowerCase();\n    } catch (e) {\n      return null;\n    }\n    if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\n      return null;\n    }\n  }\n  if (base && !originIndependentUrl.test(href)) {\n    href = resolveUrl(base, href);\n  }\n  try {\n    href = encodeURI(href).replace(/%25/g, '%');\n  } catch (e) {\n    return null;\n  }\n  return href;\n}\n\nconst baseUrls = {};\nconst justDomain = /^[^:]+:\\/*[^/]*$/;\nconst protocol = /^([^:]+:)[\\s\\S]*$/;\nconst domain = /^([^:]+:\\/*[^/]*)[\\s\\S]*$/;\n\n/**\n * @param {string} base\n * @param {string} href\n */\nfunction resolveUrl(base, href) {\n  if (!baseUrls[' ' + base]) {\n    // we can ignore everything in base after the last slash of its path component,\n    // but we might need to add _that_\n    // https://tools.ietf.org/html/rfc3986#section-3\n    if (justDomain.test(base)) {\n      baseUrls[' ' + base] = base + '/';\n    } else {\n      baseUrls[' ' + base] = rtrim(base, '/', true);\n    }\n  }\n  base = baseUrls[' ' + base];\n  const relativeBase = base.indexOf(':') === -1;\n\n  if (href.substring(0, 2) === '//') {\n    if (relativeBase) {\n      return href;\n    }\n    return base.replace(protocol, '$1') + href;\n  } else if (href.charAt(0) === '/') {\n    if (relativeBase) {\n      return href;\n    }\n    return base.replace(domain, '$1') + href;\n  } else {\n    return base + href;\n  }\n}\n\nconst noopTest = { exec: function noopTest() {} };\n\nfunction splitCells(tableRow, count) {\n  // ensure that every cell-delimiting pipe has a space\n  // before it to distinguish it from an escaped pipe\n  const row = tableRow.replace(/\\|/g, (match, offset, str) => {\n      let escaped = false,\n        curr = offset;\n      while (--curr >= 0 && str[curr] === '\\\\') escaped = !escaped;\n      if (escaped) {\n        // odd number of slashes means | is escaped\n        // so we leave it alone\n        return '|';\n      } else {\n        // add space before unescaped |\n        return ' |';\n      }\n    }),\n    cells = row.split(/ \\|/);\n  let i = 0;\n\n  // First/last cell in a row cannot be empty if it has no leading/trailing pipe\n  if (!cells[0].trim()) { cells.shift(); }\n  if (cells.length > 0 && !cells[cells.length - 1].trim()) { cells.pop(); }\n\n  if (cells.length > count) {\n    cells.splice(count);\n  } else {\n    while (cells.length < count) cells.push('');\n  }\n\n  for (; i < cells.length; i++) {\n    // leading or trailing whitespace is ignored per the gfm spec\n    cells[i] = cells[i].trim().replace(/\\\\\\|/g, '|');\n  }\n  return cells;\n}\n\n/**\n * Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\n * /c*$/ is vulnerable to REDOS.\n *\n * @param {string} str\n * @param {string} c\n * @param {boolean} invert Remove suffix of non-c chars instead. Default falsey.\n */\nfunction rtrim(str, c, invert) {\n  const l = str.length;\n  if (l === 0) {\n    return '';\n  }\n\n  // Length of suffix matching the invert condition.\n  let suffLen = 0;\n\n  // Step left until we fail to match the invert condition.\n  while (suffLen < l) {\n    const currChar = str.charAt(l - suffLen - 1);\n    if (currChar === c && !invert) {\n      suffLen++;\n    } else if (currChar !== c && invert) {\n      suffLen++;\n    } else {\n      break;\n    }\n  }\n\n  return str.slice(0, l - suffLen);\n}\n\nfunction findClosingBracket(str, b) {\n  if (str.indexOf(b[1]) === -1) {\n    return -1;\n  }\n  const l = str.length;\n  let level = 0,\n    i = 0;\n  for (; i < l; i++) {\n    if (str[i] === '\\\\') {\n      i++;\n    } else if (str[i] === b[0]) {\n      level++;\n    } else if (str[i] === b[1]) {\n      level--;\n      if (level < 0) {\n        return i;\n      }\n    }\n  }\n  return -1;\n}\n\nfunction checkSanitizeDeprecation(opt) {\n  if (opt && opt.sanitize && !opt.silent) {\n    console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\n  }\n}\n\n// copied from https://stackoverflow.com/a/5450113/806777\n/**\n * @param {string} pattern\n * @param {number} count\n */\nfunction repeatString(pattern, count) {\n  if (count < 1) {\n    return '';\n  }\n  let result = '';\n  while (count > 1) {\n    if (count & 1) {\n      result += pattern;\n    }\n    count >>= 1;\n    pattern += pattern;\n  }\n  return result + pattern;\n}\n\nfunction outputLink(cap, link, raw, lexer) {\n  const href = link.href;\n  const title = link.title ? escape(link.title) : null;\n  const text = cap[1].replace(/\\\\([\\[\\]])/g, '$1');\n\n  if (cap[0].charAt(0) !== '!') {\n    lexer.state.inLink = true;\n    const token = {\n      type: 'link',\n      raw,\n      href,\n      title,\n      text,\n      tokens: lexer.inlineTokens(text)\n    };\n    lexer.state.inLink = false;\n    return token;\n  }\n  return {\n    type: 'image',\n    raw,\n    href,\n    title,\n    text: escape(text)\n  };\n}\n\nfunction indentCodeCompensation(raw, text) {\n  const matchIndentToCode = raw.match(/^(\\s+)(?:```)/);\n\n  if (matchIndentToCode === null) {\n    return text;\n  }\n\n  const indentToCode = matchIndentToCode[1];\n\n  return text\n    .split('\\n')\n    .map(node => {\n      const matchIndentInNode = node.match(/^\\s+/);\n      if (matchIndentInNode === null) {\n        return node;\n      }\n\n      const [indentInNode] = matchIndentInNode;\n\n      if (indentInNode.length >= indentToCode.length) {\n        return node.slice(indentToCode.length);\n      }\n\n      return node;\n    })\n    .join('\\n');\n}\n\n/**\n * Tokenizer\n */\nclass Tokenizer {\n  constructor(options) {\n    this.options = options || defaults;\n  }\n\n  space(src) {\n    const cap = this.rules.block.newline.exec(src);\n    if (cap && cap[0].length > 0) {\n      return {\n        type: 'space',\n        raw: cap[0]\n      };\n    }\n  }\n\n  code(src) {\n    const cap = this.rules.block.code.exec(src);\n    if (cap) {\n      const text = cap[0].replace(/^ {1,4}/gm, '');\n      return {\n        type: 'code',\n        raw: cap[0],\n        codeBlockStyle: 'indented',\n        text: !this.options.pedantic\n          ? rtrim(text, '\\n')\n          : text\n      };\n    }\n  }\n\n  fences(src) {\n    const cap = this.rules.block.fences.exec(src);\n    if (cap) {\n      const raw = cap[0];\n      const text = indentCodeCompensation(raw, cap[3] || '');\n\n      return {\n        type: 'code',\n        raw,\n        lang: cap[2] ? cap[2].trim().replace(this.rules.inline._escapes, '$1') : cap[2],\n        text\n      };\n    }\n  }\n\n  heading(src) {\n    const cap = this.rules.block.heading.exec(src);\n    if (cap) {\n      let text = cap[2].trim();\n\n      // remove trailing #s\n      if (/#$/.test(text)) {\n        const trimmed = rtrim(text, '#');\n        if (this.options.pedantic) {\n          text = trimmed.trim();\n        } else if (!trimmed || / $/.test(trimmed)) {\n          // CommonMark requires space before trailing #s\n          text = trimmed.trim();\n        }\n      }\n\n      return {\n        type: 'heading',\n        raw: cap[0],\n        depth: cap[1].length,\n        text,\n        tokens: this.lexer.inline(text)\n      };\n    }\n  }\n\n  hr(src) {\n    const cap = this.rules.block.hr.exec(src);\n    if (cap) {\n      return {\n        type: 'hr',\n        raw: cap[0]\n      };\n    }\n  }\n\n  blockquote(src) {\n    const cap = this.rules.block.blockquote.exec(src);\n    if (cap) {\n      const text = cap[0].replace(/^ *>[ \\t]?/gm, '');\n      const top = this.lexer.state.top;\n      this.lexer.state.top = true;\n      const tokens = this.lexer.blockTokens(text);\n      this.lexer.state.top = top;\n      return {\n        type: 'blockquote',\n        raw: cap[0],\n        tokens,\n        text\n      };\n    }\n  }\n\n  list(src) {\n    let cap = this.rules.block.list.exec(src);\n    if (cap) {\n      let raw, istask, ischecked, indent, i, blankLine, endsWithBlankLine,\n        line, nextLine, rawLine, itemContents, endEarly;\n\n      let bull = cap[1].trim();\n      const isordered = bull.length > 1;\n\n      const list = {\n        type: 'list',\n        raw: '',\n        ordered: isordered,\n        start: isordered ? +bull.slice(0, -1) : '',\n        loose: false,\n        items: []\n      };\n\n      bull = isordered ? `\\\\d{1,9}\\\\${bull.slice(-1)}` : `\\\\${bull}`;\n\n      if (this.options.pedantic) {\n        bull = isordered ? bull : '[*+-]';\n      }\n\n      // Get next list item\n      const itemRegex = new RegExp(`^( {0,3}${bull})((?:[\\t ][^\\\\n]*)?(?:\\\\n|$))`);\n\n      // Check if current bullet point can start a new List Item\n      while (src) {\n        endEarly = false;\n        if (!(cap = itemRegex.exec(src))) {\n          break;\n        }\n\n        if (this.rules.block.hr.test(src)) { // End list if bullet was actually HR (possibly move into itemRegex?)\n          break;\n        }\n\n        raw = cap[0];\n        src = src.substring(raw.length);\n\n        line = cap[2].split('\\n', 1)[0].replace(/^\\t+/, (t) => ' '.repeat(3 * t.length));\n        nextLine = src.split('\\n', 1)[0];\n\n        if (this.options.pedantic) {\n          indent = 2;\n          itemContents = line.trimLeft();\n        } else {\n          indent = cap[2].search(/[^ ]/); // Find first non-space char\n          indent = indent > 4 ? 1 : indent; // Treat indented code blocks (> 4 spaces) as having only 1 indent\n          itemContents = line.slice(indent);\n          indent += cap[1].length;\n        }\n\n        blankLine = false;\n\n        if (!line && /^ *$/.test(nextLine)) { // Items begin with at most one blank line\n          raw += nextLine + '\\n';\n          src = src.substring(nextLine.length + 1);\n          endEarly = true;\n        }\n\n        if (!endEarly) {\n          const nextBulletRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}(?:[*+-]|\\\\d{1,9}[.)])((?:[ \\t][^\\\\n]*)?(?:\\\\n|$))`);\n          const hrRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$)`);\n          const fencesBeginRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}(?:\\`\\`\\`|~~~)`);\n          const headingBeginRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}#`);\n\n          // Check if following lines should be included in List Item\n          while (src) {\n            rawLine = src.split('\\n', 1)[0];\n            nextLine = rawLine;\n\n            // Re-align to follow commonmark nesting rules\n            if (this.options.pedantic) {\n              nextLine = nextLine.replace(/^ {1,4}(?=( {4})*[^ ])/g, '  ');\n            }\n\n            // End list item if found code fences\n            if (fencesBeginRegex.test(nextLine)) {\n              break;\n            }\n\n            // End list item if found start of new heading\n            if (headingBeginRegex.test(nextLine)) {\n              break;\n            }\n\n            // End list item if found start of new bullet\n            if (nextBulletRegex.test(nextLine)) {\n              break;\n            }\n\n            // Horizontal rule found\n            if (hrRegex.test(src)) {\n              break;\n            }\n\n            if (nextLine.search(/[^ ]/) >= indent || !nextLine.trim()) { // Dedent if possible\n              itemContents += '\\n' + nextLine.slice(indent);\n            } else {\n              // not enough indentation\n              if (blankLine) {\n                break;\n              }\n\n              // paragraph continuation unless last line was a different block level element\n              if (line.search(/[^ ]/) >= 4) { // indented code block\n                break;\n              }\n              if (fencesBeginRegex.test(line)) {\n                break;\n              }\n              if (headingBeginRegex.test(line)) {\n                break;\n              }\n              if (hrRegex.test(line)) {\n                break;\n              }\n\n              itemContents += '\\n' + nextLine;\n            }\n\n            if (!blankLine && !nextLine.trim()) { // Check if current line is blank\n              blankLine = true;\n            }\n\n            raw += rawLine + '\\n';\n            src = src.substring(rawLine.length + 1);\n            line = nextLine.slice(indent);\n          }\n        }\n\n        if (!list.loose) {\n          // If the previous item ended with a blank line, the list is loose\n          if (endsWithBlankLine) {\n            list.loose = true;\n          } else if (/\\n *\\n *$/.test(raw)) {\n            endsWithBlankLine = true;\n          }\n        }\n\n        // Check for task list items\n        if (this.options.gfm) {\n          istask = /^\\[[ xX]\\] /.exec(itemContents);\n          if (istask) {\n            ischecked = istask[0] !== '[ ] ';\n            itemContents = itemContents.replace(/^\\[[ xX]\\] +/, '');\n          }\n        }\n\n        list.items.push({\n          type: 'list_item',\n          raw,\n          task: !!istask,\n          checked: ischecked,\n          loose: false,\n          text: itemContents\n        });\n\n        list.raw += raw;\n      }\n\n      // Do not consume newlines at end of final item. Alternatively, make itemRegex *start* with any newlines to simplify/speed up endsWithBlankLine logic\n      list.items[list.items.length - 1].raw = raw.trimRight();\n      list.items[list.items.length - 1].text = itemContents.trimRight();\n      list.raw = list.raw.trimRight();\n\n      const l = list.items.length;\n\n      // Item child tokens handled here at end because we needed to have the final item to trim it first\n      for (i = 0; i < l; i++) {\n        this.lexer.state.top = false;\n        list.items[i].tokens = this.lexer.blockTokens(list.items[i].text, []);\n\n        if (!list.loose) {\n          // Check if list should be loose\n          const spacers = list.items[i].tokens.filter(t => t.type === 'space');\n          const hasMultipleLineBreaks = spacers.length > 0 && spacers.some(t => /\\n.*\\n/.test(t.raw));\n\n          list.loose = hasMultipleLineBreaks;\n        }\n      }\n\n      // Set all items to loose if list is loose\n      if (list.loose) {\n        for (i = 0; i < l; i++) {\n          list.items[i].loose = true;\n        }\n      }\n\n      return list;\n    }\n  }\n\n  html(src) {\n    const cap = this.rules.block.html.exec(src);\n    if (cap) {\n      const token = {\n        type: 'html',\n        raw: cap[0],\n        pre: !this.options.sanitizer\n          && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\n        text: cap[0]\n      };\n      if (this.options.sanitize) {\n        const text = this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]);\n        token.type = 'paragraph';\n        token.text = text;\n        token.tokens = this.lexer.inline(text);\n      }\n      return token;\n    }\n  }\n\n  def(src) {\n    const cap = this.rules.block.def.exec(src);\n    if (cap) {\n      const tag = cap[1].toLowerCase().replace(/\\s+/g, ' ');\n      const href = cap[2] ? cap[2].replace(/^<(.*)>$/, '$1').replace(this.rules.inline._escapes, '$1') : '';\n      const title = cap[3] ? cap[3].substring(1, cap[3].length - 1).replace(this.rules.inline._escapes, '$1') : cap[3];\n      return {\n        type: 'def',\n        tag,\n        raw: cap[0],\n        href,\n        title\n      };\n    }\n  }\n\n  table(src) {\n    const cap = this.rules.block.table.exec(src);\n    if (cap) {\n      const item = {\n        type: 'table',\n        header: splitCells(cap[1]).map(c => { return { text: c }; }),\n        align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n        rows: cap[3] && cap[3].trim() ? cap[3].replace(/\\n[ \\t]*$/, '').split('\\n') : []\n      };\n\n      if (item.header.length === item.align.length) {\n        item.raw = cap[0];\n\n        let l = item.align.length;\n        let i, j, k, row;\n        for (i = 0; i < l; i++) {\n          if (/^ *-+: *$/.test(item.align[i])) {\n            item.align[i] = 'right';\n          } else if (/^ *:-+: *$/.test(item.align[i])) {\n            item.align[i] = 'center';\n          } else if (/^ *:-+ *$/.test(item.align[i])) {\n            item.align[i] = 'left';\n          } else {\n            item.align[i] = null;\n          }\n        }\n\n        l = item.rows.length;\n        for (i = 0; i < l; i++) {\n          item.rows[i] = splitCells(item.rows[i], item.header.length).map(c => { return { text: c }; });\n        }\n\n        // parse child tokens inside headers and cells\n\n        // header child tokens\n        l = item.header.length;\n        for (j = 0; j < l; j++) {\n          item.header[j].tokens = this.lexer.inline(item.header[j].text);\n        }\n\n        // cell child tokens\n        l = item.rows.length;\n        for (j = 0; j < l; j++) {\n          row = item.rows[j];\n          for (k = 0; k < row.length; k++) {\n            row[k].tokens = this.lexer.inline(row[k].text);\n          }\n        }\n\n        return item;\n      }\n    }\n  }\n\n  lheading(src) {\n    const cap = this.rules.block.lheading.exec(src);\n    if (cap) {\n      return {\n        type: 'heading',\n        raw: cap[0],\n        depth: cap[2].charAt(0) === '=' ? 1 : 2,\n        text: cap[1],\n        tokens: this.lexer.inline(cap[1])\n      };\n    }\n  }\n\n  paragraph(src) {\n    const cap = this.rules.block.paragraph.exec(src);\n    if (cap) {\n      const text = cap[1].charAt(cap[1].length - 1) === '\\n'\n        ? cap[1].slice(0, -1)\n        : cap[1];\n      return {\n        type: 'paragraph',\n        raw: cap[0],\n        text,\n        tokens: this.lexer.inline(text)\n      };\n    }\n  }\n\n  text(src) {\n    const cap = this.rules.block.text.exec(src);\n    if (cap) {\n      return {\n        type: 'text',\n        raw: cap[0],\n        text: cap[0],\n        tokens: this.lexer.inline(cap[0])\n      };\n    }\n  }\n\n  escape(src) {\n    const cap = this.rules.inline.escape.exec(src);\n    if (cap) {\n      return {\n        type: 'escape',\n        raw: cap[0],\n        text: escape(cap[1])\n      };\n    }\n  }\n\n  tag(src) {\n    const cap = this.rules.inline.tag.exec(src);\n    if (cap) {\n      if (!this.lexer.state.inLink && /^<a /i.test(cap[0])) {\n        this.lexer.state.inLink = true;\n      } else if (this.lexer.state.inLink && /^<\\/a>/i.test(cap[0])) {\n        this.lexer.state.inLink = false;\n      }\n      if (!this.lexer.state.inRawBlock && /^<(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n        this.lexer.state.inRawBlock = true;\n      } else if (this.lexer.state.inRawBlock && /^<\\/(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n        this.lexer.state.inRawBlock = false;\n      }\n\n      return {\n        type: this.options.sanitize\n          ? 'text'\n          : 'html',\n        raw: cap[0],\n        inLink: this.lexer.state.inLink,\n        inRawBlock: this.lexer.state.inRawBlock,\n        text: this.options.sanitize\n          ? (this.options.sanitizer\n            ? this.options.sanitizer(cap[0])\n            : escape(cap[0]))\n          : cap[0]\n      };\n    }\n  }\n\n  link(src) {\n    const cap = this.rules.inline.link.exec(src);\n    if (cap) {\n      const trimmedUrl = cap[2].trim();\n      if (!this.options.pedantic && /^</.test(trimmedUrl)) {\n        // commonmark requires matching angle brackets\n        if (!(/>$/.test(trimmedUrl))) {\n          return;\n        }\n\n        // ending angle bracket cannot be escaped\n        const rtrimSlash = rtrim(trimmedUrl.slice(0, -1), '\\\\');\n        if ((trimmedUrl.length - rtrimSlash.length) % 2 === 0) {\n          return;\n        }\n      } else {\n        // find closing parenthesis\n        const lastParenIndex = findClosingBracket(cap[2], '()');\n        if (lastParenIndex > -1) {\n          const start = cap[0].indexOf('!') === 0 ? 5 : 4;\n          const linkLen = start + cap[1].length + lastParenIndex;\n          cap[2] = cap[2].substring(0, lastParenIndex);\n          cap[0] = cap[0].substring(0, linkLen).trim();\n          cap[3] = '';\n        }\n      }\n      let href = cap[2];\n      let title = '';\n      if (this.options.pedantic) {\n        // split pedantic href and title\n        const link = /^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/.exec(href);\n\n        if (link) {\n          href = link[1];\n          title = link[3];\n        }\n      } else {\n        title = cap[3] ? cap[3].slice(1, -1) : '';\n      }\n\n      href = href.trim();\n      if (/^</.test(href)) {\n        if (this.options.pedantic && !(/>$/.test(trimmedUrl))) {\n          // pedantic allows starting angle bracket without ending angle bracket\n          href = href.slice(1);\n        } else {\n          href = href.slice(1, -1);\n        }\n      }\n      return outputLink(cap, {\n        href: href ? href.replace(this.rules.inline._escapes, '$1') : href,\n        title: title ? title.replace(this.rules.inline._escapes, '$1') : title\n      }, cap[0], this.lexer);\n    }\n  }\n\n  reflink(src, links) {\n    let cap;\n    if ((cap = this.rules.inline.reflink.exec(src))\n        || (cap = this.rules.inline.nolink.exec(src))) {\n      let link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n      link = links[link.toLowerCase()];\n      if (!link) {\n        const text = cap[0].charAt(0);\n        return {\n          type: 'text',\n          raw: text,\n          text\n        };\n      }\n      return outputLink(cap, link, cap[0], this.lexer);\n    }\n  }\n\n  emStrong(src, maskedSrc, prevChar = '') {\n    let match = this.rules.inline.emStrong.lDelim.exec(src);\n    if (!match) return;\n\n    // _ can't be between two alphanumerics. \\p{L}\\p{N} includes non-english alphabet/numbers as well\n    if (match[3] && prevChar.match(/[\\p{L}\\p{N}]/u)) return;\n\n    const nextChar = match[1] || match[2] || '';\n\n    if (!nextChar || (nextChar && (prevChar === '' || this.rules.inline.punctuation.exec(prevChar)))) {\n      const lLength = match[0].length - 1;\n      let rDelim, rLength, delimTotal = lLength, midDelimTotal = 0;\n\n      const endReg = match[0][0] === '*' ? this.rules.inline.emStrong.rDelimAst : this.rules.inline.emStrong.rDelimUnd;\n      endReg.lastIndex = 0;\n\n      // Clip maskedSrc to same section of string as src (move to lexer?)\n      maskedSrc = maskedSrc.slice(-1 * src.length + lLength);\n\n      while ((match = endReg.exec(maskedSrc)) != null) {\n        rDelim = match[1] || match[2] || match[3] || match[4] || match[5] || match[6];\n\n        if (!rDelim) continue; // skip single * in __abc*abc__\n\n        rLength = rDelim.length;\n\n        if (match[3] || match[4]) { // found another Left Delim\n          delimTotal += rLength;\n          continue;\n        } else if (match[5] || match[6]) { // either Left or Right Delim\n          if (lLength % 3 && !((lLength + rLength) % 3)) {\n            midDelimTotal += rLength;\n            continue; // CommonMark Emphasis Rules 9-10\n          }\n        }\n\n        delimTotal -= rLength;\n\n        if (delimTotal > 0) continue; // Haven't found enough closing delimiters\n\n        // Remove extra characters. *a*** -> *a*\n        rLength = Math.min(rLength, rLength + delimTotal + midDelimTotal);\n\n        const raw = src.slice(0, lLength + match.index + (match[0].length - rDelim.length) + rLength);\n\n        // Create `em` if smallest delimiter has odd char count. *a***\n        if (Math.min(lLength, rLength) % 2) {\n          const text = raw.slice(1, -1);\n          return {\n            type: 'em',\n            raw,\n            text,\n            tokens: this.lexer.inlineTokens(text)\n          };\n        }\n\n        // Create 'strong' if smallest delimiter has even char count. **a***\n        const text = raw.slice(2, -2);\n        return {\n          type: 'strong',\n          raw,\n          text,\n          tokens: this.lexer.inlineTokens(text)\n        };\n      }\n    }\n  }\n\n  codespan(src) {\n    const cap = this.rules.inline.code.exec(src);\n    if (cap) {\n      let text = cap[2].replace(/\\n/g, ' ');\n      const hasNonSpaceChars = /[^ ]/.test(text);\n      const hasSpaceCharsOnBothEnds = /^ /.test(text) && / $/.test(text);\n      if (hasNonSpaceChars && hasSpaceCharsOnBothEnds) {\n        text = text.substring(1, text.length - 1);\n      }\n      text = escape(text, true);\n      return {\n        type: 'codespan',\n        raw: cap[0],\n        text\n      };\n    }\n  }\n\n  br(src) {\n    const cap = this.rules.inline.br.exec(src);\n    if (cap) {\n      return {\n        type: 'br',\n        raw: cap[0]\n      };\n    }\n  }\n\n  del(src) {\n    const cap = this.rules.inline.del.exec(src);\n    if (cap) {\n      return {\n        type: 'del',\n        raw: cap[0],\n        text: cap[2],\n        tokens: this.lexer.inlineTokens(cap[2])\n      };\n    }\n  }\n\n  autolink(src, mangle) {\n    const cap = this.rules.inline.autolink.exec(src);\n    if (cap) {\n      let text, href;\n      if (cap[2] === '@') {\n        text = escape(this.options.mangle ? mangle(cap[1]) : cap[1]);\n        href = 'mailto:' + text;\n      } else {\n        text = escape(cap[1]);\n        href = text;\n      }\n\n      return {\n        type: 'link',\n        raw: cap[0],\n        text,\n        href,\n        tokens: [\n          {\n            type: 'text',\n            raw: text,\n            text\n          }\n        ]\n      };\n    }\n  }\n\n  url(src, mangle) {\n    let cap;\n    if (cap = this.rules.inline.url.exec(src)) {\n      let text, href;\n      if (cap[2] === '@') {\n        text = escape(this.options.mangle ? mangle(cap[0]) : cap[0]);\n        href = 'mailto:' + text;\n      } else {\n        // do extended autolink path validation\n        let prevCapZero;\n        do {\n          prevCapZero = cap[0];\n          cap[0] = this.rules.inline._backpedal.exec(cap[0])[0];\n        } while (prevCapZero !== cap[0]);\n        text = escape(cap[0]);\n        if (cap[1] === 'www.') {\n          href = 'http://' + cap[0];\n        } else {\n          href = cap[0];\n        }\n      }\n      return {\n        type: 'link',\n        raw: cap[0],\n        text,\n        href,\n        tokens: [\n          {\n            type: 'text',\n            raw: text,\n            text\n          }\n        ]\n      };\n    }\n  }\n\n  inlineText(src, smartypants) {\n    const cap = this.rules.inline.text.exec(src);\n    if (cap) {\n      let text;\n      if (this.lexer.state.inRawBlock) {\n        text = this.options.sanitize ? (this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0])) : cap[0];\n      } else {\n        text = escape(this.options.smartypants ? smartypants(cap[0]) : cap[0]);\n      }\n      return {\n        type: 'text',\n        raw: cap[0],\n        text\n      };\n    }\n  }\n}\n\n/**\n * Block-Level Grammar\n */\nconst block = {\n  newline: /^(?: *(?:\\n|$))+/,\n  code: /^( {4}[^\\n]+(?:\\n(?: *(?:\\n|$))*)?)+/,\n  fences: /^ {0,3}(`{3,}(?=[^`\\n]*(?:\\n|$))|~{3,})([^\\n]*)(?:\\n|$)(?:|([\\s\\S]*?)(?:\\n|$))(?: {0,3}\\1[~`]* *(?=\\n|$)|$)/,\n  hr: /^ {0,3}((?:-[\\t ]*){3,}|(?:_[ \\t]*){3,}|(?:\\*[ \\t]*){3,})(?:\\n+|$)/,\n  heading: /^ {0,3}(#{1,6})(?=\\s|$)(.*)(?:\\n+|$)/,\n  blockquote: /^( {0,3}> ?(paragraph|[^\\n]*)(?:\\n|$))+/,\n  list: /^( {0,3}bull)([ \\t][^\\n]+?)?(?:\\n|$)/,\n  html: '^ {0,3}(?:' // optional indentation\n    + '<(script|pre|style|textarea)[\\\\s>][\\\\s\\\\S]*?(?:</\\\\1>[^\\\\n]*\\\\n+|$)' // (1)\n    + '|comment[^\\\\n]*(\\\\n+|$)' // (2)\n    + '|<\\\\?[\\\\s\\\\S]*?(?:\\\\?>\\\\n*|$)' // (3)\n    + '|<![A-Z][\\\\s\\\\S]*?(?:>\\\\n*|$)' // (4)\n    + '|<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?(?:\\\\]\\\\]>\\\\n*|$)' // (5)\n    + '|</?(tag)(?: +|\\\\n|/?>)[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (6)\n    + '|<(?!script|pre|style|textarea)([a-z][\\\\w-]*)(?:attribute)*? */?>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (7) open tag\n    + '|</(?!script|pre|style|textarea)[a-z][\\\\w-]*\\\\s*>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (7) closing tag\n    + ')',\n  def: /^ {0,3}\\[(label)\\]: *(?:\\n *)?([^<\\s][^\\s]*|<.*?>)(?:(?: +(?:\\n *)?| *\\n *)(title))? *(?:\\n+|$)/,\n  table: noopTest,\n  lheading: /^((?:.|\\n(?!\\n))+?)\\n {0,3}(=+|-+) *(?:\\n+|$)/,\n  // regex template, placeholders will be replaced according to different paragraph\n  // interruption rules of commonmark and the original markdown spec:\n  _paragraph: /^([^\\n]+(?:\\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\\n)[^\\n]+)*)/,\n  text: /^[^\\n]+/\n};\n\nblock._label = /(?!\\s*\\])(?:\\\\.|[^\\[\\]\\\\])+/;\nblock._title = /(?:\"(?:\\\\\"?|[^\"\\\\])*\"|'[^'\\n]*(?:\\n[^'\\n]+)*\\n?'|\\([^()]*\\))/;\nblock.def = edit(block.def)\n  .replace('label', block._label)\n  .replace('title', block._title)\n  .getRegex();\n\nblock.bullet = /(?:[*+-]|\\d{1,9}[.)])/;\nblock.listItemStart = edit(/^( *)(bull) */)\n  .replace('bull', block.bullet)\n  .getRegex();\n\nblock.list = edit(block.list)\n  .replace(/bull/g, block.bullet)\n  .replace('hr', '\\\\n+(?=\\\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$))')\n  .replace('def', '\\\\n+(?=' + block.def.source + ')')\n  .getRegex();\n\nblock._tag = 'address|article|aside|base|basefont|blockquote|body|caption'\n  + '|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption'\n  + '|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe'\n  + '|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option'\n  + '|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr'\n  + '|track|ul';\nblock._comment = /<!--(?!-?>)[\\s\\S]*?(?:-->|$)/;\nblock.html = edit(block.html, 'i')\n  .replace('comment', block._comment)\n  .replace('tag', block._tag)\n  .replace('attribute', / +[a-zA-Z:_][\\w.:-]*(?: *= *\"[^\"\\n]*\"| *= *'[^'\\n]*'| *= *[^\\s\"'=<>`]+)?/)\n  .getRegex();\n\nblock.paragraph = edit(block._paragraph)\n  .replace('hr', block.hr)\n  .replace('heading', ' {0,3}#{1,6} ')\n  .replace('|lheading', '') // setex headings don't interrupt commonmark paragraphs\n  .replace('|table', '')\n  .replace('blockquote', ' {0,3}>')\n  .replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n')\n  .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)')\n  .replace('tag', block._tag) // pars can be interrupted by type (6) html blocks\n  .getRegex();\n\nblock.blockquote = edit(block.blockquote)\n  .replace('paragraph', block.paragraph)\n  .getRegex();\n\n/**\n * Normal Block Grammar\n */\n\nblock.normal = { ...block };\n\n/**\n * GFM Block Grammar\n */\n\nblock.gfm = {\n  ...block.normal,\n  table: '^ *([^\\\\n ].*\\\\|.*)\\\\n' // Header\n    + ' {0,3}(?:\\\\| *)?(:?-+:? *(?:\\\\| *:?-+:? *)*)(?:\\\\| *)?' // Align\n    + '(?:\\\\n((?:(?! *\\\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\\\n|$))*)\\\\n*|$)' // Cells\n};\n\nblock.gfm.table = edit(block.gfm.table)\n  .replace('hr', block.hr)\n  .replace('heading', ' {0,3}#{1,6} ')\n  .replace('blockquote', ' {0,3}>')\n  .replace('code', ' {4}[^\\\\n]')\n  .replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n')\n  .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)')\n  .replace('tag', block._tag) // tables can be interrupted by type (6) html blocks\n  .getRegex();\n\nblock.gfm.paragraph = edit(block._paragraph)\n  .replace('hr', block.hr)\n  .replace('heading', ' {0,3}#{1,6} ')\n  .replace('|lheading', '') // setex headings don't interrupt commonmark paragraphs\n  .replace('table', block.gfm.table) // interrupt paragraphs with table\n  .replace('blockquote', ' {0,3}>')\n  .replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n')\n  .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)')\n  .replace('tag', block._tag) // pars can be interrupted by type (6) html blocks\n  .getRegex();\n/**\n * Pedantic grammar (original John Gruber's loose markdown specification)\n */\n\nblock.pedantic = {\n  ...block.normal,\n  html: edit(\n    '^ *(?:comment *(?:\\\\n|\\\\s*$)'\n    + '|<(tag)[\\\\s\\\\S]+?</\\\\1> *(?:\\\\n{2,}|\\\\s*$)' // closed tag\n    + '|<tag(?:\"[^\"]*\"|\\'[^\\']*\\'|\\\\s[^\\'\"/>\\\\s]*)*?/?> *(?:\\\\n{2,}|\\\\s*$))')\n    .replace('comment', block._comment)\n    .replace(/tag/g, '(?!(?:'\n      + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub'\n      + '|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)'\n      + '\\\\b)\\\\w+(?!:|[^\\\\w\\\\s@]*@)\\\\b')\n    .getRegex(),\n  def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +([\"(][^\\n]+[\")]))? *(?:\\n+|$)/,\n  heading: /^(#{1,6})(.*)(?:\\n+|$)/,\n  fences: noopTest, // fences not supported\n  lheading: /^(.+?)\\n {0,3}(=+|-+) *(?:\\n+|$)/,\n  paragraph: edit(block.normal._paragraph)\n    .replace('hr', block.hr)\n    .replace('heading', ' *#{1,6} *[^\\n]')\n    .replace('lheading', block.lheading)\n    .replace('blockquote', ' {0,3}>')\n    .replace('|fences', '')\n    .replace('|list', '')\n    .replace('|html', '')\n    .getRegex()\n};\n\n/**\n * Inline-Level Grammar\n */\nconst inline = {\n  escape: /^\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/,\n  autolink: /^<(scheme:[^\\s\\x00-\\x1f<>]*|email)>/,\n  url: noopTest,\n  tag: '^comment'\n    + '|^</[a-zA-Z][\\\\w:-]*\\\\s*>' // self-closing tag\n    + '|^<[a-zA-Z][\\\\w-]*(?:attribute)*?\\\\s*/?>' // open tag\n    + '|^<\\\\?[\\\\s\\\\S]*?\\\\?>' // processing instruction, e.g. <?php ?>\n    + '|^<![a-zA-Z]+\\\\s[\\\\s\\\\S]*?>' // declaration, e.g. <!DOCTYPE html>\n    + '|^<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>', // CDATA section\n  link: /^!?\\[(label)\\]\\(\\s*(href)(?:\\s+(title))?\\s*\\)/,\n  reflink: /^!?\\[(label)\\]\\[(ref)\\]/,\n  nolink: /^!?\\[(ref)\\](?:\\[\\])?/,\n  reflinkSearch: 'reflink|nolink(?!\\\\()',\n  emStrong: {\n    lDelim: /^(?:\\*+(?:([punct_])|[^\\s*]))|^_+(?:([punct*])|([^\\s_]))/,\n    //        (1) and (2) can only be a Right Delimiter. (3) and (4) can only be Left.  (5) and (6) can be either Left or Right.\n    //          () Skip orphan inside strong                                      () Consume to delim     (1) #***                (2) a***#, a***                             (3) #***a, ***a                 (4) ***#              (5) #***#                 (6) a***a\n    rDelimAst: /^(?:[^_*\\\\]|\\\\.)*?\\_\\_(?:[^_*\\\\]|\\\\.)*?\\*(?:[^_*\\\\]|\\\\.)*?(?=\\_\\_)|(?:[^*\\\\]|\\\\.)+(?=[^*])|[punct_](\\*+)(?=[\\s]|$)|(?:[^punct*_\\s\\\\]|\\\\.)(\\*+)(?=[punct_\\s]|$)|[punct_\\s](\\*+)(?=[^punct*_\\s])|[\\s](\\*+)(?=[punct_])|[punct_](\\*+)(?=[punct_])|(?:[^punct*_\\s\\\\]|\\\\.)(\\*+)(?=[^punct*_\\s])/,\n    rDelimUnd: /^(?:[^_*\\\\]|\\\\.)*?\\*\\*(?:[^_*\\\\]|\\\\.)*?\\_(?:[^_*\\\\]|\\\\.)*?(?=\\*\\*)|(?:[^_\\\\]|\\\\.)+(?=[^_])|[punct*](\\_+)(?=[\\s]|$)|(?:[^punct*_\\s\\\\]|\\\\.)(\\_+)(?=[punct*\\s]|$)|[punct*\\s](\\_+)(?=[^punct*_\\s])|[\\s](\\_+)(?=[punct*])|[punct*](\\_+)(?=[punct*])/ // ^- Not allowed for _\n  },\n  code: /^(`+)([^`]|[^`][\\s\\S]*?[^`])\\1(?!`)/,\n  br: /^( {2,}|\\\\)\\n(?!\\s*$)/,\n  del: noopTest,\n  text: /^(`+|[^`])(?:(?= {2,}\\n)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*_]|\\b_|$)|[^ ](?= {2,}\\n)))/,\n  punctuation: /^([\\spunctuation])/\n};\n\n// list of punctuation marks from CommonMark spec\n// without * and _ to handle the different emphasis markers * and _\ninline._punctuation = '!\"#$%&\\'()+\\\\-.,/:;<=>?@\\\\[\\\\]`^{|}~';\ninline.punctuation = edit(inline.punctuation).replace(/punctuation/g, inline._punctuation).getRegex();\n\n// sequences em should skip over [title](link), `code`, <html>\ninline.blockSkip = /\\[[^\\]]*?\\]\\([^\\)]*?\\)|`[^`]*?`|<[^>]*?>/g;\n// lookbehind is not available on Safari as of version 16\n// inline.escapedEmSt = /(?<=(?:^|[^\\\\)(?:\\\\[^])*)\\\\[*_]/g;\ninline.escapedEmSt = /(?:^|[^\\\\])(?:\\\\\\\\)*\\\\[*_]/g;\n\ninline._comment = edit(block._comment).replace('(?:-->|$)', '-->').getRegex();\n\ninline.emStrong.lDelim = edit(inline.emStrong.lDelim)\n  .replace(/punct/g, inline._punctuation)\n  .getRegex();\n\ninline.emStrong.rDelimAst = edit(inline.emStrong.rDelimAst, 'g')\n  .replace(/punct/g, inline._punctuation)\n  .getRegex();\n\ninline.emStrong.rDelimUnd = edit(inline.emStrong.rDelimUnd, 'g')\n  .replace(/punct/g, inline._punctuation)\n  .getRegex();\n\ninline._escapes = /\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/g;\n\ninline._scheme = /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;\ninline._email = /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;\ninline.autolink = edit(inline.autolink)\n  .replace('scheme', inline._scheme)\n  .replace('email', inline._email)\n  .getRegex();\n\ninline._attribute = /\\s+[a-zA-Z:_][\\w.:-]*(?:\\s*=\\s*\"[^\"]*\"|\\s*=\\s*'[^']*'|\\s*=\\s*[^\\s\"'=<>`]+)?/;\n\ninline.tag = edit(inline.tag)\n  .replace('comment', inline._comment)\n  .replace('attribute', inline._attribute)\n  .getRegex();\n\ninline._label = /(?:\\[(?:\\\\.|[^\\[\\]\\\\])*\\]|\\\\.|`[^`]*`|[^\\[\\]\\\\`])*?/;\ninline._href = /<(?:\\\\.|[^\\n<>\\\\])+>|[^\\s\\x00-\\x1f]*/;\ninline._title = /\"(?:\\\\\"?|[^\"\\\\])*\"|'(?:\\\\'?|[^'\\\\])*'|\\((?:\\\\\\)?|[^)\\\\])*\\)/;\n\ninline.link = edit(inline.link)\n  .replace('label', inline._label)\n  .replace('href', inline._href)\n  .replace('title', inline._title)\n  .getRegex();\n\ninline.reflink = edit(inline.reflink)\n  .replace('label', inline._label)\n  .replace('ref', block._label)\n  .getRegex();\n\ninline.nolink = edit(inline.nolink)\n  .replace('ref', block._label)\n  .getRegex();\n\ninline.reflinkSearch = edit(inline.reflinkSearch, 'g')\n  .replace('reflink', inline.reflink)\n  .replace('nolink', inline.nolink)\n  .getRegex();\n\n/**\n * Normal Inline Grammar\n */\n\ninline.normal = { ...inline };\n\n/**\n * Pedantic Inline Grammar\n */\n\ninline.pedantic = {\n  ...inline.normal,\n  strong: {\n    start: /^__|\\*\\*/,\n    middle: /^__(?=\\S)([\\s\\S]*?\\S)__(?!_)|^\\*\\*(?=\\S)([\\s\\S]*?\\S)\\*\\*(?!\\*)/,\n    endAst: /\\*\\*(?!\\*)/g,\n    endUnd: /__(?!_)/g\n  },\n  em: {\n    start: /^_|\\*/,\n    middle: /^()\\*(?=\\S)([\\s\\S]*?\\S)\\*(?!\\*)|^_(?=\\S)([\\s\\S]*?\\S)_(?!_)/,\n    endAst: /\\*(?!\\*)/g,\n    endUnd: /_(?!_)/g\n  },\n  link: edit(/^!?\\[(label)\\]\\((.*?)\\)/)\n    .replace('label', inline._label)\n    .getRegex(),\n  reflink: edit(/^!?\\[(label)\\]\\s*\\[([^\\]]*)\\]/)\n    .replace('label', inline._label)\n    .getRegex()\n};\n\n/**\n * GFM Inline Grammar\n */\n\ninline.gfm = {\n  ...inline.normal,\n  escape: edit(inline.escape).replace('])', '~|])').getRegex(),\n  _extended_email: /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,\n  url: /^((?:ftp|https?):\\/\\/|www\\.)(?:[a-zA-Z0-9\\-]+\\.?)+[^\\s<]*|^email/,\n  _backpedal: /(?:[^?!.,:;*_'\"~()&]+|\\([^)]*\\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'\"~)]+(?!$))+/,\n  del: /^(~~?)(?=[^\\s~])([\\s\\S]*?[^\\s~])\\1(?=[^~]|$)/,\n  text: /^([`~]+|[^`~])(?:(?= {2,}\\n)|(?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*~_]|\\b_|https?:\\/\\/|ftp:\\/\\/|www\\.|$)|[^ ](?= {2,}\\n)|[^a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-](?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)))/\n};\n\ninline.gfm.url = edit(inline.gfm.url, 'i')\n  .replace('email', inline.gfm._extended_email)\n  .getRegex();\n/**\n * GFM + Line Breaks Inline Grammar\n */\n\ninline.breaks = {\n  ...inline.gfm,\n  br: edit(inline.br).replace('{2,}', '*').getRegex(),\n  text: edit(inline.gfm.text)\n    .replace('\\\\b_', '\\\\b_| {2,}\\\\n')\n    .replace(/\\{2,\\}/g, '*')\n    .getRegex()\n};\n\n/**\n * smartypants text replacement\n * @param {string} text\n */\nfunction smartypants(text) {\n  return text\n    // em-dashes\n    .replace(/---/g, '\\u2014')\n    // en-dashes\n    .replace(/--/g, '\\u2013')\n    // opening singles\n    .replace(/(^|[-\\u2014/(\\[{\"\\s])'/g, '$1\\u2018')\n    // closing singles & apostrophes\n    .replace(/'/g, '\\u2019')\n    // opening doubles\n    .replace(/(^|[-\\u2014/(\\[{\\u2018\\s])\"/g, '$1\\u201c')\n    // closing doubles\n    .replace(/\"/g, '\\u201d')\n    // ellipses\n    .replace(/\\.{3}/g, '\\u2026');\n}\n\n/**\n * mangle email addresses\n * @param {string} text\n */\nfunction mangle(text) {\n  let out = '',\n    i,\n    ch;\n\n  const l = text.length;\n  for (i = 0; i < l; i++) {\n    ch = text.charCodeAt(i);\n    if (Math.random() > 0.5) {\n      ch = 'x' + ch.toString(16);\n    }\n    out += '&#' + ch + ';';\n  }\n\n  return out;\n}\n\n/**\n * Block Lexer\n */\nclass Lexer {\n  constructor(options) {\n    this.tokens = [];\n    this.tokens.links = Object.create(null);\n    this.options = options || defaults;\n    this.options.tokenizer = this.options.tokenizer || new Tokenizer();\n    this.tokenizer = this.options.tokenizer;\n    this.tokenizer.options = this.options;\n    this.tokenizer.lexer = this;\n    this.inlineQueue = [];\n    this.state = {\n      inLink: false,\n      inRawBlock: false,\n      top: true\n    };\n\n    const rules = {\n      block: block.normal,\n      inline: inline.normal\n    };\n\n    if (this.options.pedantic) {\n      rules.block = block.pedantic;\n      rules.inline = inline.pedantic;\n    } else if (this.options.gfm) {\n      rules.block = block.gfm;\n      if (this.options.breaks) {\n        rules.inline = inline.breaks;\n      } else {\n        rules.inline = inline.gfm;\n      }\n    }\n    this.tokenizer.rules = rules;\n  }\n\n  /**\n   * Expose Rules\n   */\n  static get rules() {\n    return {\n      block,\n      inline\n    };\n  }\n\n  /**\n   * Static Lex Method\n   */\n  static lex(src, options) {\n    const lexer = new Lexer(options);\n    return lexer.lex(src);\n  }\n\n  /**\n   * Static Lex Inline Method\n   */\n  static lexInline(src, options) {\n    const lexer = new Lexer(options);\n    return lexer.inlineTokens(src);\n  }\n\n  /**\n   * Preprocessing\n   */\n  lex(src) {\n    src = src\n      .replace(/\\r\\n|\\r/g, '\\n');\n\n    this.blockTokens(src, this.tokens);\n\n    let next;\n    while (next = this.inlineQueue.shift()) {\n      this.inlineTokens(next.src, next.tokens);\n    }\n\n    return this.tokens;\n  }\n\n  /**\n   * Lexing\n   */\n  blockTokens(src, tokens = []) {\n    if (this.options.pedantic) {\n      src = src.replace(/\\t/g, '    ').replace(/^ +$/gm, '');\n    } else {\n      src = src.replace(/^( *)(\\t+)/gm, (_, leading, tabs) => {\n        return leading + '    '.repeat(tabs.length);\n      });\n    }\n\n    let token, lastToken, cutSrc, lastParagraphClipped;\n\n    while (src) {\n      if (this.options.extensions\n        && this.options.extensions.block\n        && this.options.extensions.block.some((extTokenizer) => {\n          if (token = extTokenizer.call({ lexer: this }, src, tokens)) {\n            src = src.substring(token.raw.length);\n            tokens.push(token);\n            return true;\n          }\n          return false;\n        })) {\n        continue;\n      }\n\n      // newline\n      if (token = this.tokenizer.space(src)) {\n        src = src.substring(token.raw.length);\n        if (token.raw.length === 1 && tokens.length > 0) {\n          // if there's a single \\n as a spacer, it's terminating the last line,\n          // so move it there so that we don't get unecessary paragraph tags\n          tokens[tokens.length - 1].raw += '\\n';\n        } else {\n          tokens.push(token);\n        }\n        continue;\n      }\n\n      // code\n      if (token = this.tokenizer.code(src)) {\n        src = src.substring(token.raw.length);\n        lastToken = tokens[tokens.length - 1];\n        // An indented code block cannot interrupt a paragraph.\n        if (lastToken && (lastToken.type === 'paragraph' || lastToken.type === 'text')) {\n          lastToken.raw += '\\n' + token.raw;\n          lastToken.text += '\\n' + token.text;\n          this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\n        } else {\n          tokens.push(token);\n        }\n        continue;\n      }\n\n      // fences\n      if (token = this.tokenizer.fences(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // heading\n      if (token = this.tokenizer.heading(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // hr\n      if (token = this.tokenizer.hr(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // blockquote\n      if (token = this.tokenizer.blockquote(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // list\n      if (token = this.tokenizer.list(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // html\n      if (token = this.tokenizer.html(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // def\n      if (token = this.tokenizer.def(src)) {\n        src = src.substring(token.raw.length);\n        lastToken = tokens[tokens.length - 1];\n        if (lastToken && (lastToken.type === 'paragraph' || lastToken.type === 'text')) {\n          lastToken.raw += '\\n' + token.raw;\n          lastToken.text += '\\n' + token.raw;\n          this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\n        } else if (!this.tokens.links[token.tag]) {\n          this.tokens.links[token.tag] = {\n            href: token.href,\n            title: token.title\n          };\n        }\n        continue;\n      }\n\n      // table (gfm)\n      if (token = this.tokenizer.table(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // lheading\n      if (token = this.tokenizer.lheading(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // top-level paragraph\n      // prevent paragraph consuming extensions by clipping 'src' to extension start\n      cutSrc = src;\n      if (this.options.extensions && this.options.extensions.startBlock) {\n        let startIndex = Infinity;\n        const tempSrc = src.slice(1);\n        let tempStart;\n        this.options.extensions.startBlock.forEach(function(getStartIndex) {\n          tempStart = getStartIndex.call({ lexer: this }, tempSrc);\n          if (typeof tempStart === 'number' && tempStart >= 0) { startIndex = Math.min(startIndex, tempStart); }\n        });\n        if (startIndex < Infinity && startIndex >= 0) {\n          cutSrc = src.substring(0, startIndex + 1);\n        }\n      }\n      if (this.state.top && (token = this.tokenizer.paragraph(cutSrc))) {\n        lastToken = tokens[tokens.length - 1];\n        if (lastParagraphClipped && lastToken.type === 'paragraph') {\n          lastToken.raw += '\\n' + token.raw;\n          lastToken.text += '\\n' + token.text;\n          this.inlineQueue.pop();\n          this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\n        } else {\n          tokens.push(token);\n        }\n        lastParagraphClipped = (cutSrc.length !== src.length);\n        src = src.substring(token.raw.length);\n        continue;\n      }\n\n      // text\n      if (token = this.tokenizer.text(src)) {\n        src = src.substring(token.raw.length);\n        lastToken = tokens[tokens.length - 1];\n        if (lastToken && lastToken.type === 'text') {\n          lastToken.raw += '\\n' + token.raw;\n          lastToken.text += '\\n' + token.text;\n          this.inlineQueue.pop();\n          this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\n        } else {\n          tokens.push(token);\n        }\n        continue;\n      }\n\n      if (src) {\n        const errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\n        if (this.options.silent) {\n          console.error(errMsg);\n          break;\n        } else {\n          throw new Error(errMsg);\n        }\n      }\n    }\n\n    this.state.top = true;\n    return tokens;\n  }\n\n  inline(src, tokens = []) {\n    this.inlineQueue.push({ src, tokens });\n    return tokens;\n  }\n\n  /**\n   * Lexing/Compiling\n   */\n  inlineTokens(src, tokens = []) {\n    let token, lastToken, cutSrc;\n\n    // String with links masked to avoid interference with em and strong\n    let maskedSrc = src;\n    let match;\n    let keepPrevChar, prevChar;\n\n    // Mask out reflinks\n    if (this.tokens.links) {\n      const links = Object.keys(this.tokens.links);\n      if (links.length > 0) {\n        while ((match = this.tokenizer.rules.inline.reflinkSearch.exec(maskedSrc)) != null) {\n          if (links.includes(match[0].slice(match[0].lastIndexOf('[') + 1, -1))) {\n            maskedSrc = maskedSrc.slice(0, match.index) + '[' + repeatString('a', match[0].length - 2) + ']' + maskedSrc.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex);\n          }\n        }\n      }\n    }\n    // Mask out other blocks\n    while ((match = this.tokenizer.rules.inline.blockSkip.exec(maskedSrc)) != null) {\n      maskedSrc = maskedSrc.slice(0, match.index) + '[' + repeatString('a', match[0].length - 2) + ']' + maskedSrc.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);\n    }\n\n    // Mask out escaped em & strong delimiters\n    while ((match = this.tokenizer.rules.inline.escapedEmSt.exec(maskedSrc)) != null) {\n      maskedSrc = maskedSrc.slice(0, match.index + match[0].length - 2) + '++' + maskedSrc.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);\n      this.tokenizer.rules.inline.escapedEmSt.lastIndex--;\n    }\n\n    while (src) {\n      if (!keepPrevChar) {\n        prevChar = '';\n      }\n      keepPrevChar = false;\n\n      // extensions\n      if (this.options.extensions\n        && this.options.extensions.inline\n        && this.options.extensions.inline.some((extTokenizer) => {\n          if (token = extTokenizer.call({ lexer: this }, src, tokens)) {\n            src = src.substring(token.raw.length);\n            tokens.push(token);\n            return true;\n          }\n          return false;\n        })) {\n        continue;\n      }\n\n      // escape\n      if (token = this.tokenizer.escape(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // tag\n      if (token = this.tokenizer.tag(src)) {\n        src = src.substring(token.raw.length);\n        lastToken = tokens[tokens.length - 1];\n        if (lastToken && token.type === 'text' && lastToken.type === 'text') {\n          lastToken.raw += token.raw;\n          lastToken.text += token.text;\n        } else {\n          tokens.push(token);\n        }\n        continue;\n      }\n\n      // link\n      if (token = this.tokenizer.link(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // reflink, nolink\n      if (token = this.tokenizer.reflink(src, this.tokens.links)) {\n        src = src.substring(token.raw.length);\n        lastToken = tokens[tokens.length - 1];\n        if (lastToken && token.type === 'text' && lastToken.type === 'text') {\n          lastToken.raw += token.raw;\n          lastToken.text += token.text;\n        } else {\n          tokens.push(token);\n        }\n        continue;\n      }\n\n      // em & strong\n      if (token = this.tokenizer.emStrong(src, maskedSrc, prevChar)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // code\n      if (token = this.tokenizer.codespan(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // br\n      if (token = this.tokenizer.br(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // del (gfm)\n      if (token = this.tokenizer.del(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // autolink\n      if (token = this.tokenizer.autolink(src, mangle)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // url (gfm)\n      if (!this.state.inLink && (token = this.tokenizer.url(src, mangle))) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // text\n      // prevent inlineText consuming extensions by clipping 'src' to extension start\n      cutSrc = src;\n      if (this.options.extensions && this.options.extensions.startInline) {\n        let startIndex = Infinity;\n        const tempSrc = src.slice(1);\n        let tempStart;\n        this.options.extensions.startInline.forEach(function(getStartIndex) {\n          tempStart = getStartIndex.call({ lexer: this }, tempSrc);\n          if (typeof tempStart === 'number' && tempStart >= 0) { startIndex = Math.min(startIndex, tempStart); }\n        });\n        if (startIndex < Infinity && startIndex >= 0) {\n          cutSrc = src.substring(0, startIndex + 1);\n        }\n      }\n      if (token = this.tokenizer.inlineText(cutSrc, smartypants)) {\n        src = src.substring(token.raw.length);\n        if (token.raw.slice(-1) !== '_') { // Track prevChar before string of ____ started\n          prevChar = token.raw.slice(-1);\n        }\n        keepPrevChar = true;\n        lastToken = tokens[tokens.length - 1];\n        if (lastToken && lastToken.type === 'text') {\n          lastToken.raw += token.raw;\n          lastToken.text += token.text;\n        } else {\n          tokens.push(token);\n        }\n        continue;\n      }\n\n      if (src) {\n        const errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\n        if (this.options.silent) {\n          console.error(errMsg);\n          break;\n        } else {\n          throw new Error(errMsg);\n        }\n      }\n    }\n\n    return tokens;\n  }\n}\n\n/**\n * Renderer\n */\nclass Renderer {\n  constructor(options) {\n    this.options = options || defaults;\n  }\n\n  code(code, infostring, escaped) {\n    const lang = (infostring || '').match(/\\S*/)[0];\n    if (this.options.highlight) {\n      const out = this.options.highlight(code, lang);\n      if (out != null && out !== code) {\n        escaped = true;\n        code = out;\n      }\n    }\n\n    code = code.replace(/\\n$/, '') + '\\n';\n\n    if (!lang) {\n      return '<pre><code>'\n        + (escaped ? code : escape(code, true))\n        + '</code></pre>\\n';\n    }\n\n    return '<pre><code class=\"'\n      + this.options.langPrefix\n      + escape(lang)\n      + '\">'\n      + (escaped ? code : escape(code, true))\n      + '</code></pre>\\n';\n  }\n\n  /**\n   * @param {string} quote\n   */\n  blockquote(quote) {\n    return `<blockquote>\\n${quote}</blockquote>\\n`;\n  }\n\n  html(html) {\n    return html;\n  }\n\n  /**\n   * @param {string} text\n   * @param {string} level\n   * @param {string} raw\n   * @param {any} slugger\n   */\n  heading(text, level, raw, slugger) {\n    if (this.options.headerIds) {\n      const id = this.options.headerPrefix + slugger.slug(raw);\n      return `<h${level} id=\"${id}\">${text}</h${level}>\\n`;\n    }\n\n    // ignore IDs\n    return `<h${level}>${text}</h${level}>\\n`;\n  }\n\n  hr() {\n    return this.options.xhtml ? '<hr/>\\n' : '<hr>\\n';\n  }\n\n  list(body, ordered, start) {\n    const type = ordered ? 'ol' : 'ul',\n      startatt = (ordered && start !== 1) ? (' start=\"' + start + '\"') : '';\n    return '<' + type + startatt + '>\\n' + body + '</' + type + '>\\n';\n  }\n\n  /**\n   * @param {string} text\n   */\n  listitem(text) {\n    return `<li>${text}</li>\\n`;\n  }\n\n  checkbox(checked) {\n    return '<input '\n      + (checked ? 'checked=\"\" ' : '')\n      + 'disabled=\"\" type=\"checkbox\"'\n      + (this.options.xhtml ? ' /' : '')\n      + '> ';\n  }\n\n  /**\n   * @param {string} text\n   */\n  paragraph(text) {\n    return `<p>${text}</p>\\n`;\n  }\n\n  /**\n   * @param {string} header\n   * @param {string} body\n   */\n  table(header, body) {\n    if (body) body = `<tbody>${body}</tbody>`;\n\n    return '<table>\\n'\n      + '<thead>\\n'\n      + header\n      + '</thead>\\n'\n      + body\n      + '</table>\\n';\n  }\n\n  /**\n   * @param {string} content\n   */\n  tablerow(content) {\n    return `<tr>\\n${content}</tr>\\n`;\n  }\n\n  tablecell(content, flags) {\n    const type = flags.header ? 'th' : 'td';\n    const tag = flags.align\n      ? `<${type} align=\"${flags.align}\">`\n      : `<${type}>`;\n    return tag + content + `</${type}>\\n`;\n  }\n\n  /**\n   * span level renderer\n   * @param {string} text\n   */\n  strong(text) {\n    return `<strong>${text}</strong>`;\n  }\n\n  /**\n   * @param {string} text\n   */\n  em(text) {\n    return `<em>${text}</em>`;\n  }\n\n  /**\n   * @param {string} text\n   */\n  codespan(text) {\n    return `<code>${text}</code>`;\n  }\n\n  br() {\n    return this.options.xhtml ? '<br/>' : '<br>';\n  }\n\n  /**\n   * @param {string} text\n   */\n  del(text) {\n    return `<del>${text}</del>`;\n  }\n\n  /**\n   * @param {string} href\n   * @param {string} title\n   * @param {string} text\n   */\n  link(href, title, text) {\n    href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);\n    if (href === null) {\n      return text;\n    }\n    let out = '<a href=\"' + href + '\"';\n    if (title) {\n      out += ' title=\"' + title + '\"';\n    }\n    out += '>' + text + '</a>';\n    return out;\n  }\n\n  /**\n   * @param {string} href\n   * @param {string} title\n   * @param {string} text\n   */\n  image(href, title, text) {\n    href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);\n    if (href === null) {\n      return text;\n    }\n\n    let out = `<img src=\"${href}\" alt=\"${text}\"`;\n    if (title) {\n      out += ` title=\"${title}\"`;\n    }\n    out += this.options.xhtml ? '/>' : '>';\n    return out;\n  }\n\n  text(text) {\n    return text;\n  }\n}\n\n/**\n * TextRenderer\n * returns only the textual part of the token\n */\nclass TextRenderer {\n  // no need for block level renderers\n  strong(text) {\n    return text;\n  }\n\n  em(text) {\n    return text;\n  }\n\n  codespan(text) {\n    return text;\n  }\n\n  del(text) {\n    return text;\n  }\n\n  html(text) {\n    return text;\n  }\n\n  text(text) {\n    return text;\n  }\n\n  link(href, title, text) {\n    return '' + text;\n  }\n\n  image(href, title, text) {\n    return '' + text;\n  }\n\n  br() {\n    return '';\n  }\n}\n\n/**\n * Slugger generates header id\n */\nclass Slugger {\n  constructor() {\n    this.seen = {};\n  }\n\n  /**\n   * @param {string} value\n   */\n  serialize(value) {\n    return value\n      .toLowerCase()\n      .trim()\n      // remove html tags\n      .replace(/<[!\\/a-z].*?>/ig, '')\n      // remove unwanted chars\n      .replace(/[\\u2000-\\u206F\\u2E00-\\u2E7F\\\\'!\"#$%&()*+,./:;<=>?@[\\]^`{|}~]/g, '')\n      .replace(/\\s/g, '-');\n  }\n\n  /**\n   * Finds the next safe (unique) slug to use\n   * @param {string} originalSlug\n   * @param {boolean} isDryRun\n   */\n  getNextSafeSlug(originalSlug, isDryRun) {\n    let slug = originalSlug;\n    let occurenceAccumulator = 0;\n    if (this.seen.hasOwnProperty(slug)) {\n      occurenceAccumulator = this.seen[originalSlug];\n      do {\n        occurenceAccumulator++;\n        slug = originalSlug + '-' + occurenceAccumulator;\n      } while (this.seen.hasOwnProperty(slug));\n    }\n    if (!isDryRun) {\n      this.seen[originalSlug] = occurenceAccumulator;\n      this.seen[slug] = 0;\n    }\n    return slug;\n  }\n\n  /**\n   * Convert string to unique id\n   * @param {object} [options]\n   * @param {boolean} [options.dryrun] Generates the next unique slug without\n   * updating the internal accumulator.\n   */\n  slug(value, options = {}) {\n    const slug = this.serialize(value);\n    return this.getNextSafeSlug(slug, options.dryrun);\n  }\n}\n\n/**\n * Parsing & Compiling\n */\nclass Parser {\n  constructor(options) {\n    this.options = options || defaults;\n    this.options.renderer = this.options.renderer || new Renderer();\n    this.renderer = this.options.renderer;\n    this.renderer.options = this.options;\n    this.textRenderer = new TextRenderer();\n    this.slugger = new Slugger();\n  }\n\n  /**\n   * Static Parse Method\n   */\n  static parse(tokens, options) {\n    const parser = new Parser(options);\n    return parser.parse(tokens);\n  }\n\n  /**\n   * Static Parse Inline Method\n   */\n  static parseInline(tokens, options) {\n    const parser = new Parser(options);\n    return parser.parseInline(tokens);\n  }\n\n  /**\n   * Parse Loop\n   */\n  parse(tokens, top = true) {\n    let out = '',\n      i,\n      j,\n      k,\n      l2,\n      l3,\n      row,\n      cell,\n      header,\n      body,\n      token,\n      ordered,\n      start,\n      loose,\n      itemBody,\n      item,\n      checked,\n      task,\n      checkbox,\n      ret;\n\n    const l = tokens.length;\n    for (i = 0; i < l; i++) {\n      token = tokens[i];\n\n      // Run any renderer extensions\n      if (this.options.extensions && this.options.extensions.renderers && this.options.extensions.renderers[token.type]) {\n        ret = this.options.extensions.renderers[token.type].call({ parser: this }, token);\n        if (ret !== false || !['space', 'hr', 'heading', 'code', 'table', 'blockquote', 'list', 'html', 'paragraph', 'text'].includes(token.type)) {\n          out += ret || '';\n          continue;\n        }\n      }\n\n      switch (token.type) {\n        case 'space': {\n          continue;\n        }\n        case 'hr': {\n          out += this.renderer.hr();\n          continue;\n        }\n        case 'heading': {\n          out += this.renderer.heading(\n            this.parseInline(token.tokens),\n            token.depth,\n            unescape(this.parseInline(token.tokens, this.textRenderer)),\n            this.slugger);\n          continue;\n        }\n        case 'code': {\n          out += this.renderer.code(token.text,\n            token.lang,\n            token.escaped);\n          continue;\n        }\n        case 'table': {\n          header = '';\n\n          // header\n          cell = '';\n          l2 = token.header.length;\n          for (j = 0; j < l2; j++) {\n            cell += this.renderer.tablecell(\n              this.parseInline(token.header[j].tokens),\n              { header: true, align: token.align[j] }\n            );\n          }\n          header += this.renderer.tablerow(cell);\n\n          body = '';\n          l2 = token.rows.length;\n          for (j = 0; j < l2; j++) {\n            row = token.rows[j];\n\n            cell = '';\n            l3 = row.length;\n            for (k = 0; k < l3; k++) {\n              cell += this.renderer.tablecell(\n                this.parseInline(row[k].tokens),\n                { header: false, align: token.align[k] }\n              );\n            }\n\n            body += this.renderer.tablerow(cell);\n          }\n          out += this.renderer.table(header, body);\n          continue;\n        }\n        case 'blockquote': {\n          body = this.parse(token.tokens);\n          out += this.renderer.blockquote(body);\n          continue;\n        }\n        case 'list': {\n          ordered = token.ordered;\n          start = token.start;\n          loose = token.loose;\n          l2 = token.items.length;\n\n          body = '';\n          for (j = 0; j < l2; j++) {\n            item = token.items[j];\n            checked = item.checked;\n            task = item.task;\n\n            itemBody = '';\n            if (item.task) {\n              checkbox = this.renderer.checkbox(checked);\n              if (loose) {\n                if (item.tokens.length > 0 && item.tokens[0].type === 'paragraph') {\n                  item.tokens[0].text = checkbox + ' ' + item.tokens[0].text;\n                  if (item.tokens[0].tokens && item.tokens[0].tokens.length > 0 && item.tokens[0].tokens[0].type === 'text') {\n                    item.tokens[0].tokens[0].text = checkbox + ' ' + item.tokens[0].tokens[0].text;\n                  }\n                } else {\n                  item.tokens.unshift({\n                    type: 'text',\n                    text: checkbox\n                  });\n                }\n              } else {\n                itemBody += checkbox;\n              }\n            }\n\n            itemBody += this.parse(item.tokens, loose);\n            body += this.renderer.listitem(itemBody, task, checked);\n          }\n\n          out += this.renderer.list(body, ordered, start);\n          continue;\n        }\n        case 'html': {\n          // TODO parse inline content if parameter markdown=1\n          out += this.renderer.html(token.text);\n          continue;\n        }\n        case 'paragraph': {\n          out += this.renderer.paragraph(this.parseInline(token.tokens));\n          continue;\n        }\n        case 'text': {\n          body = token.tokens ? this.parseInline(token.tokens) : token.text;\n          while (i + 1 < l && tokens[i + 1].type === 'text') {\n            token = tokens[++i];\n            body += '\\n' + (token.tokens ? this.parseInline(token.tokens) : token.text);\n          }\n          out += top ? this.renderer.paragraph(body) : body;\n          continue;\n        }\n\n        default: {\n          const errMsg = 'Token with \"' + token.type + '\" type was not found.';\n          if (this.options.silent) {\n            console.error(errMsg);\n            return;\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n      }\n    }\n\n    return out;\n  }\n\n  /**\n   * Parse Inline Tokens\n   */\n  parseInline(tokens, renderer) {\n    renderer = renderer || this.renderer;\n    let out = '',\n      i,\n      token,\n      ret;\n\n    const l = tokens.length;\n    for (i = 0; i < l; i++) {\n      token = tokens[i];\n\n      // Run any renderer extensions\n      if (this.options.extensions && this.options.extensions.renderers && this.options.extensions.renderers[token.type]) {\n        ret = this.options.extensions.renderers[token.type].call({ parser: this }, token);\n        if (ret !== false || !['escape', 'html', 'link', 'image', 'strong', 'em', 'codespan', 'br', 'del', 'text'].includes(token.type)) {\n          out += ret || '';\n          continue;\n        }\n      }\n\n      switch (token.type) {\n        case 'escape': {\n          out += renderer.text(token.text);\n          break;\n        }\n        case 'html': {\n          out += renderer.html(token.text);\n          break;\n        }\n        case 'link': {\n          out += renderer.link(token.href, token.title, this.parseInline(token.tokens, renderer));\n          break;\n        }\n        case 'image': {\n          out += renderer.image(token.href, token.title, token.text);\n          break;\n        }\n        case 'strong': {\n          out += renderer.strong(this.parseInline(token.tokens, renderer));\n          break;\n        }\n        case 'em': {\n          out += renderer.em(this.parseInline(token.tokens, renderer));\n          break;\n        }\n        case 'codespan': {\n          out += renderer.codespan(token.text);\n          break;\n        }\n        case 'br': {\n          out += renderer.br();\n          break;\n        }\n        case 'del': {\n          out += renderer.del(this.parseInline(token.tokens, renderer));\n          break;\n        }\n        case 'text': {\n          out += renderer.text(token.text);\n          break;\n        }\n        default: {\n          const errMsg = 'Token with \"' + token.type + '\" type was not found.';\n          if (this.options.silent) {\n            console.error(errMsg);\n            return;\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n      }\n    }\n    return out;\n  }\n}\n\nclass Hooks {\n  constructor(options) {\n    this.options = options || defaults;\n  }\n\n  static passThroughHooks = new Set([\n    'preprocess',\n    'postprocess'\n  ]);\n\n  /**\n   * Process markdown before marked\n   */\n  preprocess(markdown) {\n    return markdown;\n  }\n\n  /**\n   * Process HTML after marked is finished\n   */\n  postprocess(html) {\n    return html;\n  }\n}\n\nfunction onError(silent, async, callback) {\n  return (e) => {\n    e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n\n    if (silent) {\n      const msg = '<p>An error occurred:</p><pre>'\n        + escape(e.message + '', true)\n        + '</pre>';\n      if (async) {\n        return Promise.resolve(msg);\n      }\n      if (callback) {\n        callback(null, msg);\n        return;\n      }\n      return msg;\n    }\n\n    if (async) {\n      return Promise.reject(e);\n    }\n    if (callback) {\n      callback(e);\n      return;\n    }\n    throw e;\n  };\n}\n\nfunction parseMarkdown(lexer, parser) {\n  return (src, opt, callback) => {\n    if (typeof opt === 'function') {\n      callback = opt;\n      opt = null;\n    }\n\n    const origOpt = { ...opt };\n    opt = { ...marked.defaults, ...origOpt };\n    const throwError = onError(opt.silent, opt.async, callback);\n\n    // throw error in case of non string input\n    if (typeof src === 'undefined' || src === null) {\n      return throwError(new Error('marked(): input parameter is undefined or null'));\n    }\n    if (typeof src !== 'string') {\n      return throwError(new Error('marked(): input parameter is of type '\n        + Object.prototype.toString.call(src) + ', string expected'));\n    }\n\n    checkSanitizeDeprecation(opt);\n\n    if (opt.hooks) {\n      opt.hooks.options = opt;\n    }\n\n    if (callback) {\n      const highlight = opt.highlight;\n      let tokens;\n\n      try {\n        if (opt.hooks) {\n          src = opt.hooks.preprocess(src);\n        }\n        tokens = lexer(src, opt);\n      } catch (e) {\n        return throwError(e);\n      }\n\n      const done = function(err) {\n        let out;\n\n        if (!err) {\n          try {\n            if (opt.walkTokens) {\n              marked.walkTokens(tokens, opt.walkTokens);\n            }\n            out = parser(tokens, opt);\n            if (opt.hooks) {\n              out = opt.hooks.postprocess(out);\n            }\n          } catch (e) {\n            err = e;\n          }\n        }\n\n        opt.highlight = highlight;\n\n        return err\n          ? throwError(err)\n          : callback(null, out);\n      };\n\n      if (!highlight || highlight.length < 3) {\n        return done();\n      }\n\n      delete opt.highlight;\n\n      if (!tokens.length) return done();\n\n      let pending = 0;\n      marked.walkTokens(tokens, function(token) {\n        if (token.type === 'code') {\n          pending++;\n          setTimeout(() => {\n            highlight(token.text, token.lang, function(err, code) {\n              if (err) {\n                return done(err);\n              }\n              if (code != null && code !== token.text) {\n                token.text = code;\n                token.escaped = true;\n              }\n\n              pending--;\n              if (pending === 0) {\n                done();\n              }\n            });\n          }, 0);\n        }\n      });\n\n      if (pending === 0) {\n        done();\n      }\n\n      return;\n    }\n\n    if (opt.async) {\n      return Promise.resolve(opt.hooks ? opt.hooks.preprocess(src) : src)\n        .then(src => lexer(src, opt))\n        .then(tokens => opt.walkTokens ? Promise.all(marked.walkTokens(tokens, opt.walkTokens)).then(() => tokens) : tokens)\n        .then(tokens => parser(tokens, opt))\n        .then(html => opt.hooks ? opt.hooks.postprocess(html) : html)\n        .catch(throwError);\n    }\n\n    try {\n      if (opt.hooks) {\n        src = opt.hooks.preprocess(src);\n      }\n      const tokens = lexer(src, opt);\n      if (opt.walkTokens) {\n        marked.walkTokens(tokens, opt.walkTokens);\n      }\n      let html = parser(tokens, opt);\n      if (opt.hooks) {\n        html = opt.hooks.postprocess(html);\n      }\n      return html;\n    } catch (e) {\n      return throwError(e);\n    }\n  };\n}\n\n/**\n * Marked\n */\nfunction marked(src, opt, callback) {\n  return parseMarkdown(Lexer.lex, Parser.parse)(src, opt, callback);\n}\n\n/**\n * Options\n */\n\nmarked.options =\nmarked.setOptions = function(opt) {\n  marked.defaults = { ...marked.defaults, ...opt };\n  changeDefaults(marked.defaults);\n  return marked;\n};\n\nmarked.getDefaults = getDefaults;\n\nmarked.defaults = defaults;\n\n/**\n * Use Extension\n */\n\nmarked.use = function(...args) {\n  const extensions = marked.defaults.extensions || { renderers: {}, childTokens: {} };\n\n  args.forEach((pack) => {\n    // copy options to new object\n    const opts = { ...pack };\n\n    // set async to true if it was set to true before\n    opts.async = marked.defaults.async || opts.async || false;\n\n    // ==-- Parse \"addon\" extensions --== //\n    if (pack.extensions) {\n      pack.extensions.forEach((ext) => {\n        if (!ext.name) {\n          throw new Error('extension name required');\n        }\n        if (ext.renderer) { // Renderer extensions\n          const prevRenderer = extensions.renderers[ext.name];\n          if (prevRenderer) {\n            // Replace extension with func to run new extension but fall back if false\n            extensions.renderers[ext.name] = function(...args) {\n              let ret = ext.renderer.apply(this, args);\n              if (ret === false) {\n                ret = prevRenderer.apply(this, args);\n              }\n              return ret;\n            };\n          } else {\n            extensions.renderers[ext.name] = ext.renderer;\n          }\n        }\n        if (ext.tokenizer) { // Tokenizer Extensions\n          if (!ext.level || (ext.level !== 'block' && ext.level !== 'inline')) {\n            throw new Error(\"extension level must be 'block' or 'inline'\");\n          }\n          if (extensions[ext.level]) {\n            extensions[ext.level].unshift(ext.tokenizer);\n          } else {\n            extensions[ext.level] = [ext.tokenizer];\n          }\n          if (ext.start) { // Function to check for start of token\n            if (ext.level === 'block') {\n              if (extensions.startBlock) {\n                extensions.startBlock.push(ext.start);\n              } else {\n                extensions.startBlock = [ext.start];\n              }\n            } else if (ext.level === 'inline') {\n              if (extensions.startInline) {\n                extensions.startInline.push(ext.start);\n              } else {\n                extensions.startInline = [ext.start];\n              }\n            }\n          }\n        }\n        if (ext.childTokens) { // Child tokens to be visited by walkTokens\n          extensions.childTokens[ext.name] = ext.childTokens;\n        }\n      });\n      opts.extensions = extensions;\n    }\n\n    // ==-- Parse \"overwrite\" extensions --== //\n    if (pack.renderer) {\n      const renderer = marked.defaults.renderer || new Renderer();\n      for (const prop in pack.renderer) {\n        const prevRenderer = renderer[prop];\n        // Replace renderer with func to run extension, but fall back if false\n        renderer[prop] = (...args) => {\n          let ret = pack.renderer[prop].apply(renderer, args);\n          if (ret === false) {\n            ret = prevRenderer.apply(renderer, args);\n          }\n          return ret;\n        };\n      }\n      opts.renderer = renderer;\n    }\n    if (pack.tokenizer) {\n      const tokenizer = marked.defaults.tokenizer || new Tokenizer();\n      for (const prop in pack.tokenizer) {\n        const prevTokenizer = tokenizer[prop];\n        // Replace tokenizer with func to run extension, but fall back if false\n        tokenizer[prop] = (...args) => {\n          let ret = pack.tokenizer[prop].apply(tokenizer, args);\n          if (ret === false) {\n            ret = prevTokenizer.apply(tokenizer, args);\n          }\n          return ret;\n        };\n      }\n      opts.tokenizer = tokenizer;\n    }\n\n    // ==-- Parse Hooks extensions --== //\n    if (pack.hooks) {\n      const hooks = marked.defaults.hooks || new Hooks();\n      for (const prop in pack.hooks) {\n        const prevHook = hooks[prop];\n        if (Hooks.passThroughHooks.has(prop)) {\n          hooks[prop] = (arg) => {\n            if (marked.defaults.async) {\n              return Promise.resolve(pack.hooks[prop].call(hooks, arg)).then(ret => {\n                return prevHook.call(hooks, ret);\n              });\n            }\n\n            const ret = pack.hooks[prop].call(hooks, arg);\n            return prevHook.call(hooks, ret);\n          };\n        } else {\n          hooks[prop] = (...args) => {\n            let ret = pack.hooks[prop].apply(hooks, args);\n            if (ret === false) {\n              ret = prevHook.apply(hooks, args);\n            }\n            return ret;\n          };\n        }\n      }\n      opts.hooks = hooks;\n    }\n\n    // ==-- Parse WalkTokens extensions --== //\n    if (pack.walkTokens) {\n      const walkTokens = marked.defaults.walkTokens;\n      opts.walkTokens = function(token) {\n        let values = [];\n        values.push(pack.walkTokens.call(this, token));\n        if (walkTokens) {\n          values = values.concat(walkTokens.call(this, token));\n        }\n        return values;\n      };\n    }\n\n    marked.setOptions(opts);\n  });\n};\n\n/**\n * Run callback for every token\n */\n\nmarked.walkTokens = function(tokens, callback) {\n  let values = [];\n  for (const token of tokens) {\n    values = values.concat(callback.call(marked, token));\n    switch (token.type) {\n      case 'table': {\n        for (const cell of token.header) {\n          values = values.concat(marked.walkTokens(cell.tokens, callback));\n        }\n        for (const row of token.rows) {\n          for (const cell of row) {\n            values = values.concat(marked.walkTokens(cell.tokens, callback));\n          }\n        }\n        break;\n      }\n      case 'list': {\n        values = values.concat(marked.walkTokens(token.items, callback));\n        break;\n      }\n      default: {\n        if (marked.defaults.extensions && marked.defaults.extensions.childTokens && marked.defaults.extensions.childTokens[token.type]) { // Walk any extensions\n          marked.defaults.extensions.childTokens[token.type].forEach(function(childTokens) {\n            values = values.concat(marked.walkTokens(token[childTokens], callback));\n          });\n        } else if (token.tokens) {\n          values = values.concat(marked.walkTokens(token.tokens, callback));\n        }\n      }\n    }\n  }\n  return values;\n};\n\n/**\n * Parse Inline\n * @param {string} src\n */\nmarked.parseInline = parseMarkdown(Lexer.lexInline, Parser.parseInline);\n\n/**\n * Expose\n */\nmarked.Parser = Parser;\nmarked.parser = Parser.parse;\nmarked.Renderer = Renderer;\nmarked.TextRenderer = TextRenderer;\nmarked.Lexer = Lexer;\nmarked.lexer = Lexer.lex;\nmarked.Tokenizer = Tokenizer;\nmarked.Slugger = Slugger;\nmarked.Hooks = Hooks;\nmarked.parse = marked;\n\nconst options = marked.options;\nconst setOptions = marked.setOptions;\nconst use = marked.use;\nconst walkTokens = marked.walkTokens;\nconst parseInline = marked.parseInline;\nconst parse = marked;\nconst parser = Parser.parse;\nconst lexer = Lexer.lex;\n\nexport { Hooks, Lexer, Parser, Renderer, Slugger, TextRenderer, Tokenizer, defaults, getDefaults, lexer, marked, options, parse, parseInline, parser, setOptions, use, walkTokens };\n","import { styled } from \"@linaria/react\";\nexport const MarkdownContainer = /*#__PURE__*/styled('div')({\n  name: \"MarkdownContainer\",\n  class: \"gdg-mnuv029\",\n  propsAsIs: false\n});\n\n","import React from \"react\";\nimport { marked } from \"marked\";\nimport { MarkdownContainer } from \"./private/markdown-container.js\";\n/** @category Renderers */\nexport default class MarkdownDiv extends React.PureComponent {\n    targetElement = null;\n    renderMarkdownIntoDiv() {\n        const { targetElement, props } = this;\n        if (targetElement === null)\n            return;\n        const { contents, createNode } = props;\n        const innerHTML = marked(contents);\n        const childRange = document.createRange();\n        childRange.selectNodeContents(targetElement);\n        childRange.deleteContents();\n        let newChild = createNode?.(innerHTML);\n        if (newChild === undefined) {\n            const childDoc = document.createElement(\"template\");\n            childDoc.innerHTML = innerHTML;\n            newChild = childDoc.content;\n        }\n        targetElement.append(newChild);\n        const tags = targetElement.getElementsByTagName(\"a\");\n        for (const tag of tags) {\n            tag.target = \"_blank\";\n            tag.rel = \"noreferrer noopener\";\n        }\n    }\n    containerRefHook = (element) => {\n        this.targetElement = element;\n        this.renderMarkdownIntoDiv();\n    };\n    render() {\n        // Doing this in the ref hook works great when we first render, but never again.\n        // This only works great after the first render, but not in the first render.\n        // Putting the two together makes the full solution.\n        this.renderMarkdownIntoDiv();\n        return React.createElement(MarkdownContainer, { ref: this.containerRefHook });\n    }\n}\n//# sourceMappingURL=markdown-div.js.map","import { styled } from \"@linaria/react\";\nexport const InputBox = /*#__PURE__*/styled('textarea')({\n  name: \"InputBox\",\n  class: \"gdg-izpuzkl\",\n  propsAsIs: false\n});\nexport const ShadowBox = /*#__PURE__*/styled('div')({\n  name: \"ShadowBox\",\n  class: \"gdg-s69h75o\",\n  propsAsIs: false\n});\nexport const GrowingEntryStyle = /*#__PURE__*/styled('div')({\n  name: \"GrowingEntryStyle\",\n  class: \"gdg-g1y0xocz\",\n  propsAsIs: false\n});\n\n","import * as React from \"react\";\nimport { GrowingEntryStyle, ShadowBox, InputBox } from \"./growing-entry-style.js\";\nimport { assert } from \"../../common/support.js\";\nlet globalInputID = 0;\n/** @category Renderers */\nexport const GrowingEntry = (props) => {\n    const { placeholder, value, onKeyDown, highlight, altNewline, validatedSelection, ...rest } = props;\n    const { onChange, className } = rest;\n    const inputRef = React.useRef(null);\n    const useText = value ?? \"\";\n    assert(onChange !== undefined, \"GrowingEntry must be a controlled input area\");\n    // 10 million id's aught to be enough for anybody\n    const [inputID] = React.useState(() => \"input-box-\" + (globalInputID = (globalInputID + 1) % 10000000));\n    React.useEffect(() => {\n        const ta = inputRef.current;\n        if (ta === null)\n            return;\n        if (ta.disabled)\n            return;\n        const length = useText.toString().length;\n        ta.focus();\n        ta.setSelectionRange(highlight ? 0 : length, length);\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n    React.useLayoutEffect(() => {\n        if (validatedSelection !== undefined) {\n            const range = typeof validatedSelection === \"number\" ? [validatedSelection, null] : validatedSelection;\n            inputRef.current?.setSelectionRange(range[0], range[1]);\n        }\n    }, [validatedSelection]);\n    const onKeyDownInner = React.useCallback(e => {\n        if (e.key === \"Enter\" && e.shiftKey && altNewline === true) {\n            return;\n        }\n        onKeyDown?.(e);\n    }, [altNewline, onKeyDown]);\n    return (React.createElement(GrowingEntryStyle, { className: \"gdg-growing-entry\" },\n        React.createElement(ShadowBox, { className: className }, useText + \"\\n\"),\n        React.createElement(InputBox, { ...rest, className: (className ?? \"\") + \" gdg-input\", id: inputID, ref: inputRef, onKeyDown: onKeyDownInner, value: useText, placeholder: placeholder, dir: \"auto\" })));\n};\n//# sourceMappingURL=growing-entry.js.map","// Shamelessly stolen from https://github.com/ricokahler/color2k\n// We don't need all the color functions but we deeply appreciate their work.\nconst cache = {};\nlet div = null;\nfunction createDiv() {\n    const d = document.createElement(\"div\");\n    d.style.opacity = \"0\";\n    d.style.pointerEvents = \"none\";\n    d.style.position = \"fixed\";\n    // div must be mounted for `getComputedStyle` to work\n    document.body.append(d);\n    return d;\n}\n/** @category Drawing */\nexport function parseToRgba(color) {\n    // normalize the color\n    const normalizedColor = color.toLowerCase().trim();\n    if (cache[normalizedColor] !== undefined)\n        return cache[normalizedColor];\n    div = div || createDiv();\n    div.style.color = \"#000\";\n    div.style.color = normalizedColor;\n    const control = getComputedStyle(div).color;\n    div.style.color = \"#fff\";\n    div.style.color = normalizedColor;\n    const computedColor = getComputedStyle(div).color;\n    if (computedColor !== control)\n        return [0, 0, 0, 1];\n    let result = computedColor\n        // eslint-disable-next-line unicorn/better-regex\n        .replace(/[^\\d.,]/g, \"\")\n        .split(\",\")\n        .map(Number.parseFloat);\n    if (result.length < 4) {\n        result.push(1);\n    }\n    result = result.map(x => {\n        const isNaN = Number.isNaN(x);\n        if (process.env.NODE_ENV !== \"production\" && isNaN) {\n            // eslint-disable-next-line no-console\n            console.warn(\"Could not parse color\", color);\n        }\n        return isNaN ? 0 : x;\n    });\n    cache[normalizedColor] = result;\n    return result;\n}\n/** @category Drawing */\nexport function withAlpha(color, alpha) {\n    const [r, g, b] = parseToRgba(color);\n    return `rgba(${r}, ${g}, ${b}, ${alpha})`;\n}\nconst blendResultCache = new Map();\nexport function blendCache(color, background) {\n    const cacheKey = `${color}-${background}`;\n    const maybe = blendResultCache.get(cacheKey);\n    if (maybe !== undefined)\n        return maybe;\n    const result = blend(color, background);\n    blendResultCache.set(cacheKey, result);\n    return result;\n}\n/** @category Drawing */\nexport function blend(color, background) {\n    if (background === undefined)\n        return color;\n    const [r, g, b, a] = parseToRgba(color);\n    if (a === 1)\n        return color;\n    const [br, bg, bb, ba] = parseToRgba(background);\n    const ao = a + ba * (1 - a);\n    // (xaA + xaB(1aA))/aR\n    const ro = (a * r + ba * br * (1 - a)) / ao;\n    const go = (a * g + ba * bg * (1 - a)) / ao;\n    const bo = (a * b + ba * bb * (1 - a)) / ao;\n    return `rgba(${ro}, ${go}, ${bo}, ${ao})`;\n}\n/** @category Drawing */\nexport function interpolateColors(leftColor, rightColor, val) {\n    // toot toot im a GPU\n    if (val <= 0)\n        return leftColor;\n    if (val >= 1)\n        return rightColor;\n    // Parse to rgba returns straight alpha colors, for interpolation we want pre-multiplied alpha\n    // FIXME: This can be faster if instead of makign an array we just use variables. No memory allocation.\n    const left = [...parseToRgba(leftColor)];\n    left[0] = left[0] * left[3];\n    left[1] = left[1] * left[3];\n    left[2] = left[2] * left[3];\n    const right = [...parseToRgba(rightColor)];\n    right[0] = right[0] * right[3];\n    right[1] = right[1] * right[3];\n    right[2] = right[2] * right[3];\n    const hScaler = val;\n    const nScaler = 1 - val;\n    const a = left[3] * nScaler + right[3] * hScaler;\n    // now we need to divide the alpha back out to get linear alpha back for the final result\n    const r = Math.floor((left[0] * nScaler + right[0] * hScaler) / a);\n    const g = Math.floor((left[1] * nScaler + right[1] * hScaler) / a);\n    const b = Math.floor((left[2] * nScaler + right[2] * hScaler) / a);\n    return `rgba(${r}, ${g}, ${b}, ${a})`;\n}\n/**\n * Returns a number (float) representing the luminance of a color.\n *\n * @category Drawing\n */\nexport function getLuminance(color) {\n    if (color === \"transparent\")\n        return 0;\n    // eslint-disable-next-line unicorn/consistent-function-scoping\n    function f(x) {\n        const channel = x / 255;\n        return channel <= 0.04045 ? channel / 12.92 : Math.pow((channel + 0.055) / 1.055, 2.4);\n    }\n    const [r, g, b] = parseToRgba(color);\n    return 0.2126 * f(r) + 0.7152 * f(g) + 0.0722 * f(b);\n}\n//# sourceMappingURL=color-parser.js.map","\"use strict\";var d=new Map,b=new Map,z=new Map;function v(){d.clear(),z.clear(),b.clear()}function w(l,s,e,c,t){var n,r,o;let f=0,a={};for(let i of l)f+=(n=e.get(i))!=null?n:t,a[i]=((r=a[i])!=null?r:0)+1;let g=s-f;for(let i of Object.keys(a)){let m=a[i],u=(o=e.get(i))!=null?o:t,h=u*m/f,M=g*h*c/m,C=u+M;e.set(i,C)}}function R(l,s){var n;let e=new Map,c=0;for(let r of\"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890,.-+=?\"){let o=l.measureText(r).width;e.set(r,o),c+=o}let t=c/e.size,f=3,a=(s/t+f)/(f+1),g=e.keys();for(let r of g)e.set(r,((n=e.get(r))!=null?n:t)*a);return e}function p(l,s,e,c){var g,n;let t=b.get(e);if(c&&t!==void 0&&t.count>2e4){let r=z.get(e);if(r===void 0&&(r=R(l,t.size),z.set(e,r)),t.count>5e5){let i=0;for(let m of s)i+=(g=r.get(m))!=null?g:t.size;return i*1.01}let o=l.measureText(s);return w(s,o.width,r,Math.max(.05,1-t.count/2e5),t.size),b.set(e,{count:t.count+s.length,size:t.size}),o.width}let f=l.measureText(s),a=f.width/s.length;if(((n=t==null?void 0:t.count)!=null?n:0)>2e4)return f.width;if(t===void 0)b.set(e,{count:s.length,size:a});else{let r=a-t.size,o=s.length/(t.count+s.length),i=t.size+r*o;b.set(e,{count:t.count+s.length,size:i})}return f.width}function T(l,s,e,c,t,f,a,g){if(s.length<=1)return s.length;if(t<e)return-1;let n=Math.floor(e/t*f),r=p(l,s.slice(0,Math.max(0,n)),c,a),o=g==null?void 0:g(s);if(r!==e)if(r<e){for(;r<e;)n++,r=p(l,s.slice(0,Math.max(0,n)),c,a);n--}else for(;r>e;){let i=o!==void 0?0:s.lastIndexOf(\" \",n-1);i>0?n=i:n--,r=p(l,s.slice(0,Math.max(0,n)),c,a)}if(s[n]!==\" \"){let i=0;if(o===void 0)i=s.lastIndexOf(\" \",n);else for(let m of o){if(m>n)break;i=m}i>0&&(n=i)}return n}function _(l,s,e,c,t,f){let a=`${s}_${e}_${c}px`,g=d.get(a);if(g!==void 0)return g;if(c<=0)return[];let n=[],r=s.split(`\n`),o=b.get(e),i=o===void 0?s.length:c/o.size*1.5,m=t&&o!==void 0&&o.count>2e4;for(let u of r){let h=p(l,u.slice(0,Math.max(0,i)),e,m),M=Math.min(u.length,i);if(h<=c)n.push(u);else{for(;h>c;){let C=T(l,u,c,e,h,M,m,f),k=u.slice(0,Math.max(0,C));u=u.slice(k.length),n.push(k),h=p(l,u.slice(0,Math.max(0,i)),e,m),M=Math.min(u.length,i)}h>0&&n.push(u)}}return n=n.map((u,h)=>h===0?u.trimEnd():u.trim()),d.set(a,n),d.size>500&&d.delete(d.keys().next().value),n}export{v as clearCache,_ as split};\n//# sourceMappingURL=index.js.map\n","import {} from \"../data-grid-types.js\";\nimport { direction } from \"../../../common/utils.js\";\nimport React from \"react\";\nimport { split as splitText, clearCache } from \"canvas-hypertxt\";\nexport function useMappedColumns(columns, freezeColumns) {\n    return React.useMemo(() => columns.map((c, i) => ({\n        group: c.group,\n        grow: c.grow,\n        hasMenu: c.hasMenu,\n        icon: c.icon,\n        id: c.id,\n        menuIcon: c.menuIcon,\n        overlayIcon: c.overlayIcon,\n        sourceIndex: i,\n        sticky: i < freezeColumns,\n        indicatorIcon: c.indicatorIcon,\n        style: c.style,\n        themeOverride: c.themeOverride,\n        title: c.title,\n        trailingRowOptions: c.trailingRowOptions,\n        width: c.width,\n        growOffset: c.growOffset,\n        rowMarker: c.rowMarker,\n        rowMarkerChecked: c.rowMarkerChecked,\n        headerRowMarkerTheme: c.headerRowMarkerTheme,\n        headerRowMarkerAlwaysVisible: c.headerRowMarkerAlwaysVisible,\n        headerRowMarkerDisabled: c.headerRowMarkerDisabled,\n    })), [columns, freezeColumns]);\n}\nexport function gridSelectionHasItem(sel, item) {\n    const [col, row] = item;\n    if (sel.columns.hasIndex(col) || sel.rows.hasIndex(row))\n        return true;\n    if (sel.current !== undefined) {\n        if (itemsAreEqual(sel.current.cell, item))\n            return true;\n        const toCheck = [sel.current.range, ...sel.current.rangeStack]; // FIXME: pointless alloc\n        for (const r of toCheck) {\n            // dont we have a function for this?\n            if (col >= r.x && col < r.x + r.width && row >= r.y && row < r.y + r.height)\n                return true;\n        }\n    }\n    return false;\n}\nexport function isGroupEqual(left, right) {\n    return (left ?? \"\") === (right ?? \"\");\n}\nexport function cellIsSelected(location, cell, selection) {\n    if (selection.current === undefined)\n        return false;\n    if (location[1] !== selection.current.cell[1])\n        return false;\n    if (cell.span === undefined) {\n        return selection.current.cell[0] === location[0];\n    }\n    return selection.current.cell[0] >= cell.span[0] && selection.current.cell[0] <= cell.span[1];\n}\nexport function itemIsInRect(location, rect) {\n    const [x, y] = location;\n    return x >= rect.x && x < rect.x + rect.width && y >= rect.y && y < rect.y + rect.height;\n}\nexport function itemsAreEqual(a, b) {\n    return a?.[0] === b?.[0] && a?.[1] === b?.[1];\n}\nexport function rectBottomRight(rect) {\n    return [rect.x + rect.width - 1, rect.y + rect.height - 1];\n}\nfunction cellIsInRect(location, cell, rect) {\n    const startX = rect.x;\n    const endX = rect.x + rect.width - 1;\n    const startY = rect.y;\n    const endY = rect.y + rect.height - 1;\n    const [cellCol, cellRow] = location;\n    if (cellRow < startY || cellRow > endY)\n        return false;\n    if (cell.span === undefined) {\n        return cellCol >= startX && cellCol <= endX;\n    }\n    const [spanStart, spanEnd] = cell.span;\n    return ((spanStart >= startX && spanStart <= endX) ||\n        (spanEnd >= startX && spanStart <= endX) ||\n        (spanStart < startX && spanEnd > endX));\n}\nexport function cellIsInRange(location, cell, selection, includeSingleSelection) {\n    let result = 0;\n    if (selection.current === undefined)\n        return result;\n    const range = selection.current.range;\n    if ((includeSingleSelection || range.height * range.width > 1) && cellIsInRect(location, cell, range)) {\n        result++;\n    }\n    for (const r of selection.current.rangeStack) {\n        if (cellIsInRect(location, cell, r)) {\n            result++;\n        }\n    }\n    return result;\n}\nexport function remapForDnDState(columns, dndState) {\n    let mappedCols = columns;\n    if (dndState !== undefined) {\n        let writable = [...columns];\n        const temp = mappedCols[dndState.src];\n        if (dndState.src > dndState.dest) {\n            writable.splice(dndState.src, 1);\n            writable.splice(dndState.dest, 0, temp);\n        }\n        else {\n            writable.splice(dndState.dest + 1, 0, temp);\n            writable.splice(dndState.src, 1);\n        }\n        writable = writable.map((c, i) => ({\n            ...c,\n            sticky: columns[i].sticky,\n        }));\n        mappedCols = writable;\n    }\n    return mappedCols;\n}\nexport function getStickyWidth(columns, dndState) {\n    let result = 0;\n    const remapped = remapForDnDState(columns, dndState);\n    for (let i = 0; i < remapped.length; i++) {\n        const c = remapped[i];\n        if (c.sticky)\n            result += c.width;\n        else\n            break;\n    }\n    return result;\n}\nexport function getFreezeTrailingHeight(rows, freezeTrailingRows, getRowHeight) {\n    if (typeof getRowHeight === \"number\") {\n        return freezeTrailingRows * getRowHeight;\n    }\n    else {\n        let result = 0;\n        for (let i = rows - freezeTrailingRows; i < rows; i++) {\n            result += getRowHeight(i);\n        }\n        return result;\n    }\n}\nexport function getEffectiveColumns(columns, cellXOffset, width, dndState, tx) {\n    const mappedCols = remapForDnDState(columns, dndState);\n    const sticky = [];\n    for (const c of mappedCols) {\n        if (c.sticky) {\n            sticky.push(c);\n        }\n        else {\n            break;\n        }\n    }\n    if (sticky.length > 0) {\n        for (const c of sticky) {\n            width -= c.width;\n        }\n    }\n    let endIndex = cellXOffset;\n    let curX = tx ?? 0;\n    while (curX <= width && endIndex < mappedCols.length) {\n        curX += mappedCols[endIndex].width;\n        endIndex++;\n    }\n    for (let i = cellXOffset; i < endIndex; i++) {\n        const c = mappedCols[i];\n        if (!c.sticky) {\n            sticky.push(c);\n        }\n    }\n    return sticky;\n}\nexport function getColumnIndexForX(targetX, effectiveColumns, translateX) {\n    let x = 0;\n    for (const c of effectiveColumns) {\n        const cx = c.sticky ? x : x + (translateX ?? 0);\n        if (targetX <= cx + c.width) {\n            return c.sourceIndex;\n        }\n        x += c.width;\n    }\n    return -1;\n}\nexport function getRowIndexForY(targetY, height, hasGroups, headerHeight, groupHeaderHeight, rows, rowHeight, cellYOffset, translateY, freezeTrailingRows) {\n    const totalHeaderHeight = headerHeight + groupHeaderHeight;\n    if (hasGroups && targetY <= groupHeaderHeight)\n        return -2;\n    if (targetY <= totalHeaderHeight)\n        return -1;\n    let y = height;\n    for (let fr = 0; fr < freezeTrailingRows; fr++) {\n        const row = rows - 1 - fr;\n        const rh = typeof rowHeight === \"number\" ? rowHeight : rowHeight(row);\n        y -= rh;\n        if (targetY >= y) {\n            return row;\n        }\n    }\n    const effectiveRows = rows - freezeTrailingRows;\n    const ty = targetY - (translateY ?? 0);\n    if (typeof rowHeight === \"number\") {\n        const target = Math.floor((ty - totalHeaderHeight) / rowHeight) + cellYOffset;\n        if (target >= effectiveRows)\n            return undefined;\n        return target;\n    }\n    else {\n        let curY = totalHeaderHeight;\n        for (let i = cellYOffset; i < effectiveRows; i++) {\n            const rh = rowHeight(i);\n            if (ty <= curY + rh)\n                return i;\n            curY += rh;\n        }\n        return undefined;\n    }\n}\nlet metricsSize = 0;\nlet metricsCache = {};\nconst isSSR = typeof window === \"undefined\";\nasync function clearCacheOnLoad() {\n    if (isSSR || document?.fonts?.ready === undefined)\n        return;\n    await document.fonts.ready;\n    metricsSize = 0;\n    metricsCache = {};\n    clearCache();\n}\nvoid clearCacheOnLoad();\nfunction makeCacheKey(s, ctx, baseline, font) {\n    return `${s}_${font ?? ctx?.font}_${baseline}`;\n}\n/** @category Drawing */\nexport function measureTextCached(s, ctx, font, baseline = \"middle\") {\n    const key = makeCacheKey(s, ctx, baseline, font);\n    let metrics = metricsCache[key];\n    if (metrics === undefined) {\n        metrics = ctx.measureText(s);\n        metricsCache[key] = metrics;\n        metricsSize++;\n    }\n    if (metricsSize > 10000) {\n        metricsCache = {};\n        metricsSize = 0;\n    }\n    return metrics;\n}\nexport function getMeasuredTextCache(s, font) {\n    const key = makeCacheKey(s, undefined, \"middle\", font);\n    return metricsCache[key];\n}\n/** @category Drawing */\nexport function getMiddleCenterBias(ctx, font) {\n    if (typeof font !== \"string\") {\n        font = font.baseFontFull;\n    }\n    return getMiddleCenterBiasInner(ctx, font);\n}\nfunction loadMetric(ctx, baseline) {\n    const sample = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n    ctx.save();\n    ctx.textBaseline = baseline;\n    const result = ctx.measureText(sample);\n    ctx.restore();\n    return result;\n}\nconst biasCache = [];\nfunction getMiddleCenterBiasInner(ctx, font) {\n    for (const x of biasCache) {\n        if (x.key === font)\n            return x.val;\n    }\n    const alphabeticMetrics = loadMetric(ctx, \"alphabetic\");\n    const middleMetrics = loadMetric(ctx, \"middle\");\n    const bias = -(middleMetrics.actualBoundingBoxDescent - alphabeticMetrics.actualBoundingBoxDescent) +\n        alphabeticMetrics.actualBoundingBoxAscent / 2;\n    biasCache.push({\n        key: font,\n        val: bias,\n    });\n    return bias;\n}\nexport function drawLastUpdateUnderlay(args, lastUpdate, frameTime, lastPrep, isLastCol, isLastRow) {\n    const { ctx, rect, theme } = args;\n    let progress = Number.MAX_SAFE_INTEGER;\n    const animTime = 500;\n    if (lastUpdate !== undefined) {\n        progress = frameTime - lastUpdate;\n        if (progress < animTime) {\n            const fade = 1 - progress / animTime;\n            ctx.globalAlpha = fade;\n            ctx.fillStyle = theme.bgSearchResult;\n            ctx.fillRect(rect.x + 1, rect.y + 1, rect.width - (isLastCol ? 2 : 1), rect.height - (isLastRow ? 2 : 1));\n            ctx.globalAlpha = 1;\n            if (lastPrep !== undefined) {\n                lastPrep.fillStyle = theme.bgSearchResult;\n            }\n        }\n    }\n    return progress < animTime;\n}\nexport function prepTextCell(args, lastPrep, overrideColor) {\n    const { ctx, theme } = args;\n    const result = lastPrep ?? {};\n    const newFill = overrideColor ?? theme.textDark;\n    if (newFill !== result.fillStyle) {\n        ctx.fillStyle = newFill;\n        result.fillStyle = newFill;\n    }\n    return result;\n}\n/** @category Drawing */\nexport function drawTextCellExternal(args, data, contentAlign) {\n    const { rect, ctx, theme } = args;\n    ctx.fillStyle = theme.textDark;\n    drawTextCell({\n        ctx: ctx,\n        rect,\n        theme: theme,\n    }, data, contentAlign);\n}\nfunction drawSingleTextLine(ctx, data, x, y, w, h, bias, theme, contentAlign) {\n    if (contentAlign === \"right\") {\n        ctx.fillText(data, x + w - (theme.cellHorizontalPadding + 0.5), y + h / 2 + bias);\n    }\n    else if (contentAlign === \"center\") {\n        ctx.fillText(data, x + w / 2, y + h / 2 + bias);\n    }\n    else {\n        ctx.fillText(data, x + theme.cellHorizontalPadding + 0.5, y + h / 2 + bias);\n    }\n}\nexport function getEmHeight(ctx, fontStyle) {\n    const textMetrics = measureTextCached(\"ABCi09jgqpy\", ctx, fontStyle); // do not question the magic string\n    return textMetrics.actualBoundingBoxAscent + textMetrics.actualBoundingBoxDescent;\n}\nfunction truncateString(data, w) {\n    if (data.includes(\"\\n\")) {\n        // new lines are rare and split is relatively expensive compared to the search\n        // it pays off to not do the split contantly. More accurately... it pays off not to run the regex.\n        // what even is the point of this? So what if there is a /r at the end of a line? It wont be drawn anyway.\n        data = data.split(/\\r?\\n/, 1)[0];\n    }\n    const max = w / 4; // no need to round, slice will just truncate this\n    if (data.length > max) {\n        data = data.slice(0, max);\n    }\n    return data;\n}\nfunction drawMultiLineText(ctx, data, x, y, w, h, bias, theme, contentAlign, hyperWrapping) {\n    const fontStyle = theme.baseFontFull;\n    const split = splitText(ctx, data, fontStyle, w - theme.cellHorizontalPadding * 2, hyperWrapping ?? false);\n    const emHeight = getEmHeight(ctx, fontStyle);\n    const lineHeight = theme.lineHeight * emHeight;\n    const actualHeight = emHeight + lineHeight * (split.length - 1);\n    const mustClip = actualHeight + theme.cellVerticalPadding > h;\n    if (mustClip) {\n        // well now we have to clip because we might render outside the cell vertically\n        ctx.save();\n        ctx.rect(x, y, w, h);\n        ctx.clip();\n    }\n    const optimalY = y + h / 2 - actualHeight / 2;\n    let drawY = Math.max(y + theme.cellVerticalPadding, optimalY);\n    for (const line of split) {\n        drawSingleTextLine(ctx, line, x, drawY, w, emHeight, bias, theme, contentAlign);\n        drawY += lineHeight;\n        if (drawY > y + h)\n            break;\n    }\n    if (mustClip) {\n        ctx.restore();\n    }\n}\n/** @category Drawing */\nexport function drawTextCell(args, data, contentAlign, allowWrapping, hyperWrapping) {\n    const { ctx, rect, theme } = args;\n    const { x, y, width: w, height: h } = rect;\n    allowWrapping = allowWrapping ?? false;\n    if (!allowWrapping) {\n        data = truncateString(data, w);\n    }\n    const bias = getMiddleCenterBias(ctx, theme);\n    const isRtl = direction(data) === \"rtl\";\n    if (contentAlign === undefined && isRtl) {\n        contentAlign = \"right\";\n    }\n    if (isRtl) {\n        ctx.direction = \"rtl\";\n    }\n    if (data.length > 0) {\n        let changed = false;\n        if (contentAlign === \"right\") {\n            // Use right alignment as default for RTL text\n            ctx.textAlign = \"right\";\n            changed = true;\n        }\n        else if (contentAlign !== undefined && contentAlign !== \"left\") {\n            // Since default is start (=left), only apply if alignment is center or right\n            ctx.textAlign = contentAlign;\n            changed = true;\n        }\n        if (!allowWrapping) {\n            drawSingleTextLine(ctx, data, x, y, w, h, bias, theme, contentAlign);\n        }\n        else {\n            drawMultiLineText(ctx, data, x, y, w, h, bias, theme, contentAlign, hyperWrapping);\n        }\n        if (changed) {\n            // Reset alignment to default\n            ctx.textAlign = \"start\";\n        }\n        if (isRtl) {\n            ctx.direction = \"inherit\";\n        }\n    }\n}\nexport function roundedRect(ctx, x, y, width, height, radius) {\n    if (typeof radius === \"number\") {\n        radius = { tl: radius, tr: radius, br: radius, bl: radius };\n    }\n    // restrict radius to a reasonable max\n    radius = {\n        tl: Math.max(0, Math.min(radius.tl, height / 2, width / 2)),\n        tr: Math.max(0, Math.min(radius.tr, height / 2, width / 2)),\n        bl: Math.max(0, Math.min(radius.bl, height / 2, width / 2)),\n        br: Math.max(0, Math.min(radius.br, height / 2, width / 2)),\n    };\n    ctx.moveTo(x + radius.tl, y);\n    ctx.arcTo(x + width, y, x + width, y + radius.tr, radius.tr);\n    ctx.arcTo(x + width, y + height, x + width - radius.br, y + height, radius.br);\n    ctx.arcTo(x, y + height, x, y + height - radius.bl, radius.bl);\n    ctx.arcTo(x, y, x + radius.tl, y, radius.tl);\n}\nexport function drawMenuDots(ctx, dotsX, dotsY) {\n    const radius = 1.25;\n    ctx.arc(dotsX, dotsY - radius * 3.5, radius, 0, 2 * Math.PI, false);\n    ctx.arc(dotsX, dotsY, radius, 0, 2 * Math.PI, false);\n    ctx.arc(dotsX, dotsY + radius * 3.5, radius, 0, 2 * Math.PI, false);\n}\nexport function roundedPoly(ctx, points, radiusAll) {\n    // convert 2 points into vector form, polar form, and normalised\n    const asVec = function (p, pp) {\n        const vx = pp.x - p.x;\n        const vy = pp.y - p.y;\n        const vlen = Math.sqrt(vx * vx + vy * vy);\n        const vnx = vx / vlen;\n        const vny = vy / vlen;\n        return {\n            x: vx,\n            y: pp.y - p.y,\n            len: vlen,\n            nx: vnx,\n            ny: vny,\n            ang: Math.atan2(vny, vnx),\n        };\n    };\n    let radius;\n    // const v1: Vector = {} as any;\n    // const v2: Vector = {} as any;\n    const len = points.length;\n    let p1 = points[len - 1];\n    // for each point\n    for (let i = 0; i < len; i++) {\n        let p2 = points[i % len];\n        const p3 = points[(i + 1) % len];\n        //-----------------------------------------\n        // Part 1\n        const v1 = asVec(p2, p1);\n        const v2 = asVec(p2, p3);\n        const sinA = v1.nx * v2.ny - v1.ny * v2.nx;\n        const sinA90 = v1.nx * v2.nx - v1.ny * -v2.ny;\n        let angle = Math.asin(sinA < -1 ? -1 : sinA > 1 ? 1 : sinA);\n        //-----------------------------------------\n        let radDirection = 1;\n        let drawDirection = false;\n        if (sinA90 < 0) {\n            if (angle < 0) {\n                angle = Math.PI + angle;\n            }\n            else {\n                angle = Math.PI - angle;\n                radDirection = -1;\n                drawDirection = true;\n            }\n        }\n        else {\n            if (angle > 0) {\n                radDirection = -1;\n                drawDirection = true;\n            }\n        }\n        radius = p2.radius !== undefined ? p2.radius : radiusAll;\n        //-----------------------------------------\n        // Part 2\n        const halfAngle = angle / 2;\n        //-----------------------------------------\n        //-----------------------------------------\n        // Part 3\n        let lenOut = Math.abs((Math.cos(halfAngle) * radius) / Math.sin(halfAngle));\n        //-----------------------------------------\n        //-----------------------------------------\n        // Special part A\n        let cRadius;\n        if (lenOut > Math.min(v1.len / 2, v2.len / 2)) {\n            lenOut = Math.min(v1.len / 2, v2.len / 2);\n            cRadius = Math.abs((lenOut * Math.sin(halfAngle)) / Math.cos(halfAngle));\n        }\n        else {\n            cRadius = radius;\n        }\n        //-----------------------------------------\n        // Part 4\n        let x = p2.x + v2.nx * lenOut;\n        let y = p2.y + v2.ny * lenOut;\n        //-----------------------------------------\n        // Part 5\n        x += -v2.ny * cRadius * radDirection;\n        y += v2.nx * cRadius * radDirection;\n        //-----------------------------------------\n        // Part 6\n        ctx.arc(x, y, cRadius, v1.ang + (Math.PI / 2) * radDirection, v2.ang - (Math.PI / 2) * radDirection, drawDirection);\n        //-----------------------------------------\n        p1 = p2;\n        p2 = p3;\n    }\n    ctx.closePath();\n}\nexport function computeBounds(col, row, width, height, groupHeaderHeight, totalHeaderHeight, cellXOffset, cellYOffset, translateX, translateY, rows, freezeColumns, freezeTrailingRows, mappedColumns, rowHeight) {\n    const result = {\n        x: 0,\n        y: totalHeaderHeight + translateY,\n        width: 0,\n        height: 0,\n    };\n    if (col >= mappedColumns.length || row >= rows || row < -2 || col < 0) {\n        return result;\n    }\n    const headerHeight = totalHeaderHeight - groupHeaderHeight;\n    if (col >= freezeColumns) {\n        const dir = cellXOffset > col ? -1 : 1;\n        const freezeWidth = getStickyWidth(mappedColumns);\n        result.x += freezeWidth + translateX;\n        for (let i = cellXOffset; i !== col; i += dir) {\n            result.x += mappedColumns[dir === 1 ? i : i - 1].width * dir;\n        }\n    }\n    else {\n        for (let i = 0; i < col; i++) {\n            result.x += mappedColumns[i].width;\n        }\n    }\n    result.width = mappedColumns[col].width + 1;\n    if (row === -1) {\n        result.y = groupHeaderHeight;\n        result.height = headerHeight;\n    }\n    else if (row === -2) {\n        result.y = 0;\n        result.height = groupHeaderHeight;\n        let start = col;\n        const group = mappedColumns[col].group;\n        const sticky = mappedColumns[col].sticky;\n        while (start > 0 &&\n            isGroupEqual(mappedColumns[start - 1].group, group) &&\n            mappedColumns[start - 1].sticky === sticky) {\n            const c = mappedColumns[start - 1];\n            result.x -= c.width;\n            result.width += c.width;\n            start--;\n        }\n        let end = col;\n        while (end + 1 < mappedColumns.length &&\n            isGroupEqual(mappedColumns[end + 1].group, group) &&\n            mappedColumns[end + 1].sticky === sticky) {\n            const c = mappedColumns[end + 1];\n            result.width += c.width;\n            end++;\n        }\n        if (!sticky) {\n            const freezeWidth = getStickyWidth(mappedColumns);\n            const clip = result.x - freezeWidth;\n            if (clip < 0) {\n                result.x -= clip;\n                result.width += clip;\n            }\n            if (result.x + result.width > width) {\n                result.width = width - result.x;\n            }\n        }\n    }\n    else if (row >= rows - freezeTrailingRows) {\n        let dy = rows - row;\n        result.y = height;\n        while (dy > 0) {\n            const r = row + dy - 1;\n            result.height = typeof rowHeight === \"number\" ? rowHeight : rowHeight(r);\n            result.y -= result.height;\n            dy--;\n        }\n        result.height += 1;\n    }\n    else {\n        const dir = cellYOffset > row ? -1 : 1;\n        if (typeof rowHeight === \"number\") {\n            const delta = row - cellYOffset;\n            result.y += delta * rowHeight;\n        }\n        else {\n            for (let r = cellYOffset; r !== row; r += dir) {\n                result.y += rowHeight(r) * dir;\n            }\n        }\n        result.height = (typeof rowHeight === \"number\" ? rowHeight : rowHeight(row)) + 1;\n    }\n    return result;\n}\n//# sourceMappingURL=data-grid-lib.js.map","import { deepEqual } from \"./support.js\";\n// max safe int 2^53 - 1 (minus 1 omitted from here on)\n// max safe columns is 2^21 or 2,097,151\n// max safe rows is 2^32 or 4,294,967,295\n// If 3 rows render as an inch, then the max safe height is 1,431,655,765 inches or 22,426,868 miles\n// the distance to the moon is 238,900 miles, so this would give you a data grid that goes to the moon and back 94 times\n// seems fine\nconst rowShift = 1 << 21;\nexport function packColRowToNumber(col, row) {\n    return (row + 2) * rowShift + col;\n}\nexport function unpackCol(packed) {\n    return packed % rowShift;\n}\nexport function unpackRow(packed) {\n    return Math.floor(packed / rowShift) - 2;\n}\nexport function unpackNumberToColRow(packed) {\n    const col = unpackCol(packed);\n    const row = unpackRow(packed);\n    return [col, row];\n}\nexport class WindowingTrackerBase {\n    visibleWindow = {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0,\n    };\n    freezeCols = 0;\n    freezeRows = [];\n    isInWindow = (packed) => {\n        const col = unpackCol(packed);\n        const row = unpackRow(packed);\n        const w = this.visibleWindow;\n        const colInWindow = (col >= w.x && col <= w.x + w.width) || col < this.freezeCols;\n        const rowInWindow = (row >= w.y && row <= w.y + w.height) || this.freezeRows.includes(row);\n        return colInWindow && rowInWindow;\n    };\n    setWindow(newWindow, freezeCols, freezeRows) {\n        if (this.visibleWindow.x === newWindow.x &&\n            this.visibleWindow.y === newWindow.y &&\n            this.visibleWindow.width === newWindow.width &&\n            this.visibleWindow.height === newWindow.height &&\n            this.freezeCols === freezeCols &&\n            deepEqual(this.freezeRows, freezeRows))\n            return;\n        this.visibleWindow = newWindow;\n        this.freezeCols = freezeCols;\n        this.freezeRows = freezeRows;\n        this.clearOutOfWindow();\n    }\n}\nexport class RenderStateProvider extends WindowingTrackerBase {\n    cache = new Map();\n    setValue = (location, state) => {\n        this.cache.set(packColRowToNumber(location[0], location[1]), state);\n    };\n    getValue = (location) => {\n        return this.cache.get(packColRowToNumber(location[0], location[1]));\n    };\n    clearOutOfWindow = () => {\n        for (const [key] of this.cache.entries()) {\n            if (!this.isInWindow(key)) {\n                this.cache.delete(key);\n            }\n        }\n    };\n}\n//# sourceMappingURL=render-state-provider.js.map","import { packColRowToNumber, unpackNumberToColRow, unpackRow } from \"../../common/render-state-provider.js\";\nexport class CellSet {\n    cells;\n    constructor(items = []) {\n        this.cells = new Set(items.map(x => packColRowToNumber(x[0], x[1])));\n    }\n    add(cell) {\n        this.cells.add(packColRowToNumber(cell[0], cell[1]));\n    }\n    has(cell) {\n        if (cell === undefined)\n            return false;\n        return this.cells.has(packColRowToNumber(cell[0], cell[1]));\n    }\n    remove(cell) {\n        this.cells.delete(packColRowToNumber(cell[0], cell[1]));\n    }\n    clear() {\n        this.cells.clear();\n    }\n    get size() {\n        return this.cells.size;\n    }\n    hasHeader() {\n        for (const cellNumber of this.cells) {\n            const row = unpackRow(cellNumber);\n            if (row < 0)\n                return true;\n        }\n        return false;\n    }\n    hasItemInRectangle(rect) {\n        for (let row = rect.y; row < rect.y + rect.height; row++) {\n            for (let col = rect.x; col < rect.x + rect.width; col++) {\n                if (this.cells.has(packColRowToNumber(col, row))) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n    hasItemInRegion(rect) {\n        for (const r of rect) {\n            if (this.hasItemInRectangle(r)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    *values() {\n        for (const cellNumber of this.cells) {\n            yield unpackNumberToColRow(cellNumber);\n        }\n    }\n}\n//# sourceMappingURL=cell-set.js.map","import React from \"react\";\nimport { blend } from \"../internal/data-grid/color-parser.js\";\n// theme variable precidence\n/** @category Theme */\nexport function makeCSSStyle(theme) {\n    return {\n        \"--gdg-accent-color\": theme.accentColor,\n        \"--gdg-accent-fg\": theme.accentFg,\n        \"--gdg-accent-light\": theme.accentLight,\n        \"--gdg-text-dark\": theme.textDark,\n        \"--gdg-text-medium\": theme.textMedium,\n        \"--gdg-text-light\": theme.textLight,\n        \"--gdg-text-bubble\": theme.textBubble,\n        \"--gdg-bg-icon-header\": theme.bgIconHeader,\n        \"--gdg-fg-icon-header\": theme.fgIconHeader,\n        \"--gdg-text-header\": theme.textHeader,\n        \"--gdg-text-group-header\": theme.textGroupHeader ?? theme.textHeader,\n        \"--gdg-text-header-selected\": theme.textHeaderSelected,\n        \"--gdg-bg-cell\": theme.bgCell,\n        \"--gdg-bg-cell-medium\": theme.bgCellMedium,\n        \"--gdg-bg-header\": theme.bgHeader,\n        \"--gdg-bg-header-has-focus\": theme.bgHeaderHasFocus,\n        \"--gdg-bg-header-hovered\": theme.bgHeaderHovered,\n        \"--gdg-bg-bubble\": theme.bgBubble,\n        \"--gdg-bg-bubble-selected\": theme.bgBubbleSelected,\n        \"--gdg-bg-search-result\": theme.bgSearchResult,\n        \"--gdg-border-color\": theme.borderColor,\n        \"--gdg-horizontal-border-color\": theme.horizontalBorderColor ?? theme.borderColor,\n        \"--gdg-drilldown-border\": theme.drilldownBorder,\n        \"--gdg-link-color\": theme.linkColor,\n        \"--gdg-cell-horizontal-padding\": `${theme.cellHorizontalPadding}px`,\n        \"--gdg-cell-vertical-padding\": `${theme.cellVerticalPadding}px`,\n        \"--gdg-header-font-style\": theme.headerFontStyle,\n        \"--gdg-base-font-style\": theme.baseFontStyle,\n        \"--gdg-marker-font-style\": theme.markerFontStyle,\n        \"--gdg-font-family\": theme.fontFamily,\n        \"--gdg-editor-font-size\": theme.editorFontSize,\n        ...(theme.resizeIndicatorColor === undefined\n            ? {}\n            : { \"--gdg-resize-indicator-color\": theme.resizeIndicatorColor }),\n        ...(theme.headerBottomBorderColor === undefined\n            ? {}\n            : { \"--gdg-header-bottom-border-color\": theme.headerBottomBorderColor }),\n        ...(theme.roundingRadius === undefined ? {} : { \"--gdg-rounding-radius\": `${theme.roundingRadius}px` }),\n    };\n}\nconst dataEditorBaseTheme = {\n    accentColor: \"#4F5DFF\",\n    accentFg: \"#FFFFFF\",\n    accentLight: \"rgba(62, 116, 253, 0.1)\",\n    textDark: \"#313139\",\n    textMedium: \"#737383\",\n    textLight: \"#B2B2C0\",\n    textBubble: \"#313139\",\n    bgIconHeader: \"#737383\",\n    fgIconHeader: \"#FFFFFF\",\n    textHeader: \"#313139\",\n    textGroupHeader: \"#313139BB\",\n    textHeaderSelected: \"#FFFFFF\",\n    bgCell: \"#FFFFFF\",\n    bgCellMedium: \"#FAFAFB\",\n    bgHeader: \"#F7F7F8\",\n    bgHeaderHasFocus: \"#E9E9EB\",\n    bgHeaderHovered: \"#EFEFF1\",\n    bgBubble: \"#EDEDF3\",\n    bgBubbleSelected: \"#FFFFFF\",\n    bgSearchResult: \"#fff9e3\",\n    borderColor: \"rgba(115, 116, 131, 0.16)\",\n    drilldownBorder: \"rgba(0, 0, 0, 0)\",\n    linkColor: \"#353fb5\",\n    cellHorizontalPadding: 8,\n    cellVerticalPadding: 3,\n    headerIconSize: 18,\n    headerFontStyle: \"600 13px\",\n    baseFontStyle: \"13px\",\n    markerFontStyle: \"9px\",\n    fontFamily: \"Inter, Roboto, -apple-system, BlinkMacSystemFont, avenir next, avenir, segoe ui, helvetica neue, helvetica, Ubuntu, noto, arial, sans-serif\",\n    editorFontSize: \"13px\",\n    lineHeight: 1.4, //unitless scaler depends on your font\n};\n/** @category Theme */\nexport function getDataEditorTheme() {\n    return dataEditorBaseTheme;\n}\n/** @category Theme */\nexport const ThemeContext = React.createContext(dataEditorBaseTheme);\n/** @category Hooks */\nexport function useTheme() {\n    return React.useContext(ThemeContext);\n}\nexport function mergeAndRealizeTheme(theme, ...overlays) {\n    const merged = { ...theme };\n    for (const overlay of overlays) {\n        if (overlay !== undefined) {\n            for (const key in overlay) {\n                // eslint-disable-next-line no-prototype-builtins\n                if (overlay.hasOwnProperty(key)) {\n                    if (key === \"bgCell\") {\n                        merged[key] = blend(overlay[key], merged[key]);\n                    }\n                    else {\n                        merged[key] = overlay[key];\n                    }\n                }\n            }\n        }\n    }\n    if (merged.headerFontFull === undefined ||\n        theme.fontFamily !== merged.fontFamily ||\n        theme.headerFontStyle !== merged.headerFontStyle) {\n        merged.headerFontFull = `${merged.headerFontStyle} ${merged.fontFamily}`;\n    }\n    if (merged.baseFontFull === undefined ||\n        theme.fontFamily !== merged.fontFamily ||\n        theme.baseFontStyle !== merged.baseFontStyle) {\n        merged.baseFontFull = `${merged.baseFontStyle} ${merged.fontFamily}`;\n    }\n    if (merged.markerFontFull === undefined ||\n        theme.fontFamily !== merged.fontFamily ||\n        theme.markerFontStyle !== merged.markerFontStyle) {\n        merged.markerFontFull = `${merged.markerFontStyle} ${merged.fontFamily}`;\n    }\n    return merged;\n}\n//# sourceMappingURL=styles.js.map","import * as React from \"react\";\nimport { isSizedGridColumn, resolveCellsThunk, } from \"../internal/data-grid/data-grid-types.js\";\nconst defaultSize = 150;\nfunction measureCell(ctx, cell, theme, getCellRenderer) {\n    const r = getCellRenderer(cell);\n    return r?.measure?.(ctx, cell, theme) ?? defaultSize;\n}\nexport function measureColumn(ctx, theme, c, colIndex, selectedData, minColumnWidth, maxColumnWidth, removeOutliers, getCellRenderer) {\n    let max = 0;\n    const sizes = selectedData === undefined\n        ? []\n        : selectedData.map(row => {\n            const r = measureCell(ctx, row[colIndex], theme, getCellRenderer);\n            max = Math.max(max, r);\n            return r;\n        });\n    if (sizes.length > 5 && removeOutliers) {\n        max = 0;\n        // Filter out outliers\n        let sum = 0;\n        for (const size of sizes) {\n            sum += size;\n        }\n        const average = sum / sizes.length;\n        // Set sizes that are considered outliers to zero\n        for (let i = 0; i < sizes.length; i++) {\n            if (sizes[i] >= average * 2) {\n                sizes[i] = 0;\n            }\n            else {\n                max = Math.max(max, sizes[i]);\n            }\n        }\n    }\n    max = Math.max(max, ctx.measureText(c.title).width + theme.cellHorizontalPadding * 2 + (c.icon === undefined ? 0 : 28));\n    const final = Math.max(Math.ceil(minColumnWidth), Math.min(Math.floor(maxColumnWidth), Math.ceil(max)));\n    return {\n        ...c,\n        width: final,\n    };\n}\n/** @category Hooks */\nexport function useColumnSizer(columns, rows, getCellsForSelection, clientWidth, minColumnWidth, maxColumnWidth, theme, getCellRenderer, abortController) {\n    const rowsRef = React.useRef(rows);\n    const getCellsForSelectionRef = React.useRef(getCellsForSelection);\n    const themeRef = React.useRef(theme);\n    rowsRef.current = rows;\n    getCellsForSelectionRef.current = getCellsForSelection;\n    themeRef.current = theme;\n    const [canvas, ctx] = React.useMemo(() => {\n        if (typeof window === \"undefined\")\n            return [null, null];\n        const offscreen = document.createElement(\"canvas\");\n        offscreen.style[\"display\"] = \"none\";\n        offscreen.style[\"opacity\"] = \"0\";\n        offscreen.style[\"position\"] = \"fixed\";\n        return [offscreen, offscreen.getContext(\"2d\", { alpha: false })];\n    }, []);\n    React.useLayoutEffect(() => {\n        if (canvas)\n            document.documentElement.append(canvas);\n        return () => {\n            canvas?.remove();\n        };\n    }, [canvas]);\n    const memoMap = React.useRef({});\n    const lastColumns = React.useRef();\n    const [selectedData, setSelectionData] = React.useState();\n    React.useLayoutEffect(() => {\n        const getCells = getCellsForSelectionRef.current;\n        if (getCells === undefined || columns.every(isSizedGridColumn))\n            return;\n        let computeRows = Math.max(1, 10 - Math.floor(columns.length / 10000));\n        let tailRows = 0;\n        if (computeRows < rowsRef.current && computeRows > 1) {\n            computeRows--;\n            tailRows = 1;\n        }\n        const computeArea = {\n            x: 0,\n            y: 0,\n            width: columns.length,\n            height: Math.min(rowsRef.current, computeRows),\n        };\n        const tailComputeArea = {\n            x: 0,\n            y: rowsRef.current - 1,\n            width: columns.length,\n            height: 1,\n        };\n        const fn = async () => {\n            const getResult = getCells(computeArea, abortController.signal);\n            const tailGetResult = tailRows > 0 ? getCells(tailComputeArea, abortController.signal) : undefined;\n            let toSet;\n            // eslint-disable-next-line unicorn/prefer-ternary\n            if (typeof getResult === \"object\") {\n                toSet = getResult;\n            }\n            else {\n                toSet = await resolveCellsThunk(getResult);\n            }\n            if (tailGetResult !== undefined) {\n                // eslint-disable-next-line unicorn/prefer-ternary\n                if (typeof tailGetResult === \"object\") {\n                    toSet = [...toSet, ...tailGetResult];\n                }\n                else {\n                    toSet = [...toSet, ...(await resolveCellsThunk(tailGetResult))];\n                }\n            }\n            lastColumns.current = columns;\n            setSelectionData(toSet);\n        };\n        void fn();\n    }, [abortController.signal, columns]);\n    return React.useMemo(() => {\n        const getRaw = () => {\n            if (columns.every(isSizedGridColumn)) {\n                return columns;\n            }\n            if (ctx === null) {\n                return columns.map(c => {\n                    if (isSizedGridColumn(c))\n                        return c;\n                    return {\n                        ...c,\n                        width: defaultSize,\n                    };\n                });\n            }\n            ctx.font = themeRef.current.baseFontFull;\n            return columns.map((c, colIndex) => {\n                if (isSizedGridColumn(c))\n                    return c;\n                if (memoMap.current[c.id] !== undefined) {\n                    return {\n                        ...c,\n                        width: memoMap.current[c.id],\n                    };\n                }\n                if (selectedData === undefined || lastColumns.current !== columns || c.id === undefined) {\n                    return {\n                        ...c,\n                        width: defaultSize,\n                    };\n                }\n                const r = measureColumn(ctx, theme, c, colIndex, selectedData, minColumnWidth, maxColumnWidth, true, getCellRenderer);\n                memoMap.current[c.id] = r.width;\n                return r;\n            });\n        };\n        let result = getRaw();\n        let totalWidth = 0;\n        let totalGrow = 0;\n        const distribute = [];\n        for (const [i, c] of result.entries()) {\n            totalWidth += c.width;\n            if (c.grow !== undefined && c.grow > 0) {\n                totalGrow += c.grow;\n                distribute.push(i);\n            }\n        }\n        if (totalWidth < clientWidth && distribute.length > 0) {\n            const writeable = [...result];\n            const extra = clientWidth - totalWidth;\n            let remaining = extra;\n            for (let di = 0; di < distribute.length; di++) {\n                const i = distribute[di];\n                const weighted = (result[i].grow ?? 0) / totalGrow;\n                const toAdd = di === distribute.length - 1 ? remaining : Math.min(remaining, Math.floor(extra * weighted));\n                writeable[i] = {\n                    ...result[i],\n                    growOffset: toAdd,\n                    width: result[i].width + toAdd,\n                };\n                remaining -= toAdd;\n            }\n            result = writeable;\n        }\n        return {\n            sizedColumns: result,\n            nonGrowWidth: totalWidth,\n        };\n    }, [clientWidth, columns, ctx, selectedData, theme, minColumnWidth, maxColumnWidth, getCellRenderer]);\n}\n//# sourceMappingURL=use-column-sizer.js.map","/**\n * The base implementation of `_.clamp` which doesn't coerce arguments.\n *\n * @private\n * @param {number} number The number to clamp.\n * @param {number} [lower] The lower bound.\n * @param {number} upper The upper bound.\n * @returns {number} Returns the clamped number.\n */\nfunction baseClamp(number, lower, upper) {\n  if (number === number) {\n    if (upper !== undefined) {\n      number = number <= upper ? number : upper;\n    }\n    if (lower !== undefined) {\n      number = number >= lower ? number : lower;\n    }\n  }\n  return number;\n}\n\nmodule.exports = baseClamp;\n","var baseClamp = require('./_baseClamp'),\n    toNumber = require('./toNumber');\n\n/**\n * Clamps `number` within the inclusive `lower` and `upper` bounds.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Number\n * @param {number} number The number to clamp.\n * @param {number} [lower] The lower bound.\n * @param {number} upper The upper bound.\n * @returns {number} Returns the clamped number.\n * @example\n *\n * _.clamp(-10, -5, 5);\n * // => -5\n *\n * _.clamp(10, -5, 5);\n * // => 5\n */\nfunction clamp(number, lower, upper) {\n  if (upper === undefined) {\n    upper = lower;\n    lower = undefined;\n  }\n  if (upper !== undefined) {\n    upper = toNumber(upper);\n    upper = upper === upper ? upper : 0;\n  }\n  if (lower !== undefined) {\n    lower = toNumber(lower);\n    lower = lower === lower ? lower : 0;\n  }\n  return baseClamp(toNumber(number), lower, upper);\n}\n\nmodule.exports = clamp;\n","/**\n * This method returns `undefined`.\n *\n * @static\n * @memberOf _\n * @since 2.3.0\n * @category Util\n * @example\n *\n * _.times(2, _.noop);\n * // => [undefined, undefined]\n */\nfunction noop() {\n  // No operation performed.\n}\n\nmodule.exports = noop;\n","var Set = require('./_Set'),\n    noop = require('./noop'),\n    setToArray = require('./_setToArray');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Creates a set object of `values`.\n *\n * @private\n * @param {Array} values The values to add to the set.\n * @returns {Object} Returns the new set.\n */\nvar createSet = !(Set && (1 / setToArray(new Set([,-0]))[1]) == INFINITY) ? noop : function(values) {\n  return new Set(values);\n};\n\nmodule.exports = createSet;\n","var SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    cacheHas = require('./_cacheHas'),\n    createSet = require('./_createSet'),\n    setToArray = require('./_setToArray');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of `_.uniqBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n */\nfunction baseUniq(array, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      length = array.length,\n      isCommon = true,\n      result = [],\n      seen = result;\n\n  if (comparator) {\n    isCommon = false;\n    includes = arrayIncludesWith;\n  }\n  else if (length >= LARGE_ARRAY_SIZE) {\n    var set = iteratee ? null : createSet(array);\n    if (set) {\n      return setToArray(set);\n    }\n    isCommon = false;\n    includes = cacheHas;\n    seen = new SetCache;\n  }\n  else {\n    seen = iteratee ? [] : result;\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var seenIndex = seen.length;\n      while (seenIndex--) {\n        if (seen[seenIndex] === computed) {\n          continue outer;\n        }\n      }\n      if (iteratee) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n    else if (!includes(seen, computed, comparator)) {\n      if (seen !== result) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseUniq;\n","var baseUniq = require('./_baseUniq');\n\n/**\n * Creates a duplicate-free version of an array, using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons, in which only the first occurrence of each element\n * is kept. The order of result values is determined by the order they occur\n * in the array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @returns {Array} Returns the new duplicate free array.\n * @example\n *\n * _.uniq([2, 1, 2]);\n * // => [2, 1]\n */\nfunction uniq(array) {\n  return (array && array.length) ? baseUniq(array) : [];\n}\n\nmodule.exports = uniq;\n","const iconHead = `<svg width=\"20\" height=\"20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">`;\nconst headerRowID = (props) => {\n    const fg = props.fgColor;\n    const bg = props.bgColor;\n    return `\n    ${iconHead}<rect x=\"2\" y=\"2\" width=\"16\" height=\"16\" rx=\"2\" fill=\"${bg}\"/><path d=\"M15.75 4h-1.5a.25.25 0 0 0-.177.074L9.308 8.838a3.75 3.75 0 1 0 1.854 1.854l1.155-1.157.967.322a.5.5 0 0 0 .65-.55l-.18-1.208.363-.363.727.331a.5.5 0 0 0 .69-.59l-.254-.904.647-.647A.25.25 0 0 0 16 5.75v-1.5a.25.25 0 0 0-.25-.25zM7.5 13.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0z\" fill=\"${fg}\"/></svg>`;\n};\nconst headerCode = (props) => {\n    const fg = props.fgColor;\n    const bg = props.bgColor;\n    return `\n    ${iconHead}<rect x=\"2\" y=\"2\" width=\"16\" height=\"16\" rx=\"4\" fill=\"${bg}\"/><path d=\"m12.223 13.314 3.052-2.826a.65.65 0 0 0 0-.984l-3.052-2.822c-.27-.25-.634-.242-.865.022-.232.263-.206.636.056.882l2.601 2.41-2.601 2.41c-.262.245-.288.619-.056.882.231.263.595.277.865.026Zm-4.444.005c.266.25.634.241.866-.027.231-.263.206-.636-.06-.882L5.983 10l2.602-2.405c.266-.25.291-.62.06-.887-.232-.263-.596-.272-.866-.022L4.723 9.51a.653.653 0 0 0 0 .983l3.056 2.827Z\" fill=\"${fg}\"/></svg>`;\n};\nconst headerNumber = (props) => {\n    const fg = props.fgColor;\n    const bg = props.bgColor;\n    return `${iconHead}\n    <path d=\"M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z\" fill=\"${bg}\"/>\n    <path d=\"M6.52 12.78H5.51V8.74l-1.33.47v-.87l2.29-.83h.05v5.27zm5.2 0H8.15v-.69l1.7-1.83a6.38 6.38 0 0 0 .34-.4c.09-.11.16-.22.22-.32s.1-.19.12-.27a.9.9 0 0 0 0-.56.63.63 0 0 0-.15-.23.58.58 0 0 0-.22-.15.75.75 0 0 0-.29-.05c-.27 0-.48.08-.62.23a.95.95 0 0 0-.2.65H8.03c0-.24.04-.46.13-.67a1.67 1.67 0 0 1 .97-.91c.23-.1.49-.14.77-.14.26 0 .5.04.7.11.21.08.38.18.52.32.14.13.25.3.32.48a1.74 1.74 0 0 1 .03 1.13 2.05 2.05 0 0 1-.24.47 4.16 4.16 0 0 1-.35.47l-.47.5-1 1.05h2.32v.8zm1.8-3.08h.55c.28 0 .48-.06.61-.2a.76.76 0 0 0 .2-.55.8.8 0 0 0-.05-.28.56.56 0 0 0-.13-.22.6.6 0 0 0-.23-.15.93.93 0 0 0-.32-.05.92.92 0 0 0-.29.05.72.72 0 0 0-.23.12.57.57 0 0 0-.21.46H12.4a1.3 1.3 0 0 1 .5-1.04c.15-.13.33-.23.54-.3a2.48 2.48 0 0 1 1.4 0c.2.06.4.15.55.28.15.13.27.28.36.47.08.19.13.4.13.65a1.15 1.15 0 0 1-.2.65 1.36 1.36 0 0 1-.58.49c.15.05.28.12.38.2a1.14 1.14 0 0 1 .43.62c.03.13.05.26.05.4 0 .25-.05.47-.14.66a1.42 1.42 0 0 1-.4.49c-.16.13-.35.23-.58.3a2.51 2.51 0 0 1-.73.1c-.22 0-.44-.03-.65-.09a1.8 1.8 0 0 1-.57-.28 1.43 1.43 0 0 1-.4-.47 1.41 1.41 0 0 1-.15-.66h1a.66.66 0 0 0 .22.5.87.87 0 0 0 .58.2c.25 0 .45-.07.6-.2a.71.71 0 0 0 .21-.56.97.97 0 0 0-.06-.36.61.61 0 0 0-.18-.25.74.74 0 0 0-.28-.15 1.33 1.33 0 0 0-.37-.04h-.55V9.7z\" fill=\"${fg}\"/>\n  </svg>`;\n};\nconst headerString = (props) => {\n    const fg = props.fgColor;\n    const bg = props.bgColor;\n    return `${iconHead}\n  <path d=\"M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z\" fill=\"${bg}\"/>\n  <path d=\"M8.182 12.4h3.636l.655 1.6H14l-3.454-8H9.455L6 14h1.527l.655-1.6zM10 7.44l1.36 3.651H8.64L10 7.441z\" fill=\"${fg}\"/>\n</svg>`;\n};\nconst headerBoolean = (props) => {\n    const fg = props.fgColor;\n    const bg = props.bgColor;\n    return `${iconHead}\n    <path\n        d=\"M16.2222 2H3.77778C2.8 2 2 2.8 2 3.77778V16.2222C2 17.2 2.8 18 3.77778 18H16.2222C17.2 18 17.9911 17.2 17.9911 16.2222L18 3.77778C18 2.8 17.2 2 16.2222 2Z\"\n        fill=\"${bg}\"\n    />\n    <path\n        fill-rule=\"evenodd\"\n        clip-rule=\"evenodd\"\n        d=\"M7.66667 6.66669C5.73368 6.66669 4.16667 8.15907 4.16667 10C4.16667 11.841 5.73368 13.3334 7.66667 13.3334H12.3333C14.2663 13.3334 15.8333 11.841 15.8333 10C15.8333 8.15907 14.2663 6.66669 12.3333 6.66669H7.66667ZM12.5 12.5C13.8807 12.5 15 11.3807 15 10C15 8.61931 13.8807 7.50002 12.5 7.50002C11.1193 7.50002 10 8.61931 10 10C10 11.3807 11.1193 12.5 12.5 12.5Z\"\n        fill=\"${fg}\"\n    />\n</svg>`;\n};\nconst headerUri = (props) => {\n    const fg = props.fgColor;\n    const bg = props.bgColor;\n    return `${iconHead}\n<path d=\"M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z\" fill=\"${bg}\"/>\n<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M10.29 4.947a3.368 3.368 0 014.723.04 3.375 3.375 0 01.041 4.729l-.009.009-1.596 1.597a3.367 3.367 0 01-5.081-.364.71.71 0 011.136-.85 1.95 1.95 0 002.942.21l1.591-1.593a1.954 1.954 0 00-.027-2.733 1.95 1.95 0 00-2.732-.027l-.91.907a.709.709 0 11-1.001-1.007l.915-.911.007-.007z\" fill=\"${fg}\"/>\n<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M6.55 8.678a3.368 3.368 0 015.082.364.71.71 0 01-1.136.85 1.95 1.95 0 00-2.942-.21l-1.591 1.593a1.954 1.954 0 00.027 2.733 1.95 1.95 0 002.73.028l.906-.906a.709.709 0 111.003 1.004l-.91.91-.008.01a3.368 3.368 0 01-4.724-.042 3.375 3.375 0 01-.041-4.728l.009-.009L6.55 8.678z\" fill=\"${fg}\"/>\n</svg>\n  `;\n};\nconst renameIcon = (props) => {\n    const bg = props.bgColor;\n    return `${iconHead}\n    <path stroke=\"${bg}\" stroke-width=\"2\" d=\"M12 3v14\"/>\n    <path stroke=\"${bg}\" stroke-width=\"2\" stroke-linecap=\"round\" d=\"M10 4h4m-4 12h4\"/>\n    <path d=\"M11 14h4a3 3 0 0 0 3-3V9a3 3 0 0 0-3-3h-4v2h4a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-4v2ZM9.5 8H5a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h4.5v2H5a3 3 0 0 1-3-3V9a3 3 0 0 1 3-3h4.5v2Z\" fill=\"${bg}\"/>\n  </svg>\n`;\n};\nconst headerAudioUri = headerUri;\nconst headerVideoUri = (props) => {\n    const fg = props.fgColor;\n    const bg = props.bgColor;\n    return `${iconHead}\n  <path d=\"M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z\" fill=\"${bg}\"/>\n  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M7 13.138a.5.5 0 00.748.434l5.492-3.138a.5.5 0 000-.868L7.748 6.427A.5.5 0 007 6.862v6.276z\" fill=\"${fg}\"/>\n</svg>`;\n};\nconst headerEmoji = (props) => {\n    const fg = props.fgColor;\n    const bg = props.bgColor;\n    return `\n    ${iconHead}\n    <path d=\"M10 5a5 5 0 1 0 0 10 5 5 0 0 0 0-10zm0 9.17A4.17 4.17 0 0 1 5.83 10 4.17 4.17 0 0 1 10 5.83 4.17 4.17 0 0 1 14.17 10 4.17 4.17 0 0 1 10 14.17z\" fill=\"${fg}\"/>\n    <path d=\"M8.33 8.21a.83.83 0 1 0-.03 1.67.83.83 0 0 0 .03-1.67zm3.34 0a.83.83 0 1 0-.04 1.67.83.83 0 0 0 .04-1.67z\" fill=\"${fg}\"/>\n    <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M14.53 13.9a2.82 2.82 0 0 1-5.06 0l.77-.38a1.97 1.97 0 0 0 3.52 0l.77.39z\" fill=\"${fg}\"/>\n    <path d=\"M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z\" fill=\"${bg}\"/>\n    <path d=\"M10 4a6 6 0 1 0 0 12 6 6 0 0 0 0-12zm0 11a5 5 0 1 1 .01-10.01A5 5 0 0 1 10 15z\" fill=\"${fg}\"/>\n    <path d=\"M8 7.86a1 1 0 1 0-.04 2 1 1 0 0 0 .04-2zm4 0a1 1 0 1 0-.04 2 1 1 0 0 0 .04-2z\" fill=\"${fg}\"/>\n    <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M12.53 11.9a2.82 2.82 0 0 1-5.06 0l.77-.38a1.97 1.97 0 0 0 3.52 0l.77.39z\" fill=\"${fg}\"/>\n  </svg>`;\n};\nconst headerImage = (props) => {\n    const fg = props.fgColor;\n    const bg = props.bgColor;\n    return `${iconHead}\n  <path d=\"M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z\" fill=\"${bg}\"/>\n  <path opacity=\".5\" fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M12.499 10.801a.5.5 0 01.835 0l2.698 4.098a.5.5 0 01-.418.775H10.22a.5.5 0 01-.417-.775l2.697-4.098z\" fill=\"${fg}\"/>\n  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8.07 8.934a.5.5 0 01.824 0l4.08 5.958a.5.5 0 01-.412.782h-8.16a.5.5 0 01-.413-.782l4.08-5.958zM13.75 8.333a2.083 2.083 0 100-4.166 2.083 2.083 0 000 4.166z\" fill=\"${fg}\"/>\n</svg>`;\n};\nconst headerPhone = (props) => {\n    const fg = props.fgColor;\n    const bg = props.bgColor;\n    return `\n    ${iconHead}\n    <path fill=\"${fg}\" d=\"M3 3h14v14H3z\"/>\n    <path d=\"M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2zm-7.24 9.78h1.23c.15 0 .27.06.36.18l.98 1.28a.43.43 0 0 1-.05.58l-1.2 1.21a.45.45 0 0 1-.6.04A6.72 6.72 0 0 1 7.33 10c0-.61.1-1.2.25-1.78a6.68 6.68 0 0 1 2.12-3.3.44.44 0 0 1 .6.04l1.2 1.2c.16.17.18.42.05.59l-.98 1.29a.43.43 0 0 1-.36.17H8.98A5.38 5.38 0 0 0 8.67 10c0 .62.11 1.23.3 1.79z\" fill=\"${bg}\"/>\n  </svg>`;\n};\nconst headerMarkdown = (props) => {\n    const fg = props.fgColor;\n    const bg = props.bgColor;\n    return `\n    ${iconHead}\n    <path d=\"M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z\" fill=\"${bg}\"/>\n    <path d=\"m13.49 13.15-2.32-3.27h1.4V7h1.86v2.88h1.4l-2.34 3.27zM11 13H9v-3l-1.5 1.92L6 10v3H4V7h2l1.5 2L9 7h2v6z\" fill=\"${fg}\"/>\n  </svg>`;\n};\nconst headerDate = (props) => {\n    const fg = props.fgColor;\n    const bg = props.bgColor;\n    return `${iconHead}\n  <path d=\"M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z\" fill=\"${bg}\"/>\n  <path d=\"M14.8 4.182h-.6V3H13v1.182H7V3H5.8v1.182h-.6c-.66 0-1.2.532-1.2 1.182v9.454C4 15.468 4.54 16 5.2 16h9.6c.66 0 1.2-.532 1.2-1.182V5.364c0-.65-.54-1.182-1.2-1.182zm0 10.636H5.2V7.136h9.6v7.682z\" fill=\"${fg}\"/>\n</svg>`;\n};\nconst headerTime = (props) => {\n    const fg = props.fgColor;\n    const bg = props.bgColor;\n    return `\n    ${iconHead}\n    <path d=\"M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z\" fill=\"${bg}\"/>\n    <path d=\"M10 4a6 6 0 0 0-6 6 6 6 0 0 0 6 6 6 6 0 0 0 6-6 6 6 0 0 0-6-6zm0 10.8A4.8 4.8 0 0 1 5.2 10a4.8 4.8 0 1 1 4.8 4.8z\" fill=\"${fg}\"/>\n    <path d=\"M10 7H9v3.93L12.5 13l.5-.8-3-1.76V7z\" fill=\"${fg}\"/>\n  </svg>`;\n};\nconst headerEmail = (props) => {\n    const fg = props.fgColor;\n    const bg = props.bgColor;\n    return `${iconHead}\n  <rect x=\"2\" y=\"2\" width=\"16\" height=\"16\" rx=\"2\" fill=\"${bg}\"/>\n  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M10 8.643a1.357 1.357 0 100 2.714 1.357 1.357 0 000-2.714zM7.357 10a2.643 2.643 0 115.286 0 2.643 2.643 0 01-5.286 0z\" fill=\"${fg}\"/>\n  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M7.589 4.898A5.643 5.643 0 0115.643 10v.5a2.143 2.143 0 01-4.286 0V8a.643.643 0 011.286 0v2.5a.857.857 0 001.714 0V10a4.357 4.357 0 10-1.708 3.46.643.643 0 01.782 1.02 5.643 5.643 0 11-5.842-9.582z\" fill=\"${fg}\"/>\n</svg>`;\n};\nconst headerReference = (props) => {\n    const fg = props.fgColor;\n    const bg = props.bgColor;\n    return `\n    ${iconHead}\n    <rect x=\"2\" y=\"8\" width=\"10\" height=\"8\" rx=\"2\" fill=\"${bg}\"/>\n    <rect x=\"8\" y=\"4\" width=\"10\" height=\"8\" rx=\"2\" fill=\"${bg}\"/>\n    <path d=\"M10.68 7.73V6l2.97 3.02-2.97 3.02v-1.77c-2.13 0-3.62.7-4.68 2.2.43-2.15 1.7-4.31 4.68-4.74z\" fill=\"${fg}\"/>\n  </svg>`;\n};\nconst headerIfThenElse = (props) => {\n    const fg = props.fgColor;\n    const bg = props.bgColor;\n    return `${iconHead}\n  <path fill=\"${fg}\" d=\"M4 3h12v14H4z\"/>\n  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M3.6 2A1.6 1.6 0 002 3.6v12.8A1.6 1.6 0 003.6 18h12.8a1.6 1.6 0 001.6-1.6V3.6A1.6 1.6 0 0016.4 2H3.6zm11.3 10.8a.7.7 0 01.7.7v1.4a.7.7 0 01-.7.7h-1.4a.7.7 0 01-.7-.7v-1.4a.7.7 0 01.6-.693.117.117 0 00.1-.115V10.35a.117.117 0 00-.117-.116h-2.8a.117.117 0 00-.117.116v2.333c0 .064.053.117.117.117h.117a.7.7 0 01.7.7v1.4a.7.7 0 01-.7.7H9.3a.7.7 0 01-.7-.7v-1.4a.7.7 0 01.7-.7h.117a.117.117 0 00.117-.117V10.35a.117.117 0 00-.117-.117h-2.8a.117.117 0 00-.117.117v2.342c0 .058.042.106.1.115a.7.7 0 01.6.693v1.4a.7.7 0 01-.7.7H5.1a.7.7 0 01-.7-.7v-1.4a.7.7 0 01.7-.7h.35a.116.116 0 00.116-.117v-2.45c0-.515.418-.933.934-.933h2.917a.117.117 0 00.117-.117V6.85a.117.117 0 00-.117-.116h-2.45a.7.7 0 01-.7-.7V5.1a.7.7 0 01.7-.7h6.067a.7.7 0 01.7.7v.934a.7.7 0 01-.7.7h-2.45a.117.117 0 00-.118.116v2.333c0 .064.053.117.117.117H13.5c.516 0 .934.418.934.934v2.45c0 .063.052.116.116.116h.35z\" fill=\"${bg}\"/>\n</svg>`;\n};\nconst headerSingleValue = (props) => {\n    const fg = props.fgColor;\n    const bg = props.bgColor;\n    return `\n    ${iconHead}\n    <rect x=\"2\" y=\"2\" width=\"16\" height=\"16\" rx=\"2\" fill=\"${bg}\"/>\n    <path d=\"M9.98 13.33c.45 0 .74-.3.73-.75l-.01-.1-.16-1.67 1.45 1.05a.81.81 0 0 0 .5.18c.37 0 .72-.32.72-.76 0-.3-.17-.54-.49-.68l-1.63-.77 1.63-.77c.32-.14.49-.37.49-.67 0-.45-.34-.76-.71-.76a.81.81 0 0 0-.5.18l-1.47 1.03.16-1.74.01-.08c.01-.46-.27-.76-.72-.76-.46 0-.76.32-.75.76l.01.08.16 1.74-1.47-1.03a.77.77 0 0 0-.5-.18.74.74 0 0 0-.72.76c0 .3.17.53.49.67l1.63.77-1.62.77c-.32.14-.5.37-.5.68 0 .44.35.75.72.75a.78.78 0 0 0 .5-.17L9.4 10.8l-.16 1.68v.09c-.02.44.28.75.74.75z\" fill=\"${fg}\"/>\n  </svg>`;\n};\nconst headerLookup = (props) => {\n    const fg = props.fgColor;\n    const bg = props.bgColor;\n    return `\n    ${iconHead}\n    <rect x=\"2\" y=\"2\" width=\"16\" height=\"16\" rx=\"2\" fill=\"${bg}\"/>\n    <path d=\"M8 5.83H5.83a.83.83 0 0 0 0 1.67h1.69A4.55 4.55 0 0 1 8 5.83zm-.33 3.34H5.83a.83.83 0 0 0 0 1.66h2.72a4.57 4.57 0 0 1-.88-1.66zM5.83 12.5a.83.83 0 0 0 0 1.67h7.5a.83.83 0 1 0 0-1.67h-7.5zm8.8-2.9a3.02 3.02 0 0 0 .46-1.6c0-1.66-1.32-3-2.94-3C10.52 5 9.2 6.34 9.2 8s1.31 3 2.93 3c.58 0 1.11-.17 1.56-.47l2.04 2.08.93-.94-2.04-2.08zm-2.48.07c-.9 0-1.63-.75-1.63-1.67s.73-1.67 1.63-1.67c.9 0 1.63.75 1.63 1.67s-.73 1.67-1.63 1.67z\" fill=\"${fg}\"/>\n  </svg>`;\n};\nconst headerTextTemplate = (props) => {\n    const fg = props.fgColor;\n    const bg = props.bgColor;\n    return `${iconHead}\n  <rect x=\"2\" y=\"2\" width=\"16\" height=\"16\" rx=\"2\" fill=\"${bg}\"/>\n  <path d=\"M7.676 4.726V3l2.976 3.021-2.976 3.022v-1.77c-2.125 0-3.613.69-4.676 2.201.425-2.158 1.7-4.316 4.676-4.748zM10.182 14.4h3.636l.655 1.6H16l-3.454-8h-1.091L8 16h1.527l.655-1.6zM12 9.44l1.36 3.65h-2.72L12 9.44z\" fill=\"${fg}\"/>\n</svg>`;\n};\nconst headerMath = (props) => {\n    const fg = props.fgColor;\n    const bg = props.bgColor;\n    return `${iconHead}\n  <rect x=\"2\" y=\"2\" width=\"16\" height=\"16\" rx=\"2\" fill=\"${bg}\"/>\n  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M4.167 5.417a.833.833 0 100 1.666h4.166a.833.833 0 100-1.666H4.167z\" fill=\"${fg}\"/>\n  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M7.083 4.167a.833.833 0 10-1.666 0v4.166a.833.833 0 101.666 0V4.167zM11.667 5.417a.833.833 0 100 1.666h4.166a.833.833 0 100-1.666h-4.166zM5.367 11.688a.833.833 0 00-1.179 1.179l2.947 2.946a.833.833 0 001.178-1.178l-2.946-2.947z\" fill=\"${fg}\"/>\n  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8.313 12.867a.833.833 0 10-1.178-1.179l-2.947 2.947a.833.833 0 101.179 1.178l2.946-2.946z\" fill=\"${fg}\"/>\n  <path d=\"M10.833 12.5c0-.46.373-.833.834-.833h4.166a.833.833 0 110 1.666h-4.166a.833.833 0 01-.834-.833zM10.833 15c0-.46.373-.833.834-.833h4.166a.833.833 0 110 1.666h-4.166a.833.833 0 01-.834-.833z\" fill=\"${fg}\"/>\n</svg>`;\n};\nconst headerRollup = (props) => {\n    const fg = props.fgColor;\n    const bg = props.bgColor;\n    return `\n    ${iconHead}\n    <path d=\"M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z\" fill=\"${bg}\"/>\n    <path d=\"M10 8.84a1.16 1.16 0 1 0 0 2.32 1.16 1.16 0 0 0 0-2.32zm3.02 3.61a3.92 3.92 0 0 0 .78-3.28.49.49 0 1 0-.95.2c.19.87-.02 1.78-.58 2.47a2.92 2.92 0 1 1-4.13-4.08 2.94 2.94 0 0 1 2.43-.62.49.49 0 1 0 .17-.96 3.89 3.89 0 1 0 2.28 6.27zM10 4.17a5.84 5.84 0 0 0-5.44 7.93.49.49 0 1 0 .9-.35 4.86 4.86 0 1 1 2.5 2.67.49.49 0 1 0-.4.88c.76.35 1.6.54 2.44.53a5.83 5.83 0 0 0 0-11.66zm3.02 3.5a.7.7 0 1 0-1.4 0 .7.7 0 0 0 1.4 0zm-6.97 5.35a.7.7 0 1 1 0 1.4.7.7 0 0 1 0-1.4z\" fill=\"${fg}\"/>\n  </svg>`;\n};\nconst headerJoinStrings = (props) => {\n    const fg = props.fgColor;\n    const bg = props.bgColor;\n    return `${iconHead}\n  <rect x=\"2\" y=\"2\" width=\"16\" height=\"16\" rx=\"2\" fill=\"${bg}\"/>\n  <path d=\"M12.4 13.565c1.865-.545 3.645-2.083 3.645-4.396 0-1.514-.787-2.604-2.071-2.604C12.69 6.565 12 7.63 12 8.939c1.114.072 1.865.726 1.865 1.683 0 .933-.8 1.647-1.84 2.023l.375.92zM4 5h6v2H4zM4 9h5v2H4zM4 13h4v2H4z\" fill=\"${fg}\"/>\n</svg>`;\n};\nconst headerSplitString = (props) => {\n    const fg = props.fgColor;\n    const bg = props.bgColor;\n    return `\n    ${iconHead}\n    <rect x=\"2\" y=\"2\" width=\"16\" height=\"16\" rx=\"2\" fill=\"${bg}\"/>\n    <path d=\"M12.4 13.56c1.86-.54 3.65-2.08 3.65-4.4 0-1.5-.8-2.6-2.08-2.6S12 7.64 12 8.95c1.11.07 1.86.73 1.86 1.68 0 .94-.8 1.65-1.83 2.03l.37.91zM4 5h6v2H4zm0 4h5v2H4zm0 4h4v2H4z\" fill=\"${fg}\"/>\n  </svg>`;\n};\nconst headerGeoDistance = (props) => {\n    const fg = props.fgColor;\n    const bg = props.bgColor;\n    return `${iconHead}\n  <path d=\"M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z\" fill=\"${bg}\"/>\n  <path d=\"M10 7a1 1 0 100-2v2zm0 6a1 1 0 100 2v-2zm0-8H7v2h3V5zm-3 6h5V9H7v2zm5 2h-2v2h2v-2zm1-1a1 1 0 01-1 1v2a3 3 0 003-3h-2zm-1-1a1 1 0 011 1h2a3 3 0 00-3-3v2zM4 8a3 3 0 003 3V9a1 1 0 01-1-1H4zm3-3a3 3 0 00-3 3h2a1 1 0 011-1V5z\" fill=\"${fg}\"/>\n  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M4.856 12.014a.5.5 0 00-.712.702L5.409 14l-1.265 1.284a.5.5 0 00.712.702l1.255-1.274 1.255 1.274a.5.5 0 00.712-.702L6.813 14l1.265-1.284a.5.5 0 00-.712-.702L6.11 13.288l-1.255-1.274zM12.856 4.014a.5.5 0 00-.712.702L13.409 6l-1.265 1.284a.5.5 0 10.712.702l1.255-1.274 1.255 1.274a.5.5 0 10.712-.702L14.813 6l1.265-1.284a.5.5 0 00-.712-.702L14.11 5.288l-1.255-1.274z\" fill=\"${fg}\"/>\n</svg>`;\n};\nconst headerArray = (props) => {\n    const fg = props.fgColor;\n    const bg = props.bgColor;\n    return `${iconHead}\n  <rect x=\"2\" y=\"2\" width=\"16\" height=\"16\" rx=\"2\" fill=\"${bg}\"/>\n  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M14.25 7.25a.75.75 0 000-1.5h-6.5a.75.75 0 100 1.5h6.5zM15 10a.75.75 0 01-.75.75h-6.5a.75.75 0 010-1.5h6.5A.75.75 0 0115 10zm-.75 4.25a.75.75 0 000-1.5h-6.5a.75.75 0 000 1.5h6.5zm-8.987-7a.75.75 0 100-1.5.75.75 0 000 1.5zm.75 2.75a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm-.75 4.25a.75.75 0 100-1.5.75.75 0 000 1.5z\" fill=\"${fg}\"/>\n</svg>`;\n};\nconst rowOwnerOverlay = (props) => {\n    const fg = props.fgColor;\n    const bg = props.bgColor;\n    return `\n    <svg width=\"18\" height=\"18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M2 15v1h14v-2.5c0-.87-.44-1.55-.98-2.04a6.19 6.19 0 0 0-1.9-1.14 12.1 12.1 0 0 0-2.48-.67A4 4 0 1 0 5 6a4 4 0 0 0 2.36 3.65c-.82.13-1.7.36-2.48.67-.69.28-1.37.65-1.9 1.13A2.8 2.8 0 0 0 2 13.5V15z\" fill=\"${bg}\" stroke=\"${fg}\" stroke-width=\"2\"/>\n  </svg>`;\n};\nconst protectedColumnOverlay = (props) => {\n    const fg = props.fgColor;\n    const bg = props.bgColor;\n    return `\n    <svg width=\"18\" height=\"18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M12.43 6.04v-.18a3.86 3.86 0 0 0-7.72 0v.18A2.15 2.15 0 0 0 3 8.14v5.72C3 15.04 3.96 16 5.14 16H12c1.18 0 2.14-.96 2.14-2.14V8.14c0-1.03-.73-1.9-1.71-2.1zM7.86 6v-.14a.71.71 0 1 1 1.43 0V6H7.86z\" fill=\"${bg}\" stroke=\"${fg}\" stroke-width=\"2\"/>\n  </svg>\n`;\n};\nexport const sprites = {\n    headerRowID,\n    headerNumber,\n    headerCode,\n    headerString,\n    headerBoolean,\n    headerAudioUri,\n    headerVideoUri,\n    headerEmoji,\n    headerImage,\n    headerUri,\n    headerPhone,\n    headerMarkdown,\n    headerDate,\n    headerTime,\n    headerEmail,\n    headerReference,\n    headerIfThenElse,\n    headerSingleValue,\n    headerLookup,\n    headerTextTemplate,\n    headerMath,\n    headerRollup,\n    headerJoinStrings,\n    headerSplitString,\n    headerGeoDistance,\n    headerArray,\n    rowOwnerOverlay,\n    protectedColumnOverlay,\n    renameIcon,\n};\n//# sourceMappingURL=sprites.js.map","import {} from \"./sprites.js\";\nfunction getColors(variant, theme) {\n    if (variant === \"normal\") {\n        return [theme.bgIconHeader, theme.fgIconHeader];\n    }\n    else if (variant === \"selected\") {\n        return [\"white\", theme.accentColor];\n    }\n    else {\n        return [theme.accentColor, theme.bgHeader];\n    }\n}\n/** @category Columns */\nexport class SpriteManager {\n    onSettled;\n    spriteMap = new Map();\n    headerIcons;\n    inFlight = 0;\n    constructor(headerIcons, onSettled) {\n        this.onSettled = onSettled;\n        this.headerIcons = headerIcons ?? {};\n    }\n    drawSprite(sprite, variant, ctx, x, y, size, theme, alpha = 1) {\n        const [bgColor, fgColor] = getColors(variant, theme);\n        const rSize = size * Math.ceil(window.devicePixelRatio);\n        const key = `${bgColor}_${fgColor}_${rSize}_${sprite}`;\n        let spriteCanvas = this.spriteMap.get(key);\n        if (spriteCanvas === undefined) {\n            const spriteCb = this.headerIcons[sprite];\n            if (spriteCb === undefined)\n                return;\n            spriteCanvas = document.createElement(\"canvas\");\n            const spriteCtx = spriteCanvas.getContext(\"2d\");\n            if (spriteCtx === null)\n                return;\n            const imgSource = new Image();\n            imgSource.src = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(spriteCb({ fgColor, bgColor }))}`;\n            this.spriteMap.set(key, spriteCanvas);\n            const promise = imgSource.decode();\n            if (promise === undefined)\n                return;\n            this.inFlight++;\n            promise\n                .then(() => {\n                spriteCtx.drawImage(imgSource, 0, 0, rSize, rSize);\n            })\n                .finally(() => {\n                this.inFlight--;\n                if (this.inFlight === 0) {\n                    this.onSettled();\n                }\n            });\n        }\n        else {\n            if (alpha < 1) {\n                ctx.globalAlpha = alpha;\n            }\n            ctx.drawImage(spriteCanvas, 0, 0, rSize, rSize, x, y, size, size);\n            if (alpha < 1) {\n                ctx.globalAlpha = 1;\n            }\n        }\n    }\n}\n//# sourceMappingURL=data-grid-sprites.js.map","import {} from \"../data-grid-types.js\";\nimport { isGroupEqual } from \"./data-grid-lib.js\";\nexport function getSkipPoint(drawRegions) {\n    if (drawRegions.length === 0)\n        return undefined;\n    let drawRegionsLowestY;\n    for (const dr of drawRegions) {\n        drawRegionsLowestY = Math.min(drawRegionsLowestY ?? dr.y, dr.y);\n    }\n}\nexport function walkRowsInCol(startRow, drawY, height, rows, getRowHeight, freezeTrailingRows, hasAppendRow, skipToY, cb) {\n    skipToY = skipToY ?? drawY;\n    let y = drawY;\n    let row = startRow;\n    const rowEnd = rows - freezeTrailingRows;\n    let didBreak = false;\n    while (y < height && row < rowEnd) {\n        const rh = getRowHeight(row);\n        if (y + rh > skipToY && cb(y, row, rh, false, hasAppendRow && row === rows - 1) === true) {\n            didBreak = true;\n            break;\n        }\n        y += rh;\n        row++;\n    }\n    if (didBreak)\n        return;\n    y = height;\n    for (let fr = 0; fr < freezeTrailingRows; fr++) {\n        row = rows - 1 - fr;\n        const rh = getRowHeight(row);\n        y -= rh;\n        cb(y, row, rh, true, hasAppendRow && row === rows - 1);\n    }\n}\nexport function walkColumns(effectiveCols, cellYOffset, translateX, translateY, totalHeaderHeight, cb) {\n    let x = 0;\n    let clipX = 0; // this tracks the total width of sticky cols\n    const drawY = totalHeaderHeight + translateY;\n    for (const c of effectiveCols) {\n        const drawX = c.sticky ? clipX : x + translateX;\n        if (cb(c, drawX, drawY, c.sticky ? 0 : clipX, cellYOffset) === true) {\n            break;\n        }\n        x += c.width;\n        clipX += c.sticky ? c.width : 0;\n    }\n}\nexport function walkGroups(effectiveCols, width, translateX, groupHeaderHeight, cb) {\n    let x = 0;\n    let clipX = 0;\n    for (let index = 0; index < effectiveCols.length; index++) {\n        const startCol = effectiveCols[index];\n        let end = index + 1;\n        let boxWidth = startCol.width;\n        if (startCol.sticky) {\n            clipX += boxWidth;\n        }\n        while (end < effectiveCols.length &&\n            isGroupEqual(effectiveCols[end].group, startCol.group) &&\n            effectiveCols[end].sticky === effectiveCols[index].sticky) {\n            const endCol = effectiveCols[end];\n            boxWidth += endCol.width;\n            end++;\n            index++;\n            if (endCol.sticky) {\n                clipX += endCol.width;\n            }\n        }\n        const t = startCol.sticky ? 0 : translateX;\n        const localX = x + t;\n        const delta = startCol.sticky ? 0 : Math.max(0, clipX - localX);\n        const w = Math.min(boxWidth - delta, width - (localX + delta));\n        cb([startCol.sourceIndex, effectiveCols[end - 1].sourceIndex], startCol.group ?? \"\", localX + delta, 0, w, groupHeaderHeight);\n        x += boxWidth;\n    }\n}\nexport function getSpanBounds(span, cellX, cellY, cellW, cellH, column, allColumns) {\n    const [startCol, endCol] = span;\n    let frozenRect;\n    let contentRect;\n    const firstNonSticky = allColumns.find(x => !x.sticky)?.sourceIndex ?? 0;\n    if (endCol > firstNonSticky) {\n        const renderFromCol = Math.max(startCol, firstNonSticky);\n        let tempX = cellX;\n        let tempW = cellW;\n        for (let x = column.sourceIndex - 1; x >= renderFromCol; x--) {\n            tempX -= allColumns[x].width;\n            tempW += allColumns[x].width;\n        }\n        for (let x = column.sourceIndex + 1; x <= endCol; x++) {\n            tempW += allColumns[x].width;\n        }\n        contentRect = {\n            x: tempX,\n            y: cellY,\n            width: tempW,\n            height: cellH,\n        };\n    }\n    if (firstNonSticky > startCol) {\n        const renderToCol = Math.min(endCol, firstNonSticky - 1);\n        let tempX = cellX;\n        let tempW = cellW;\n        for (let x = column.sourceIndex - 1; x >= startCol; x--) {\n            tempX -= allColumns[x].width;\n            tempW += allColumns[x].width;\n        }\n        for (let x = column.sourceIndex + 1; x <= renderToCol; x++) {\n            tempW += allColumns[x].width;\n        }\n        frozenRect = {\n            x: tempX,\n            y: cellY,\n            width: tempW,\n            height: cellH,\n        };\n    }\n    return [frozenRect, contentRect];\n}\n//# sourceMappingURL=data-grid-render.walk.js.map","/* eslint-disable unicorn/prefer-ternary */\nimport { itemIsInRect } from \"../internal/data-grid/render/data-grid-lib.js\";\nexport function getClosestRect(rect, px, py, allowedDirections) {\n    if (allowedDirections === \"any\")\n        return combineRects(rect, { x: px, y: py, width: 1, height: 1 });\n    if (allowedDirections === \"vertical\")\n        px = rect.x;\n    if (allowedDirections === \"horizontal\")\n        py = rect.y;\n    // Check if the point is inside the rectangle\n    if (itemIsInRect([px, py], rect)) {\n        return undefined;\n    }\n    // Calculate distances to the closest edges\n    const distanceToLeft = px - rect.x;\n    const distanceToRight = rect.x + rect.width - px;\n    const distanceToTop = py - rect.y + 1;\n    const distanceToBottom = rect.y + rect.height - py;\n    // Find the minimum distance\n    const minDistance = Math.min(allowedDirections === \"vertical\" ? Number.MAX_SAFE_INTEGER : distanceToLeft, allowedDirections === \"vertical\" ? Number.MAX_SAFE_INTEGER : distanceToRight, allowedDirections === \"horizontal\" ? Number.MAX_SAFE_INTEGER : distanceToTop, allowedDirections === \"horizontal\" ? Number.MAX_SAFE_INTEGER : distanceToBottom);\n    // eslint-disable-next-line unicorn/prefer-switch\n    if (minDistance === distanceToBottom) {\n        return { x: rect.x, y: rect.y + rect.height, width: rect.width, height: py - rect.y - rect.height + 1 };\n    }\n    else if (minDistance === distanceToTop) {\n        return { x: rect.x, y: py, width: rect.width, height: rect.y - py };\n    }\n    else if (minDistance === distanceToRight) {\n        return { x: rect.x + rect.width, y: rect.y, width: px - rect.x - rect.width + 1, height: rect.height };\n    }\n    else {\n        return { x: px, y: rect.y, width: rect.x - px, height: rect.height };\n    }\n}\nexport function intersectRect(x1, y1, w1, h1, x2, y2, w2, h2) {\n    return x1 <= x2 + w2 && x2 <= x1 + w1 && y1 <= y2 + h2 && y2 <= y1 + h1;\n}\nexport function pointInRect(rect, x, y) {\n    return x >= rect.x && x <= rect.x + rect.width && y >= rect.y && y <= rect.y + rect.height;\n}\nexport function combineRects(a, b) {\n    const x = Math.min(a.x, b.x);\n    const y = Math.min(a.y, b.y);\n    const width = Math.max(a.x + a.width, b.x + b.width) - x;\n    const height = Math.max(a.y + a.height, b.y + b.height) - y;\n    return { x, y, width, height };\n}\nexport function rectContains(a, b) {\n    return a.x <= b.x && a.y <= b.y && a.x + a.width >= b.x + b.width && a.y + a.height >= b.y + b.height;\n}\n/**\n * This function is absolutely critical for the performance of the fill handle and highlight regions. If you don't\n * hug rectanges when they are dashed and they are huge you will get giant GPU stalls. The reason for the mod is\n * if you don't respect the dash stroke size you will get weird artificts as the rectangle changes sizes (the dashes\n * won't line up from one frame to the next)\n */\nexport function hugRectToTarget(rect, width, height, mod) {\n    // Combine checks for early return\n    if (rect.x > width ||\n        rect.y > height ||\n        (rect.x < 0 && rect.y < 0 && rect.x + rect.width > width && rect.y + rect.height > height)) {\n        return undefined;\n    }\n    // Direct return if the rectangle is completely within bounds\n    if (rect.x >= 0 && rect.y >= 0 && rect.x + rect.width <= width && rect.y + rect.height <= height) {\n        return rect;\n    }\n    // Pre-compute constants for boundaries, we are giving ourselves slop here because we don't want to have weird\n    // issues when scaling is applied. 4px is more than enough slop.\n    const leftMax = -4;\n    const topMax = -4;\n    const rightMax = width + 4;\n    const bottomMax = height + 4;\n    // Pre-compute boundary overflows\n    const leftOverflow = leftMax - rect.x;\n    const rightOverflow = rect.x + rect.width - rightMax;\n    const topOverflow = topMax - rect.y;\n    const bottomOverflow = rect.y + rect.height - bottomMax;\n    // Adjust if necessary, using simplified calculations\n    const left = leftOverflow > 0 ? rect.x + Math.floor(leftOverflow / mod) * mod : rect.x;\n    const right = rightOverflow > 0 ? rect.x + rect.width - Math.floor(rightOverflow / mod) * mod : rect.x + rect.width;\n    const top = topOverflow > 0 ? rect.y + Math.floor(topOverflow / mod) * mod : rect.y;\n    const bottom = bottomOverflow > 0 ? rect.y + rect.height - Math.floor(bottomOverflow / mod) * mod : rect.y + rect.height;\n    return { x: left, y: top, width: right - left, height: bottom - top };\n}\nexport function splitRectIntoRegions(rect, splitIndicies, width, height, splitLocations) {\n    const [lSplit, tSplit, rSplit, bSplit] = splitIndicies;\n    const [lClip, tClip, rClip, bClip] = splitLocations;\n    const { x: inX, y: inY, width: inW, height: inH } = rect;\n    const result = [];\n    if (inW <= 0 || inH <= 0)\n        return result;\n    const inRight = inX + inW;\n    const inBottom = inY + inH;\n    // The goal is to split the inbound rect into up to 9 regions based on the provided split indicies which are\n    // more or less cut lines. The cut lines are whole numbers as is the rect. We are dividing cells on a table.\n    // In theory there can be up to 9 regions returned, so we need to be careful to make sure we get them all and\n    // not return any empty regions.\n    // compute some handy values\n    const isOverLeft = inX < lSplit;\n    const isOverTop = inY < tSplit;\n    const isOverRight = inX + inW > rSplit;\n    const isOverBottom = inY + inH > bSplit;\n    const isOverCenterVert = (inX >= lSplit && inX < rSplit) ||\n        (inRight > lSplit && inRight <= rSplit) ||\n        (inX < lSplit && inRight > rSplit);\n    const isOverCenterHoriz = (inY >= tSplit && inY < bSplit) ||\n        (inBottom > tSplit && inBottom <= bSplit) ||\n        (inY < tSplit && inBottom > bSplit);\n    const isOverCenter = isOverCenterVert && isOverCenterHoriz;\n    // center\n    if (isOverCenter) {\n        const x = Math.max(inX, lSplit);\n        const y = Math.max(inY, tSplit);\n        const right = Math.min(inRight, rSplit);\n        const bottom = Math.min(inBottom, bSplit);\n        result.push({\n            rect: { x, y, width: right - x, height: bottom - y },\n            clip: {\n                x: lClip,\n                y: tClip,\n                width: rClip - lClip + 1,\n                height: bClip - tClip + 1,\n            },\n        });\n    }\n    // top left\n    if (isOverLeft && isOverTop) {\n        const x = inX;\n        const y = inY;\n        const right = Math.min(inRight, lSplit);\n        const bottom = Math.min(inBottom, tSplit);\n        result.push({\n            rect: {\n                x,\n                y,\n                width: right - x,\n                height: bottom - y,\n            },\n            clip: {\n                x: 0,\n                y: 0,\n                width: lClip + 1,\n                height: tClip + 1,\n            },\n        });\n    }\n    // top center\n    if (isOverTop && isOverCenterVert) {\n        const x = Math.max(inX, lSplit);\n        const y = inY;\n        const right = Math.min(inRight, rSplit);\n        const bottom = Math.min(inBottom, tSplit);\n        result.push({\n            rect: {\n                x,\n                y,\n                width: right - x,\n                height: bottom - y,\n            },\n            clip: {\n                x: lClip,\n                y: 0,\n                width: rClip - lClip + 1,\n                height: tClip + 1,\n            },\n        });\n    }\n    // top right\n    if (isOverTop && isOverRight) {\n        const x = Math.max(inX, rSplit);\n        const y = inY;\n        const right = inRight;\n        const bottom = Math.min(inBottom, tSplit);\n        result.push({\n            rect: {\n                x,\n                y,\n                width: right - x,\n                height: bottom - y,\n            },\n            clip: {\n                x: rClip,\n                y: 0,\n                width: width - rClip + 1,\n                height: tClip + 1,\n            },\n        });\n    }\n    // center left\n    if (isOverLeft && isOverCenterHoriz) {\n        const x = inX;\n        const y = Math.max(inY, tSplit);\n        const right = Math.min(inRight, lSplit);\n        const bottom = Math.min(inBottom, bSplit);\n        result.push({\n            rect: {\n                x,\n                y,\n                width: right - x,\n                height: bottom - y,\n            },\n            clip: {\n                x: 0,\n                y: tClip,\n                width: lClip + 1,\n                height: bClip - tClip + 1,\n            },\n        });\n    }\n    // center right\n    if (isOverRight && isOverCenterHoriz) {\n        const x = Math.max(inX, rSplit);\n        const y = Math.max(inY, tSplit);\n        const right = inRight;\n        const bottom = Math.min(inBottom, bSplit);\n        result.push({\n            rect: {\n                x,\n                y,\n                width: right - x,\n                height: bottom - y,\n            },\n            clip: {\n                x: rClip,\n                y: tClip,\n                width: width - rClip + 1,\n                height: bClip - tClip + 1,\n            },\n        });\n    }\n    // bottom left\n    if (isOverLeft && isOverBottom) {\n        const x = inX;\n        const y = Math.max(inY, bSplit);\n        const right = Math.min(inRight, lSplit);\n        const bottom = inBottom;\n        result.push({\n            rect: {\n                x,\n                y,\n                width: right - x,\n                height: bottom - y,\n            },\n            clip: {\n                x: 0,\n                y: bClip,\n                width: lClip + 1,\n                height: height - bClip + 1,\n            },\n        });\n    }\n    // bottom center\n    if (isOverBottom && isOverCenterVert) {\n        const x = Math.max(inX, lSplit);\n        const y = Math.max(inY, bSplit);\n        const right = Math.min(inRight, rSplit);\n        const bottom = inBottom;\n        result.push({\n            rect: {\n                x,\n                y,\n                width: right - x,\n                height: bottom - y,\n            },\n            clip: {\n                x: lClip,\n                y: bClip,\n                width: rClip - lClip + 1,\n                height: height - bClip + 1,\n            },\n        });\n    }\n    // bottom right\n    if (isOverRight && isOverBottom) {\n        const x = Math.max(inX, rSplit);\n        const y = Math.max(inY, bSplit);\n        const right = inRight;\n        const bottom = inBottom;\n        result.push({\n            rect: {\n                x,\n                y,\n                width: right - x,\n                height: bottom - y,\n            },\n            clip: {\n                x: rClip,\n                y: bClip,\n                width: width - rClip + 1,\n                height: height - bClip + 1,\n            },\n        });\n    }\n    return result;\n}\n//# sourceMappingURL=math.js.map","/* eslint-disable sonarjs/no-duplicate-string */\n/* eslint-disable unicorn/no-for-loop */\nimport { CompactSelection, GridColumnIcon, GridCellKind, isInnerOnlyCell, } from \"../data-grid-types.js\";\nimport { CellSet } from \"../cell-set.js\";\nimport { cellIsSelected, cellIsInRange, getFreezeTrailingHeight, drawLastUpdateUnderlay, } from \"./data-grid-lib.js\";\nimport { mergeAndRealizeTheme } from \"../../../common/styles.js\";\nimport { blend } from \"../color-parser.js\";\nimport { intersectRect } from \"../../../common/math.js\";\nimport { getSkipPoint, getSpanBounds, walkColumns, walkRowsInCol } from \"./data-grid-render.walk.js\";\nconst loadingCell = {\n    kind: GridCellKind.Loading,\n    allowOverlay: false,\n};\n// preppable items:\n// - font\n// - fillStyle\n// Column draw loop prep cycle\n// - Prep item\n// - Prep sets props\n// - Prep returns list of cared about props\n// - Draw item\n// - Loop may set some items, if present in args list, set undefined\n// - Prep next item, giving previous result\n// - If next item type is different, de-prep\n// - Result per column\nexport function drawCells(ctx, effectiveColumns, allColumns, height, totalHeaderHeight, translateX, translateY, cellYOffset, rows, getRowHeight, getCellContent, getGroupDetails, getRowThemeOverride, disabledRows, isFocused, drawFocus, freezeTrailingRows, hasAppendRow, drawRegions, damage, selection, prelightCells, highlightRegions, imageLoader, spriteManager, hoverValues, hoverInfo, drawCellCallback, hyperWrapping, outerTheme, enqueue, renderStateProvider, getCellRenderer, overrideCursor, minimumCellWidth) {\n    let toDraw = damage?.size ?? Number.MAX_SAFE_INTEGER;\n    const frameTime = performance.now();\n    let font = outerTheme.baseFontFull;\n    ctx.font = font;\n    const deprepArg = { ctx };\n    const cellIndex = [0, 0];\n    const freezeTrailingRowsHeight = freezeTrailingRows > 0 ? getFreezeTrailingHeight(rows, freezeTrailingRows, getRowHeight) : 0;\n    let result;\n    let handledSpans = undefined;\n    const skipPoint = getSkipPoint(drawRegions);\n    walkColumns(effectiveColumns, cellYOffset, translateX, translateY, totalHeaderHeight, (c, drawX, colDrawStartY, clipX, startRow) => {\n        const diff = Math.max(0, clipX - drawX);\n        const colDrawX = drawX + diff;\n        const colDrawY = totalHeaderHeight + 1;\n        const colWidth = c.width - diff;\n        const colHeight = height - totalHeaderHeight - 1;\n        if (drawRegions.length > 0) {\n            let found = false;\n            for (let i = 0; i < drawRegions.length; i++) {\n                const dr = drawRegions[i];\n                if (intersectRect(colDrawX, colDrawY, colWidth, colHeight, dr.x, dr.y, dr.width, dr.height)) {\n                    found = true;\n                    break;\n                }\n            }\n            if (!found)\n                return;\n        }\n        const reclip = () => {\n            ctx.save();\n            ctx.beginPath();\n            ctx.rect(colDrawX, colDrawY, colWidth, colHeight);\n            ctx.clip();\n        };\n        const colSelected = selection.columns.hasIndex(c.sourceIndex);\n        const groupTheme = getGroupDetails(c.group ?? \"\").overrideTheme;\n        const colTheme = c.themeOverride === undefined && groupTheme === undefined\n            ? outerTheme\n            : mergeAndRealizeTheme(outerTheme, groupTheme, c.themeOverride);\n        const colFont = colTheme.baseFontFull;\n        if (colFont !== font) {\n            font = colFont;\n            ctx.font = colFont;\n        }\n        reclip();\n        let prepResult = undefined;\n        walkRowsInCol(startRow, colDrawStartY, height, rows, getRowHeight, freezeTrailingRows, hasAppendRow, skipPoint, (drawY, row, rh, isSticky, isTrailingRow) => {\n            if (row < 0)\n                return;\n            cellIndex[0] = c.sourceIndex;\n            cellIndex[1] = row;\n            // if (damage !== undefined && !damage.some(d => d[0] === c.sourceIndex && d[1] === row)) {\n            //     return;\n            // }\n            // if (\n            //     drawRegions.length > 0 &&\n            //     !drawRegions.some(dr => intersectRect(drawX, drawY, c.width, rh, dr.x, dr.y, dr.width, dr.height))\n            // ) {\n            //     return;\n            // }\n            // These are dumb versions of the above. I cannot for the life of believe that this matters but this is\n            // the tightest part of the draw loop and the allocations above actually has a very measurable impact\n            // on performance. For the love of all that is unholy please keep checking this again in the future.\n            // As soon as this doesn't have any impact of note go back to the saner looking code. The smoke test\n            // here is to scroll to the bottom of a test case first, then scroll back up while profiling and see\n            // how many major GC collections you get. These allocate a lot of objects.\n            if (damage !== undefined && !damage.has(cellIndex)) {\n                return;\n            }\n            if (drawRegions.length > 0) {\n                let found = false;\n                for (let i = 0; i < drawRegions.length; i++) {\n                    const dr = drawRegions[i];\n                    if (intersectRect(drawX, drawY, c.width, rh, dr.x, dr.y, dr.width, dr.height)) {\n                        found = true;\n                        break;\n                    }\n                }\n                if (!found)\n                    return;\n            }\n            const rowSelected = selection.rows.hasIndex(row);\n            const rowDisabled = disabledRows.hasIndex(row);\n            const cell = row < rows ? getCellContent(cellIndex) : loadingCell;\n            let cellX = drawX;\n            let cellWidth = c.width;\n            let drawingSpan = false;\n            let skipContents = false;\n            if (cell.span !== undefined) {\n                const [startCol, endCol] = cell.span;\n                const spanKey = `${row},${startCol},${endCol},${c.sticky}`; //alloc\n                if (handledSpans === undefined)\n                    handledSpans = new Set();\n                if (!handledSpans.has(spanKey)) {\n                    const areas = getSpanBounds(cell.span, drawX, drawY, c.width, rh, c, allColumns);\n                    const area = c.sticky ? areas[0] : areas[1];\n                    if (!c.sticky && areas[0] !== undefined) {\n                        skipContents = true;\n                    }\n                    if (area !== undefined) {\n                        cellX = area.x;\n                        cellWidth = area.width;\n                        handledSpans.add(spanKey);\n                        ctx.restore();\n                        prepResult = undefined;\n                        ctx.save();\n                        ctx.beginPath();\n                        const d = Math.max(0, clipX - area.x);\n                        ctx.rect(area.x + d, drawY, area.width - d, rh);\n                        if (result === undefined) {\n                            result = [];\n                        }\n                        result.push({\n                            x: area.x + d,\n                            y: drawY,\n                            width: area.width - d,\n                            height: rh,\n                        });\n                        ctx.clip();\n                        drawingSpan = true;\n                    }\n                }\n                else {\n                    toDraw--;\n                    return;\n                }\n            }\n            const rowTheme = getRowThemeOverride?.(row);\n            const trailingTheme = isTrailingRow && c.trailingRowOptions?.themeOverride !== undefined\n                ? c.trailingRowOptions?.themeOverride\n                : undefined;\n            const theme = cell.themeOverride === undefined && rowTheme === undefined && trailingTheme === undefined\n                ? colTheme\n                : mergeAndRealizeTheme(colTheme, rowTheme, trailingTheme, cell.themeOverride); //alloc\n            ctx.beginPath();\n            const isSelected = cellIsSelected(cellIndex, cell, selection);\n            let accentCount = cellIsInRange(cellIndex, cell, selection, drawFocus);\n            const spanIsHighlighted = cell.span !== undefined &&\n                selection.columns.some(index => cell.span !== undefined && index >= cell.span[0] && index <= cell.span[1] //alloc\n                );\n            if (isSelected && !isFocused && drawFocus) {\n                accentCount = 0;\n            }\n            else if (isSelected && drawFocus) {\n                accentCount = Math.max(accentCount, 1);\n            }\n            if (spanIsHighlighted) {\n                accentCount++;\n            }\n            if (!isSelected) {\n                if (rowSelected)\n                    accentCount++;\n                if (colSelected && !isTrailingRow)\n                    accentCount++;\n            }\n            const bgCell = cell.kind === GridCellKind.Protected ? theme.bgCellMedium : theme.bgCell;\n            let fill;\n            if (isSticky || bgCell !== outerTheme.bgCell) {\n                fill = blend(bgCell, fill);\n            }\n            if (accentCount > 0 || rowDisabled) {\n                if (rowDisabled) {\n                    fill = blend(theme.bgHeader, fill);\n                }\n                for (let i = 0; i < accentCount; i++) {\n                    fill = blend(theme.accentLight, fill);\n                }\n            }\n            else if (prelightCells !== undefined) {\n                for (const pre of prelightCells) {\n                    if (pre[0] === c.sourceIndex && pre[1] === row) {\n                        fill = blend(theme.bgSearchResult, fill);\n                        break;\n                    }\n                }\n            }\n            if (highlightRegions !== undefined) {\n                for (let i = 0; i < highlightRegions.length; i++) {\n                    const region = highlightRegions[i];\n                    const r = region.range;\n                    if (region.style !== \"solid-outline\" &&\n                        r.x <= c.sourceIndex &&\n                        c.sourceIndex < r.x + r.width &&\n                        r.y <= row &&\n                        row < r.y + r.height) {\n                        fill = blend(region.color, fill);\n                    }\n                }\n            }\n            let didDamageClip = false;\n            if (damage !== undefined) {\n                // we want to clip each cell individually rather than form a super clip region. The reason for\n                // this is passing too many clip regions to the GPU at once can cause a performance hit. This\n                // allows us to damage a large number of cells at once without issue.\n                const top = drawY + 1;\n                const bottom = isSticky\n                    ? top + rh - 1\n                    : Math.min(top + rh - 1, height - freezeTrailingRowsHeight);\n                const h = bottom - top;\n                // however, not clipping at all is even better. We want to clip if we are the left most col\n                // or overlapping the bottom clip area.\n                if (h !== rh - 1 || cellX + 1 <= clipX) {\n                    didDamageClip = true;\n                    ctx.save();\n                    ctx.beginPath();\n                    ctx.rect(cellX + 1, top, cellWidth - 1, h);\n                    ctx.clip();\n                }\n                // we also need to make sure to wipe the contents. Since the fill can do that lets repurpose\n                // that call to avoid an extra draw call.\n                fill = fill === undefined ? theme.bgCell : blend(fill, theme.bgCell);\n            }\n            const isLastColumn = c.sourceIndex === allColumns.length - 1;\n            const isLastRow = row === rows - 1;\n            if (fill !== undefined) {\n                ctx.fillStyle = fill;\n                if (prepResult !== undefined) {\n                    prepResult.fillStyle = fill;\n                }\n                if (damage !== undefined) {\n                    // this accounts for the fill handle outline being drawn inset on these cells. We do this\n                    // because technically the bottom right corner of the outline are on other cells.\n                    ctx.fillRect(cellX + 1, drawY + 1, cellWidth - (isLastColumn ? 2 : 1), rh - (isLastRow ? 2 : 1));\n                }\n                else {\n                    ctx.fillRect(cellX, drawY, cellWidth, rh);\n                }\n            }\n            if (cell.style === \"faded\") {\n                ctx.globalAlpha = 0.6;\n            }\n            let hoverValue;\n            for (let i = 0; i < hoverValues.length; i++) {\n                const hv = hoverValues[i];\n                if (hv.item[0] === c.sourceIndex && hv.item[1] === row) {\n                    hoverValue = hv;\n                    break;\n                }\n            }\n            if (cellWidth > minimumCellWidth && !skipContents) {\n                const cellFont = theme.baseFontFull;\n                if (cellFont !== font) {\n                    ctx.font = cellFont;\n                    font = cellFont;\n                }\n                prepResult = drawCell(ctx, cell, c.sourceIndex, row, isLastColumn, isLastRow, cellX, drawY, cellWidth, rh, accentCount > 0, theme, fill ?? theme.bgCell, imageLoader, spriteManager, hoverValue?.hoverAmount ?? 0, hoverInfo, hyperWrapping, frameTime, drawCellCallback, prepResult, enqueue, renderStateProvider, getCellRenderer, overrideCursor);\n            }\n            if (didDamageClip) {\n                ctx.restore();\n            }\n            if (cell.style === \"faded\") {\n                ctx.globalAlpha = 1;\n            }\n            toDraw--;\n            if (drawingSpan) {\n                ctx.restore();\n                prepResult?.deprep?.(deprepArg);\n                prepResult = undefined;\n                reclip();\n                font = colFont;\n                ctx.font = colFont;\n            }\n            return toDraw <= 0;\n        });\n        ctx.restore();\n        return toDraw <= 0;\n    });\n    return result;\n}\nconst allocatedItem = [0, 0];\nconst reusableRect = { x: 0, y: 0, width: 0, height: 0 };\nconst drawState = [undefined, () => undefined];\nlet animationFrameRequested = false;\nfunction animRequest() {\n    animationFrameRequested = true;\n}\nexport function drawCell(ctx, cell, col, row, isLastCol, isLastRow, x, y, w, h, highlighted, theme, finalCellFillColor, imageLoader, spriteManager, hoverAmount, hoverInfo, hyperWrapping, frameTime, drawCellCallback, lastPrep, enqueue, renderStateProvider, getCellRenderer, overrideCursor) {\n    let hoverX;\n    let hoverY;\n    if (hoverInfo !== undefined && hoverInfo[0][0] === col && hoverInfo[0][1] === row) {\n        hoverX = hoverInfo[1][0];\n        hoverY = hoverInfo[1][1];\n    }\n    let result = undefined;\n    allocatedItem[0] = col;\n    allocatedItem[1] = row;\n    reusableRect.x = x;\n    reusableRect.y = y;\n    reusableRect.width = w;\n    reusableRect.height = h;\n    drawState[0] = renderStateProvider.getValue(allocatedItem);\n    drawState[1] = (val) => renderStateProvider.setValue(allocatedItem, val); //alloc\n    animationFrameRequested = false;\n    const args = {\n        //alloc\n        ctx,\n        theme,\n        col,\n        row,\n        cell,\n        rect: reusableRect,\n        highlighted,\n        cellFillColor: finalCellFillColor,\n        hoverAmount,\n        frameTime,\n        hoverX,\n        drawState,\n        hoverY,\n        imageLoader,\n        spriteManager,\n        hyperWrapping,\n        overrideCursor: hoverX !== undefined ? overrideCursor : undefined,\n        requestAnimationFrame: animRequest,\n    };\n    const needsAnim = drawLastUpdateUnderlay(args, cell.lastUpdated, frameTime, lastPrep, isLastCol, isLastRow);\n    const r = getCellRenderer(cell);\n    if (r !== undefined) {\n        if (lastPrep?.renderer !== r) {\n            lastPrep?.deprep?.(args);\n            lastPrep = undefined;\n        }\n        const partialPrepResult = r.drawPrep?.(args, lastPrep);\n        if (drawCellCallback !== undefined && !isInnerOnlyCell(args.cell)) {\n            drawCellCallback(args, () => r.draw(args, cell));\n        }\n        else {\n            r.draw(args, cell);\n        }\n        result =\n            partialPrepResult === undefined\n                ? undefined\n                : {\n                    deprep: partialPrepResult?.deprep,\n                    fillStyle: partialPrepResult?.fillStyle,\n                    font: partialPrepResult?.font,\n                    renderer: r,\n                };\n    }\n    if (needsAnim || animationFrameRequested)\n        enqueue?.(allocatedItem);\n    return result;\n}\n//# sourceMappingURL=data-grid-render.cells.js.map","import { assertNever } from \"../../../common/support.js\";\nimport { getSquareWidth, getSquareXPosFromAlign, getSquareBB, pointIsWithinBB } from \"../../../common/utils.js\";\nimport { roundedRect } from \"./data-grid-lib.js\";\nimport { BooleanEmpty, BooleanIndeterminate } from \"../data-grid-types.js\";\nexport function drawCheckbox(ctx, theme, checked, x, y, width, height, highlighted, hoverX = -20, hoverY = -20, maxSize = 32, alignment = \"center\", style = \"square\") {\n    const centerY = Math.floor(y + height / 2);\n    const rectBordRadius = style === \"circle\" ? 10000 : theme.roundingRadius ?? 4;\n    let checkBoxWidth = getSquareWidth(maxSize, height, theme.cellVerticalPadding);\n    let checkBoxHalfWidth = checkBoxWidth / 2;\n    const posX = getSquareXPosFromAlign(alignment, x, width, theme.cellHorizontalPadding, checkBoxWidth);\n    const bb = getSquareBB(posX, centerY, checkBoxWidth);\n    const hovered = pointIsWithinBB(x + hoverX, y + hoverY, bb);\n    switch (checked) {\n        case true: {\n            ctx.beginPath();\n            roundedRect(ctx, posX - checkBoxWidth / 2, centerY - checkBoxWidth / 2, checkBoxWidth, checkBoxWidth, rectBordRadius);\n            if (style === \"circle\") {\n                checkBoxHalfWidth *= 0.8;\n                checkBoxWidth *= 0.8;\n            }\n            ctx.fillStyle = highlighted ? theme.accentColor : theme.textMedium;\n            ctx.fill();\n            ctx.beginPath();\n            ctx.moveTo(posX - checkBoxHalfWidth + checkBoxWidth / 4.23, centerY - checkBoxHalfWidth + checkBoxWidth / 1.97);\n            ctx.lineTo(posX - checkBoxHalfWidth + checkBoxWidth / 2.42, centerY - checkBoxHalfWidth + checkBoxWidth / 1.44);\n            ctx.lineTo(posX - checkBoxHalfWidth + checkBoxWidth / 1.29, centerY - checkBoxHalfWidth + checkBoxWidth / 3.25);\n            ctx.strokeStyle = theme.bgCell;\n            ctx.lineJoin = \"round\";\n            ctx.lineCap = \"round\";\n            ctx.lineWidth = 1.9;\n            ctx.stroke();\n            break;\n        }\n        case BooleanEmpty:\n        case false: {\n            ctx.beginPath();\n            roundedRect(ctx, posX - checkBoxWidth / 2 + 0.5, centerY - checkBoxWidth / 2 + 0.5, checkBoxWidth - 1, checkBoxWidth - 1, rectBordRadius);\n            ctx.lineWidth = 1;\n            ctx.strokeStyle = hovered ? theme.textDark : theme.textMedium;\n            ctx.stroke();\n            break;\n        }\n        case BooleanIndeterminate: {\n            ctx.beginPath();\n            roundedRect(ctx, posX - checkBoxWidth / 2, centerY - checkBoxWidth / 2, checkBoxWidth, checkBoxWidth, rectBordRadius);\n            ctx.fillStyle = hovered ? theme.textMedium : theme.textLight;\n            ctx.fill();\n            if (style === \"circle\") {\n                checkBoxHalfWidth *= 0.8;\n                checkBoxWidth *= 0.8;\n            }\n            ctx.beginPath();\n            ctx.moveTo(posX - checkBoxWidth / 3, centerY);\n            ctx.lineTo(posX + checkBoxWidth / 3, centerY);\n            ctx.strokeStyle = theme.bgCell;\n            ctx.lineCap = \"round\";\n            ctx.lineWidth = 1.9;\n            ctx.stroke();\n            break;\n        }\n        default:\n            assertNever(checked);\n    }\n}\n//# sourceMappingURL=draw-checkbox.js.map","import { intersectRect, pointInRect } from \"../../../common/math.js\";\nimport { mergeAndRealizeTheme } from \"../../../common/styles.js\";\nimport { direction } from \"../../../common/utils.js\";\nimport { withAlpha } from \"../color-parser.js\";\nimport { GridColumnMenuIcon } from \"../data-grid-types.js\";\nimport { drawMenuDots, getMiddleCenterBias, roundedPoly, measureTextCached, getMeasuredTextCache, } from \"./data-grid-lib.js\";\nimport { walkColumns, walkGroups } from \"./data-grid-render.walk.js\";\nimport { drawCheckbox } from \"./draw-checkbox.js\";\nexport function drawGridHeaders(ctx, effectiveCols, enableGroups, hovered, width, translateX, headerHeight, groupHeaderHeight, dragAndDropState, isResizing, selection, outerTheme, spriteManager, hoverValues, verticalBorder, getGroupDetails, damage, drawHeaderCallback, touchMode) {\n    const totalHeaderHeight = headerHeight + groupHeaderHeight;\n    if (totalHeaderHeight <= 0)\n        return;\n    ctx.fillStyle = outerTheme.bgHeader;\n    ctx.fillRect(0, 0, width, totalHeaderHeight);\n    const hCol = hovered?.[0]?.[0];\n    const hRow = hovered?.[0]?.[1];\n    const hPosX = hovered?.[1]?.[0];\n    const hPosY = hovered?.[1]?.[1];\n    const font = outerTheme.headerFontFull;\n    // Assinging the context font too much can be expensive, it can be worth it to minimze this\n    ctx.font = font;\n    walkColumns(effectiveCols, 0, translateX, 0, totalHeaderHeight, (c, x, _y, clipX) => {\n        if (damage !== undefined && !damage.has([c.sourceIndex, -1]))\n            return;\n        const diff = Math.max(0, clipX - x);\n        ctx.save();\n        ctx.beginPath();\n        ctx.rect(x + diff, groupHeaderHeight, c.width - diff, headerHeight);\n        ctx.clip();\n        const groupTheme = getGroupDetails(c.group ?? \"\").overrideTheme;\n        const theme = c.themeOverride === undefined && groupTheme === undefined\n            ? outerTheme\n            : mergeAndRealizeTheme(outerTheme, groupTheme, c.themeOverride);\n        if (theme.bgHeader !== outerTheme.bgHeader) {\n            ctx.fillStyle = theme.bgHeader;\n            ctx.fill();\n        }\n        if (theme !== outerTheme) {\n            ctx.font = theme.baseFontFull;\n        }\n        const selected = selection.columns.hasIndex(c.sourceIndex);\n        const noHover = dragAndDropState !== undefined || isResizing;\n        const hoveredBoolean = !noHover && hRow === -1 && hCol === c.sourceIndex;\n        const hover = noHover\n            ? 0\n            : hoverValues.find(s => s.item[0] === c.sourceIndex && s.item[1] === -1)?.hoverAmount ?? 0;\n        const hasSelectedCell = selection?.current !== undefined && selection.current.cell[0] === c.sourceIndex;\n        const bgFillStyle = selected ? theme.accentColor : hasSelectedCell ? theme.bgHeaderHasFocus : theme.bgHeader;\n        const y = enableGroups ? groupHeaderHeight : 0;\n        const xOffset = c.sourceIndex === 0 ? 0 : 1;\n        if (selected) {\n            ctx.fillStyle = bgFillStyle;\n            ctx.fillRect(x + xOffset, y, c.width - xOffset, headerHeight);\n        }\n        else if (hasSelectedCell || hover > 0) {\n            ctx.beginPath();\n            ctx.rect(x + xOffset, y, c.width - xOffset, headerHeight);\n            if (hasSelectedCell) {\n                ctx.fillStyle = theme.bgHeaderHasFocus;\n                ctx.fill();\n            }\n            if (hover > 0) {\n                ctx.globalAlpha = hover;\n                ctx.fillStyle = theme.bgHeaderHovered;\n                ctx.fill();\n                ctx.globalAlpha = 1;\n            }\n        }\n        drawHeader(ctx, x, y, c.width, headerHeight, c, selected, theme, hoveredBoolean, hoveredBoolean ? hPosX : undefined, hoveredBoolean ? hPosY : undefined, hasSelectedCell, hover, spriteManager, drawHeaderCallback, touchMode);\n        ctx.restore();\n    });\n    if (enableGroups) {\n        drawGroups(ctx, effectiveCols, width, translateX, groupHeaderHeight, hovered, outerTheme, spriteManager, hoverValues, verticalBorder, getGroupDetails, damage);\n    }\n}\nexport function drawGroups(ctx, effectiveCols, width, translateX, groupHeaderHeight, hovered, theme, spriteManager, _hoverValues, verticalBorder, getGroupDetails, damage) {\n    const xPad = 8;\n    const [hCol, hRow] = hovered?.[0] ?? [];\n    let finalX = 0;\n    walkGroups(effectiveCols, width, translateX, groupHeaderHeight, (span, groupName, x, y, w, h) => {\n        if (damage !== undefined &&\n            !damage.hasItemInRectangle({\n                x: span[0],\n                y: -2,\n                width: span[1] - span[0] + 1,\n                height: 1,\n            }))\n            return;\n        ctx.save();\n        ctx.beginPath();\n        ctx.rect(x, y, w, h);\n        ctx.clip();\n        const group = getGroupDetails(groupName);\n        const groupTheme = group?.overrideTheme === undefined ? theme : mergeAndRealizeTheme(theme, group.overrideTheme);\n        const isHovered = hRow === -2 && hCol !== undefined && hCol >= span[0] && hCol <= span[1];\n        const fillColor = isHovered ? groupTheme.bgHeaderHovered : groupTheme.bgHeader;\n        if (fillColor !== theme.bgHeader) {\n            ctx.fillStyle = fillColor;\n            ctx.fill();\n        }\n        ctx.fillStyle = groupTheme.textGroupHeader ?? groupTheme.textHeader;\n        if (group !== undefined) {\n            let drawX = x;\n            if (group.icon !== undefined) {\n                spriteManager.drawSprite(group.icon, \"normal\", ctx, drawX + xPad, (groupHeaderHeight - 20) / 2, 20, groupTheme);\n                drawX += 26;\n            }\n            ctx.fillText(group.name, drawX + xPad, groupHeaderHeight / 2 + getMiddleCenterBias(ctx, theme.headerFontFull));\n            if (group.actions !== undefined && isHovered) {\n                const actionBoxes = getActionBoundsForGroup({ x, y, width: w, height: h }, group.actions);\n                ctx.beginPath();\n                const fadeStartX = actionBoxes[0].x - 10;\n                const fadeWidth = x + w - fadeStartX;\n                ctx.rect(fadeStartX, 0, fadeWidth, groupHeaderHeight);\n                const grad = ctx.createLinearGradient(fadeStartX, 0, fadeStartX + fadeWidth, 0);\n                const trans = withAlpha(fillColor, 0);\n                grad.addColorStop(0, trans);\n                grad.addColorStop(10 / fadeWidth, fillColor);\n                grad.addColorStop(1, fillColor);\n                ctx.fillStyle = grad;\n                ctx.fill();\n                ctx.globalAlpha = 0.6;\n                // eslint-disable-next-line prefer-const\n                const [mouseX, mouseY] = hovered?.[1] ?? [-1, -1];\n                for (let i = 0; i < group.actions.length; i++) {\n                    const action = group.actions[i];\n                    const box = actionBoxes[i];\n                    const actionHovered = pointInRect(box, mouseX + x, mouseY);\n                    if (actionHovered) {\n                        ctx.globalAlpha = 1;\n                    }\n                    spriteManager.drawSprite(action.icon, \"normal\", ctx, box.x + box.width / 2 - 10, box.y + box.height / 2 - 10, 20, groupTheme);\n                    if (actionHovered) {\n                        ctx.globalAlpha = 0.6;\n                    }\n                }\n                ctx.globalAlpha = 1;\n            }\n        }\n        if (x !== 0 && verticalBorder(span[0])) {\n            ctx.beginPath();\n            ctx.moveTo(x + 0.5, 0);\n            ctx.lineTo(x + 0.5, groupHeaderHeight);\n            ctx.strokeStyle = theme.borderColor;\n            ctx.lineWidth = 1;\n            ctx.stroke();\n        }\n        ctx.restore();\n        finalX = x + w;\n    });\n    ctx.beginPath();\n    ctx.moveTo(finalX + 0.5, 0);\n    ctx.lineTo(finalX + 0.5, groupHeaderHeight);\n    ctx.moveTo(0, groupHeaderHeight + 0.5);\n    ctx.lineTo(width, groupHeaderHeight + 0.5);\n    ctx.strokeStyle = theme.borderColor;\n    ctx.lineWidth = 1;\n    ctx.stroke();\n}\nconst menuButtonSize = 30;\nfunction getHeaderMenuBounds(x, y, width, height, isRtl) {\n    if (isRtl)\n        return { x, y, width: menuButtonSize, height: Math.min(menuButtonSize, height) };\n    return {\n        x: x + width - menuButtonSize,\n        y: Math.max(y, y + height / 2 - menuButtonSize / 2),\n        width: menuButtonSize,\n        height: Math.min(menuButtonSize, height),\n    };\n}\nexport function getActionBoundsForGroup(box, actions) {\n    const result = [];\n    let x = box.x + box.width - 26 * actions.length;\n    const y = box.y + box.height / 2 - 13;\n    const height = 26;\n    const width = 26;\n    for (let i = 0; i < actions.length; i++) {\n        result.push({\n            x,\n            y,\n            width,\n            height,\n        });\n        x += 26;\n    }\n    return result;\n}\nfunction flipHorizontal(toFlip, mirrorX, isRTL) {\n    if (!isRTL || toFlip === undefined)\n        return toFlip;\n    toFlip.x = mirrorX - (toFlip.x - mirrorX) - toFlip.width;\n    return toFlip;\n}\nexport function computeHeaderLayout(ctx, c, x, y, width, height, theme, isRTL) {\n    const xPad = theme.cellHorizontalPadding;\n    const headerIconSize = theme.headerIconSize;\n    const menuBounds = getHeaderMenuBounds(x, y, width, height, false);\n    let drawX = x + xPad;\n    const iconBounds = c.icon === undefined\n        ? undefined\n        : {\n            x: drawX,\n            y: y + (height - headerIconSize) / 2,\n            width: headerIconSize,\n            height: headerIconSize,\n        };\n    const iconOverlayBounds = iconBounds === undefined || c.overlayIcon === undefined\n        ? undefined\n        : {\n            x: iconBounds.x + 9,\n            y: iconBounds.y + 6,\n            width: 18,\n            height: 18,\n        };\n    if (iconBounds !== undefined) {\n        drawX += Math.ceil(headerIconSize * 1.3);\n    }\n    const textBounds = {\n        x: drawX,\n        y: y,\n        width: width - drawX,\n        height: height,\n    };\n    let indicatorIconBounds = undefined;\n    if (c.indicatorIcon !== undefined) {\n        const textWidth = ctx === undefined\n            ? getMeasuredTextCache(c.title, theme.headerFontFull)?.width ?? 0\n            : measureTextCached(c.title, ctx, theme.headerFontFull).width;\n        textBounds.width = textWidth;\n        drawX += textWidth + xPad;\n        indicatorIconBounds = {\n            x: drawX,\n            y: y + (height - headerIconSize) / 2,\n            width: headerIconSize,\n            height: headerIconSize,\n        };\n    }\n    const mirrorPoint = x + width / 2;\n    return {\n        menuBounds: flipHorizontal(menuBounds, mirrorPoint, isRTL),\n        iconBounds: flipHorizontal(iconBounds, mirrorPoint, isRTL),\n        iconOverlayBounds: flipHorizontal(iconOverlayBounds, mirrorPoint, isRTL),\n        textBounds: flipHorizontal(textBounds, mirrorPoint, isRTL),\n        indicatorIconBounds: flipHorizontal(indicatorIconBounds, mirrorPoint, isRTL),\n    };\n}\nfunction drawHeaderInner(ctx, x, y, width, height, c, selected, theme, isHovered, posX, posY, hoverAmount, spriteManager, touchMode, isRtl, headerLayout) {\n    if (c.rowMarker !== undefined && c.headerRowMarkerDisabled !== true) {\n        const checked = c.rowMarkerChecked;\n        if (checked !== true && c.headerRowMarkerAlwaysVisible !== true) {\n            ctx.globalAlpha = hoverAmount;\n        }\n        const markerTheme = c.headerRowMarkerTheme !== undefined ? mergeAndRealizeTheme(theme, c.headerRowMarkerTheme) : theme;\n        drawCheckbox(ctx, markerTheme, checked, x, y, width, height, false, undefined, undefined, 18, \"center\", c.rowMarker);\n        if (checked !== true && c.headerRowMarkerAlwaysVisible !== true) {\n            ctx.globalAlpha = 1;\n        }\n        return;\n    }\n    const fillStyle = selected ? theme.textHeaderSelected : theme.textHeader;\n    const shouldDrawMenu = c.hasMenu === true && (isHovered || (touchMode && selected)) && headerLayout.menuBounds !== undefined;\n    if (c.icon !== undefined && headerLayout.iconBounds !== undefined) {\n        let variant = selected ? \"selected\" : \"normal\";\n        if (c.style === \"highlight\") {\n            variant = selected ? \"selected\" : \"special\";\n        }\n        spriteManager.drawSprite(c.icon, variant, ctx, headerLayout.iconBounds.x, headerLayout.iconBounds.y, headerLayout.iconBounds.width, theme);\n        if (c.overlayIcon !== undefined && headerLayout.iconOverlayBounds !== undefined) {\n            spriteManager.drawSprite(c.overlayIcon, selected ? \"selected\" : \"special\", ctx, headerLayout.iconOverlayBounds.x, headerLayout.iconOverlayBounds.y, headerLayout.iconOverlayBounds.width, theme);\n        }\n    }\n    if (shouldDrawMenu && width > 35) {\n        const fadeWidth = 35;\n        const fadeStart = isRtl ? fadeWidth : width - fadeWidth;\n        const fadeEnd = isRtl ? fadeWidth * 0.7 : width - fadeWidth * 0.7;\n        const fadeStartPercent = fadeStart / width;\n        const fadeEndPercent = fadeEnd / width;\n        const grad = ctx.createLinearGradient(x, 0, x + width, 0);\n        const trans = withAlpha(fillStyle, 0);\n        grad.addColorStop(isRtl ? 1 : 0, fillStyle);\n        grad.addColorStop(fadeStartPercent, fillStyle);\n        grad.addColorStop(fadeEndPercent, trans);\n        grad.addColorStop(isRtl ? 0 : 1, trans);\n        ctx.fillStyle = grad;\n    }\n    else {\n        ctx.fillStyle = fillStyle;\n    }\n    if (isRtl) {\n        ctx.textAlign = \"right\";\n    }\n    if (headerLayout.textBounds !== undefined) {\n        ctx.fillText(c.title, isRtl ? headerLayout.textBounds.x + headerLayout.textBounds.width : headerLayout.textBounds.x, y + height / 2 + getMiddleCenterBias(ctx, theme.headerFontFull));\n    }\n    if (isRtl) {\n        ctx.textAlign = \"left\";\n    }\n    if (c.indicatorIcon !== undefined &&\n        headerLayout.indicatorIconBounds !== undefined &&\n        (!shouldDrawMenu ||\n            !intersectRect(headerLayout.menuBounds.x, headerLayout.menuBounds.y, headerLayout.menuBounds.width, headerLayout.menuBounds.height, headerLayout.indicatorIconBounds.x, headerLayout.indicatorIconBounds.y, headerLayout.indicatorIconBounds.width, headerLayout.indicatorIconBounds.height))) {\n        let variant = selected ? \"selected\" : \"normal\";\n        if (c.style === \"highlight\") {\n            variant = selected ? \"selected\" : \"special\";\n        }\n        spriteManager.drawSprite(c.indicatorIcon, variant, ctx, headerLayout.indicatorIconBounds.x, headerLayout.indicatorIconBounds.y, headerLayout.indicatorIconBounds.width, theme);\n    }\n    if (shouldDrawMenu && headerLayout.menuBounds !== undefined) {\n        const menuBounds = headerLayout.menuBounds;\n        const hovered = posX !== undefined && posY !== undefined && pointInRect(menuBounds, posX + x, posY + y);\n        if (!hovered) {\n            ctx.globalAlpha = 0.7;\n        }\n        if (c.menuIcon === undefined || c.menuIcon === GridColumnMenuIcon.Triangle) {\n            // Draw the default triangle menu icon:\n            ctx.beginPath();\n            const triangleX = menuBounds.x + menuBounds.width / 2 - 5.5;\n            const triangleY = menuBounds.y + menuBounds.height / 2 - 3;\n            roundedPoly(ctx, [\n                {\n                    x: triangleX,\n                    y: triangleY,\n                },\n                {\n                    x: triangleX + 11,\n                    y: triangleY,\n                },\n                {\n                    x: triangleX + 5.5,\n                    y: triangleY + 6,\n                },\n            ], 1);\n            ctx.fillStyle = fillStyle;\n            ctx.fill();\n        }\n        else if (c.menuIcon === GridColumnMenuIcon.Dots) {\n            // Draw the three dots menu icon:\n            ctx.beginPath();\n            const dotsX = menuBounds.x + menuBounds.width / 2;\n            const dotsY = menuBounds.y + menuBounds.height / 2;\n            drawMenuDots(ctx, dotsX, dotsY);\n            ctx.fillStyle = fillStyle;\n            ctx.fill();\n        }\n        else {\n            // Assume that the user has specified a valid sprite image as header icon:\n            const iconX = menuBounds.x + (menuBounds.width - theme.headerIconSize) / 2;\n            const iconY = menuBounds.y + (menuBounds.height - theme.headerIconSize) / 2;\n            spriteManager.drawSprite(c.menuIcon, \"normal\", ctx, iconX, iconY, theme.headerIconSize, theme);\n        }\n        if (!hovered) {\n            ctx.globalAlpha = 1;\n        }\n    }\n}\nexport function drawHeader(ctx, x, y, width, height, c, selected, theme, isHovered, posX, posY, hasSelectedCell, hoverAmount, spriteManager, drawHeaderCallback, touchMode) {\n    const isRtl = direction(c.title) === \"rtl\";\n    const headerLayout = computeHeaderLayout(ctx, c, x, y, width, height, theme, isRtl);\n    if (drawHeaderCallback !== undefined) {\n        drawHeaderCallback({\n            ctx,\n            theme,\n            rect: { x, y, width, height },\n            column: c,\n            columnIndex: c.sourceIndex,\n            isSelected: selected,\n            hoverAmount,\n            isHovered,\n            hasSelectedCell,\n            spriteManager,\n            menuBounds: headerLayout?.menuBounds ?? { x: 0, y: 0, height: 0, width: 0 },\n        }, () => drawHeaderInner(ctx, x, y, width, height, c, selected, theme, isHovered, posX, posY, hoverAmount, spriteManager, touchMode, isRtl, headerLayout));\n    }\n    else {\n        drawHeaderInner(ctx, x, y, width, height, c, selected, theme, isHovered, posX, posY, hoverAmount, spriteManager, touchMode, isRtl, headerLayout);\n    }\n}\n//# sourceMappingURL=data-grid-render.header.js.map","/* eslint-disable sonarjs/no-duplicate-string */\n/* eslint-disable unicorn/no-for-loop */\nimport { CompactSelection } from \"../data-grid-types.js\";\nimport { CellSet } from \"../cell-set.js\";\nimport groupBy from \"lodash/groupBy.js\";\nimport { getStickyWidth, getFreezeTrailingHeight } from \"./data-grid-lib.js\";\nimport { mergeAndRealizeTheme } from \"../../../common/styles.js\";\nimport { blendCache } from \"../color-parser.js\";\nimport { intersectRect } from \"../../../common/math.js\";\nimport { getSkipPoint, walkColumns, walkRowsInCol } from \"./data-grid-render.walk.js\";\nimport {} from \"./data-grid-render.cells.js\";\nexport function drawBlanks(ctx, effectiveColumns, allColumns, width, height, totalHeaderHeight, translateX, translateY, cellYOffset, rows, getRowHeight, getRowTheme, selectedRows, disabledRows, freezeTrailingRows, hasAppendRow, drawRegions, damage, theme) {\n    if (damage !== undefined ||\n        effectiveColumns[effectiveColumns.length - 1] !== allColumns[effectiveColumns.length - 1])\n        return;\n    const skipPoint = getSkipPoint(drawRegions);\n    walkColumns(effectiveColumns, cellYOffset, translateX, translateY, totalHeaderHeight, (c, drawX, colDrawY, clipX, startRow) => {\n        if (c !== effectiveColumns[effectiveColumns.length - 1])\n            return;\n        drawX += c.width;\n        const x = Math.max(drawX, clipX);\n        if (x > width)\n            return;\n        ctx.save();\n        ctx.beginPath();\n        ctx.rect(x, totalHeaderHeight + 1, 10000, height - totalHeaderHeight - 1);\n        ctx.clip();\n        walkRowsInCol(startRow, colDrawY, height, rows, getRowHeight, freezeTrailingRows, hasAppendRow, skipPoint, (drawY, row, rh, isSticky) => {\n            if (!isSticky &&\n                drawRegions.length > 0 &&\n                !drawRegions.some(dr => intersectRect(drawX, drawY, 10000, rh, dr.x, dr.y, dr.width, dr.height))) {\n                return;\n            }\n            const rowSelected = selectedRows.hasIndex(row);\n            const rowDisabled = disabledRows.hasIndex(row);\n            ctx.beginPath();\n            const rowTheme = getRowTheme?.(row);\n            const blankTheme = rowTheme === undefined ? theme : mergeAndRealizeTheme(theme, rowTheme);\n            if (blankTheme.bgCell !== theme.bgCell) {\n                ctx.fillStyle = blankTheme.bgCell;\n                ctx.fillRect(drawX, drawY, 10000, rh);\n            }\n            if (rowDisabled) {\n                ctx.fillStyle = blankTheme.bgHeader;\n                ctx.fillRect(drawX, drawY, 10000, rh);\n            }\n            if (rowSelected) {\n                ctx.fillStyle = blankTheme.accentLight;\n                ctx.fillRect(drawX, drawY, 10000, rh);\n            }\n        });\n        ctx.restore();\n    });\n}\nexport function overdrawStickyBoundaries(ctx, effectiveCols, width, height, freezeTrailingRows, rows, verticalBorder, getRowHeight, theme) {\n    let drawFreezeBorder = false;\n    for (const c of effectiveCols) {\n        if (c.sticky)\n            continue;\n        drawFreezeBorder = verticalBorder(c.sourceIndex);\n        break;\n    }\n    const hColor = theme.horizontalBorderColor ?? theme.borderColor;\n    const vColor = theme.borderColor;\n    const drawX = drawFreezeBorder ? getStickyWidth(effectiveCols) : 0;\n    let vStroke;\n    if (drawX !== 0) {\n        vStroke = blendCache(vColor, theme.bgCell);\n        ctx.beginPath();\n        ctx.moveTo(drawX + 0.5, 0);\n        ctx.lineTo(drawX + 0.5, height);\n        ctx.strokeStyle = vStroke;\n        ctx.stroke();\n    }\n    if (freezeTrailingRows > 0) {\n        const hStroke = vColor === hColor && vStroke !== undefined ? vStroke : blendCache(hColor, theme.bgCell);\n        const h = getFreezeTrailingHeight(rows, freezeTrailingRows, getRowHeight);\n        ctx.beginPath();\n        ctx.moveTo(0, height - h + 0.5);\n        ctx.lineTo(width, height - h + 0.5);\n        ctx.strokeStyle = hStroke;\n        ctx.stroke();\n    }\n}\nconst getMinMaxXY = (drawRegions, width, height) => {\n    let minX = 0;\n    let maxX = width;\n    let minY = 0;\n    let maxY = height;\n    if (drawRegions !== undefined && drawRegions.length > 0) {\n        minX = Number.MAX_SAFE_INTEGER;\n        minY = Number.MAX_SAFE_INTEGER;\n        maxX = Number.MIN_SAFE_INTEGER;\n        maxY = Number.MIN_SAFE_INTEGER;\n        for (const r of drawRegions) {\n            minX = Math.min(minX, r.x - 1);\n            maxX = Math.max(maxX, r.x + r.width + 1);\n            minY = Math.min(minY, r.y - 1);\n            maxY = Math.max(maxY, r.y + r.height + 1);\n        }\n    }\n    return { minX, maxX, minY, maxY };\n};\nexport function drawExtraRowThemes(ctx, effectiveCols, cellYOffset, translateX, translateY, width, height, drawRegions, totalHeaderHeight, getRowHeight, getRowThemeOverride, verticalBorder, freezeTrailingRows, rows, theme) {\n    const bgCell = theme.bgCell;\n    const { minX, maxX, minY, maxY } = getMinMaxXY(drawRegions, width, height);\n    const toDraw = [];\n    const freezeY = height - getFreezeTrailingHeight(rows, freezeTrailingRows, getRowHeight);\n    // row overflow\n    let y = totalHeaderHeight;\n    let row = cellYOffset;\n    let extraRowsStartY = 0;\n    while (y + translateY < freezeY) {\n        const ty = y + translateY;\n        const rh = getRowHeight(row);\n        if (ty >= minY && ty <= maxY - 1) {\n            const rowTheme = getRowThemeOverride?.(row);\n            const rowThemeBgCell = rowTheme?.bgCell;\n            const needDraw = rowThemeBgCell !== undefined && rowThemeBgCell !== bgCell && row >= rows - freezeTrailingRows;\n            if (needDraw) {\n                toDraw.push({\n                    x: minX,\n                    y: ty,\n                    w: maxX - minX,\n                    h: rh,\n                    color: rowThemeBgCell,\n                });\n            }\n        }\n        y += rh;\n        if (row < rows - freezeTrailingRows)\n            extraRowsStartY = y;\n        row++;\n    }\n    // column overflow\n    let x = 0;\n    const h = Math.min(freezeY, maxY) - extraRowsStartY;\n    if (h > 0) {\n        for (let index = 0; index < effectiveCols.length; index++) {\n            const c = effectiveCols[index];\n            if (c.width === 0)\n                continue;\n            const tx = c.sticky ? x : x + translateX;\n            const colThemeBgCell = c.themeOverride?.bgCell;\n            if (colThemeBgCell !== undefined &&\n                colThemeBgCell !== bgCell &&\n                tx >= minX &&\n                tx <= maxX &&\n                verticalBorder(index + 1)) {\n                toDraw.push({\n                    x: tx,\n                    y: extraRowsStartY,\n                    w: c.width,\n                    h,\n                    color: colThemeBgCell,\n                });\n            }\n            x += c.width;\n        }\n    }\n    if (toDraw.length === 0)\n        return;\n    let color;\n    ctx.beginPath();\n    // render in reverse order because we computed and added the columns last, but they should actually be lower\n    // priority than the rows.\n    for (let i = toDraw.length - 1; i >= 0; i--) {\n        const r = toDraw[i];\n        if (color === undefined) {\n            color = r.color;\n        }\n        else if (r.color !== color) {\n            ctx.fillStyle = color;\n            ctx.fill();\n            ctx.beginPath();\n            color = r.color;\n        }\n        ctx.rect(r.x, r.y, r.w, r.h);\n    }\n    if (color !== undefined) {\n        ctx.fillStyle = color;\n        ctx.fill();\n    }\n    ctx.beginPath();\n}\n// lines are effectively drawn on the top left edge of a cell.\nexport function drawGridLines(ctx, effectiveCols, cellYOffset, translateX, translateY, width, height, drawRegions, spans, groupHeaderHeight, totalHeaderHeight, getRowHeight, getRowThemeOverride, verticalBorder, freezeTrailingRows, rows, theme, verticalOnly = false) {\n    if (spans !== undefined) {\n        ctx.beginPath();\n        ctx.save();\n        ctx.rect(0, 0, width, height);\n        for (const span of spans) {\n            ctx.rect(span.x + 1, span.y + 1, span.width - 1, span.height - 1);\n        }\n        ctx.clip(\"evenodd\");\n    }\n    const hColor = theme.horizontalBorderColor ?? theme.borderColor;\n    const vColor = theme.borderColor;\n    const { minX, maxX, minY, maxY } = getMinMaxXY(drawRegions, width, height);\n    const toDraw = [];\n    ctx.beginPath();\n    // vertical lines\n    let x = 0.5;\n    for (let index = 0; index < effectiveCols.length; index++) {\n        const c = effectiveCols[index];\n        if (c.width === 0)\n            continue;\n        x += c.width;\n        const tx = c.sticky ? x : x + translateX;\n        if (tx >= minX && tx <= maxX && verticalBorder(index + 1)) {\n            toDraw.push({\n                x1: tx,\n                y1: Math.max(groupHeaderHeight, minY),\n                x2: tx,\n                y2: Math.min(height, maxY),\n                color: vColor,\n            });\n        }\n    }\n    let freezeY = height + 0.5;\n    for (let i = rows - freezeTrailingRows; i < rows; i++) {\n        const rh = getRowHeight(i);\n        freezeY -= rh;\n        toDraw.push({ x1: minX, y1: freezeY, x2: maxX, y2: freezeY, color: hColor });\n    }\n    if (verticalOnly !== true) {\n        // horizontal lines\n        let y = totalHeaderHeight + 0.5;\n        let row = cellYOffset;\n        const target = freezeY;\n        while (y + translateY < target) {\n            const ty = y + translateY;\n            if (ty >= minY && ty <= maxY - 1) {\n                const rowTheme = getRowThemeOverride?.(row);\n                toDraw.push({\n                    x1: minX,\n                    y1: ty,\n                    x2: maxX,\n                    y2: ty,\n                    color: rowTheme?.horizontalBorderColor ?? rowTheme?.borderColor ?? hColor,\n                });\n            }\n            y += getRowHeight(row);\n            row++;\n        }\n    }\n    const groups = groupBy(toDraw, line => line.color);\n    for (const g of Object.keys(groups)) {\n        ctx.strokeStyle = g;\n        for (const line of groups[g]) {\n            ctx.moveTo(line.x1, line.y1);\n            ctx.lineTo(line.x2, line.y2);\n        }\n        ctx.stroke();\n        ctx.beginPath();\n    }\n    if (spans !== undefined) {\n        ctx.restore();\n    }\n}\n//# sourceMappingURL=data-grid-render.lines.js.map","/* eslint-disable sonarjs/no-duplicate-string */\n/* eslint-disable unicorn/no-for-loop */\nimport { deepEqual } from \"../../../common/support.js\";\nimport {} from \"../data-grid-types.js\";\nimport { getStickyWidth, getFreezeTrailingHeight } from \"./data-grid-lib.js\";\nimport { walkColumns } from \"./data-grid-render.walk.js\";\nexport function blitLastFrame(ctx, blitSource, blitSourceScroll, targetScroll, last, cellXOffset, cellYOffset, translateX, translateY, freezeTrailingRows, width, height, rows, totalHeaderHeight, dpr, mappedColumns, effectiveCols, getRowHeight, doubleBuffer) {\n    const drawRegions = [];\n    ctx.imageSmoothingEnabled = false;\n    const minY = Math.min(last.cellYOffset, cellYOffset);\n    const maxY = Math.max(last.cellYOffset, cellYOffset);\n    let deltaY = 0;\n    if (typeof getRowHeight === \"number\") {\n        deltaY += (maxY - minY) * getRowHeight;\n    }\n    else {\n        for (let i = minY; i < maxY; i++) {\n            deltaY += getRowHeight(i);\n        }\n    }\n    if (cellYOffset > last.cellYOffset) {\n        deltaY = -deltaY;\n    }\n    deltaY += translateY - last.translateY;\n    const minX = Math.min(last.cellXOffset, cellXOffset);\n    const maxX = Math.max(last.cellXOffset, cellXOffset);\n    let deltaX = 0;\n    for (let i = minX; i < maxX; i++) {\n        deltaX += mappedColumns[i].width;\n    }\n    if (cellXOffset > last.cellXOffset) {\n        deltaX = -deltaX;\n    }\n    deltaX += translateX - last.translateX;\n    const stickyWidth = getStickyWidth(effectiveCols);\n    if (deltaX !== 0 && deltaY !== 0) {\n        return {\n            regions: [],\n        };\n    }\n    const freezeTrailingRowsHeight = freezeTrailingRows > 0 ? getFreezeTrailingHeight(rows, freezeTrailingRows, getRowHeight) : 0;\n    const blitWidth = width - stickyWidth - Math.abs(deltaX);\n    const blitHeight = height - totalHeaderHeight - freezeTrailingRowsHeight - Math.abs(deltaY) - 1;\n    if (blitWidth > 150 && blitHeight > 150) {\n        const args = {\n            sx: 0,\n            sy: 0,\n            sw: width * dpr,\n            sh: height * dpr,\n            dx: 0,\n            dy: 0,\n            dw: width * dpr,\n            dh: height * dpr,\n        };\n        // blit Y\n        if (deltaY > 0) {\n            // scrolling up\n            args.sy = (totalHeaderHeight + 1) * dpr;\n            args.sh = blitHeight * dpr;\n            args.dy = (deltaY + totalHeaderHeight + 1) * dpr;\n            args.dh = blitHeight * dpr;\n            drawRegions.push({\n                x: 0,\n                y: totalHeaderHeight,\n                width: width,\n                height: deltaY + 1,\n            });\n        }\n        else if (deltaY < 0) {\n            // scrolling down\n            args.sy = (-deltaY + totalHeaderHeight + 1) * dpr;\n            args.sh = blitHeight * dpr;\n            args.dy = (totalHeaderHeight + 1) * dpr;\n            args.dh = blitHeight * dpr;\n            drawRegions.push({\n                x: 0,\n                y: height + deltaY - freezeTrailingRowsHeight,\n                width: width,\n                height: -deltaY + freezeTrailingRowsHeight,\n            });\n        }\n        // blit X\n        if (deltaX > 0) {\n            // pixels moving right\n            args.sx = stickyWidth * dpr;\n            args.sw = blitWidth * dpr;\n            args.dx = (deltaX + stickyWidth) * dpr;\n            args.dw = blitWidth * dpr;\n            drawRegions.push({\n                x: stickyWidth - 1,\n                y: 0,\n                width: deltaX + 2,\n                height: height,\n            });\n        }\n        else if (deltaX < 0) {\n            // pixels moving left\n            args.sx = (stickyWidth - deltaX) * dpr;\n            args.sw = blitWidth * dpr;\n            args.dx = stickyWidth * dpr;\n            args.dw = blitWidth * dpr;\n            drawRegions.push({\n                x: width + deltaX,\n                y: 0,\n                width: -deltaX,\n                height: height,\n            });\n        }\n        ctx.setTransform(1, 0, 0, 1, 0, 0);\n        if (doubleBuffer) {\n            if (stickyWidth > 0 &&\n                deltaX !== 0 &&\n                deltaY === 0 &&\n                (targetScroll === undefined || blitSourceScroll?.[1] !== false)) {\n                // When double buffering the freeze columns can be offset by a couple pixels vertically between the two\n                // buffers. We don't want to redraw them so we need to make sure to copy them between the buffers.\n                const w = stickyWidth * dpr;\n                const h = height * dpr;\n                ctx.drawImage(blitSource, 0, 0, w, h, 0, 0, w, h);\n            }\n            if (freezeTrailingRowsHeight > 0 &&\n                deltaX === 0 &&\n                deltaY !== 0 &&\n                (targetScroll === undefined || blitSourceScroll?.[0] !== false)) {\n                const y = (height - freezeTrailingRowsHeight) * dpr;\n                const w = width * dpr;\n                const h = freezeTrailingRowsHeight * dpr;\n                ctx.drawImage(blitSource, 0, y, w, h, 0, y, w, h);\n            }\n        }\n        ctx.drawImage(blitSource, args.sx, args.sy, args.sw, args.sh, args.dx, args.dy, args.dw, args.dh);\n        ctx.scale(dpr, dpr);\n    }\n    ctx.imageSmoothingEnabled = true;\n    return {\n        regions: drawRegions,\n    };\n}\nexport function blitResizedCol(last, cellXOffset, cellYOffset, translateX, translateY, width, height, totalHeaderHeight, effectiveCols, resizedIndex) {\n    const drawRegions = [];\n    // ctx.imageSmoothingEnabled = false;\n    if (cellXOffset !== last.cellXOffset ||\n        cellYOffset !== last.cellYOffset ||\n        translateX !== last.translateX ||\n        translateY !== last.translateY) {\n        return drawRegions;\n    }\n    walkColumns(effectiveCols, cellYOffset, translateX, translateY, totalHeaderHeight, (c, drawX, _drawY, clipX) => {\n        if (c.sourceIndex === resizedIndex) {\n            const x = Math.max(drawX, clipX) + 1;\n            drawRegions.push({\n                x,\n                y: 0,\n                width: width - x,\n                height,\n            });\n            return true;\n        }\n    });\n    return drawRegions;\n}\nexport function computeCanBlit(current, last) {\n    if (last === undefined)\n        return false;\n    if (current.width !== last.width ||\n        current.height !== last.height ||\n        current.theme !== last.theme ||\n        current.headerHeight !== last.headerHeight ||\n        current.rowHeight !== last.rowHeight ||\n        current.rows !== last.rows ||\n        current.freezeColumns !== last.freezeColumns ||\n        current.getRowThemeOverride !== last.getRowThemeOverride ||\n        current.isFocused !== last.isFocused ||\n        current.isResizing !== last.isResizing ||\n        current.verticalBorder !== last.verticalBorder ||\n        current.getCellContent !== last.getCellContent ||\n        current.highlightRegions !== last.highlightRegions ||\n        current.selection !== last.selection ||\n        current.dragAndDropState !== last.dragAndDropState ||\n        current.prelightCells !== last.prelightCells ||\n        current.touchMode !== last.touchMode ||\n        current.maxScaleFactor !== last.maxScaleFactor) {\n        return false;\n    }\n    if (current.mappedColumns !== last.mappedColumns) {\n        if (current.mappedColumns.length > 100 || current.mappedColumns.length !== last.mappedColumns.length) {\n            // The array is big, let's just redraw the damned thing rather than check these all. Or the number of cols\n            // changed in which case I dont want to figure out what happened.\n            return false;\n        }\n        // We want to know if only one column has resized. If this is the case we can do a special left/right sliding\n        // blit. Or just not redraw shit on the left.\n        let resized;\n        for (let i = 0; i < current.mappedColumns.length; i++) {\n            const curCol = current.mappedColumns[i];\n            const lastCol = last.mappedColumns[i];\n            if (deepEqual(curCol, lastCol))\n                continue;\n            // two columns changed, abort\n            if (resized !== undefined)\n                return false;\n            if (curCol.width === lastCol.width)\n                return false;\n            const { width, ...curRest } = curCol;\n            const { width: lastWidth, ...lastRest } = lastCol;\n            // more than width changed, abort\n            if (!deepEqual(curRest, lastRest))\n                return false;\n            resized = i;\n        }\n        if (resized === undefined) {\n            // we never found a changed column, cool, we can blit\n            return true;\n        }\n        return resized;\n    }\n    return true;\n}\n//# sourceMappingURL=data-grid-render.blit.js.map","/* eslint-disable sonarjs/no-duplicate-string */\n/* eslint-disable unicorn/no-for-loop */\nimport {} from \"../data-grid-types.js\";\nimport { getStickyWidth, computeBounds, getFreezeTrailingHeight } from \"./data-grid-lib.js\";\nimport {} from \"../../../common/styles.js\";\nimport { blend, withAlpha } from \"../color-parser.js\";\nimport { hugRectToTarget, intersectRect, rectContains, splitRectIntoRegions } from \"../../../common/math.js\";\nimport { getSpanBounds, walkColumns, walkRowsInCol } from \"./data-grid-render.walk.js\";\nimport {} from \"./data-grid-render.cells.js\";\nexport function drawHighlightRings(ctx, width, height, cellXOffset, cellYOffset, translateX, translateY, mappedColumns, freezeColumns, headerHeight, groupHeaderHeight, rowHeight, freezeTrailingRows, rows, allHighlightRegions, theme) {\n    const highlightRegions = allHighlightRegions?.filter(x => x.style !== \"no-outline\");\n    if (highlightRegions === undefined || highlightRegions.length === 0)\n        return undefined;\n    const freezeLeft = getStickyWidth(mappedColumns);\n    const freezeBottom = getFreezeTrailingHeight(rows, freezeTrailingRows, rowHeight);\n    const splitIndicies = [freezeColumns, 0, mappedColumns.length, rows - freezeTrailingRows];\n    const splitLocations = [freezeLeft, 0, width, height - freezeBottom];\n    const drawRects = highlightRegions.map(h => {\n        const r = h.range;\n        const style = h.style ?? \"dashed\";\n        return splitRectIntoRegions(r, splitIndicies, width, height, splitLocations).map(arg => {\n            const rect = arg.rect;\n            const topLeftBounds = computeBounds(rect.x, rect.y, width, height, groupHeaderHeight, headerHeight + groupHeaderHeight, cellXOffset, cellYOffset, translateX, translateY, rows, freezeColumns, freezeTrailingRows, mappedColumns, rowHeight);\n            const bottomRightBounds = rect.width === 1 && rect.height === 1\n                ? topLeftBounds\n                : computeBounds(rect.x + rect.width - 1, rect.y + rect.height - 1, width, height, groupHeaderHeight, headerHeight + groupHeaderHeight, cellXOffset, cellYOffset, translateX, translateY, rows, freezeColumns, freezeTrailingRows, mappedColumns, rowHeight);\n            if (rect.x + rect.width >= mappedColumns.length) {\n                bottomRightBounds.width -= 1;\n            }\n            if (rect.y + rect.height >= rows) {\n                bottomRightBounds.height -= 1;\n            }\n            return {\n                color: h.color,\n                style,\n                clip: arg.clip,\n                rect: hugRectToTarget({\n                    x: topLeftBounds.x,\n                    y: topLeftBounds.y,\n                    width: bottomRightBounds.x + bottomRightBounds.width - topLeftBounds.x,\n                    height: bottomRightBounds.y + bottomRightBounds.height - topLeftBounds.y,\n                }, width, height, 8),\n            };\n        });\n    });\n    const drawCb = () => {\n        ctx.lineWidth = 1;\n        let dashed = false;\n        for (const dr of drawRects) {\n            for (const s of dr) {\n                if (s?.rect !== undefined &&\n                    intersectRect(0, 0, width, height, s.rect.x, s.rect.y, s.rect.width, s.rect.height)) {\n                    const wasDashed = dashed;\n                    const needsClip = !rectContains(s.clip, s.rect);\n                    if (needsClip) {\n                        ctx.save();\n                        ctx.rect(s.clip.x, s.clip.y, s.clip.width, s.clip.height);\n                        ctx.clip();\n                    }\n                    if (s.style === \"dashed\" && !dashed) {\n                        ctx.setLineDash([5, 3]);\n                        dashed = true;\n                    }\n                    else if ((s.style === \"solid\" || s.style === \"solid-outline\") && dashed) {\n                        ctx.setLineDash([]);\n                        dashed = false;\n                    }\n                    ctx.strokeStyle =\n                        s.style === \"solid-outline\"\n                            ? blend(blend(s.color, theme.borderColor), theme.bgCell)\n                            : withAlpha(s.color, 1);\n                    ctx.strokeRect(s.rect.x + 0.5, s.rect.y + 0.5, s.rect.width - 1, s.rect.height - 1);\n                    if (needsClip) {\n                        ctx.restore();\n                        dashed = wasDashed;\n                    }\n                }\n            }\n        }\n        if (dashed) {\n            ctx.setLineDash([]);\n        }\n    };\n    drawCb();\n    return drawCb;\n}\nexport function drawColumnResizeOutline(ctx, yOffset, xOffset, height, style) {\n    ctx.beginPath();\n    ctx.moveTo(yOffset, xOffset);\n    ctx.lineTo(yOffset, height);\n    ctx.lineWidth = 2;\n    ctx.strokeStyle = style;\n    ctx.stroke();\n    ctx.globalAlpha = 1;\n}\nexport function drawFillHandle(ctx, width, height, cellYOffset, translateX, translateY, effectiveCols, allColumns, theme, totalHeaderHeight, selectedCell, getRowHeight, getCellContent, freezeTrailingRows, hasAppendRow, fillHandle, rows) {\n    if (selectedCell.current === undefined)\n        return undefined;\n    const range = selectedCell.current.range;\n    const currentItem = selectedCell.current.cell;\n    const fillHandleTarget = [range.x + range.width - 1, range.y + range.height - 1];\n    // if the currentItem row greater than rows and the fill handle row is greater than rows, we dont need to draw\n    if (currentItem[1] >= rows && fillHandleTarget[1] >= rows)\n        return undefined;\n    const mustDraw = effectiveCols.some(c => c.sourceIndex === currentItem[0] || c.sourceIndex === fillHandleTarget[0]);\n    if (!mustDraw)\n        return undefined;\n    const [targetCol, targetRow] = selectedCell.current.cell;\n    const cell = getCellContent(selectedCell.current.cell);\n    const targetColSpan = cell.span ?? [targetCol, targetCol];\n    const isStickyRow = targetRow >= rows - freezeTrailingRows;\n    const stickRowHeight = freezeTrailingRows > 0 && !isStickyRow\n        ? getFreezeTrailingHeight(rows, freezeTrailingRows, getRowHeight) - 1\n        : 0;\n    const fillHandleRow = fillHandleTarget[1];\n    let drawHandleCb = undefined;\n    walkColumns(effectiveCols, cellYOffset, translateX, translateY, totalHeaderHeight, (col, drawX, colDrawY, clipX, startRow) => {\n        clipX;\n        if (col.sticky && targetCol > col.sourceIndex)\n            return;\n        const isBeforeTarget = col.sourceIndex < targetColSpan[0];\n        const isAfterTarget = col.sourceIndex > targetColSpan[1];\n        const isFillHandleCol = col.sourceIndex === fillHandleTarget[0];\n        if (!isFillHandleCol && (isBeforeTarget || isAfterTarget)) {\n            // we dont need to do any drawing on this column but may yet need to draw\n            return;\n        }\n        walkRowsInCol(startRow, colDrawY, height, rows, getRowHeight, freezeTrailingRows, hasAppendRow, undefined, (drawY, row, rh) => {\n            if (row !== targetRow && row !== fillHandleRow)\n                return;\n            let cellX = drawX;\n            let cellWidth = col.width;\n            if (cell.span !== undefined) {\n                const areas = getSpanBounds(cell.span, drawX, drawY, col.width, rh, col, allColumns);\n                const area = col.sticky ? areas[0] : areas[1];\n                if (area !== undefined) {\n                    cellX = area.x;\n                    cellWidth = area.width;\n                }\n            }\n            const doHandle = row === fillHandleRow && isFillHandleCol && fillHandle;\n            if (doHandle) {\n                drawHandleCb = () => {\n                    if (clipX > cellX && !col.sticky) {\n                        ctx.beginPath();\n                        ctx.rect(clipX, 0, width - clipX, height);\n                        ctx.clip();\n                    }\n                    ctx.beginPath();\n                    ctx.rect(cellX + cellWidth - 4, drawY + rh - 4, 4, 4);\n                    ctx.fillStyle = col.themeOverride?.accentColor ?? theme.accentColor;\n                    ctx.fill();\n                };\n            }\n            return drawHandleCb !== undefined;\n        });\n        return drawHandleCb !== undefined;\n    });\n    if (drawHandleCb === undefined)\n        return undefined;\n    const result = () => {\n        ctx.save();\n        ctx.beginPath();\n        ctx.rect(0, totalHeaderHeight, width, height - totalHeaderHeight - stickRowHeight);\n        ctx.clip();\n        drawHandleCb?.();\n        ctx.restore();\n    };\n    result();\n    return result;\n}\n//# sourceMappingURL=data-grid.render.rings.js.map","/* eslint-disable sonarjs/no-duplicate-string */\n/* eslint-disable unicorn/no-for-loop */\nimport {} from \"../data-grid-types.js\";\nimport { CellSet } from \"../cell-set.js\";\nimport { getEffectiveColumns, rectBottomRight } from \"./data-grid-lib.js\";\nimport { blend } from \"../color-parser.js\";\nimport { assert } from \"../../../common/support.js\";\nimport { walkColumns, walkGroups, walkRowsInCol } from \"./data-grid-render.walk.js\";\nimport { drawCells } from \"./data-grid-render.cells.js\";\nimport { drawGridHeaders } from \"./data-grid-render.header.js\";\nimport { drawGridLines, overdrawStickyBoundaries, drawBlanks, drawExtraRowThemes } from \"./data-grid-render.lines.js\";\nimport { blitLastFrame, blitResizedCol, computeCanBlit } from \"./data-grid-render.blit.js\";\nimport { drawHighlightRings, drawFillHandle, drawColumnResizeOutline } from \"./data-grid.render.rings.js\";\n// Future optimization opportunities\n// - Create a cache of a buffer used to render the full view of a partially displayed column so that when\n//   scrolling horizontally you can simply blit the pre-drawn column instead of continually paying the draw\n//   cost as it slides into view.\n// - The same as above but for partially displayed rows\n// - Blit headers on horizontal scroll\n// - Use webworker to load images, helpful with lots of large images\n// - Retain mode for drawing cells. Instead of drawing cells as we come across them, first build a data\n//   structure which contains all operations to perform, then sort them all by \"prep\" requirement, then do\n//   all like operations at once.\nfunction clipHeaderDamage(ctx, effectiveColumns, width, groupHeaderHeight, totalHeaderHeight, translateX, translateY, cellYOffset, damage) {\n    if (damage === undefined || damage.size === 0)\n        return;\n    ctx.beginPath();\n    walkGroups(effectiveColumns, width, translateX, groupHeaderHeight, (span, _group, x, y, w, h) => {\n        const hasItemInSpan = damage.hasItemInRectangle({\n            x: span[0],\n            y: -2,\n            width: span[1] - span[0] + 1,\n            height: 1,\n        });\n        if (hasItemInSpan) {\n            ctx.rect(x, y, w, h);\n        }\n    });\n    walkColumns(effectiveColumns, cellYOffset, translateX, translateY, totalHeaderHeight, (c, drawX, _colDrawY, clipX) => {\n        const diff = Math.max(0, clipX - drawX);\n        const finalX = drawX + diff + 1;\n        const finalWidth = c.width - diff - 1;\n        if (damage.has([c.sourceIndex, -1])) {\n            ctx.rect(finalX, groupHeaderHeight, finalWidth, totalHeaderHeight - groupHeaderHeight);\n        }\n    });\n    ctx.clip();\n}\nfunction getLastRow(effectiveColumns, height, totalHeaderHeight, translateX, translateY, cellYOffset, rows, getRowHeight, freezeTrailingRows, hasAppendRow) {\n    let result = 0;\n    walkColumns(effectiveColumns, cellYOffset, translateX, translateY, totalHeaderHeight, (_c, __drawX, colDrawY, _clipX, startRow) => {\n        walkRowsInCol(startRow, colDrawY, height, rows, getRowHeight, freezeTrailingRows, hasAppendRow, undefined, (_drawY, row, _rh, isSticky) => {\n            if (!isSticky) {\n                result = Math.max(row, result);\n            }\n        });\n        return true;\n    });\n    return result;\n}\nexport function drawGrid(arg, lastArg) {\n    const { canvasCtx, headerCanvasCtx, width, height, cellXOffset, cellYOffset, translateX, translateY, mappedColumns, enableGroups, freezeColumns, dragAndDropState, theme, drawFocus, headerHeight, groupHeaderHeight, disabledRows, rowHeight, verticalBorder, overrideCursor, isResizing, selection, fillHandle, freezeTrailingRows, rows, getCellContent, getGroupDetails, getRowThemeOverride, isFocused, drawHeaderCallback, prelightCells, drawCellCallback, highlightRegions, resizeCol, imageLoader, lastBlitData, hoverValues, hyperWrapping, hoverInfo, spriteManager, maxScaleFactor, hasAppendRow, touchMode, enqueue, renderStateProvider, getCellRenderer, renderStrategy, bufferACtx, bufferBCtx, damage, minimumCellWidth, resizeIndicator, } = arg;\n    if (width === 0 || height === 0)\n        return;\n    const doubleBuffer = renderStrategy === \"double-buffer\";\n    const dpr = Math.min(maxScaleFactor, Math.ceil(window.devicePixelRatio ?? 1));\n    // if we are double buffering we need to make sure we can blit. If we can't we need to redraw the whole thing\n    const canBlit = renderStrategy !== \"direct\" && computeCanBlit(arg, lastArg);\n    const canvas = canvasCtx.canvas;\n    if (canvas.width !== width * dpr || canvas.height !== height * dpr) {\n        canvas.width = width * dpr;\n        canvas.height = height * dpr;\n        canvas.style.width = width + \"px\";\n        canvas.style.height = height + \"px\";\n    }\n    const overlayCanvas = headerCanvasCtx.canvas;\n    const totalHeaderHeight = enableGroups ? groupHeaderHeight + headerHeight : headerHeight;\n    const overlayHeight = totalHeaderHeight + 1; // border\n    if (overlayCanvas.width !== width * dpr || overlayCanvas.height !== overlayHeight * dpr) {\n        overlayCanvas.width = width * dpr;\n        overlayCanvas.height = overlayHeight * dpr;\n        overlayCanvas.style.width = width + \"px\";\n        overlayCanvas.style.height = overlayHeight + \"px\";\n    }\n    const bufferA = bufferACtx.canvas;\n    const bufferB = bufferBCtx.canvas;\n    if (doubleBuffer && (bufferA.width !== width * dpr || bufferA.height !== height * dpr)) {\n        bufferA.width = width * dpr;\n        bufferA.height = height * dpr;\n        if (lastBlitData.current !== undefined)\n            lastBlitData.current.aBufferScroll = undefined;\n    }\n    if (doubleBuffer && (bufferB.width !== width * dpr || bufferB.height !== height * dpr)) {\n        bufferB.width = width * dpr;\n        bufferB.height = height * dpr;\n        if (lastBlitData.current !== undefined)\n            lastBlitData.current.bBufferScroll = undefined;\n    }\n    const last = lastBlitData.current;\n    if (canBlit === true &&\n        cellXOffset === last?.cellXOffset &&\n        cellYOffset === last?.cellYOffset &&\n        translateX === last?.translateX &&\n        translateY === last?.translateY)\n        return;\n    let mainCtx = null;\n    if (doubleBuffer) {\n        mainCtx = canvasCtx;\n    }\n    const overlayCtx = headerCanvasCtx;\n    let targetCtx;\n    if (!doubleBuffer) {\n        targetCtx = canvasCtx;\n    }\n    else if (damage !== undefined) {\n        targetCtx = last?.lastBuffer === \"b\" ? bufferBCtx : bufferACtx;\n    }\n    else {\n        targetCtx = last?.lastBuffer === \"b\" ? bufferACtx : bufferBCtx;\n    }\n    const targetBuffer = targetCtx.canvas;\n    const blitSource = doubleBuffer ? (targetBuffer === bufferA ? bufferB : bufferA) : canvas;\n    const getRowHeight = typeof rowHeight === \"number\" ? () => rowHeight : rowHeight;\n    overlayCtx.save();\n    targetCtx.save();\n    overlayCtx.beginPath();\n    targetCtx.beginPath();\n    overlayCtx.textBaseline = \"middle\";\n    targetCtx.textBaseline = \"middle\";\n    if (dpr !== 1) {\n        overlayCtx.scale(dpr, dpr);\n        targetCtx.scale(dpr, dpr);\n    }\n    const effectiveCols = getEffectiveColumns(mappedColumns, cellXOffset, width, dragAndDropState, translateX);\n    let drawRegions = [];\n    const mustDrawFocusOnHeader = drawFocus && selection.current?.cell[1] === cellYOffset && translateY === 0;\n    let mustDrawHighlightRingsOnHeader = false;\n    if (highlightRegions !== undefined) {\n        for (const r of highlightRegions) {\n            if (r.style !== \"no-outline\" && r.range.y === cellYOffset && translateY === 0) {\n                mustDrawHighlightRingsOnHeader = true;\n                break;\n            }\n        }\n    }\n    const drawHeaderTexture = () => {\n        drawGridHeaders(overlayCtx, effectiveCols, enableGroups, hoverInfo, width, translateX, headerHeight, groupHeaderHeight, dragAndDropState, isResizing, selection, theme, spriteManager, hoverValues, verticalBorder, getGroupDetails, damage, drawHeaderCallback, touchMode);\n        drawGridLines(overlayCtx, effectiveCols, cellYOffset, translateX, translateY, width, height, undefined, undefined, groupHeaderHeight, totalHeaderHeight, getRowHeight, getRowThemeOverride, verticalBorder, freezeTrailingRows, rows, theme, true);\n        overlayCtx.beginPath();\n        overlayCtx.moveTo(0, overlayHeight - 0.5);\n        overlayCtx.lineTo(width, overlayHeight - 0.5);\n        overlayCtx.strokeStyle = blend(theme.headerBottomBorderColor ?? theme.horizontalBorderColor ?? theme.borderColor, theme.bgHeader);\n        overlayCtx.stroke();\n        if (mustDrawHighlightRingsOnHeader) {\n            drawHighlightRings(overlayCtx, width, height, cellXOffset, cellYOffset, translateX, translateY, mappedColumns, freezeColumns, headerHeight, groupHeaderHeight, rowHeight, freezeTrailingRows, rows, highlightRegions, theme);\n        }\n        if (mustDrawFocusOnHeader) {\n            drawFillHandle(overlayCtx, width, height, cellYOffset, translateX, translateY, effectiveCols, mappedColumns, theme, totalHeaderHeight, selection, getRowHeight, getCellContent, freezeTrailingRows, hasAppendRow, fillHandle, rows);\n        }\n    };\n    // handle damage updates by directly drawing to the target to avoid large blits\n    if (damage !== undefined) {\n        const viewRegionWidth = effectiveCols[effectiveCols.length - 1].sourceIndex + 1;\n        const damageInView = damage.hasItemInRegion([\n            {\n                x: cellXOffset,\n                y: -2,\n                width: viewRegionWidth,\n                height: 2,\n            },\n            {\n                x: cellXOffset,\n                y: cellYOffset,\n                width: viewRegionWidth,\n                height: 300,\n            },\n            {\n                x: 0,\n                y: cellYOffset,\n                width: freezeColumns,\n                height: 300,\n            },\n            {\n                x: 0,\n                y: -2,\n                width: freezeColumns,\n                height: 2,\n            },\n            {\n                x: cellXOffset,\n                y: rows - freezeTrailingRows,\n                width: viewRegionWidth,\n                height: freezeTrailingRows,\n                when: freezeTrailingRows > 0,\n            },\n        ]);\n        const doDamage = (ctx) => {\n            drawCells(ctx, effectiveCols, mappedColumns, height, totalHeaderHeight, translateX, translateY, cellYOffset, rows, getRowHeight, getCellContent, getGroupDetails, getRowThemeOverride, disabledRows, isFocused, drawFocus, freezeTrailingRows, hasAppendRow, drawRegions, damage, selection, prelightCells, highlightRegions, imageLoader, spriteManager, hoverValues, hoverInfo, drawCellCallback, hyperWrapping, theme, enqueue, renderStateProvider, getCellRenderer, overrideCursor, minimumCellWidth);\n            const selectionCurrent = selection.current;\n            if (fillHandle &&\n                drawFocus &&\n                selectionCurrent !== undefined &&\n                damage.has(rectBottomRight(selectionCurrent.range))) {\n                drawFillHandle(ctx, width, height, cellYOffset, translateX, translateY, effectiveCols, mappedColumns, theme, totalHeaderHeight, selection, getRowHeight, getCellContent, freezeTrailingRows, hasAppendRow, fillHandle, rows);\n            }\n        };\n        if (damageInView) {\n            doDamage(targetCtx);\n            if (mainCtx !== null) {\n                mainCtx.save();\n                mainCtx.scale(dpr, dpr);\n                mainCtx.textBaseline = \"middle\";\n                doDamage(mainCtx);\n                mainCtx.restore();\n            }\n            const doHeaders = damage.hasHeader();\n            if (doHeaders) {\n                clipHeaderDamage(overlayCtx, effectiveCols, width, groupHeaderHeight, totalHeaderHeight, translateX, translateY, cellYOffset, damage);\n                drawHeaderTexture();\n            }\n        }\n        targetCtx.restore();\n        overlayCtx.restore();\n        return;\n    }\n    if (canBlit !== true ||\n        cellXOffset !== last?.cellXOffset ||\n        translateX !== last?.translateX ||\n        mustDrawFocusOnHeader !== last?.mustDrawFocusOnHeader ||\n        mustDrawHighlightRingsOnHeader !== last?.mustDrawHighlightRingsOnHeader) {\n        drawHeaderTexture();\n    }\n    if (canBlit === true) {\n        assert(blitSource !== undefined && last !== undefined);\n        const { regions } = blitLastFrame(targetCtx, blitSource, blitSource === bufferA ? last.aBufferScroll : last.bBufferScroll, blitSource === bufferA ? last.bBufferScroll : last.aBufferScroll, last, cellXOffset, cellYOffset, translateX, translateY, freezeTrailingRows, width, height, rows, totalHeaderHeight, dpr, mappedColumns, effectiveCols, rowHeight, doubleBuffer);\n        drawRegions = regions;\n    }\n    else if (canBlit !== false) {\n        assert(last !== undefined);\n        const resizedCol = canBlit;\n        drawRegions = blitResizedCol(last, cellXOffset, cellYOffset, translateX, translateY, width, height, totalHeaderHeight, effectiveCols, resizedCol);\n    }\n    overdrawStickyBoundaries(targetCtx, effectiveCols, width, height, freezeTrailingRows, rows, verticalBorder, getRowHeight, theme);\n    const highlightRedraw = drawHighlightRings(targetCtx, width, height, cellXOffset, cellYOffset, translateX, translateY, mappedColumns, freezeColumns, headerHeight, groupHeaderHeight, rowHeight, freezeTrailingRows, rows, highlightRegions, theme);\n    // the overdraw may have nuked out our focus ring right edge.\n    const focusRedraw = drawFocus\n        ? drawFillHandle(targetCtx, width, height, cellYOffset, translateX, translateY, effectiveCols, mappedColumns, theme, totalHeaderHeight, selection, getRowHeight, getCellContent, freezeTrailingRows, hasAppendRow, fillHandle, rows)\n        : undefined;\n    targetCtx.fillStyle = theme.bgCell;\n    if (drawRegions.length > 0) {\n        targetCtx.beginPath();\n        for (const r of drawRegions) {\n            targetCtx.rect(r.x, r.y, r.width, r.height);\n        }\n        targetCtx.clip();\n        targetCtx.fill();\n        targetCtx.beginPath();\n    }\n    else {\n        targetCtx.fillRect(0, 0, width, height);\n    }\n    const spans = drawCells(targetCtx, effectiveCols, mappedColumns, height, totalHeaderHeight, translateX, translateY, cellYOffset, rows, getRowHeight, getCellContent, getGroupDetails, getRowThemeOverride, disabledRows, isFocused, drawFocus, freezeTrailingRows, hasAppendRow, drawRegions, damage, selection, prelightCells, highlightRegions, imageLoader, spriteManager, hoverValues, hoverInfo, drawCellCallback, hyperWrapping, theme, enqueue, renderStateProvider, getCellRenderer, overrideCursor, minimumCellWidth);\n    drawBlanks(targetCtx, effectiveCols, mappedColumns, width, height, totalHeaderHeight, translateX, translateY, cellYOffset, rows, getRowHeight, getRowThemeOverride, selection.rows, disabledRows, freezeTrailingRows, hasAppendRow, drawRegions, damage, theme);\n    drawExtraRowThemes(targetCtx, effectiveCols, cellYOffset, translateX, translateY, width, height, drawRegions, totalHeaderHeight, getRowHeight, getRowThemeOverride, verticalBorder, freezeTrailingRows, rows, theme);\n    drawGridLines(targetCtx, effectiveCols, cellYOffset, translateX, translateY, width, height, drawRegions, spans, groupHeaderHeight, totalHeaderHeight, getRowHeight, getRowThemeOverride, verticalBorder, freezeTrailingRows, rows, theme);\n    highlightRedraw?.();\n    focusRedraw?.();\n    if (isResizing && resizeIndicator !== \"none\") {\n        walkColumns(effectiveCols, 0, translateX, 0, totalHeaderHeight, (c, x) => {\n            if (c.sourceIndex === resizeCol) {\n                drawColumnResizeOutline(overlayCtx, x + c.width, 0, totalHeaderHeight + 1, blend(theme.resizeIndicatorColor ?? theme.accentLight, theme.bgHeader));\n                if (resizeIndicator === \"full\") {\n                    drawColumnResizeOutline(targetCtx, x + c.width, totalHeaderHeight, height, blend(theme.resizeIndicatorColor ?? theme.accentLight, theme.bgCell));\n                }\n                return true;\n            }\n            return false;\n        });\n    }\n    if (mainCtx !== null) {\n        mainCtx.fillStyle = theme.bgCell;\n        mainCtx.fillRect(0, 0, width, height);\n        mainCtx.drawImage(targetCtx.canvas, 0, 0);\n    }\n    const lastRowDrawn = getLastRow(effectiveCols, height, totalHeaderHeight, translateX, translateY, cellYOffset, rows, getRowHeight, freezeTrailingRows, hasAppendRow);\n    imageLoader?.setWindow({\n        x: cellXOffset,\n        y: cellYOffset,\n        width: effectiveCols.length,\n        height: lastRowDrawn - cellYOffset,\n    }, freezeColumns, Array.from({ length: freezeTrailingRows }, (_, i) => rows - 1 - i));\n    const scrollX = last !== undefined && (cellXOffset !== last.cellXOffset || translateX !== last.translateX);\n    const scrollY = last !== undefined && (cellYOffset !== last.cellYOffset || translateY !== last.translateY);\n    lastBlitData.current = {\n        cellXOffset,\n        cellYOffset,\n        translateX,\n        translateY,\n        mustDrawFocusOnHeader,\n        mustDrawHighlightRingsOnHeader,\n        lastBuffer: doubleBuffer ? (targetBuffer === bufferA ? \"a\" : \"b\") : undefined,\n        aBufferScroll: targetBuffer === bufferA ? [scrollX, scrollY] : last?.aBufferScroll,\n        bBufferScroll: targetBuffer === bufferB ? [scrollX, scrollY] : last?.bBufferScroll,\n    };\n    targetCtx.restore();\n    overlayCtx.restore();\n}\n//# sourceMappingURL=data-grid-render.js.map","import clamp from \"lodash/clamp.js\";\nimport { itemsAreEqual } from \"./render/data-grid-lib.js\";\nconst hoverTime = 80;\nfunction easeOutCubic(x) {\n    const x1 = x - 1;\n    return x1 * x1 * x1 + 1;\n}\nexport class AnimationManager {\n    callback;\n    constructor(callback) {\n        this.callback = callback;\n    }\n    currentHoveredItem = undefined;\n    leavingItems = [];\n    lastAnimationTime;\n    addToLeavingItems = (item) => {\n        const isAlreadyLeaving = this.leavingItems.some(i => itemsAreEqual(i.item, item.item));\n        if (isAlreadyLeaving) {\n            return;\n        }\n        this.leavingItems.push(item);\n    };\n    /**\n     * @returns the hover amount of the item, if it was leaving (0 if not).\n     */\n    removeFromLeavingItems = (item) => {\n        const leavingItem = this.leavingItems.find(e => itemsAreEqual(e.item, item));\n        this.leavingItems = this.leavingItems.filter(i => i !== leavingItem);\n        return leavingItem?.hoverAmount ?? 0;\n    };\n    cleanUpLeavingElements = () => {\n        this.leavingItems = this.leavingItems.filter(i => i.hoverAmount > 0);\n    };\n    shouldStep = () => {\n        const hasLeavingItems = this.leavingItems.length > 0;\n        const currentHoveredIsAnimating = this.currentHoveredItem !== undefined && this.currentHoveredItem.hoverAmount < 1;\n        return hasLeavingItems || currentHoveredIsAnimating;\n    };\n    getAnimatingItems = () => {\n        // this is horrible. We shoudl be mutating the array in place. The reason we don't right now is because the\n        // hoveramount is used as both the tweened value and the raw value. We should separate these two things.\n        // Then we can stop doing the allocation insanity dance.\n        if (this.currentHoveredItem !== undefined) {\n            return [...this.leavingItems, this.currentHoveredItem];\n        }\n        return this.leavingItems.map(x => ({ ...x, hoverAmount: easeOutCubic(x.hoverAmount) }));\n    };\n    step = (timestamp) => {\n        if (this.lastAnimationTime === undefined) {\n            this.lastAnimationTime = timestamp;\n        }\n        else {\n            const step = timestamp - this.lastAnimationTime;\n            const delta = step / hoverTime;\n            for (const item of this.leavingItems) {\n                item.hoverAmount = clamp(item.hoverAmount - delta, 0, 1);\n            }\n            if (this.currentHoveredItem !== undefined) {\n                this.currentHoveredItem.hoverAmount = clamp(this.currentHoveredItem.hoverAmount + delta, 0, 1);\n            }\n            const animating = this.getAnimatingItems();\n            this.callback(animating);\n            this.cleanUpLeavingElements();\n        }\n        if (this.shouldStep()) {\n            this.lastAnimationTime = timestamp;\n            window.requestAnimationFrame(this.step);\n        }\n        else {\n            this.lastAnimationTime = undefined;\n        }\n    };\n    setHovered = (item) => {\n        if (itemsAreEqual(this.currentHoveredItem?.item, item)) {\n            return;\n        }\n        if (this.currentHoveredItem !== undefined) {\n            this.addToLeavingItems(this.currentHoveredItem);\n        }\n        if (item !== undefined) {\n            const hoverAmount = this.removeFromLeavingItems(item);\n            this.currentHoveredItem = {\n                item,\n                hoverAmount,\n            };\n        }\n        else {\n            this.currentHoveredItem = undefined;\n        }\n        if (this.lastAnimationTime === undefined) {\n            window.requestAnimationFrame(this.step);\n        }\n    };\n}\n//# sourceMappingURL=animation-manager.js.map","class Lazy {\n    fn;\n    val;\n    constructor(fn) {\n        this.fn = fn;\n    }\n    get value() {\n        return this.val ?? (this.val = this.fn());\n    }\n}\nfunction lazy(fn) {\n    return new Lazy(fn);\n}\n// next.js apps don't have window available at import time, so this will fail if its not lazy.\nexport const browserIsFirefox = lazy(() => window.navigator.userAgent.includes(\"Firefox\"));\nexport const browserIsSafari = lazy(() => window.navigator.userAgent.includes(\"Mac OS\") &&\n    window.navigator.userAgent.includes(\"Safari\") &&\n    !window.navigator.userAgent.includes(\"Chrome\"));\nexport const browserIsOSX = lazy(() => window.navigator.platform.toLowerCase().startsWith(\"mac\"));\n//# sourceMappingURL=browser-detect.js.map","import * as React from \"react\";\nimport {} from \"./data-grid-types.js\";\nimport { CellSet } from \"./cell-set.js\";\nimport { packColRowToNumber, unpackNumberToColRow } from \"../../common/render-state-provider.js\";\nexport function useAnimationQueue(draw) {\n    const queue = React.useRef([]);\n    const seq = React.useRef(0);\n    const drawRef = React.useRef(draw);\n    drawRef.current = draw;\n    const loop = React.useCallback(() => {\n        const requeue = () => window.requestAnimationFrame(fn);\n        const fn = () => {\n            const toDraw = queue.current.map(unpackNumberToColRow);\n            queue.current = [];\n            drawRef.current(new CellSet(toDraw));\n            if (queue.current.length > 0) {\n                seq.current++;\n            }\n            else {\n                seq.current = 0;\n            }\n        };\n        window.requestAnimationFrame(seq.current > 600 ? requeue : fn);\n    }, []);\n    return React.useCallback((item) => {\n        if (queue.current.length === 0)\n            loop();\n        const packed = packColRowToNumber(item[0], item[1]);\n        if (queue.current.includes(packed))\n            return;\n        queue.current.push(packed);\n    }, [loop]);\n}\n//# sourceMappingURL=use-animation-queue.js.map","/** @category Types */\nexport const headerKind = \"header\";\n/** @category Types */\nexport const groupHeaderKind = \"group-header\";\n/** @category Types */\nexport const outOfBoundsKind = \"out-of-bounds\";\n/** @category Types */\nexport var OutOfBoundsRegionAxis;\n(function (OutOfBoundsRegionAxis) {\n    OutOfBoundsRegionAxis[OutOfBoundsRegionAxis[\"Start\"] = -2] = \"Start\";\n    OutOfBoundsRegionAxis[OutOfBoundsRegionAxis[\"StartPadding\"] = -1] = \"StartPadding\";\n    OutOfBoundsRegionAxis[OutOfBoundsRegionAxis[\"Center\"] = 0] = \"Center\";\n    OutOfBoundsRegionAxis[OutOfBoundsRegionAxis[\"EndPadding\"] = 1] = \"EndPadding\";\n    OutOfBoundsRegionAxis[OutOfBoundsRegionAxis[\"End\"] = 2] = \"End\";\n})(OutOfBoundsRegionAxis || (OutOfBoundsRegionAxis = {}));\nexport function mouseEventArgsAreEqual(args, other) {\n    if (args === other)\n        return true;\n    if (args?.kind === \"out-of-bounds\") {\n        return (args?.kind === other?.kind &&\n            args?.location[0] === other?.location[0] &&\n            args?.location[1] === other?.location[1] &&\n            args?.region[0] === other?.region[0] &&\n            args?.region[1] === other?.region[1]);\n    }\n    return (args?.kind === other?.kind &&\n        args?.location[0] === other?.location[0] &&\n        args?.location[1] === other?.location[1]);\n}\n//# sourceMappingURL=event-args.js.map","import * as React from \"react\";\nimport { computeBounds, getColumnIndexForX, getEffectiveColumns, getRowIndexForY, getStickyWidth, rectBottomRight, useMappedColumns, } from \"./render/data-grid-lib.js\";\nimport { GridCellKind, InnerGridCellKind, CompactSelection, isReadWriteCell, isInnerOnlyCell, booleanCellIsEditable, } from \"./data-grid-types.js\";\nimport { CellSet } from \"./cell-set.js\";\nimport { SpriteManager } from \"./data-grid-sprites.js\";\nimport { direction, getScrollBarWidth, useDebouncedMemo, useEventListener } from \"../../common/utils.js\";\nimport clamp from \"lodash/clamp.js\";\nimport makeRange from \"lodash/range.js\";\nimport { drawGrid } from \"./render/data-grid-render.js\";\nimport {} from \"./render/data-grid-render.blit.js\";\nimport { AnimationManager } from \"./animation-manager.js\";\nimport { RenderStateProvider, packColRowToNumber } from \"../../common/render-state-provider.js\";\nimport { browserIsFirefox, browserIsSafari } from \"../../common/browser-detect.js\";\nimport { useAnimationQueue } from \"./use-animation-queue.js\";\nimport { assert } from \"../../common/support.js\";\nimport { OutOfBoundsRegionAxis, outOfBoundsKind, groupHeaderKind, headerKind, mouseEventArgsAreEqual, } from \"./event-args.js\";\nimport { pointInRect } from \"../../common/math.js\";\nimport { drawCell, } from \"./render/data-grid-render.cells.js\";\nimport { getActionBoundsForGroup, drawHeader, computeHeaderLayout } from \"./render/data-grid-render.header.js\";\nconst fillHandleClickSize = 6;\nconst getRowData = (cell, getCellRenderer) => {\n    if (cell.kind === GridCellKind.Custom)\n        return cell.copyData;\n    const r = getCellRenderer?.(cell);\n    return r?.getAccessibilityString(cell) ?? \"\";\n};\nconst DataGrid = (p, forwardedRef) => {\n    const { width, height, accessibilityHeight, columns, cellXOffset: cellXOffsetReal, cellYOffset, headerHeight, fillHandle = false, groupHeaderHeight, rowHeight, rows, getCellContent, getRowThemeOverride, onHeaderMenuClick, onHeaderIndicatorClick, enableGroups, isFilling, onCanvasFocused, onCanvasBlur, isFocused, selection, freezeColumns, onContextMenu, freezeTrailingRows, fixedShadowX = true, fixedShadowY = true, drawFocusRing, onMouseDown, onMouseUp, onMouseMoveRaw, onMouseMove, onItemHovered, dragAndDropState, firstColAccessible, onKeyDown, onKeyUp, highlightRegions, canvasRef, onDragStart, onDragEnd, eventTargetRef, isResizing, resizeColumn: resizeCol, isDragging, isDraggable = false, allowResize, disabledRows, hasAppendRow, getGroupDetails, theme, prelightCells, headerIcons, verticalBorder, drawCell: drawCellCallback, drawHeader: drawHeaderCallback, onCellFocused, onDragOverCell, onDrop, onDragLeave, imageWindowLoader, smoothScrollX = false, smoothScrollY = false, experimental, getCellRenderer, resizeIndicator = \"full\", } = p;\n    const translateX = p.translateX ?? 0;\n    const translateY = p.translateY ?? 0;\n    const cellXOffset = Math.max(freezeColumns, Math.min(columns.length - 1, cellXOffsetReal));\n    const ref = React.useRef(null);\n    const windowEventTargetRef = React.useRef(window);\n    const windowEventTarget = windowEventTargetRef.current;\n    const imageLoader = imageWindowLoader;\n    const damageRegion = React.useRef();\n    const [scrolling, setScrolling] = React.useState(false);\n    const hoverValues = React.useRef([]);\n    const lastBlitData = React.useRef();\n    const [hoveredItemInfo, setHoveredItemInfo] = React.useState();\n    const [hoveredOnEdge, setHoveredOnEdge] = React.useState();\n    const overlayRef = React.useRef(null);\n    const [drawCursorOverride, setDrawCursorOverride] = React.useState();\n    const [lastWasTouch, setLastWasTouch] = React.useState(false);\n    const lastWasTouchRef = React.useRef(lastWasTouch);\n    lastWasTouchRef.current = lastWasTouch;\n    const spriteManager = React.useMemo(() => new SpriteManager(headerIcons, () => {\n        lastArgsRef.current = undefined;\n        lastDrawRef.current();\n    }), [headerIcons]);\n    const totalHeaderHeight = enableGroups ? groupHeaderHeight + headerHeight : headerHeight;\n    const scrollingStopRef = React.useRef(-1);\n    const enableFirefoxRescaling = (experimental?.enableFirefoxRescaling ?? false) && browserIsFirefox.value;\n    const enableSafariRescaling = (experimental?.enableSafariRescaling ?? false) && browserIsSafari.value;\n    React.useLayoutEffect(() => {\n        if (window.devicePixelRatio === 1 || (!enableFirefoxRescaling && !enableSafariRescaling))\n            return;\n        // We don't want to go into scroll mode for a single repaint\n        if (scrollingStopRef.current !== -1) {\n            setScrolling(true);\n        }\n        window.clearTimeout(scrollingStopRef.current);\n        scrollingStopRef.current = window.setTimeout(() => {\n            setScrolling(false);\n            scrollingStopRef.current = -1;\n        }, 200);\n    }, [cellYOffset, cellXOffset, translateX, translateY, enableFirefoxRescaling, enableSafariRescaling]);\n    const mappedColumns = useMappedColumns(columns, freezeColumns);\n    const stickyX = fixedShadowX ? getStickyWidth(mappedColumns, dragAndDropState) : 0;\n    // row: -1 === columnHeader, -2 === groupHeader\n    const getBoundsForItem = React.useCallback((canvas, col, row) => {\n        const rect = canvas.getBoundingClientRect();\n        if (col >= mappedColumns.length || row >= rows) {\n            return undefined;\n        }\n        const scale = rect.width / width;\n        const result = computeBounds(col, row, width, height, groupHeaderHeight, totalHeaderHeight, cellXOffset, cellYOffset, translateX, translateY, rows, freezeColumns, freezeTrailingRows, mappedColumns, rowHeight);\n        if (scale !== 1) {\n            result.x *= scale;\n            result.y *= scale;\n            result.width *= scale;\n            result.height *= scale;\n        }\n        result.x += rect.x;\n        result.y += rect.y;\n        return result;\n    }, [\n        width,\n        height,\n        groupHeaderHeight,\n        totalHeaderHeight,\n        cellXOffset,\n        cellYOffset,\n        translateX,\n        translateY,\n        rows,\n        freezeColumns,\n        freezeTrailingRows,\n        mappedColumns,\n        rowHeight,\n    ]);\n    const getMouseArgsForPosition = React.useCallback((canvas, posX, posY, ev) => {\n        const rect = canvas.getBoundingClientRect();\n        const scale = rect.width / width;\n        const x = (posX - rect.left) / scale;\n        const y = (posY - rect.top) / scale;\n        const edgeDetectionBuffer = 5;\n        const effectiveCols = getEffectiveColumns(mappedColumns, cellXOffset, width, undefined, translateX);\n        let button = 0;\n        let buttons = 0;\n        if (ev instanceof MouseEvent) {\n            button = ev.button;\n            buttons = ev.buttons;\n        }\n        // -1 === off right edge\n        const col = getColumnIndexForX(x, effectiveCols, translateX);\n        // -1: header or above\n        // undefined: offbottom\n        const row = getRowIndexForY(y, height, enableGroups, headerHeight, groupHeaderHeight, rows, rowHeight, cellYOffset, translateY, freezeTrailingRows);\n        const shiftKey = ev?.shiftKey === true;\n        const ctrlKey = ev?.ctrlKey === true;\n        const metaKey = ev?.metaKey === true;\n        const isTouch = (ev !== undefined && !(ev instanceof MouseEvent)) || ev?.pointerType === \"touch\";\n        const scrollEdge = [\n            x < 0 ? -1 : width < x ? 1 : 0,\n            y < totalHeaderHeight ? -1 : height < y ? 1 : 0,\n        ];\n        let result;\n        if (col === -1 || y < 0 || x < 0 || row === undefined || x > width || y > height) {\n            const horizontal = x > width ? 1 : x < 0 ? -1 : 0;\n            const vertical = y > height ? 1 : y < 0 ? -1 : 0;\n            let innerHorizontal = horizontal * 2;\n            let innerVertical = vertical * 2;\n            if (horizontal === 0)\n                innerHorizontal = col === -1 ? OutOfBoundsRegionAxis.EndPadding : OutOfBoundsRegionAxis.Center;\n            if (vertical === 0)\n                innerVertical = row === undefined ? OutOfBoundsRegionAxis.EndPadding : OutOfBoundsRegionAxis.Center;\n            let isEdge = false;\n            if (col === -1 && row === -1) {\n                const b = getBoundsForItem(canvas, mappedColumns.length - 1, -1);\n                assert(b !== undefined);\n                isEdge = posX < b.x + b.width + edgeDetectionBuffer;\n            }\n            // This is used to ensure that clicking on the scrollbar doesn't unset the selection.\n            // Unfortunately this doesn't work for overlay scrollbars because they are just a broken interaction\n            // by design.\n            const isMaybeScrollbar = (x > width && x < width + getScrollBarWidth()) || (y > height && y < height + getScrollBarWidth());\n            result = {\n                kind: outOfBoundsKind,\n                location: [col !== -1 ? col : x < 0 ? 0 : mappedColumns.length - 1, row ?? rows - 1],\n                region: [innerHorizontal, innerVertical],\n                shiftKey,\n                ctrlKey,\n                metaKey,\n                isEdge,\n                isTouch,\n                button,\n                buttons,\n                scrollEdge,\n                isMaybeScrollbar,\n            };\n        }\n        else if (row <= -1) {\n            let bounds = getBoundsForItem(canvas, col, row);\n            assert(bounds !== undefined);\n            let isEdge = bounds !== undefined && bounds.x + bounds.width - posX <= edgeDetectionBuffer;\n            const previousCol = col - 1;\n            if (posX - bounds.x <= edgeDetectionBuffer && previousCol >= 0) {\n                isEdge = true;\n                bounds = getBoundsForItem(canvas, previousCol, row);\n                assert(bounds !== undefined);\n                result = {\n                    kind: enableGroups && row === -2 ? groupHeaderKind : headerKind,\n                    location: [previousCol, row],\n                    bounds: bounds,\n                    group: mappedColumns[previousCol].group ?? \"\",\n                    isEdge,\n                    shiftKey,\n                    ctrlKey,\n                    metaKey,\n                    isTouch,\n                    localEventX: posX - bounds.x,\n                    localEventY: posY - bounds.y,\n                    button,\n                    buttons,\n                    scrollEdge,\n                };\n            }\n            else {\n                result = {\n                    kind: enableGroups && row === -2 ? groupHeaderKind : headerKind,\n                    group: mappedColumns[col].group ?? \"\",\n                    location: [col, row],\n                    bounds: bounds,\n                    isEdge,\n                    shiftKey,\n                    ctrlKey,\n                    metaKey,\n                    isTouch,\n                    localEventX: posX - bounds.x,\n                    localEventY: posY - bounds.y,\n                    button,\n                    buttons,\n                    scrollEdge,\n                };\n            }\n        }\n        else {\n            const bounds = getBoundsForItem(canvas, col, row);\n            assert(bounds !== undefined);\n            const isEdge = bounds !== undefined && bounds.x + bounds.width - posX < edgeDetectionBuffer;\n            let isFillHandle = false;\n            if (fillHandle && selection.current !== undefined) {\n                const fillHandleLocation = rectBottomRight(selection.current.range);\n                const fillHandleCellBounds = getBoundsForItem(canvas, fillHandleLocation[0], fillHandleLocation[1]);\n                if (fillHandleCellBounds !== undefined) {\n                    const handleLogicalCenterX = fillHandleCellBounds.x + fillHandleCellBounds.width - 2;\n                    const handleLogicalCenterY = fillHandleCellBounds.y + fillHandleCellBounds.height - 2;\n                    //check if posX and posY are within fillHandleClickSize from handleLogicalCenter\n                    isFillHandle =\n                        Math.abs(handleLogicalCenterX - posX) < fillHandleClickSize &&\n                            Math.abs(handleLogicalCenterY - posY) < fillHandleClickSize;\n                }\n            }\n            result = {\n                kind: \"cell\",\n                location: [col, row],\n                bounds: bounds,\n                isEdge,\n                shiftKey,\n                ctrlKey,\n                isFillHandle,\n                metaKey,\n                isTouch,\n                localEventX: posX - bounds.x,\n                localEventY: posY - bounds.y,\n                button,\n                buttons,\n                scrollEdge,\n            };\n        }\n        return result;\n    }, [\n        width,\n        mappedColumns,\n        cellXOffset,\n        translateX,\n        height,\n        enableGroups,\n        headerHeight,\n        groupHeaderHeight,\n        rows,\n        rowHeight,\n        cellYOffset,\n        translateY,\n        freezeTrailingRows,\n        getBoundsForItem,\n        fillHandle,\n        selection,\n        totalHeaderHeight,\n    ]);\n    const [hoveredItem] = hoveredItemInfo ?? [];\n    const enqueueRef = React.useRef(() => {\n        // do nothing\n    });\n    const hoverInfoRef = React.useRef(hoveredItemInfo);\n    hoverInfoRef.current = hoveredItemInfo;\n    const [bufferACtx, bufferBCtx] = React.useMemo(() => {\n        const a = document.createElement(\"canvas\");\n        const b = document.createElement(\"canvas\");\n        a.style[\"display\"] = \"none\";\n        a.style[\"opacity\"] = \"0\";\n        a.style[\"position\"] = \"fixed\";\n        b.style[\"display\"] = \"none\";\n        b.style[\"opacity\"] = \"0\";\n        b.style[\"position\"] = \"fixed\";\n        return [a.getContext(\"2d\", { alpha: false }), b.getContext(\"2d\", { alpha: false })];\n    }, []);\n    React.useLayoutEffect(() => {\n        if (bufferACtx === null || bufferBCtx === null)\n            return;\n        document.documentElement.append(bufferACtx.canvas);\n        document.documentElement.append(bufferBCtx.canvas);\n        return () => {\n            bufferACtx.canvas.remove();\n            bufferBCtx.canvas.remove();\n        };\n    }, [bufferACtx, bufferBCtx]);\n    const renderStateProvider = React.useMemo(() => new RenderStateProvider(), []);\n    const maxDPR = enableFirefoxRescaling && scrolling ? 1 : enableSafariRescaling && scrolling ? 2 : 5;\n    const minimumCellWidth = experimental?.disableMinimumCellWidth === true ? 1 : 10;\n    const lastArgsRef = React.useRef();\n    const canvasCtx = React.useRef(null);\n    const overlayCtx = React.useRef(null);\n    const draw = React.useCallback(() => {\n        const canvas = ref.current;\n        const overlay = overlayRef.current;\n        if (canvas === null || overlay === null)\n            return;\n        if (canvasCtx.current === null) {\n            canvasCtx.current = canvas.getContext(\"2d\", { alpha: false });\n            canvas.width = 0;\n            canvas.height = 0;\n        }\n        if (overlayCtx.current === null) {\n            overlayCtx.current = overlay.getContext(\"2d\", { alpha: false });\n            overlay.width = 0;\n            overlay.height = 0;\n        }\n        if (canvasCtx.current === null || overlayCtx.current === null || bufferACtx === null || bufferBCtx === null) {\n            return;\n        }\n        let didOverride = false;\n        const overrideCursor = (cursor) => {\n            didOverride = true;\n            setDrawCursorOverride(cursor);\n        };\n        const last = lastArgsRef.current;\n        const current = {\n            headerCanvasCtx: overlayCtx.current,\n            canvasCtx: canvasCtx.current,\n            bufferACtx,\n            bufferBCtx,\n            width,\n            height,\n            cellXOffset,\n            cellYOffset,\n            translateX: Math.round(translateX),\n            translateY: Math.round(translateY),\n            mappedColumns,\n            enableGroups,\n            freezeColumns,\n            dragAndDropState,\n            theme,\n            headerHeight,\n            groupHeaderHeight,\n            disabledRows: disabledRows ?? CompactSelection.empty(),\n            rowHeight,\n            verticalBorder,\n            isResizing,\n            resizeCol,\n            isFocused,\n            selection,\n            fillHandle,\n            drawCellCallback,\n            hasAppendRow,\n            overrideCursor,\n            maxScaleFactor: maxDPR,\n            freezeTrailingRows,\n            rows,\n            drawFocus: drawFocusRing,\n            getCellContent,\n            getGroupDetails: getGroupDetails ?? (name => ({ name })),\n            getRowThemeOverride,\n            drawHeaderCallback,\n            prelightCells,\n            highlightRegions,\n            imageLoader,\n            lastBlitData,\n            damage: damageRegion.current,\n            hoverValues: hoverValues.current,\n            hoverInfo: hoverInfoRef.current,\n            spriteManager,\n            scrolling,\n            hyperWrapping: experimental?.hyperWrapping ?? false,\n            touchMode: lastWasTouch,\n            enqueue: enqueueRef.current,\n            renderStateProvider,\n            renderStrategy: experimental?.renderStrategy ?? (browserIsSafari.value ? \"double-buffer\" : \"single-buffer\"),\n            getCellRenderer,\n            minimumCellWidth,\n            resizeIndicator,\n        };\n        // This confusing bit of code due to some poor design. Long story short, the damage property is only used\n        // with what is effectively the \"last args\" for the last normal draw anyway. We don't want the drawing code\n        // to look at this and go \"shit dawg, nothing changed\" so we force it to draw frash, but the damage restricts\n        // the draw anyway.\n        //\n        // Dear future Jason, I'm sorry. It was expedient, it worked, and had almost zero perf overhead. THe universe\n        // basically made me do it. What choice did I have?\n        if (current.damage === undefined) {\n            lastArgsRef.current = current;\n            drawGrid(current, last);\n        }\n        else {\n            drawGrid(current, undefined);\n        }\n        // don't reset on damage events\n        if (!didOverride && (current.damage === undefined || current.damage.has(hoverInfoRef?.current?.[0]))) {\n            setDrawCursorOverride(undefined);\n        }\n    }, [\n        bufferACtx,\n        bufferBCtx,\n        width,\n        height,\n        cellXOffset,\n        cellYOffset,\n        translateX,\n        translateY,\n        mappedColumns,\n        enableGroups,\n        freezeColumns,\n        dragAndDropState,\n        theme,\n        headerHeight,\n        groupHeaderHeight,\n        disabledRows,\n        rowHeight,\n        verticalBorder,\n        isResizing,\n        hasAppendRow,\n        resizeCol,\n        isFocused,\n        selection,\n        fillHandle,\n        freezeTrailingRows,\n        rows,\n        drawFocusRing,\n        maxDPR,\n        getCellContent,\n        getGroupDetails,\n        getRowThemeOverride,\n        drawCellCallback,\n        drawHeaderCallback,\n        prelightCells,\n        highlightRegions,\n        imageLoader,\n        spriteManager,\n        scrolling,\n        experimental?.hyperWrapping,\n        experimental?.renderStrategy,\n        lastWasTouch,\n        renderStateProvider,\n        getCellRenderer,\n        minimumCellWidth,\n        resizeIndicator,\n    ]);\n    const lastDrawRef = React.useRef(draw);\n    React.useLayoutEffect(() => {\n        draw();\n        lastDrawRef.current = draw;\n    }, [draw]);\n    React.useLayoutEffect(() => {\n        const fn = async () => {\n            if (document?.fonts?.ready === undefined)\n                return;\n            await document.fonts.ready;\n            lastArgsRef.current = undefined;\n            lastDrawRef.current();\n        };\n        void fn();\n    }, []);\n    const damageInternal = React.useCallback((locations) => {\n        damageRegion.current = locations;\n        lastDrawRef.current();\n        damageRegion.current = undefined;\n    }, []);\n    const enqueue = useAnimationQueue(damageInternal);\n    enqueueRef.current = enqueue;\n    const damage = React.useCallback((cells) => {\n        damageInternal(new CellSet(cells.map(x => x.cell)));\n    }, [damageInternal]);\n    imageLoader.setCallback(damageInternal);\n    const [overFill, setOverFill] = React.useState(false);\n    const [hCol, hRow] = hoveredItem ?? [];\n    const headerHovered = hCol !== undefined && hRow === -1;\n    const groupHeaderHovered = hCol !== undefined && hRow === -2;\n    let clickableInnerCellHovered = false;\n    let editableBoolHovered = false;\n    let cursorOverride = drawCursorOverride;\n    if (cursorOverride === undefined && hCol !== undefined && hRow !== undefined && hRow > -1 && hRow < rows) {\n        const cell = getCellContent([hCol, hRow], true);\n        clickableInnerCellHovered =\n            cell.kind === InnerGridCellKind.NewRow ||\n                (cell.kind === InnerGridCellKind.Marker && cell.markerKind !== \"number\");\n        editableBoolHovered = cell.kind === GridCellKind.Boolean && booleanCellIsEditable(cell);\n        cursorOverride = cell.cursor;\n    }\n    const canDrag = hoveredOnEdge ?? false;\n    const cursor = isDragging\n        ? \"grabbing\"\n        : canDrag || isResizing\n            ? \"col-resize\"\n            : overFill || isFilling\n                ? \"crosshair\"\n                : cursorOverride !== undefined\n                    ? cursorOverride\n                    : headerHovered || clickableInnerCellHovered || editableBoolHovered || groupHeaderHovered\n                        ? \"pointer\"\n                        : \"default\";\n    const style = React.useMemo(() => ({\n        // width,\n        // height,\n        contain: \"strict\",\n        display: \"block\",\n        cursor,\n    }), [cursor]);\n    const lastSetCursor = React.useRef(\"default\");\n    const target = eventTargetRef?.current;\n    if (target !== null && target !== undefined && lastSetCursor.current !== style.cursor) {\n        // because we have an event target we need to set its cursor instead.\n        target.style.cursor = lastSetCursor.current = style.cursor;\n    }\n    const groupHeaderActionForEvent = React.useCallback((group, bounds, localEventX, localEventY) => {\n        if (getGroupDetails === undefined)\n            return undefined;\n        const groupDesc = getGroupDetails(group);\n        if (groupDesc.actions !== undefined) {\n            const boxes = getActionBoundsForGroup(bounds, groupDesc.actions);\n            for (const [i, box] of boxes.entries()) {\n                if (pointInRect(box, localEventX + bounds.x, localEventY + box.y)) {\n                    return groupDesc.actions[i];\n                }\n            }\n        }\n        return undefined;\n    }, [getGroupDetails]);\n    const isOverHeaderElement = React.useCallback((canvas, col, clientX, clientY) => {\n        const header = mappedColumns[col];\n        if (!isDragging && !isResizing && !(hoveredOnEdge ?? false)) {\n            const headerBounds = getBoundsForItem(canvas, col, -1);\n            assert(headerBounds !== undefined);\n            const headerLayout = computeHeaderLayout(undefined, header, headerBounds.x, headerBounds.y, headerBounds.width, headerBounds.height, theme, direction(header.title) === \"rtl\");\n            if (header.hasMenu === true &&\n                headerLayout.menuBounds !== undefined &&\n                pointInRect(headerLayout.menuBounds, clientX, clientY)) {\n                return {\n                    area: \"menu\",\n                    bounds: headerLayout.menuBounds,\n                };\n            }\n            else if (header.indicatorIcon !== undefined &&\n                headerLayout.indicatorIconBounds !== undefined &&\n                pointInRect(headerLayout.indicatorIconBounds, clientX, clientY)) {\n                return {\n                    area: \"indicator\",\n                    bounds: headerLayout.indicatorIconBounds,\n                };\n            }\n        }\n        return undefined;\n    }, [mappedColumns, getBoundsForItem, hoveredOnEdge, isDragging, isResizing, theme]);\n    const downTime = React.useRef(0);\n    const downPosition = React.useRef();\n    const mouseDown = React.useRef(false);\n    const onMouseDownImpl = React.useCallback((ev) => {\n        const canvas = ref.current;\n        const eventTarget = eventTargetRef?.current;\n        if (canvas === null || (ev.target !== canvas && ev.target !== eventTarget))\n            return;\n        mouseDown.current = true;\n        let clientX;\n        let clientY;\n        if (ev instanceof MouseEvent) {\n            clientX = ev.clientX;\n            clientY = ev.clientY;\n        }\n        else {\n            clientX = ev.touches[0].clientX;\n            clientY = ev.touches[0].clientY;\n        }\n        if (ev.target === eventTarget && eventTarget !== null) {\n            const bounds = eventTarget.getBoundingClientRect();\n            if (clientX > bounds.right || clientY > bounds.bottom)\n                return;\n        }\n        const args = getMouseArgsForPosition(canvas, clientX, clientY, ev);\n        downPosition.current = args.location;\n        if (args.isTouch) {\n            downTime.current = Date.now();\n        }\n        if (lastWasTouchRef.current !== args.isTouch) {\n            setLastWasTouch(args.isTouch);\n        }\n        if (args.kind === headerKind &&\n            isOverHeaderElement(canvas, args.location[0], clientX, clientY) !== undefined) {\n            return;\n        }\n        else if (args.kind === groupHeaderKind) {\n            const action = groupHeaderActionForEvent(args.group, args.bounds, args.localEventX, args.localEventY);\n            if (action !== undefined) {\n                return;\n            }\n        }\n        onMouseDown?.(args);\n        if (!args.isTouch &&\n            isDraggable !== true &&\n            isDraggable !== args.kind &&\n            args.button < 3 &&\n            args.button !== 1) {\n            // preventing default in touch events stops scroll\n            ev.preventDefault();\n        }\n    }, [\n        eventTargetRef,\n        isDraggable,\n        getMouseArgsForPosition,\n        groupHeaderActionForEvent,\n        isOverHeaderElement,\n        onMouseDown,\n    ]);\n    useEventListener(\"touchstart\", onMouseDownImpl, windowEventTarget, false);\n    useEventListener(\"mousedown\", onMouseDownImpl, windowEventTarget, false);\n    const lastUpTime = React.useRef(0);\n    const onMouseUpImpl = React.useCallback((ev) => {\n        const lastUpTimeValue = lastUpTime.current;\n        lastUpTime.current = Date.now();\n        const canvas = ref.current;\n        mouseDown.current = false;\n        if (onMouseUp === undefined || canvas === null)\n            return;\n        const eventTarget = eventTargetRef?.current;\n        const isOutside = ev.target !== canvas && ev.target !== eventTarget;\n        let clientX;\n        let clientY;\n        let canCancel = true;\n        if (ev instanceof MouseEvent) {\n            clientX = ev.clientX;\n            clientY = ev.clientY;\n            canCancel = ev.button < 3;\n            if (ev.pointerType === \"touch\") {\n                return;\n            }\n        }\n        else {\n            clientX = ev.changedTouches[0].clientX;\n            clientY = ev.changedTouches[0].clientY;\n        }\n        let args = getMouseArgsForPosition(canvas, clientX, clientY, ev);\n        if (args.isTouch && downTime.current !== 0 && Date.now() - downTime.current > 500) {\n            args = {\n                ...args,\n                isLongTouch: true,\n            };\n        }\n        if (lastUpTimeValue !== 0 && Date.now() - lastUpTimeValue < (args.isTouch ? 1000 : 500)) {\n            args = {\n                ...args,\n                isDoubleClick: true,\n            };\n        }\n        if (lastWasTouchRef.current !== args.isTouch) {\n            setLastWasTouch(args.isTouch);\n        }\n        if (!isOutside && ev.cancelable && canCancel) {\n            ev.preventDefault();\n        }\n        const [col] = args.location;\n        const headerBounds = isOverHeaderElement(canvas, col, clientX, clientY);\n        if (args.kind === headerKind && headerBounds !== undefined) {\n            if (args.button !== 0 || downPosition.current?.[0] !== col || downPosition.current?.[1] !== -1) {\n                // force outside so that click will not process\n                onMouseUp(args, true);\n            }\n            return;\n        }\n        else if (args.kind === groupHeaderKind) {\n            const action = groupHeaderActionForEvent(args.group, args.bounds, args.localEventX, args.localEventY);\n            if (action !== undefined) {\n                if (args.button === 0) {\n                    action.onClick(args);\n                }\n                return;\n            }\n        }\n        onMouseUp(args, isOutside);\n    }, [onMouseUp, eventTargetRef, getMouseArgsForPosition, isOverHeaderElement, groupHeaderActionForEvent]);\n    useEventListener(\"mouseup\", onMouseUpImpl, windowEventTarget, false);\n    useEventListener(\"touchend\", onMouseUpImpl, windowEventTarget, false);\n    const onClickImpl = React.useCallback((ev) => {\n        const canvas = ref.current;\n        if (canvas === null)\n            return;\n        const eventTarget = eventTargetRef?.current;\n        const isOutside = ev.target !== canvas && ev.target !== eventTarget;\n        let clientX;\n        let clientY;\n        let canCancel = true;\n        if (ev instanceof MouseEvent) {\n            clientX = ev.clientX;\n            clientY = ev.clientY;\n            canCancel = ev.button < 3;\n        }\n        else {\n            clientX = ev.changedTouches[0].clientX;\n            clientY = ev.changedTouches[0].clientY;\n        }\n        const args = getMouseArgsForPosition(canvas, clientX, clientY, ev);\n        if (lastWasTouchRef.current !== args.isTouch) {\n            setLastWasTouch(args.isTouch);\n        }\n        if (!isOutside && ev.cancelable && canCancel) {\n            ev.preventDefault();\n        }\n        const [col] = args.location;\n        if (args.kind === headerKind) {\n            const headerBounds = isOverHeaderElement(canvas, col, clientX, clientY);\n            if (headerBounds !== undefined &&\n                args.button === 0 &&\n                downPosition.current?.[0] === col &&\n                downPosition.current?.[1] === -1) {\n                if (headerBounds.area === \"menu\") {\n                    onHeaderMenuClick?.(col, headerBounds.bounds);\n                }\n                else if (headerBounds.area === \"indicator\") {\n                    onHeaderIndicatorClick?.(col, headerBounds.bounds);\n                }\n            }\n        }\n        else if (args.kind === groupHeaderKind) {\n            const action = groupHeaderActionForEvent(args.group, args.bounds, args.localEventX, args.localEventY);\n            if (action !== undefined && args.button === 0) {\n                action.onClick(args);\n            }\n        }\n    }, [\n        eventTargetRef,\n        getMouseArgsForPosition,\n        isOverHeaderElement,\n        onHeaderMenuClick,\n        onHeaderIndicatorClick,\n        groupHeaderActionForEvent,\n    ]);\n    useEventListener(\"click\", onClickImpl, windowEventTarget, false);\n    const onContextMenuImpl = React.useCallback((ev) => {\n        const canvas = ref.current;\n        const eventTarget = eventTargetRef?.current;\n        if (canvas === null || (ev.target !== canvas && ev.target !== eventTarget) || onContextMenu === undefined)\n            return;\n        const args = getMouseArgsForPosition(canvas, ev.clientX, ev.clientY, ev);\n        onContextMenu(args, () => {\n            if (ev.cancelable)\n                ev.preventDefault();\n        });\n    }, [eventTargetRef, getMouseArgsForPosition, onContextMenu]);\n    useEventListener(\"contextmenu\", onContextMenuImpl, eventTargetRef?.current ?? null, false);\n    const onAnimationFrame = React.useCallback(values => {\n        damageRegion.current = new CellSet(values.map(x => x.item));\n        hoverValues.current = values;\n        lastDrawRef.current();\n        damageRegion.current = undefined;\n    }, []);\n    const animManagerValue = React.useMemo(() => new AnimationManager(onAnimationFrame), [onAnimationFrame]);\n    const animationManager = React.useRef(animManagerValue);\n    animationManager.current = animManagerValue;\n    React.useLayoutEffect(() => {\n        const am = animationManager.current;\n        if (hoveredItem === undefined || hoveredItem[1] < 0) {\n            am.setHovered(hoveredItem);\n            return;\n        }\n        const cell = getCellContent(hoveredItem, true);\n        const r = getCellRenderer(cell);\n        const cellNeedsHover = (r === undefined && cell.kind === GridCellKind.Custom) ||\n            (r?.needsHover !== undefined && (typeof r.needsHover === \"boolean\" ? r.needsHover : r.needsHover(cell)));\n        am.setHovered(cellNeedsHover ? hoveredItem : undefined);\n    }, [getCellContent, getCellRenderer, hoveredItem]);\n    const hoveredRef = React.useRef();\n    const onMouseMoveImpl = React.useCallback((ev) => {\n        const canvas = ref.current;\n        if (canvas === null)\n            return;\n        const eventTarget = eventTargetRef?.current;\n        const isIndirect = ev.target !== canvas && ev.target !== eventTarget;\n        const args = getMouseArgsForPosition(canvas, ev.clientX, ev.clientY, ev);\n        if (args.kind !== \"out-of-bounds\" && isIndirect && !mouseDown.current && !args.isTouch) {\n            // we are obscured by something else, so we want to not register events if we are not doing anything\n            // important already\n            return;\n        }\n        // the point here is not to trigger re-renders every time the mouse moves over a cell\n        // that doesn't care about the mouse positon.\n        const maybeSetHoveredInfo = (newVal, needPosition) => {\n            setHoveredItemInfo(cv => {\n                if (cv === newVal)\n                    return cv;\n                if (cv?.[0][0] === newVal?.[0][0] &&\n                    cv?.[0][1] === newVal?.[0][1] &&\n                    ((cv?.[1][0] === newVal?.[1][0] && cv?.[1][1] === newVal?.[1][1]) || !needPosition)) {\n                    return cv;\n                }\n                return newVal;\n            });\n        };\n        if (!mouseEventArgsAreEqual(args, hoveredRef.current)) {\n            setDrawCursorOverride(undefined);\n            onItemHovered?.(args);\n            maybeSetHoveredInfo(args.kind === outOfBoundsKind ? undefined : [args.location, [args.localEventX, args.localEventY]], true);\n            hoveredRef.current = args;\n        }\n        else if (args.kind === \"cell\" || args.kind === headerKind || args.kind === groupHeaderKind) {\n            let needsDamageCell = false;\n            let needsHoverPosition = true;\n            if (args.kind === \"cell\") {\n                const toCheck = getCellContent(args.location);\n                const rendererNeeds = getCellRenderer(toCheck)?.needsHoverPosition;\n                // custom cells we will assume need the position if they don't explicitly say they don't, everything\n                // else we will assume doesn't need it.\n                needsHoverPosition = rendererNeeds ?? toCheck.kind === GridCellKind.Custom;\n                needsDamageCell = needsHoverPosition;\n            }\n            else {\n                needsDamageCell = true;\n            }\n            const newInfo = [args.location, [args.localEventX, args.localEventY]];\n            maybeSetHoveredInfo(newInfo, needsHoverPosition);\n            hoverInfoRef.current = newInfo;\n            if (needsDamageCell) {\n                damageInternal(new CellSet([args.location]));\n            }\n        }\n        const notRowMarkerCol = args.location[0] >= (firstColAccessible ? 0 : 1);\n        setHoveredOnEdge(args.kind === headerKind && args.isEdge && notRowMarkerCol && allowResize === true);\n        setOverFill(args.kind === \"cell\" && args.isFillHandle);\n        onMouseMoveRaw?.(ev);\n        onMouseMove(args);\n    }, [\n        eventTargetRef,\n        getMouseArgsForPosition,\n        firstColAccessible,\n        allowResize,\n        onMouseMoveRaw,\n        onMouseMove,\n        onItemHovered,\n        getCellContent,\n        getCellRenderer,\n        damageInternal,\n    ]);\n    useEventListener(\"mousemove\", onMouseMoveImpl, windowEventTarget, true);\n    const onKeyDownImpl = React.useCallback((event) => {\n        const canvas = ref.current;\n        if (canvas === null)\n            return;\n        let bounds;\n        let location = undefined;\n        if (selection.current !== undefined) {\n            bounds = getBoundsForItem(canvas, selection.current.cell[0], selection.current.cell[1]);\n            location = selection.current.cell;\n        }\n        onKeyDown?.({\n            bounds,\n            stopPropagation: () => event.stopPropagation(),\n            preventDefault: () => event.preventDefault(),\n            cancel: () => undefined,\n            ctrlKey: event.ctrlKey,\n            metaKey: event.metaKey,\n            shiftKey: event.shiftKey,\n            altKey: event.altKey,\n            key: event.key,\n            keyCode: event.keyCode,\n            rawEvent: event,\n            location,\n        });\n    }, [onKeyDown, selection, getBoundsForItem]);\n    const onKeyUpImpl = React.useCallback((event) => {\n        const canvas = ref.current;\n        if (canvas === null)\n            return;\n        let bounds;\n        let location = undefined;\n        if (selection.current !== undefined) {\n            bounds = getBoundsForItem(canvas, selection.current.cell[0], selection.current.cell[1]);\n            location = selection.current.cell;\n        }\n        onKeyUp?.({\n            bounds,\n            stopPropagation: () => event.stopPropagation(),\n            preventDefault: () => event.preventDefault(),\n            cancel: () => undefined,\n            ctrlKey: event.ctrlKey,\n            metaKey: event.metaKey,\n            shiftKey: event.shiftKey,\n            altKey: event.altKey,\n            key: event.key,\n            keyCode: event.keyCode,\n            rawEvent: event,\n            location,\n        });\n    }, [onKeyUp, selection, getBoundsForItem]);\n    const refImpl = React.useCallback((instance) => {\n        ref.current = instance;\n        if (canvasRef !== undefined) {\n            canvasRef.current = instance;\n        }\n        if (instance === null) {\n            windowEventTargetRef.current = window;\n        }\n        else {\n            const docRoot = instance.getRootNode();\n            if (docRoot === document)\n                windowEventTargetRef.current = window;\n            windowEventTargetRef.current = docRoot;\n        }\n    }, [canvasRef]);\n    const onDragStartImpl = React.useCallback((event) => {\n        const canvas = ref.current;\n        if (canvas === null || isDraggable === false || isResizing) {\n            event.preventDefault();\n            return;\n        }\n        let dragMime;\n        let dragData;\n        const args = getMouseArgsForPosition(canvas, event.clientX, event.clientY);\n        if (isDraggable !== true && args.kind !== isDraggable) {\n            event.preventDefault();\n            return;\n        }\n        const setData = (mime, payload) => {\n            dragMime = mime;\n            dragData = payload;\n        };\n        let dragImage;\n        let dragImageX;\n        let dragImageY;\n        const setDragImage = (image, x, y) => {\n            dragImage = image;\n            dragImageX = x;\n            dragImageY = y;\n        };\n        let prevented = false;\n        onDragStart?.({\n            ...args,\n            setData,\n            setDragImage,\n            preventDefault: () => (prevented = true),\n            defaultPrevented: () => prevented,\n        });\n        if (!prevented && dragMime !== undefined && dragData !== undefined && event.dataTransfer !== null) {\n            event.dataTransfer.setData(dragMime, dragData);\n            event.dataTransfer.effectAllowed = \"copyLink\";\n            if (dragImage !== undefined && dragImageX !== undefined && dragImageY !== undefined) {\n                event.dataTransfer.setDragImage(dragImage, dragImageX, dragImageY);\n            }\n            else {\n                const [col, row] = args.location;\n                if (row !== undefined) {\n                    const offscreen = document.createElement(\"canvas\");\n                    const boundsForDragTarget = getBoundsForItem(canvas, col, row);\n                    assert(boundsForDragTarget !== undefined);\n                    const dpr = Math.ceil(window.devicePixelRatio ?? 1);\n                    offscreen.width = boundsForDragTarget.width * dpr;\n                    offscreen.height = boundsForDragTarget.height * dpr;\n                    const ctx = offscreen.getContext(\"2d\");\n                    if (ctx !== null) {\n                        ctx.scale(dpr, dpr);\n                        ctx.textBaseline = \"middle\";\n                        if (row === -1) {\n                            ctx.font = theme.headerFontFull;\n                            ctx.fillStyle = theme.bgHeader;\n                            ctx.fillRect(0, 0, offscreen.width, offscreen.height);\n                            drawHeader(ctx, 0, 0, boundsForDragTarget.width, boundsForDragTarget.height, mappedColumns[col], false, theme, false, undefined, undefined, false, 0, spriteManager, drawHeaderCallback, false);\n                        }\n                        else {\n                            ctx.font = theme.baseFontFull;\n                            ctx.fillStyle = theme.bgCell;\n                            ctx.fillRect(0, 0, offscreen.width, offscreen.height);\n                            drawCell(ctx, getCellContent([col, row]), 0, row, false, false, 0, 0, boundsForDragTarget.width, boundsForDragTarget.height, false, theme, theme.bgCell, imageLoader, spriteManager, 1, undefined, false, 0, undefined, undefined, undefined, renderStateProvider, getCellRenderer, () => undefined);\n                        }\n                    }\n                    offscreen.style.left = \"-100%\";\n                    offscreen.style.position = \"absolute\";\n                    offscreen.style.width = `${boundsForDragTarget.width}px`;\n                    offscreen.style.height = `${boundsForDragTarget.height}px`;\n                    document.body.append(offscreen);\n                    event.dataTransfer.setDragImage(offscreen, boundsForDragTarget.width / 2, boundsForDragTarget.height / 2);\n                    window.setTimeout(() => {\n                        offscreen.remove();\n                    }, 0);\n                }\n            }\n        }\n        else {\n            event.preventDefault();\n        }\n    }, [\n        isDraggable,\n        isResizing,\n        getMouseArgsForPosition,\n        onDragStart,\n        getBoundsForItem,\n        theme,\n        mappedColumns,\n        spriteManager,\n        drawHeaderCallback,\n        getCellContent,\n        imageLoader,\n        renderStateProvider,\n        getCellRenderer,\n    ]);\n    useEventListener(\"dragstart\", onDragStartImpl, eventTargetRef?.current ?? null, false, false);\n    const activeDropTarget = React.useRef();\n    const onDragOverImpl = React.useCallback((event) => {\n        const canvas = ref.current;\n        if (onDrop !== undefined) {\n            // Need to preventDefault to allow drop\n            event.preventDefault();\n        }\n        if (canvas === null || onDragOverCell === undefined) {\n            return;\n        }\n        const args = getMouseArgsForPosition(canvas, event.clientX, event.clientY);\n        const [rawCol, row] = args.location;\n        const col = rawCol - (firstColAccessible ? 0 : 1);\n        const [activeCol, activeRow] = activeDropTarget.current ?? [];\n        if (activeCol !== col || activeRow !== row) {\n            activeDropTarget.current = [col, row];\n            onDragOverCell([col, row], event.dataTransfer);\n        }\n    }, [firstColAccessible, getMouseArgsForPosition, onDragOverCell, onDrop]);\n    useEventListener(\"dragover\", onDragOverImpl, eventTargetRef?.current ?? null, false, false);\n    const onDragEndImpl = React.useCallback(() => {\n        activeDropTarget.current = undefined;\n        onDragEnd?.();\n    }, [onDragEnd]);\n    useEventListener(\"dragend\", onDragEndImpl, eventTargetRef?.current ?? null, false, false);\n    const onDropImpl = React.useCallback((event) => {\n        const canvas = ref.current;\n        if (canvas === null || onDrop === undefined) {\n            return;\n        }\n        // Default can mess up sometimes.\n        event.preventDefault();\n        const args = getMouseArgsForPosition(canvas, event.clientX, event.clientY);\n        const [rawCol, row] = args.location;\n        const col = rawCol - (firstColAccessible ? 0 : 1);\n        onDrop([col, row], event.dataTransfer);\n    }, [firstColAccessible, getMouseArgsForPosition, onDrop]);\n    useEventListener(\"drop\", onDropImpl, eventTargetRef?.current ?? null, false, false);\n    const onDragLeaveImpl = React.useCallback(() => {\n        onDragLeave?.();\n    }, [onDragLeave]);\n    useEventListener(\"dragleave\", onDragLeaveImpl, eventTargetRef?.current ?? null, false, false);\n    const selectionRef = React.useRef(selection);\n    selectionRef.current = selection;\n    const focusRef = React.useRef(null);\n    const focusElement = React.useCallback((el) => {\n        // We don't want to steal the focus if we don't currently own the focus.\n        if (ref.current === null || !ref.current.contains(document.activeElement))\n            return;\n        if (el === null && selectionRef.current.current !== undefined) {\n            canvasRef?.current?.focus({\n                preventScroll: true,\n            });\n        }\n        else if (el !== null) {\n            el.focus({\n                preventScroll: true,\n            });\n        }\n        focusRef.current = el;\n    }, [canvasRef]);\n    React.useImperativeHandle(forwardedRef, () => ({\n        focus: () => {\n            const el = focusRef.current;\n            // The element in the ref may have been removed however our callback method ref\n            // won't see the removal so bad things happen. Checking to see if the element is\n            // no longer attached is enough to resolve the problem. In the future this\n            // should be replaced with something much more robust.\n            if (el === null || !document.contains(el)) {\n                canvasRef?.current?.focus({\n                    preventScroll: true,\n                });\n            }\n            else {\n                el.focus({\n                    preventScroll: true,\n                });\n            }\n        },\n        getBounds: (col, row) => {\n            if (canvasRef === undefined || canvasRef.current === null) {\n                return undefined;\n            }\n            return getBoundsForItem(canvasRef.current, col ?? 0, row ?? -1);\n        },\n        damage,\n    }), [canvasRef, damage, getBoundsForItem]);\n    const lastFocusedSubdomNode = React.useRef();\n    const accessibilityTree = useDebouncedMemo(() => {\n        if (width < 50 || experimental?.disableAccessibilityTree === true)\n            return null;\n        let effectiveCols = getEffectiveColumns(mappedColumns, cellXOffset, width, dragAndDropState, translateX);\n        const colOffset = firstColAccessible ? 0 : -1;\n        if (!firstColAccessible && effectiveCols[0]?.sourceIndex === 0) {\n            effectiveCols = effectiveCols.slice(1);\n        }\n        const [fCol, fRow] = selection.current?.cell ?? [];\n        const range = selection.current?.range;\n        const visibleCols = effectiveCols.map(c => c.sourceIndex);\n        const visibleRows = makeRange(cellYOffset, Math.min(rows, cellYOffset + accessibilityHeight));\n        // Maintain focus within grid if we own it but focused cell is outside visible viewport\n        // and not rendered.\n        if (fCol !== undefined &&\n            fRow !== undefined &&\n            !(visibleCols.includes(fCol) && visibleRows.includes(fRow))) {\n            focusElement(null);\n        }\n        return (React.createElement(\"table\", { key: \"access-tree\", role: \"grid\", \"aria-rowcount\": rows + 1, \"aria-multiselectable\": \"true\", \"aria-colcount\": mappedColumns.length + colOffset },\n            React.createElement(\"thead\", { role: \"rowgroup\" },\n                React.createElement(\"tr\", { role: \"row\", \"aria-rowindex\": 1 }, effectiveCols.map(c => (React.createElement(\"th\", { role: \"columnheader\", \"aria-selected\": selection.columns.hasIndex(c.sourceIndex), \"aria-colindex\": c.sourceIndex + 1 + colOffset, tabIndex: -1, onFocus: e => {\n                        if (e.target === focusRef.current)\n                            return;\n                        return onCellFocused?.([c.sourceIndex, -1]);\n                    }, key: c.sourceIndex }, c.title))))),\n            React.createElement(\"tbody\", { role: \"rowgroup\" }, visibleRows.map(row => (React.createElement(\"tr\", { role: \"row\", \"aria-selected\": selection.rows.hasIndex(row), key: row, \"aria-rowindex\": row + 2 }, effectiveCols.map(c => {\n                const col = c.sourceIndex;\n                const key = packColRowToNumber(col, row);\n                const focused = fCol === col && fRow === row;\n                const selected = range !== undefined &&\n                    col >= range.x &&\n                    col < range.x + range.width &&\n                    row >= range.y &&\n                    row < range.y + range.height;\n                const id = `glide-cell-${col}-${row}`;\n                const location = [col, row];\n                const cellContent = getCellContent(location, true);\n                return (React.createElement(\"td\", { key: key, role: \"gridcell\", \"aria-colindex\": col + 1 + colOffset, \"aria-selected\": selected, \"aria-readonly\": isInnerOnlyCell(cellContent) || !isReadWriteCell(cellContent), id: id, \"data-testid\": id, onClick: () => {\n                        const canvas = canvasRef?.current;\n                        if (canvas === null || canvas === undefined)\n                            return;\n                        return onKeyDown?.({\n                            bounds: getBoundsForItem(canvas, col, row),\n                            cancel: () => undefined,\n                            preventDefault: () => undefined,\n                            stopPropagation: () => undefined,\n                            ctrlKey: false,\n                            key: \"Enter\",\n                            keyCode: 13,\n                            metaKey: false,\n                            shiftKey: false,\n                            altKey: false,\n                            rawEvent: undefined,\n                            location,\n                        });\n                    }, onFocusCapture: e => {\n                        if (e.target === focusRef.current ||\n                            (lastFocusedSubdomNode.current?.[0] === col &&\n                                lastFocusedSubdomNode.current?.[1] === row))\n                            return;\n                        lastFocusedSubdomNode.current = location;\n                        return onCellFocused?.(location);\n                    }, ref: focused ? focusElement : undefined, tabIndex: -1 }, getRowData(cellContent, getCellRenderer)));\n            })))))));\n    }, [\n        width,\n        mappedColumns,\n        cellXOffset,\n        dragAndDropState,\n        translateX,\n        rows,\n        cellYOffset,\n        accessibilityHeight,\n        selection,\n        focusElement,\n        getCellContent,\n        canvasRef,\n        onKeyDown,\n        getBoundsForItem,\n        onCellFocused,\n    ], 200);\n    const opacityX = freezeColumns === 0 || !fixedShadowX ? 0 : cellXOffset > freezeColumns ? 1 : clamp(-translateX / 100, 0, 1);\n    const absoluteOffsetY = -cellYOffset * 32 + translateY;\n    const opacityY = !fixedShadowY ? 0 : clamp(-absoluteOffsetY / 100, 0, 1);\n    const stickyShadow = React.useMemo(() => {\n        if (!opacityX && !opacityY) {\n            return null;\n        }\n        const styleX = {\n            position: \"absolute\",\n            top: 0,\n            left: stickyX,\n            width: width - stickyX,\n            height: height,\n            opacity: opacityX,\n            pointerEvents: \"none\",\n            transition: !smoothScrollX ? \"opacity 0.2s\" : undefined,\n            boxShadow: \"inset 13px 0 10px -13px rgba(0, 0, 0, 0.2)\",\n        };\n        const styleY = {\n            position: \"absolute\",\n            top: totalHeaderHeight,\n            left: 0,\n            width: width,\n            height: height,\n            opacity: opacityY,\n            pointerEvents: \"none\",\n            transition: !smoothScrollY ? \"opacity 0.2s\" : undefined,\n            boxShadow: \"inset 0 13px 10px -13px rgba(0, 0, 0, 0.2)\",\n        };\n        return (React.createElement(React.Fragment, null,\n            opacityX > 0 && React.createElement(\"div\", { id: \"shadow-x\", style: styleX }),\n            opacityY > 0 && React.createElement(\"div\", { id: \"shadow-y\", style: styleY })));\n    }, [opacityX, opacityY, stickyX, width, smoothScrollX, totalHeaderHeight, height, smoothScrollY]);\n    const overlayStyle = React.useMemo(() => ({\n        position: \"absolute\",\n        top: 0,\n        left: 0,\n    }), []);\n    return (React.createElement(React.Fragment, null,\n        React.createElement(\"canvas\", { \"data-testid\": \"data-grid-canvas\", tabIndex: 0, onKeyDown: onKeyDownImpl, onKeyUp: onKeyUpImpl, onFocus: onCanvasFocused, onBlur: onCanvasBlur, ref: refImpl, style: style }, accessibilityTree),\n        React.createElement(\"canvas\", { ref: overlayRef, style: overlayStyle }),\n        stickyShadow));\n};\nexport default React.memo(React.forwardRef(DataGrid));\n//# sourceMappingURL=data-grid.js.map","/* eslint-disable unicorn/consistent-destructuring */\nimport clamp from \"lodash/clamp.js\";\nimport * as React from \"react\";\nimport DataGrid, {} from \"../data-grid/data-grid.js\";\n// Dear Past Jason,\n// Wtf does this function do? If you remember in the future come back and add a comment\n// -- Future-Past Jason\nfunction offsetColumnSize(column, width, min, max) {\n    return clamp(Math.round(width - (column.growOffset ?? 0)), Math.ceil(min), Math.floor(max));\n}\nconst DataGridDnd = p => {\n    const [resizeColStartX, setResizeColStartX] = React.useState();\n    const [resizeCol, setResizeCol] = React.useState();\n    const [dragCol, setDragCol] = React.useState();\n    const [dropCol, setDropCol] = React.useState();\n    const [dragColActive, setDragColActive] = React.useState(false);\n    const [dragStartX, setDragStartX] = React.useState();\n    const [dragRow, setDragRow] = React.useState();\n    const [dropRow, setDropRow] = React.useState();\n    const [dragRowActive, setDragRowActive] = React.useState(false);\n    const [dragStartY, setDragStartY] = React.useState();\n    const { onHeaderMenuClick, onHeaderIndicatorClick, getCellContent, onColumnMoved, onColumnResize, onColumnResizeStart, onColumnResizeEnd, gridRef, maxColumnWidth, minColumnWidth, onRowMoved, lockColumns, onColumnProposeMove, onMouseDown, onMouseUp, onItemHovered, onDragStart, canvasRef, } = p;\n    const canResize = (onColumnResize ?? onColumnResizeEnd ?? onColumnResizeStart) !== undefined;\n    const { columns, selection } = p;\n    const selectedColumns = selection.columns;\n    const onItemHoveredImpl = React.useCallback((args) => {\n        const [col, row] = args.location;\n        if (dragCol !== undefined && dropCol !== col && col >= lockColumns) {\n            setDragColActive(true);\n            setDropCol(col);\n        }\n        else if (dragRow !== undefined && row !== undefined) {\n            setDragRowActive(true);\n            setDropRow(Math.max(0, row));\n            // Don't emit onItemHovered if resizing or reordering a column or row.\n        }\n        else if (resizeCol === undefined && !dragColActive && !dragRowActive) {\n            onItemHovered?.(args);\n        }\n    }, [dragCol, dragRow, dropCol, onItemHovered, lockColumns, resizeCol, dragColActive, dragRowActive]);\n    const canDragCol = onColumnMoved !== undefined;\n    const onMouseDownImpl = React.useCallback((args) => {\n        if (args.button === 0) {\n            const [col, row] = args.location;\n            if (args.kind === \"out-of-bounds\" && args.isEdge && canResize) {\n                const bounds = gridRef?.current?.getBounds(columns.length - 1, -1);\n                if (bounds !== undefined) {\n                    setResizeColStartX(bounds.x);\n                    setResizeCol(columns.length - 1);\n                }\n            }\n            else if (args.kind === \"header\" && col >= lockColumns) {\n                const canvas = canvasRef?.current;\n                if (args.isEdge && canResize && canvas) {\n                    setResizeColStartX(args.bounds.x);\n                    setResizeCol(col);\n                    const rect = canvas.getBoundingClientRect();\n                    const scale = rect.width / canvas.offsetWidth;\n                    const width = args.bounds.width / scale;\n                    onColumnResizeStart?.(columns[col], width, col, width + (columns[col].growOffset ?? 0));\n                }\n                else if (args.kind === \"header\" && canDragCol) {\n                    setDragStartX(args.bounds.x);\n                    setDragCol(col);\n                }\n            }\n            else if (args.kind === \"cell\" &&\n                lockColumns > 0 &&\n                col === 0 &&\n                row !== undefined &&\n                onRowMoved !== undefined) {\n                setDragStartY(args.bounds.y);\n                setDragRow(row);\n            }\n        }\n        onMouseDown?.(args);\n    }, [onMouseDown, canResize, lockColumns, onRowMoved, gridRef, columns, canDragCol, onColumnResizeStart, canvasRef]);\n    const onHeaderMenuClickMangled = React.useCallback((col, screenPosition) => {\n        if (dragColActive || dragRowActive)\n            return;\n        onHeaderMenuClick?.(col, screenPosition);\n    }, [dragColActive, dragRowActive, onHeaderMenuClick]);\n    const onHeaderIndicatorClickMangled = React.useCallback((col, screenPosition) => {\n        if (dragColActive || dragRowActive)\n            return;\n        onHeaderIndicatorClick?.(col, screenPosition);\n    }, [dragColActive, dragRowActive, onHeaderIndicatorClick]);\n    const lastResizeWidthRef = React.useRef(-1);\n    const clearAll = React.useCallback(() => {\n        lastResizeWidthRef.current = -1;\n        setDragRow(undefined);\n        setDropRow(undefined);\n        setDragStartY(undefined);\n        setDragRowActive(false);\n        setDragCol(undefined);\n        setDropCol(undefined);\n        setDragStartX(undefined);\n        setDragColActive(false);\n        setResizeCol(undefined);\n        setResizeColStartX(undefined);\n    }, []);\n    const onMouseUpImpl = React.useCallback((args, isOutside) => {\n        if (args.button === 0) {\n            if (resizeCol !== undefined) {\n                // if the column is in selection, the selection may contain extra cols, so lets just re-send the last\n                // resize event to all those columns.\n                if (selectedColumns?.hasIndex(resizeCol) === true) {\n                    for (const c of selectedColumns) {\n                        if (c === resizeCol)\n                            continue;\n                        const col = columns[c];\n                        const newSize = offsetColumnSize(col, lastResizeWidthRef.current, minColumnWidth, maxColumnWidth);\n                        onColumnResize?.(col, newSize, c, newSize + (col.growOffset ?? 0));\n                    }\n                }\n                const ns = offsetColumnSize(columns[resizeCol], lastResizeWidthRef.current, minColumnWidth, maxColumnWidth);\n                onColumnResizeEnd?.(columns[resizeCol], ns, resizeCol, ns + (columns[resizeCol].growOffset ?? 0));\n                if (selectedColumns.hasIndex(resizeCol)) {\n                    for (const c of selectedColumns) {\n                        if (c === resizeCol)\n                            continue;\n                        const col = columns[c];\n                        const s = offsetColumnSize(col, lastResizeWidthRef.current, minColumnWidth, maxColumnWidth);\n                        onColumnResizeEnd?.(col, s, c, s + (col.growOffset ?? 0));\n                    }\n                }\n            }\n            clearAll();\n            if (dragCol !== undefined && dropCol !== undefined) {\n                onColumnMoved?.(dragCol, dropCol);\n            }\n            if (dragRow !== undefined && dropRow !== undefined) {\n                onRowMoved?.(dragRow, dropRow);\n            }\n        }\n        onMouseUp?.(args, isOutside);\n    }, [\n        onMouseUp,\n        resizeCol,\n        dragCol,\n        dropCol,\n        dragRow,\n        dropRow,\n        selectedColumns,\n        onColumnResizeEnd,\n        columns,\n        minColumnWidth,\n        maxColumnWidth,\n        onColumnResize,\n        onColumnMoved,\n        onRowMoved,\n        clearAll,\n    ]);\n    const dragOffset = React.useMemo(() => {\n        if (dragCol === undefined || dropCol === undefined)\n            return undefined;\n        if (dragCol === dropCol)\n            return undefined;\n        if (onColumnProposeMove?.(dragCol, dropCol) === false)\n            return undefined;\n        return {\n            src: dragCol,\n            dest: dropCol,\n        };\n    }, [dragCol, dropCol, onColumnProposeMove]);\n    const onMouseMove = React.useCallback((event) => {\n        const canvas = canvasRef?.current;\n        if (dragCol !== undefined && dragStartX !== undefined) {\n            const diff = Math.abs(event.clientX - dragStartX);\n            if (diff > 20) {\n                setDragColActive(true);\n            }\n        }\n        else if (dragRow !== undefined && dragStartY !== undefined) {\n            const diff = Math.abs(event.clientY - dragStartY);\n            if (diff > 20) {\n                setDragRowActive(true);\n            }\n        }\n        else if (resizeCol !== undefined && resizeColStartX !== undefined && canvas) {\n            const rect = canvas.getBoundingClientRect();\n            const scale = rect.width / canvas.offsetWidth;\n            const newWidth = (event.clientX - resizeColStartX) / scale;\n            const column = columns[resizeCol];\n            const ns = offsetColumnSize(column, newWidth, minColumnWidth, maxColumnWidth);\n            onColumnResize?.(column, ns, resizeCol, ns + (column.growOffset ?? 0));\n            lastResizeWidthRef.current = newWidth;\n            if (selectedColumns?.first() === resizeCol) {\n                for (const c of selectedColumns) {\n                    if (c === resizeCol)\n                        continue;\n                    const col = columns[c];\n                    const s = offsetColumnSize(col, lastResizeWidthRef.current, minColumnWidth, maxColumnWidth);\n                    onColumnResize?.(col, s, c, s + (col.growOffset ?? 0));\n                }\n            }\n        }\n    }, [\n        dragCol,\n        dragStartX,\n        dragRow,\n        dragStartY,\n        resizeCol,\n        resizeColStartX,\n        columns,\n        minColumnWidth,\n        maxColumnWidth,\n        onColumnResize,\n        selectedColumns,\n        canvasRef,\n    ]);\n    const getMangledCellContent = React.useCallback((cell, forceStrict) => {\n        if (dragRow === undefined || dropRow === undefined)\n            return getCellContent(cell, forceStrict);\n        // eslint-disable-next-line prefer-const\n        let [col, row] = cell;\n        if (row === dropRow) {\n            row = dragRow;\n        }\n        else {\n            if (row > dropRow)\n                row -= 1;\n            if (row >= dragRow)\n                row += 1;\n        }\n        return getCellContent([col, row], forceStrict);\n    }, [dragRow, dropRow, getCellContent]);\n    const onDragStartImpl = React.useCallback(args => {\n        onDragStart?.(args);\n        if (!args.defaultPrevented()) {\n            clearAll();\n        }\n    }, [clearAll, onDragStart]);\n    return (React.createElement(DataGrid, { accessibilityHeight: p.accessibilityHeight, canvasRef: p.canvasRef, cellXOffset: p.cellXOffset, cellYOffset: p.cellYOffset, columns: p.columns, disabledRows: p.disabledRows, drawFocusRing: p.drawFocusRing, drawHeader: p.drawHeader, drawCell: p.drawCell, enableGroups: p.enableGroups, eventTargetRef: p.eventTargetRef, experimental: p.experimental, fillHandle: p.fillHandle, firstColAccessible: p.firstColAccessible, fixedShadowX: p.fixedShadowX, fixedShadowY: p.fixedShadowY, freezeColumns: p.freezeColumns, getCellRenderer: p.getCellRenderer, getGroupDetails: p.getGroupDetails, getRowThemeOverride: p.getRowThemeOverride, groupHeaderHeight: p.groupHeaderHeight, headerHeight: p.headerHeight, headerIcons: p.headerIcons, height: p.height, highlightRegions: p.highlightRegions, imageWindowLoader: p.imageWindowLoader, resizeColumn: resizeCol, isDraggable: p.isDraggable, isFilling: p.isFilling, isFocused: p.isFocused, onCanvasBlur: p.onCanvasBlur, onCanvasFocused: p.onCanvasFocused, onCellFocused: p.onCellFocused, onContextMenu: p.onContextMenu, onDragEnd: p.onDragEnd, onDragLeave: p.onDragLeave, onDragOverCell: p.onDragOverCell, onDrop: p.onDrop, onKeyDown: p.onKeyDown, onKeyUp: p.onKeyUp, onMouseMove: p.onMouseMove, prelightCells: p.prelightCells, rowHeight: p.rowHeight, rows: p.rows, selection: p.selection, smoothScrollX: p.smoothScrollX, smoothScrollY: p.smoothScrollY, theme: p.theme, freezeTrailingRows: p.freezeTrailingRows, hasAppendRow: p.hasAppendRow, translateX: p.translateX, translateY: p.translateY, resizeIndicator: p.resizeIndicator, verticalBorder: p.verticalBorder, width: p.width, getCellContent: getMangledCellContent, isResizing: resizeCol !== undefined, onHeaderMenuClick: onHeaderMenuClickMangled, onHeaderIndicatorClick: onHeaderIndicatorClickMangled, isDragging: dragColActive, onItemHovered: onItemHoveredImpl, onDragStart: onDragStartImpl, onMouseDown: onMouseDownImpl, allowResize: canResize, onMouseUp: onMouseUpImpl, dragAndDropState: dragOffset, onMouseMoveRaw: onMouseMove, ref: gridRef }));\n};\nexport default DataGridDnd;\n//# sourceMappingURL=data-grid-dnd.js.map","/* eslint-disable @typescript-eslint/strict-boolean-expressions */\nimport { useLayoutEffect, useState, useRef } from \"react\";\nexport function useResizeDetector(initialSize) {\n    const ref = useRef(null);\n    const [size, setSize] = useState({\n        width: initialSize?.[0],\n        height: initialSize?.[1],\n    });\n    useLayoutEffect(() => {\n        const resizeCallback = entries => {\n            for (const entry of entries) {\n                const { width, height } = (entry && entry.contentRect) || {};\n                setSize(cv => (cv.width === width && cv.height === height ? cv : { width, height }));\n            }\n        };\n        const resizeObserver = new window.ResizeObserver(resizeCallback);\n        if (ref.current) {\n            resizeObserver.observe(ref.current, undefined);\n        }\n        return () => {\n            resizeObserver.disconnect();\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [ref.current]);\n    return { ref, ...size };\n}\n//# sourceMappingURL=resize-detector.js.map","import { useEffect, useRef } from \"react\";\nconst useKineticScroll = (isEnabled, callback, targetScroller) => {\n    const rafId = useRef(null);\n    const isTouching = useRef(null);\n    const lastScrollPosition = useRef(null);\n    const sameCount = useRef(0);\n    const callbackRef = useRef(callback);\n    callbackRef.current = callback;\n    const scrollEl = targetScroller.current;\n    useEffect(() => {\n        const handleScroll = () => {\n            if (isTouching.current === false && scrollEl !== null) {\n                const currentScrollPosition = [scrollEl.scrollLeft, scrollEl.scrollTop];\n                if (lastScrollPosition.current?.[0] === currentScrollPosition[0] &&\n                    lastScrollPosition.current?.[1] === currentScrollPosition[1]) {\n                    if (sameCount.current > 10) {\n                        // Scroll position hasn't changed, stop the animation frame\n                        lastScrollPosition.current = null;\n                        isTouching.current = null;\n                        return;\n                    }\n                    else {\n                        sameCount.current++;\n                    }\n                }\n                else {\n                    sameCount.current = 0;\n                    callbackRef.current(currentScrollPosition[0], currentScrollPosition[1]);\n                    lastScrollPosition.current = currentScrollPosition;\n                }\n                rafId.current = window.setTimeout(handleScroll, 1000 / 120);\n            }\n        };\n        const startTouch = () => {\n            isTouching.current = true;\n            lastScrollPosition.current = null; // Reset last scroll position on touch start\n            if (rafId.current !== null) {\n                window.clearTimeout(rafId.current);\n                rafId.current = null;\n            }\n        };\n        const endTouch = (event) => {\n            if (event.touches.length === 0) {\n                // All touches have ended\n                isTouching.current = false;\n                sameCount.current = 0;\n                rafId.current = window.setTimeout(handleScroll, 1000 / 120);\n            }\n        };\n        if (isEnabled && scrollEl !== null) {\n            const element = scrollEl;\n            element.addEventListener(\"touchstart\", startTouch);\n            element.addEventListener(\"touchend\", endTouch);\n            return () => {\n                element.removeEventListener(\"touchstart\", startTouch);\n                element.removeEventListener(\"touchend\", endTouch);\n                if (rafId.current !== null) {\n                    window.clearTimeout(rafId.current);\n                }\n            };\n        }\n    }, [isEnabled, scrollEl]);\n};\nexport default useKineticScroll;\n//# sourceMappingURL=use-kinetic-scroll.js.map","import { styled } from \"@linaria/react\";\nimport * as React from \"react\";\nimport { useResizeDetector } from \"../../common/resize-detector.js\";\nimport { browserIsSafari } from \"../../common/browser-detect.js\";\nimport { useEventListener } from \"../../common/utils.js\";\nimport useKineticScroll from \"./use-kinetic-scroll.js\";\nconst _exp = /*#__PURE__*/() => p => p.isSafari ? \"scroll\" : \"auto\";\nconst ScrollRegionStyle = /*#__PURE__*/styled('div')({\n  name: \"ScrollRegionStyle\",\n  class: \"gdg-s1dgczr6\",\n  propsAsIs: false,\n  vars: {\n    \"s1dgczr6-0\": [_exp()]\n  }\n});\nfunction useTouchUpDelayed(delay) {\n  const [hasTouches, setHasTouches] = React.useState(false);\n  const safeWindow = typeof window === \"undefined\" ? null : window;\n  const cbTimer = React.useRef(0);\n  useEventListener(\"touchstart\", React.useCallback(() => {\n    window.clearTimeout(cbTimer.current);\n    setHasTouches(true);\n  }, []), safeWindow, true, false);\n  useEventListener(\"touchend\", React.useCallback(e => {\n    if (e.touches.length === 0) {\n      cbTimer.current = window.setTimeout(() => setHasTouches(false), delay);\n    }\n  }, [delay]), safeWindow, true, false);\n  return hasTouches;\n}\nexport const InfiniteScroller = p => {\n  const {\n    children,\n    clientHeight,\n    scrollHeight,\n    scrollWidth,\n    update,\n    draggable,\n    className,\n    preventDiagonalScrolling = false,\n    paddingBottom = 0,\n    paddingRight = 0,\n    rightElement,\n    rightElementProps,\n    kineticScrollPerfHack = false,\n    scrollRef,\n    initialSize\n  } = p;\n  const padders = [];\n  const rightElementSticky = rightElementProps?.sticky ?? false;\n  const rightElementFill = rightElementProps?.fill ?? false;\n  const offsetY = React.useRef(0);\n  const lastScrollY = React.useRef(0);\n  const scroller = React.useRef(null);\n  const dpr = typeof window === \"undefined\" ? 1 : window.devicePixelRatio;\n  const lastScrollPosition = React.useRef({\n    scrollLeft: 0,\n    scrollTop: 0,\n    lockDirection: undefined\n  });\n  const rightWrapRef = React.useRef(null);\n  const hasTouches = useTouchUpDelayed(200);\n  const [isIdle, setIsIdle] = React.useState(true);\n  const idleTimer = React.useRef(0);\n  React.useLayoutEffect(() => {\n    if (!isIdle || hasTouches || lastScrollPosition.current.lockDirection === undefined) return;\n    const el = scroller.current;\n    if (el === null) return;\n    const [lx, ly] = lastScrollPosition.current.lockDirection;\n    if (lx !== undefined) {\n      el.scrollLeft = lx;\n    } else if (ly !== undefined) {\n      el.scrollTop = ly;\n    }\n    lastScrollPosition.current.lockDirection = undefined;\n  }, [hasTouches, isIdle]);\n  const onScroll = React.useCallback((scrollLeft, scrollTop) => {\n    const el = scroller.current;\n    if (el === null) return;\n    scrollTop = scrollTop ?? el.scrollTop;\n    scrollLeft = scrollLeft ?? el.scrollLeft;\n    const lastScrollTop = lastScrollPosition.current.scrollTop;\n    const lastScrollLeft = lastScrollPosition.current.scrollLeft;\n    const dx = scrollLeft - lastScrollLeft;\n    const dy = scrollTop - lastScrollTop;\n    if (hasTouches && dx !== 0 && dy !== 0 && (Math.abs(dx) > 3 || Math.abs(dy) > 3) && preventDiagonalScrolling && lastScrollPosition.current.lockDirection === undefined) {\n      lastScrollPosition.current.lockDirection = Math.abs(dx) < Math.abs(dy) ? [lastScrollLeft, undefined] : [undefined, lastScrollTop];\n    }\n    const lock = lastScrollPosition.current.lockDirection;\n    scrollLeft = lock?.[0] ?? scrollLeft;\n    scrollTop = lock?.[1] ?? scrollTop;\n    lastScrollPosition.current.scrollLeft = scrollLeft;\n    lastScrollPosition.current.scrollTop = scrollTop;\n    const cWidth = el.clientWidth;\n    const cHeight = el.clientHeight;\n    const newY = scrollTop;\n    const delta = lastScrollY.current - newY;\n    const scrollableHeight = el.scrollHeight - cHeight;\n    lastScrollY.current = newY;\n    if (scrollableHeight > 0 && (Math.abs(delta) > 2000 || newY === 0 || newY === scrollableHeight) && scrollHeight > el.scrollHeight + 5) {\n      const prog = newY / scrollableHeight;\n      const recomputed = (scrollHeight - cHeight) * prog;\n      offsetY.current = recomputed - newY;\n    }\n    if (lock !== undefined) {\n      window.clearTimeout(idleTimer.current);\n      setIsIdle(false);\n      idleTimer.current = window.setTimeout(() => setIsIdle(true), 200);\n    }\n    update({\n      x: scrollLeft,\n      y: newY + offsetY.current,\n      width: cWidth - paddingRight,\n      height: cHeight - paddingBottom,\n      paddingRight: rightWrapRef.current?.clientWidth ?? 0\n    });\n  }, [paddingBottom, paddingRight, scrollHeight, update, preventDiagonalScrolling, hasTouches]);\n  useKineticScroll(kineticScrollPerfHack && browserIsSafari.value, onScroll, scroller);\n  const onScrollRef = React.useRef(onScroll);\n  onScrollRef.current = onScroll;\n  const lastProps = React.useRef();\n  const didFirstScroll = React.useRef(false);\n  // if this is not a layout effect there will be a flicker when changing the number of freezeColumns\n  // we need to document what this is needed at all.\n  React.useLayoutEffect(() => {\n    if (didFirstScroll.current) onScroll();else didFirstScroll.current = true;\n  }, [onScroll, paddingBottom, paddingRight]);\n  const setRefs = React.useCallback(instance => {\n    scroller.current = instance;\n    if (scrollRef !== undefined) {\n      scrollRef.current = instance;\n    }\n  }, [scrollRef]);\n  let key = 0;\n  let h = 0;\n  padders.push(React.createElement(\"div\", {\n    key: key++,\n    style: {\n      width: scrollWidth,\n      height: 0\n    }\n  }));\n  while (h < scrollHeight) {\n    const toAdd = Math.min(5000000, scrollHeight - h);\n    padders.push(React.createElement(\"div\", {\n      key: key++,\n      style: {\n        width: 0,\n        height: toAdd\n      }\n    }));\n    h += toAdd;\n  }\n  const {\n    ref,\n    width,\n    height\n  } = useResizeDetector(initialSize);\n  if (typeof window !== \"undefined\" && (lastProps.current?.height !== height || lastProps.current?.width !== width)) {\n    window.setTimeout(() => onScrollRef.current(), 0);\n    lastProps.current = {\n      width,\n      height\n    };\n  }\n  if ((width ?? 0) === 0 || (height ?? 0) === 0) return React.createElement(\"div\", {\n    ref: ref\n  });\n  return React.createElement(\"div\", {\n    ref: ref\n  }, React.createElement(ScrollRegionStyle, {\n    isSafari: browserIsSafari.value\n  }, React.createElement(\"div\", {\n    className: \"dvn-underlay\"\n  }, children), React.createElement(\"div\", {\n    ref: setRefs,\n    style: lastProps.current,\n    draggable: draggable,\n    onDragStart: e => {\n      if (!draggable) {\n        e.stopPropagation();\n        e.preventDefault();\n      }\n    },\n    className: \"dvn-scroller \" + (className ?? \"\"),\n    onScroll: () => onScroll()\n  }, React.createElement(\"div\", {\n    className: \"dvn-scroll-inner\" + (rightElement === undefined ? \" dvn-hidden\" : \"\")\n  }, React.createElement(\"div\", {\n    className: \"dvn-stack\"\n  }, padders), rightElement !== undefined && React.createElement(React.Fragment, null, !rightElementFill && React.createElement(\"div\", {\n    className: \"dvn-spacer\"\n  }), React.createElement(\"div\", {\n    ref: rightWrapRef,\n    style: {\n      height,\n      maxHeight: clientHeight - Math.ceil(dpr % 1),\n      position: \"sticky\",\n      top: 0,\n      paddingLeft: 1,\n      marginBottom: -40,\n      marginRight: paddingRight,\n      flexGrow: rightElementFill ? 1 : undefined,\n      right: rightElementSticky ? paddingRight ?? 0 : undefined,\n      pointerEvents: \"auto\"\n    }\n  }, rightElement))))));\n};\n\n","import * as React from \"react\";\nimport DataGridDnd, {} from \"../data-grid-dnd/data-grid-dnd.js\";\nimport { InfiniteScroller } from \"./infinite-scroller.js\";\nconst GridScroller = p => {\n    const { columns, rows, rowHeight, headerHeight, groupHeaderHeight, enableGroups, freezeColumns, experimental, nonGrowWidth, clientSize, className, onVisibleRegionChanged, scrollRef, preventDiagonalScrolling, rightElement, rightElementProps, overscrollX, overscrollY, initialSize, smoothScrollX = false, smoothScrollY = false, isDraggable, } = p;\n    const { paddingRight, paddingBottom } = experimental ?? {};\n    const [clientWidth, clientHeight] = clientSize;\n    const last = React.useRef();\n    const lastX = React.useRef();\n    const lastY = React.useRef();\n    const lastSize = React.useRef();\n    const width = nonGrowWidth + Math.max(0, overscrollX ?? 0);\n    let height = enableGroups ? headerHeight + groupHeaderHeight : headerHeight;\n    if (typeof rowHeight === \"number\") {\n        height += rows * rowHeight;\n    }\n    else {\n        for (let r = 0; r < rows; r++) {\n            height += rowHeight(r);\n        }\n    }\n    if (overscrollY !== undefined) {\n        height += overscrollY;\n    }\n    const lastArgs = React.useRef();\n    const processArgs = React.useCallback(() => {\n        if (lastArgs.current === undefined)\n            return;\n        const args = { ...lastArgs.current };\n        let x = 0;\n        let tx = args.x < 0 ? -args.x : 0;\n        let cellRight = 0;\n        let cellX = 0;\n        args.x = args.x < 0 ? 0 : args.x;\n        let stickyColWidth = 0;\n        for (let i = 0; i < freezeColumns; i++) {\n            stickyColWidth += columns[i].width;\n        }\n        for (const c of columns) {\n            const cx = x - stickyColWidth;\n            if (args.x >= cx + c.width) {\n                x += c.width;\n                cellX++;\n                cellRight++;\n            }\n            else if (args.x > cx) {\n                x += c.width;\n                if (smoothScrollX) {\n                    tx += cx - args.x;\n                }\n                else {\n                    cellX++;\n                }\n                cellRight++;\n            }\n            else if (args.x + args.width > cx) {\n                x += c.width;\n                cellRight++;\n            }\n            else {\n                break;\n            }\n        }\n        let ty = 0;\n        let cellY = 0;\n        let cellBottom = 0;\n        if (typeof rowHeight === \"number\") {\n            if (smoothScrollY) {\n                cellY = Math.floor(args.y / rowHeight);\n                ty = cellY * rowHeight - args.y;\n            }\n            else {\n                cellY = Math.ceil(args.y / rowHeight);\n            }\n            cellBottom = Math.ceil(args.height / rowHeight) + cellY;\n            if (ty < 0)\n                cellBottom++;\n        }\n        else {\n            let y = 0;\n            for (let row = 0; row < rows; row++) {\n                const rh = rowHeight(row);\n                const cy = y + (smoothScrollY ? 0 : rh / 2);\n                if (args.y >= y + rh) {\n                    y += rh;\n                    cellY++;\n                    cellBottom++;\n                }\n                else if (args.y > cy) {\n                    y += rh;\n                    if (smoothScrollY) {\n                        ty += cy - args.y;\n                    }\n                    else {\n                        cellY++;\n                    }\n                    cellBottom++;\n                }\n                else if (args.y + args.height > rh / 2 + y) {\n                    y += rh;\n                    cellBottom++;\n                }\n                else {\n                    break;\n                }\n            }\n        }\n        const rect = {\n            x: cellX,\n            y: cellY,\n            width: cellRight - cellX,\n            height: cellBottom - cellY,\n        };\n        const oldRect = last.current;\n        if (oldRect === undefined ||\n            oldRect.y !== rect.y ||\n            oldRect.x !== rect.x ||\n            oldRect.height !== rect.height ||\n            oldRect.width !== rect.width ||\n            lastX.current !== tx ||\n            lastY.current !== ty ||\n            args.width !== lastSize.current?.[0] ||\n            args.height !== lastSize.current?.[1]) {\n            onVisibleRegionChanged?.({\n                x: cellX,\n                y: cellY,\n                width: cellRight - cellX,\n                height: cellBottom - cellY,\n            }, args.width, args.height, args.paddingRight ?? 0, tx, ty);\n            last.current = rect;\n            lastX.current = tx;\n            lastY.current = ty;\n            lastSize.current = [args.width, args.height];\n        }\n    }, [columns, rowHeight, rows, onVisibleRegionChanged, freezeColumns, smoothScrollX, smoothScrollY]);\n    const onScrollUpdate = React.useCallback((args) => {\n        lastArgs.current = args;\n        processArgs();\n    }, [processArgs]);\n    React.useEffect(() => {\n        processArgs();\n    }, [processArgs]);\n    return (React.createElement(InfiniteScroller, { scrollRef: scrollRef, className: className, kineticScrollPerfHack: experimental?.kineticScrollPerfHack, preventDiagonalScrolling: preventDiagonalScrolling, draggable: isDraggable === true || typeof isDraggable === \"string\", scrollWidth: width + (paddingRight ?? 0), scrollHeight: height + (paddingBottom ?? 0), clientHeight: clientHeight, rightElement: rightElement, paddingBottom: paddingBottom, paddingRight: paddingRight, rightElementProps: rightElementProps, update: onScrollUpdate, initialSize: initialSize },\n        React.createElement(DataGridDnd, { eventTargetRef: scrollRef, width: clientWidth, height: clientHeight, accessibilityHeight: p.accessibilityHeight, canvasRef: p.canvasRef, cellXOffset: p.cellXOffset, cellYOffset: p.cellYOffset, columns: p.columns, disabledRows: p.disabledRows, enableGroups: p.enableGroups, fillHandle: p.fillHandle, firstColAccessible: p.firstColAccessible, fixedShadowX: p.fixedShadowX, fixedShadowY: p.fixedShadowY, freezeColumns: p.freezeColumns, getCellContent: p.getCellContent, getCellRenderer: p.getCellRenderer, getGroupDetails: p.getGroupDetails, getRowThemeOverride: p.getRowThemeOverride, groupHeaderHeight: p.groupHeaderHeight, headerHeight: p.headerHeight, highlightRegions: p.highlightRegions, imageWindowLoader: p.imageWindowLoader, isFilling: p.isFilling, isFocused: p.isFocused, lockColumns: p.lockColumns, maxColumnWidth: p.maxColumnWidth, minColumnWidth: p.minColumnWidth, onHeaderMenuClick: p.onHeaderMenuClick, onHeaderIndicatorClick: p.onHeaderIndicatorClick, onMouseMove: p.onMouseMove, prelightCells: p.prelightCells, rowHeight: p.rowHeight, rows: p.rows, selection: p.selection, theme: p.theme, freezeTrailingRows: p.freezeTrailingRows, hasAppendRow: p.hasAppendRow, translateX: p.translateX, translateY: p.translateY, onColumnProposeMove: p.onColumnProposeMove, verticalBorder: p.verticalBorder, drawFocusRing: p.drawFocusRing, drawHeader: p.drawHeader, drawCell: p.drawCell, experimental: p.experimental, gridRef: p.gridRef, headerIcons: p.headerIcons, isDraggable: p.isDraggable, onCanvasBlur: p.onCanvasBlur, onCanvasFocused: p.onCanvasFocused, onCellFocused: p.onCellFocused, onColumnMoved: p.onColumnMoved, onColumnResize: p.onColumnResize, onColumnResizeEnd: p.onColumnResizeEnd, onColumnResizeStart: p.onColumnResizeStart, onContextMenu: p.onContextMenu, onDragEnd: p.onDragEnd, onDragLeave: p.onDragLeave, onDragOverCell: p.onDragOverCell, onDragStart: p.onDragStart, onDrop: p.onDrop, onItemHovered: p.onItemHovered, onKeyDown: p.onKeyDown, onKeyUp: p.onKeyUp, onMouseDown: p.onMouseDown, onMouseUp: p.onMouseUp, onRowMoved: p.onRowMoved, smoothScrollX: p.smoothScrollX, smoothScrollY: p.smoothScrollY, resizeIndicator: p.resizeIndicator })));\n};\nexport default GridScroller;\n//# sourceMappingURL=scrolling-data-grid.js.map","import { styled } from \"@linaria/react\";\nexport const SearchWrapper = /*#__PURE__*/styled('div')({\n  name: \"SearchWrapper\",\n  class: \"gdg-seveqep\",\n  propsAsIs: false\n});\n\n","/* eslint-disable unicorn/consistent-destructuring */\nimport * as React from \"react\";\nimport { GridCellKind, } from \"../data-grid/data-grid-types.js\";\nimport ScrollingDataGrid, {} from \"../scrolling-data-grid/scrolling-data-grid.js\";\nimport { SearchWrapper } from \"./data-grid-search-style.js\";\nimport { assert } from \"../../common/support.js\";\n// icons\nconst upArrow = (React.createElement(\"svg\", { className: \"button-icon\", viewBox: \"0 0 512 512\" },\n    React.createElement(\"path\", { fill: \"none\", stroke: \"currentColor\", strokeLinecap: \"round\", strokeLinejoin: \"round\", strokeWidth: \"48\", d: \"M112 244l144-144 144 144M256 120v292\" })));\nconst downArrow = (React.createElement(\"svg\", { className: \"button-icon\", viewBox: \"0 0 512 512\" },\n    React.createElement(\"path\", { fill: \"none\", stroke: \"currentColor\", strokeLinecap: \"round\", strokeLinejoin: \"round\", strokeWidth: \"48\", d: \"M112 268l144 144 144-144M256 392V100\" })));\nconst closeX = (React.createElement(\"svg\", { className: \"button-icon\", viewBox: \"0 0 512 512\" },\n    React.createElement(\"path\", { fill: \"none\", stroke: \"currentColor\", strokeLinecap: \"round\", strokeLinejoin: \"round\", strokeWidth: \"32\", d: \"M368 368L144 144M368 144L144 368\" })));\nconst targetSearchTimeMS = 10;\nconst DataGridSearch = p => {\n    const { canvasRef, cellYOffset, rows, columns, searchInputRef, searchValue, searchResults: searchResultsIn, onSearchValueChange, getCellsForSelection, onSearchResultsChanged, showSearch = false, onSearchClose, } = p;\n    const [searchID] = React.useState(() => \"search-box-\" + Math.round(Math.random() * 1000));\n    const [searchStringInner, setSearchStringInner] = React.useState(\"\");\n    const searchString = searchValue ?? searchStringInner;\n    // always emit both, this allows the user to spy on the search value without controlling it.\n    const setSearchString = React.useCallback((newVal) => {\n        setSearchStringInner(newVal);\n        onSearchValueChange?.(newVal);\n    }, [onSearchValueChange]);\n    const [searchStatus, setSearchStatus] = React.useState();\n    const searchStatusRef = React.useRef(searchStatus);\n    searchStatusRef.current = searchStatus;\n    React.useEffect(() => {\n        if (searchResultsIn === undefined)\n            return;\n        if (searchResultsIn.length > 0) {\n            setSearchStatus(cv => ({\n                rowsSearched: rows,\n                results: searchResultsIn.length,\n                selectedIndex: cv?.selectedIndex ?? -1,\n            }));\n        }\n        else {\n            setSearchStatus(undefined);\n        }\n    }, [rows, searchResultsIn]);\n    const abortControllerRef = React.useRef();\n    if (abortControllerRef.current === undefined)\n        abortControllerRef.current = new AbortController();\n    const searchHandle = React.useRef();\n    const [searchResultsInner, setSearchResultsInner] = React.useState([]);\n    const searchResults = searchResultsIn ?? searchResultsInner;\n    const cancelSearch = React.useCallback(() => {\n        if (searchHandle.current !== undefined) {\n            window.cancelAnimationFrame(searchHandle.current);\n            searchHandle.current = undefined;\n            abortControllerRef.current.abort();\n        }\n    }, []);\n    const cellYOffsetRef = React.useRef(cellYOffset);\n    cellYOffsetRef.current = cellYOffset;\n    const beginSearch = React.useCallback((str) => {\n        const regex = new RegExp(str.replace(/([$()*+.?[\\\\\\]^{|}-])/g, \"\\\\$1\"), \"i\");\n        let startY = cellYOffsetRef.current;\n        // Lets assume we can do 10 rows at a time\n        // This is usually very safe and limits the damage for bad\n        // performing sheets.\n        let searchStride = Math.min(10, rows);\n        let rowsSearched = 0;\n        setSearchStatus(undefined);\n        setSearchResultsInner([]);\n        const runningResult = [];\n        const tick = async () => {\n            if (getCellsForSelection === undefined)\n                return;\n            const tStart = performance.now();\n            const rowsLeft = rows - rowsSearched;\n            let data = getCellsForSelection({\n                x: 0,\n                y: startY,\n                width: columns.length,\n                height: Math.min(searchStride, rowsLeft, rows - startY),\n            }, abortControllerRef.current.signal);\n            if (typeof data === \"function\") {\n                data = await data();\n            }\n            let added = false;\n            for (const [row, d] of data.entries()) {\n                for (const [col, cell] of d.entries()) {\n                    let testString;\n                    switch (cell.kind) {\n                        case GridCellKind.Text:\n                        case GridCellKind.Number:\n                            testString = cell.displayData;\n                            break;\n                        case GridCellKind.Uri:\n                        case GridCellKind.Markdown:\n                            testString = cell.data;\n                            break;\n                        case GridCellKind.Boolean:\n                            testString = typeof cell.data === \"boolean\" ? cell.data.toString() : undefined;\n                            break;\n                        case GridCellKind.Image:\n                        case GridCellKind.Bubble:\n                            // I know its lazy, but unless someone is actually\n                            // searching for the whale emoji, this is pretty side effect\n                            // free. And ya know... it's nice and easy to do...\n                            testString = cell.data.join(\"\");\n                            break;\n                        case GridCellKind.Custom:\n                            testString = cell.copyData;\n                            break;\n                    }\n                    if (testString !== undefined && regex.test(testString)) {\n                        runningResult.push([col, row + startY]);\n                        added = true;\n                    }\n                }\n            }\n            const tEnd = performance.now();\n            if (added) {\n                setSearchResultsInner([...runningResult]);\n            }\n            rowsSearched += data.length;\n            assert(rowsSearched <= rows);\n            const selectedIndex = searchStatusRef.current?.selectedIndex ?? -1;\n            setSearchStatus({\n                results: runningResult.length,\n                rowsSearched,\n                selectedIndex,\n            });\n            onSearchResultsChanged?.(runningResult, selectedIndex);\n            if (startY + searchStride >= rows) {\n                startY = 0;\n            }\n            else {\n                startY += searchStride;\n            }\n            const tElapsed = tEnd - tStart;\n            const rounded = Math.max(tElapsed, 1);\n            const scalar = targetSearchTimeMS / rounded;\n            searchStride = Math.ceil(searchStride * scalar);\n            if (rowsSearched < rows && runningResult.length < 1000) {\n                searchHandle.current = window.requestAnimationFrame(tick);\n            }\n        };\n        cancelSearch();\n        searchHandle.current = window.requestAnimationFrame(tick);\n    }, [cancelSearch, columns.length, getCellsForSelection, onSearchResultsChanged, rows]);\n    const onClose = React.useCallback(() => {\n        onSearchClose?.();\n        setSearchStatus(undefined);\n        setSearchResultsInner([]);\n        onSearchResultsChanged?.([], -1);\n        cancelSearch();\n        canvasRef?.current?.focus();\n    }, [cancelSearch, canvasRef, onSearchClose, onSearchResultsChanged]);\n    const onSearchChange = React.useCallback((event) => {\n        setSearchString(event.target.value);\n        if (searchResultsIn !== undefined)\n            return;\n        if (event.target.value === \"\") {\n            setSearchStatus(undefined);\n            setSearchResultsInner([]);\n            cancelSearch();\n        }\n        else {\n            beginSearch(event.target.value);\n        }\n    }, [beginSearch, cancelSearch, setSearchString, searchResultsIn]);\n    React.useEffect(() => {\n        if (showSearch && searchInputRef.current !== null) {\n            setSearchString(\"\");\n            searchInputRef.current.focus({ preventScroll: true });\n        }\n    }, [showSearch, searchInputRef, setSearchString]);\n    const onNext = React.useCallback((ev) => {\n        ev?.stopPropagation?.();\n        if (searchStatus === undefined)\n            return;\n        const newIndex = (searchStatus.selectedIndex + 1) % searchStatus.results;\n        setSearchStatus({\n            ...searchStatus,\n            selectedIndex: newIndex,\n        });\n        onSearchResultsChanged?.(searchResults, newIndex);\n    }, [searchStatus, onSearchResultsChanged, searchResults]);\n    const onPrev = React.useCallback((ev) => {\n        ev?.stopPropagation?.();\n        if (searchStatus === undefined)\n            return;\n        let newIndex = (searchStatus.selectedIndex - 1) % searchStatus.results;\n        if (newIndex < 0)\n            newIndex += searchStatus.results;\n        setSearchStatus({\n            ...searchStatus,\n            selectedIndex: newIndex,\n        });\n        onSearchResultsChanged?.(searchResults, newIndex);\n    }, [onSearchResultsChanged, searchResults, searchStatus]);\n    const onSearchKeyDown = React.useCallback((event) => {\n        if (((event.ctrlKey || event.metaKey) && event.nativeEvent.code === \"KeyF\") || event.key === \"Escape\") {\n            onClose();\n            event.stopPropagation();\n            event.preventDefault();\n        }\n        else if (event.key === \"Enter\") {\n            if (event.shiftKey) {\n                onPrev();\n            }\n            else {\n                onNext();\n            }\n        }\n    }, [onClose, onNext, onPrev]);\n    // cancel search if the component is unmounted\n    React.useEffect(() => {\n        return () => {\n            cancelSearch();\n        };\n    }, [cancelSearch]);\n    const [isAnimatingOut, setIsAnimatingOut] = React.useState(false);\n    React.useEffect(() => {\n        if (showSearch) {\n            setIsAnimatingOut(true);\n        }\n        else {\n            const timeoutId = setTimeout(() => setIsAnimatingOut(false), 150);\n            return () => clearTimeout(timeoutId);\n        }\n    }, [showSearch]);\n    const searchbox = React.useMemo(() => {\n        if (!showSearch && !isAnimatingOut) {\n            return null;\n        }\n        let resultString;\n        if (searchStatus !== undefined) {\n            resultString =\n                searchStatus.results >= 1000\n                    ? `over 1000`\n                    : `${searchStatus.results} result${searchStatus.results !== 1 ? \"s\" : \"\"}`;\n            if (searchStatus.selectedIndex >= 0) {\n                resultString = `${searchStatus.selectedIndex + 1} of ${resultString}`;\n            }\n        }\n        const cancelEvent = (ev) => {\n            ev.stopPropagation();\n        };\n        const rowsSearchedProgress = Math.floor(((searchStatus?.rowsSearched ?? 0) / rows) * 100);\n        const progressStyle = {\n            width: `${rowsSearchedProgress}%`,\n        };\n        return (React.createElement(SearchWrapper, { className: showSearch ? \"\" : \"out\", onMouseDown: cancelEvent, onMouseMove: cancelEvent, onMouseUp: cancelEvent, onClick: cancelEvent },\n            React.createElement(\"div\", { className: \"gdg-search-bar-inner\" },\n                React.createElement(\"input\", { id: searchID, \"aria-hidden\": !showSearch, \"data-testid\": \"search-input\", ref: searchInputRef, onChange: onSearchChange, value: searchString, tabIndex: showSearch ? undefined : -1, onKeyDownCapture: onSearchKeyDown }),\n                React.createElement(\"button\", { \"aria-label\": \"Previous Result\", \"aria-hidden\": !showSearch, tabIndex: showSearch ? undefined : -1, onClick: onPrev, disabled: (searchStatus?.results ?? 0) === 0 }, upArrow),\n                React.createElement(\"button\", { \"aria-label\": \"Next Result\", \"aria-hidden\": !showSearch, tabIndex: showSearch ? undefined : -1, onClick: onNext, disabled: (searchStatus?.results ?? 0) === 0 }, downArrow),\n                onSearchClose !== undefined && (React.createElement(\"button\", { \"aria-label\": \"Close Search\", \"aria-hidden\": !showSearch, \"data-testid\": \"search-close-button\", tabIndex: showSearch ? undefined : -1, onClick: onClose }, closeX))),\n            searchStatus !== undefined ? (React.createElement(React.Fragment, null,\n                React.createElement(\"div\", { className: \"gdg-search-status\" },\n                    React.createElement(\"div\", { \"data-testid\": \"search-result-area\" }, resultString)),\n                React.createElement(\"div\", { className: \"gdg-search-progress\", style: progressStyle }))) : (React.createElement(\"div\", { className: \"gdg-search-status\" },\n                React.createElement(\"label\", { htmlFor: searchID }, \"Type to search\")))));\n    }, [\n        showSearch,\n        isAnimatingOut,\n        searchStatus,\n        rows,\n        searchID,\n        searchInputRef,\n        onSearchChange,\n        searchString,\n        onSearchKeyDown,\n        onPrev,\n        onNext,\n        onSearchClose,\n        onClose,\n    ]);\n    return (React.createElement(React.Fragment, null,\n        React.createElement(ScrollingDataGrid, { prelightCells: searchResults, accessibilityHeight: p.accessibilityHeight, canvasRef: p.canvasRef, cellXOffset: p.cellXOffset, cellYOffset: p.cellYOffset, className: p.className, clientSize: p.clientSize, columns: p.columns, disabledRows: p.disabledRows, enableGroups: p.enableGroups, fillHandle: p.fillHandle, firstColAccessible: p.firstColAccessible, nonGrowWidth: p.nonGrowWidth, fixedShadowX: p.fixedShadowX, fixedShadowY: p.fixedShadowY, freezeColumns: p.freezeColumns, getCellContent: p.getCellContent, getCellRenderer: p.getCellRenderer, getGroupDetails: p.getGroupDetails, getRowThemeOverride: p.getRowThemeOverride, groupHeaderHeight: p.groupHeaderHeight, headerHeight: p.headerHeight, highlightRegions: p.highlightRegions, imageWindowLoader: p.imageWindowLoader, initialSize: p.initialSize, isFilling: p.isFilling, isFocused: p.isFocused, lockColumns: p.lockColumns, maxColumnWidth: p.maxColumnWidth, minColumnWidth: p.minColumnWidth, onHeaderMenuClick: p.onHeaderMenuClick, onHeaderIndicatorClick: p.onHeaderIndicatorClick, onMouseMove: p.onMouseMove, onVisibleRegionChanged: p.onVisibleRegionChanged, overscrollX: p.overscrollX, overscrollY: p.overscrollY, preventDiagonalScrolling: p.preventDiagonalScrolling, rightElement: p.rightElement, rightElementProps: p.rightElementProps, rowHeight: p.rowHeight, rows: p.rows, scrollRef: p.scrollRef, selection: p.selection, theme: p.theme, freezeTrailingRows: p.freezeTrailingRows, hasAppendRow: p.hasAppendRow, translateX: p.translateX, translateY: p.translateY, verticalBorder: p.verticalBorder, onColumnProposeMove: p.onColumnProposeMove, drawFocusRing: p.drawFocusRing, drawCell: p.drawCell, drawHeader: p.drawHeader, experimental: p.experimental, gridRef: p.gridRef, headerIcons: p.headerIcons, isDraggable: p.isDraggable, onCanvasBlur: p.onCanvasBlur, onCanvasFocused: p.onCanvasFocused, onCellFocused: p.onCellFocused, onColumnMoved: p.onColumnMoved, onColumnResize: p.onColumnResize, onColumnResizeEnd: p.onColumnResizeEnd, onColumnResizeStart: p.onColumnResizeStart, onContextMenu: p.onContextMenu, onDragEnd: p.onDragEnd, onDragLeave: p.onDragLeave, onDragOverCell: p.onDragOverCell, onDragStart: p.onDragStart, onDrop: p.onDrop, onItemHovered: p.onItemHovered, onKeyDown: p.onKeyDown, onKeyUp: p.onKeyUp, onMouseDown: p.onMouseDown, onMouseUp: p.onMouseUp, onRowMoved: p.onRowMoved, smoothScrollX: p.smoothScrollX, smoothScrollY: p.smoothScrollY, resizeIndicator: p.resizeIndicator }),\n        searchbox));\n};\nexport default DataGridSearch;\n//# sourceMappingURL=data-grid-search.js.map","import * as React from \"react\";\nexport default class ClickOutsideContainer extends React.PureComponent {\n    wrapperRef = React.createRef();\n    componentDidMount() {\n        document.addEventListener(\"touchend\", this.clickOutside, true);\n        document.addEventListener(\"mousedown\", this.clickOutside, true);\n        document.addEventListener(\"contextmenu\", this.clickOutside, true);\n    }\n    componentWillUnmount() {\n        document.removeEventListener(\"touchend\", this.clickOutside, true);\n        document.removeEventListener(\"mousedown\", this.clickOutside, true);\n        document.removeEventListener(\"contextmenu\", this.clickOutside, true);\n    }\n    clickOutside = (event) => {\n        if (this.props.isOutsideClick && !this.props.isOutsideClick(event)) {\n            return;\n        }\n        if (this.wrapperRef.current !== null && !this.wrapperRef.current.contains(event.target)) {\n            let node = event.target;\n            while (node !== null) {\n                if (node.classList.contains(\"click-outside-ignore\")) {\n                    return;\n                }\n                node = node.parentElement;\n            }\n            this.props.onClickOutside();\n        }\n    };\n    render() {\n        const { onClickOutside, isOutsideClick, ...rest } = this.props;\n        return (React.createElement(\"div\", { ...rest, ref: this.wrapperRef }, this.props.children));\n    }\n}\n//# sourceMappingURL=click-outside-container.js.map","import React from \"react\";\nimport { styled } from \"@linaria/react\";\nimport ClickOutsideContainer from \"../internal/click-outside-container/click-outside-container.js\";\nconst _exp = /*#__PURE__*/() => p => Math.max(16, p.targetHeight - 10);\nconst RenameInput = /*#__PURE__*/styled('input')({\n  name: \"RenameInput\",\n  class: \"gdg-r17m35ur\",\n  propsAsIs: false,\n  vars: {\n    \"r17m35ur-0\": [_exp(), \"px\"]\n  }\n});\nexport const GroupRename = p => {\n  const {\n    bounds,\n    group,\n    onClose,\n    canvasBounds,\n    onFinish\n  } = p;\n  const [value, setValue] = React.useState(group);\n  return React.createElement(ClickOutsideContainer, {\n    style: {\n      position: \"absolute\",\n      left: bounds.x - canvasBounds.left + 1,\n      top: bounds.y - canvasBounds.top,\n      width: bounds.width - 2,\n      height: bounds.height\n    },\n    className: \"gdg-c1tqibwd\",\n    onClickOutside: onClose\n  }, React.createElement(RenameInput, {\n    targetHeight: bounds.height,\n    \"data-testid\": \"group-rename-input\",\n    value: value,\n    onBlur: onClose,\n    onFocus: e => e.target.setSelectionRange(0, value.length),\n    onChange: e => setValue(e.target.value),\n    onKeyDown: e => {\n      if (e.key === \"Enter\") {\n        onFinish(value);\n      } else if (e.key === \"Escape\") {\n        onClose();\n      }\n    },\n    autoFocus: true\n  }));\n};\n\n","import { browserIsOSX } from \"./browser-detect.js\";\n// brain dead syntax, find your deps, and make buggy replacements with 5 times the effort\n// all lower case\n// ctrl+shift+alt+d or ctrl+x or shift+c or shift+Backspace or alt+_53\n// you get it, last one is always event.key, nothing fancy\n// special: primary === ctrl on windows, meta on mac\n// no to lower, its a waste, we're the only consumer, don't use caps\n// and before you ask, yes space is \" \", e.g. \"ctrl+alt+ \", whatacountry.gif\n// load bearing whitespace, it's basically python\n// if the char starts with a _ it is the event.keycode instead\nfunction checkKey(key, args) {\n    if (key === undefined)\n        return false;\n    if (key.length > 1 && key.startsWith(\"_\")) {\n        const keycode = Number.parseInt(key.slice(1));\n        return keycode === args.keyCode;\n    }\n    if (key.length === 1 && key >= \"a\" && key <= \"z\") {\n        return key.toUpperCase().codePointAt(0) === args.keyCode;\n    }\n    return key === args.key;\n}\nexport function isHotkey(hotkey, args, details) {\n    const result = isHotkeyInner(hotkey, args);\n    if (result)\n        details.didMatch = true;\n    return result;\n}\nfunction isHotkeyInner(hotkey, args) {\n    if (hotkey.length === 0)\n        return false;\n    if (hotkey.includes(\"|\")) {\n        const parts = hotkey.split(\"|\");\n        for (const part of parts) {\n            if (isHotkeyInner(part, args))\n                return true;\n        }\n        return false;\n    }\n    let wantCtrl = false;\n    let wantShift = false;\n    let wantAlt = false;\n    let wantMeta = false;\n    const split = hotkey.split(\"+\");\n    const key = split.pop();\n    if (!checkKey(key, args))\n        return false;\n    if (split[0] === \"any\")\n        return true;\n    for (const accel of split) {\n        switch (accel) {\n            case \"ctrl\":\n                wantCtrl = true;\n                break;\n            case \"shift\":\n                wantShift = true;\n                break;\n            case \"alt\":\n                wantAlt = true;\n                break;\n            case \"meta\":\n                wantMeta = true;\n                break;\n            case \"primary\":\n                if (browserIsOSX.value) {\n                    wantMeta = true;\n                }\n                else {\n                    wantCtrl = true;\n                }\n                break;\n        }\n    }\n    return (args.altKey === wantAlt && args.ctrlKey === wantCtrl && args.shiftKey === wantShift && args.metaKey === wantMeta);\n}\n//# sourceMappingURL=is-hotkey.js.map","import React from \"react\";\nimport { CompactSelection } from \"./data-grid-types.js\";\nexport function useSelectionBehavior(gridSelection, setGridSelection, rangeBehavior, columnBehavior, rowBehavior, rangeSelect, rangeSelectionColumnSpanning) {\n    // if append is true, the current range will be added to the rangeStack\n    const setCurrent = React.useCallback((value, expand, append, trigger) => {\n        if ((rangeSelect === \"cell\" || rangeSelect === \"multi-cell\") && value !== undefined) {\n            value = {\n                ...value,\n                range: {\n                    x: value.cell[0],\n                    y: value.cell[1],\n                    width: 1,\n                    height: 1,\n                },\n            };\n        }\n        if (!rangeSelectionColumnSpanning && value !== undefined && value.range.width > 1) {\n            value = {\n                ...value,\n                range: {\n                    ...value.range,\n                    width: 1,\n                    x: value.cell[0],\n                },\n            };\n        }\n        const rangeMixable = rangeBehavior === \"mixed\" && (append || trigger === \"drag\");\n        const allowColumnCoSelect = columnBehavior === \"mixed\" && rangeMixable;\n        const allowRowCoSelect = rowBehavior === \"mixed\" && rangeMixable;\n        let newVal = {\n            current: value === undefined\n                ? undefined\n                : {\n                    ...value,\n                    rangeStack: trigger === \"drag\" ? gridSelection.current?.rangeStack ?? [] : [],\n                },\n            columns: allowColumnCoSelect ? gridSelection.columns : CompactSelection.empty(),\n            rows: allowRowCoSelect ? gridSelection.rows : CompactSelection.empty(),\n        };\n        const addLastRange = append && (rangeSelect === \"multi-rect\" || rangeSelect === \"multi-cell\");\n        if (addLastRange && newVal.current !== undefined && gridSelection.current !== undefined) {\n            newVal = {\n                ...newVal,\n                current: {\n                    ...newVal.current,\n                    rangeStack: [...gridSelection.current.rangeStack, gridSelection.current.range],\n                },\n            };\n        }\n        setGridSelection(newVal, expand);\n    }, [\n        columnBehavior,\n        gridSelection,\n        rangeBehavior,\n        rangeSelect,\n        rangeSelectionColumnSpanning,\n        rowBehavior,\n        setGridSelection,\n    ]);\n    const setSelectedRows = React.useCallback((newRows, append, allowMixed) => {\n        newRows = newRows ?? gridSelection.rows;\n        if (append !== undefined) {\n            newRows = newRows.add(append);\n        }\n        let newVal;\n        if (rowBehavior === \"exclusive\" && newRows.length > 0) {\n            newVal = {\n                current: undefined,\n                columns: CompactSelection.empty(),\n                rows: newRows,\n            };\n        }\n        else {\n            const rangeMixed = allowMixed && rangeBehavior === \"mixed\";\n            const columnMixed = allowMixed && columnBehavior === \"mixed\";\n            const current = !rangeMixed ? undefined : gridSelection.current;\n            newVal = {\n                current,\n                columns: columnMixed ? gridSelection.columns : CompactSelection.empty(),\n                rows: newRows,\n            };\n        }\n        setGridSelection(newVal, false);\n    }, [columnBehavior, gridSelection, rangeBehavior, rowBehavior, setGridSelection]);\n    const setSelectedColumns = React.useCallback((newCols, append, allowMixed) => {\n        newCols = newCols ?? gridSelection.columns;\n        if (append !== undefined) {\n            newCols = newCols.add(append);\n        }\n        let newVal;\n        if (columnBehavior === \"exclusive\" && newCols.length > 0) {\n            newVal = {\n                current: undefined,\n                rows: CompactSelection.empty(),\n                columns: newCols,\n            };\n        }\n        else {\n            const rangeMixed = allowMixed && rangeBehavior === \"mixed\";\n            const rowMixed = allowMixed && rowBehavior === \"mixed\";\n            const current = !rangeMixed ? undefined : gridSelection.current;\n            newVal = {\n                current,\n                rows: rowMixed ? gridSelection.rows : CompactSelection.empty(),\n                columns: newCols,\n            };\n        }\n        setGridSelection(newVal, false);\n    }, [columnBehavior, gridSelection, rangeBehavior, rowBehavior, setGridSelection]);\n    return [setCurrent, setSelectedRows, setSelectedColumns];\n}\n//# sourceMappingURL=use-selection-behavior.js.map","import * as React from \"react\";\nimport { GridCellKind } from \"../internal/data-grid/data-grid-types.js\";\nexport function useCellsForSelection(getCellsForSelectionIn, getCellContent, rowMarkerOffset, abortController, rows) {\n    const getCellsForSelectionDirectWhenValid = React.useCallback(rect => {\n        if (getCellsForSelectionIn === true) {\n            const result = [];\n            for (let y = rect.y; y < rect.y + rect.height; y++) {\n                const row = [];\n                for (let x = rect.x; x < rect.x + rect.width; x++) {\n                    if (x < 0 || y >= rows) {\n                        row.push({\n                            kind: GridCellKind.Loading,\n                            allowOverlay: false,\n                        });\n                    }\n                    else {\n                        row.push(getCellContent([x, y]));\n                    }\n                }\n                result.push(row);\n            }\n            return result;\n        }\n        return getCellsForSelectionIn?.(rect, abortController.signal) ?? [];\n    }, [abortController.signal, getCellContent, getCellsForSelectionIn, rows]);\n    const getCellsForSelectionDirect = getCellsForSelectionIn !== undefined ? getCellsForSelectionDirectWhenValid : undefined;\n    const getCellsForSelectionMangled = React.useCallback(rect => {\n        if (getCellsForSelectionDirect === undefined)\n            return [];\n        const newRect = {\n            ...rect,\n            x: rect.x - rowMarkerOffset,\n        };\n        if (newRect.x < 0) {\n            newRect.x = 0;\n            newRect.width--;\n            const r = getCellsForSelectionDirect(newRect, abortController.signal);\n            if (typeof r === \"function\") {\n                return async () => \n                // eslint-disable-next-line unicorn/no-await-expression-member\n                (await r()).map(row => [\n                    { kind: GridCellKind.Loading, allowOverlay: false },\n                    ...row,\n                ]);\n            }\n            return r.map(row => [{ kind: GridCellKind.Loading, allowOverlay: false }, ...row]);\n        }\n        return getCellsForSelectionDirect(newRect, abortController.signal);\n    }, [abortController.signal, getCellsForSelectionDirect, rowMarkerOffset]);\n    const getCellsForSelection = getCellsForSelectionIn !== undefined ? getCellsForSelectionMangled : undefined;\n    return [getCellsForSelection, getCellsForSelectionDirect];\n}\n//# sourceMappingURL=use-cells-for-selection.js.map","/* eslint-disable sonarjs/no-duplicate-string */\nimport { assertNever } from \"../common/support.js\";\nimport { GridCellKind, BooleanEmpty, BooleanIndeterminate, } from \"../internal/data-grid/data-grid-types.js\";\nfunction convertCellToBuffer(cell) {\n    if (cell.copyData !== undefined) {\n        return {\n            formatted: cell.copyData,\n            rawValue: cell.copyData,\n            format: \"string\",\n        };\n    }\n    switch (cell.kind) {\n        case GridCellKind.Boolean:\n            return {\n                formatted: cell.data === true\n                    ? \"TRUE\"\n                    : cell.data === false\n                        ? \"FALSE\"\n                        : cell.data === BooleanIndeterminate\n                            ? \"INDETERMINATE\"\n                            : \"\",\n                rawValue: cell.data,\n                format: \"boolean\",\n            };\n        case GridCellKind.Custom:\n            return {\n                formatted: cell.copyData,\n                rawValue: cell.copyData,\n                format: \"string\",\n            };\n        case GridCellKind.Image:\n        case GridCellKind.Bubble:\n            return {\n                formatted: cell.data,\n                rawValue: cell.data,\n                format: \"string-array\",\n            };\n        case GridCellKind.Drilldown:\n            return {\n                formatted: cell.data.map(x => x.text),\n                rawValue: cell.data.map(x => x.text),\n                format: \"string-array\",\n            };\n        case GridCellKind.Text:\n            return {\n                formatted: cell.displayData ?? cell.data,\n                rawValue: cell.data,\n                format: \"string\",\n            };\n        case GridCellKind.Uri:\n            return {\n                formatted: cell.displayData ?? cell.data,\n                rawValue: cell.data,\n                format: \"url\",\n            };\n        case GridCellKind.Markdown:\n        case GridCellKind.RowID:\n            return {\n                formatted: cell.data,\n                rawValue: cell.data,\n                format: \"string\",\n            };\n        case GridCellKind.Number:\n            return {\n                formatted: cell.displayData,\n                rawValue: cell.data,\n                format: \"number\",\n            };\n        case GridCellKind.Loading:\n            return {\n                formatted: \"#LOADING\",\n                rawValue: \"\",\n                format: \"string\",\n            };\n        case GridCellKind.Protected:\n            return {\n                formatted: \"************\",\n                rawValue: \"\",\n                format: \"string\",\n            };\n        default:\n            assertNever(cell);\n    }\n}\nfunction createBufferFromGridCells(cells, columnIndexes) {\n    const copyBuffer = cells.map((row, index) => {\n        const mappedIndex = columnIndexes[index];\n        return row.map(cell => {\n            if (cell.span !== undefined && cell.span[0] !== mappedIndex)\n                return {\n                    formatted: \"\",\n                    rawValue: \"\",\n                    format: \"string\",\n                };\n            return convertCellToBuffer(cell);\n        });\n    });\n    return copyBuffer;\n}\nfunction escapeIfNeeded(str, withComma) {\n    if ((withComma ? /[\\t\\n\",]/ : /[\\t\\n\"]/).test(str)) {\n        str = `\"${str.replace(/\"/g, '\"\"')}\"`;\n    }\n    return str;\n}\nfunction createTextBuffer(copyBuffer) {\n    const lines = [];\n    for (const row of copyBuffer) {\n        const line = [];\n        for (const cell of row) {\n            if (cell.format === \"url\") {\n                line.push(cell.rawValue?.toString() ?? \"\");\n            }\n            else if (cell.format === \"string-array\") {\n                line.push(cell.formatted.map(x => escapeIfNeeded(x, true)).join(\",\"));\n            }\n            else {\n                line.push(escapeIfNeeded(cell.formatted, false));\n            }\n        }\n        lines.push(line.join(\"\\t\"));\n    }\n    return lines.join(\"\\n\");\n}\nfunction formatHtmlTextContent(text) {\n    // The following formatting for the `html` variable ensures that when pasting,\n    // spaces are preserved in both Google Sheets and Excel. This is done by:\n    // 1. Replacing tabs with four spaces for consistency. Also google sheets disallows any tabs.\n    // 2. Wrapping each space with a span element to prevent them from being collapsed or ignored during the\n    //    paste operation\n    return text.replace(/\\t/g, \"    \").replace(/ {2,}/g, match => \"<span> </span>\".repeat(match.length));\n}\nfunction formatHtmlAttributeContent(attrText) {\n    // Escape all quotes, lt, gt, and other special characters\n    return ('\"' + attrText.replace(/&/g, \"&amp;\").replace(/\"/g, \"&quot;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\") + '\"');\n}\nfunction restoreHtmlEntities(str) {\n    // Unescape all quotes, lt, gt, and other special characters\n    return str\n        .replace(/&quot;/g, '\"')\n        .replace(/&lt;/g, \"<\")\n        .replace(/&gt;/g, \">\")\n        .replace(/&amp;/g, \"&\");\n}\nfunction createHtmlBuffer(copyBuffer) {\n    const lines = [];\n    lines.push(`<style type=\"text/css\"><!--br {mso-data-placement:same-cell;}--></style>`, \"<table><tbody>\");\n    for (const row of copyBuffer) {\n        lines.push(\"<tr>\");\n        for (const cell of row) {\n            const formatStr = `gdg-format=\"${cell.format}\"`;\n            if (cell.format === \"url\") {\n                lines.push(`<td ${formatStr}><a href=\"${cell.rawValue}\">${formatHtmlTextContent(cell.formatted)}</a></td>`);\n            }\n            else {\n                if (cell.format === \"string-array\") {\n                    lines.push(`<td ${formatStr}><ol>${cell.formatted\n                        .map((x, ind) => `<li gdg-raw-value=${formatHtmlAttributeContent(cell.rawValue[ind])}>` +\n                        formatHtmlTextContent(x) +\n                        \"</li>\")\n                        .join(\"\")}</ol></td>`);\n                }\n                else {\n                    lines.push(`<td gdg-raw-value=${formatHtmlAttributeContent(cell.rawValue?.toString() ?? \"\")} ${formatStr}>${formatHtmlTextContent(cell.formatted)}</td>`);\n                }\n            }\n        }\n        lines.push(\"</tr>\");\n    }\n    lines.push(\"</tbody></table>\");\n    return lines.join(\"\");\n}\n// This function encodes grid cells to a table object.\n// Each td in the table contains one of 3 things\n// - A string directly and the td has a `gdg-raw-value` attribute with the raw value\n// - An anchor tag with a href and the text is the formatted value\n// - An ordered list with each item containing a `gdg-raw-value` attribute with the raw value\nexport function getCopyBufferContents(cells, columnIndexes) {\n    const copyBuffer = createBufferFromGridCells(cells, columnIndexes);\n    const textPlain = createTextBuffer(copyBuffer);\n    const textHtml = createHtmlBuffer(copyBuffer);\n    return {\n        textPlain,\n        textHtml,\n    };\n}\nexport function decodeHTML(html) {\n    const fragment = document.createElement(\"html\");\n    // we dont want to retain the pasted non-breaking spaces\n    fragment.innerHTML = html.replace(/&nbsp;/g, \" \");\n    const tableEl = fragment.querySelector(\"table\");\n    if (tableEl === null)\n        return undefined;\n    const walkEl = [tableEl];\n    const result = [];\n    let current;\n    while (walkEl.length > 0) {\n        const el = walkEl.pop();\n        if (el === undefined)\n            break;\n        if (el instanceof HTMLTableElement || el.nodeName === \"TBODY\") {\n            walkEl.push(...[...el.children].reverse());\n        }\n        else if (el instanceof HTMLTableRowElement) {\n            if (current !== undefined) {\n                result.push(current);\n            }\n            current = [];\n            walkEl.push(...[...el.children].reverse());\n        }\n        else if (el instanceof HTMLTableCellElement) {\n            // be careful not to use innerText here as its behavior is not well defined for non DOM attached nodes\n            const clone = el.cloneNode(true);\n            // Apple numbers seems to always wrap the cell in a p tag and a font tag. It also puts both <br> and \\n\n            // linebreak markers in the code. This is both unneeded and causes issues with the paste code.\n            const firstTagIsPara = clone.children.length === 1 && clone.children[0].nodeName === \"P\";\n            const para = firstTagIsPara ? clone.children[0] : null;\n            const isAppleNumbers = para?.children.length === 1 && para.children[0].nodeName === \"FONT\";\n            const brs = clone.querySelectorAll(\"br\");\n            for (const br of brs) {\n                br.replaceWith(\"\\n\");\n            }\n            const attributeValue = clone.getAttribute(\"gdg-raw-value\");\n            const formatValue = (clone.getAttribute(\"gdg-format\") ?? \"string\"); // fix me at some point\n            if (clone.querySelector(\"a\") !== null) {\n                current?.push({\n                    // raw value is the href\n                    rawValue: clone.querySelector(\"a\")?.getAttribute(\"href\") ?? \"\",\n                    formatted: clone.textContent ?? \"\",\n                    format: formatValue,\n                });\n            }\n            else if (clone.querySelector(\"ol\") !== null) {\n                const rawValues = clone.querySelectorAll(\"li\");\n                current?.push({\n                    rawValue: [...rawValues].map(x => x.getAttribute(\"gdg-raw-value\") ?? \"\"),\n                    formatted: [...rawValues].map(x => x.textContent ?? \"\"),\n                    format: \"string-array\",\n                });\n            }\n            else if (attributeValue !== null) {\n                current?.push({\n                    rawValue: restoreHtmlEntities(attributeValue),\n                    formatted: clone.textContent ?? \"\",\n                    format: formatValue,\n                });\n            }\n            else {\n                let textContent = clone.textContent ?? \"\";\n                if (isAppleNumbers) {\n                    // replace any newline not preceded by a newline\n                    textContent = textContent.replace(/\\n(?!\\n)/g, \"\");\n                }\n                current?.push({\n                    rawValue: textContent ?? \"\",\n                    formatted: textContent ?? \"\",\n                    format: formatValue,\n                });\n            }\n        }\n    }\n    if (current !== undefined) {\n        result.push(current);\n    }\n    return result;\n}\n//# sourceMappingURL=copy-paste.js.map","import {} from \"../internal/data-grid/data-grid-types.js\";\nimport { getCopyBufferContents } from \"./copy-paste.js\";\nexport function expandSelection(newVal, getCellsForSelection, rowMarkerOffset, spanRangeBehavior, abortController) {\n    const origVal = newVal;\n    if (spanRangeBehavior === \"allowPartial\" || newVal.current === undefined || getCellsForSelection === undefined)\n        return newVal;\n    let isFilled = false;\n    do {\n        if (newVal?.current === undefined)\n            break;\n        const r = newVal.current?.range;\n        const cells = [];\n        if (r.width > 2) {\n            const leftCells = getCellsForSelection({\n                x: r.x,\n                y: r.y,\n                width: 1,\n                height: r.height,\n            }, abortController.signal);\n            if (typeof leftCells === \"function\") {\n                return origVal;\n            }\n            cells.push(...leftCells);\n            const rightCells = getCellsForSelection({\n                x: r.x + r.width - 1,\n                y: r.y,\n                width: 1,\n                height: r.height,\n            }, abortController.signal);\n            if (typeof rightCells === \"function\") {\n                return origVal;\n            }\n            cells.push(...rightCells);\n        }\n        else {\n            const rCells = getCellsForSelection({\n                x: r.x,\n                y: r.y,\n                width: r.width,\n                height: r.height,\n            }, abortController.signal);\n            if (typeof rCells === \"function\") {\n                return origVal;\n            }\n            cells.push(...rCells);\n        }\n        let left = r.x - rowMarkerOffset;\n        let right = r.x + r.width - 1 - rowMarkerOffset;\n        for (const row of cells) {\n            for (const cell of row) {\n                if (cell.span === undefined)\n                    continue;\n                left = Math.min(cell.span[0], left);\n                right = Math.max(cell.span[1], right);\n            }\n        }\n        if (left === r.x - rowMarkerOffset && right === r.x + r.width - 1 - rowMarkerOffset) {\n            isFilled = true;\n        }\n        else {\n            newVal = {\n                current: {\n                    cell: newVal.current.cell ?? [0, 0],\n                    range: {\n                        x: left + rowMarkerOffset,\n                        y: r.y,\n                        width: right - left + 1,\n                        height: r.height,\n                    },\n                    rangeStack: newVal.current.rangeStack,\n                },\n                columns: newVal.columns,\n                rows: newVal.rows,\n            };\n        }\n    } while (!isFilled);\n    return newVal;\n}\nfunction descape(s) {\n    if (s.startsWith('\"') && s.endsWith('\"')) {\n        s = s.slice(1, -1).replace(/\"\"/g, '\"');\n    }\n    return s;\n}\nexport function unquote(str) {\n    let State;\n    (function (State) {\n        State[State[\"None\"] = 0] = \"None\";\n        State[State[\"inString\"] = 1] = \"inString\";\n        State[State[\"inStringPostQuote\"] = 2] = \"inStringPostQuote\";\n    })(State || (State = {}));\n    const result = [];\n    let current = [];\n    let start = 0;\n    let state = State.None;\n    str = str.replace(/\\r\\n/g, \"\\n\");\n    let index = 0;\n    for (const char of str) {\n        switch (state) {\n            case State.None:\n                if (char === \"\\t\" || char === \"\\n\") {\n                    current.push(str.slice(start, index));\n                    start = index + 1;\n                    if (char === \"\\n\") {\n                        result.push(current);\n                        current = [];\n                    }\n                }\n                else if (char === `\"`) {\n                    state = State.inString;\n                }\n                break;\n            case State.inString:\n                if (char === `\"`) {\n                    state = State.inStringPostQuote;\n                }\n                break;\n            case State.inStringPostQuote:\n                if (char === '\"') {\n                    state = State.inString;\n                }\n                else if (char === \"\\t\" || char === \"\\n\") {\n                    current.push(descape(str.slice(start, index)));\n                    start = index + 1;\n                    if (char === \"\\n\") {\n                        result.push(current);\n                        current = [];\n                    }\n                    state = State.None;\n                }\n                else {\n                    state = State.None;\n                }\n                break;\n        }\n        index++;\n    }\n    if (start < str.length) {\n        current.push(descape(str.slice(start, str.length)));\n    }\n    result.push(current);\n    return result.map(r => r.map(c => ({ rawValue: c, formatted: c, format: \"string\" })));\n}\nexport function copyToClipboard(cells, columnIndexes, e) {\n    const copyBuffer = getCopyBufferContents(cells, columnIndexes);\n    // eslint-disable-next-line unicorn/consistent-function-scoping\n    const copyWithWriteText = (s) => {\n        void window.navigator.clipboard?.writeText(s);\n    };\n    const copyWithWrite = (s, html) => {\n        if (window.navigator.clipboard?.write === undefined)\n            return false;\n        void window.navigator.clipboard.write([\n            new ClipboardItem({\n                // eslint-disable-next-line sonarjs/no-duplicate-string\n                \"text/plain\": new Blob([s], { type: \"text/plain\" }),\n                \"text/html\": new Blob([html], {\n                    type: \"text/html\",\n                }),\n            }),\n        ]);\n        return true;\n    };\n    const copyWithClipboardData = (s, html) => {\n        try {\n            if (e === undefined || e.clipboardData === null)\n                throw new Error(\"No clipboard data\");\n            // This might fail if we had to await the thunk\n            e?.clipboardData?.setData(\"text/plain\", s);\n            e?.clipboardData?.setData(\"text/html\", html);\n        }\n        catch {\n            if (!copyWithWrite(s, html)) {\n                copyWithWriteText(s);\n            }\n        }\n    };\n    if (window.navigator.clipboard?.write !== undefined || e?.clipboardData !== undefined) {\n        void copyWithClipboardData(copyBuffer.textPlain, copyBuffer.textHtml);\n    }\n    else {\n        void copyWithWriteText(copyBuffer.textPlain);\n    }\n    e?.preventDefault();\n}\n/**\n * Checkbox behavior:\n *\n * true + click -> unchecked\n * false + click -> checked\n * indeterminate + click -> checked\n * empty + click -> checked\n */\nexport function toggleBoolean(data) {\n    return data !== true;\n}\n//# sourceMappingURL=data-editor-fns.js.map","import { styled } from \"@linaria/react\";\nimport * as React from \"react\";\nfunction toCss(x) {\n  if (typeof x === \"string\") return x;\n  return `${x}px`;\n}\nconst _exp = /*#__PURE__*/() => p => p.innerWidth;\nconst _exp2 = /*#__PURE__*/() => p => p.innerHeight;\nconst Wrapper = /*#__PURE__*/styled('div')({\n  name: \"Wrapper\",\n  class: \"gdg-wmyidgi\",\n  propsAsIs: false,\n  vars: {\n    \"wmyidgi-0\": [_exp()],\n    \"wmyidgi-1\": [_exp2()]\n  }\n});\nexport const DataEditorContainer = p => {\n  const {\n    inWidth,\n    inHeight,\n    children,\n    ...rest\n  } = p;\n  return React.createElement(Wrapper, {\n    innerHeight: toCss(inHeight),\n    innerWidth: toCss(inWidth),\n    ...rest\n  }, children);\n};\n\n","import React from \"react\";\nconst maxPxPerMs = 2;\nconst msToFullSpeed = 1300;\nexport function useAutoscroll(scrollDirection, scrollRef, onScroll) {\n    const speedScalar = React.useRef(0);\n    const [xDir, yDir] = scrollDirection ?? [0, 0];\n    React.useEffect(() => {\n        if (xDir === 0 && yDir === 0) {\n            speedScalar.current = 0;\n            return;\n        }\n        let cancelled = false;\n        let lastTime = 0;\n        const scrollFn = (curTime) => {\n            if (cancelled)\n                return;\n            if (lastTime === 0) {\n                lastTime = curTime;\n            }\n            else {\n                const step = curTime - lastTime;\n                speedScalar.current = Math.min(1, speedScalar.current + step / msToFullSpeed);\n                const motion = speedScalar.current ** 1.618 * step * maxPxPerMs;\n                scrollRef.current?.scrollBy(xDir * motion, yDir * motion);\n                lastTime = curTime;\n                onScroll?.();\n            }\n            window.requestAnimationFrame(scrollFn);\n        };\n        window.requestAnimationFrame(scrollFn);\n        return () => {\n            cancelled = true;\n        };\n    }, [scrollRef, xDir, yDir, onScroll]);\n}\n//# sourceMappingURL=use-autoscroll.js.map","import React from \"react\";\nimport { getDataEditorTheme } from \"../common/styles.js\";\nexport function useRemAdjuster({ rowHeight: rowHeightIn, headerHeight: headerHeightIn, groupHeaderHeight: groupHeaderHeightIn, theme: themeIn, overscrollX: overscrollXIn, overscrollY: overscrollYIn, scaleToRem, remSize, }) {\n    const [rowHeight, headerHeight, groupHeaderHeight, theme, overscrollX, overscrollY] = React.useMemo(() => {\n        if (!scaleToRem || remSize === 16)\n            return [rowHeightIn, headerHeightIn, groupHeaderHeightIn, themeIn, overscrollXIn, overscrollYIn];\n        const scaler = remSize / 16;\n        const rh = rowHeightIn;\n        const bt = getDataEditorTheme();\n        return [\n            typeof rh === \"number\" ? rh * scaler : (n) => Math.ceil(rh(n) * scaler),\n            Math.ceil(headerHeightIn * scaler),\n            Math.ceil(groupHeaderHeightIn * scaler),\n            {\n                ...themeIn,\n                headerIconSize: (themeIn?.headerIconSize ?? bt.headerIconSize) * scaler,\n                cellHorizontalPadding: (themeIn?.cellHorizontalPadding ?? bt.cellHorizontalPadding) * scaler,\n                cellVerticalPadding: (themeIn?.cellVerticalPadding ?? bt.cellVerticalPadding) * scaler,\n            },\n            Math.ceil((overscrollXIn ?? 0) * scaler),\n            Math.ceil((overscrollYIn ?? 0) * scaler),\n        ];\n    }, [groupHeaderHeightIn, headerHeightIn, overscrollXIn, overscrollYIn, remSize, rowHeightIn, scaleToRem, themeIn]);\n    return { rowHeight, headerHeight, groupHeaderHeight, theme, overscrollX, overscrollY };\n}\n//# sourceMappingURL=use-rem-adjuster.js.map","import React from \"react\";\nimport { browserIsOSX } from \"../common/browser-detect.js\";\nimport { useDeepMemo } from \"../common/utils.js\";\nexport const keybindingDefaults = {\n    downFill: false,\n    rightFill: false,\n    clear: true,\n    closeOverlay: true,\n    acceptOverlayDown: true,\n    acceptOverlayUp: true,\n    acceptOverlayLeft: true,\n    acceptOverlayRight: true,\n    copy: true,\n    paste: true,\n    cut: true,\n    search: false,\n    delete: true,\n    activateCell: true,\n    scrollToSelectedCell: true,\n    goToFirstCell: true,\n    goToFirstColumn: true,\n    goToFirstRow: true,\n    goToLastCell: true,\n    goToLastColumn: true,\n    goToLastRow: true,\n    goToNextPage: true,\n    goToPreviousPage: true,\n    selectToFirstCell: true,\n    selectToFirstColumn: true,\n    selectToFirstRow: true,\n    selectToLastCell: true,\n    selectToLastColumn: true,\n    selectToLastRow: true,\n    selectAll: true,\n    selectRow: true,\n    selectColumn: true,\n    goUpCell: true,\n    goRightCell: true,\n    goDownCell: true,\n    goLeftCell: true,\n    goUpCellRetainSelection: true,\n    goRightCellRetainSelection: true,\n    goDownCellRetainSelection: true,\n    goLeftCellRetainSelection: true,\n    selectGrowUp: true,\n    selectGrowRight: true,\n    selectGrowDown: true,\n    selectGrowLeft: true,\n};\nfunction realizeKeybind(keybind, defaultVal) {\n    if (keybind === true)\n        return defaultVal;\n    if (keybind === false)\n        return \"\";\n    return keybind;\n}\nexport function realizeKeybinds(keybinds) {\n    const isOSX = browserIsOSX.value;\n    return {\n        activateCell: realizeKeybind(keybinds.activateCell, \" |Enter|shift+Enter\"),\n        clear: realizeKeybind(keybinds.clear, \"any+Escape\"),\n        closeOverlay: realizeKeybind(keybinds.closeOverlay, \"any+Escape\"),\n        acceptOverlayDown: realizeKeybind(keybinds.acceptOverlayDown, \"Enter\"),\n        acceptOverlayUp: realizeKeybind(keybinds.acceptOverlayUp, \"shift+Enter\"),\n        acceptOverlayLeft: realizeKeybind(keybinds.acceptOverlayLeft, \"shift+Tab\"),\n        acceptOverlayRight: realizeKeybind(keybinds.acceptOverlayRight, \"Tab\"),\n        copy: keybinds.copy,\n        cut: keybinds.cut,\n        delete: realizeKeybind(keybinds.delete, isOSX ? \"Backspace|Delete\" : \"Delete\"),\n        downFill: realizeKeybind(keybinds.downFill, \"primary+_68\"),\n        scrollToSelectedCell: realizeKeybind(keybinds.scrollToSelectedCell, \"primary+Enter\"),\n        goDownCell: realizeKeybind(keybinds.goDownCell, \"ArrowDown\"),\n        goDownCellRetainSelection: realizeKeybind(keybinds.goDownCellRetainSelection, \"alt+ArrowDown\"),\n        goLeftCell: realizeKeybind(keybinds.goLeftCell, \"ArrowLeft|shift+Tab\"),\n        goLeftCellRetainSelection: realizeKeybind(keybinds.goLeftCellRetainSelection, \"alt+ArrowLeft\"),\n        goRightCell: realizeKeybind(keybinds.goRightCell, \"ArrowRight|Tab\"),\n        goRightCellRetainSelection: realizeKeybind(keybinds.goRightCellRetainSelection, \"alt+ArrowRight\"),\n        goUpCell: realizeKeybind(keybinds.goUpCell, \"ArrowUp\"),\n        goUpCellRetainSelection: realizeKeybind(keybinds.goUpCellRetainSelection, \"alt+ArrowUp\"),\n        goToFirstCell: realizeKeybind(keybinds.goToFirstCell, \"primary+Home\"),\n        goToFirstColumn: realizeKeybind(keybinds.goToFirstColumn, \"Home|primary+ArrowLeft\"),\n        goToFirstRow: realizeKeybind(keybinds.goToFirstRow, \"primary+ArrowUp\"),\n        goToLastCell: realizeKeybind(keybinds.goToLastCell, \"primary+End\"),\n        goToLastColumn: realizeKeybind(keybinds.goToLastColumn, \"End|primary+ArrowRight\"),\n        goToLastRow: realizeKeybind(keybinds.goToLastRow, \"primary+ArrowDown\"),\n        goToNextPage: realizeKeybind(keybinds.goToNextPage, \"PageDown\"),\n        goToPreviousPage: realizeKeybind(keybinds.goToPreviousPage, \"PageUp\"),\n        paste: keybinds.paste,\n        rightFill: realizeKeybind(keybinds.rightFill, \"primary+_82\"),\n        search: realizeKeybind(keybinds.search, \"primary+f\"),\n        selectAll: realizeKeybind(keybinds.selectAll, \"primary+a\"),\n        selectColumn: realizeKeybind(keybinds.selectColumn, \"ctrl+ \"),\n        selectGrowDown: realizeKeybind(keybinds.selectGrowDown, \"shift+ArrowDown\"),\n        selectGrowLeft: realizeKeybind(keybinds.selectGrowLeft, \"shift+ArrowLeft\"),\n        selectGrowRight: realizeKeybind(keybinds.selectGrowRight, \"shift+ArrowRight\"),\n        selectGrowUp: realizeKeybind(keybinds.selectGrowUp, \"shift+ArrowUp\"),\n        selectRow: realizeKeybind(keybinds.selectRow, \"shift+ \"),\n        selectToFirstCell: realizeKeybind(keybinds.selectToFirstCell, \"primary+shift+Home\"),\n        selectToFirstColumn: realizeKeybind(keybinds.selectToFirstColumn, \"primary+shift+ArrowLeft\"),\n        selectToFirstRow: realizeKeybind(keybinds.selectToFirstRow, \"primary+shift+ArrowUp\"),\n        selectToLastCell: realizeKeybind(keybinds.selectToLastCell, \"primary+shift+End\"),\n        selectToLastColumn: realizeKeybind(keybinds.selectToLastColumn, \"primary+shift+ArrowRight\"),\n        selectToLastRow: realizeKeybind(keybinds.selectToLastRow, \"primary+shift+ArrowDown\"),\n    };\n}\nexport function useKeybindingsWithDefaults(keybindingsIn) {\n    const keys = useDeepMemo(keybindingsIn);\n    return React.useMemo(() => {\n        if (keys === undefined)\n            return realizeKeybinds(keybindingDefaults);\n        const withBackCompatApplied = {\n            ...keys,\n            goToNextPage: keys?.goToNextPage ?? keys?.pageDown ?? keybindingDefaults.goToNextPage,\n            goToPreviousPage: keys?.goToPreviousPage ?? keys?.pageUp ?? keybindingDefaults.goToPreviousPage,\n            goToFirstCell: keys?.goToFirstCell ?? keys?.first ?? keybindingDefaults.goToFirstCell,\n            goToLastCell: keys?.goToLastCell ?? keys?.last ?? keybindingDefaults.goToLastCell,\n            selectToFirstCell: keys?.selectToFirstCell ?? keys?.first ?? keybindingDefaults.selectToFirstCell,\n            selectToLastCell: keys?.selectToLastCell ?? keys?.last ?? keybindingDefaults.selectToLastCell,\n        };\n        return realizeKeybinds({\n            ...keybindingDefaults,\n            ...withBackCompatApplied,\n        });\n    }, [keys]);\n}\n//# sourceMappingURL=data-editor-keybindings.js.map","import React from \"react\";\nimport { whenDefined } from \"../common/utils.js\";\nexport function expandRowGroups(groups) {\n    function processGroup(group, depth, path) {\n        if (typeof group === \"number\") {\n            return {\n                headerIndex: group,\n                isCollapsed: false,\n                depth,\n                path,\n            };\n        }\n        const expandedGroup = {\n            headerIndex: group.headerIndex,\n            isCollapsed: group.isCollapsed,\n            depth,\n            path,\n        };\n        if (group.subGroups !== undefined) {\n            expandedGroup.subGroups = group.subGroups\n                .map((x, ind) => processGroup(x, depth + 1, [...path, ind]))\n                .sort((a, b) => a.headerIndex - b.headerIndex);\n        }\n        return expandedGroup;\n    }\n    const expanded = groups.map((group, i) => processGroup(group, 0, [i]));\n    // Sort the top-level expanded groups\n    return expanded.sort((a, b) => a.headerIndex - b.headerIndex);\n}\nexport function flattenRowGroups(rowGrouping, rows) {\n    const flattened = [];\n    function processGroup(group, nextHeaderIndex, skipChildren = false) {\n        let rowsInGroup = nextHeaderIndex !== null ? nextHeaderIndex - group.headerIndex : rows - group.headerIndex;\n        if (group.subGroups !== undefined) {\n            rowsInGroup = group.subGroups[0].headerIndex - group.headerIndex;\n        }\n        rowsInGroup--; // the header isn't in the group\n        flattened.push({\n            headerIndex: group.headerIndex,\n            contentIndex: -1,\n            skip: skipChildren,\n            isCollapsed: group.isCollapsed,\n            depth: group.depth,\n            path: group.path,\n            rows: rowsInGroup,\n        });\n        if (group.subGroups) {\n            for (let i = 0; i < group.subGroups.length; i++) {\n                const nextSubHeaderIndex = i < group.subGroups.length - 1 ? group.subGroups[i + 1].headerIndex : nextHeaderIndex;\n                processGroup(group.subGroups[i], nextSubHeaderIndex, skipChildren || group.isCollapsed);\n            }\n        }\n    }\n    const expandedGroups = expandRowGroups(rowGrouping.groups);\n    for (let i = 0; i < expandedGroups.length; i++) {\n        const nextHeaderIndex = i < expandedGroups.length - 1 ? expandedGroups[i + 1].headerIndex : null;\n        processGroup(expandedGroups[i], nextHeaderIndex);\n    }\n    let contentIndex = 0;\n    for (const g of flattened) {\n        g.contentIndex = contentIndex;\n        contentIndex += g.rows;\n    }\n    return flattened\n        .filter(x => x.skip === false)\n        .map(x => {\n        const { skip, ...rest } = x;\n        return rest;\n    });\n}\n// grid relative index to path and other details\nexport function mapRowIndexToPath(row, flattenedRowGroups) {\n    if (flattenedRowGroups === undefined || flattenRowGroups.length === 0)\n        return {\n            path: [row],\n            originalIndex: row,\n            isGroupHeader: false,\n            groupIndex: row,\n            contentIndex: row,\n            groupRows: -1,\n        };\n    let toGo = row;\n    for (const group of flattenedRowGroups) {\n        if (toGo === 0)\n            return {\n                path: [...group.path, -1],\n                originalIndex: group.headerIndex,\n                isGroupHeader: true,\n                groupIndex: -1,\n                contentIndex: -1,\n                groupRows: group.rows,\n            };\n        toGo--;\n        if (!group.isCollapsed) {\n            if (toGo < group.rows)\n                return {\n                    path: [...group.path, toGo],\n                    originalIndex: group.headerIndex + toGo,\n                    isGroupHeader: false,\n                    groupIndex: toGo,\n                    contentIndex: group.contentIndex + toGo,\n                    groupRows: group.rows,\n                };\n            toGo -= group.rows;\n        }\n    }\n    // this shouldn't happen\n    // this is a fucking awful code smell. Probably means the algorithm above is trash and can be done better.\n    // I suppose to eliminate this, you can treat this case as part of the overflow of the last group.\n    return {\n        path: [row],\n        originalIndex: row,\n        isGroupHeader: false,\n        groupIndex: row,\n        contentIndex: row,\n        groupRows: -1,\n    };\n}\nexport function useRowGroupingInner(options, rows, rowHeightIn, getRowThemeOverrideIn) {\n    const flattenedRowGroups = React.useMemo(() => (options === undefined ? undefined : flattenRowGroups(options, rows)), [options, rows]);\n    const effectiveRows = React.useMemo(() => {\n        if (flattenedRowGroups === undefined)\n            return rows;\n        return flattenedRowGroups.reduce((acc, group) => acc + (group.isCollapsed ? 1 : group.rows + 1), 0);\n    }, [flattenedRowGroups, rows]);\n    const rowHeight = React.useMemo(() => {\n        if (options === undefined)\n            return rowHeightIn;\n        if (typeof rowHeightIn === \"number\" && options.height === rowHeightIn)\n            return rowHeightIn;\n        return (rowIndex) => {\n            const { isGroupHeader } = mapRowIndexToPath(rowIndex, flattenedRowGroups);\n            if (isGroupHeader)\n                return options.height;\n            return typeof rowHeightIn === \"number\" ? rowHeightIn : rowHeightIn(rowIndex);\n        };\n    }, [flattenedRowGroups, options, rowHeightIn]);\n    const rowNumberMapperOut = React.useCallback((row) => {\n        if (flattenedRowGroups === undefined)\n            return row;\n        let toGo = row;\n        for (const group of flattenedRowGroups) {\n            if (toGo === 0)\n                return undefined;\n            toGo--;\n            if (!group.isCollapsed) {\n                if (toGo < group.rows)\n                    return group.contentIndex + toGo;\n                toGo -= group.rows;\n            }\n        }\n        return row;\n    }, [flattenedRowGroups]);\n    const getRowThemeOverride = whenDefined(getRowThemeOverrideIn ?? options?.themeOverride, React.useCallback((row) => {\n        if (options === undefined)\n            return getRowThemeOverrideIn?.(row, row, row);\n        if (getRowThemeOverrideIn === undefined && options?.themeOverride === undefined)\n            return undefined;\n        const { isGroupHeader, contentIndex, groupIndex } = mapRowIndexToPath(row, flattenedRowGroups);\n        if (isGroupHeader)\n            return options.themeOverride;\n        return getRowThemeOverrideIn?.(row, groupIndex, contentIndex);\n    }, [flattenedRowGroups, getRowThemeOverrideIn, options]));\n    if (options === undefined)\n        return {\n            rowHeight,\n            rows: rows,\n            rowNumberMapper: rowNumberMapperOut,\n            getRowThemeOverride,\n        };\n    return {\n        rowHeight,\n        rows: effectiveRows,\n        rowNumberMapper: rowNumberMapperOut,\n        getRowThemeOverride,\n    };\n}\n//# sourceMappingURL=row-grouping.js.map","import React from \"react\";\nimport { flattenRowGroups, mapRowIndexToPath } from \"./row-grouping.js\";\nexport function useRowGrouping(options, rows) {\n    const flattenedRowGroups = React.useMemo(() => (options === undefined ? undefined : flattenRowGroups(options, rows)), [options, rows]);\n    return {\n        getRowGroupingForPath,\n        updateRowGroupingByPath,\n        mapper: React.useCallback((itemOrRow) => {\n            if (typeof itemOrRow === \"number\") {\n                return mapRowIndexToPath(itemOrRow, flattenedRowGroups);\n            }\n            const r = mapRowIndexToPath(itemOrRow[1], flattenedRowGroups);\n            return {\n                ...r,\n                originalIndex: [itemOrRow[0], r.originalIndex],\n            }; // FIXME\n        }, [flattenedRowGroups]),\n    };\n}\nexport function updateRowGroupingByPath(rowGrouping, path, update) {\n    const [index, ...rest] = path;\n    if (rest[0] === -1) {\n        return rowGrouping.map((group, i) => (i === index ? { ...group, ...update } : group));\n    }\n    return rowGrouping.map((group, i) => i === index ? { ...group, subGroups: updateRowGroupingByPath(group.subGroups ?? [], rest, update) } : group);\n}\nexport function getRowGroupingForPath(rowGrouping, path) {\n    const [index, ...rest] = path;\n    if (rest[0] === -1) {\n        return rowGrouping[index];\n    }\n    return getRowGroupingForPath(rowGrouping[index].subGroups ?? [], rest);\n}\n//# sourceMappingURL=row-grouping-api.js.map","import * as React from \"react\";\nimport { useStateWithReactiveInput } from \"../common/utils.js\";\n// shamelessly stolen and modified from: https://github.com/theKashey/use-callback-ref\n// MIT License https://github.com/theKashey/use-callback-ref/tree/master?tab=MIT-1-ov-file#readme\nfunction useCallbackRef(initialValue, callback) {\n    const [ref] = React.useState(() => ({\n        value: initialValue,\n        callback,\n        facade: {\n            get current() {\n                return ref.value;\n            },\n            set current(value) {\n                const last = ref.value;\n                if (last !== value) {\n                    ref.value = value;\n                    ref.callback(value, last);\n                }\n            },\n        },\n    }));\n    ref.callback = callback;\n    return ref.facade;\n}\nexport function useInitialScrollOffset(scrollOffsetX, scrollOffsetY, rowHeight, visibleRegionRef, onDidScroll) {\n    const [visibleRegionY, visibleRegionTy] = React.useMemo(() => {\n        return [\n            scrollOffsetY !== undefined && typeof rowHeight === \"number\" ? Math.floor(scrollOffsetY / rowHeight) : 0,\n            scrollOffsetY !== undefined && typeof rowHeight === \"number\" ? -(scrollOffsetY % rowHeight) : 0,\n        ];\n    }, [scrollOffsetY, rowHeight]);\n    const visibleRegionInput = React.useMemo(() => ({\n        x: visibleRegionRef.current.x,\n        y: visibleRegionY,\n        width: visibleRegionRef.current.width ?? 1,\n        height: visibleRegionRef.current.height ?? 1,\n        // tx: 'TODO',\n        ty: visibleRegionTy,\n    }), [visibleRegionRef, visibleRegionTy, visibleRegionY]);\n    const [visibleRegion, setVisibleRegion, empty] = useStateWithReactiveInput(visibleRegionInput);\n    const onDidScrollRef = React.useRef(onDidScroll);\n    onDidScrollRef.current = onDidScroll;\n    const scrollRef = useCallbackRef(null, newVal => {\n        if (newVal !== null && scrollOffsetY !== undefined) {\n            newVal.scrollTop = scrollOffsetY;\n        }\n        else if (newVal !== null && scrollOffsetX !== undefined) {\n            newVal.scrollLeft = scrollOffsetX;\n        }\n    });\n    const vScrollReady = (visibleRegion.height ?? 1) > 1;\n    React.useLayoutEffect(() => {\n        if (scrollOffsetY !== undefined && scrollRef.current !== null && vScrollReady) {\n            if (scrollRef.current.scrollTop === scrollOffsetY)\n                return;\n            scrollRef.current.scrollTop = scrollOffsetY;\n            if (scrollRef.current.scrollTop !== scrollOffsetY) {\n                empty();\n            }\n            onDidScrollRef.current();\n        }\n    }, [scrollOffsetY, vScrollReady, empty, scrollRef]);\n    const hScrollReady = (visibleRegion.width ?? 1) > 1;\n    React.useLayoutEffect(() => {\n        if (scrollOffsetX !== undefined && scrollRef.current !== null && hScrollReady) {\n            if (scrollRef.current.scrollLeft === scrollOffsetX)\n                return;\n            scrollRef.current.scrollLeft = scrollOffsetX;\n            if (scrollRef.current.scrollLeft !== scrollOffsetX) {\n                empty();\n            }\n            onDidScrollRef.current();\n        }\n    }, [scrollOffsetX, hScrollReady, empty, scrollRef]);\n    return {\n        visibleRegion,\n        setVisibleRegion,\n        scrollRef,\n    };\n}\n//# sourceMappingURL=use-initial-scroll-offset.js.map","/* eslint-disable sonarjs/no-duplicate-string */\nimport * as React from \"react\";\nimport { assert, assertNever, maybe } from \"../common/support.js\";\nimport clamp from \"lodash/clamp.js\";\nimport uniq from \"lodash/uniq.js\";\nimport flatten from \"lodash/flatten.js\";\nimport range from \"lodash/range.js\";\nimport debounce from \"lodash/debounce.js\";\nimport { GridCellKind, isEditableGridCell, isReadWriteCell, InnerGridCellKind, CompactSelection, isInnerOnlyCell, isObjectEditorCallbackResult, BooleanEmpty, BooleanIndeterminate, } from \"../internal/data-grid/data-grid-types.js\";\nimport DataGridSearch, {} from \"../internal/data-grid-search/data-grid-search.js\";\nimport { browserIsOSX } from \"../common/browser-detect.js\";\nimport { getDataEditorTheme, makeCSSStyle, ThemeContext, mergeAndRealizeTheme, } from \"../common/styles.js\";\nimport { getScrollBarWidth, useEventListener, whenDefined } from \"../common/utils.js\";\nimport { isGroupEqual, itemsAreEqual, itemIsInRect, gridSelectionHasItem, getFreezeTrailingHeight, } from \"../internal/data-grid/render/data-grid-lib.js\";\nimport { GroupRename } from \"./group-rename.js\";\nimport { measureColumn, useColumnSizer } from \"./use-column-sizer.js\";\nimport { isHotkey } from \"../common/is-hotkey.js\";\nimport { useSelectionBehavior } from \"../internal/data-grid/use-selection-behavior.js\";\nimport { useCellsForSelection } from \"./use-cells-for-selection.js\";\nimport { unquote, expandSelection, copyToClipboard, toggleBoolean } from \"./data-editor-fns.js\";\nimport { DataEditorContainer } from \"../internal/data-editor-container/data-grid-container.js\";\nimport { useAutoscroll } from \"./use-autoscroll.js\";\nimport { decodeHTML } from \"./copy-paste.js\";\nimport { useRemAdjuster } from \"./use-rem-adjuster.js\";\nimport { withAlpha } from \"../internal/data-grid/color-parser.js\";\nimport { combineRects, getClosestRect, pointInRect } from \"../common/math.js\";\nimport { groupHeaderKind, outOfBoundsKind, headerKind, mouseEventArgsAreEqual, } from \"../internal/data-grid/event-args.js\";\nimport { useKeybindingsWithDefaults } from \"./data-editor-keybindings.js\";\nimport { useRowGroupingInner } from \"./row-grouping.js\";\nimport { useRowGrouping } from \"./row-grouping-api.js\";\nimport { useInitialScrollOffset } from \"./use-initial-scroll-offset.js\";\nconst DataGridOverlayEditor = React.lazy(async () => await import(\"../internal/data-grid-overlay-editor/data-grid-overlay-editor.js\"));\n// There must be a better way\nlet idCounter = 0;\nfunction getSpanStops(cells) {\n    return uniq(flatten(flatten(cells)\n        .filter(c => c.span !== undefined)\n        .map(c => range((c.span?.[0] ?? 0) + 1, (c.span?.[1] ?? 0) + 1))));\n}\nfunction shiftSelection(input, offset) {\n    if (input === undefined || offset === 0 || (input.columns.length === 0 && input.current === undefined))\n        return input;\n    return {\n        current: input.current === undefined\n            ? undefined\n            : {\n                cell: [input.current.cell[0] + offset, input.current.cell[1]],\n                range: {\n                    ...input.current.range,\n                    x: input.current.range.x + offset,\n                },\n                rangeStack: input.current.rangeStack.map(r => ({\n                    ...r,\n                    x: r.x + offset,\n                })),\n            },\n        rows: input.rows,\n        columns: input.columns.offset(offset),\n    };\n}\nconst loadingCell = {\n    kind: GridCellKind.Loading,\n    allowOverlay: false,\n};\nconst emptyGridSelection = {\n    columns: CompactSelection.empty(),\n    rows: CompactSelection.empty(),\n    current: undefined,\n};\nconst DataEditorImpl = (p, forwardedRef) => {\n    const [gridSelectionInner, setGridSelectionInner] = React.useState(emptyGridSelection);\n    const [overlay, setOverlay] = React.useState();\n    const searchInputRef = React.useRef(null);\n    const canvasRef = React.useRef(null);\n    const [mouseState, setMouseState] = React.useState();\n    const lastSent = React.useRef();\n    const safeWindow = typeof window === \"undefined\" ? null : window;\n    const { imageEditorOverride, getRowThemeOverride: getRowThemeOverrideIn, markdownDivCreateNode, width, height, columns: columnsIn, rows: rowsIn, getCellContent, onCellClicked, onCellActivated, onFillPattern, onFinishedEditing, coercePasteValue, drawHeader: drawHeaderIn, drawCell: drawCellIn, editorBloom, onHeaderClicked, onColumnProposeMove, rangeSelectionColumnSpanning = true, spanRangeBehavior = \"default\", onGroupHeaderClicked, onCellContextMenu, className, onHeaderContextMenu, getCellsForSelection: getCellsForSelectionIn, onGroupHeaderContextMenu, onGroupHeaderRenamed, onCellEdited, onCellsEdited, onSearchResultsChanged: onSearchResultsChangedIn, searchResults, onSearchValueChange, searchValue, onKeyDown: onKeyDownIn, onKeyUp: onKeyUpIn, keybindings: keybindingsIn, editOnType = true, onRowAppended, onColumnMoved, validateCell: validateCellIn, highlightRegions: highlightRegionsIn, rangeSelect = \"rect\", columnSelect = \"multi\", rowSelect = \"multi\", rangeSelectionBlending = \"exclusive\", columnSelectionBlending = \"exclusive\", rowSelectionBlending = \"exclusive\", onDelete: onDeleteIn, onDragStart, onMouseMove, onPaste, copyHeaders = false, freezeColumns = 0, cellActivationBehavior = \"second-click\", rowSelectionMode = \"auto\", onHeaderMenuClick, onHeaderIndicatorClick, getGroupDetails, rowGrouping, onSearchClose: onSearchCloseIn, onItemHovered, onSelectionCleared, showSearch: showSearchIn, onVisibleRegionChanged, gridSelection: gridSelectionOuter, onGridSelectionChange, minColumnWidth: minColumnWidthIn = 50, maxColumnWidth: maxColumnWidthIn = 500, maxColumnAutoWidth: maxColumnAutoWidthIn, provideEditor, trailingRowOptions, freezeTrailingRows = 0, allowedFillDirections = \"orthogonal\", scrollOffsetX, scrollOffsetY, verticalBorder, onDragOverCell, onDrop, onColumnResize: onColumnResizeIn, onColumnResizeEnd: onColumnResizeEndIn, onColumnResizeStart: onColumnResizeStartIn, customRenderers: additionalRenderers, fillHandle, experimental, fixedShadowX, fixedShadowY, headerIcons, imageWindowLoader, initialSize, isDraggable, onDragLeave, onRowMoved, overscrollX: overscrollXIn, overscrollY: overscrollYIn, preventDiagonalScrolling, rightElement, rightElementProps, trapFocus = false, smoothScrollX, smoothScrollY, scaleToRem = false, rowHeight: rowHeightIn = 34, headerHeight: headerHeightIn = 36, groupHeaderHeight: groupHeaderHeightIn = headerHeightIn, theme: themeIn, isOutsideClick, renderers, resizeIndicator, scrollToActiveCell = true, drawFocusRing: drawFocusRingIn = true, } = p;\n    const drawFocusRing = drawFocusRingIn === \"no-editor\" ? overlay === undefined : drawFocusRingIn;\n    const rowMarkersObj = typeof p.rowMarkers === \"string\" ? undefined : p.rowMarkers;\n    const rowMarkers = rowMarkersObj?.kind ?? p.rowMarkers ?? \"none\";\n    const rowMarkerWidthRaw = rowMarkersObj?.width ?? p.rowMarkerWidth;\n    const rowMarkerStartIndex = rowMarkersObj?.startIndex ?? p.rowMarkerStartIndex ?? 1;\n    const rowMarkerTheme = rowMarkersObj?.theme ?? p.rowMarkerTheme;\n    const headerRowMarkerTheme = rowMarkersObj?.headerTheme;\n    const headerRowMarkerAlwaysVisible = rowMarkersObj?.headerAlwaysVisible;\n    const headerRowMarkerDisabled = rowSelect !== \"multi\";\n    const rowMarkerCheckboxStyle = rowMarkersObj?.checkboxStyle ?? \"square\";\n    const minColumnWidth = Math.max(minColumnWidthIn, 20);\n    const maxColumnWidth = Math.max(maxColumnWidthIn, minColumnWidth);\n    const maxColumnAutoWidth = Math.max(maxColumnAutoWidthIn ?? maxColumnWidth, minColumnWidth);\n    const docStyle = React.useMemo(() => {\n        if (typeof window === \"undefined\")\n            return { fontSize: \"16px\" };\n        return window.getComputedStyle(document.documentElement);\n    }, []);\n    const { rows, rowNumberMapper, rowHeight: rowHeightPostGrouping, getRowThemeOverride, } = useRowGroupingInner(rowGrouping, rowsIn, rowHeightIn, getRowThemeOverrideIn);\n    const remSize = React.useMemo(() => Number.parseFloat(docStyle.fontSize), [docStyle]);\n    const { rowHeight, headerHeight, groupHeaderHeight, theme, overscrollX, overscrollY } = useRemAdjuster({\n        groupHeaderHeight: groupHeaderHeightIn,\n        headerHeight: headerHeightIn,\n        overscrollX: overscrollXIn,\n        overscrollY: overscrollYIn,\n        remSize,\n        rowHeight: rowHeightPostGrouping,\n        scaleToRem,\n        theme: themeIn,\n    });\n    const keybindings = useKeybindingsWithDefaults(keybindingsIn);\n    const rowMarkerWidth = rowMarkerWidthRaw ?? (rowsIn > 10000 ? 48 : rowsIn > 1000 ? 44 : rowsIn > 100 ? 36 : 32);\n    const hasRowMarkers = rowMarkers !== \"none\";\n    const rowMarkerOffset = hasRowMarkers ? 1 : 0;\n    const showTrailingBlankRow = onRowAppended !== undefined;\n    const lastRowSticky = trailingRowOptions?.sticky === true;\n    const [showSearchInner, setShowSearchInner] = React.useState(false);\n    const showSearch = showSearchIn ?? showSearchInner;\n    const onSearchClose = React.useCallback(() => {\n        if (onSearchCloseIn !== undefined) {\n            onSearchCloseIn();\n        }\n        else {\n            setShowSearchInner(false);\n        }\n    }, [onSearchCloseIn]);\n    const gridSelectionOuterMangled = React.useMemo(() => {\n        return gridSelectionOuter === undefined ? undefined : shiftSelection(gridSelectionOuter, rowMarkerOffset);\n    }, [gridSelectionOuter, rowMarkerOffset]);\n    const gridSelection = gridSelectionOuterMangled ?? gridSelectionInner;\n    const abortControllerRef = React.useRef();\n    if (abortControllerRef.current === undefined)\n        abortControllerRef.current = new AbortController();\n    React.useEffect(() => () => abortControllerRef?.current.abort(), []);\n    const [getCellsForSelection, getCellsForSeletionDirect] = useCellsForSelection(getCellsForSelectionIn, getCellContent, rowMarkerOffset, abortControllerRef.current, rows);\n    const validateCell = React.useCallback((cell, newValue, prevValue) => {\n        if (validateCellIn === undefined)\n            return true;\n        const item = [cell[0] - rowMarkerOffset, cell[1]];\n        return validateCellIn?.(item, newValue, prevValue);\n    }, [rowMarkerOffset, validateCellIn]);\n    const expectedExternalGridSelection = React.useRef(gridSelectionOuter);\n    const setGridSelection = React.useCallback((newVal, expand) => {\n        if (expand) {\n            newVal = expandSelection(newVal, getCellsForSelection, rowMarkerOffset, spanRangeBehavior, abortControllerRef.current);\n        }\n        if (onGridSelectionChange !== undefined) {\n            expectedExternalGridSelection.current = shiftSelection(newVal, -rowMarkerOffset);\n            onGridSelectionChange(expectedExternalGridSelection.current);\n        }\n        else {\n            setGridSelectionInner(newVal);\n        }\n    }, [onGridSelectionChange, getCellsForSelection, rowMarkerOffset, spanRangeBehavior]);\n    const onColumnResize = whenDefined(onColumnResizeIn, React.useCallback((_, w, ind, wg) => {\n        onColumnResizeIn?.(columnsIn[ind - rowMarkerOffset], w, ind - rowMarkerOffset, wg);\n    }, [onColumnResizeIn, rowMarkerOffset, columnsIn]));\n    const onColumnResizeEnd = whenDefined(onColumnResizeEndIn, React.useCallback((_, w, ind, wg) => {\n        onColumnResizeEndIn?.(columnsIn[ind - rowMarkerOffset], w, ind - rowMarkerOffset, wg);\n    }, [onColumnResizeEndIn, rowMarkerOffset, columnsIn]));\n    const onColumnResizeStart = whenDefined(onColumnResizeStartIn, React.useCallback((_, w, ind, wg) => {\n        onColumnResizeStartIn?.(columnsIn[ind - rowMarkerOffset], w, ind - rowMarkerOffset, wg);\n    }, [onColumnResizeStartIn, rowMarkerOffset, columnsIn]));\n    const drawHeader = whenDefined(drawHeaderIn, React.useCallback((args, draw) => {\n        return drawHeaderIn?.({ ...args, columnIndex: args.columnIndex - rowMarkerOffset }, draw) ?? false;\n    }, [drawHeaderIn, rowMarkerOffset]));\n    const drawCell = whenDefined(drawCellIn, React.useCallback((args, draw) => {\n        return drawCellIn?.({ ...args, col: args.col - rowMarkerOffset }, draw) ?? false;\n    }, [drawCellIn, rowMarkerOffset]));\n    const onDelete = React.useCallback(sel => {\n        if (onDeleteIn !== undefined) {\n            const result = onDeleteIn(shiftSelection(sel, -rowMarkerOffset));\n            if (typeof result === \"boolean\") {\n                return result;\n            }\n            return shiftSelection(result, rowMarkerOffset);\n        }\n        return true;\n    }, [onDeleteIn, rowMarkerOffset]);\n    const [setCurrent, setSelectedRows, setSelectedColumns] = useSelectionBehavior(gridSelection, setGridSelection, rangeSelectionBlending, columnSelectionBlending, rowSelectionBlending, rangeSelect, rangeSelectionColumnSpanning);\n    const mergedTheme = React.useMemo(() => {\n        return mergeAndRealizeTheme(getDataEditorTheme(), theme);\n    }, [theme]);\n    const [clientSize, setClientSize] = React.useState([0, 0, 0]);\n    const rendererMap = React.useMemo(() => {\n        if (renderers === undefined)\n            return {};\n        const result = {};\n        for (const r of renderers) {\n            result[r.kind] = r;\n        }\n        return result;\n    }, [renderers]);\n    const getCellRenderer = React.useCallback((cell) => {\n        if (cell.kind !== GridCellKind.Custom) {\n            return rendererMap[cell.kind];\n        }\n        return additionalRenderers?.find(x => x.isMatch(cell));\n    }, [additionalRenderers, rendererMap]);\n    // eslint-disable-next-line prefer-const\n    let { sizedColumns: columns, nonGrowWidth } = useColumnSizer(columnsIn, rows, getCellsForSeletionDirect, clientSize[0] - (rowMarkerOffset === 0 ? 0 : rowMarkerWidth) - clientSize[2], minColumnWidth, maxColumnAutoWidth, mergedTheme, getCellRenderer, abortControllerRef.current);\n    if (rowMarkers !== \"none\")\n        nonGrowWidth += rowMarkerWidth;\n    const enableGroups = React.useMemo(() => {\n        return columns.some(c => c.group !== undefined);\n    }, [columns]);\n    const totalHeaderHeight = enableGroups ? headerHeight + groupHeaderHeight : headerHeight;\n    const numSelectedRows = gridSelection.rows.length;\n    const rowMarkerChecked = rowMarkers === \"none\" ? undefined : numSelectedRows === 0 ? false : numSelectedRows === rows ? true : undefined;\n    const mangledCols = React.useMemo(() => {\n        if (rowMarkers === \"none\")\n            return columns;\n        return [\n            {\n                title: \"\",\n                width: rowMarkerWidth,\n                icon: undefined,\n                hasMenu: false,\n                style: \"normal\",\n                themeOverride: rowMarkerTheme,\n                rowMarker: rowMarkerCheckboxStyle,\n                rowMarkerChecked,\n                headerRowMarkerTheme,\n                headerRowMarkerAlwaysVisible,\n                headerRowMarkerDisabled,\n            },\n            ...columns,\n        ];\n    }, [\n        rowMarkers,\n        columns,\n        rowMarkerWidth,\n        rowMarkerTheme,\n        rowMarkerCheckboxStyle,\n        rowMarkerChecked,\n        headerRowMarkerTheme,\n        headerRowMarkerAlwaysVisible,\n        headerRowMarkerDisabled,\n    ]);\n    const visibleRegionRef = React.useRef({\n        height: 1,\n        width: 1,\n        x: 0,\n        y: 0,\n    });\n    const hasJustScrolled = React.useRef(false);\n    const { setVisibleRegion, visibleRegion, scrollRef } = useInitialScrollOffset(scrollOffsetX, scrollOffsetY, rowHeight, visibleRegionRef, () => (hasJustScrolled.current = true));\n    visibleRegionRef.current = visibleRegion;\n    const cellXOffset = visibleRegion.x + rowMarkerOffset;\n    const cellYOffset = visibleRegion.y;\n    const gridRef = React.useRef(null);\n    const focus = React.useCallback((immediate) => {\n        if (immediate === true) {\n            gridRef.current?.focus();\n        }\n        else {\n            window.requestAnimationFrame(() => {\n                gridRef.current?.focus();\n            });\n        }\n    }, []);\n    const mangledRows = showTrailingBlankRow ? rows + 1 : rows;\n    const mangledOnCellsEdited = React.useCallback((items) => {\n        const mangledItems = rowMarkerOffset === 0\n            ? items\n            : items.map(x => ({\n                ...x,\n                location: [x.location[0] - rowMarkerOffset, x.location[1]],\n            }));\n        const r = onCellsEdited?.(mangledItems);\n        if (r !== true) {\n            for (const i of mangledItems)\n                onCellEdited?.(i.location, i.value);\n        }\n        return r;\n    }, [onCellEdited, onCellsEdited, rowMarkerOffset]);\n    const [fillHighlightRegion, setFillHighlightRegion] = React.useState();\n    // this will generally be undefined triggering the memo less often\n    const highlightRange = gridSelection.current !== undefined &&\n        gridSelection.current.range.width * gridSelection.current.range.height > 1\n        ? gridSelection.current.range\n        : undefined;\n    const highlightFocus = drawFocusRing ? gridSelection.current?.cell : undefined;\n    const highlightFocusCol = highlightFocus?.[0];\n    const highlightFocusRow = highlightFocus?.[1];\n    const highlightRegions = React.useMemo(() => {\n        if ((highlightRegionsIn === undefined || highlightRegionsIn.length === 0) &&\n            (highlightRange ?? highlightFocusCol ?? highlightFocusRow ?? fillHighlightRegion) === undefined)\n            return undefined;\n        const regions = [];\n        if (highlightRegionsIn !== undefined) {\n            for (const r of highlightRegionsIn) {\n                const maxWidth = mangledCols.length - r.range.x - rowMarkerOffset;\n                if (maxWidth > 0) {\n                    regions.push({\n                        color: r.color,\n                        range: {\n                            ...r.range,\n                            x: r.range.x + rowMarkerOffset,\n                            width: Math.min(maxWidth, r.range.width),\n                        },\n                        style: r.style,\n                    });\n                }\n            }\n        }\n        if (fillHighlightRegion !== undefined) {\n            regions.push({\n                color: withAlpha(mergedTheme.accentColor, 0),\n                range: fillHighlightRegion,\n                style: \"dashed\",\n            });\n        }\n        if (highlightRange !== undefined) {\n            regions.push({\n                color: withAlpha(mergedTheme.accentColor, 0.5),\n                range: highlightRange,\n                style: \"solid-outline\",\n            });\n        }\n        if (highlightFocusCol !== undefined && highlightFocusRow !== undefined) {\n            regions.push({\n                color: mergedTheme.accentColor,\n                range: {\n                    x: highlightFocusCol,\n                    y: highlightFocusRow,\n                    width: 1,\n                    height: 1,\n                },\n                style: \"solid-outline\",\n            });\n        }\n        return regions.length > 0 ? regions : undefined;\n    }, [\n        fillHighlightRegion,\n        highlightRange,\n        highlightFocusCol,\n        highlightFocusRow,\n        highlightRegionsIn,\n        mangledCols.length,\n        mergedTheme.accentColor,\n        rowMarkerOffset,\n    ]);\n    const mangledColsRef = React.useRef(mangledCols);\n    mangledColsRef.current = mangledCols;\n    const getMangledCellContent = React.useCallback(([col, row], forceStrict = false) => {\n        const isTrailing = showTrailingBlankRow && row === mangledRows - 1;\n        const isRowMarkerCol = col === 0 && hasRowMarkers;\n        if (isRowMarkerCol) {\n            if (isTrailing) {\n                return loadingCell;\n            }\n            const mappedRow = rowNumberMapper(row);\n            if (mappedRow === undefined)\n                return loadingCell;\n            return {\n                kind: InnerGridCellKind.Marker,\n                allowOverlay: false,\n                checkboxStyle: rowMarkerCheckboxStyle,\n                checked: gridSelection?.rows.hasIndex(row) === true,\n                markerKind: rowMarkers === \"clickable-number\" ? \"number\" : rowMarkers,\n                row: rowMarkerStartIndex + mappedRow,\n                drawHandle: onRowMoved !== undefined,\n                cursor: rowMarkers === \"clickable-number\" ? \"pointer\" : undefined,\n            };\n        }\n        else if (isTrailing) {\n            //If the grid is empty, we will return text\n            const isFirst = col === rowMarkerOffset;\n            const maybeFirstColumnHint = isFirst ? trailingRowOptions?.hint ?? \"\" : \"\";\n            const c = mangledColsRef.current[col];\n            if (c?.trailingRowOptions?.disabled === true) {\n                return loadingCell;\n            }\n            else {\n                const hint = c?.trailingRowOptions?.hint ?? maybeFirstColumnHint;\n                const icon = c?.trailingRowOptions?.addIcon ?? trailingRowOptions?.addIcon;\n                return {\n                    kind: InnerGridCellKind.NewRow,\n                    hint,\n                    allowOverlay: false,\n                    icon,\n                };\n            }\n        }\n        else {\n            const outerCol = col - rowMarkerOffset;\n            if (forceStrict || experimental?.strict === true) {\n                const vr = visibleRegionRef.current;\n                const isOutsideMainArea = vr.x > outerCol ||\n                    outerCol > vr.x + vr.width ||\n                    vr.y > row ||\n                    row > vr.y + vr.height ||\n                    row >= rowsRef.current;\n                const isSelected = outerCol === vr.extras?.selected?.[0] && row === vr.extras?.selected[1];\n                let isInFreezeArea = false;\n                if (vr.extras?.freezeRegions !== undefined) {\n                    for (const fr of vr.extras.freezeRegions) {\n                        if (pointInRect(fr, outerCol, row)) {\n                            isInFreezeArea = true;\n                            break;\n                        }\n                    }\n                }\n                if (isOutsideMainArea && !isSelected && !isInFreezeArea) {\n                    return loadingCell;\n                }\n            }\n            let result = getCellContent([outerCol, row]);\n            if (rowMarkerOffset !== 0 && result.span !== undefined) {\n                result = {\n                    ...result,\n                    span: [result.span[0] + rowMarkerOffset, result.span[1] + rowMarkerOffset],\n                };\n            }\n            return result;\n        }\n    }, [\n        showTrailingBlankRow,\n        mangledRows,\n        hasRowMarkers,\n        rowNumberMapper,\n        rowMarkerCheckboxStyle,\n        gridSelection?.rows,\n        rowMarkers,\n        rowMarkerStartIndex,\n        onRowMoved,\n        rowMarkerOffset,\n        trailingRowOptions?.hint,\n        trailingRowOptions?.addIcon,\n        experimental?.strict,\n        getCellContent,\n    ]);\n    const mangledGetGroupDetails = React.useCallback(group => {\n        let result = getGroupDetails?.(group) ?? { name: group };\n        if (onGroupHeaderRenamed !== undefined && group !== \"\") {\n            result = {\n                // FIXME: Mutate\n                icon: result.icon,\n                name: result.name,\n                overrideTheme: result.overrideTheme,\n                actions: [\n                    ...(result.actions ?? []),\n                    {\n                        title: \"Rename\",\n                        icon: \"renameIcon\",\n                        onClick: e => setRenameGroup({\n                            group: result.name,\n                            bounds: e.bounds,\n                        }),\n                    },\n                ],\n            };\n        }\n        return result;\n    }, [getGroupDetails, onGroupHeaderRenamed]);\n    const setOverlaySimple = React.useCallback((val) => {\n        const [col, row] = val.cell;\n        const column = mangledCols[col];\n        const groupTheme = column?.group !== undefined ? mangledGetGroupDetails(column.group)?.overrideTheme : undefined;\n        const colTheme = column?.themeOverride;\n        const rowTheme = getRowThemeOverride?.(row);\n        setOverlay({\n            ...val,\n            theme: mergeAndRealizeTheme(mergedTheme, groupTheme, colTheme, rowTheme, val.content.themeOverride),\n        });\n    }, [getRowThemeOverride, mangledCols, mangledGetGroupDetails, mergedTheme]);\n    const reselect = React.useCallback((bounds, fromKeyboard, initialValue) => {\n        if (gridSelection.current === undefined)\n            return;\n        const [col, row] = gridSelection.current.cell;\n        const c = getMangledCellContent([col, row]);\n        if (c.kind !== GridCellKind.Boolean && c.allowOverlay) {\n            let content = c;\n            if (initialValue !== undefined) {\n                switch (content.kind) {\n                    case GridCellKind.Number: {\n                        const d = maybe(() => (initialValue === \"-\" ? -0 : Number.parseFloat(initialValue)), 0);\n                        content = {\n                            ...content,\n                            data: Number.isNaN(d) ? 0 : d,\n                        };\n                        break;\n                    }\n                    case GridCellKind.Text:\n                    case GridCellKind.Markdown:\n                    case GridCellKind.Uri:\n                        content = {\n                            ...content,\n                            data: initialValue,\n                        };\n                        break;\n                }\n            }\n            setOverlaySimple({\n                target: bounds,\n                content,\n                initialValue,\n                cell: [col, row],\n                highlight: initialValue === undefined,\n                forceEditMode: initialValue !== undefined,\n            });\n        }\n        else if (c.kind === GridCellKind.Boolean && fromKeyboard && c.readonly !== true) {\n            mangledOnCellsEdited([\n                {\n                    location: gridSelection.current.cell,\n                    value: {\n                        ...c,\n                        data: toggleBoolean(c.data),\n                    },\n                },\n            ]);\n            gridRef.current?.damage([{ cell: gridSelection.current.cell }]);\n        }\n    }, [getMangledCellContent, gridSelection, mangledOnCellsEdited, setOverlaySimple]);\n    const focusOnRowFromTrailingBlankRow = React.useCallback((col, row) => {\n        const bounds = gridRef.current?.getBounds(col, row);\n        if (bounds === undefined || scrollRef.current === null) {\n            return;\n        }\n        const content = getMangledCellContent([col, row]);\n        if (!content.allowOverlay) {\n            return;\n        }\n        setOverlaySimple({\n            target: bounds,\n            content,\n            initialValue: undefined,\n            highlight: true,\n            cell: [col, row],\n            forceEditMode: true,\n        });\n    }, [getMangledCellContent, scrollRef, setOverlaySimple]);\n    const scrollTo = React.useCallback((col, row, dir = \"both\", paddingX = 0, paddingY = 0, options = undefined) => {\n        if (scrollRef.current !== null) {\n            const grid = gridRef.current;\n            const canvas = canvasRef.current;\n            const trueCol = typeof col !== \"number\" ? (col.unit === \"cell\" ? col.amount : undefined) : col;\n            const trueRow = typeof row !== \"number\" ? (row.unit === \"cell\" ? row.amount : undefined) : row;\n            const desiredX = typeof col !== \"number\" && col.unit === \"px\" ? col.amount : undefined;\n            const desiredY = typeof row !== \"number\" && row.unit === \"px\" ? row.amount : undefined;\n            if (grid !== null && canvas !== null) {\n                let targetRect = {\n                    x: 0,\n                    y: 0,\n                    width: 0,\n                    height: 0,\n                };\n                let scrollX = 0;\n                let scrollY = 0;\n                if (trueCol !== undefined || trueRow !== undefined) {\n                    targetRect = grid.getBounds((trueCol ?? 0) + rowMarkerOffset, trueRow ?? 0) ?? targetRect;\n                    if (targetRect.width === 0 || targetRect.height === 0)\n                        return;\n                }\n                const scrollBounds = canvas.getBoundingClientRect();\n                const scale = scrollBounds.width / canvas.offsetWidth;\n                if (desiredX !== undefined) {\n                    targetRect = {\n                        ...targetRect,\n                        x: desiredX - scrollBounds.left - scrollRef.current.scrollLeft,\n                        width: 1,\n                    };\n                }\n                if (desiredY !== undefined) {\n                    targetRect = {\n                        ...targetRect,\n                        y: desiredY + scrollBounds.top - scrollRef.current.scrollTop,\n                        height: 1,\n                    };\n                }\n                if (targetRect !== undefined) {\n                    const bounds = {\n                        x: targetRect.x - paddingX,\n                        y: targetRect.y - paddingY,\n                        width: targetRect.width + 2 * paddingX,\n                        height: targetRect.height + 2 * paddingY,\n                    };\n                    let frozenWidth = 0;\n                    for (let i = 0; i < freezeColumns; i++) {\n                        frozenWidth += columns[i].width;\n                    }\n                    let trailingRowHeight = 0;\n                    const freezeTrailingRowsEffective = freezeTrailingRows + (lastRowSticky ? 1 : 0);\n                    if (freezeTrailingRowsEffective > 0) {\n                        trailingRowHeight = getFreezeTrailingHeight(mangledRows, freezeTrailingRowsEffective, rowHeight);\n                    }\n                    // scrollBounds is already scaled\n                    let sLeft = frozenWidth * scale + scrollBounds.left + rowMarkerOffset * rowMarkerWidth * scale;\n                    let sRight = scrollBounds.right;\n                    let sTop = scrollBounds.top + totalHeaderHeight * scale;\n                    let sBottom = scrollBounds.bottom - trailingRowHeight * scale;\n                    const minx = targetRect.width + paddingX * 2;\n                    switch (options?.hAlign) {\n                        case \"start\":\n                            sRight = sLeft + minx;\n                            break;\n                        case \"end\":\n                            sLeft = sRight - minx;\n                            break;\n                        case \"center\":\n                            sLeft = Math.floor((sLeft + sRight) / 2) - minx / 2;\n                            sRight = sLeft + minx;\n                            break;\n                    }\n                    const miny = targetRect.height + paddingY * 2;\n                    switch (options?.vAlign) {\n                        case \"start\":\n                            sBottom = sTop + miny;\n                            break;\n                        case \"end\":\n                            sTop = sBottom - miny;\n                            break;\n                        case \"center\":\n                            sTop = Math.floor((sTop + sBottom) / 2) - miny / 2;\n                            sBottom = sTop + miny;\n                            break;\n                    }\n                    if (sLeft > bounds.x) {\n                        scrollX = bounds.x - sLeft;\n                    }\n                    else if (sRight < bounds.x + bounds.width) {\n                        scrollX = bounds.x + bounds.width - sRight;\n                    }\n                    if (sTop > bounds.y) {\n                        scrollY = bounds.y - sTop;\n                    }\n                    else if (sBottom < bounds.y + bounds.height) {\n                        scrollY = bounds.y + bounds.height - sBottom;\n                    }\n                    if (dir === \"vertical\" || (typeof col === \"number\" && col < freezeColumns)) {\n                        scrollX = 0;\n                    }\n                    else if (dir === \"horizontal\" ||\n                        (typeof row === \"number\" && row >= mangledRows - freezeTrailingRowsEffective)) {\n                        scrollY = 0;\n                    }\n                    if (scrollX !== 0 || scrollY !== 0) {\n                        // Remove scaling as scrollTo method is unaffected by transform scale.\n                        if (scale !== 1) {\n                            scrollX /= scale;\n                            scrollY /= scale;\n                        }\n                        scrollRef.current.scrollTo(scrollX + scrollRef.current.scrollLeft, scrollY + scrollRef.current.scrollTop);\n                    }\n                }\n            }\n        }\n    }, [\n        rowMarkerOffset,\n        freezeTrailingRows,\n        rowMarkerWidth,\n        scrollRef,\n        totalHeaderHeight,\n        freezeColumns,\n        columns,\n        mangledRows,\n        lastRowSticky,\n        rowHeight,\n    ]);\n    const focusCallback = React.useRef(focusOnRowFromTrailingBlankRow);\n    const getCellContentRef = React.useRef(getCellContent);\n    const rowsRef = React.useRef(rows);\n    focusCallback.current = focusOnRowFromTrailingBlankRow;\n    getCellContentRef.current = getCellContent;\n    rowsRef.current = rows;\n    const appendRow = React.useCallback(async (col, openOverlay = true) => {\n        const c = mangledCols[col];\n        if (c?.trailingRowOptions?.disabled === true) {\n            return;\n        }\n        const appendResult = onRowAppended?.();\n        let r = undefined;\n        let bottom = true;\n        if (appendResult !== undefined) {\n            r = await appendResult;\n            if (r === \"top\")\n                bottom = false;\n            if (typeof r === \"number\")\n                bottom = false;\n        }\n        let backoff = 0;\n        const doFocus = () => {\n            if (rowsRef.current <= rows) {\n                if (backoff < 500) {\n                    window.setTimeout(doFocus, backoff);\n                }\n                backoff = 50 + backoff * 2;\n                return;\n            }\n            const row = typeof r === \"number\" ? r : bottom ? rows : 0;\n            scrollToRef.current(col - rowMarkerOffset, row);\n            setCurrent({\n                cell: [col, row],\n                range: {\n                    x: col,\n                    y: row,\n                    width: 1,\n                    height: 1,\n                },\n            }, false, false, \"edit\");\n            const cell = getCellContentRef.current([col - rowMarkerOffset, row]);\n            if (cell.allowOverlay && isReadWriteCell(cell) && cell.readonly !== true && openOverlay) {\n                // wait for scroll to have a chance to process\n                window.setTimeout(() => {\n                    focusCallback.current(col, row);\n                }, 0);\n            }\n        };\n        // Queue up to allow the consumer to react to the event and let us check if they did\n        doFocus();\n    }, [mangledCols, onRowAppended, rowMarkerOffset, rows, setCurrent]);\n    const getCustomNewRowTargetColumn = React.useCallback((col) => {\n        const customTargetColumn = columns[col]?.trailingRowOptions?.targetColumn ?? trailingRowOptions?.targetColumn;\n        if (typeof customTargetColumn === \"number\") {\n            const customTargetOffset = hasRowMarkers ? 1 : 0;\n            return customTargetColumn + customTargetOffset;\n        }\n        if (typeof customTargetColumn === \"object\") {\n            const maybeIndex = columnsIn.indexOf(customTargetColumn);\n            if (maybeIndex >= 0) {\n                const customTargetOffset = hasRowMarkers ? 1 : 0;\n                return maybeIndex + customTargetOffset;\n            }\n        }\n        return undefined;\n    }, [columns, columnsIn, hasRowMarkers, trailingRowOptions?.targetColumn]);\n    const lastSelectedRowRef = React.useRef();\n    const lastSelectedColRef = React.useRef();\n    const themeForCell = React.useCallback((cell, pos) => {\n        const [col, row] = pos;\n        return mergeAndRealizeTheme(mergedTheme, mangledCols[col]?.themeOverride, getRowThemeOverride?.(row), cell.themeOverride);\n    }, [getRowThemeOverride, mangledCols, mergedTheme]);\n    const { mapper } = useRowGrouping(rowGrouping, rowsIn);\n    const rowGroupingNavBehavior = rowGrouping?.navigationBehavior;\n    const handleSelect = React.useCallback((args) => {\n        const isMultiKey = browserIsOSX.value ? args.metaKey : args.ctrlKey;\n        const isMultiRow = isMultiKey && rowSelect === \"multi\";\n        const isMultiCol = isMultiKey && columnSelect === \"multi\";\n        const [col, row] = args.location;\n        const selectedColumns = gridSelection.columns;\n        const selectedRows = gridSelection.rows;\n        const [cellCol, cellRow] = gridSelection.current?.cell ?? [];\n        // eslint-disable-next-line unicorn/prefer-switch\n        if (args.kind === \"cell\") {\n            lastSelectedColRef.current = undefined;\n            lastMouseSelectLocation.current = [col, row];\n            if (col === 0 && hasRowMarkers) {\n                if ((showTrailingBlankRow === true && row === rows) ||\n                    rowMarkers === \"number\" ||\n                    rowSelect === \"none\")\n                    return;\n                const markerCell = getMangledCellContent(args.location);\n                if (markerCell.kind !== InnerGridCellKind.Marker) {\n                    return;\n                }\n                if (onRowMoved !== undefined) {\n                    const renderer = getCellRenderer(markerCell);\n                    assert(renderer?.kind === InnerGridCellKind.Marker);\n                    const postClick = renderer?.onClick?.({\n                        ...args,\n                        cell: markerCell,\n                        posX: args.localEventX,\n                        posY: args.localEventY,\n                        bounds: args.bounds,\n                        theme: themeForCell(markerCell, args.location),\n                        preventDefault: () => undefined,\n                    });\n                    if (postClick === undefined || postClick.checked === markerCell.checked)\n                        return;\n                }\n                setOverlay(undefined);\n                focus();\n                const isSelected = selectedRows.hasIndex(row);\n                const lastHighlighted = lastSelectedRowRef.current;\n                if (rowSelect === \"multi\" &&\n                    (args.shiftKey || args.isLongTouch === true) &&\n                    lastHighlighted !== undefined &&\n                    selectedRows.hasIndex(lastHighlighted)) {\n                    const newSlice = [Math.min(lastHighlighted, row), Math.max(lastHighlighted, row) + 1];\n                    if (isMultiRow || rowSelectionMode === \"multi\") {\n                        setSelectedRows(undefined, newSlice, true);\n                    }\n                    else {\n                        setSelectedRows(CompactSelection.fromSingleSelection(newSlice), undefined, isMultiRow);\n                    }\n                }\n                else if (rowSelect === \"multi\" && (isMultiRow || args.isTouch || rowSelectionMode === \"multi\")) {\n                    if (isSelected) {\n                        setSelectedRows(selectedRows.remove(row), undefined, true);\n                    }\n                    else {\n                        setSelectedRows(undefined, row, true);\n                        lastSelectedRowRef.current = row;\n                    }\n                }\n                else if (isSelected && selectedRows.length === 1) {\n                    setSelectedRows(CompactSelection.empty(), undefined, isMultiKey);\n                }\n                else {\n                    setSelectedRows(CompactSelection.fromSingleSelection(row), undefined, isMultiKey);\n                    lastSelectedRowRef.current = row;\n                }\n            }\n            else if (col >= rowMarkerOffset && showTrailingBlankRow && row === rows) {\n                const customTargetColumn = getCustomNewRowTargetColumn(col);\n                void appendRow(customTargetColumn ?? col);\n            }\n            else {\n                if (cellCol !== col || cellRow !== row) {\n                    const cell = getMangledCellContent(args.location);\n                    const renderer = getCellRenderer(cell);\n                    if (renderer?.onSelect !== undefined) {\n                        let prevented = false;\n                        renderer.onSelect({\n                            ...args,\n                            cell,\n                            posX: args.localEventX,\n                            posY: args.localEventY,\n                            bounds: args.bounds,\n                            preventDefault: () => (prevented = true),\n                            theme: themeForCell(cell, args.location),\n                        });\n                        if (prevented) {\n                            return;\n                        }\n                    }\n                    if (rowGroupingNavBehavior === \"block\" && mapper(row).isGroupHeader) {\n                        return;\n                    }\n                    const isLastStickyRow = lastRowSticky && row === rows;\n                    const startedFromLastSticky = lastRowSticky && gridSelection !== undefined && gridSelection.current?.cell[1] === rows;\n                    if ((args.shiftKey || args.isLongTouch === true) &&\n                        cellCol !== undefined &&\n                        cellRow !== undefined &&\n                        gridSelection.current !== undefined &&\n                        !startedFromLastSticky) {\n                        if (isLastStickyRow) {\n                            // If we're making a selection and shift click in to the last sticky row,\n                            // just drop the event. Don't kill the selection.\n                            return;\n                        }\n                        const left = Math.min(col, cellCol);\n                        const right = Math.max(col, cellCol);\n                        const top = Math.min(row, cellRow);\n                        const bottom = Math.max(row, cellRow);\n                        setCurrent({\n                            ...gridSelection.current,\n                            range: {\n                                x: left,\n                                y: top,\n                                width: right - left + 1,\n                                height: bottom - top + 1,\n                            },\n                        }, true, isMultiKey, \"click\");\n                        lastSelectedRowRef.current = undefined;\n                        focus();\n                    }\n                    else {\n                        setCurrent({\n                            cell: [col, row],\n                            range: { x: col, y: row, width: 1, height: 1 },\n                        }, true, isMultiKey, \"click\");\n                        lastSelectedRowRef.current = undefined;\n                        setOverlay(undefined);\n                        focus();\n                    }\n                }\n            }\n        }\n        else if (args.kind === \"header\") {\n            lastMouseSelectLocation.current = [col, row];\n            setOverlay(undefined);\n            if (hasRowMarkers && col === 0) {\n                lastSelectedRowRef.current = undefined;\n                lastSelectedColRef.current = undefined;\n                if (rowSelect === \"multi\") {\n                    if (selectedRows.length !== rows) {\n                        setSelectedRows(CompactSelection.fromSingleSelection([0, rows]), undefined, isMultiKey);\n                    }\n                    else {\n                        setSelectedRows(CompactSelection.empty(), undefined, isMultiKey);\n                    }\n                    focus();\n                }\n            }\n            else {\n                const lastCol = lastSelectedColRef.current;\n                if (columnSelect === \"multi\" &&\n                    (args.shiftKey || args.isLongTouch === true) &&\n                    lastCol !== undefined &&\n                    selectedColumns.hasIndex(lastCol)) {\n                    const newSlice = [Math.min(lastCol, col), Math.max(lastCol, col) + 1];\n                    if (isMultiCol) {\n                        setSelectedColumns(undefined, newSlice, isMultiKey);\n                    }\n                    else {\n                        setSelectedColumns(CompactSelection.fromSingleSelection(newSlice), undefined, isMultiKey);\n                    }\n                }\n                else if (isMultiCol) {\n                    if (selectedColumns.hasIndex(col)) {\n                        setSelectedColumns(selectedColumns.remove(col), undefined, isMultiKey);\n                    }\n                    else {\n                        setSelectedColumns(undefined, col, isMultiKey);\n                    }\n                    lastSelectedColRef.current = col;\n                }\n                else if (columnSelect !== \"none\") {\n                    setSelectedColumns(CompactSelection.fromSingleSelection(col), undefined, isMultiKey);\n                    lastSelectedColRef.current = col;\n                }\n                lastSelectedRowRef.current = undefined;\n                focus();\n            }\n        }\n        else if (args.kind === groupHeaderKind) {\n            lastMouseSelectLocation.current = [col, row];\n        }\n        else if (args.kind === outOfBoundsKind && !args.isMaybeScrollbar) {\n            setGridSelection(emptyGridSelection, false);\n            setOverlay(undefined);\n            focus();\n            onSelectionCleared?.();\n            lastSelectedRowRef.current = undefined;\n            lastSelectedColRef.current = undefined;\n        }\n    }, [\n        rowSelect,\n        columnSelect,\n        gridSelection,\n        hasRowMarkers,\n        rowMarkerOffset,\n        showTrailingBlankRow,\n        rows,\n        rowMarkers,\n        getMangledCellContent,\n        onRowMoved,\n        focus,\n        rowSelectionMode,\n        getCellRenderer,\n        themeForCell,\n        setSelectedRows,\n        getCustomNewRowTargetColumn,\n        appendRow,\n        rowGroupingNavBehavior,\n        mapper,\n        lastRowSticky,\n        setCurrent,\n        setSelectedColumns,\n        setGridSelection,\n        onSelectionCleared,\n    ]);\n    const isActivelyDraggingHeader = React.useRef(false);\n    const lastMouseSelectLocation = React.useRef();\n    const touchDownArgs = React.useRef(visibleRegion);\n    const mouseDownData = React.useRef();\n    const onMouseDown = React.useCallback((args) => {\n        isPrevented.current = false;\n        touchDownArgs.current = visibleRegionRef.current;\n        if (args.button !== 0 && args.button !== 1) {\n            mouseDownData.current = undefined;\n            return;\n        }\n        const time = performance.now();\n        mouseDownData.current = {\n            button: args.button,\n            time,\n            location: args.location,\n        };\n        if (args?.kind === \"header\") {\n            isActivelyDraggingHeader.current = true;\n        }\n        const fh = args.kind === \"cell\" && args.isFillHandle;\n        if (!fh && args.kind !== \"cell\" && args.isEdge)\n            return;\n        setMouseState({\n            previousSelection: gridSelection,\n            fillHandle: fh,\n        });\n        lastMouseSelectLocation.current = undefined;\n        if (!args.isTouch && args.button === 0 && !fh) {\n            handleSelect(args);\n        }\n        else if (!args.isTouch && args.button === 1) {\n            lastMouseSelectLocation.current = args.location;\n        }\n    }, [gridSelection, handleSelect]);\n    const [renameGroup, setRenameGroup] = React.useState();\n    const handleGroupHeaderSelection = React.useCallback((args) => {\n        if (args.kind !== groupHeaderKind || columnSelect !== \"multi\") {\n            return;\n        }\n        const isMultiKey = browserIsOSX.value ? args.metaKey : args.ctrlKey;\n        const [col] = args.location;\n        const selectedColumns = gridSelection.columns;\n        if (col < rowMarkerOffset)\n            return;\n        const needle = mangledCols[col];\n        let start = col;\n        let end = col;\n        for (let i = col - 1; i >= rowMarkerOffset; i--) {\n            if (!isGroupEqual(needle.group, mangledCols[i].group))\n                break;\n            start--;\n        }\n        for (let i = col + 1; i < mangledCols.length; i++) {\n            if (!isGroupEqual(needle.group, mangledCols[i].group))\n                break;\n            end++;\n        }\n        focus();\n        if (isMultiKey) {\n            if (selectedColumns.hasAll([start, end + 1])) {\n                let newVal = selectedColumns;\n                for (let index = start; index <= end; index++) {\n                    newVal = newVal.remove(index);\n                }\n                setSelectedColumns(newVal, undefined, isMultiKey);\n            }\n            else {\n                setSelectedColumns(undefined, [start, end + 1], isMultiKey);\n            }\n        }\n        else {\n            setSelectedColumns(CompactSelection.fromSingleSelection([start, end + 1]), undefined, isMultiKey);\n        }\n    }, [columnSelect, focus, gridSelection.columns, mangledCols, rowMarkerOffset, setSelectedColumns]);\n    const isPrevented = React.useRef(false);\n    const normalSizeColumn = React.useCallback(async (col) => {\n        if (getCellsForSelection !== undefined && onColumnResize !== undefined) {\n            const start = visibleRegionRef.current.y;\n            const end = visibleRegionRef.current.height;\n            let cells = getCellsForSelection({\n                x: col,\n                y: start,\n                width: 1,\n                height: Math.min(end, rows - start),\n            }, abortControllerRef.current.signal);\n            if (typeof cells !== \"object\") {\n                cells = await cells();\n            }\n            const inputCol = columns[col - rowMarkerOffset];\n            const offscreen = document.createElement(\"canvas\");\n            const ctx = offscreen.getContext(\"2d\", { alpha: false });\n            if (ctx !== null) {\n                ctx.font = mergedTheme.baseFontFull;\n                const newCol = measureColumn(ctx, mergedTheme, inputCol, 0, cells, minColumnWidth, maxColumnWidth, false, getCellRenderer);\n                onColumnResize?.(inputCol, newCol.width, col, newCol.width);\n            }\n        }\n    }, [\n        columns,\n        getCellsForSelection,\n        maxColumnWidth,\n        mergedTheme,\n        minColumnWidth,\n        onColumnResize,\n        rowMarkerOffset,\n        rows,\n        getCellRenderer,\n    ]);\n    const [scrollDir, setScrollDir] = React.useState();\n    const fillPattern = React.useCallback(async (previousSelection, currentSelection) => {\n        const patternRange = previousSelection.current?.range;\n        if (patternRange === undefined ||\n            getCellsForSelection === undefined ||\n            currentSelection.current === undefined) {\n            return;\n        }\n        const currentRange = currentSelection.current.range;\n        if (onFillPattern !== undefined) {\n            let canceled = false;\n            onFillPattern({\n                fillDestination: { ...currentRange, x: currentRange.x - rowMarkerOffset },\n                patternSource: { ...patternRange, x: patternRange.x - rowMarkerOffset },\n                preventDefault: () => (canceled = true),\n            });\n            if (canceled)\n                return;\n        }\n        let cells = getCellsForSelection(patternRange, abortControllerRef.current.signal);\n        if (typeof cells !== \"object\")\n            cells = await cells();\n        const pattern = cells;\n        // loop through all cells in currentSelection.current.range\n        const editItemList = [];\n        for (let x = 0; x < currentRange.width; x++) {\n            for (let y = 0; y < currentRange.height; y++) {\n                const cell = [currentRange.x + x, currentRange.y + y];\n                if (itemIsInRect(cell, patternRange))\n                    continue;\n                const patternCell = pattern[y % patternRange.height][x % patternRange.width];\n                if (isInnerOnlyCell(patternCell) || !isReadWriteCell(patternCell))\n                    continue;\n                editItemList.push({\n                    location: cell,\n                    value: { ...patternCell },\n                });\n            }\n        }\n        mangledOnCellsEdited(editItemList);\n        gridRef.current?.damage(editItemList.map(c => ({\n            cell: c.location,\n        })));\n    }, [getCellsForSelection, mangledOnCellsEdited, onFillPattern, rowMarkerOffset]);\n    const fillRight = React.useCallback(() => {\n        if (gridSelection.current === undefined || gridSelection.current.range.width <= 1)\n            return;\n        const firstColSelection = {\n            ...gridSelection,\n            current: {\n                ...gridSelection.current,\n                range: {\n                    ...gridSelection.current.range,\n                    width: 1,\n                },\n            },\n        };\n        void fillPattern(firstColSelection, gridSelection);\n    }, [fillPattern, gridSelection]);\n    const fillDown = React.useCallback(() => {\n        if (gridSelection.current === undefined || gridSelection.current.range.height <= 1)\n            return;\n        const firstRowSelection = {\n            ...gridSelection,\n            current: {\n                ...gridSelection.current,\n                range: {\n                    ...gridSelection.current.range,\n                    height: 1,\n                },\n            },\n        };\n        void fillPattern(firstRowSelection, gridSelection);\n    }, [fillPattern, gridSelection]);\n    const onMouseUp = React.useCallback((args, isOutside) => {\n        const mouse = mouseState;\n        setMouseState(undefined);\n        setFillHighlightRegion(undefined);\n        setScrollDir(undefined);\n        isActivelyDraggingHeader.current = false;\n        if (isOutside)\n            return;\n        if (mouse?.fillHandle === true &&\n            gridSelection.current !== undefined &&\n            mouse.previousSelection?.current !== undefined) {\n            if (fillHighlightRegion === undefined)\n                return;\n            const newRange = {\n                ...gridSelection,\n                current: {\n                    ...gridSelection.current,\n                    range: combineRects(mouse.previousSelection.current.range, fillHighlightRegion),\n                },\n            };\n            void fillPattern(mouse.previousSelection, newRange);\n            setGridSelection(newRange, true);\n            return;\n        }\n        const [col, row] = args.location;\n        const [lastMouseDownCol, lastMouseDownRow] = lastMouseSelectLocation.current ?? [];\n        const preventDefault = () => {\n            isPrevented.current = true;\n        };\n        const handleMaybeClick = (a) => {\n            const isValidClick = a.isTouch || (lastMouseDownCol === col && lastMouseDownRow === row);\n            if (isValidClick) {\n                onCellClicked?.([col - rowMarkerOffset, row], {\n                    ...a,\n                    preventDefault,\n                });\n            }\n            if (a.button === 1)\n                return !isPrevented.current;\n            if (!isPrevented.current) {\n                const c = getMangledCellContent(args.location);\n                const r = getCellRenderer(c);\n                if (r !== undefined && r.onClick !== undefined && isValidClick) {\n                    const newVal = r.onClick({\n                        ...a,\n                        cell: c,\n                        posX: a.localEventX,\n                        posY: a.localEventY,\n                        bounds: a.bounds,\n                        theme: themeForCell(c, args.location),\n                        preventDefault,\n                    });\n                    if (newVal !== undefined && !isInnerOnlyCell(newVal) && isEditableGridCell(newVal)) {\n                        mangledOnCellsEdited([{ location: a.location, value: newVal }]);\n                        gridRef.current?.damage([\n                            {\n                                cell: a.location,\n                            },\n                        ]);\n                    }\n                }\n                if (isPrevented.current || gridSelection.current === undefined)\n                    return false;\n                let shouldActivate = false;\n                switch (c.activationBehaviorOverride ?? cellActivationBehavior) {\n                    case \"double-click\":\n                    case \"second-click\": {\n                        if (mouse?.previousSelection?.current?.cell === undefined)\n                            break;\n                        const [selectedCol, selectedRow] = gridSelection.current.cell;\n                        const [prevCol, prevRow] = mouse.previousSelection.current.cell;\n                        const isClickOnSelected = col === selectedCol && col === prevCol && row === selectedRow && row === prevRow;\n                        shouldActivate =\n                            isClickOnSelected &&\n                                (a.isDoubleClick === true || cellActivationBehavior === \"second-click\");\n                        break;\n                    }\n                    case \"single-click\": {\n                        shouldActivate = true;\n                        break;\n                    }\n                }\n                if (shouldActivate) {\n                    onCellActivated?.([col - rowMarkerOffset, row]);\n                    reselect(a.bounds, false);\n                    return true;\n                }\n            }\n            return false;\n        };\n        const clickLocation = args.location[0] - rowMarkerOffset;\n        if (args.isTouch) {\n            const vr = visibleRegionRef.current;\n            const touchVr = touchDownArgs.current;\n            if (vr.x !== touchVr.x || vr.y !== touchVr.y) {\n                // we scrolled, abort\n                return;\n            }\n            // take care of context menus first if long pressed item is already selected\n            if (args.isLongTouch === true) {\n                if (args.kind === \"cell\" && itemsAreEqual(gridSelection.current?.cell, args.location)) {\n                    onCellContextMenu?.([clickLocation, args.location[1]], {\n                        ...args,\n                        preventDefault,\n                    });\n                    return;\n                }\n                else if (args.kind === \"header\" && gridSelection.columns.hasIndex(col)) {\n                    onHeaderContextMenu?.(clickLocation, { ...args, preventDefault });\n                    return;\n                }\n                else if (args.kind === groupHeaderKind) {\n                    if (clickLocation < 0) {\n                        return;\n                    }\n                    onGroupHeaderContextMenu?.(clickLocation, { ...args, preventDefault });\n                    return;\n                }\n            }\n            if (args.kind === \"cell\") {\n                // click that cell\n                if (!handleMaybeClick(args)) {\n                    handleSelect(args);\n                }\n            }\n            else if (args.kind === groupHeaderKind) {\n                onGroupHeaderClicked?.(clickLocation, { ...args, preventDefault });\n            }\n            else {\n                if (args.kind === headerKind) {\n                    onHeaderClicked?.(clickLocation, {\n                        ...args,\n                        preventDefault,\n                    });\n                }\n                handleSelect(args);\n            }\n            return;\n        }\n        if (args.kind === \"header\") {\n            if (clickLocation < 0) {\n                return;\n            }\n            if (args.isEdge) {\n                if (args.isDoubleClick === true) {\n                    void normalSizeColumn(col);\n                }\n            }\n            else if (args.button === 0 && col === lastMouseDownCol && row === lastMouseDownRow) {\n                onHeaderClicked?.(clickLocation, { ...args, preventDefault });\n            }\n        }\n        if (args.kind === groupHeaderKind) {\n            if (clickLocation < 0) {\n                return;\n            }\n            if (args.button === 0 && col === lastMouseDownCol && row === lastMouseDownRow) {\n                onGroupHeaderClicked?.(clickLocation, { ...args, preventDefault });\n                if (!isPrevented.current) {\n                    handleGroupHeaderSelection(args);\n                }\n            }\n        }\n        if (args.kind === \"cell\" && (args.button === 0 || args.button === 1)) {\n            handleMaybeClick(args);\n        }\n        lastMouseSelectLocation.current = undefined;\n    }, [\n        mouseState,\n        gridSelection,\n        rowMarkerOffset,\n        fillHighlightRegion,\n        fillPattern,\n        setGridSelection,\n        onCellClicked,\n        getMangledCellContent,\n        getCellRenderer,\n        cellActivationBehavior,\n        themeForCell,\n        mangledOnCellsEdited,\n        onCellActivated,\n        reselect,\n        onCellContextMenu,\n        onHeaderContextMenu,\n        onGroupHeaderContextMenu,\n        handleSelect,\n        onGroupHeaderClicked,\n        onHeaderClicked,\n        normalSizeColumn,\n        handleGroupHeaderSelection,\n    ]);\n    const onMouseMoveImpl = React.useCallback((args) => {\n        const a = {\n            ...args,\n            location: [args.location[0] - rowMarkerOffset, args.location[1]],\n        };\n        onMouseMove?.(a);\n        if (mouseState !== undefined && args.buttons === 0) {\n            setMouseState(undefined);\n            setFillHighlightRegion(undefined);\n            setScrollDir(undefined);\n            isActivelyDraggingHeader.current = false;\n        }\n        setScrollDir(cv => {\n            if (isActivelyDraggingHeader.current)\n                return [args.scrollEdge[0], 0];\n            if (args.scrollEdge[0] === cv?.[0] && args.scrollEdge[1] === cv[1])\n                return cv;\n            return mouseState === undefined || (mouseDownData.current?.location[0] ?? 0) < rowMarkerOffset\n                ? undefined\n                : args.scrollEdge;\n        });\n    }, [mouseState, onMouseMove, rowMarkerOffset]);\n    const onHeaderMenuClickInner = React.useCallback((col, screenPosition) => {\n        onHeaderMenuClick?.(col - rowMarkerOffset, screenPosition);\n    }, [onHeaderMenuClick, rowMarkerOffset]);\n    const onHeaderIndicatorClickInner = React.useCallback((col, screenPosition) => {\n        onHeaderIndicatorClick?.(col - rowMarkerOffset, screenPosition);\n    }, [onHeaderIndicatorClick, rowMarkerOffset]);\n    const currentCell = gridSelection?.current?.cell;\n    const onVisibleRegionChangedImpl = React.useCallback((region, clientWidth, clientHeight, rightElWidth, tx, ty) => {\n        hasJustScrolled.current = false;\n        let selected = currentCell;\n        if (selected !== undefined) {\n            selected = [selected[0] - rowMarkerOffset, selected[1]];\n        }\n        const freezeRegion = freezeColumns === 0\n            ? undefined\n            : {\n                x: 0,\n                y: region.y,\n                width: freezeColumns,\n                height: region.height,\n            };\n        const freezeRegions = [];\n        if (freezeRegion !== undefined)\n            freezeRegions.push(freezeRegion);\n        if (freezeTrailingRows > 0) {\n            freezeRegions.push({\n                x: region.x - rowMarkerOffset,\n                y: rows - freezeTrailingRows,\n                width: region.width,\n                height: freezeTrailingRows,\n            });\n            if (freezeColumns > 0) {\n                freezeRegions.push({\n                    x: 0,\n                    y: rows - freezeTrailingRows,\n                    width: freezeColumns,\n                    height: freezeTrailingRows,\n                });\n            }\n        }\n        const newRegion = {\n            x: region.x - rowMarkerOffset,\n            y: region.y,\n            width: region.width,\n            height: showTrailingBlankRow && region.y + region.height >= rows ? region.height - 1 : region.height,\n            tx,\n            ty,\n            extras: {\n                selected,\n                freezeRegion,\n                freezeRegions,\n            },\n        };\n        visibleRegionRef.current = newRegion;\n        setVisibleRegion(newRegion);\n        setClientSize([clientWidth, clientHeight, rightElWidth]);\n        onVisibleRegionChanged?.(newRegion, newRegion.tx, newRegion.ty, newRegion.extras);\n    }, [\n        currentCell,\n        rowMarkerOffset,\n        showTrailingBlankRow,\n        rows,\n        freezeColumns,\n        freezeTrailingRows,\n        setVisibleRegion,\n        onVisibleRegionChanged,\n    ]);\n    const onColumnMovedImpl = whenDefined(onColumnMoved, React.useCallback((startIndex, endIndex) => {\n        onColumnMoved?.(startIndex - rowMarkerOffset, endIndex - rowMarkerOffset);\n        if (columnSelect !== \"none\") {\n            setSelectedColumns(CompactSelection.fromSingleSelection(endIndex), undefined, true);\n        }\n    }, [columnSelect, onColumnMoved, rowMarkerOffset, setSelectedColumns]));\n    const isActivelyDragging = React.useRef(false);\n    const onDragStartImpl = React.useCallback((args) => {\n        if (args.location[0] === 0 && rowMarkerOffset > 0) {\n            args.preventDefault();\n            return;\n        }\n        onDragStart?.({\n            ...args,\n            location: [args.location[0] - rowMarkerOffset, args.location[1]],\n        });\n        if (!args.defaultPrevented()) {\n            isActivelyDragging.current = true;\n        }\n        setMouseState(undefined);\n    }, [onDragStart, rowMarkerOffset]);\n    const onDragEnd = React.useCallback(() => {\n        isActivelyDragging.current = false;\n    }, []);\n    const rowGroupingSelectionBehavior = rowGrouping?.selectionBehavior;\n    const getSelectionRowLimits = React.useCallback((selectedRow) => {\n        if (rowGroupingSelectionBehavior !== \"block-spanning\")\n            return undefined;\n        const { isGroupHeader, path, groupRows } = mapper(selectedRow);\n        if (isGroupHeader) {\n            return [selectedRow, selectedRow];\n        }\n        const groupRowIndex = path[path.length - 1];\n        const lowerBounds = selectedRow - groupRowIndex;\n        const upperBounds = selectedRow + groupRows - groupRowIndex - 1;\n        return [lowerBounds, upperBounds];\n    }, [mapper, rowGroupingSelectionBehavior]);\n    const hoveredRef = React.useRef();\n    const onItemHoveredImpl = React.useCallback((args) => {\n        // make sure we still have a button down\n        if (mouseEventArgsAreEqual(args, hoveredRef.current))\n            return;\n        hoveredRef.current = args;\n        if (mouseDownData?.current?.button !== undefined && mouseDownData.current.button >= 1)\n            return;\n        if (args.buttons !== 0 &&\n            mouseState !== undefined &&\n            mouseDownData.current?.location[0] === 0 &&\n            args.location[0] === 0 &&\n            rowMarkerOffset === 1 &&\n            rowSelect === \"multi\" &&\n            mouseState.previousSelection &&\n            !mouseState.previousSelection.rows.hasIndex(mouseDownData.current.location[1]) &&\n            gridSelection.rows.hasIndex(mouseDownData.current.location[1])) {\n            const start = Math.min(mouseDownData.current.location[1], args.location[1]);\n            const end = Math.max(mouseDownData.current.location[1], args.location[1]) + 1;\n            setSelectedRows(CompactSelection.fromSingleSelection([start, end]), undefined, false);\n        }\n        if (args.buttons !== 0 &&\n            mouseState !== undefined &&\n            gridSelection.current !== undefined &&\n            !isActivelyDragging.current &&\n            !isActivelyDraggingHeader.current &&\n            (rangeSelect === \"rect\" || rangeSelect === \"multi-rect\")) {\n            const [selectedCol, selectedRow] = gridSelection.current.cell;\n            // eslint-disable-next-line prefer-const\n            let [col, row] = args.location;\n            if (row < 0) {\n                row = visibleRegionRef.current.y;\n            }\n            if (mouseState.fillHandle === true && mouseState.previousSelection?.current !== undefined) {\n                const prevRange = mouseState.previousSelection.current.range;\n                row = Math.min(row, showTrailingBlankRow ? rows - 1 : rows);\n                const rect = getClosestRect(prevRange, col, row, allowedFillDirections);\n                setFillHighlightRegion(rect);\n            }\n            else {\n                const startedFromLastStickyRow = showTrailingBlankRow && selectedRow === rows;\n                if (startedFromLastStickyRow)\n                    return;\n                const landedOnLastStickyRow = showTrailingBlankRow && row === rows;\n                if (landedOnLastStickyRow) {\n                    if (args.kind === outOfBoundsKind)\n                        row--;\n                    else\n                        return;\n                }\n                col = Math.max(col, rowMarkerOffset);\n                const clampLimits = getSelectionRowLimits(selectedRow);\n                row = clampLimits === undefined ? row : clamp(row, clampLimits[0], clampLimits[1]);\n                // FIXME: Restrict row based on rowGrouping.selectionBehavior here\n                const deltaX = col - selectedCol;\n                const deltaY = row - selectedRow;\n                const newRange = {\n                    x: deltaX >= 0 ? selectedCol : col,\n                    y: deltaY >= 0 ? selectedRow : row,\n                    width: Math.abs(deltaX) + 1,\n                    height: Math.abs(deltaY) + 1,\n                };\n                setCurrent({\n                    ...gridSelection.current,\n                    range: newRange,\n                }, true, false, \"drag\");\n            }\n        }\n        onItemHovered?.({ ...args, location: [args.location[0] - rowMarkerOffset, args.location[1]] });\n    }, [\n        mouseState,\n        rowMarkerOffset,\n        rowSelect,\n        gridSelection,\n        rangeSelect,\n        onItemHovered,\n        setSelectedRows,\n        showTrailingBlankRow,\n        rows,\n        allowedFillDirections,\n        getSelectionRowLimits,\n        setCurrent,\n    ]);\n    const adjustSelectionOnScroll = React.useCallback(() => {\n        const args = hoveredRef.current;\n        if (args === undefined)\n            return;\n        const [xDir, yDir] = args.scrollEdge;\n        let [col, row] = args.location;\n        const visible = visibleRegionRef.current;\n        if (xDir === -1) {\n            col = visible.extras?.freezeRegion?.x ?? visible.x;\n        }\n        else if (xDir === 1) {\n            col = visible.x + visible.width;\n        }\n        if (yDir === -1) {\n            row = Math.max(0, visible.y);\n        }\n        else if (yDir === 1) {\n            row = Math.min(rows - 1, visible.y + visible.height);\n        }\n        col = clamp(col, 0, mangledCols.length - 1);\n        row = clamp(row, 0, rows - 1);\n        onItemHoveredImpl({\n            ...args,\n            location: [col, row],\n        });\n    }, [mangledCols.length, onItemHoveredImpl, rows]);\n    useAutoscroll(scrollDir, scrollRef, adjustSelectionOnScroll);\n    // 1 === move one\n    // 2 === move to end\n    const adjustSelection = React.useCallback((direction) => {\n        if (gridSelection.current === undefined)\n            return;\n        const [x, y] = direction;\n        const [col, row] = gridSelection.current.cell;\n        const old = gridSelection.current.range;\n        let left = old.x;\n        let right = old.x + old.width;\n        let top = old.y;\n        let bottom = old.y + old.height;\n        const [minRow, maxRowRaw] = getSelectionRowLimits(row) ?? [0, rows - 1];\n        const maxRow = maxRowRaw + 1; // we need an inclusive value\n        // take care of vertical first in case new spans come in\n        if (y !== 0) {\n            switch (y) {\n                case 2: {\n                    // go to end\n                    bottom = maxRow;\n                    top = row;\n                    scrollTo(0, bottom, \"vertical\");\n                    break;\n                }\n                case -2: {\n                    // go to start\n                    top = minRow;\n                    bottom = row + 1;\n                    scrollTo(0, top, \"vertical\");\n                    break;\n                }\n                case 1: {\n                    // motion down\n                    if (top < row) {\n                        top++;\n                        scrollTo(0, top, \"vertical\");\n                    }\n                    else {\n                        bottom = Math.min(maxRow, bottom + 1);\n                        scrollTo(0, bottom, \"vertical\");\n                    }\n                    break;\n                }\n                case -1: {\n                    // motion up\n                    if (bottom > row + 1) {\n                        bottom--;\n                        scrollTo(0, bottom, \"vertical\");\n                    }\n                    else {\n                        top = Math.max(minRow, top - 1);\n                        scrollTo(0, top, \"vertical\");\n                    }\n                    break;\n                }\n                default: {\n                    assertNever(y);\n                }\n            }\n        }\n        if (x !== 0) {\n            if (x === 2) {\n                right = mangledCols.length;\n                left = col;\n                scrollTo(right - 1 - rowMarkerOffset, 0, \"horizontal\");\n            }\n            else if (x === -2) {\n                left = rowMarkerOffset;\n                right = col + 1;\n                scrollTo(left - rowMarkerOffset, 0, \"horizontal\");\n            }\n            else {\n                let disallowed = [];\n                if (getCellsForSelection !== undefined) {\n                    const cells = getCellsForSelection({\n                        x: left,\n                        y: top,\n                        width: right - left - rowMarkerOffset,\n                        height: bottom - top,\n                    }, abortControllerRef.current.signal);\n                    if (typeof cells === \"object\") {\n                        disallowed = getSpanStops(cells);\n                    }\n                }\n                if (x === 1) {\n                    // motion right\n                    let done = false;\n                    if (left < col) {\n                        if (disallowed.length > 0) {\n                            const target = range(left + 1, col + 1).find(n => !disallowed.includes(n - rowMarkerOffset));\n                            if (target !== undefined) {\n                                left = target;\n                                done = true;\n                            }\n                        }\n                        else {\n                            left++;\n                            done = true;\n                        }\n                        if (done)\n                            scrollTo(left, 0, \"horizontal\");\n                    }\n                    if (!done) {\n                        right = Math.min(mangledCols.length, right + 1);\n                        scrollTo(right - 1 - rowMarkerOffset, 0, \"horizontal\");\n                    }\n                }\n                else if (x === -1) {\n                    // motion left\n                    let done = false;\n                    if (right > col + 1) {\n                        if (disallowed.length > 0) {\n                            const target = range(right - 1, col, -1).find(n => !disallowed.includes(n - rowMarkerOffset));\n                            if (target !== undefined) {\n                                right = target;\n                                done = true;\n                            }\n                        }\n                        else {\n                            right--;\n                            done = true;\n                        }\n                        if (done)\n                            scrollTo(right - rowMarkerOffset, 0, \"horizontal\");\n                    }\n                    if (!done) {\n                        left = Math.max(rowMarkerOffset, left - 1);\n                        scrollTo(left - rowMarkerOffset, 0, \"horizontal\");\n                    }\n                }\n                else {\n                    assertNever(x);\n                }\n            }\n        }\n        setCurrent({\n            cell: gridSelection.current.cell,\n            range: {\n                x: left,\n                y: top,\n                width: right - left,\n                height: bottom - top,\n            },\n        }, true, false, \"keyboard-select\");\n    }, [\n        getCellsForSelection,\n        getSelectionRowLimits,\n        gridSelection,\n        mangledCols.length,\n        rowMarkerOffset,\n        rows,\n        scrollTo,\n        setCurrent,\n    ]);\n    const scrollToActiveCellRef = React.useRef(scrollToActiveCell);\n    scrollToActiveCellRef.current = scrollToActiveCell;\n    const updateSelectedCell = React.useCallback((col, row, fromEditingTrailingRow, freeMove) => {\n        const rowMax = mangledRows - (fromEditingTrailingRow ? 0 : 1);\n        col = clamp(col, rowMarkerOffset, columns.length - 1 + rowMarkerOffset);\n        row = clamp(row, 0, rowMax);\n        const curCol = currentCell?.[0];\n        const curRow = currentCell?.[1];\n        if (col === curCol && row === curRow)\n            return false;\n        if (freeMove && gridSelection.current !== undefined) {\n            const newStack = [...gridSelection.current.rangeStack];\n            if (gridSelection.current.range.width > 1 || gridSelection.current.range.height > 1) {\n                newStack.push(gridSelection.current.range);\n            }\n            setGridSelection({\n                ...gridSelection,\n                current: {\n                    cell: [col, row],\n                    range: { x: col, y: row, width: 1, height: 1 },\n                    rangeStack: newStack,\n                },\n            }, true);\n        }\n        else {\n            setCurrent({\n                cell: [col, row],\n                range: { x: col, y: row, width: 1, height: 1 },\n            }, true, false, \"keyboard-nav\");\n        }\n        if (lastSent.current !== undefined && lastSent.current[0] === col && lastSent.current[1] === row) {\n            lastSent.current = undefined;\n        }\n        if (scrollToActiveCellRef.current) {\n            scrollTo(col - rowMarkerOffset, row);\n        }\n        return true;\n    }, [\n        mangledRows,\n        rowMarkerOffset,\n        columns.length,\n        currentCell,\n        gridSelection,\n        scrollTo,\n        setGridSelection,\n        setCurrent,\n    ]);\n    const onFinishEditing = React.useCallback((newValue, movement) => {\n        if (overlay?.cell !== undefined && newValue !== undefined && isEditableGridCell(newValue)) {\n            mangledOnCellsEdited([{ location: overlay.cell, value: newValue }]);\n            window.requestAnimationFrame(() => {\n                gridRef.current?.damage([\n                    {\n                        cell: overlay.cell,\n                    },\n                ]);\n            });\n        }\n        focus(true);\n        setOverlay(undefined);\n        const [movX, movY] = movement;\n        if (gridSelection.current !== undefined && (movX !== 0 || movY !== 0)) {\n            const isEditingTrailingRow = gridSelection.current.cell[1] === mangledRows - 1 && newValue !== undefined;\n            updateSelectedCell(clamp(gridSelection.current.cell[0] + movX, 0, mangledCols.length - 1), clamp(gridSelection.current.cell[1] + movY, 0, mangledRows - 1), isEditingTrailingRow, false);\n        }\n        onFinishedEditing?.(newValue, movement);\n    }, [\n        overlay?.cell,\n        focus,\n        gridSelection,\n        onFinishedEditing,\n        mangledOnCellsEdited,\n        mangledRows,\n        updateSelectedCell,\n        mangledCols.length,\n    ]);\n    const overlayID = React.useMemo(() => {\n        return `gdg-overlay-${idCounter++}`;\n    }, []);\n    const deleteRange = React.useCallback((r) => {\n        focus();\n        const editList = [];\n        for (let x = r.x; x < r.x + r.width; x++) {\n            for (let y = r.y; y < r.y + r.height; y++) {\n                const cellValue = getCellContent([x - rowMarkerOffset, y]);\n                if (!cellValue.allowOverlay && cellValue.kind !== GridCellKind.Boolean)\n                    continue;\n                let newVal = undefined;\n                if (cellValue.kind === GridCellKind.Custom) {\n                    const toDelete = getCellRenderer(cellValue);\n                    const editor = toDelete?.provideEditor?.(cellValue);\n                    if (toDelete?.onDelete !== undefined) {\n                        newVal = toDelete.onDelete(cellValue);\n                    }\n                    else if (isObjectEditorCallbackResult(editor)) {\n                        newVal = editor?.deletedValue?.(cellValue);\n                    }\n                }\n                else if ((isEditableGridCell(cellValue) && cellValue.allowOverlay) ||\n                    cellValue.kind === GridCellKind.Boolean) {\n                    const toDelete = getCellRenderer(cellValue);\n                    newVal = toDelete?.onDelete?.(cellValue);\n                }\n                if (newVal !== undefined && !isInnerOnlyCell(newVal) && isEditableGridCell(newVal)) {\n                    editList.push({ location: [x, y], value: newVal });\n                }\n            }\n        }\n        mangledOnCellsEdited(editList);\n        gridRef.current?.damage(editList.map(x => ({ cell: x.location })));\n    }, [focus, getCellContent, getCellRenderer, mangledOnCellsEdited, rowMarkerOffset]);\n    const overlayOpen = overlay !== undefined;\n    const handleFixedKeybindings = React.useCallback((event) => {\n        const cancel = () => {\n            event.stopPropagation();\n            event.preventDefault();\n        };\n        const details = {\n            didMatch: false,\n        };\n        const { bounds } = event;\n        const selectedColumns = gridSelection.columns;\n        const selectedRows = gridSelection.rows;\n        const keys = keybindings;\n        if (!overlayOpen && isHotkey(keys.clear, event, details)) {\n            setGridSelection(emptyGridSelection, false);\n            onSelectionCleared?.();\n        }\n        else if (!overlayOpen && isHotkey(keys.selectAll, event, details)) {\n            setGridSelection({\n                columns: CompactSelection.empty(),\n                rows: CompactSelection.empty(),\n                current: {\n                    cell: gridSelection.current?.cell ?? [rowMarkerOffset, 0],\n                    range: {\n                        x: rowMarkerOffset,\n                        y: 0,\n                        width: columnsIn.length,\n                        height: rows,\n                    },\n                    rangeStack: [],\n                },\n            }, false);\n        }\n        else if (isHotkey(keys.search, event, details)) {\n            searchInputRef?.current?.focus({ preventScroll: true });\n            setShowSearchInner(true);\n        }\n        else if (isHotkey(keys.delete, event, details)) {\n            const callbackResult = onDelete?.(gridSelection) ?? true;\n            if (callbackResult !== false) {\n                const toDelete = callbackResult === true ? gridSelection : callbackResult;\n                // delete order:\n                // 1) primary range\n                // 2) secondary ranges\n                // 3) columns\n                // 4) rows\n                if (toDelete.current !== undefined) {\n                    deleteRange(toDelete.current.range);\n                    for (const r of toDelete.current.rangeStack) {\n                        deleteRange(r);\n                    }\n                }\n                for (const r of toDelete.rows) {\n                    deleteRange({\n                        x: rowMarkerOffset,\n                        y: r,\n                        width: columnsIn.length,\n                        height: 1,\n                    });\n                }\n                for (const col of toDelete.columns) {\n                    deleteRange({\n                        x: col,\n                        y: 0,\n                        width: 1,\n                        height: rows,\n                    });\n                }\n            }\n        }\n        if (details.didMatch) {\n            cancel();\n            return true;\n        }\n        if (gridSelection.current === undefined)\n            return false;\n        let [col, row] = gridSelection.current.cell;\n        const [, startRow] = gridSelection.current.cell;\n        let freeMove = false;\n        let cancelOnlyOnMove = false;\n        if (isHotkey(keys.scrollToSelectedCell, event, details)) {\n            scrollToRef.current(col - rowMarkerOffset, row);\n        }\n        else if (columnSelect !== \"none\" && isHotkey(keys.selectColumn, event, details)) {\n            if (selectedColumns.hasIndex(col)) {\n                setSelectedColumns(selectedColumns.remove(col), undefined, true);\n            }\n            else {\n                if (columnSelect === \"single\") {\n                    setSelectedColumns(CompactSelection.fromSingleSelection(col), undefined, true);\n                }\n                else {\n                    setSelectedColumns(undefined, col, true);\n                }\n            }\n        }\n        else if (rowSelect !== \"none\" && isHotkey(keys.selectRow, event, details)) {\n            if (selectedRows.hasIndex(row)) {\n                setSelectedRows(selectedRows.remove(row), undefined, true);\n            }\n            else {\n                if (rowSelect === \"single\") {\n                    setSelectedRows(CompactSelection.fromSingleSelection(row), undefined, true);\n                }\n                else {\n                    setSelectedRows(undefined, row, true);\n                }\n            }\n        }\n        else if (!overlayOpen && bounds !== undefined && isHotkey(keys.activateCell, event, details)) {\n            if (row === rows && showTrailingBlankRow) {\n                window.setTimeout(() => {\n                    const customTargetColumn = getCustomNewRowTargetColumn(col);\n                    void appendRow(customTargetColumn ?? col);\n                }, 0);\n            }\n            else {\n                onCellActivated?.([col - rowMarkerOffset, row]);\n                reselect(bounds, true);\n            }\n        }\n        else if (gridSelection.current.range.height > 1 && isHotkey(keys.downFill, event, details)) {\n            fillDown();\n        }\n        else if (gridSelection.current.range.width > 1 && isHotkey(keys.rightFill, event, details)) {\n            fillRight();\n        }\n        else if (isHotkey(keys.goToNextPage, event, details)) {\n            row += Math.max(1, visibleRegionRef.current.height - 4); // partial cell accounting\n        }\n        else if (isHotkey(keys.goToPreviousPage, event, details)) {\n            row -= Math.max(1, visibleRegionRef.current.height - 4); // partial cell accounting\n        }\n        else if (isHotkey(keys.goToFirstCell, event, details)) {\n            setOverlay(undefined);\n            row = 0;\n            col = 0;\n        }\n        else if (isHotkey(keys.goToLastCell, event, details)) {\n            setOverlay(undefined);\n            row = Number.MAX_SAFE_INTEGER;\n            col = Number.MAX_SAFE_INTEGER;\n        }\n        else if (isHotkey(keys.selectToFirstCell, event, details)) {\n            setOverlay(undefined);\n            adjustSelection([-2, -2]);\n        }\n        else if (isHotkey(keys.selectToLastCell, event, details)) {\n            setOverlay(undefined);\n            adjustSelection([2, 2]);\n        }\n        else if (!overlayOpen) {\n            if (isHotkey(keys.goDownCell, event, details)) {\n                row += 1;\n            }\n            else if (isHotkey(keys.goUpCell, event, details)) {\n                row -= 1;\n            }\n            else if (isHotkey(keys.goRightCell, event, details)) {\n                col += 1;\n            }\n            else if (isHotkey(keys.goLeftCell, event, details)) {\n                col -= 1;\n            }\n            else if (isHotkey(keys.goDownCellRetainSelection, event, details)) {\n                row += 1;\n                freeMove = true;\n            }\n            else if (isHotkey(keys.goUpCellRetainSelection, event, details)) {\n                row -= 1;\n                freeMove = true;\n            }\n            else if (isHotkey(keys.goRightCellRetainSelection, event, details)) {\n                col += 1;\n                freeMove = true;\n            }\n            else if (isHotkey(keys.goLeftCellRetainSelection, event, details)) {\n                col -= 1;\n                freeMove = true;\n            }\n            else if (isHotkey(keys.goToLastRow, event, details)) {\n                row = rows - 1;\n            }\n            else if (isHotkey(keys.goToFirstRow, event, details)) {\n                row = Number.MIN_SAFE_INTEGER;\n            }\n            else if (isHotkey(keys.goToLastColumn, event, details)) {\n                col = Number.MAX_SAFE_INTEGER;\n            }\n            else if (isHotkey(keys.goToFirstColumn, event, details)) {\n                col = Number.MIN_SAFE_INTEGER;\n            }\n            else if (rangeSelect === \"rect\" || rangeSelect === \"multi-rect\") {\n                if (isHotkey(keys.selectGrowDown, event, details)) {\n                    adjustSelection([0, 1]);\n                }\n                else if (isHotkey(keys.selectGrowUp, event, details)) {\n                    adjustSelection([0, -1]);\n                }\n                else if (isHotkey(keys.selectGrowRight, event, details)) {\n                    adjustSelection([1, 0]);\n                }\n                else if (isHotkey(keys.selectGrowLeft, event, details)) {\n                    adjustSelection([-1, 0]);\n                }\n                else if (isHotkey(keys.selectToLastRow, event, details)) {\n                    adjustSelection([0, 2]);\n                }\n                else if (isHotkey(keys.selectToFirstRow, event, details)) {\n                    adjustSelection([0, -2]);\n                }\n                else if (isHotkey(keys.selectToLastColumn, event, details)) {\n                    adjustSelection([2, 0]);\n                }\n                else if (isHotkey(keys.selectToFirstColumn, event, details)) {\n                    adjustSelection([-2, 0]);\n                }\n            }\n            cancelOnlyOnMove = details.didMatch;\n        }\n        else {\n            if (isHotkey(keys.closeOverlay, event, details)) {\n                setOverlay(undefined);\n            }\n            if (isHotkey(keys.acceptOverlayDown, event, details)) {\n                setOverlay(undefined);\n                row++;\n            }\n            if (isHotkey(keys.acceptOverlayUp, event, details)) {\n                setOverlay(undefined);\n                row--;\n            }\n            if (isHotkey(keys.acceptOverlayLeft, event, details)) {\n                setOverlay(undefined);\n                col--;\n            }\n            if (isHotkey(keys.acceptOverlayRight, event, details)) {\n                setOverlay(undefined);\n                col++;\n            }\n        }\n        // #endregion\n        const mustRestrictRow = rowGroupingNavBehavior !== undefined && rowGroupingNavBehavior !== \"normal\";\n        if (mustRestrictRow && row !== startRow) {\n            const skipUp = rowGroupingNavBehavior === \"skip-up\" ||\n                rowGroupingNavBehavior === \"skip\" ||\n                rowGroupingNavBehavior === \"block\";\n            const skipDown = rowGroupingNavBehavior === \"skip-down\" ||\n                rowGroupingNavBehavior === \"skip\" ||\n                rowGroupingNavBehavior === \"block\";\n            const didMoveUp = row < startRow;\n            if (didMoveUp && skipUp) {\n                while (row >= 0 && mapper(row).isGroupHeader) {\n                    row--;\n                }\n                if (row < 0) {\n                    row = startRow;\n                }\n            }\n            else if (!didMoveUp && skipDown) {\n                while (row < rows && mapper(row).isGroupHeader) {\n                    row++;\n                }\n                if (row >= rows) {\n                    row = startRow;\n                }\n            }\n        }\n        const moved = updateSelectedCell(col, row, false, freeMove);\n        const didMatch = details.didMatch;\n        if (didMatch && (moved || !cancelOnlyOnMove || trapFocus)) {\n            cancel();\n        }\n        return didMatch;\n    }, [\n        rowGroupingNavBehavior,\n        overlayOpen,\n        gridSelection,\n        keybindings,\n        columnSelect,\n        rowSelect,\n        rangeSelect,\n        rowMarkerOffset,\n        mapper,\n        rows,\n        updateSelectedCell,\n        setGridSelection,\n        onSelectionCleared,\n        columnsIn.length,\n        onDelete,\n        trapFocus,\n        deleteRange,\n        setSelectedColumns,\n        setSelectedRows,\n        showTrailingBlankRow,\n        getCustomNewRowTargetColumn,\n        appendRow,\n        onCellActivated,\n        reselect,\n        fillDown,\n        fillRight,\n        adjustSelection,\n    ]);\n    const onKeyDown = React.useCallback((event) => {\n        let cancelled = false;\n        if (onKeyDownIn !== undefined) {\n            onKeyDownIn({\n                ...event,\n                cancel: () => {\n                    cancelled = true;\n                },\n            });\n        }\n        if (cancelled)\n            return;\n        if (handleFixedKeybindings(event))\n            return;\n        if (gridSelection.current === undefined)\n            return;\n        const [col, row] = gridSelection.current.cell;\n        const vr = visibleRegionRef.current;\n        if (editOnType &&\n            !event.metaKey &&\n            !event.ctrlKey &&\n            gridSelection.current !== undefined &&\n            event.key.length === 1 &&\n            /[ -~]/g.test(event.key) &&\n            event.bounds !== undefined &&\n            isReadWriteCell(getCellContent([col - rowMarkerOffset, Math.max(0, Math.min(row, rows - 1))]))) {\n            if ((!showTrailingBlankRow || row !== rows) &&\n                (vr.y > row || row > vr.y + vr.height || vr.x > col || col > vr.x + vr.width)) {\n                return;\n            }\n            reselect(event.bounds, true, event.key);\n            event.stopPropagation();\n            event.preventDefault();\n        }\n    }, [\n        editOnType,\n        onKeyDownIn,\n        handleFixedKeybindings,\n        gridSelection,\n        getCellContent,\n        rowMarkerOffset,\n        rows,\n        showTrailingBlankRow,\n        reselect,\n    ]);\n    const onContextMenu = React.useCallback((args, preventDefault) => {\n        const adjustedCol = args.location[0] - rowMarkerOffset;\n        if (args.kind === \"header\") {\n            onHeaderContextMenu?.(adjustedCol, { ...args, preventDefault });\n        }\n        if (args.kind === groupHeaderKind) {\n            if (adjustedCol < 0) {\n                return;\n            }\n            onGroupHeaderContextMenu?.(adjustedCol, { ...args, preventDefault });\n        }\n        if (args.kind === \"cell\") {\n            const [col, row] = args.location;\n            onCellContextMenu?.([adjustedCol, row], {\n                ...args,\n                preventDefault,\n            });\n            if (!gridSelectionHasItem(gridSelection, args.location)) {\n                updateSelectedCell(col, row, false, false);\n            }\n        }\n    }, [\n        gridSelection,\n        onCellContextMenu,\n        onGroupHeaderContextMenu,\n        onHeaderContextMenu,\n        rowMarkerOffset,\n        updateSelectedCell,\n    ]);\n    const onPasteInternal = React.useCallback(async (e) => {\n        if (!keybindings.paste)\n            return;\n        function pasteToCell(inner, target, rawValue, formatted) {\n            const stringifiedRawValue = typeof rawValue === \"object\" ? rawValue?.join(\"\\n\") ?? \"\" : rawValue?.toString() ?? \"\";\n            if (!isInnerOnlyCell(inner) && isReadWriteCell(inner) && inner.readonly !== true) {\n                const coerced = coercePasteValue?.(stringifiedRawValue, inner);\n                if (coerced !== undefined && isEditableGridCell(coerced)) {\n                    if (process.env.NODE_ENV !== \"production\" && coerced.kind !== inner.kind) {\n                        // eslint-disable-next-line no-console\n                        console.warn(\"Coercion should not change cell kind.\");\n                    }\n                    return {\n                        location: target,\n                        value: coerced,\n                    };\n                }\n                const r = getCellRenderer(inner);\n                if (r === undefined)\n                    return undefined;\n                if (r.kind === GridCellKind.Custom) {\n                    assert(inner.kind === GridCellKind.Custom);\n                    const newVal = r.onPaste?.(stringifiedRawValue, inner.data);\n                    if (newVal === undefined)\n                        return undefined;\n                    return {\n                        location: target,\n                        value: {\n                            ...inner,\n                            data: newVal,\n                        },\n                    };\n                }\n                else {\n                    const newVal = r.onPaste?.(stringifiedRawValue, inner, {\n                        formatted,\n                        formattedString: typeof formatted === \"string\" ? formatted : formatted?.join(\"\\n\"),\n                        rawValue,\n                    });\n                    if (newVal === undefined)\n                        return undefined;\n                    assert(newVal.kind === inner.kind);\n                    return {\n                        location: target,\n                        value: newVal,\n                    };\n                }\n            }\n            return undefined;\n        }\n        const selectedColumns = gridSelection.columns;\n        const selectedRows = gridSelection.rows;\n        const focused = scrollRef.current?.contains(document.activeElement) === true ||\n            canvasRef.current?.contains(document.activeElement) === true;\n        let target;\n        if (gridSelection.current !== undefined) {\n            target = [gridSelection.current.range.x, gridSelection.current.range.y];\n        }\n        else if (selectedColumns.length === 1) {\n            target = [selectedColumns.first() ?? 0, 0];\n        }\n        else if (selectedRows.length === 1) {\n            target = [rowMarkerOffset, selectedRows.first() ?? 0];\n        }\n        if (focused && target !== undefined) {\n            let data;\n            let text;\n            const textPlain = \"text/plain\";\n            const textHtml = \"text/html\";\n            if (navigator.clipboard.read !== undefined) {\n                const clipboardContent = await navigator.clipboard.read();\n                for (const item of clipboardContent) {\n                    if (item.types.includes(textHtml)) {\n                        const htmlBlob = await item.getType(textHtml);\n                        const html = await htmlBlob.text();\n                        const decoded = decodeHTML(html);\n                        if (decoded !== undefined) {\n                            data = decoded;\n                            break;\n                        }\n                    }\n                    if (item.types.includes(textPlain)) {\n                        // eslint-disable-next-line unicorn/no-await-expression-member\n                        text = await (await item.getType(textPlain)).text();\n                    }\n                }\n            }\n            else if (navigator.clipboard.readText !== undefined) {\n                text = await navigator.clipboard.readText();\n            }\n            else if (e !== undefined && e?.clipboardData !== null) {\n                if (e.clipboardData.types.includes(textHtml)) {\n                    const html = e.clipboardData.getData(textHtml);\n                    data = decodeHTML(html);\n                }\n                if (data === undefined && e.clipboardData.types.includes(textPlain)) {\n                    text = e.clipboardData.getData(textPlain);\n                }\n            }\n            else {\n                return; // I didn't want to read that paste value anyway\n            }\n            const [targetCol, targetRow] = target;\n            const editList = [];\n            do {\n                if (onPaste === undefined) {\n                    const cellData = getMangledCellContent(target);\n                    const rawValue = text ?? data?.map(r => r.map(cb => cb.rawValue).join(\"\\t\")).join(\"\\t\") ?? \"\";\n                    const newVal = pasteToCell(cellData, target, rawValue, undefined);\n                    if (newVal !== undefined) {\n                        editList.push(newVal);\n                    }\n                    break;\n                }\n                if (data === undefined) {\n                    if (text === undefined)\n                        return;\n                    data = unquote(text);\n                }\n                if (onPaste === false ||\n                    (typeof onPaste === \"function\" &&\n                        onPaste?.([target[0] - rowMarkerOffset, target[1]], data.map(r => r.map(cb => cb.rawValue?.toString() ?? \"\"))) !== true)) {\n                    return;\n                }\n                for (const [row, dataRow] of data.entries()) {\n                    if (row + targetRow >= rows)\n                        break;\n                    for (const [col, dataItem] of dataRow.entries()) {\n                        const index = [col + targetCol, row + targetRow];\n                        const [writeCol, writeRow] = index;\n                        if (writeCol >= mangledCols.length)\n                            continue;\n                        if (writeRow >= mangledRows)\n                            continue;\n                        const cellData = getMangledCellContent(index);\n                        const newVal = pasteToCell(cellData, index, dataItem.rawValue, dataItem.formatted);\n                        if (newVal !== undefined) {\n                            editList.push(newVal);\n                        }\n                    }\n                }\n                // eslint-disable-next-line no-constant-condition\n            } while (false);\n            mangledOnCellsEdited(editList);\n            gridRef.current?.damage(editList.map(c => ({\n                cell: c.location,\n            })));\n        }\n    }, [\n        coercePasteValue,\n        getCellRenderer,\n        getMangledCellContent,\n        gridSelection,\n        keybindings.paste,\n        scrollRef,\n        mangledCols.length,\n        mangledOnCellsEdited,\n        mangledRows,\n        onPaste,\n        rowMarkerOffset,\n        rows,\n    ]);\n    useEventListener(\"paste\", onPasteInternal, safeWindow, false, true);\n    // While this function is async, we deeply prefer not to await if we don't have to. This will lead to unpacking\n    // promises in rather awkward ways when possible to avoid awaiting. We have to use fallback copy mechanisms when\n    // an await has happened.\n    const onCopy = React.useCallback(async (e, ignoreFocus) => {\n        if (!keybindings.copy)\n            return;\n        const focused = ignoreFocus === true ||\n            scrollRef.current?.contains(document.activeElement) === true ||\n            canvasRef.current?.contains(document.activeElement) === true;\n        const selectedColumns = gridSelection.columns;\n        const selectedRows = gridSelection.rows;\n        const copyToClipboardWithHeaders = (cells, columnIndexes) => {\n            if (!copyHeaders) {\n                copyToClipboard(cells, columnIndexes, e);\n            }\n            else {\n                const headers = columnIndexes.map(index => ({\n                    kind: GridCellKind.Text,\n                    data: columnsIn[index].title,\n                    displayData: columnsIn[index].title,\n                    allowOverlay: false,\n                }));\n                copyToClipboard([headers, ...cells], columnIndexes, e);\n            }\n        };\n        if (focused && getCellsForSelection !== undefined) {\n            if (gridSelection.current !== undefined) {\n                let thunk = getCellsForSelection(gridSelection.current.range, abortControllerRef.current.signal);\n                if (typeof thunk !== \"object\") {\n                    thunk = await thunk();\n                }\n                copyToClipboardWithHeaders(thunk, range(gridSelection.current.range.x - rowMarkerOffset, gridSelection.current.range.x + gridSelection.current.range.width - rowMarkerOffset));\n            }\n            else if (selectedRows !== undefined && selectedRows.length > 0) {\n                const toCopy = [...selectedRows];\n                const cells = toCopy.map(rowIndex => {\n                    const thunk = getCellsForSelection({\n                        x: rowMarkerOffset,\n                        y: rowIndex,\n                        width: columnsIn.length,\n                        height: 1,\n                    }, abortControllerRef.current.signal);\n                    if (typeof thunk === \"object\") {\n                        return thunk[0];\n                    }\n                    return thunk().then(v => v[0]);\n                });\n                if (cells.some(x => x instanceof Promise)) {\n                    const settled = await Promise.all(cells);\n                    copyToClipboardWithHeaders(settled, range(columnsIn.length));\n                }\n                else {\n                    copyToClipboardWithHeaders(cells, range(columnsIn.length));\n                }\n            }\n            else if (selectedColumns.length > 0) {\n                const results = [];\n                const cols = [];\n                for (const col of selectedColumns) {\n                    let thunk = getCellsForSelection({\n                        x: col,\n                        y: 0,\n                        width: 1,\n                        height: rows,\n                    }, abortControllerRef.current.signal);\n                    if (typeof thunk !== \"object\") {\n                        thunk = await thunk();\n                    }\n                    results.push(thunk);\n                    cols.push(col - rowMarkerOffset);\n                }\n                if (results.length === 1) {\n                    copyToClipboardWithHeaders(results[0], cols);\n                }\n                else {\n                    // FIXME: this is dumb\n                    const toCopy = results.reduce((pv, cv) => pv.map((row, index) => [...row, ...cv[index]]));\n                    copyToClipboardWithHeaders(toCopy, cols);\n                }\n            }\n        }\n    }, [\n        columnsIn,\n        getCellsForSelection,\n        gridSelection,\n        keybindings.copy,\n        rowMarkerOffset,\n        scrollRef,\n        rows,\n        copyHeaders,\n    ]);\n    useEventListener(\"copy\", onCopy, safeWindow, false, false);\n    const onCut = React.useCallback(async (e) => {\n        if (!keybindings.cut)\n            return;\n        const focused = scrollRef.current?.contains(document.activeElement) === true ||\n            canvasRef.current?.contains(document.activeElement) === true;\n        if (!focused)\n            return;\n        await onCopy(e);\n        if (gridSelection.current !== undefined) {\n            let effectiveSelection = {\n                current: {\n                    cell: gridSelection.current.cell,\n                    range: gridSelection.current.range,\n                    rangeStack: [],\n                },\n                rows: CompactSelection.empty(),\n                columns: CompactSelection.empty(),\n            };\n            const onDeleteResult = onDelete?.(effectiveSelection);\n            if (onDeleteResult === false)\n                return;\n            effectiveSelection = onDeleteResult === true ? effectiveSelection : onDeleteResult;\n            if (effectiveSelection.current === undefined)\n                return;\n            deleteRange(effectiveSelection.current.range);\n        }\n    }, [deleteRange, gridSelection, keybindings.cut, onCopy, scrollRef, onDelete]);\n    useEventListener(\"cut\", onCut, safeWindow, false, false);\n    const onSearchResultsChanged = React.useCallback((results, navIndex) => {\n        if (onSearchResultsChangedIn !== undefined) {\n            if (rowMarkerOffset !== 0) {\n                results = results.map(item => [item[0] - rowMarkerOffset, item[1]]);\n            }\n            onSearchResultsChangedIn(results, navIndex);\n            return;\n        }\n        if (results.length === 0 || navIndex === -1)\n            return;\n        const [col, row] = results[navIndex];\n        if (lastSent.current !== undefined && lastSent.current[0] === col && lastSent.current[1] === row) {\n            return;\n        }\n        lastSent.current = [col, row];\n        updateSelectedCell(col, row, false, false);\n    }, [onSearchResultsChangedIn, rowMarkerOffset, updateSelectedCell]);\n    // this effects purpose in life is to scroll the newly selected cell into view when and ONLY when that cell\n    // is from an external gridSelection change. Also note we want the unmangled out selection because scrollTo\n    // expects unmangled indexes\n    const [outCol, outRow] = gridSelectionOuter?.current?.cell ?? [];\n    const scrollToRef = React.useRef(scrollTo);\n    scrollToRef.current = scrollTo;\n    React.useLayoutEffect(() => {\n        if (scrollToActiveCellRef.current &&\n            !hasJustScrolled.current &&\n            outCol !== undefined &&\n            outRow !== undefined &&\n            (outCol !== expectedExternalGridSelection.current?.current?.cell[0] ||\n                outRow !== expectedExternalGridSelection.current?.current?.cell[1])) {\n            scrollToRef.current(outCol, outRow);\n        }\n        hasJustScrolled.current = false; //only allow skipping a single scroll\n    }, [outCol, outRow]);\n    const selectionOutOfBounds = gridSelection.current !== undefined &&\n        (gridSelection.current.cell[0] >= mangledCols.length || gridSelection.current.cell[1] >= mangledRows);\n    React.useLayoutEffect(() => {\n        if (selectionOutOfBounds) {\n            setGridSelection(emptyGridSelection, false);\n        }\n    }, [selectionOutOfBounds, setGridSelection]);\n    const disabledRows = React.useMemo(() => {\n        if (showTrailingBlankRow === true && trailingRowOptions?.tint === true) {\n            return CompactSelection.fromSingleSelection(mangledRows - 1);\n        }\n        return CompactSelection.empty();\n    }, [mangledRows, showTrailingBlankRow, trailingRowOptions?.tint]);\n    const mangledVerticalBorder = React.useCallback((col) => {\n        return typeof verticalBorder === \"boolean\"\n            ? verticalBorder\n            : verticalBorder?.(col - rowMarkerOffset) ?? true;\n    }, [rowMarkerOffset, verticalBorder]);\n    const renameGroupNode = React.useMemo(() => {\n        if (renameGroup === undefined || canvasRef.current === null)\n            return null;\n        const { bounds, group } = renameGroup;\n        const canvasBounds = canvasRef.current.getBoundingClientRect();\n        return (React.createElement(GroupRename, { bounds: bounds, group: group, canvasBounds: canvasBounds, onClose: () => setRenameGroup(undefined), onFinish: newVal => {\n                setRenameGroup(undefined);\n                onGroupHeaderRenamed?.(group, newVal);\n            } }));\n    }, [onGroupHeaderRenamed, renameGroup]);\n    const mangledFreezeColumns = Math.min(mangledCols.length, freezeColumns + (hasRowMarkers ? 1 : 0));\n    React.useImperativeHandle(forwardedRef, () => ({\n        appendRow: (col, openOverlay) => appendRow(col + rowMarkerOffset, openOverlay),\n        updateCells: damageList => {\n            if (rowMarkerOffset !== 0) {\n                damageList = damageList.map(x => ({ cell: [x.cell[0] + rowMarkerOffset, x.cell[1]] }));\n            }\n            return gridRef.current?.damage(damageList);\n        },\n        getBounds: (col, row) => {\n            if (canvasRef?.current === null || scrollRef?.current === null) {\n                return undefined;\n            }\n            if (col === undefined && row === undefined) {\n                // Return the bounds of the entire scroll area:\n                const rect = canvasRef.current.getBoundingClientRect();\n                const scale = rect.width / scrollRef.current.clientWidth;\n                return {\n                    x: rect.x - scrollRef.current.scrollLeft * scale,\n                    y: rect.y - scrollRef.current.scrollTop * scale,\n                    width: scrollRef.current.scrollWidth * scale,\n                    height: scrollRef.current.scrollHeight * scale,\n                };\n            }\n            return gridRef.current?.getBounds((col ?? 0) + rowMarkerOffset, row);\n        },\n        focus: () => gridRef.current?.focus(),\n        emit: async (e) => {\n            switch (e) {\n                case \"delete\":\n                    onKeyDown({\n                        bounds: undefined,\n                        cancel: () => undefined,\n                        stopPropagation: () => undefined,\n                        preventDefault: () => undefined,\n                        ctrlKey: false,\n                        key: \"Delete\",\n                        keyCode: 46,\n                        metaKey: false,\n                        shiftKey: false,\n                        altKey: false,\n                        rawEvent: undefined,\n                        location: undefined,\n                    });\n                    break;\n                case \"fill-right\":\n                    onKeyDown({\n                        bounds: undefined,\n                        cancel: () => undefined,\n                        stopPropagation: () => undefined,\n                        preventDefault: () => undefined,\n                        ctrlKey: true,\n                        key: \"r\",\n                        keyCode: 82,\n                        metaKey: false,\n                        shiftKey: false,\n                        altKey: false,\n                        rawEvent: undefined,\n                        location: undefined,\n                    });\n                    break;\n                case \"fill-down\":\n                    onKeyDown({\n                        bounds: undefined,\n                        cancel: () => undefined,\n                        stopPropagation: () => undefined,\n                        preventDefault: () => undefined,\n                        ctrlKey: true,\n                        key: \"d\",\n                        keyCode: 68,\n                        metaKey: false,\n                        shiftKey: false,\n                        altKey: false,\n                        rawEvent: undefined,\n                        location: undefined,\n                    });\n                    break;\n                case \"copy\":\n                    await onCopy(undefined, true);\n                    break;\n                case \"paste\":\n                    await onPasteInternal();\n                    break;\n            }\n        },\n        scrollTo,\n        remeasureColumns: cols => {\n            for (const col of cols) {\n                void normalSizeColumn(col + rowMarkerOffset);\n            }\n        },\n    }), [appendRow, normalSizeColumn, scrollRef, onCopy, onKeyDown, onPasteInternal, rowMarkerOffset, scrollTo]);\n    const [selCol, selRow] = currentCell ?? [];\n    const onCellFocused = React.useCallback((cell) => {\n        const [col, row] = cell;\n        if (row === -1) {\n            if (columnSelect !== \"none\") {\n                setSelectedColumns(CompactSelection.fromSingleSelection(col), undefined, false);\n                focus();\n            }\n            return;\n        }\n        if (selCol === col && selRow === row)\n            return;\n        setCurrent({\n            cell,\n            range: { x: col, y: row, width: 1, height: 1 },\n        }, true, false, \"keyboard-nav\");\n        scrollTo(col, row);\n    }, [columnSelect, focus, scrollTo, selCol, selRow, setCurrent, setSelectedColumns]);\n    const [isFocused, setIsFocused] = React.useState(false);\n    const setIsFocusedDebounced = React.useRef(debounce((val) => {\n        setIsFocused(val);\n    }, 5));\n    const onCanvasFocused = React.useCallback(() => {\n        setIsFocusedDebounced.current(true);\n        // check for mouse state, don't do anything if the user is clicked to focus.\n        if (gridSelection.current === undefined &&\n            gridSelection.columns.length === 0 &&\n            gridSelection.rows.length === 0 &&\n            mouseState === undefined) {\n            setCurrent({\n                cell: [rowMarkerOffset, cellYOffset],\n                range: {\n                    x: rowMarkerOffset,\n                    y: cellYOffset,\n                    width: 1,\n                    height: 1,\n                },\n            }, true, false, \"keyboard-select\");\n        }\n    }, [cellYOffset, gridSelection, mouseState, rowMarkerOffset, setCurrent]);\n    const onFocusOut = React.useCallback(() => {\n        setIsFocusedDebounced.current(false);\n    }, []);\n    const [idealWidth, idealHeight] = React.useMemo(() => {\n        let h;\n        const scrollbarWidth = experimental?.scrollbarWidthOverride ?? getScrollBarWidth();\n        const rowsCountWithTrailingRow = rows + (showTrailingBlankRow ? 1 : 0);\n        if (typeof rowHeight === \"number\") {\n            h = totalHeaderHeight + rowsCountWithTrailingRow * rowHeight;\n        }\n        else {\n            let avg = 0;\n            const toAverage = Math.min(rowsCountWithTrailingRow, 10);\n            for (let i = 0; i < toAverage; i++) {\n                avg += rowHeight(i);\n            }\n            avg = Math.floor(avg / toAverage);\n            h = totalHeaderHeight + rowsCountWithTrailingRow * avg;\n        }\n        h += scrollbarWidth;\n        const w = mangledCols.reduce((acc, x) => x.width + acc, 0) + scrollbarWidth;\n        // We need to set a reasonable cap here as some browsers will just ignore huge values\n        // rather than treat them as huge values.\n        return [`${Math.min(100000, w)}px`, `${Math.min(100000, h)}px`];\n    }, [mangledCols, experimental?.scrollbarWidthOverride, rowHeight, rows, showTrailingBlankRow, totalHeaderHeight]);\n    const cssStyle = React.useMemo(() => {\n        return makeCSSStyle(mergedTheme);\n    }, [mergedTheme]);\n    return (React.createElement(ThemeContext.Provider, { value: mergedTheme },\n        React.createElement(DataEditorContainer, { style: cssStyle, className: className, inWidth: width ?? idealWidth, inHeight: height ?? idealHeight },\n            React.createElement(DataGridSearch, { fillHandle: fillHandle, drawFocusRing: drawFocusRing, experimental: experimental, fixedShadowX: fixedShadowX, fixedShadowY: fixedShadowY, getRowThemeOverride: getRowThemeOverride, headerIcons: headerIcons, imageWindowLoader: imageWindowLoader, initialSize: initialSize, isDraggable: isDraggable, onDragLeave: onDragLeave, onRowMoved: onRowMoved, overscrollX: overscrollX, overscrollY: overscrollY, preventDiagonalScrolling: preventDiagonalScrolling, rightElement: rightElement, rightElementProps: rightElementProps, smoothScrollX: smoothScrollX, smoothScrollY: smoothScrollY, className: className, enableGroups: enableGroups, onCanvasFocused: onCanvasFocused, onCanvasBlur: onFocusOut, canvasRef: canvasRef, onContextMenu: onContextMenu, theme: mergedTheme, cellXOffset: cellXOffset, cellYOffset: cellYOffset, accessibilityHeight: visibleRegion.height, onDragEnd: onDragEnd, columns: mangledCols, nonGrowWidth: nonGrowWidth, drawHeader: drawHeader, onColumnProposeMove: onColumnProposeMove, drawCell: drawCell, disabledRows: disabledRows, freezeColumns: mangledFreezeColumns, lockColumns: rowMarkerOffset, firstColAccessible: rowMarkerOffset === 0, getCellContent: getMangledCellContent, minColumnWidth: minColumnWidth, maxColumnWidth: maxColumnWidth, searchInputRef: searchInputRef, showSearch: showSearch, onSearchClose: onSearchClose, highlightRegions: highlightRegions, getCellsForSelection: getCellsForSelection, getGroupDetails: mangledGetGroupDetails, headerHeight: headerHeight, isFocused: isFocused, groupHeaderHeight: enableGroups ? groupHeaderHeight : 0, freezeTrailingRows: freezeTrailingRows + (showTrailingBlankRow && trailingRowOptions?.sticky === true ? 1 : 0), hasAppendRow: showTrailingBlankRow, onColumnResize: onColumnResize, onColumnResizeEnd: onColumnResizeEnd, onColumnResizeStart: onColumnResizeStart, onCellFocused: onCellFocused, onColumnMoved: onColumnMovedImpl, onDragStart: onDragStartImpl, onHeaderMenuClick: onHeaderMenuClickInner, onHeaderIndicatorClick: onHeaderIndicatorClickInner, onItemHovered: onItemHoveredImpl, isFilling: mouseState?.fillHandle === true, onMouseMove: onMouseMoveImpl, onKeyDown: onKeyDown, onKeyUp: onKeyUpIn, onMouseDown: onMouseDown, onMouseUp: onMouseUp, onDragOverCell: onDragOverCell, onDrop: onDrop, onSearchResultsChanged: onSearchResultsChanged, onVisibleRegionChanged: onVisibleRegionChangedImpl, clientSize: clientSize, rowHeight: rowHeight, searchResults: searchResults, searchValue: searchValue, onSearchValueChange: onSearchValueChange, rows: mangledRows, scrollRef: scrollRef, selection: gridSelection, translateX: visibleRegion.tx, translateY: visibleRegion.ty, verticalBorder: mangledVerticalBorder, gridRef: gridRef, getCellRenderer: getCellRenderer, resizeIndicator: resizeIndicator }),\n            renameGroupNode,\n            overlay !== undefined && (React.createElement(React.Suspense, { fallback: null },\n                React.createElement(DataGridOverlayEditor, { ...overlay, validateCell: validateCell, bloom: editorBloom, id: overlayID, getCellRenderer: getCellRenderer, className: experimental?.isSubGrid === true ? \"click-outside-ignore\" : undefined, provideEditor: provideEditor, imageEditorOverride: imageEditorOverride, onFinishEditing: onFinishEditing, markdownDivCreateNode: markdownDivCreateNode, isOutsideClick: isOutsideClick }))))));\n};\n/**\n * The primary component of Glide Data Grid.\n * @category DataEditor\n * @param {DataEditorProps} props\n */\nexport const DataEditor = React.forwardRef(DataEditorImpl);\n//# sourceMappingURL=data-editor.js.map","import { getSquareWidth, getSquareXPosFromAlign, getSquareBB, pointIsWithinBB } from \"../common/utils.js\";\nimport { toggleBoolean } from \"../data-editor/data-editor-fns.js\";\nimport { GridCellKind, booleanCellIsEditable, BooleanEmpty, BooleanIndeterminate, } from \"../internal/data-grid/data-grid-types.js\";\nimport { drawCheckbox } from \"../internal/data-grid/render/draw-checkbox.js\";\nconst defaultCellMaxSize = 20;\nfunction isOverEditableRegion(e) {\n    const { cell, posX: pointerX, posY: pointerY, bounds, theme } = e;\n    const { width, height, x: cellX, y: cellY } = bounds;\n    const maxWidth = cell.maxSize ?? defaultCellMaxSize;\n    const cellCenterY = Math.floor(bounds.y + height / 2);\n    const checkBoxWidth = getSquareWidth(maxWidth, height, theme.cellVerticalPadding);\n    const posX = getSquareXPosFromAlign(cell.contentAlign ?? \"center\", cellX, width, theme.cellHorizontalPadding, checkBoxWidth);\n    const bb = getSquareBB(posX, cellCenterY, checkBoxWidth);\n    const checkBoxClicked = pointIsWithinBB(cellX + pointerX, cellY + pointerY, bb);\n    return booleanCellIsEditable(cell) && checkBoxClicked;\n}\nexport const booleanCellRenderer = {\n    getAccessibilityString: c => c.data?.toString() ?? \"false\",\n    kind: GridCellKind.Boolean,\n    needsHover: true,\n    useLabel: false,\n    needsHoverPosition: true,\n    measure: () => 50,\n    draw: a => drawBoolean(a, a.cell.data, booleanCellIsEditable(a.cell), a.cell.maxSize ?? defaultCellMaxSize, a.cell.hoverEffectIntensity ?? 0.35),\n    onDelete: c => ({\n        ...c,\n        data: false,\n    }),\n    onSelect: e => {\n        if (isOverEditableRegion(e)) {\n            e.preventDefault();\n        }\n    },\n    onClick: e => {\n        if (isOverEditableRegion(e)) {\n            return {\n                ...e.cell,\n                data: toggleBoolean(e.cell.data),\n            };\n        }\n        return undefined;\n    },\n    onPaste: (toPaste, cell) => {\n        let newVal = BooleanEmpty;\n        if (toPaste.toLowerCase() === \"true\") {\n            newVal = true;\n        }\n        else if (toPaste.toLowerCase() === \"false\") {\n            newVal = false;\n        }\n        else if (toPaste.toLowerCase() === \"indeterminate\") {\n            newVal = BooleanIndeterminate;\n        }\n        return newVal === cell.data\n            ? undefined\n            : {\n                ...cell,\n                data: newVal,\n            };\n    },\n};\nfunction drawBoolean(args, data, canEdit, maxSize, hoverEffectIntensity) {\n    if (!canEdit && data === BooleanEmpty) {\n        return;\n    }\n    const { ctx, hoverAmount, theme, rect, highlighted, hoverX, hoverY, cell: { contentAlign }, } = args;\n    const { x, y, width: w, height: h } = rect;\n    // Don't set the global alpha unnecessarily\n    let shouldRestoreAlpha = false;\n    if (hoverEffectIntensity > 0) {\n        let alpha = canEdit ? 1 - hoverEffectIntensity + hoverEffectIntensity * hoverAmount : 0.4;\n        if (data === BooleanEmpty) {\n            alpha *= hoverAmount;\n        }\n        if (alpha === 0) {\n            return;\n        }\n        if (alpha < 1) {\n            shouldRestoreAlpha = true;\n            ctx.globalAlpha = alpha;\n        }\n    }\n    drawCheckbox(ctx, theme, data, x, y, w, h, highlighted, hoverX, hoverY, maxSize, contentAlign);\n    if (shouldRestoreAlpha) {\n        ctx.globalAlpha = 1;\n    }\n}\n//# sourceMappingURL=boolean-cell.js.map","import { styled } from \"@linaria/react\";\nexport const BubblesOverlayEditorStyle = /*#__PURE__*/styled('div')({\n  name: \"BubblesOverlayEditorStyle\",\n  class: \"gdg-b1ygi5by\",\n  propsAsIs: false\n});\n\n","import * as React from \"react\";\nimport { BubblesOverlayEditorStyle } from \"./bubbles-overlay-editor-style.js\";\nconst BubblesOverlayEditor = p => {\n    const { bubbles } = p;\n    return (React.createElement(BubblesOverlayEditorStyle, null,\n        bubbles.map((b, i) => (React.createElement(\"div\", { key: i, className: \"boe-bubble\" }, b))),\n        React.createElement(\"textarea\", { className: \"gdg-input\", autoFocus: true })));\n};\nexport default BubblesOverlayEditor;\n//# sourceMappingURL=bubbles-overlay-editor.js.map","/* eslint-disable react/display-name */\nimport * as React from \"react\";\nimport BubblesOverlayEditor from \"../internal/data-grid-overlay-editor/private/bubbles-overlay-editor.js\";\nimport { getMiddleCenterBias, measureTextCached, roundedRect } from \"../internal/data-grid/render/data-grid-lib.js\";\nimport { GridCellKind } from \"../internal/data-grid/data-grid-types.js\";\nimport { makeAccessibilityStringForArray } from \"../common/utils.js\";\nexport const bubbleCellRenderer = {\n    getAccessibilityString: c => makeAccessibilityStringForArray(c.data),\n    kind: GridCellKind.Bubble,\n    needsHover: false,\n    useLabel: false,\n    needsHoverPosition: false,\n    measure: (ctx, cell, t) => cell.data.reduce((acc, data) => ctx.measureText(data).width + acc + 20, 0) + 2 * t.cellHorizontalPadding - 4,\n    draw: a => drawBubbles(a, a.cell.data),\n    provideEditor: () => p => {\n        const { value } = p;\n        return React.createElement(BubblesOverlayEditor, { bubbles: value.data });\n    },\n    onPaste: () => undefined,\n};\nconst itemMargin = 4;\nfunction drawBubbles(args, data) {\n    const { rect, theme, ctx, highlighted } = args;\n    const { x, y, width: w, height: h } = rect;\n    const bubbleHeight = 20;\n    const bubblePad = 8;\n    const bubbleMargin = itemMargin;\n    let renderX = x + theme.cellHorizontalPadding;\n    const renderBoxes = [];\n    for (const s of data) {\n        if (renderX > x + w)\n            break;\n        const textWidth = measureTextCached(s, ctx, theme.baseFontFull).width;\n        renderBoxes.push({\n            x: renderX,\n            width: textWidth,\n        });\n        renderX += textWidth + bubblePad * 2 + bubbleMargin;\n    }\n    ctx.beginPath();\n    for (const rectInfo of renderBoxes) {\n        roundedRect(ctx, rectInfo.x, y + (h - bubbleHeight) / 2, rectInfo.width + bubblePad * 2, bubbleHeight, theme.roundingRadius ?? bubbleHeight / 2);\n    }\n    ctx.fillStyle = highlighted ? theme.bgBubbleSelected : theme.bgBubble;\n    ctx.fill();\n    for (const [i, rectInfo] of renderBoxes.entries()) {\n        ctx.beginPath();\n        ctx.fillStyle = theme.textBubble;\n        ctx.fillText(data[i], rectInfo.x + bubblePad, y + h / 2 + getMiddleCenterBias(ctx, theme));\n    }\n}\n//# sourceMappingURL=bubble-cell.js.map","import * as React from \"react\";\nimport { styled } from \"@linaria/react\";\nconst DrilldownOverlayEditorStyle = /*#__PURE__*/styled('div')({\n  name: \"DrilldownOverlayEditorStyle\",\n  class: \"gdg-d4zsq0x\",\n  propsAsIs: false\n});\nconst DrilldownOverlayEditor = p => {\n  const {\n    drilldowns\n  } = p;\n  return React.createElement(DrilldownOverlayEditorStyle, null, drilldowns.map((d, i) => React.createElement(\"div\", {\n    key: i,\n    className: \"doe-bubble\"\n  }, d.img !== undefined && React.createElement(\"img\", {\n    src: d.img\n  }), React.createElement(\"div\", null, d.text))));\n};\nexport default DrilldownOverlayEditor;\n\n","/* eslint-disable react/display-name */\nimport * as React from \"react\";\nimport DrilldownOverlayEditor from \"../internal/data-grid-overlay-editor/private/drilldown-overlay-editor.js\";\nimport { getEmHeight, getMiddleCenterBias, measureTextCached, roundedRect, } from \"../internal/data-grid/render/data-grid-lib.js\";\nimport { GridCellKind } from \"../internal/data-grid/data-grid-types.js\";\nimport { makeAccessibilityStringForArray } from \"../common/utils.js\";\nexport const drilldownCellRenderer = {\n    getAccessibilityString: c => makeAccessibilityStringForArray(c.data.map(d => d.text)),\n    kind: GridCellKind.Drilldown,\n    needsHover: false,\n    useLabel: false,\n    needsHoverPosition: false,\n    measure: (ctx, cell, t) => cell.data.reduce((acc, data) => ctx.measureText(data.text).width + acc + 20 + (data.img !== undefined ? 18 : 0), 0) +\n        2 * t.cellHorizontalPadding -\n        4,\n    draw: a => drawDrilldownCell(a, a.cell.data),\n    provideEditor: () => p => {\n        const { value } = p;\n        return React.createElement(DrilldownOverlayEditor, { drilldowns: value.data });\n    },\n    onPaste: () => undefined,\n};\nconst itemMargin = 4;\nconst drilldownCache = {};\nfunction getAndCacheDrilldownBorder(bgCell, border, height, rounding) {\n    const dpr = Math.ceil(window.devicePixelRatio);\n    const shadowBlur = 5;\n    const targetHeight = height - shadowBlur * 2;\n    const middleWidth = 4;\n    const innerHeight = height * dpr;\n    const sideWidth = rounding + shadowBlur;\n    const targetWidth = rounding * 3;\n    const innerWidth = (targetWidth + shadowBlur * 2) * dpr;\n    const key = `${bgCell},${border},${dpr},${height}`;\n    if (drilldownCache[key] !== undefined) {\n        return {\n            el: drilldownCache[key],\n            height: innerHeight,\n            width: innerWidth,\n            middleWidth: middleWidth * dpr,\n            sideWidth: sideWidth * dpr,\n            padding: shadowBlur * dpr,\n            dpr,\n        };\n    }\n    const canvas = document.createElement(\"canvas\");\n    const ctx = canvas.getContext(\"2d\"); // alpha needed\n    if (ctx === null)\n        return null;\n    canvas.width = innerWidth;\n    canvas.height = innerHeight;\n    ctx.scale(dpr, dpr);\n    drilldownCache[key] = canvas;\n    ctx.beginPath();\n    roundedRect(ctx, shadowBlur, shadowBlur, targetWidth, targetHeight, rounding);\n    ctx.shadowColor = \"rgba(24, 25, 34, 0.4)\";\n    ctx.shadowBlur = 1;\n    ctx.fillStyle = bgCell;\n    ctx.fill();\n    ctx.shadowColor = \"rgba(24, 25, 34, 0.3)\";\n    ctx.shadowOffsetY = 1;\n    ctx.shadowBlur = 5;\n    ctx.fillStyle = bgCell;\n    ctx.fill();\n    ctx.shadowOffsetY = 0;\n    ctx.shadowBlur = 0;\n    ctx.shadowBlur = 0;\n    ctx.beginPath();\n    roundedRect(ctx, shadowBlur + 0.5, shadowBlur + 0.5, targetWidth, targetHeight, rounding);\n    ctx.strokeStyle = border;\n    ctx.lineWidth = 1;\n    ctx.stroke();\n    return {\n        el: canvas,\n        height: innerHeight,\n        width: innerWidth,\n        sideWidth: sideWidth * dpr,\n        middleWidth: rounding * dpr,\n        padding: shadowBlur * dpr,\n        dpr,\n    };\n}\nfunction drawDrilldownCell(args, data) {\n    const { rect, theme, ctx, imageLoader, col, row } = args;\n    const { x, width: w } = rect;\n    const font = theme.baseFontFull;\n    const emHeight = getEmHeight(ctx, font);\n    const h = Math.min(rect.height, Math.max(16, Math.ceil(emHeight * theme.lineHeight) * 2));\n    const y = Math.floor(rect.y + (rect.height - h) / 2);\n    const bubbleHeight = h - 10;\n    const bubblePad = 8;\n    const bubbleMargin = itemMargin;\n    let renderX = x + theme.cellHorizontalPadding;\n    const rounding = theme.roundingRadius ?? 6;\n    const tileMap = getAndCacheDrilldownBorder(theme.bgCell, theme.drilldownBorder, h, rounding);\n    const renderBoxes = [];\n    for (const el of data) {\n        if (renderX > x + w)\n            break;\n        const textMetrics = measureTextCached(el.text, ctx, font);\n        const textWidth = textMetrics.width;\n        let imgWidth = 0;\n        if (el.img !== undefined) {\n            const img = imageLoader.loadOrGetImage(el.img, col, row);\n            if (img !== undefined) {\n                imgWidth = bubbleHeight - 8 + 4;\n            }\n        }\n        const renderWidth = textWidth + imgWidth + bubblePad * 2;\n        renderBoxes.push({\n            x: renderX,\n            width: renderWidth,\n        });\n        renderX += renderWidth + bubbleMargin;\n    }\n    if (tileMap !== null) {\n        const { el, height, middleWidth, sideWidth, width, dpr, padding } = tileMap;\n        const outerSideWidth = sideWidth / dpr;\n        const outerPadding = padding / dpr;\n        for (const rectInfo of renderBoxes) {\n            const rx = Math.floor(rectInfo.x);\n            const rw = Math.floor(rectInfo.width);\n            const outerMiddleWidth = rw - (outerSideWidth - outerPadding) * 2;\n            ctx.imageSmoothingEnabled = false;\n            ctx.drawImage(el, 0, 0, sideWidth, height, rx - outerPadding, y, outerSideWidth, h);\n            if (outerMiddleWidth > 0)\n                ctx.drawImage(el, sideWidth, 0, middleWidth, height, rx + (outerSideWidth - outerPadding), y, outerMiddleWidth, h);\n            ctx.drawImage(el, width - sideWidth, 0, sideWidth, height, rx + rw - (outerSideWidth - outerPadding), y, outerSideWidth, h);\n            ctx.imageSmoothingEnabled = true;\n        }\n    }\n    ctx.beginPath();\n    for (const [i, rectInfo] of renderBoxes.entries()) {\n        const d = data[i];\n        let drawX = rectInfo.x + bubblePad;\n        if (d.img !== undefined) {\n            const img = imageLoader.loadOrGetImage(d.img, col, row);\n            if (img !== undefined) {\n                const imgSize = bubbleHeight - 8;\n                let srcX = 0;\n                let srcY = 0;\n                let srcWidth = img.width;\n                let srcHeight = img.height;\n                if (srcWidth > srcHeight) {\n                    // landscape\n                    srcX += (srcWidth - srcHeight) / 2;\n                    srcWidth = srcHeight;\n                }\n                else if (srcHeight > srcWidth) {\n                    //portrait\n                    srcY += (srcHeight - srcWidth) / 2;\n                    srcHeight = srcWidth;\n                }\n                ctx.beginPath();\n                roundedRect(ctx, drawX, y + h / 2 - imgSize / 2, imgSize, imgSize, theme.roundingRadius ?? 3);\n                ctx.save();\n                ctx.clip();\n                ctx.drawImage(img, srcX, srcY, srcWidth, srcHeight, drawX, y + h / 2 - imgSize / 2, imgSize, imgSize);\n                ctx.restore();\n                drawX += imgSize + 4;\n            }\n        }\n        ctx.beginPath();\n        ctx.fillStyle = theme.textBubble;\n        ctx.fillText(d.text, drawX, y + h / 2 + getMiddleCenterBias(ctx, theme));\n    }\n}\n//# sourceMappingURL=drilldown-cell.js.map","/* eslint-disable react/display-name */\nimport * as React from \"react\";\nimport { ImageOverlayEditor } from \"../internal/data-grid-overlay-editor/private/image-overlay-editor.js\";\nimport { roundedRect } from \"../internal/data-grid/render/data-grid-lib.js\";\nimport { GridCellKind } from \"../internal/data-grid/data-grid-types.js\";\nexport const imageCellRenderer = {\n    getAccessibilityString: c => c.data.join(\", \"),\n    kind: GridCellKind.Image,\n    needsHover: false,\n    useLabel: false,\n    needsHoverPosition: false,\n    draw: a => drawImage(a, a.cell.displayData ?? a.cell.data, a.cell.rounding ?? a.theme.roundingRadius ?? 4, a.cell.contentAlign),\n    measure: (_ctx, cell) => cell.data.length * 50,\n    onDelete: c => ({\n        ...c,\n        data: [],\n    }),\n    provideEditor: () => p => {\n        const { value, onFinishedEditing, imageEditorOverride } = p;\n        const ImageEditor = imageEditorOverride ?? ImageOverlayEditor;\n        return (React.createElement(ImageEditor, { urls: value.data, canWrite: value.readonly !== true, onCancel: onFinishedEditing, onChange: newImage => {\n                onFinishedEditing({\n                    ...value,\n                    data: [newImage],\n                });\n            } }));\n    },\n    onPaste: (toPaste, cell) => {\n        toPaste = toPaste.trim();\n        const fragments = toPaste.split(\",\");\n        const uris = fragments\n            .map(f => {\n            try {\n                new URL(f);\n                return f;\n            }\n            catch {\n                return undefined;\n            }\n        })\n            .filter(x => x !== undefined);\n        if (uris.length === cell.data.length && uris.every((u, i) => u === cell.data[i]))\n            return undefined;\n        return {\n            ...cell,\n            data: uris,\n        };\n    },\n};\nconst itemMargin = 4;\nexport function drawImage(args, data, rounding, contentAlign) {\n    const { rect, col, row, theme, ctx, imageLoader } = args;\n    const { x, y, height: h, width: w } = rect;\n    const imgHeight = h - theme.cellVerticalPadding * 2;\n    const images = [];\n    let totalWidth = 0;\n    // eslint-disable-next-line unicorn/no-for-loop\n    for (let index = 0; index < data.length; index++) {\n        const i = data[index];\n        if (i.length === 0)\n            continue;\n        const img = imageLoader.loadOrGetImage(i, col, row);\n        if (img !== undefined) {\n            images[index] = img;\n            const imgWidth = img.width * (imgHeight / img.height);\n            totalWidth += imgWidth + itemMargin;\n        }\n    }\n    if (totalWidth === 0)\n        return;\n    totalWidth -= itemMargin;\n    let drawX = x + theme.cellHorizontalPadding;\n    if (contentAlign === \"right\")\n        drawX = Math.floor(x + w - theme.cellHorizontalPadding - totalWidth);\n    else if (contentAlign === \"center\")\n        drawX = Math.floor(x + w / 2 - totalWidth / 2);\n    for (const img of images) {\n        if (img === undefined)\n            continue; //array is sparse\n        const imgWidth = img.width * (imgHeight / img.height);\n        if (rounding > 0) {\n            ctx.beginPath();\n            roundedRect(ctx, drawX, y + theme.cellVerticalPadding, imgWidth, imgHeight, rounding);\n            ctx.save();\n            ctx.clip();\n        }\n        ctx.drawImage(img, drawX, y + theme.cellVerticalPadding, imgWidth, imgHeight);\n        if (rounding > 0) {\n            ctx.restore();\n        }\n        drawX += imgWidth + itemMargin;\n    }\n}\n//# sourceMappingURL=image-cell.js.map","import { withAlpha } from \"../internal/data-grid/color-parser.js\";\nimport { roundedRect } from \"../internal/data-grid/render/data-grid-lib.js\";\nimport { GridCellKind } from \"../internal/data-grid/data-grid-types.js\";\n// returns a \"random\" number between -1 and 1\nfunction getRandomNumber(x, y) {\n    let seed = x * 49632 + y * 325176;\n    // Inline Xorshift algorithm\n    seed ^= seed << 13;\n    seed ^= seed >> 17;\n    seed ^= seed << 5;\n    // eslint-disable-next-line unicorn/number-literal-case\n    return (seed / 4294967295) * 2;\n}\nexport const loadingCellRenderer = {\n    getAccessibilityString: () => \"\",\n    kind: GridCellKind.Loading,\n    needsHover: false,\n    useLabel: false,\n    needsHoverPosition: false,\n    measure: () => 120,\n    draw: a => {\n        const { cell, col, row, ctx, rect, theme } = a;\n        if (cell.skeletonWidth === undefined || cell.skeletonWidth === 0) {\n            return;\n        }\n        let width = cell.skeletonWidth;\n        if (cell.skeletonWidthVariability !== undefined && cell.skeletonWidthVariability > 0) {\n            width += Math.round(getRandomNumber(col, row) * cell.skeletonWidthVariability);\n        }\n        const hpad = theme.cellHorizontalPadding;\n        if (width + hpad * 2 >= rect.width) {\n            width = rect.width - hpad * 2 - 1;\n        }\n        const rectHeight = cell.skeletonHeight ?? Math.min(18, rect.height - 2 * theme.cellVerticalPadding);\n        roundedRect(ctx, rect.x + hpad, rect.y + (rect.height - rectHeight) / 2, width, rectHeight, theme.roundingRadius ?? 3);\n        ctx.fillStyle = withAlpha(theme.textDark, 0.1);\n        ctx.fill();\n    },\n    onPaste: () => undefined,\n};\n//# sourceMappingURL=loading-cell.js.map","import { styled } from \"@linaria/react\";\nconst _exp = /*#__PURE__*/() => p => p.targetWidth;\nexport const MarkdownOverlayEditorStyle = /*#__PURE__*/styled('div')({\n  name: \"MarkdownOverlayEditorStyle\",\n  class: \"gdg-m1pnx84e\",\n  propsAsIs: false,\n  vars: {\n    \"m1pnx84e-0\": [_exp(), \"px\"]\n  }\n});\n\n","import * as React from \"react\";\nimport MarkdownDiv from \"../../markdown-div/markdown-div.js\";\nimport { GrowingEntry } from \"../../growing-entry/growing-entry.js\";\nimport { MarkdownOverlayEditorStyle } from \"./markdown-overlay-editor-style.js\";\nimport { EditPencil, Checkmark } from \"../../../common/utils.js\";\nexport const MarkdownOverlayEditor = p => {\n    const { value, onChange, forceEditMode, createNode, targetRect, onFinish, validatedSelection } = p;\n    const markdown = value.data;\n    const readonly = value.readonly === true;\n    const [editMode, setEditMode] = React.useState(markdown === \"\" || forceEditMode);\n    const onEditClick = React.useCallback(() => {\n        setEditMode(e => !e);\n    }, []);\n    const addLeftPad = markdown ? \"gdg-ml-6\" : \"\";\n    if (editMode) {\n        return (React.createElement(MarkdownOverlayEditorStyle, { targetWidth: targetRect.width - 20 },\n            React.createElement(GrowingEntry, { autoFocus: true, highlight: false, validatedSelection: validatedSelection, value: markdown, onKeyDown: e => {\n                    if (e.key === \"Enter\")\n                        e.stopPropagation();\n                }, onChange: onChange }),\n            React.createElement(\"div\", { className: `gdg-edit-icon gdg-checkmark-hover ${addLeftPad}`, onClick: () => onFinish(value) },\n                React.createElement(Checkmark, null))));\n    }\n    return (React.createElement(MarkdownOverlayEditorStyle, { targetWidth: targetRect.width },\n        React.createElement(MarkdownDiv, { contents: markdown, createNode: createNode }),\n        !readonly && (React.createElement(React.Fragment, null,\n            React.createElement(\"div\", { className: \"spacer\" }),\n            React.createElement(\"div\", { className: `gdg-edit-icon gdg-edit-hover ${addLeftPad}`, onClick: onEditClick },\n                React.createElement(EditPencil, null)))),\n        React.createElement(\"textarea\", { className: \"gdg-md-edit-textarea gdg-input\", autoFocus: true })));\n};\n//# sourceMappingURL=markdown-overlay-editor.js.map","/* eslint-disable react/display-name */\nimport * as React from \"react\";\nimport { MarkdownOverlayEditor } from \"../internal/data-grid-overlay-editor/private/markdown-overlay-editor.js\";\nimport { drawTextCell, prepTextCell } from \"../internal/data-grid/render/data-grid-lib.js\";\nimport { GridCellKind } from \"../internal/data-grid/data-grid-types.js\";\nexport const markdownCellRenderer = {\n    getAccessibilityString: c => c.data?.toString() ?? \"\",\n    kind: GridCellKind.Markdown,\n    needsHover: false,\n    needsHoverPosition: false,\n    drawPrep: prepTextCell,\n    measure: (ctx, cell, t) => {\n        const firstLine = cell.data.split(\"\\n\")[0];\n        return ctx.measureText(firstLine).width + 2 * t.cellHorizontalPadding;\n    },\n    draw: a => drawTextCell(a, a.cell.data, a.cell.contentAlign),\n    onDelete: c => ({\n        ...c,\n        data: \"\",\n    }),\n    provideEditor: () => p => {\n        const { onChange, value, target, onFinishedEditing, markdownDivCreateNode, forceEditMode, validatedSelection } = p;\n        return (React.createElement(MarkdownOverlayEditor, { onFinish: onFinishedEditing, targetRect: target, value: value, validatedSelection: validatedSelection, onChange: e => onChange({\n                ...value,\n                data: e.target.value,\n            }), forceEditMode: forceEditMode, createNode: markdownDivCreateNode }));\n    },\n    onPaste: (toPaste, cell) => (toPaste === cell.data ? undefined : { ...cell, data: toPaste }),\n};\n//# sourceMappingURL=markdown-cell.js.map","import { getMiddleCenterBias } from \"../internal/data-grid/render/data-grid-lib.js\";\nimport { InnerGridCellKind } from \"../internal/data-grid/data-grid-types.js\";\nimport { drawCheckbox } from \"../internal/data-grid/render/draw-checkbox.js\";\nexport const markerCellRenderer = {\n    getAccessibilityString: c => c.row.toString(),\n    kind: InnerGridCellKind.Marker,\n    needsHover: true,\n    needsHoverPosition: false,\n    drawPrep: prepMarkerRowCell,\n    measure: () => 44,\n    draw: a => drawMarkerRowCell(a, a.cell.row, a.cell.checked, a.cell.markerKind, a.cell.drawHandle, a.cell.checkboxStyle),\n    onClick: e => {\n        const { bounds, cell, posX: x, posY: y } = e;\n        const { width, height } = bounds;\n        const centerX = cell.drawHandle ? 7 + (width - 7) / 2 : width / 2;\n        const centerY = height / 2;\n        if (Math.abs(x - centerX) <= 10 && Math.abs(y - centerY) <= 10) {\n            return {\n                ...cell,\n                checked: !cell.checked,\n            };\n        }\n        return undefined;\n    },\n    onPaste: () => undefined,\n};\nfunction prepMarkerRowCell(args, lastPrep) {\n    const { ctx, theme } = args;\n    const newFont = theme.markerFontFull;\n    const result = lastPrep ?? {};\n    if (result?.font !== newFont) {\n        ctx.font = newFont;\n        result.font = newFont;\n    }\n    result.deprep = deprepMarkerRowCell;\n    ctx.textAlign = \"center\";\n    return result;\n}\nfunction deprepMarkerRowCell(args) {\n    const { ctx } = args;\n    ctx.textAlign = \"start\";\n}\nfunction drawMarkerRowCell(args, index, checked, markerKind, drawHandle, style) {\n    const { ctx, rect, hoverAmount, theme } = args;\n    const { x, y, width, height } = rect;\n    const checkedboxAlpha = checked ? 1 : markerKind === \"checkbox-visible\" ? 0.6 + 0.4 * hoverAmount : hoverAmount;\n    if (markerKind !== \"number\" && checkedboxAlpha > 0) {\n        ctx.globalAlpha = checkedboxAlpha;\n        const offsetAmount = 7 * (checked ? hoverAmount : 1);\n        drawCheckbox(ctx, theme, checked, drawHandle ? x + offsetAmount : x, y, drawHandle ? width - offsetAmount : width, height, true, undefined, undefined, 18, \"center\", style);\n        if (drawHandle) {\n            ctx.globalAlpha = hoverAmount;\n            ctx.beginPath();\n            for (const xOffset of [3, 6]) {\n                for (const yOffset of [-5, -1, 3]) {\n                    ctx.rect(x + xOffset, y + height / 2 + yOffset, 2, 2);\n                }\n            }\n            ctx.fillStyle = theme.textLight;\n            ctx.fill();\n            ctx.beginPath();\n        }\n        ctx.globalAlpha = 1;\n    }\n    if (markerKind === \"number\" || (markerKind === \"both\" && !checked)) {\n        const text = index.toString();\n        const fontStyle = theme.markerFontFull;\n        const start = x + width / 2;\n        if (markerKind === \"both\" && hoverAmount !== 0) {\n            ctx.globalAlpha = 1 - hoverAmount;\n        }\n        ctx.fillStyle = theme.textLight;\n        ctx.font = fontStyle;\n        ctx.fillText(text, start, y + height / 2 + getMiddleCenterBias(ctx, fontStyle));\n        if (hoverAmount !== 0) {\n            ctx.globalAlpha = 1;\n        }\n    }\n}\n//# sourceMappingURL=marker-cell.js.map","import { getMiddleCenterBias } from \"../internal/data-grid/render/data-grid-lib.js\";\nimport { InnerGridCellKind } from \"../internal/data-grid/data-grid-types.js\";\nexport const newRowCellRenderer = {\n    getAccessibilityString: () => \"\",\n    kind: InnerGridCellKind.NewRow,\n    needsHover: true,\n    needsHoverPosition: false,\n    measure: () => 200,\n    draw: a => drawNewRowCell(a, a.cell.hint, a.cell.icon),\n    onPaste: () => undefined,\n};\nfunction drawNewRowCell(args, data, icon) {\n    const { ctx, rect, hoverAmount, theme, spriteManager } = args;\n    const { x, y, width: w, height: h } = rect;\n    ctx.beginPath();\n    ctx.globalAlpha = hoverAmount;\n    ctx.rect(x + 1, y + 1, w, h - 2);\n    ctx.fillStyle = theme.bgHeaderHovered;\n    ctx.fill();\n    ctx.globalAlpha = 1;\n    ctx.beginPath();\n    const alwaysShowIcon = data !== \"\";\n    let textX = 0;\n    if (icon !== undefined) {\n        const padding = 8;\n        const size = h - padding;\n        const px = x + padding / 2;\n        const py = y + padding / 2;\n        spriteManager.drawSprite(icon, \"normal\", ctx, px, py, size, theme, alwaysShowIcon ? 1 : hoverAmount);\n        textX = size;\n    }\n    else {\n        textX = 24;\n        const finalLineSize = 12;\n        const lineSize = alwaysShowIcon ? finalLineSize : hoverAmount * finalLineSize;\n        const xTranslate = alwaysShowIcon ? 0 : (1 - hoverAmount) * finalLineSize * 0.5;\n        const padPlus = theme.cellHorizontalPadding + 4;\n        if (lineSize > 0) {\n            ctx.moveTo(x + padPlus + xTranslate, y + h / 2);\n            ctx.lineTo(x + padPlus + xTranslate + lineSize, y + h / 2);\n            ctx.moveTo(x + padPlus + xTranslate + lineSize * 0.5, y + h / 2 - lineSize * 0.5);\n            ctx.lineTo(x + padPlus + xTranslate + lineSize * 0.5, y + h / 2 + lineSize * 0.5);\n            ctx.lineWidth = 2;\n            ctx.strokeStyle = theme.bgIconHeader;\n            ctx.lineCap = \"round\";\n            ctx.stroke();\n        }\n    }\n    ctx.fillStyle = theme.textMedium;\n    ctx.fillText(data, textX + x + theme.cellHorizontalPadding + 0.5, y + h / 2 + getMiddleCenterBias(ctx, theme));\n    ctx.beginPath();\n}\n//# sourceMappingURL=new-row-cell.js.map","import { roundedRect, measureTextCached } from \"./data-grid-lib.js\";\nimport { withAlpha } from \"../color-parser.js\";\nexport function drawEditHoverIndicator(ctx, theme, effectTheme, displayData, rect, hoverAmount, overrideCursor) {\n    ctx.textBaseline = \"alphabetic\";\n    const effectRect = getHoverEffectRect(ctx, rect, displayData, theme, effectTheme?.fullSize ?? false);\n    ctx.beginPath();\n    roundedRect(ctx, effectRect.x, effectRect.y, effectRect.width, effectRect.height, theme.roundingRadius ?? 4);\n    ctx.globalAlpha = hoverAmount;\n    ctx.fillStyle = effectTheme?.bgColor ?? withAlpha(theme.textDark, 0.1);\n    ctx.fill();\n    // restore\n    ctx.globalAlpha = 1;\n    ctx.fillStyle = theme.textDark;\n    ctx.textBaseline = \"middle\";\n    overrideCursor?.(\"text\");\n}\nfunction getHoverEffectRect(ctx, cellRect, displayData, theme, fullSize) {\n    const padX = theme.cellHorizontalPadding;\n    const padY = theme.cellVerticalPadding;\n    if (fullSize) {\n        return {\n            x: cellRect.x + padX / 2,\n            y: cellRect.y + padY / 2 + 1,\n            width: cellRect.width - padX,\n            height: cellRect.height - padY - 1,\n        };\n    }\n    const m = measureTextCached(displayData, ctx, theme.baseFontFull, \"alphabetic\");\n    const maxH = cellRect.height - padY;\n    const h = Math.min(maxH, m.actualBoundingBoxAscent * 2.5);\n    return {\n        x: cellRect.x + padX / 2,\n        y: cellRect.y + (cellRect.height - h) / 2 + 1,\n        width: m.width + padX * 3,\n        height: h - 1,\n    };\n}\n//# sourceMappingURL=draw-edit-hover-indicator.js.map","/* eslint-disable react/display-name */\nimport * as React from \"react\";\nimport { drawTextCell, prepTextCell } from \"../internal/data-grid/render/data-grid-lib.js\";\nimport { GridCellKind } from \"../internal/data-grid/data-grid-types.js\";\nimport { drawEditHoverIndicator } from \"../internal/data-grid/render/draw-edit-hover-indicator.js\";\nconst NumberOverlayEditor = React.lazy(async () => await import(\"../internal/data-grid-overlay-editor/private/number-overlay-editor.js\"));\nexport const numberCellRenderer = {\n    getAccessibilityString: c => c.data?.toString() ?? \"\",\n    kind: GridCellKind.Number,\n    needsHover: cell => cell.hoverEffect === true,\n    needsHoverPosition: false,\n    useLabel: true,\n    drawPrep: prepTextCell,\n    draw: a => {\n        const { hoverAmount, cell, ctx, theme, rect, overrideCursor } = a;\n        const { hoverEffect, displayData, hoverEffectTheme } = cell;\n        if (hoverEffect === true && hoverAmount > 0) {\n            drawEditHoverIndicator(ctx, theme, hoverEffectTheme, displayData, rect, hoverAmount, overrideCursor);\n        }\n        drawTextCell(a, a.cell.displayData, a.cell.contentAlign);\n    },\n    measure: (ctx, cell, theme) => ctx.measureText(cell.displayData).width + theme.cellHorizontalPadding * 2,\n    onDelete: c => ({\n        ...c,\n        data: undefined,\n    }),\n    provideEditor: () => p => {\n        const { isHighlighted, onChange, value, validatedSelection } = p;\n        return (React.createElement(React.Suspense, { fallback: null },\n            React.createElement(NumberOverlayEditor, { highlight: isHighlighted, disabled: value.readonly === true, value: value.data, fixedDecimals: value.fixedDecimals, allowNegative: value.allowNegative, thousandSeparator: value.thousandSeparator, decimalSeparator: value.decimalSeparator, validatedSelection: validatedSelection, onChange: x => onChange({\n                    ...value,\n                    data: Number.isNaN(x.floatValue ?? 0) ? 0 : x.floatValue,\n                }) })));\n    },\n    onPaste: (toPaste, cell, details) => {\n        const newNumber = typeof details.rawValue === \"number\"\n            ? details.rawValue\n            : Number.parseFloat(typeof details.rawValue === \"string\" ? details.rawValue : toPaste);\n        if (Number.isNaN(newNumber) || cell.data === newNumber)\n            return undefined;\n        return { ...cell, data: newNumber, displayData: details.formattedString ?? cell.displayData };\n    },\n};\n//# sourceMappingURL=number-cell.js.map","import { degreesToRadians } from \"../common/utils.js\";\nimport { GridCellKind } from \"../internal/data-grid/data-grid-types.js\";\nexport const protectedCellRenderer = {\n    getAccessibilityString: () => \"\",\n    measure: () => 108,\n    kind: GridCellKind.Protected,\n    needsHover: false,\n    needsHoverPosition: false,\n    draw: drawProtectedCell,\n    onPaste: () => undefined,\n};\nfunction drawProtectedCell(args) {\n    const { ctx, theme, rect } = args;\n    const { x, y, height: h } = rect;\n    ctx.beginPath();\n    const radius = 2.5;\n    let xStart = x + theme.cellHorizontalPadding + radius;\n    const center = y + h / 2;\n    const p = Math.cos(degreesToRadians(30)) * radius;\n    const q = Math.sin(degreesToRadians(30)) * radius;\n    for (let i = 0; i < 12; i++) {\n        ctx.moveTo(xStart, center - radius);\n        ctx.lineTo(xStart, center + radius);\n        ctx.moveTo(xStart + p, center - q);\n        ctx.lineTo(xStart - p, center + q);\n        ctx.moveTo(xStart - p, center - q);\n        ctx.lineTo(xStart + p, center + q);\n        xStart += 8;\n    }\n    ctx.lineWidth = 1.1;\n    ctx.lineCap = \"square\";\n    ctx.strokeStyle = theme.textLight;\n    ctx.stroke();\n}\n//# sourceMappingURL=protected-cell.js.map","import React from \"react\";\nimport { GrowingEntry } from \"../internal/growing-entry/growing-entry.js\";\nimport { drawTextCell, prepTextCell } from \"../internal/data-grid/render/data-grid-lib.js\";\nimport { GridCellKind } from \"../internal/data-grid/data-grid-types.js\";\nexport const rowIDCellRenderer = {\n    getAccessibilityString: c => c.data?.toString() ?? \"\",\n    kind: GridCellKind.RowID,\n    needsHover: false,\n    needsHoverPosition: false,\n    drawPrep: (a, b) => prepTextCell(a, b, a.theme.textLight),\n    draw: a => drawTextCell(a, a.cell.data, a.cell.contentAlign),\n    measure: (ctx, cell, theme) => ctx.measureText(cell.data).width + theme.cellHorizontalPadding * 2,\n    // eslint-disable-next-line react/display-name\n    provideEditor: () => p => {\n        const { isHighlighted, onChange, value, validatedSelection } = p;\n        return (React.createElement(GrowingEntry, { highlight: isHighlighted, autoFocus: value.readonly !== true, disabled: value.readonly !== false, value: value.data, validatedSelection: validatedSelection, onChange: e => onChange({\n                ...value,\n                data: e.target.value,\n            }) }));\n    },\n    onPaste: () => undefined,\n};\n//# sourceMappingURL=row-id-cell.js.map","/* eslint-disable react/display-name */\nimport * as React from \"react\";\nimport { GrowingEntry } from \"../internal/growing-entry/growing-entry.js\";\nimport { drawTextCell, prepTextCell } from \"../internal/data-grid/render/data-grid-lib.js\";\nimport { GridCellKind } from \"../internal/data-grid/data-grid-types.js\";\nimport { drawEditHoverIndicator } from \"../internal/data-grid/render/draw-edit-hover-indicator.js\";\nexport const textCellRenderer = {\n    getAccessibilityString: c => c.data?.toString() ?? \"\",\n    kind: GridCellKind.Text,\n    needsHover: textCell => textCell.hoverEffect === true,\n    needsHoverPosition: false,\n    drawPrep: prepTextCell,\n    useLabel: true,\n    draw: a => {\n        const { cell, hoverAmount, hyperWrapping, ctx, rect, theme, overrideCursor } = a;\n        const { displayData, contentAlign, hoverEffect, allowWrapping, hoverEffectTheme } = cell;\n        if (hoverEffect === true && hoverAmount > 0) {\n            drawEditHoverIndicator(ctx, theme, hoverEffectTheme, displayData, rect, hoverAmount, overrideCursor);\n        }\n        drawTextCell(a, displayData, contentAlign, allowWrapping, hyperWrapping);\n    },\n    measure: (ctx, cell, t) => {\n        const lines = cell.displayData.split(\"\\n\", cell.allowWrapping === true ? undefined : 1);\n        let maxLineWidth = 0;\n        for (const line of lines) {\n            maxLineWidth = Math.max(maxLineWidth, ctx.measureText(line).width);\n        }\n        return maxLineWidth + 2 * t.cellHorizontalPadding;\n    },\n    onDelete: c => ({\n        ...c,\n        data: \"\",\n    }),\n    provideEditor: cell => ({\n        disablePadding: cell.allowWrapping === true,\n        editor: p => {\n            const { isHighlighted, onChange, value, validatedSelection } = p;\n            return (React.createElement(GrowingEntry, { style: cell.allowWrapping === true ? { padding: \"3px 8.5px\" } : undefined, highlight: isHighlighted, autoFocus: value.readonly !== true, disabled: value.readonly === true, altNewline: true, value: value.data, validatedSelection: validatedSelection, onChange: e => onChange({\n                    ...value,\n                    data: e.target.value,\n                }) }));\n        },\n    }),\n    onPaste: (toPaste, cell, details) => toPaste === cell.data\n        ? undefined\n        : { ...cell, data: toPaste, displayData: details.formattedString ?? cell.displayData },\n};\n//# sourceMappingURL=text-cell.js.map","import { styled } from \"@linaria/react\";\nexport const UriOverlayEditorStyle = /*#__PURE__*/styled('div')({\n  name: \"UriOverlayEditorStyle\",\n  class: \"gdg-u1rrojo\",\n  propsAsIs: false\n});\n\n","import { EditPencil } from \"../../../common/utils.js\";\nimport * as React from \"react\";\nimport { GrowingEntry } from \"../../growing-entry/growing-entry.js\";\nimport { UriOverlayEditorStyle } from \"./uri-overlay-editor-style.js\";\nconst UriOverlayEditor = p => {\n    const { uri, onChange, forceEditMode, readonly, validatedSelection, preview } = p;\n    const [editMode, setEditMode] = React.useState(!readonly && (uri === \"\" || forceEditMode));\n    const onEditClick = React.useCallback(() => {\n        setEditMode(true);\n    }, []);\n    if (editMode) {\n        return (React.createElement(GrowingEntry, { validatedSelection: validatedSelection, highlight: true, autoFocus: true, value: uri, onChange: onChange }));\n    }\n    return (React.createElement(UriOverlayEditorStyle, null,\n        React.createElement(\"a\", { className: \"gdg-link-area\", href: uri, target: \"_blank\", rel: \"noopener noreferrer\" }, preview),\n        !readonly && (React.createElement(\"div\", { className: \"gdg-edit-icon\", onClick: onEditClick },\n            React.createElement(EditPencil, null))),\n        React.createElement(\"textarea\", { className: \"gdg-input\", autoFocus: true })));\n};\nexport default UriOverlayEditor;\n//# sourceMappingURL=uri-overlay-editor.js.map","/* eslint-disable react/display-name */\nimport * as React from \"react\";\nimport UriOverlayEditor from \"../internal/data-grid-overlay-editor/private/uri-overlay-editor.js\";\nimport { drawTextCell, getMeasuredTextCache, getMiddleCenterBias, measureTextCached, prepTextCell, } from \"../internal/data-grid/render/data-grid-lib.js\";\nimport { GridCellKind, } from \"../internal/data-grid/data-grid-types.js\";\nimport { pointInRect } from \"../common/math.js\";\nfunction getTextRect(metrics, rect, theme, contentAlign) {\n    let x = theme.cellHorizontalPadding;\n    const y = rect.height / 2 - metrics.actualBoundingBoxAscent / 2;\n    const width = metrics.width;\n    const height = metrics.actualBoundingBoxAscent;\n    if (contentAlign === \"right\") {\n        x = rect.width - width - theme.cellHorizontalPadding;\n    }\n    else if (contentAlign === \"center\") {\n        x = rect.width / 2 - width / 2;\n    }\n    return { x, y, width, height };\n}\nfunction isOverLinkText(e) {\n    const { cell, bounds, posX, posY, theme } = e;\n    const txt = cell.displayData ?? cell.data;\n    if (cell.hoverEffect !== true || cell.onClickUri === undefined)\n        return false;\n    const m = getMeasuredTextCache(txt, theme.baseFontFull);\n    if (m === undefined)\n        return false;\n    const textRect = getTextRect(m, bounds, theme, cell.contentAlign);\n    return pointInRect({\n        x: textRect.x - 4,\n        y: textRect.y - 4,\n        width: textRect.width + 8,\n        height: textRect.height + 8,\n    }, posX, posY);\n}\nexport const uriCellRenderer = {\n    getAccessibilityString: c => c.data?.toString() ?? \"\",\n    kind: GridCellKind.Uri,\n    needsHover: uriCell => uriCell.hoverEffect === true,\n    needsHoverPosition: true,\n    useLabel: true,\n    drawPrep: prepTextCell,\n    draw: a => {\n        const { cell, theme, overrideCursor, hoverX, hoverY, rect, ctx } = a;\n        const txt = cell.displayData ?? cell.data;\n        const isLinky = cell.hoverEffect === true;\n        if (overrideCursor !== undefined && isLinky && hoverX !== undefined && hoverY !== undefined) {\n            const m = measureTextCached(txt, ctx, theme.baseFontFull);\n            const textRect = getTextRect(m, rect, theme, cell.contentAlign);\n            const { x, y, width: w, height: h } = textRect;\n            // check if hoverX and hoverY inside the box\n            if (hoverX >= x - 4 && hoverX <= x - 4 + w + 8 && hoverY >= y - 4 && hoverY <= y - 4 + h + 8) {\n                const middleCenterBias = getMiddleCenterBias(ctx, theme.baseFontFull);\n                overrideCursor(\"pointer\");\n                const underlineOffset = 5;\n                const drawY = y - middleCenterBias;\n                ctx.beginPath();\n                ctx.moveTo(rect.x + x, Math.floor(rect.y + drawY + h + underlineOffset) + 0.5);\n                ctx.lineTo(rect.x + x + w, Math.floor(rect.y + drawY + h + underlineOffset) + 0.5);\n                ctx.strokeStyle = theme.linkColor;\n                ctx.stroke();\n                ctx.save();\n                ctx.fillStyle = a.cellFillColor;\n                drawTextCell({ ...a, rect: { ...rect, x: rect.x - 1 } }, txt, cell.contentAlign);\n                drawTextCell({ ...a, rect: { ...rect, x: rect.x - 2 } }, txt, cell.contentAlign);\n                drawTextCell({ ...a, rect: { ...rect, x: rect.x + 1 } }, txt, cell.contentAlign);\n                drawTextCell({ ...a, rect: { ...rect, x: rect.x + 2 } }, txt, cell.contentAlign);\n                ctx.restore();\n            }\n        }\n        ctx.fillStyle = isLinky ? theme.linkColor : theme.textDark;\n        drawTextCell(a, txt, cell.contentAlign);\n    },\n    onSelect: e => {\n        if (isOverLinkText(e)) {\n            e.preventDefault();\n        }\n    },\n    onClick: a => {\n        const { cell } = a;\n        const didClick = isOverLinkText(a);\n        if (didClick) {\n            cell.onClickUri?.(a);\n        }\n        return undefined;\n    },\n    measure: (ctx, cell, theme) => ctx.measureText(cell.displayData ?? cell.data).width + theme.cellHorizontalPadding * 2,\n    onDelete: c => ({\n        ...c,\n        data: \"\",\n    }),\n    provideEditor: cell => p => {\n        const { onChange, value, forceEditMode, validatedSelection } = p;\n        return (React.createElement(UriOverlayEditor, { forceEditMode: value.readonly !== true &&\n                (forceEditMode || (cell.hoverEffect === true && cell.onClickUri !== undefined)), uri: value.data, preview: value.displayData ?? value.data, validatedSelection: validatedSelection, readonly: value.readonly === true, onChange: e => onChange({\n                ...value,\n                data: e.target.value,\n            }) }));\n    },\n    onPaste: (toPaste, cell, details) => toPaste === cell.data\n        ? undefined\n        : { ...cell, data: toPaste, displayData: details.formattedString ?? cell.displayData },\n};\n//# sourceMappingURL=uri-cell.js.map","import {} from \"../internal/data-grid/data-grid-types.js\";\nimport { booleanCellRenderer } from \"./boolean-cell.js\";\nimport { bubbleCellRenderer } from \"./bubble-cell.js\";\nimport { drilldownCellRenderer } from \"./drilldown-cell.js\";\nimport { imageCellRenderer } from \"./image-cell.js\";\nimport { loadingCellRenderer } from \"./loading-cell.js\";\nimport { markdownCellRenderer } from \"./markdown-cell.js\";\nimport { markerCellRenderer } from \"./marker-cell.js\";\nimport { newRowCellRenderer } from \"./new-row-cell.js\";\nimport { numberCellRenderer } from \"./number-cell.js\";\nimport { protectedCellRenderer } from \"./protected-cell.js\";\nimport { rowIDCellRenderer } from \"./row-id-cell.js\";\nimport { textCellRenderer } from \"./text-cell.js\";\nimport { uriCellRenderer } from \"./uri-cell.js\";\nexport const AllCellRenderers = [\n    markerCellRenderer,\n    newRowCellRenderer,\n    booleanCellRenderer,\n    bubbleCellRenderer,\n    drilldownCellRenderer,\n    imageCellRenderer,\n    loadingCellRenderer,\n    markdownCellRenderer,\n    numberCellRenderer,\n    protectedCellRenderer,\n    rowIDCellRenderer,\n    textCellRenderer,\n    uriCellRenderer,\n];\n//# sourceMappingURL=index.js.map","var debounce = require('./debounce'),\n    isObject = require('./isObject');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nmodule.exports = throttle;\n","import { CellSet } from \"../internal/data-grid/cell-set.js\";\nimport throttle from \"lodash/throttle.js\";\nimport { packColRowToNumber, unpackNumberToColRow, WindowingTrackerBase } from \"./render-state-provider.js\";\nconst imgPool = [];\nclass ImageWindowLoaderImpl extends WindowingTrackerBase {\n    imageLoaded = () => undefined;\n    loadedLocations = [];\n    cache = {};\n    setCallback(imageLoaded) {\n        this.imageLoaded = imageLoaded;\n    }\n    // eslint-disable-next-line unicorn/consistent-function-scoping\n    sendLoaded = throttle(() => {\n        this.imageLoaded(new CellSet(this.loadedLocations));\n        this.loadedLocations = [];\n    }, 20);\n    clearOutOfWindow = () => {\n        const keys = Object.keys(this.cache);\n        for (const key of keys) {\n            const obj = this.cache[key];\n            let keep = false;\n            for (let j = 0; j < obj.cells.length; j++) {\n                const packed = obj.cells[j];\n                if (this.isInWindow(packed)) {\n                    keep = true;\n                    break;\n                }\n            }\n            if (keep) {\n                obj.cells = obj.cells.filter(this.isInWindow);\n            }\n            else {\n                obj.cancel();\n                delete this.cache[key];\n            }\n        }\n    };\n    loadImage(url, col, row, key) {\n        let loaded = false;\n        const img = imgPool.pop() ?? new Image();\n        let canceled = false;\n        const result = {\n            img: undefined,\n            cells: [packColRowToNumber(col, row)],\n            url,\n            cancel: () => {\n                if (canceled)\n                    return;\n                canceled = true;\n                if (imgPool.length < 12) {\n                    imgPool.unshift(img); // never retain more than 12\n                }\n                else if (!loaded) {\n                    img.src = \"\";\n                }\n            },\n        };\n        const loadPromise = new Promise(r => img.addEventListener(\"load\", () => r(null)));\n        // use request animation time to avoid paying src set costs during draw calls\n        requestAnimationFrame(async () => {\n            try {\n                img.src = url;\n                await loadPromise;\n                await img.decode();\n                const toWrite = this.cache[key];\n                if (toWrite !== undefined && !canceled) {\n                    toWrite.img = img;\n                    for (const packed of toWrite.cells) {\n                        this.loadedLocations.push(unpackNumberToColRow(packed));\n                    }\n                    loaded = true;\n                    this.sendLoaded();\n                }\n            }\n            catch {\n                result.cancel();\n            }\n        });\n        this.cache[key] = result;\n    }\n    loadOrGetImage(url, col, row) {\n        const key = url;\n        const current = this.cache[key];\n        if (current !== undefined) {\n            const packed = packColRowToNumber(col, row);\n            if (!current.cells.includes(packed)) {\n                current.cells.push(packed);\n            }\n            return current.img;\n        }\n        else {\n            this.loadImage(url, col, row, key);\n        }\n        return undefined;\n    }\n}\nexport default ImageWindowLoaderImpl;\n//# sourceMappingURL=image-window-loader.js.map","import * as React from \"react\";\nimport { DataEditor } from \"./data-editor/data-editor.js\";\nimport { AllCellRenderers } from \"./cells/index.js\";\nimport { sprites } from \"./internal/data-grid/sprites.js\";\nimport ImageWindowLoaderImpl from \"./common/image-window-loader.js\";\nconst DataEditorAllImpl = (p, ref) => {\n    const allSprites = React.useMemo(() => {\n        return { ...sprites, ...p.headerIcons };\n    }, [p.headerIcons]);\n    const imageWindowLoader = React.useMemo(() => {\n        return p.imageWindowLoader ?? new ImageWindowLoaderImpl();\n    }, [p.imageWindowLoader]);\n    return (React.createElement(DataEditor, { ...p, renderers: AllCellRenderers, headerIcons: allSprites, ref: ref, imageWindowLoader: imageWindowLoader }));\n};\nexport const DataEditorAll = React.forwardRef(DataEditorAllImpl);\n//# sourceMappingURL=data-editor-all.js.map","/*! Moment Duration Format v2.2.2\n *  https://github.com/jsmreese/moment-duration-format\n *  Date: 2018-02-16\n *\n *  Duration format plugin function for the Moment.js library\n *  http://momentjs.com/\n *\n *  Copyright 2018 John Madhavan-Reese\n *  Released under the MIT license\n */\n\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(['moment'], factory);\n    } else if (typeof exports === 'object') {\n        // Node. Does not work with strict CommonJS, but only CommonJS-like\n        // enviroments that support module.exports, like Node.\n        try {\n            module.exports = factory(require('moment'));\n        } catch (e) {\n            // If moment is not available, leave the setup up to the user.\n            // Like when using moment-timezone or similar moment-based package.\n            module.exports = factory;\n        }\n    }\n\n    if (root) {\n        // Globals.\n        root.momentDurationFormatSetup = root.moment ? factory(root.moment) : factory;\n    }\n})(this, function (moment) {\n    // `Number#tolocaleString` is tested on plugin initialization.\n    // If the feature test passes, `toLocaleStringWorks` will be set to `true` and the\n    // native function will be used to generate formatted output. If the feature\n    // test fails, the fallback format function internal to this plugin will be\n    // used.\n    var toLocaleStringWorks = false;\n\n    // `Number#toLocaleString` rounds incorrectly for select numbers in Microsoft\n    // environments (Edge, IE11, Windows Phone) and possibly other environments.\n    // If the rounding test fails and `toLocaleString` will be used for formatting,\n    // the plugin will \"pre-round\" number values using the fallback number format\n    // function before passing them to `toLocaleString` for final formatting.\n    var toLocaleStringRoundingWorks = false;\n\n    // `Intl.NumberFormat#format` is tested on plugin initialization.\n    // If the feature test passes, `intlNumberFormatRoundingWorks` will be set to\n    // `true` and the native function will be used to generate formatted output.\n    // If the feature test fails, either `Number#tolocaleString` (if\n    // `toLocaleStringWorks` is `true`), or the fallback format function internal\n    //  to this plugin will be used.\n    var intlNumberFormatWorks = false;\n\n    // `Intl.NumberFormat#format` rounds incorrectly for select numbers in Microsoft\n    // environments (Edge, IE11, Windows Phone) and possibly other environments.\n    // If the rounding test fails and `Intl.NumberFormat#format` will be used for\n    // formatting, the plugin will \"pre-round\" number values using the fallback number\n    // format function before passing them to `Intl.NumberFormat#format` for final\n    // formatting.\n    var intlNumberFormatRoundingWorks = false;\n\n    // Token type names in order of descending magnitude.\n    var types = \"escape years months weeks days hours minutes seconds milliseconds general\".split(\" \");\n\n    var bubbles = [\n        {\n            type: \"seconds\",\n            targets: [\n                { type: \"minutes\", value: 60 },\n                { type: \"hours\", value: 3600 },\n                { type: \"days\", value: 86400 },\n                { type: \"weeks\", value: 604800 },\n                { type: \"months\", value: 2678400 },\n                { type: \"years\", value: 31536000 }\n            ]\n        },\n        {\n            type: \"minutes\",\n            targets: [\n                { type: \"hours\", value: 60 },\n                { type: \"days\", value: 1440 },\n                { type: \"weeks\", value: 10080 },\n                { type: \"months\", value: 44640 },\n                { type: \"years\", value: 525600 }\n            ]\n        },\n        {\n            type: \"hours\",\n            targets: [\n                { type: \"days\", value: 24 },\n                { type: \"weeks\", value: 168 },\n                { type: \"months\", value: 744 },\n                { type: \"years\", value: 8760 }\n            ]\n        },\n        {\n            type: \"days\",\n            targets: [\n                { type: \"weeks\", value: 7 },\n                { type: \"months\", value: 31 },\n                { type: \"years\", value: 365 }\n            ]\n        },\n        {\n            type: \"months\",\n            targets: [\n                { type: \"years\", value: 12 }\n            ]\n        }\n    ];\n\n    // stringIncludes\n    function stringIncludes(str, search) {\n        if (search.length > str.length) {\n          return false;\n        }\n\n        return str.indexOf(search) !== -1;\n    }\n\n    // repeatZero(qty)\n    // Returns \"0\" repeated `qty` times.\n    // `qty` must be a integer >= 0.\n    function repeatZero(qty) {\n        var result = \"\";\n\n        while (qty) {\n            result += \"0\";\n            qty -= 1;\n        }\n\n        return result;\n    }\n\n    function stringRound(digits) {\n        var digitsArray = digits.split(\"\").reverse();\n        var i = 0;\n        var carry = true;\n\n        while (carry && i < digitsArray.length) {\n            if (i) {\n                if (digitsArray[i] === \"9\") {\n                    digitsArray[i] = \"0\";\n                } else {\n                    digitsArray[i] = (parseInt(digitsArray[i], 10) + 1).toString();\n                    carry = false;\n                }\n            } else {\n                if (parseInt(digitsArray[i], 10) < 5) {\n                    carry = false;\n                }\n\n                digitsArray[i] = \"0\";\n            }\n\n            i += 1;\n        }\n\n        if (carry) {\n            digitsArray.push(\"1\");\n        }\n\n        return digitsArray.reverse().join(\"\");\n    }\n\n    // cachedNumberFormat\n    // Returns an `Intl.NumberFormat` instance for the given locale and configuration.\n    // On first use of a particular configuration, the instance is cached for fast\n    // repeat access.\n    function cachedNumberFormat(locale, options) {\n        // Create a sorted, stringified version of `options`\n        // for use as part of the cache key\n        var optionsString = map(\n            keys(options).sort(),\n            function(key) {\n                return key + ':' + options[key];\n            }\n        ).join(',');\n\n        // Set our cache key\n        var cacheKey = locale + '+' + optionsString;\n\n        // If we don't have this configuration cached, configure and cache it\n        if (!cachedNumberFormat.cache[cacheKey]) {\n            cachedNumberFormat.cache[cacheKey] = Intl.NumberFormat(locale, options);\n        }\n\n        // Return the cached version of this configuration\n        return cachedNumberFormat.cache[cacheKey];\n    }\n    cachedNumberFormat.cache = {};\n\n    // formatNumber\n    // Formats any number greater than or equal to zero using these options:\n    // - userLocale\n    // - useToLocaleString\n    // - useGrouping\n    // - grouping\n    // - maximumSignificantDigits\n    // - minimumIntegerDigits\n    // - fractionDigits\n    // - groupingSeparator\n    // - decimalSeparator\n    //\n    // `useToLocaleString` will use `Intl.NumberFormat` or `toLocaleString` for formatting.\n    // `userLocale` option is passed through to the formatting function.\n    // `fractionDigits` is passed through to `maximumFractionDigits` and `minimumFractionDigits`\n    // Using `maximumSignificantDigits` will override `minimumIntegerDigits` and `fractionDigits`.\n    function formatNumber(number, options, userLocale) {\n        var useToLocaleString = options.useToLocaleString;\n        var useGrouping = options.useGrouping;\n        var grouping = useGrouping && options.grouping.slice();\n        var maximumSignificantDigits = options.maximumSignificantDigits;\n        var minimumIntegerDigits = options.minimumIntegerDigits || 1;\n        var fractionDigits = options.fractionDigits || 0;\n        var groupingSeparator = options.groupingSeparator;\n        var decimalSeparator = options.decimalSeparator;\n\n        if (useToLocaleString && userLocale) {\n            var localeStringOptions = {\n                minimumIntegerDigits: minimumIntegerDigits,\n                useGrouping: useGrouping\n            };\n\n            if (fractionDigits) {\n                localeStringOptions.maximumFractionDigits = fractionDigits;\n                localeStringOptions.minimumFractionDigits = fractionDigits;\n            }\n\n            // toLocaleString output is \"0.0\" instead of \"0\" for HTC browsers\n            // when maximumSignificantDigits is set. See #96.\n            if (maximumSignificantDigits && number > 0) {\n                localeStringOptions.maximumSignificantDigits = maximumSignificantDigits;\n            }\n\n            if (intlNumberFormatWorks) {\n                if (!intlNumberFormatRoundingWorks) {\n                    var roundingOptions = extend({}, options);\n                    roundingOptions.useGrouping = false;\n                    roundingOptions.decimalSeparator = \".\";\n                    number = parseFloat(formatNumber(number, roundingOptions), 10);\n                }\n\n                return cachedNumberFormat(userLocale, localeStringOptions).format(number);\n            } else {\n                if (!toLocaleStringRoundingWorks) {\n                    var roundingOptions = extend({}, options);\n                    roundingOptions.useGrouping = false;\n                    roundingOptions.decimalSeparator = \".\";\n                    number = parseFloat(formatNumber(number, roundingOptions), 10);\n                }\n\n                return number.toLocaleString(userLocale, localeStringOptions);\n            }\n        }\n\n        var numberString;\n\n        // Add 1 to digit output length for floating point errors workaround. See below.\n        if (maximumSignificantDigits) {\n            numberString = number.toPrecision(maximumSignificantDigits + 1);\n        } else {\n            numberString = number.toFixed(fractionDigits + 1);\n        }\n\n        var integerString;\n        var fractionString;\n        var exponentString;\n\n        var temp = numberString.split(\"e\");\n\n        exponentString = temp[1] || \"\";\n\n        temp = temp[0].split(\".\");\n\n        fractionString = temp[1] || \"\";\n        integerString = temp[0] || \"\";\n\n        // Workaround for floating point errors in `toFixed` and `toPrecision`.\n        // (3.55).toFixed(1); --> \"3.5\"\n        // (123.55 - 120).toPrecision(2); --> \"3.5\"\n        // (123.55 - 120); --> 3.549999999999997\n        // (123.55 - 120).toFixed(2); --> \"3.55\"\n        // Round by examing the string output of the next digit.\n\n        // *************** Implement String Rounding here ***********************\n        // Check integerString + fractionString length of toPrecision before rounding.\n        // Check length of fractionString from toFixed output before rounding.\n        var integerLength = integerString.length;\n        var fractionLength = fractionString.length;\n        var digitCount = integerLength + fractionLength;\n        var digits = integerString + fractionString;\n\n        if (maximumSignificantDigits && digitCount === (maximumSignificantDigits + 1) || !maximumSignificantDigits && fractionLength === (fractionDigits + 1)) {\n            // Round digits.\n            digits = stringRound(digits);\n\n            if (digits.length === digitCount + 1) {\n                integerLength = integerLength + 1;\n            }\n\n            // Discard final fractionDigit.\n            if (fractionLength) {\n                digits = digits.slice(0, -1);\n            }\n\n            // Separate integer and fraction.\n            integerString = digits.slice(0, integerLength);\n            fractionString = digits.slice(integerLength);\n        }\n\n        // Trim trailing zeroes from fractionString because toPrecision outputs\n        // precision, not significant digits.\n        if (maximumSignificantDigits) {\n            fractionString = fractionString.replace(/0*$/, \"\");\n        }\n\n        // Handle exponent.\n        var exponent = parseInt(exponentString, 10);\n\n        if (exponent > 0) {\n            if (fractionString.length <= exponent) {\n                fractionString = fractionString + repeatZero(exponent - fractionString.length);\n\n                integerString = integerString + fractionString;\n                fractionString = \"\";\n            } else {\n                integerString = integerString + fractionString.slice(0, exponent);\n                fractionString = fractionString.slice(exponent);\n            }\n        } else if (exponent < 0) {\n            fractionString = (repeatZero(Math.abs(exponent) - integerString.length) + integerString + fractionString);\n\n            integerString = \"0\";\n        }\n\n        if (!maximumSignificantDigits) {\n            // Trim or pad fraction when not using maximumSignificantDigits.\n            fractionString = fractionString.slice(0, fractionDigits);\n\n            if (fractionString.length < fractionDigits) {\n                fractionString = fractionString + repeatZero(fractionDigits - fractionString.length);\n            }\n\n            // Pad integer when using minimumIntegerDigits\n            // and not using maximumSignificantDigits.\n            if (integerString.length < minimumIntegerDigits) {\n                integerString = repeatZero(minimumIntegerDigits - integerString.length) + integerString;\n            }\n        }\n\n        var formattedString = \"\";\n\n        // Handle grouping.\n        if (useGrouping) {\n            temp = integerString;\n            var group;\n\n            while (temp.length) {\n                if (grouping.length) {\n                    group = grouping.shift();\n                }\n\n                if (formattedString) {\n                    formattedString = groupingSeparator + formattedString;\n                }\n\n                formattedString = temp.slice(-group) + formattedString;\n\n                temp = temp.slice(0, -group);\n            }\n        } else {\n            formattedString = integerString;\n        }\n\n        // Add decimalSeparator and fraction.\n        if (fractionString) {\n            formattedString = formattedString + decimalSeparator + fractionString;\n        }\n\n        return formattedString;\n    }\n\n    // durationLabelCompare\n    function durationLabelCompare(a, b) {\n        if (a.label.length > b.label.length) {\n            return -1;\n        }\n\n        if (a.label.length < b.label.length) {\n            return 1;\n        }\n\n        // a must be equal to b\n        return 0;\n    }\n\n    // durationGetLabels\n    function durationGetLabels(token, localeData) {\n        var labels = [];\n\n        each(keys(localeData), function (localeDataKey) {\n            if (localeDataKey.slice(0, 15) !== \"_durationLabels\") {\n                return;\n            }\n\n            var labelType = localeDataKey.slice(15).toLowerCase();\n\n            each(keys(localeData[localeDataKey]), function (labelKey) {\n                if (labelKey.slice(0, 1) === token) {\n                    labels.push({\n                        type: labelType,\n                        key: labelKey,\n                        label: localeData[localeDataKey][labelKey]\n                    });\n                }\n            });\n        });\n\n        return labels;\n    }\n\n    // durationPluralKey\n    function durationPluralKey(token, integerValue, decimalValue) {\n        // Singular for a value of `1`, but not for `1.0`.\n        if (integerValue === 1 && decimalValue === null) {\n            return token;\n        }\n\n        return token + token;\n    }\n\n    var engLocale = {\n        durationLabelsStandard: {\n            S: 'millisecond',\n            SS: 'milliseconds',\n            s: 'second',\n            ss: 'seconds',\n            m: 'minute',\n            mm: 'minutes',\n            h: 'hour',\n            hh: 'hours',\n            d: 'day',\n            dd: 'days',\n            w: 'week',\n            ww: 'weeks',\n            M: 'month',\n            MM: 'months',\n            y: 'year',\n            yy: 'years'\n        },\n        durationLabelsShort: {\n            S: 'msec',\n            SS: 'msecs',\n            s: 'sec',\n            ss: 'secs',\n            m: 'min',\n            mm: 'mins',\n            h: 'hr',\n            hh: 'hrs',\n            d: 'dy',\n            dd: 'dys',\n            w: 'wk',\n            ww: 'wks',\n            M: 'mo',\n            MM: 'mos',\n            y: 'yr',\n            yy: 'yrs'\n        },\n        durationTimeTemplates: {\n            HMS: 'h:mm:ss',\n            HM: 'h:mm',\n            MS: 'm:ss'\n        },\n        durationLabelTypes: [\n            { type: \"standard\", string: \"__\" },\n            { type: \"short\", string: \"_\" }\n        ],\n        durationPluralKey: durationPluralKey\n    };\n\n    // isArray\n    function isArray(array) {\n        return Object.prototype.toString.call(array) === \"[object Array]\";\n    }\n\n    // isObject\n    function isObject(obj) {\n        return Object.prototype.toString.call(obj) === \"[object Object]\";\n    }\n\n    // findLast\n    function findLast(array, callback) {\n        var index = array.length;\n\n        while (index -= 1) {\n            if (callback(array[index])) { return array[index]; }\n        }\n    }\n\n    // find\n    function find(array, callback) {\n        var index = 0;\n\n        var max = array && array.length || 0;\n\n        var match;\n\n        if (typeof callback !== \"function\") {\n            match = callback;\n            callback = function (item) {\n                return item === match;\n            };\n        }\n\n        while (index < max) {\n            if (callback(array[index])) { return array[index]; }\n            index += 1;\n        }\n    }\n\n    // each\n    function each(array, callback) {\n        var index = 0,\n            max = array.length;\n\n        if (!array || !max) { return; }\n\n        while (index < max) {\n            if (callback(array[index], index) === false) { return; }\n            index += 1;\n        }\n    }\n\n    // map\n    function map(array, callback) {\n        var index = 0,\n            max = array.length,\n            ret = [];\n\n        if (!array || !max) { return ret; }\n\n        while (index < max) {\n            ret[index] = callback(array[index], index);\n            index += 1;\n        }\n\n        return ret;\n    }\n\n    // pluck\n    function pluck(array, prop) {\n        return map(array, function (item) {\n            return item[prop];\n        });\n    }\n\n    // compact\n    function compact(array) {\n        var ret = [];\n\n        each(array, function (item) {\n            if (item) { ret.push(item); }\n        });\n\n        return ret;\n    }\n\n    // unique\n    function unique(array) {\n        var ret = [];\n\n        each(array, function (_a) {\n            if (!find(ret, _a)) { ret.push(_a); }\n        });\n\n        return ret;\n    }\n\n    // intersection\n    function intersection(a, b) {\n        var ret = [];\n\n        each(a, function (_a) {\n            each(b, function (_b) {\n                if (_a === _b) { ret.push(_a); }\n            });\n        });\n\n        return unique(ret);\n    }\n\n    // rest\n    function rest(array, callback) {\n        var ret = [];\n\n        each(array, function (item, index) {\n            if (!callback(item)) {\n                ret = array.slice(index);\n                return false;\n            }\n        });\n\n        return ret;\n    }\n\n    // initial\n    function initial(array, callback) {\n        var reversed = array.slice().reverse();\n\n        return rest(reversed, callback).reverse();\n    }\n\n    // extend\n    function extend(a, b) {\n        for (var key in b) {\n            if (b.hasOwnProperty(key)) { a[key] = b[key]; }\n        }\n\n        return a;\n    }\n\n    // keys\n    function keys(a) {\n        var ret = [];\n\n        for (var key in a) {\n            if (a.hasOwnProperty(key)) { ret.push(key); }\n        }\n\n        return ret;\n    }\n\n    // any\n    function any(array, callback) {\n        var index = 0,\n            max = array.length;\n\n        if (!array || !max) { return false; }\n\n        while (index < max) {\n            if (callback(array[index], index) === true) { return true; }\n            index += 1;\n        }\n\n        return false;\n    }\n\n    // flatten\n    function flatten(array) {\n        var ret = [];\n\n        each(array, function(child) {\n            ret = ret.concat(child);\n        });\n\n        return ret;\n    }\n\n    function toLocaleStringSupportsLocales() {\n        var number = 0;\n        try {\n            number.toLocaleString('i');\n        } catch (e) {\n            return e.name === 'RangeError';\n        }\n        return false;\n    }\n\n    function featureTestFormatterRounding(formatter) {\n        return formatter(3.55, \"en\", {\n            useGrouping: false,\n            minimumIntegerDigits: 1,\n            minimumFractionDigits: 1,\n            maximumFractionDigits: 1\n        }) === \"3.6\";\n    }\n\n    function featureTestFormatter(formatter) {\n        var passed = true;\n\n        // Test minimumIntegerDigits.\n        passed = passed && formatter(1, \"en\", { minimumIntegerDigits: 1 }) === \"1\";\n        passed = passed && formatter(1, \"en\", { minimumIntegerDigits: 2 }) === \"01\";\n        passed = passed && formatter(1, \"en\", { minimumIntegerDigits: 3 }) === \"001\";\n        if (!passed) { return false; }\n\n        // Test maximumFractionDigits and minimumFractionDigits.\n        passed = passed && formatter(99.99, \"en\", { maximumFractionDigits: 0, minimumFractionDigits: 0 }) === \"100\";\n        passed = passed && formatter(99.99, \"en\", { maximumFractionDigits: 1, minimumFractionDigits: 1 }) === \"100.0\";\n        passed = passed && formatter(99.99, \"en\", { maximumFractionDigits: 2, minimumFractionDigits: 2 }) === \"99.99\";\n        passed = passed && formatter(99.99, \"en\", { maximumFractionDigits: 3, minimumFractionDigits: 3 }) === \"99.990\";\n        if (!passed) { return false; }\n\n        // Test maximumSignificantDigits.\n        passed = passed && formatter(99.99, \"en\", { maximumSignificantDigits: 1 }) === \"100\";\n        passed = passed && formatter(99.99, \"en\", { maximumSignificantDigits: 2 }) === \"100\";\n        passed = passed && formatter(99.99, \"en\", { maximumSignificantDigits: 3 }) === \"100\";\n        passed = passed && formatter(99.99, \"en\", { maximumSignificantDigits: 4 }) === \"99.99\";\n        passed = passed && formatter(99.99, \"en\", { maximumSignificantDigits: 5 }) === \"99.99\";\n        if (!passed) { return false; }\n\n        // Test grouping.\n        passed = passed && formatter(1000, \"en\", { useGrouping: true }) === \"1,000\";\n        passed = passed && formatter(1000, \"en\", { useGrouping: false }) === \"1000\";\n        if (!passed) { return false; }\n\n        return true;\n    }\n\n    // durationsFormat(durations [, template] [, precision] [, settings])\n    function durationsFormat() {\n        var args = [].slice.call(arguments);\n        var settings = {};\n        var durations;\n\n        // Parse arguments.\n        each(args, function (arg, index) {\n            if (!index) {\n                if (!isArray(arg)) {\n                    throw \"Expected array as the first argument to durationsFormat.\";\n                }\n\n                durations = arg;\n            }\n\n            if (typeof arg === \"string\" || typeof arg === \"function\") {\n                settings.template = arg;\n                return;\n            }\n\n            if (typeof arg === \"number\") {\n                settings.precision = arg;\n                return;\n            }\n\n            if (isObject(arg)) {\n                extend(settings, arg);\n            }\n        });\n\n        if (!durations || !durations.length) {\n            return [];\n        }\n\n        settings.returnMomentTypes = true;\n\n        var formattedDurations = map(durations, function (dur) {\n            return dur.format(settings);\n        });\n\n        // Merge token types from all durations.\n        var outputTypes = intersection(types, unique(pluck(flatten(formattedDurations), \"type\")));\n\n        var largest = settings.largest;\n\n        if (largest) {\n            outputTypes = outputTypes.slice(0, largest);\n        }\n\n        settings.returnMomentTypes = false;\n        settings.outputTypes = outputTypes;\n\n        return map(durations, function (dur) {\n            return dur.format(settings);\n        });\n    }\n\n    // durationFormat([template] [, precision] [, settings])\n    function durationFormat() {\n\n        var args = [].slice.call(arguments);\n        var settings = extend({}, this.format.defaults);\n\n        // Keep a shadow copy of this moment for calculating remainders.\n        // Perform all calculations on positive duration value, handle negative\n        // sign at the very end.\n        var asMilliseconds = this.asMilliseconds();\n        var asMonths = this.asMonths();\n\n        // Treat invalid durations as having a value of 0 milliseconds.\n        if (typeof this.isValid === \"function\" && this.isValid() === false) {\n            asMilliseconds = 0;\n            asMonths = 0;\n        }\n\n        var isNegative = asMilliseconds < 0;\n\n        // Two shadow copies are needed because of the way moment.js handles\n        // duration arithmetic for years/months and for weeks/days/hours/minutes/seconds.\n        var remainder = moment.duration(Math.abs(asMilliseconds), \"milliseconds\");\n        var remainderMonths = moment.duration(Math.abs(asMonths), \"months\");\n\n        // Parse arguments.\n        each(args, function (arg) {\n            if (typeof arg === \"string\" || typeof arg === \"function\") {\n                settings.template = arg;\n                return;\n            }\n\n            if (typeof arg === \"number\") {\n                settings.precision = arg;\n                return;\n            }\n\n            if (isObject(arg)) {\n                extend(settings, arg);\n            }\n        });\n\n        var momentTokens = {\n            years: \"y\",\n            months: \"M\",\n            weeks: \"w\",\n            days: \"d\",\n            hours: \"h\",\n            minutes: \"m\",\n            seconds: \"s\",\n            milliseconds: \"S\"\n        };\n\n        var tokenDefs = {\n            escape: /\\[(.+?)\\]/,\n            years: /\\*?[Yy]+/,\n            months: /\\*?M+/,\n            weeks: /\\*?[Ww]+/,\n            days: /\\*?[Dd]+/,\n            hours: /\\*?[Hh]+/,\n            minutes: /\\*?m+/,\n            seconds: /\\*?s+/,\n            milliseconds: /\\*?S+/,\n            general: /.+?/\n        };\n\n        // Types array is available in the template function.\n        settings.types = types;\n\n        var typeMap = function (token) {\n            return find(types, function (type) {\n                return tokenDefs[type].test(token);\n            });\n        };\n\n        var tokenizer = new RegExp(map(types, function (type) {\n            return tokenDefs[type].source;\n        }).join(\"|\"), \"g\");\n\n        // Current duration object is available in the template function.\n        settings.duration = this;\n\n        // Eval template function and cache template string.\n        var template = typeof settings.template === \"function\" ? settings.template.apply(settings) : settings.template;\n\n        // outputTypes and returnMomentTypes are settings to support durationsFormat().\n\n        // outputTypes is an array of moment token types that determines\n        // the tokens returned in formatted output. This option overrides\n        // trim, largest, stopTrim, etc.\n        var outputTypes = settings.outputTypes;\n\n        // returnMomentTypes is a boolean that sets durationFormat to return\n        // the processed momentTypes instead of formatted output.\n        var returnMomentTypes = settings.returnMomentTypes;\n\n        var largest = settings.largest;\n\n        // Setup stopTrim array of token types.\n        var stopTrim = [];\n\n        if (!outputTypes) {\n            if (isArray(settings.stopTrim)) {\n                settings.stopTrim = settings.stopTrim.join(\"\");\n            }\n\n            // Parse stopTrim string to create token types array.\n            if (settings.stopTrim) {\n                each(settings.stopTrim.match(tokenizer), function (token) {\n                    var type = typeMap(token);\n\n                    if (type === \"escape\" || type === \"general\") {\n                        return;\n                    }\n\n                    stopTrim.push(type);\n                });\n            }\n        }\n\n        // Cache moment's locale data.\n        var localeData = moment.localeData();\n\n        if (!localeData) {\n            localeData = {};\n        }\n\n        // Fall back to this plugin's `eng` extension.\n        each(keys(engLocale), function (key) {\n            if (typeof engLocale[key] === \"function\") {\n                if (!localeData[key]) {\n                    localeData[key] = engLocale[key];\n                }\n\n                return;\n            }\n\n            if (!localeData[\"_\" + key]) {\n                localeData[\"_\" + key] = engLocale[key];\n            }\n        });\n\n        // Replace Duration Time Template strings.\n        // For locale `eng`: `_HMS_`, `_HM_`, and `_MS_`.\n        each(keys(localeData._durationTimeTemplates), function (item) {\n            template = template.replace(\"_\" + item + \"_\", localeData._durationTimeTemplates[item]);\n        });\n\n        // Determine user's locale.\n        var userLocale = settings.userLocale || moment.locale();\n\n        var useLeftUnits = settings.useLeftUnits;\n        var usePlural = settings.usePlural;\n        var precision = settings.precision;\n        var forceLength = settings.forceLength;\n        var useGrouping = settings.useGrouping;\n        var trunc = settings.trunc;\n\n        // Use significant digits only when precision is greater than 0.\n        var useSignificantDigits = settings.useSignificantDigits && precision > 0;\n        var significantDigits = useSignificantDigits ? settings.precision : 0;\n        var significantDigitsCache = significantDigits;\n\n        var minValue = settings.minValue;\n        var isMinValue = false;\n\n        var maxValue = settings.maxValue;\n        var isMaxValue = false;\n\n        // formatNumber fallback options.\n        var useToLocaleString = settings.useToLocaleString;\n        var groupingSeparator = settings.groupingSeparator;\n        var decimalSeparator = settings.decimalSeparator;\n        var grouping = settings.grouping;\n\n        useToLocaleString = useToLocaleString && (toLocaleStringWorks || intlNumberFormatWorks);\n\n        // Trim options.\n        var trim = settings.trim;\n\n        if (isArray(trim)) {\n            trim = trim.join(\" \");\n        }\n\n        if (trim === null && (largest || maxValue || useSignificantDigits)) {\n            trim = \"all\";\n        }\n\n        if (trim === null || trim === true || trim === \"left\" || trim === \"right\") {\n            trim = \"large\";\n        }\n\n        if (trim === false) {\n            trim = \"\";\n        }\n\n        var trimIncludes = function (item) {\n            return item.test(trim);\n        };\n\n        var rLarge = /large/;\n        var rSmall = /small/;\n        var rBoth = /both/;\n        var rMid = /mid/;\n        var rAll = /^all|[^sm]all/;\n        var rFinal = /final/;\n\n        var trimLarge = largest > 0 || any([rLarge, rBoth, rAll], trimIncludes);\n        var trimSmall = any([rSmall, rBoth, rAll], trimIncludes);\n        var trimMid = any([rMid, rAll], trimIncludes);\n        var trimFinal = any([rFinal, rAll], trimIncludes);\n\n        // Parse format string to create raw tokens array.\n        var rawTokens = map(template.match(tokenizer), function (token, index) {\n            var type = typeMap(token);\n\n            if (token.slice(0, 1) === \"*\") {\n                token = token.slice(1);\n\n                if (type !== \"escape\" && type !== \"general\") {\n                    stopTrim.push(type);\n                }\n            }\n\n            return {\n                index: index,\n                length: token.length,\n                text: \"\",\n\n                // Replace escaped tokens with the non-escaped token text.\n                token: (type === \"escape\" ? token.replace(tokenDefs.escape, \"$1\") : token),\n\n                // Ignore type on non-moment tokens.\n                type: ((type === \"escape\" || type === \"general\") ? null : type)\n            };\n        });\n\n        // Associate text tokens with moment tokens.\n        var currentToken = {\n            index: 0,\n            length: 0,\n            token: \"\",\n            text: \"\",\n            type: null\n        };\n\n        var tokens = [];\n\n        if (useLeftUnits) {\n            rawTokens.reverse();\n        }\n\n        each(rawTokens, function (token) {\n            if (token.type) {\n                if (currentToken.type || currentToken.text) {\n                    tokens.push(currentToken);\n                }\n\n                currentToken = token;\n\n                return;\n            }\n\n            if (useLeftUnits) {\n                currentToken.text = token.token + currentToken.text;\n            } else {\n                currentToken.text += token.token;\n            }\n        });\n\n        if (currentToken.type || currentToken.text) {\n            tokens.push(currentToken);\n        }\n\n        if (useLeftUnits) {\n            tokens.reverse();\n        }\n\n        // Find unique moment token types in the template in order of\n        // descending magnitude.\n        var momentTypes = intersection(types, unique(compact(pluck(tokens, \"type\"))));\n\n        // Exit early if there are no moment token types.\n        if (!momentTypes.length) {\n            return pluck(tokens, \"text\").join(\"\");\n        }\n\n        // Calculate values for each moment type in the template.\n        // For processing the settings, values are associated with moment types.\n        // Values will be assigned to tokens at the last step in order to\n        // assume nothing about frequency or order of tokens in the template.\n        momentTypes = map(momentTypes, function (momentType, index) {\n            // Is this the least-magnitude moment token found?\n            var isSmallest = ((index + 1) === momentTypes.length);\n\n            // Is this the greatest-magnitude moment token found?\n            var isLargest = (!index);\n\n            // Get the raw value in the current units.\n            var rawValue;\n\n            if (momentType === \"years\" || momentType === \"months\") {\n                rawValue = remainderMonths.as(momentType);\n            } else {\n                rawValue = remainder.as(momentType);\n            }\n\n            var wholeValue = Math.floor(rawValue);\n            var decimalValue = rawValue - wholeValue;\n\n            var token = find(tokens, function (token) {\n                return momentType === token.type;\n            });\n\n            if (isLargest && maxValue && rawValue > maxValue) {\n                isMaxValue = true;\n            }\n\n            if (isSmallest && minValue && Math.abs(settings.duration.as(momentType)) < minValue) {\n                isMinValue = true;\n            }\n\n            // Note the length of the largest-magnitude moment token:\n            // if it is greater than one and forceLength is not set,\n            // then default forceLength to `true`.\n            //\n            // Rationale is this: If the template is \"h:mm:ss\" and the\n            // moment value is 5 minutes, the user-friendly output is\n            // \"5:00\", not \"05:00\". We shouldn't pad the `minutes` token\n            // even though it has length of two if the template is \"h:mm:ss\";\n            //\n            // If the minutes output should always include the leading zero\n            // even when the hour is trimmed then set `{ forceLength: true }`\n            // to output \"05:00\". If the template is \"hh:mm:ss\", the user\n            // clearly wanted everything padded so we should output \"05:00\";\n            //\n            // If the user wants the full padded output, they can use\n            // template \"hh:mm:ss\" and set `{ trim: false }` to output\n            // \"00:05:00\".\n            if (isLargest && forceLength === null && token.length > 1) {\n                forceLength = true;\n            }\n\n            // Update remainder.\n            remainder.subtract(wholeValue, momentType);\n            remainderMonths.subtract(wholeValue, momentType);\n\n            return {\n                rawValue: rawValue,\n                wholeValue: wholeValue,\n                // Decimal value is only retained for the least-magnitude\n                // moment type in the format template.\n                decimalValue: isSmallest ? decimalValue : 0,\n                isSmallest: isSmallest,\n                isLargest: isLargest,\n                type: momentType,\n                // Tokens can appear multiple times in a template string,\n                // but all instances must share the same length.\n                tokenLength: token.length\n            };\n        });\n\n        var truncMethod = trunc ? Math.floor : Math.round;\n        var truncate = function (value, places) {\n            var factor = Math.pow(10, places);\n            return truncMethod(value * factor) / factor;\n        };\n\n        var foundFirst = false;\n        var bubbled = false;\n\n        var formatValue = function (momentType, index) {\n            var formatOptions = {\n                useGrouping: useGrouping,\n                groupingSeparator: groupingSeparator,\n                decimalSeparator: decimalSeparator,\n                grouping: grouping,\n                useToLocaleString: useToLocaleString\n            };\n\n            if (useSignificantDigits) {\n                if (significantDigits <= 0) {\n                    momentType.rawValue = 0;\n                    momentType.wholeValue = 0;\n                    momentType.decimalValue = 0;\n                } else {\n                    formatOptions.maximumSignificantDigits = significantDigits;\n                    momentType.significantDigits = significantDigits;\n                }\n            }\n\n            if (isMaxValue && !bubbled) {\n                if (momentType.isLargest) {\n                    momentType.wholeValue = maxValue;\n                    momentType.decimalValue = 0;\n                } else {\n                    momentType.wholeValue = 0;\n                    momentType.decimalValue = 0;\n                }\n            }\n\n            if (isMinValue && !bubbled) {\n                if (momentType.isSmallest) {\n                    momentType.wholeValue = minValue;\n                    momentType.decimalValue = 0;\n                } else {\n                    momentType.wholeValue = 0;\n                    momentType.decimalValue = 0;\n                }\n            }\n\n            if (momentType.isSmallest || momentType.significantDigits && momentType.significantDigits - momentType.wholeValue.toString().length <= 0) {\n                // Apply precision to least significant token value.\n                if (precision < 0) {\n                    momentType.value = truncate(momentType.wholeValue, precision);\n                } else if (precision === 0) {\n                    momentType.value = truncMethod(momentType.wholeValue + momentType.decimalValue);\n                } else { // precision > 0\n                    if (useSignificantDigits) {\n                        if (trunc) {\n                            momentType.value = truncate(momentType.rawValue, significantDigits - momentType.wholeValue.toString().length);\n                        } else {\n                            momentType.value = momentType.rawValue;\n                        }\n\n                        if (momentType.wholeValue) {\n                            significantDigits -= momentType.wholeValue.toString().length;\n                        }\n                    } else {\n                        formatOptions.fractionDigits = precision;\n\n                        if (trunc) {\n                            momentType.value = momentType.wholeValue + truncate(momentType.decimalValue, precision);\n                        } else {\n                            momentType.value = momentType.wholeValue + momentType.decimalValue;\n                        }\n                    }\n                }\n            } else {\n                if (useSignificantDigits && momentType.wholeValue) {\n                    // Outer Math.round required here to handle floating point errors.\n                    momentType.value = Math.round(truncate(momentType.wholeValue, momentType.significantDigits - momentType.wholeValue.toString().length));\n\n                    significantDigits -= momentType.wholeValue.toString().length;\n                } else {\n                    momentType.value = momentType.wholeValue;\n                }\n            }\n\n            if (momentType.tokenLength > 1 && (forceLength || foundFirst)) {\n                formatOptions.minimumIntegerDigits = momentType.tokenLength;\n\n                if (bubbled && formatOptions.maximumSignificantDigits < momentType.tokenLength) {\n                    delete formatOptions.maximumSignificantDigits;\n                }\n            }\n\n            if (!foundFirst && (momentType.value > 0 || trim === \"\" /* trim: false */ || find(stopTrim, momentType.type) || find(outputTypes, momentType.type))) {\n                foundFirst = true;\n            }\n\n            momentType.formattedValue = formatNumber(momentType.value, formatOptions, userLocale);\n\n            formatOptions.useGrouping = false;\n            formatOptions.decimalSeparator = \".\";\n            momentType.formattedValueEn = formatNumber(momentType.value, formatOptions, \"en\");\n\n            if (momentType.tokenLength === 2 && momentType.type === \"milliseconds\") {\n                momentType.formattedValueMS = formatNumber(momentType.value, {\n                    minimumIntegerDigits: 3,\n                    useGrouping: false\n                }, \"en\").slice(0, 2);\n            }\n\n            return momentType;\n        };\n\n        // Calculate formatted values.\n        momentTypes = map(momentTypes, formatValue);\n        momentTypes = compact(momentTypes);\n\n        // Bubble rounded values.\n        if (momentTypes.length > 1) {\n            var findType = function (type) {\n                return find(momentTypes, function (momentType) {\n                    return momentType.type === type;\n                });\n            };\n\n            var bubbleTypes = function (bubble) {\n                var bubbleMomentType = findType(bubble.type);\n\n                if (!bubbleMomentType) {\n                    return;\n                }\n\n                each(bubble.targets, function (target) {\n                    var targetMomentType = findType(target.type);\n\n                    if (!targetMomentType) {\n                        return;\n                    }\n\n                    if (parseInt(bubbleMomentType.formattedValueEn, 10) === target.value) {\n                        bubbleMomentType.rawValue = 0;\n                        bubbleMomentType.wholeValue = 0;\n                        bubbleMomentType.decimalValue = 0;\n                        targetMomentType.rawValue += 1;\n                        targetMomentType.wholeValue += 1;\n                        targetMomentType.decimalValue = 0;\n                        targetMomentType.formattedValueEn = targetMomentType.wholeValue.toString();\n                        bubbled = true;\n                    }\n                });\n            };\n\n            each(bubbles, bubbleTypes);\n        }\n\n        // Recalculate formatted values.\n        if (bubbled) {\n            foundFirst = false;\n            significantDigits = significantDigitsCache;\n            momentTypes = map(momentTypes, formatValue);\n            momentTypes = compact(momentTypes);\n        }\n\n        if (outputTypes && !(isMaxValue && !settings.trim)) {\n            momentTypes = map(momentTypes, function (momentType) {\n                if (find(outputTypes, function (outputType) {\n                    return momentType.type === outputType;\n                })) {\n                    return momentType;\n                }\n\n                return null;\n            });\n\n            momentTypes = compact(momentTypes);\n        } else {\n            // Trim Large.\n            if (trimLarge) {\n                momentTypes = rest(momentTypes, function (momentType) {\n                    // Stop trimming on:\n                    // - the smallest moment type\n                    // - a type marked for stopTrim\n                    // - a type that has a whole value\n                    return !momentType.isSmallest && !momentType.wholeValue && !find(stopTrim, momentType.type);\n                });\n            }\n\n            // Largest.\n            if (largest && momentTypes.length) {\n                momentTypes = momentTypes.slice(0, largest);\n            }\n\n            // Trim Small.\n            if (trimSmall && momentTypes.length > 1) {\n                momentTypes = initial(momentTypes, function (momentType) {\n                    // Stop trimming on:\n                    // - a type marked for stopTrim\n                    // - a type that has a whole value\n                    // - the largest momentType\n                    return !momentType.wholeValue && !find(stopTrim, momentType.type) && !momentType.isLargest;\n                });\n            }\n\n            // Trim Mid.\n            if (trimMid) {\n                momentTypes = map(momentTypes, function (momentType, index) {\n                    if (index > 0 && index < momentTypes.length - 1 && !momentType.wholeValue) {\n                        return null;\n                    }\n\n                    return momentType;\n                });\n\n                momentTypes = compact(momentTypes);\n            }\n\n            // Trim Final.\n            if (trimFinal && momentTypes.length === 1 && !momentTypes[0].wholeValue && !(!trunc && momentTypes[0].isSmallest && momentTypes[0].rawValue < minValue)) {\n                momentTypes = [];\n            }\n        }\n\n        if (returnMomentTypes) {\n            return momentTypes;\n        }\n\n        // Localize and pluralize unit labels.\n        each(tokens, function (token) {\n            var key = momentTokens[token.type];\n\n            var momentType = find(momentTypes, function (momentType) {\n                return momentType.type === token.type;\n            });\n\n            if (!key || !momentType) {\n                return;\n            }\n\n            var values = momentType.formattedValueEn.split(\".\");\n\n            values[0] = parseInt(values[0], 10);\n\n            if (values[1]) {\n                values[1] = parseFloat(\"0.\" + values[1], 10);\n            } else {\n                values[1] = null;\n            }\n\n            var pluralKey = localeData.durationPluralKey(key, values[0], values[1]);\n\n            var labels = durationGetLabels(key, localeData);\n\n            var autoLocalized = false;\n\n            var pluralizedLabels = {};\n\n            // Auto-Localized unit labels.\n            each(localeData._durationLabelTypes, function (labelType) {\n                var label = find(labels, function (label) {\n                    return label.type === labelType.type && label.key === pluralKey;\n                });\n\n                if (label) {\n                    pluralizedLabels[label.type] = label.label;\n\n                    if (stringIncludes(token.text, labelType.string)) {\n                        token.text = token.text.replace(labelType.string, label.label);\n                        autoLocalized = true;\n                    }\n                }\n            });\n\n            // Auto-pluralized unit labels.\n            if (usePlural && !autoLocalized) {\n                labels.sort(durationLabelCompare);\n\n                each(labels, function (label) {\n                    if (pluralizedLabels[label.type] === label.label) {\n                        if (stringIncludes(token.text, label.label)) {\n                            // Stop checking this token if its label is already\n                            // correctly pluralized.\n                            return false;\n                        }\n\n                        // Skip this label if it is correct, but not present in\n                        // the token's text.\n                        return;\n                    }\n\n                    if (stringIncludes(token.text, label.label)) {\n                        // Replece this token's label and stop checking.\n                        token.text = token.text.replace(label.label, pluralizedLabels[label.type]);\n                        return false;\n                    }\n                });\n            }\n        });\n\n        // Build ouptut.\n        tokens = map(tokens, function (token) {\n            if (!token.type) {\n                return token.text;\n            }\n\n            var momentType = find(momentTypes, function (momentType) {\n                return momentType.type === token.type;\n            });\n\n            if (!momentType) {\n                return \"\";\n            }\n\n            var out = \"\";\n\n            if (useLeftUnits) {\n                out += token.text;\n            }\n\n            if (isNegative && isMaxValue || !isNegative && isMinValue) {\n                out += \"< \";\n                isMaxValue = false;\n                isMinValue = false;\n            }\n\n            if (isNegative && isMinValue || !isNegative && isMaxValue) {\n                out += \"> \";\n                isMaxValue = false;\n                isMinValue = false;\n            }\n\n            if (isNegative && (momentType.value > 0 || trim === \"\" || find(stopTrim, momentType.type) || find(outputTypes, momentType.type))) {\n                out += \"-\";\n                isNegative = false;\n            }\n\n            if (token.type === \"milliseconds\" && momentType.formattedValueMS) {\n                out += momentType.formattedValueMS;\n            } else {\n                out += momentType.formattedValue;\n            }\n\n            if (!useLeftUnits) {\n                out += token.text;\n            }\n\n            return out;\n        });\n\n        // Trim leading and trailing comma, space, colon, and dot.\n        return tokens.join(\"\").replace(/(,| |:|\\.)*$/, \"\").replace(/^(,| |:|\\.)*/, \"\");\n    }\n\n    // defaultFormatTemplate\n    function defaultFormatTemplate() {\n        var dur = this.duration;\n\n        var findType = function findType(type) {\n            return dur._data[type];\n        };\n\n        var firstType = find(this.types, findType);\n\n        var lastType = findLast(this.types, findType);\n\n        // Default template strings for each duration dimension type.\n        switch (firstType) {\n            case \"milliseconds\":\n                return \"S __\";\n            case \"seconds\": // Fallthrough.\n            case \"minutes\":\n                return \"*_MS_\";\n            case \"hours\":\n                return \"_HMS_\";\n            case \"days\": // Possible Fallthrough.\n                if (firstType === lastType) {\n                    return \"d __\";\n                }\n            case \"weeks\":\n                if (firstType === lastType) {\n                    return \"w __\";\n                }\n\n                if (this.trim === null) {\n                    this.trim = \"both\";\n                }\n\n                return \"w __, d __, h __\";\n            case \"months\": // Possible Fallthrough.\n                if (firstType === lastType) {\n                    return \"M __\";\n                }\n            case \"years\":\n                if (firstType === lastType) {\n                    return \"y __\";\n                }\n\n                if (this.trim === null) {\n                    this.trim = \"both\";\n                }\n\n                return \"y __, M __, d __\";\n            default:\n                if (this.trim === null) {\n                    this.trim = \"both\";\n                }\n\n                return \"y __, d __, h __, m __, s __\";\n        }\n    }\n\n    // init\n    function init(context) {\n        if (!context) {\n            throw \"Moment Duration Format init cannot find moment instance.\";\n        }\n\n        context.duration.format = durationsFormat;\n        context.duration.fn.format = durationFormat;\n\n        context.duration.fn.format.defaults = {\n            // Many options are defaulted to `null` to distinguish between\n            // 'not set' and 'set to `false`'\n\n            // trim\n            // Can be a string, a delimited list of strings, an array of strings,\n            // or a boolean.\n            // \"large\" - will trim largest-magnitude zero-value tokens until\n            // finding a token with a value, a token identified as 'stopTrim', or\n            // the final token of the format string.\n            // \"small\" - will trim smallest-magnitude zero-value tokens until\n            // finding a token with a value, a token identified as 'stopTrim', or\n            // the final token of the format string.\n            // \"both\" - will execute \"large\" trim then \"small\" trim.\n            // \"mid\" - will trim any zero-value tokens that are not the first or\n            // last tokens. Usually used in conjunction with \"large\" or \"both\".\n            // e.g. \"large mid\" or \"both mid\".\n            // \"final\" - will trim the final token if it is zero-value. Use this\n            // option with \"large\" or \"both\" to output an empty string when\n            // formatting a zero-value duration. e.g. \"large final\" or \"both final\".\n            // \"all\" - Will trim all zero-value tokens. Shorthand for \"both mid final\".\n            // \"left\" - maps to \"large\" to support plugin's version 1 API.\n            // \"right\" - maps to \"large\" to support plugin's version 1 API.\n            // `false` - template tokens are not trimmed.\n            // `true` - treated as \"large\".\n            // `null` - treated as \"large\".\n            trim: null,\n\n            // stopTrim\n            // A moment token string, a delimited set of moment token strings,\n            // or an array of moment token strings. Trimming will stop when a token\n            // listed in this option is reached. A \"*\" character in the format\n            // template string will also mark a moment token as stopTrim.\n            // e.g. \"d [days] *h:mm:ss\" will always stop trimming at the 'hours' token.\n            stopTrim: null,\n\n            // largest\n            // Set to a positive integer to output only the \"n\" largest-magnitude\n            // moment tokens that have a value. All lesser-magnitude moment tokens\n            // will be ignored. This option takes effect even if `trim` is set\n            // to `false`.\n            largest: null,\n\n            // maxValue\n            // Use `maxValue` to render generalized output for large duration values,\n            // e.g. `\"> 60 days\"`. `maxValue` must be a positive integer and is\n            /// applied to the greatest-magnitude moment token in the format template.\n            maxValue: null,\n\n            // minValue\n            // Use `minValue` to render generalized output for small duration values,\n            // e.g. `\"< 5 minutes\"`. `minValue` must be a positive integer and is\n            // applied to the least-magnitude moment token in the format template.\n            minValue: null,\n\n            // precision\n            // If a positive integer, number of decimal fraction digits to render.\n            // If a negative integer, number of integer place digits to truncate to 0.\n            // If `useSignificantDigits` is set to `true` and `precision` is a positive\n            // integer, sets the maximum number of significant digits used in the\n            // formatted output.\n            precision: 0,\n\n            // trunc\n            // Default behavior rounds final token value. Set to `true` to\n            // truncate final token value, which was the default behavior in\n            // version 1 of this plugin.\n            trunc: false,\n\n            // forceLength\n            // Force first moment token with a value to render at full length\n            // even when template is trimmed and first moment token has length of 1.\n            forceLength: null,\n\n            // userLocale\n            // Formatted numerical output is rendered using `toLocaleString`\n            // and the locale of the user's environment. Set this option to render\n            // numerical output using a different locale. Unit names are rendered\n            // and detected using the locale set in moment.js, which can be different\n            // from the locale of user's environment.\n            userLocale: null,\n\n            // usePlural\n            // Will automatically singularize or pluralize unit names when they\n            // appear in the text associated with each moment token. Standard and\n            // short unit labels are singularized and pluralized, based on locale.\n            // e.g. in english, \"1 second\" or \"1 sec\" would be rendered instead\n            // of \"1 seconds\" or \"1 secs\". The default pluralization function\n            // renders a plural label for a value with decimal precision.\n            // e.g. \"1.0 seconds\" is never rendered as \"1.0 second\".\n            // Label types and pluralization function are configurable in the\n            // localeData extensions.\n            usePlural: true,\n\n            // useLeftUnits\n            // The text to the right of each moment token in a format string\n            // is treated as that token's units for the purposes of trimming,\n            // singularizing, and auto-localizing.\n            // e.g. \"h [hours], m [minutes], s [seconds]\".\n            // To properly singularize or localize a format string such as\n            // \"[hours] h, [minutes] m, [seconds] s\", where the units appear\n            // to the left of each moment token, set useLeftUnits to `true`.\n            // This plugin is not tested in the context of rtl text.\n            useLeftUnits: false,\n\n            // useGrouping\n            // Enables locale-based digit grouping in the formatted output. See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/toLocaleString\n            useGrouping: true,\n\n            // useSignificantDigits\n            // Treat the `precision` option as the maximum significant digits\n            // to be rendered. Precision must be a positive integer. Significant\n            // digits extend across unit types,\n            // e.g. \"6 hours 37.5 minutes\" represents 4 significant digits.\n            // Enabling this option causes token length to be ignored. See  https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/toLocaleString\n            useSignificantDigits: false,\n\n            // template\n            // The template string used to format the duration. May be a function\n            // or a string. Template functions are executed with the `this` binding\n            // of the settings object so that template strings may be dynamically\n            // generated based on the duration object (accessible via `this.duration`)\n            // or any of the other settings. Leading and trailing space, comma,\n            // period, and colon characters are trimmed from the resulting string.\n            template: defaultFormatTemplate,\n\n            // useToLocaleString\n            // Set this option to `false` to ignore the `toLocaleString` feature\n            // test and force the use of the `formatNumber` fallback function\n            // included in this plugin.\n            useToLocaleString: true,\n\n            // formatNumber fallback options.\n            // When `toLocaleString` is detected and passes the feature test, the\n            // following options will have no effect: `toLocaleString` will be used\n            // for formatting and the grouping separator, decimal separator, and\n            // integer digit grouping will be determined by the user locale.\n\n            // groupingSeparator\n            // The integer digit grouping separator used when using the fallback\n            // formatNumber function.\n            groupingSeparator: \",\",\n\n            // decimalSeparator\n            // The decimal separator used when using the fallback formatNumber\n            // function.\n            decimalSeparator: \".\",\n\n            // grouping\n            // The integer digit grouping used when using the fallback formatNumber\n            // function. Must be an array. The default value of `[3]` gives the\n            // standard 3-digit thousand/million/billion digit groupings for the\n            // \"en\" locale. Setting this option to `[3, 2]` would generate the\n            // thousand/lakh/crore digit groupings used in the \"en-IN\" locale.\n            grouping: [3]\n        };\n\n        context.updateLocale('en', engLocale);\n    }\n\n    // Run feature tests for `Number#toLocaleString`.\n    var toLocaleStringFormatter = function(number, locale, options) {\n        return number.toLocaleString(locale, options);\n    };\n\n    toLocaleStringWorks = toLocaleStringSupportsLocales() && featureTestFormatter(toLocaleStringFormatter);\n    toLocaleStringRoundingWorks = toLocaleStringWorks && featureTestFormatterRounding(toLocaleStringFormatter);\n\n    // Run feature tests for `Intl.NumberFormat#format`.\n    var intlNumberFormatFormatter = function(number, locale, options) {\n        if (typeof window !== 'undefined' && window && window.Intl && window.Intl.NumberFormat) {\n            return window.Intl.NumberFormat(locale, options).format(number);\n        }\n    };\n\n    intlNumberFormatWorks = featureTestFormatter(intlNumberFormatFormatter);\n    intlNumberFormatRoundingWorks = intlNumberFormatWorks && featureTestFormatterRounding(intlNumberFormatFormatter);\n\n    // Initialize duration format on the global moment instance.\n    init(moment);\n\n    // Return the init function so that duration format can be\n    // initialized on other moment instances.\n    return init;\n});\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  BaseGridCell,\n  Theme as GlideTheme,\n  GridCell,\n  GridCellKind,\n  GridColumn,\n  LoadingCell,\n  TextCell,\n} from \"@glideapps/glide-data-grid\"\nimport merge from \"lodash/merge\"\nimport toString from \"lodash/toString\"\nimport moment, { Moment } from \"moment\"\nimport \"moment-duration-format\"\nimport \"moment-timezone\"\nimport numbro from \"numbro\"\nimport { sprintf } from \"sprintf-js\"\n\nimport { formatPeriodType } from \"@streamlit/lib/src/dataframes/arrowFormatUtils\"\nimport { Type as ArrowType } from \"@streamlit/lib/src/dataframes/arrowTypeUtils\"\nimport { EmotionTheme } from \"@streamlit/lib/src/theme\"\nimport {\n  isNullOrUndefined,\n  notNullOrUndefined,\n} from \"@streamlit/lib/src/util/utils\"\n\n/**\n * Interface used for defining the properties (configuration options) of a column.\n * These options can also be used to overwrite from user-defined column config.\n */\nexport interface BaseColumnProps {\n  // The id of the column:\n  readonly id: string\n  // The name of the column from the original data:\n  readonly name: string\n  // The display title of the column:\n  readonly title: string\n  // The index number of the column:\n  readonly indexNumber: number\n  // The arrow data type of the column:\n  readonly arrowType: ArrowType\n  // If `True`, the column can be edited:\n  readonly isEditable: boolean\n  // If `True`, the column is hidden (will not be shown):\n  readonly isHidden: boolean\n  // If `True`, the column is a table index:\n  readonly isIndex: boolean\n  // If `True`, the column is pinned/frozen:\n  readonly isPinned: boolean\n  // If `True`, the column is a stretched:\n  readonly isStretched: boolean\n  // If `True`, a value is required before the cell or row can be submitted:\n  readonly isRequired?: boolean\n  // The initial width of the column:\n  readonly width?: number\n  // A help text that is displayed on hovering the column header.\n  readonly help?: string\n  // Configuration options related to the column type:\n  readonly columnTypeOptions?: Record<string, any>\n  // The content alignment of the column:\n  readonly contentAlignment?: \"left\" | \"center\" | \"right\"\n  // The default value of the column used when adding a new row:\n  readonly defaultValue?: string | number | boolean\n  // Theme overrides for this column:\n  readonly themeOverride?: Partial<GlideTheme>\n  // A custom icon to be displayed in the column header:\n  readonly icon?: string\n  // The group that this column belongs to.\n  readonly group?: string\n}\n\n/**\n * The interface that is implemented by any column type.\n */\nexport interface BaseColumn extends BaseColumnProps {\n  readonly kind: string\n  // Defines the sort mode that should be used for this column type:\n  // default: Sorts by interpreting all values as strings.\n  // smart: Detects if value is a number or a string and sorts accordingly.\n  // raw: Sorts based on the actual type of the cell data value.\n  readonly sortMode: \"default\" | \"raw\" | \"smart\"\n  // Validate the input data for compatibility with the column type:\n  // Either returns a boolean indicating if the data is valid or not, or\n  // returns the corrected value.\n  validateInput?(data?: any): boolean | any\n  // Get a cell with the provided data for the column type:\n  getCell(data?: any, validate?: boolean): GridCell\n  // Get the raw value of the given cell:\n  getCellValue(cell: GridCell): any | null\n}\n\n/**\n * A type that describes the function signature used to create a column based on\n * some column properties.\n */\nexport type ColumnCreator = {\n  (props: BaseColumnProps, theme: EmotionTheme): BaseColumn\n  readonly isEditableType: boolean\n}\n\n// See pydantic for inspiration: https://pydantic-docs.helpmanual.io/usage/types/#booleans\nconst BOOLEAN_TRUE_VALUES = [\"true\", \"t\", \"yes\", \"y\", \"on\", \"1\"]\nconst BOOLEAN_FALSE_VALUES = [\"false\", \"f\", \"no\", \"n\", \"off\", \"0\"]\n\n/**\n * Interface used for indicating if a cell contains an error.\n */\ninterface ErrorCell extends TextCell {\n  readonly isError: true\n}\n\n/**\n * Returns a cell with an error message.\n *\n * @param errorMsg: A short error message to use as display value.\n * @param errorDetails: The full error message to show when the user\n *                     clicks on a cell.\n *\n * @return a read-only GridCell object that can be used by glide-data-grid.\n */\nexport function getErrorCell(errorMsg: string, errorDetails = \"\"): ErrorCell {\n  errorMsg = ` ${errorMsg}`\n  return {\n    kind: GridCellKind.Text,\n    readonly: true,\n    allowOverlay: true,\n    data: errorMsg + (errorDetails ? `\\n\\n${errorDetails}\\n` : \"\"),\n    displayData: errorMsg,\n    isError: true,\n  } as ErrorCell\n}\n\n/**\n * Returns `true` if the given cell contains an error.\n * This can happen if the value type is not compatible with\n * the given value type.\n */\nexport function isErrorCell(cell: GridCell): cell is ErrorCell {\n  return cell.hasOwnProperty(\"isError\") && (cell as ErrorCell).isError\n}\n\ninterface CellWithTooltip extends BaseGridCell {\n  readonly tooltip: string\n}\n\n/**\n * Returns `true` if the given cell has a tooltip\n */\nexport function hasTooltip(cell: BaseGridCell): cell is CellWithTooltip {\n  return (\n    cell.hasOwnProperty(\"tooltip\") && (cell as CellWithTooltip).tooltip !== \"\"\n  )\n}\n/**\n * Interface used for indicating if a cell contains no value.\n */\ninterface MissingValueCell extends BaseGridCell {\n  readonly isMissingValue: true\n}\n\n/**\n * Returns `true` if the given cell contains no value (-> missing value).\n * For example, a number cell that contains null is interpreted as a missing value.\n */\nexport function isMissingValueCell(\n  cell: BaseGridCell\n): cell is MissingValueCell {\n  return (\n    cell.hasOwnProperty(\"isMissingValue\") &&\n    (cell as MissingValueCell).isMissingValue\n  )\n}\n\n/**\n * Returns an empty cell.\n */\nexport function getEmptyCell(missingCell = false): LoadingCell {\n  if (missingCell) {\n    return {\n      kind: GridCellKind.Loading,\n      allowOverlay: false,\n      isMissingValue: true,\n    } as LoadingCell\n  }\n\n  return {\n    kind: GridCellKind.Loading,\n    allowOverlay: false,\n  } as LoadingCell\n}\n\n/**\n * Returns an empty text cell.\n *\n * @param readonly: If true, returns a read-only version of the cell.\n * @param faded: If true, returns a faded version of the cell.\n *\n * @return a GridCell object that can be used by glide-data-grid.\n */\nexport function getTextCell(readonly: boolean, faded: boolean): TextCell {\n  const style = faded ? \"faded\" : \"normal\"\n  return {\n    kind: GridCellKind.Text,\n    data: \"\",\n    displayData: \"\",\n    allowOverlay: true,\n    readonly,\n    style,\n  } as TextCell\n}\n\n/**\n * Converts from our BaseColumn format to the glide-data-grid compatible GridColumn.\n */\nexport function toGlideColumn(column: BaseColumn): GridColumn {\n  return {\n    id: column.id,\n    title: column.title,\n    hasMenu: false,\n    themeOverride: column.themeOverride,\n    icon: column.icon,\n    group: column.group,\n    ...(column.isStretched && {\n      grow: column.isIndex ? 1 : 3,\n    }),\n    ...(column.width && {\n      width: column.width,\n    }),\n  } as GridColumn\n}\n\n/**\n * Merges the default column parameters with the user-defined column parameters.\n *\n * @param defaultParams - The default column parameters.\n * @param userParams - The user-defined column parameters.\n *\n * @returns The merged column parameters.\n */\nexport function mergeColumnParameters(\n  defaultParams: Record<string, any> | undefined | null,\n  userParams: Record<string, any> | undefined | null\n): Record<string, any> {\n  if (isNullOrUndefined(defaultParams)) {\n    return userParams || {}\n  }\n\n  if (isNullOrUndefined(userParams)) {\n    return defaultParams || {}\n  }\n\n  return merge(defaultParams, userParams)\n}\n\n/**\n * Converts the given value of unknown type to an array without\n * the risks of any exceptions.\n *\n * @param data - The value to convert to an array.\n *\n * @returns The converted array or an empty array if the value cannot be interpreted as an array.\n */\nexport function toSafeArray(data: any): any[] {\n  if (isNullOrUndefined(data)) {\n    return []\n  }\n\n  if (typeof data === \"number\" || typeof data === \"boolean\") {\n    // Single number or boolean\n    return [data]\n  }\n\n  if (typeof data === \"string\") {\n    if (data === \"\") {\n      // Empty string\n      return []\n    }\n\n    // Try to parse string to an array\n    if (data.trim().startsWith(\"[\") && data.trim().endsWith(\"]\")) {\n      // Support for JSON arrays: [\"foo\", 1, null, \"test\"]\n      try {\n        return JSON.parse(data)\n      } catch (error) {\n        return [data]\n      }\n    } else {\n      // Support for comma-separated values: \"foo,1,,test\"\n      return data.split(\",\")\n    }\n  }\n\n  try {\n    const parsedData = JSON.parse(\n      JSON.stringify(data, (_key, value) =>\n        typeof value === \"bigint\" ? Number(value) : value\n      )\n    )\n    if (!Array.isArray(parsedData)) {\n      return [toSafeString(parsedData)]\n    }\n\n    return parsedData.map((value: any) =>\n      [\"string\", \"number\", \"boolean\", \"null\"].includes(typeof value)\n        ? value\n        : toSafeString(value)\n    )\n  } catch (error) {\n    return [toSafeString(data)]\n  }\n}\n\n/**\n * Converts the given value of unknown type to a string without\n * the risks of any exceptions.\n *\n * @param data - The value to convert to a string.\n *\n * @return The converted string or a string showing the type of the object as fallback.\n */\nexport function toSafeString(data: any): string {\n  try {\n    try {\n      return toString(data)\n    } catch (error) {\n      return JSON.stringify(data, (_key, value) =>\n        typeof value === \"bigint\" ? Number(value) : value\n      )\n    }\n  } catch (error) {\n    // This is most likely an object that cannot be converted to a string\n    // console.log converts this to `[object Object]` which we are doing here as well:\n    return `[${typeof data}]`\n  }\n}\n\n/**\n * Converts the given value of unknown type to a boolean without\n * the risks of any exceptions.\n *\n * @param value - The value to convert to a boolean.\n *\n * @return The converted boolean, null if the value is empty or undefined if the\n *         value cannot be interpreted as a boolean.\n */\nexport function toSafeBoolean(value: any): boolean | null | undefined {\n  if (isNullOrUndefined(value)) {\n    return null\n  }\n\n  if (typeof value === \"boolean\") {\n    return value\n  }\n\n  const cleanedValue = toSafeString(value).toLowerCase().trim()\n  if (cleanedValue === \"\") {\n    return null\n  } else if (BOOLEAN_TRUE_VALUES.includes(cleanedValue)) {\n    return true\n  } else if (BOOLEAN_FALSE_VALUES.includes(cleanedValue)) {\n    return false\n  }\n  // The value cannot be interpreted as boolean\n  return undefined\n}\n\n/**\n * Converts the given value of unknown type to a number without\n * the risks of any exceptions.\n *\n * @param value - The value to convert to a number.\n *\n * @returns The converted number or null if the value is empty or undefined or NaN if the\n *          value cannot be interpreted as a number.\n */\nexport function toSafeNumber(value: any): number | null {\n  // TODO(lukasmasuch): Should this return null as replacement for NaN?\n\n  if (isNullOrUndefined(value)) {\n    return null\n  }\n\n  if (Array.isArray(value)) {\n    return NaN\n  }\n\n  if (typeof value === \"string\") {\n    if (value.trim().length === 0) {\n      // Empty string should return null\n      return null\n    }\n\n    try {\n      // Try to convert string to number via numbro:\n      // https://numbrojs.com/old-format.html#unformat\n      const unformattedValue = numbro.unformat(value.trim())\n      if (notNullOrUndefined(unformattedValue)) {\n        return unformattedValue\n      }\n    } catch (error) {\n      // Do nothing here\n    }\n  } else if (value instanceof Int32Array) {\n    // int values need to be extracted this way:\n    // eslint-disable-next-line prefer-destructuring\n    return Number(value[0])\n  }\n\n  return Number(value)\n}\n\n/**\n * Formats the given number to a string based on a provided format or the default format.\n *\n * @param value - The number to format.\n * @param format - The format to use. If not provided, the default format is used.\n * @param maxPrecision - The maximum number of decimals to show. This is only used by the default format.\n *                     If not provided, the default is 4 decimals and trailing zeros are hidden.\n *\n * @returns The formatted number as a string.\n */\nexport function formatNumber(\n  value: number,\n  format?: string | undefined,\n  maxPrecision?: number | undefined\n): string {\n  if (Number.isNaN(value) || !Number.isFinite(value)) {\n    return \"\"\n  }\n\n  if (isNullOrUndefined(format) || format === \"\") {\n    if (maxPrecision === 0) {\n      // Numbro is unable to format the number with 0 decimals.\n      value = Math.round(value)\n    }\n    return numbro(value).format(\n      notNullOrUndefined(maxPrecision)\n        ? `0,0.${\"0\".repeat(maxPrecision)}`\n        : `0,0.[0000]` // If no precision is given, use 4 decimals and hide trailing zeros\n    )\n  }\n\n  if (format === \"percent\") {\n    return new Intl.NumberFormat(undefined, {\n      style: \"percent\",\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2,\n    }).format(value)\n  } else if ([\"compact\", \"scientific\", \"engineering\"].includes(format)) {\n    return new Intl.NumberFormat(undefined, {\n      notation: format as any,\n    }).format(value)\n  } else if (format === \"duration[ns]\") {\n    return moment.duration(value / (1000 * 1000), \"milliseconds\").humanize()\n  } else if (format.startsWith(\"period[\")) {\n    return formatPeriodType(BigInt(value), format as any)\n  }\n\n  return sprintf(format, value)\n}\n\n/**\n * Formats the given date to a string with the given format.\n *\n * @param momentDate The moment date to format.\n * @param format The format to use.\n *   If the format is `locale` the date will be formatted according to the user's locale.\n *   If the format is `relative` the date will be formatted as a relative time (e.g. \"2 hours ago\").\n *   Otherwise, it is interpreted as momentJS format string: https://momentjs.com/docs/#/displaying/format/\n * @returns The formatted date as a string.\n */\nexport function formatMoment(momentDate: Moment, format: string): string {\n  if (format === \"locale\") {\n    return new Intl.DateTimeFormat(undefined, {\n      dateStyle: \"medium\",\n      timeStyle: \"medium\",\n    }).format(momentDate.toDate())\n  } else if (format === \"distance\") {\n    return momentDate.fromNow()\n  } else if (format === \"relative\") {\n    return momentDate.calendar()\n  }\n  return momentDate.format(format)\n}\n\n/**\n * Converts the given value of unknown type to a date without\n * the risks of any exceptions.\n *\n * Note: Unix timestamps are only supported in seconds.\n *\n * @param value - The value to convert to a date.\n *\n * @returns The converted date or null if the value cannot be interpreted as a date.\n */\nexport function toSafeDate(value: any): Date | null | undefined {\n  if (isNullOrUndefined(value)) {\n    return null\n  }\n\n  // Return the value as-is if it is already a date\n  if (value instanceof Date) {\n    if (!isNaN(value.getTime())) {\n      return value\n    }\n    return undefined\n  }\n\n  if (typeof value === \"string\" && value.trim().length === 0) {\n    // Empty string should return null\n    return null\n  }\n\n  try {\n    const parsedTimestamp = Number(value)\n    if (!isNaN(parsedTimestamp)) {\n      // Unix timestamps can be have different units.\n      // As default, we handle the unit as second, but\n      // if it larger than a certain threshold, we assume\n      // a different unit. This is not 100% accurate, but\n      // should be good enough since it is unlikely that\n      // users are actually referring to years >= 5138.\n      let timestampInSeconds = parsedTimestamp\n      if (parsedTimestamp >= 10 ** 18) {\n        // Assume that the timestamp is in nanoseconds\n        // and adjust to seconds\n        timestampInSeconds = parsedTimestamp / 1000 ** 3\n      } else if (parsedTimestamp >= 10 ** 15) {\n        // Assume that the timestamp is in microseconds\n        // and adjust to seconds\n        timestampInSeconds = parsedTimestamp / 1000 ** 2\n      } else if (parsedTimestamp >= 10 ** 12) {\n        // Assume that the timestamp is in milliseconds\n        // and adjust to seconds\n        timestampInSeconds = parsedTimestamp / 1000\n      }\n\n      // Parse it as a unix timestamp in seconds\n      const parsedMomentDate = moment.unix(timestampInSeconds).utc()\n      if (parsedMomentDate.isValid()) {\n        return parsedMomentDate.toDate()\n      }\n    }\n\n    if (typeof value === \"string\") {\n      // Try to parse string via momentJS:\n      const parsedMomentDate = moment.utc(value)\n      if (parsedMomentDate.isValid()) {\n        return parsedMomentDate.toDate()\n      }\n      // The pasted value was not a valid date string\n      // Try to interpret value as time string instead (HH:mm:ss)\n      const parsedMomentTime = moment.utc(value, [\n        moment.HTML5_FMT.TIME_MS, // HH:mm:ss.SSS\n        moment.HTML5_FMT.TIME_SECONDS, // HH:mm:ss\n        moment.HTML5_FMT.TIME, // HH:mm\n      ])\n      if (parsedMomentTime.isValid()) {\n        return parsedMomentTime.toDate()\n      }\n    }\n  } catch (error) {\n    return undefined\n  }\n\n  // Unable to interpret this value as a date:\n  return undefined\n}\n\n/**\n * Count the number of decimals in a number.\n *\n * @param {number} value - The number to count the decimals for.\n *\n * @returns {number} The number of decimals.\n */\nexport function countDecimals(value: number): number {\n  if (value % 1 === 0) {\n    return 0\n  }\n\n  let numberStr = value.toString()\n\n  if (numberStr.indexOf(\"e\") !== -1) {\n    // Handle scientific notation\n    numberStr = value.toLocaleString(\"fullwide\", {\n      useGrouping: false,\n      maximumFractionDigits: 20,\n    })\n  }\n\n  if (numberStr.indexOf(\".\") === -1) {\n    // Fallback to 0 decimals, this can happen with\n    // extremely large or small numbers\n    return 0\n  }\n\n  return numberStr.split(\".\")[1].length\n}\n\n/**\n * Truncates a number to a specified number of decimal places without rounding.\n *\n * @param {number} value - The number to be truncated.\n * @param {number} decimals - The number of decimal places to preserve after truncation.\n *\n * @returns {number} The truncated number.\n *\n * @example\n * truncateDecimals(3.14159265, 2); // returns 3.14\n * truncateDecimals(123.456, 0); // returns 123\n */\nexport function truncateDecimals(value: number, decimals: number): number {\n  return decimals === 0\n    ? Math.trunc(value)\n    : Math.trunc(value * 10 ** decimals) / 10 ** decimals\n}\n\nconst LINE_BREAK_REGEX = new RegExp(/(\\r\\n|\\n|\\r)/gm)\n\n/**\n * Removes all line breaks from the given text.\n * @param text - The text to remove line breaks from.\n * @returns The text without line breaks.\n */\nexport function removeLineBreaks(text: string): string {\n  if (text.indexOf(\"\\n\") !== -1) {\n    return text.replace(LINE_BREAK_REGEX, \" \")\n  }\n  return text\n}\n\n/**\n * Determines the correct value to display in a link cell based on the `href` and `regexPattern` parameters.\n *\n * @param href - The raw url value.\n * @param displayTextRegex - The regex pattern which will be applied to the `href`. If no match is found, then we return the `href`.\n * @returns - The string value to be displayed in the cell.\n *\n * * @example\n * const regex = new RegExp(\"https:\\/\\/(.*?)\\.streamlit\\.app\")\n * const regex2 = new RegExp(\"https:\\/\\/roadmap\\.(.*?)\\.app\")\n * getLinkDisplayValueFromRegex(regex, \"https://roadmap.streamlit.app\"); // returns \"roadmap\"\n * getLinkDisplayValueFromRegex(regex, \"https://roadmap.streamlit.app\"); // returns \"streamlit\"\n */\nexport function getLinkDisplayValueFromRegex(\n  displayTextRegex: RegExp,\n  href?: string | null\n): string {\n  if (isNullOrUndefined(href)) {\n    return \"\"\n  }\n\n  try {\n    // apply the regex pattern to display the value\n    const patternMatch = href.match(displayTextRegex)\n    if (patternMatch && patternMatch[1] !== undefined) {\n      // return the first matching group\n      // Since this might be a URI encoded value, we decode it.\n      // Note: we replace + with %20 to correctly convert + to whitespaces.\n      return decodeURIComponent(patternMatch[1].replace(/\\+/g, \"%20\"))\n    }\n\n    // if the regex doesn't find a match with the url, just use the url as display value\n    return href\n  } catch (error) {\n    // if there was any error return the href\n    return href\n  }\n}\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  GridCell,\n  GridCellKind,\n  LoadingCell,\n} from \"@glideapps/glide-data-grid\"\nimport { SparklineCellType } from \"@glideapps/glide-data-grid-cells\"\n\nimport { isNullOrUndefined } from \"@streamlit/lib/src/util/utils\"\n\nimport {\n  BaseColumn,\n  BaseColumnProps,\n  formatNumber,\n  getEmptyCell,\n  getErrorCell,\n  mergeColumnParameters,\n  toSafeArray,\n  toSafeNumber,\n  toSafeString,\n} from \"./utils\"\n\nexport const LINE_CHART_TYPE = \"line_chart\"\nexport const AREA_CHART_TYPE = \"area_chart\"\nexport const BAR_CHART_TYPE = \"bar_chart\"\n\nexport interface ChartColumnParams {\n  // The minimum value used for plotting the chart. Defaults to 0.\n  readonly y_min?: number\n  // The maximum value used for plotting the chart. Defaults to 1.\n  readonly y_max?: number\n}\n\n/**\n * Base class for chart columns. This class is not meant to be used directly.\n * Instead, use the LineChartColumn and BarChartColumn classes.\n */\nfunction BaseChartColumn(\n  kind: string,\n  props: BaseColumnProps,\n  chart_type: \"line\" | \"bar\" | \"area\"\n): BaseColumn {\n  const parameters = mergeColumnParameters(\n    // Default parameters:\n    {\n      y_min: 0,\n      y_max: 1,\n    },\n    // User parameters:\n    props.columnTypeOptions\n  ) as ChartColumnParams\n\n  const cellTemplate = {\n    kind: GridCellKind.Custom,\n    allowOverlay: false,\n    copyData: \"\",\n    contentAlign: props.contentAlignment,\n    data: {\n      kind: \"sparkline-cell\",\n      values: [],\n      displayValues: [],\n      graphKind: chart_type,\n      yAxis: [parameters.y_min, parameters.y_max],\n    },\n  } as SparklineCellType\n\n  return {\n    ...props,\n    kind,\n    sortMode: \"default\",\n    isEditable: false, // Chart column is always read-only\n    getCell(data?: any): GridCell {\n      if (\n        isNullOrUndefined(parameters.y_min) ||\n        isNullOrUndefined(parameters.y_max) ||\n        Number.isNaN(parameters.y_min) ||\n        Number.isNaN(parameters.y_max) ||\n        parameters.y_min >= parameters.y_max\n      ) {\n        return getErrorCell(\n          \"Invalid min/max y-axis configuration\",\n          `The y_min (${parameters.y_min}) and y_max (${parameters.y_max}) configuration options must be valid numbers.`\n        )\n      }\n\n      if (isNullOrUndefined(data)) {\n        // TODO(lukasmasuch): Use a missing cell?\n        return getEmptyCell()\n      }\n\n      const chartData = toSafeArray(data)\n\n      const convertedChartData: number[] = []\n      let normalizedChartData: number[] = []\n      if (chartData.length === 0) {\n        return getEmptyCell()\n      }\n\n      // Initialize with smallest and biggest number\n      let maxValue = Number.MIN_SAFE_INTEGER\n      let minValue = Number.MAX_SAFE_INTEGER\n\n      // Try to convert all values to numbers and find min/max\n      for (let i = 0; i < chartData.length; i++) {\n        const convertedValue = toSafeNumber(chartData[i])\n        if (\n          Number.isNaN(convertedValue) ||\n          isNullOrUndefined(convertedValue)\n        ) {\n          return getErrorCell(\n            toSafeString(chartData),\n            `The value cannot be interpreted as a numeric array. ${toSafeString(\n              convertedValue\n            )} is not a number.`\n          )\n        }\n\n        if (convertedValue > maxValue) {\n          maxValue = convertedValue\n        }\n\n        if (convertedValue < minValue) {\n          minValue = convertedValue\n        }\n\n        convertedChartData.push(convertedValue)\n      }\n\n      if (\n        convertedChartData.length > 0 &&\n        (maxValue > parameters.y_max || minValue < parameters.y_min)\n      ) {\n        // Normalize values between the configured range\n        normalizedChartData = convertedChartData.map(v =>\n          maxValue - minValue === 0 // Prevent division by zero\n            ? maxValue > (parameters.y_max || 1)\n              ? parameters.y_max || 1 // Use max value\n              : parameters.y_min || 0 // Use min value\n            : ((parameters.y_max || 1) - (parameters.y_min || 0)) *\n                ((v - minValue) / (maxValue - minValue)) +\n              (parameters.y_min || 0)\n        )\n      } else {\n        // Values are already in the configured range\n        normalizedChartData = convertedChartData\n      }\n\n      return {\n        ...cellTemplate,\n        copyData: convertedChartData.join(\",\"), // Column sorting is done via the copyData value\n        data: {\n          ...cellTemplate.data,\n          values: normalizedChartData,\n          displayValues: convertedChartData.map(v => formatNumber(v)),\n        },\n        isMissingValue: isNullOrUndefined(data),\n      } as SparklineCellType\n    },\n    getCellValue(\n      cell: SparklineCellType | LoadingCell\n    ): readonly number[] | null {\n      if (cell.kind === GridCellKind.Loading) {\n        return null\n      }\n\n      return cell.data?.values === undefined ? null : cell.data?.values\n    },\n  }\n}\n\n/**\n * A column type that renders the cell value as a line-chart.\n * The data is expected to be a numeric array.\n *\n * This column type is currently read-only.\n */\nexport function LineChartColumn(props: BaseColumnProps): BaseColumn {\n  return BaseChartColumn(LINE_CHART_TYPE, props, \"line\")\n}\n\nLineChartColumn.isEditableType = false\n\n/**\n * A column type that renders the cell value as a bar-chart.\n * The data is expected to be a numeric array.\n *\n * This column type is currently read-only.\n */\nexport function BarChartColumn(props: BaseColumnProps): BaseColumn {\n  return BaseChartColumn(BAR_CHART_TYPE, props, \"bar\")\n}\n\nBarChartColumn.isEditableType = false\n\n/**\n * A column type that renders the cell value as an area-chart.\n * The data is expected to be a numeric array.\n *\n * This column type is currently read-only.\n */\nexport function AreaChartColumn(props: BaseColumnProps): BaseColumn {\n  return BaseChartColumn(AREA_CHART_TYPE, props, \"area\")\n}\n\nAreaChartColumn.isEditableType = false\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  BooleanCell,\n  GridCell,\n  GridCellKind,\n} from \"@glideapps/glide-data-grid\"\n\nimport { isNullOrUndefined } from \"@streamlit/lib/src/util/utils\"\n\nimport {\n  BaseColumn,\n  BaseColumnProps,\n  getErrorCell,\n  toSafeBoolean,\n  toSafeString,\n} from \"./utils\"\n\n/**\n * A column type that supports optimized rendering and editing for boolean values\n * by using checkboxes.\n */\nfunction CheckboxColumn(props: BaseColumnProps): BaseColumn {\n  const cellTemplate = {\n    kind: GridCellKind.Boolean,\n    data: false,\n    allowOverlay: false, // no overlay possible\n    contentAlign: props.contentAlignment,\n    readonly: !props.isEditable,\n    style: \"normal\",\n  } as BooleanCell\n\n  return {\n    ...props,\n    kind: \"checkbox\",\n    sortMode: \"default\",\n    getCell(data?: any): GridCell {\n      let cellData = null\n\n      cellData = toSafeBoolean(data)\n      if (cellData === undefined) {\n        return getErrorCell(\n          toSafeString(data),\n          `The value cannot be interpreted as boolean.`\n        )\n      }\n\n      // We are not setting isMissingValue here because the checkbox column\n      // does not work with the missing cell rendering.\n      return {\n        ...cellTemplate,\n        data: cellData,\n        isMissingValue: isNullOrUndefined(cellData),\n      } as BooleanCell\n    },\n    getCellValue(cell: BooleanCell): boolean | null {\n      return cell.data === undefined ? null : cell.data\n    },\n  }\n}\n\nCheckboxColumn.isEditableType = true\n\nexport default CheckboxColumn\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { GridCell, GridCellKind } from \"@glideapps/glide-data-grid\"\nimport { DatePickerType } from \"@glideapps/glide-data-grid-cells\"\nimport moment, { Moment } from \"moment-timezone\"\n\nimport {\n  isNullOrUndefined,\n  notNullOrUndefined,\n} from \"@streamlit/lib/src/util/utils\"\n\nimport {\n  BaseColumn,\n  BaseColumnProps,\n  formatMoment,\n  getErrorCell,\n  mergeColumnParameters,\n  toSafeDate,\n  toSafeString,\n} from \"./utils\"\n\n/**\n * Apply a timezone to a MomentJS date.\n *\n * @param momentDate The date to apply the timezone to\n * @param timezone The timezone to apply. This can be a timezone name\n * (e.g. \"America/New_York\" or \"UTC\") or a UTC offset (e.g. \"+05:00\" or \"-08:00\")\n * @returns The date with the timezone applied\n */\nfunction applyTimezone(momentDate: Moment, timezone: string): Moment {\n  if (timezone.startsWith(\"+\") || timezone.startsWith(\"-\")) {\n    // Timezone is a UTC offset (e.g. \"+05:00\" or \"-08:00\")\n    momentDate = momentDate.utcOffset(timezone, false)\n  } else {\n    // Timezone is a timezone name (e.g. \"America/New_York\" or \"UTC\")\n    momentDate = momentDate.tz(timezone)\n  }\n  return momentDate\n}\n\nexport interface DateTimeColumnParams {\n  // A momentJS formatting syntax to format the display value.\n  readonly format?: string\n  // Specifies the granularity that the value must adhere.\n  // For time and datetime, this is the number of seconds between each allowed value.\n  // For date, this is the number of days between each allowed value.\n  readonly step?: number\n  // A timezone identifier, e.g. \"America/New_York\", \"+05:00\", or \"UTC\"\n  readonly timezone?: string\n  // The minimum allowed value for editing. This needs to be an ISO formatted datetime/date/time string (UTC).\n  readonly min_value?: string\n  // The maximum allowed value for editing. This needs to be an ISO formatted datetime/date/time string (UTC).\n  readonly max_value?: string\n}\n\n/**\n * Base class for datetime columns. This class is not meant to be used directly.\n * Instead, use the DateColumn, TimeColumn, or DateTimeColumn classes.\n *\n * @param kind The kind of column. This should be one of \"date\", \"time\", or \"datetime\".\n * @param props The column properties\n * @param defaultFormat The default format to use for rendering and copy data\n * @param defaultStep The default step to use, can be overridden by the user\n * @param inputType The type of input to use for editing. This should be one of \"datetime-local\", \"time\", or \"date\".\n * @param toISOString A function that converts a Date object to an ISO formatted string\n * @param timezone The timezone to use to make the datetime values timezone aware.\n *\n * @returns A BaseColumn object\n */\nfunction BaseDateTimeColumn(\n  kind: string,\n  props: BaseColumnProps,\n  defaultFormat: string, // used for rendering and copy data\n  defaultStep: number,\n  inputType: \"datetime-local\" | \"time\" | \"date\",\n  toISOString: (date: Date) => string,\n  timezone?: string\n): BaseColumn {\n  const parameters = mergeColumnParameters(\n    // Default parameters:\n    {\n      format: defaultFormat,\n      step: defaultStep,\n      timezone,\n    },\n    // User parameters:\n    props.columnTypeOptions\n  ) as DateTimeColumnParams\n\n  let defaultTimezoneOffset: number | undefined = undefined\n  if (notNullOrUndefined(parameters.timezone)) {\n    // We try to determine the timezone offset based on today's date\n    // This is needed for the date picker to work correctly when the value is null\n    // TODO(lukasmasuch): But this might not be correct for dates in the past or future\n    // since the timezone offset might have changed based on a timezone name.\n    try {\n      defaultTimezoneOffset =\n        applyTimezone(moment(), parameters.timezone)?.utcOffset() || undefined\n    } catch (error) {\n      // Do nothing\n    }\n  }\n\n  let minDate: Date | undefined = undefined\n  if (notNullOrUndefined(parameters.min_value)) {\n    minDate = toSafeDate(parameters.min_value) || undefined\n  }\n\n  let maxDate: Date | undefined = undefined\n  if (notNullOrUndefined(parameters.max_value)) {\n    maxDate = toSafeDate(parameters.max_value) || undefined\n  }\n\n  const cellTemplate = {\n    kind: GridCellKind.Custom,\n    allowOverlay: true,\n    copyData: \"\",\n    readonly: !props.isEditable,\n    contentAlign: props.contentAlignment,\n    // The text in pinned columns should be faded.\n    style: props.isPinned ? \"faded\" : \"normal\",\n    data: {\n      kind: \"date-picker-cell\",\n      date: undefined,\n      displayDate: \"\",\n      step: parameters.step?.toString() || \"1\",\n      format: inputType,\n      min: minDate,\n      max: maxDate,\n    },\n  } as DatePickerType\n\n  const validateInput = (data?: any): boolean | Date => {\n    const cellData: Date | null | undefined = toSafeDate(data)\n    if (cellData === null) {\n      if (props.isRequired) {\n        return false\n      }\n      return true\n    }\n\n    if (cellData === undefined) {\n      // Input cannot be interpreted as a date\n      return false\n    }\n\n    // Apply min_value configuration option:\n    if (\n      notNullOrUndefined(minDate) &&\n      // We compare on a string level so that it also works correctly for time and date values\n      toISOString(cellData) < toISOString(minDate)\n    ) {\n      return false\n    }\n\n    // Apply min_value configuration option:\n    if (\n      notNullOrUndefined(maxDate) &&\n      toISOString(cellData) > toISOString(maxDate)\n    ) {\n      return false\n    }\n\n    // TODO: validate step size\n\n    return true\n  }\n\n  return {\n    ...props,\n    kind,\n    sortMode: \"default\",\n    validateInput,\n    getCell(data?: any, validate?: boolean): GridCell {\n      if (validate === true) {\n        const validationResult = validateInput(data)\n        if (validationResult === false) {\n          // The input is invalid, we return an error cell which will\n          // prevent this cell to be inserted into the table.\n          return getErrorCell(toSafeString(data), \"Invalid input.\")\n        } else if (validationResult instanceof Date) {\n          // Apply corrections:\n          data = validationResult\n        }\n      }\n\n      const cellData = toSafeDate(data)\n\n      let copyData = \"\"\n      let displayDate = \"\"\n      // Initialize with default offset base on today's date\n      let timezoneOffset = defaultTimezoneOffset\n\n      if (cellData === undefined) {\n        return getErrorCell(\n          toSafeString(data),\n          \"The value cannot be interpreted as a datetime object.\"\n        )\n      }\n\n      if (cellData !== null) {\n        // Convert to moment object\n        let momentDate = moment.utc(cellData)\n\n        if (!momentDate.isValid()) {\n          // The moment date should never be invalid here.\n          return getErrorCell(\n            toSafeString(cellData),\n            `This should never happen. Please report this bug. \\nError: ${momentDate.toString()}`\n          )\n        }\n\n        if (parameters.timezone) {\n          try {\n            momentDate = applyTimezone(momentDate, parameters.timezone)\n          } catch (error) {\n            return getErrorCell(\n              momentDate.toISOString(),\n              `Failed to adjust to the provided timezone: ${parameters.timezone}. \\nError: ${error}`\n            )\n          }\n\n          timezoneOffset = momentDate.utcOffset()\n        }\n\n        try {\n          displayDate = formatMoment(\n            momentDate,\n            parameters.format || defaultFormat\n          )\n        } catch (error) {\n          return getErrorCell(\n            momentDate.toISOString(),\n            `Failed to format the date for rendering with: ${parameters.format}. \\nError: ${error}`\n          )\n        }\n        // Copy data should always use the default format\n        copyData = formatMoment(momentDate, defaultFormat)\n      }\n\n      return {\n        ...cellTemplate,\n        copyData,\n        isMissingValue: isNullOrUndefined(cellData),\n        data: {\n          ...cellTemplate.data,\n          date: cellData,\n          displayDate,\n          timezoneOffset,\n        },\n      } as DatePickerType\n    },\n    getCellValue(cell: DatePickerType): string | null {\n      return isNullOrUndefined(cell?.data?.date)\n        ? null\n        : toISOString(cell.data.date)\n    },\n  }\n}\n\n/**\n * Creates a new datetime column.\n * A datetime column supports optimized rendering and editing for datetime values.\n *\n * @param props The column properties.\n * @returns The new column.\n */\nexport default function DateTimeColumn(props: BaseColumnProps): BaseColumn {\n  // Do a smart selection of the default format based on the step size\n  let defaultFormat = \"YYYY-MM-DD HH:mm:ss\"\n  if (props.columnTypeOptions?.step >= 60) {\n    defaultFormat = \"YYYY-MM-DD HH:mm\"\n  } else if (props.columnTypeOptions?.step < 1) {\n    defaultFormat = \"YYYY-MM-DD HH:mm:ss.SSS\"\n  }\n\n  const timezone: string | undefined = props.arrowType?.meta?.timezone\n  const hasTimezone: boolean =\n    notNullOrUndefined(timezone) ||\n    // Timezone can also be configure by the user:\n    notNullOrUndefined(props?.columnTypeOptions?.timezone)\n\n  return BaseDateTimeColumn(\n    \"datetime\",\n    props,\n    hasTimezone ? defaultFormat + \"Z\" : defaultFormat,\n    1,\n    \"datetime-local\",\n    (date: Date): string => {\n      if (hasTimezone) {\n        return date.toISOString()\n      }\n      return date.toISOString().replace(\"Z\", \"\")\n    },\n    timezone\n  )\n}\n\nDateTimeColumn.isEditableType = true\n\n/**\n * Creates a new time column.\n * A time column supports optimized rendering and editing for time values.\n *\n * @param props The column properties.\n * @returns The new column.\n */\nexport function TimeColumn(props: BaseColumnProps): BaseColumn {\n  // Do a smart selection of the default format based on the step size\n  let defaultFormat = \"HH:mm:ss\"\n  if (props.columnTypeOptions?.step >= 60) {\n    defaultFormat = \"HH:mm\"\n  } else if (props.columnTypeOptions?.step < 1) {\n    defaultFormat = \"HH:mm:ss.SSS\"\n  }\n\n  return BaseDateTimeColumn(\n    \"time\",\n    props,\n    defaultFormat,\n    1,\n    \"time\",\n    (date: Date): string => {\n      // Only return the time part of the ISO string:\n      return date.toISOString().split(\"T\")[1].replace(\"Z\", \"\")\n    }\n  )\n}\n\nTimeColumn.isEditableType = true\n\n/**\n * Creates a new date column.\n * A date column supports optimized rendering and editing for date values.\n *\n * @param props The column properties.\n * @returns The new column.\n */\nexport function DateColumn(props: BaseColumnProps): BaseColumn {\n  return BaseDateTimeColumn(\n    \"date\",\n    props,\n    \"YYYY-MM-DD\",\n    1,\n    \"date\",\n    (date: Date): string => {\n      // Only return the date part of the ISO string:\n      return date.toISOString().split(\"T\")[0]\n    }\n  )\n}\n\nDateColumn.isEditableType = true\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { GridCell, GridCellKind, ImageCell } from \"@glideapps/glide-data-grid\"\n\nimport { notNullOrUndefined } from \"@streamlit/lib/src/util/utils\"\n\nimport { BaseColumn, BaseColumnProps, toSafeString } from \"./utils\"\n\n/**\n * A column type that renders an image as a cell value. On cell selection, open\n * the cell overlay with a full version of the image.\n *\n * This column type is currently read-only.\n */\nfunction ImageColumn(props: BaseColumnProps): BaseColumn {\n  const cellTemplate = {\n    kind: GridCellKind.Image,\n    data: [],\n    displayData: [],\n    readonly: true,\n    allowOverlay: true,\n    contentAlign: props.contentAlignment || \"center\",\n    style: \"normal\",\n  } as ImageCell\n\n  return {\n    ...props,\n    kind: \"image\",\n    sortMode: \"default\",\n    isEditable: false, // Image columns are always read-only\n    getCell(data?: any): GridCell {\n      // The native image cell implementation in glide-data-grid expects an array\n      // of image URLs. For our usecase, we only support single images. We\n      // need to wrap the image URL in an array to have it compatible with the\n      // implementation in glide-data-grid.\n      const imageUrls = notNullOrUndefined(data) ? [toSafeString(data)] : []\n\n      return {\n        ...cellTemplate,\n        data: imageUrls,\n        isMissingValue: !notNullOrUndefined(data),\n        displayData: imageUrls,\n      } as ImageCell\n    },\n    getCellValue(cell: ImageCell): string | null {\n      if (cell.data === undefined || cell.data.length === 0) {\n        return null\n      }\n\n      // We use the image cell only for single images,\n      // so we can safely return just the first element\n      return cell.data[0]\n    },\n  }\n}\n\nImageColumn.isEditableType = false\n\nexport default ImageColumn\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { GridCell, GridCellKind, UriCell } from \"@glideapps/glide-data-grid\"\n\nimport { isNullOrUndefined } from \"@streamlit/lib/src/util/utils\"\n\nimport {\n  BaseColumn,\n  BaseColumnProps,\n  getErrorCell,\n  getLinkDisplayValueFromRegex,\n  toSafeString,\n} from \"./utils\"\n\nexport interface LinkColumnParams {\n  // The maximum number of characters the user can enter into the text input.\n  readonly max_chars?: number\n  // Regular expression that the input's value must match for the value to pass\n  readonly validate?: string\n  // a value to display in the link cell. Can be a regex to parse out a specific substring of the url to be displayed\n  readonly display_text?: string\n}\n\n/**\n * The link column is a special column that interprets the cell content as\n * an hyperlink / url and allows the user to click on it.\n */\nfunction LinkColumn(props: BaseColumnProps): BaseColumn {\n  const parameters = (props.columnTypeOptions as LinkColumnParams) || {}\n\n  let validateRegex: RegExp | string | undefined = undefined\n\n  if (parameters.validate) {\n    // Prepare the validation regex:\n    try {\n      // u flag allows unicode characters\n      // s flag allows . to match newlines\n      validateRegex = new RegExp(parameters.validate, \"us\")\n    } catch (error) {\n      // Put error message in validateRegex so we can display it in the cell\n      validateRegex = `Invalid validate regex: ${parameters.validate}.\\nError: ${error}`\n    }\n  }\n\n  // Determine if the user's provided display text is a regexp pattern or not.\n  let displayTextRegex: RegExp | undefined = undefined\n  if (\n    !isNullOrUndefined(parameters.display_text) &&\n    parameters.display_text.includes(\"(\") &&\n    parameters.display_text.includes(\")\")\n  ) {\n    try {\n      displayTextRegex = new RegExp(parameters.display_text, \"us\")\n    } catch (error) {\n      // The regex is invalid, interpret it as static display text.\n      displayTextRegex = undefined\n    }\n  }\n\n  const cellTemplate = {\n    kind: GridCellKind.Uri,\n    readonly: !props.isEditable,\n    allowOverlay: true,\n    contentAlign: props.contentAlignment,\n    style: \"normal\",\n    hoverEffect: true,\n    data: \"\",\n    displayData: \"\",\n    copyData: \"\",\n  } as UriCell\n\n  const validateInput = (href?: string): boolean => {\n    if (isNullOrUndefined(href)) {\n      if (props.isRequired) {\n        return false\n      }\n      return true\n    }\n\n    const cellHref = toSafeString(href)\n\n    if (parameters.max_chars && cellHref.length > parameters.max_chars) {\n      // value is too long\n      return false\n    }\n\n    if (\n      validateRegex instanceof RegExp &&\n      validateRegex.test(cellHref) === false\n    ) {\n      return false\n    }\n\n    return true\n  }\n\n  return {\n    ...props,\n    kind: \"link\",\n    sortMode: \"default\",\n    validateInput,\n    getCell(data?: any, validate?: boolean): GridCell {\n      if (isNullOrUndefined(data)) {\n        return {\n          ...cellTemplate,\n          data: null as any,\n          isMissingValue: true,\n          onClickUri: () => {},\n        } as UriCell\n      }\n\n      const href: string = data\n      if (typeof validateRegex === \"string\") {\n        // The regex is invalid, we return an error to indicate this\n        // to the developer:\n        return getErrorCell(toSafeString(href), validateRegex)\n      }\n\n      if (validate) {\n        const validationResult = validateInput(href)\n        if (validationResult === false) {\n          // The input is invalid, we return an error cell which will\n          // prevent this cell to be inserted into the table.\n          // This cell should never be actually displayed to the user.\n          // It's mostly used internally to prevent invalid input to be\n          // inserted into the table.\n          return getErrorCell(toSafeString(href), \"Invalid input.\")\n        }\n      }\n\n      let displayText = \"\"\n      if (href) {\n        if (displayTextRegex !== undefined) {\n          // Set display value to be the regex extracted portion of the href.\n          displayText = getLinkDisplayValueFromRegex(displayTextRegex, href)\n        } else {\n          // Use user provided display_text unless it's null, undefined, or an empty string.\n          // If it's any of those falsy values, use the href.\n          displayText = parameters.display_text || href\n        }\n      }\n\n      return {\n        ...cellTemplate,\n        data: href,\n        displayData: displayText,\n        isMissingValue: isNullOrUndefined(href),\n        onClickUri: a => {\n          window.open(\n            href.startsWith(\"www.\") ? `https://${href}` : href,\n            \"_blank\",\n            \"noopener,noreferrer\"\n          )\n          a.preventDefault()\n        },\n        copyData: href,\n      } as UriCell\n    },\n    getCellValue(cell: UriCell): string | null {\n      return isNullOrUndefined(cell.data) ? null : cell.data\n    },\n  }\n}\n\nLinkColumn.isEditableType = true\n\nexport default LinkColumn\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { BubbleCell, GridCell, GridCellKind } from \"@glideapps/glide-data-grid\"\n\nimport { isNullOrUndefined } from \"@streamlit/lib/src/util/utils\"\n\nimport {\n  BaseColumn,\n  BaseColumnProps,\n  isMissingValueCell,\n  toSafeArray,\n  toSafeString,\n} from \"./utils\"\n\n/**\n * A column type that supports optimized rendering values of array/list types.\n */\nfunction ListColumn(props: BaseColumnProps): BaseColumn {\n  const cellTemplate = {\n    kind: GridCellKind.Bubble,\n    data: [],\n    allowOverlay: true,\n    contentAlign: props.contentAlignment,\n    style: \"normal\",\n  } as BubbleCell\n\n  return {\n    ...props,\n    kind: \"list\",\n    sortMode: \"default\",\n    isEditable: false, // List column is always readonly\n    getCell(data?: any): GridCell {\n      const cellData = isNullOrUndefined(data) ? [] : toSafeArray(data)\n\n      return {\n        ...cellTemplate,\n        data: cellData,\n        isMissingValue: isNullOrUndefined(data),\n        copyData: isNullOrUndefined(data)\n          ? \"\"\n          : toSafeString(\n              cellData.map((x: any) =>\n                // Replace commas with spaces since commas are used to\n                // separate the list items.\n                typeof x === \"string\" && x.includes(\",\")\n                  ? x.replace(/,/g, \" \")\n                  : x\n              )\n            ),\n      } as BubbleCell\n    },\n    getCellValue(cell: BubbleCell): string[] | null {\n      if (isNullOrUndefined(cell.data) || isMissingValueCell(cell)) {\n        return null\n      }\n\n      return cell.data\n    },\n  }\n}\n\nListColumn.isEditableType = false\n\nexport default ListColumn\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Returns true if a given arrow type name is an integer type.\n */\nexport function isIntegerType(arrowTypeName: string): boolean {\n  return (\n    (arrowTypeName.startsWith(\"int\") &&\n      !arrowTypeName.startsWith(\"interval\")) ||\n    arrowTypeName === \"range\" ||\n    arrowTypeName.startsWith(\"uint\")\n  )\n}\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { GridCell, GridCellKind, NumberCell } from \"@glideapps/glide-data-grid\"\n\nimport { isIntegerType } from \"@streamlit/lib/src/components/widgets/DataFrame/isIntegerType\"\nimport { getTypeName } from \"@streamlit/lib/src/dataframes/arrowTypeUtils\"\nimport {\n  isNullOrUndefined,\n  notNullOrUndefined,\n} from \"@streamlit/lib/src/util/utils\"\n\nimport {\n  BaseColumn,\n  BaseColumnProps,\n  countDecimals,\n  formatNumber,\n  getErrorCell,\n  mergeColumnParameters,\n  toSafeNumber,\n  toSafeString,\n  truncateDecimals,\n} from \"./utils\"\n\nexport interface NumberColumnParams {\n  // The minimum allowed value for editing. Is set to 0 for unsigned values.\n  readonly min_value?: number\n  // The maximum allowed value for editing.\n  readonly max_value?: number\n  // A formatting syntax (e.g. sprintf) to format the display value.\n  // This can be used for adding prefix or suffix, or changing the number of decimals of the display value.\n  readonly format?: string\n  // Specifies the granularity that the value must adhere.\n  // This will also influence the maximum precision. This will impact the number of decimals\n  // allowed to be entered as well as the number of decimals displayed (if format is not specified).\n  // This is set to 1 for integer types.\n  readonly step?: number\n}\n\n/**\n * A column types that supports optimized rendering and editing for numbers.\n * This supports float, integer, and unsigned integer types.\n */\nfunction NumberColumn(props: BaseColumnProps): BaseColumn {\n  const arrowTypeName = getTypeName(props.arrowType)\n  let format = undefined\n  if (arrowTypeName === \"timedelta64[ns]\") {\n    // Use duration formatting for timedelta64[ns] type:\n    format = \"duration[ns]\"\n  } else if (arrowTypeName.startsWith(\"period[\")) {\n    // Use period formatting for period types:\n    format = arrowTypeName\n  }\n  const parameters = mergeColumnParameters(\n    // Default parameters:\n    {\n      // Set step to 1 for integer types\n      step: isIntegerType(arrowTypeName) ? 1 : undefined,\n      // if uint (unsigned int), only positive numbers are allowed\n      min_value: arrowTypeName.startsWith(\"uint\") ? 0 : undefined,\n      format,\n    } as NumberColumnParams,\n    // User parameters:\n    props.columnTypeOptions\n  ) as NumberColumnParams\n\n  const allowNegative =\n    isNullOrUndefined(parameters.min_value) || parameters.min_value < 0\n\n  const fixedDecimals =\n    notNullOrUndefined(parameters.step) && !Number.isNaN(parameters.step)\n      ? countDecimals(parameters.step)\n      : undefined\n\n  const cellTemplate = {\n    kind: GridCellKind.Number,\n    data: undefined,\n    displayData: \"\",\n    readonly: !props.isEditable,\n    allowOverlay: true,\n    contentAlign: props.contentAlignment || \"right\",\n    // The text in pinned columns should be faded.\n    style: props.isPinned ? \"faded\" : \"normal\",\n    allowNegative,\n    fixedDecimals,\n    // We don't want to show any thousand separators\n    // in the cell overlay/editor:\n    thousandSeparator: \"\",\n  } as NumberCell\n\n  const validateInput = (data?: any): boolean | number => {\n    let cellData: number | null = toSafeNumber(data)\n\n    if (isNullOrUndefined(cellData)) {\n      if (props.isRequired) {\n        return false\n      }\n      return true\n    }\n\n    if (Number.isNaN(cellData)) {\n      return false\n    }\n\n    // A flag to indicate whether the value has been auto-corrected.\n    // This is used to decide if we should return the corrected value or true.\n    // But we still run all other validations on the corrected value below.\n    let corrected = false\n\n    // Apply max_value configuration option:\n    if (\n      notNullOrUndefined(parameters.max_value) &&\n      cellData > parameters.max_value\n    ) {\n      cellData = parameters.max_value\n      corrected = true\n    }\n\n    // Apply min_value configuration option:\n    if (\n      notNullOrUndefined(parameters.min_value) &&\n      cellData < parameters.min_value\n    ) {\n      // Only return false, since correcting it negatively impacts\n      // the user experience.\n      return false\n    }\n\n    // TODO(lukasmasuch): validate step size?\n    // if (notNullOrUndefined(parameters.step) && parameters.step !== 1)\n\n    return corrected ? cellData : true\n  }\n\n  return {\n    ...props,\n    kind: \"number\",\n    sortMode: \"smart\",\n    validateInput,\n    getCell(data?: any, validate?: boolean): GridCell {\n      if (validate === true) {\n        const validationResult = validateInput(data)\n        if (validationResult === false) {\n          // The input is invalid, we return an error cell which will\n          // prevent this cell to be inserted into the table.\n          // This cell should never be actually displayed to the user.\n          // It's mostly used internally to prevent invalid input to be\n          // inserted into the table.\n          return getErrorCell(toSafeString(data), \"Invalid input.\")\n        } else if (typeof validationResult === \"number\") {\n          // Apply corrections:\n          data = validationResult\n        }\n      }\n\n      let cellData: number | null = toSafeNumber(data)\n      let displayData = \"\"\n\n      if (notNullOrUndefined(cellData)) {\n        if (Number.isNaN(cellData)) {\n          return getErrorCell(\n            toSafeString(data),\n            \"The value cannot be interpreted as a number.\"\n          )\n        }\n\n        // Cut decimals:\n        if (notNullOrUndefined(fixedDecimals)) {\n          cellData = truncateDecimals(cellData, fixedDecimals)\n        }\n\n        // Check if the value is larger than the maximum supported value:\n        if (Number.isInteger(cellData) && !Number.isSafeInteger(cellData)) {\n          return getErrorCell(\n            toSafeString(data),\n            \"The value is larger than the maximum supported integer values in number columns (2^53).\"\n          )\n        }\n\n        try {\n          displayData = formatNumber(\n            cellData,\n            parameters.format,\n            fixedDecimals\n          )\n        } catch (error) {\n          return getErrorCell(\n            toSafeString(cellData),\n            notNullOrUndefined(parameters.format)\n              ? `Failed to format the number based on the provided format configuration: (${parameters.format}). Error: ${error}`\n              : `Failed to format the number. Error: ${error}`\n          )\n        }\n      }\n\n      return {\n        ...cellTemplate,\n        data: cellData,\n        displayData,\n        isMissingValue: isNullOrUndefined(cellData),\n        // We want to enforce the raw number without formatting when its copied:\n        copyData: isNullOrUndefined(cellData) ? \"\" : toSafeString(cellData),\n      } as NumberCell\n    },\n    getCellValue(cell: NumberCell): number | null {\n      return cell.data === undefined ? null : cell.data\n    },\n  }\n}\n\nNumberColumn.isEditableType = true\n\nexport default NumberColumn\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { GridCell, GridCellKind, TextCell } from \"@glideapps/glide-data-grid\"\n\nimport {\n  isNullOrUndefined,\n  notNullOrUndefined,\n} from \"@streamlit/lib/src/util/utils\"\n\nimport {\n  BaseColumn,\n  BaseColumnProps,\n  getErrorCell,\n  removeLineBreaks,\n  toSafeString,\n} from \"./utils\"\n\n/**\n * A column type for read-only cells used as a fallback\n * for data types that are currently not supported for editing.\n */\nfunction ObjectColumn(props: BaseColumnProps): BaseColumn {\n  const cellTemplate = {\n    kind: GridCellKind.Text,\n    data: \"\",\n    displayData: \"\",\n    allowOverlay: true,\n    contentAlignment: props.contentAlignment,\n    readonly: true,\n    // The text in pinned columns should be faded.\n    style: props.isPinned ? \"faded\" : \"normal\",\n  } as TextCell\n  return {\n    ...props,\n    kind: \"object\",\n    sortMode: \"default\",\n    isEditable: false, // Object columns are read-only.\n    getCell(data?: any): GridCell {\n      try {\n        const cellData = notNullOrUndefined(data) ? toSafeString(data) : null\n        const displayData = notNullOrUndefined(cellData)\n          ? removeLineBreaks(cellData) // Remove line breaks to show all content in the cell\n          : \"\"\n        return {\n          ...cellTemplate,\n          data: cellData,\n          displayData,\n          isMissingValue: isNullOrUndefined(data),\n        } as TextCell\n      } catch (error) {\n        return getErrorCell(\n          toSafeString(data),\n          `The value cannot be interpreted as a string. Error: ${error}`\n        )\n      }\n    },\n    getCellValue(cell: TextCell): string | null {\n      return cell.data === undefined ? null : cell.data\n    },\n  }\n}\n\nObjectColumn.isEditableType = false\n\nexport default ObjectColumn\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  GridCell,\n  GridCellKind,\n  LoadingCell,\n} from \"@glideapps/glide-data-grid\"\nimport { RangeCellType } from \"@glideapps/glide-data-grid-cells\"\n\nimport { isIntegerType } from \"@streamlit/lib/src/components/widgets/DataFrame/isIntegerType\"\nimport { getTypeName } from \"@streamlit/lib/src/dataframes/arrowTypeUtils\"\nimport {\n  isNullOrUndefined,\n  notNullOrUndefined,\n} from \"@streamlit/lib/src/util/utils\"\n\nimport {\n  BaseColumn,\n  BaseColumnProps,\n  countDecimals,\n  formatNumber,\n  getEmptyCell,\n  getErrorCell,\n  mergeColumnParameters,\n  toSafeNumber,\n  toSafeString,\n} from \"./utils\"\n\nexport interface ProgressColumnParams {\n  // The minimum permitted value. Defaults to 0.\n  readonly min_value?: number\n  // The maximum permitted value. Defaults to 100 if the underlying data is integer,\n  // or 1 for all others types.\n  readonly max_value?: number\n  // A formatting syntax (e.g. sprintf) to format the display value.\n  // This can be used for adding prefix or suffix, or changing the number of decimals of the display value.\n  readonly format?: string\n  // The stepping interval. Defaults to 0.01.\n  // Mainly useful once we provide editing capabilities.\n  readonly step?: number\n}\n\n/**\n * A read-only column type to support rendering values that have a defined\n * range. This is rendered via a progress-bar-like visualization.\n */\nfunction ProgressColumn(props: BaseColumnProps): BaseColumn {\n  const arrowTypeName = getTypeName(props.arrowType)\n  const isInteger = isIntegerType(arrowTypeName)\n\n  const parameters = mergeColumnParameters(\n    // Default parameters:\n    {\n      min_value: 0,\n      max_value: isInteger ? 100 : 1,\n      step: isInteger ? 1 : 0.01,\n      format: isInteger ? \"%3d%%\" : \"percent\",\n    } as ProgressColumnParams,\n    // User parameters:\n    props.columnTypeOptions\n  ) as ProgressColumnParams\n\n  // Measure the display value of the max value, so that all progress bars are aligned correctly:\n  let measureLabel: string\n  try {\n    measureLabel = formatNumber(\n      parameters.max_value as number,\n      parameters.format\n    )\n  } catch (error) {\n    measureLabel = toSafeString(parameters.max_value)\n  }\n\n  const fixedDecimals =\n    isNullOrUndefined(parameters.step) || Number.isNaN(parameters.step)\n      ? undefined\n      : countDecimals(parameters.step)\n\n  const cellTemplate = {\n    kind: GridCellKind.Custom,\n    allowOverlay: false,\n    copyData: \"\",\n    contentAlign: props.contentAlignment,\n    data: {\n      kind: \"range-cell\",\n      min: parameters.min_value,\n      max: parameters.max_value,\n      step: parameters.step,\n      value: parameters.min_value,\n      label: String(parameters.min_value),\n      measureLabel,\n      readonly: true,\n    },\n  } as RangeCellType\n\n  return {\n    ...props,\n    kind: \"progress\",\n    sortMode: \"smart\",\n    isEditable: false, // Progress column is always readonly\n    getCell(data?: any): GridCell {\n      if (isNullOrUndefined(data)) {\n        // TODO(lukasmasuch): Use a missing cell?\n        return getEmptyCell()\n      }\n\n      if (\n        isNullOrUndefined(parameters.min_value) ||\n        isNullOrUndefined(parameters.max_value) ||\n        Number.isNaN(parameters.min_value) ||\n        Number.isNaN(parameters.max_value) ||\n        parameters.min_value >= parameters.max_value\n      ) {\n        return getErrorCell(\n          \"Invalid min/max parameters\",\n          `The min_value (${parameters.min_value}) and max_value (${parameters.max_value}) parameters must be valid numbers.`\n        )\n      }\n\n      if (\n        isNullOrUndefined(parameters.step) ||\n        Number.isNaN(parameters.step)\n      ) {\n        return getErrorCell(\n          \"Invalid step parameter\",\n          `The step parameter (${parameters.step}) must be a valid number.`\n        )\n      }\n\n      const cellData = toSafeNumber(data)\n\n      if (Number.isNaN(cellData) || isNullOrUndefined(cellData)) {\n        return getErrorCell(\n          toSafeString(data),\n          \"The value cannot be interpreted as a number.\"\n        )\n      }\n\n      // Check if the value is larger than the maximum supported value:\n      if (Number.isInteger(cellData) && !Number.isSafeInteger(cellData)) {\n        return getErrorCell(\n          toSafeString(data),\n          \"The value is larger than the maximum supported integer values in number columns (2^53).\"\n        )\n      }\n\n      let displayData = \"\"\n\n      try {\n        displayData = formatNumber(cellData, parameters.format, fixedDecimals)\n      } catch (error) {\n        return getErrorCell(\n          toSafeString(cellData),\n          notNullOrUndefined(parameters.format)\n            ? `Failed to format the number based on the provided format configuration: (${parameters.format}). Error: ${error}`\n            : `Failed to format the number. Error: ${error}`\n        )\n      }\n\n      // If the value is outside the range, we scale it to the min/max\n      // for the visualization.\n      const normalizeCellValue = Math.min(\n        parameters.max_value,\n        Math.max(parameters.min_value, cellData)\n      )\n\n      return {\n        ...cellTemplate,\n        isMissingValue: isNullOrUndefined(data),\n        copyData: String(cellData), // Column sorting is done via the copyData value\n        data: {\n          ...cellTemplate.data,\n          value: normalizeCellValue,\n          label: displayData,\n        },\n      } as RangeCellType\n    },\n    getCellValue(cell: RangeCellType | LoadingCell): number | null {\n      if (cell.kind === GridCellKind.Loading) {\n        return null\n      }\n      return cell.data?.value === undefined ? null : cell.data?.value\n    },\n  }\n}\n\nProgressColumn.isEditableType = false\n\nexport default ProgressColumn\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { GridCell, GridCellKind } from \"@glideapps/glide-data-grid\"\nimport { DropdownCellType } from \"@glideapps/glide-data-grid-cells\"\n\nimport { getTypeName } from \"@streamlit/lib/src/dataframes/arrowTypeUtils\"\nimport {\n  isNullOrUndefined,\n  notNullOrUndefined,\n} from \"@streamlit/lib/src/util/utils\"\n\nimport {\n  BaseColumn,\n  BaseColumnProps,\n  getErrorCell,\n  mergeColumnParameters,\n  toSafeBoolean,\n  toSafeNumber,\n  toSafeString,\n} from \"./utils\"\n\nexport interface SelectboxColumnParams {\n  /** A list of options available in the selectbox.\n   * Every value in the column needs to match one of the options.\n   */\n  readonly options: (string | number | boolean)[]\n}\n\n/**\n * A column type that supports optimized rendering and editing for categorical values\n * by using a selectbox. This is automatically used by categorical columns (Pandas).\n *\n */\nfunction SelectboxColumn(props: BaseColumnProps): BaseColumn {\n  // The selectbox column can be either string, number or boolean type\n  // based on the options type.\n  let dataType: \"number\" | \"boolean\" | \"string\" = \"string\"\n\n  const parameters = mergeColumnParameters(\n    // Default parameters:\n    {\n      options: getTypeName(props.arrowType) === \"bool\" ? [true, false] : [],\n    },\n    // User parameters:\n    props.columnTypeOptions\n  ) as SelectboxColumnParams\n\n  const uniqueTypes = new Set(parameters.options.map(x => typeof x))\n  if (uniqueTypes.size === 1) {\n    if (uniqueTypes.has(\"number\") || uniqueTypes.has(\"bigint\")) {\n      dataType = \"number\"\n    } else if (uniqueTypes.has(\"boolean\")) {\n      dataType = \"boolean\"\n    }\n  }\n\n  const cellTemplate = {\n    kind: GridCellKind.Custom,\n    allowOverlay: true,\n    copyData: \"\",\n    contentAlign: props.contentAlignment,\n    readonly: !props.isEditable,\n    // The text in pinned columns should be faded.\n    style: props.isPinned ? \"faded\" : \"normal\",\n    data: {\n      kind: \"dropdown-cell\",\n      allowedValues: [\n        // Add empty option if the column is not configured as required:\n        ...(props.isRequired !== true ? [null] : []),\n        ...parameters.options\n          .filter(opt => opt !== null && opt !== \"\") // ignore empty option if it exists\n          .map(opt => toSafeString(opt)), // convert everything to string\n      ],\n      value: \"\",\n    },\n  } as DropdownCellType\n\n  return {\n    ...props,\n    kind: \"selectbox\",\n    sortMode: \"default\",\n    getCell(data?: any, validate?: boolean): GridCell {\n      // Empty string refers to a missing value\n      let cellData = null\n      if (notNullOrUndefined(data) && data !== \"\") {\n        cellData = toSafeString(data)\n      }\n\n      if (validate && !cellTemplate.data.allowedValues.includes(cellData)) {\n        return getErrorCell(\n          toSafeString(cellData),\n          `The value is not part of the allowed options.`\n        )\n      }\n\n      return {\n        ...cellTemplate,\n        isMissingValue: cellData === null,\n        copyData: cellData || \"\", // Column sorting is done via the copyData value\n        data: {\n          ...cellTemplate.data,\n          value: cellData,\n        },\n      } as DropdownCellType\n    },\n    getCellValue(cell: DropdownCellType): string | number | boolean | null {\n      if (isNullOrUndefined(cell.data?.value) || cell.data?.value === \"\") {\n        return null\n      }\n      if (dataType === \"number\") {\n        return toSafeNumber(cell.data?.value) ?? null\n      } else if (dataType === \"boolean\") {\n        return toSafeBoolean(cell.data?.value) ?? null\n      }\n      return cell.data?.value\n    },\n  }\n}\n\nSelectboxColumn.isEditableType = true\n\nexport default SelectboxColumn\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { GridCell, GridCellKind, TextCell } from \"@glideapps/glide-data-grid\"\n\nimport {\n  isNullOrUndefined,\n  notNullOrUndefined,\n} from \"@streamlit/lib/src/util/utils\"\n\nimport {\n  BaseColumn,\n  BaseColumnProps,\n  getErrorCell,\n  removeLineBreaks,\n  toSafeString,\n} from \"./utils\"\n\nexport interface TextColumnParams {\n  // The maximum number of characters the user can enter into the text input.\n  readonly max_chars?: number\n  // Regular expression that the input's value must match for the value to pass\n  readonly validate?: string\n}\n\n/**\n * A column that supports rendering & editing of text values.\n */\nfunction TextColumn(props: BaseColumnProps): BaseColumn {\n  const parameters = (props.columnTypeOptions as TextColumnParams) || {}\n\n  let validateRegex: RegExp | string | undefined = undefined\n\n  if (parameters.validate) {\n    // Prepare the validation regex:\n    try {\n      // u flag allows unicode characters\n      // s flag allows . to match newlines\n      validateRegex = new RegExp(parameters.validate, \"us\")\n    } catch (error) {\n      // Put error message in validateRegex so we can display it in the cell\n      validateRegex = `Invalid validate regex: ${parameters.validate}.\\nError: ${error}`\n    }\n  }\n\n  const cellTemplate = {\n    kind: GridCellKind.Text,\n    data: \"\",\n    displayData: \"\",\n    allowOverlay: true,\n    contentAlignment: props.contentAlignment,\n    readonly: !props.isEditable,\n    // The text in pinned columns should be faded.\n    style: props.isPinned ? \"faded\" : \"normal\",\n  } as TextCell\n\n  const validateInput = (data?: any): boolean | string => {\n    if (isNullOrUndefined(data)) {\n      if (props.isRequired) {\n        return false\n      }\n      return true\n    }\n\n    let cellData = toSafeString(data)\n    // A flag to indicate whether the value has been auto-corrected.\n    // This is used to decide if we should return the corrected value or true.\n    // But we still run all other validations on the corrected value below.\n    let corrected = false\n\n    if (parameters.max_chars && cellData.length > parameters.max_chars) {\n      cellData = cellData.slice(0, parameters.max_chars)\n      corrected = true\n    }\n\n    if (\n      validateRegex instanceof RegExp &&\n      validateRegex.test(cellData) === false\n    ) {\n      return false\n    }\n\n    return corrected ? cellData : true\n  }\n\n  return {\n    ...props,\n    kind: \"text\",\n    sortMode: \"default\",\n    validateInput,\n    getCell(data?: any, validate?: boolean): GridCell {\n      if (typeof validateRegex === \"string\") {\n        // The regex is invalid, we return an error to indicate this\n        // to the developer:\n        return getErrorCell(toSafeString(data), validateRegex)\n      }\n\n      if (validate) {\n        const validationResult = validateInput(data)\n        if (validationResult === false) {\n          // The input is invalid, we return an error cell which will\n          // prevent this cell to be inserted into the table.\n          // This cell should never be actually displayed to the user.\n          // It's mostly used internally to prevent invalid input to be\n          // inserted into the table.\n          return getErrorCell(toSafeString(data), \"Invalid input.\")\n        } else if (typeof validationResult === \"string\") {\n          // Apply corrections:\n          data = validationResult\n        }\n      }\n\n      try {\n        const cellData = notNullOrUndefined(data) ? toSafeString(data) : null\n        const displayData = notNullOrUndefined(cellData)\n          ? removeLineBreaks(cellData) // Remove line breaks to show all content in the cell\n          : \"\"\n        return {\n          ...cellTemplate,\n          isMissingValue: isNullOrUndefined(cellData),\n          data: cellData,\n          displayData,\n        } as TextCell\n      } catch (error) {\n        // This should never happen, but if it does, we want to show an error\n        return getErrorCell(\n          \"Incompatible value\",\n          `The value cannot be interpreted as string. Error: ${error}`\n        )\n      }\n    },\n    getCellValue(cell: TextCell): string | null {\n      return cell.data === undefined ? null : cell.data\n    },\n  }\n}\n\nTextColumn.isEditableType = true\n\nexport default TextColumn\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from \"react\"\n\nimport { ImageEditorType } from \"@glideapps/glide-data-grid\"\nimport styled from \"@emotion/styled\"\n\nconst StyledImage = styled.img({\n  maxWidth: \"100%\",\n  maxHeight: \"37.5rem\",\n  objectFit: \"scale-down\",\n})\n\nexport const ImageCellEditor: ImageEditorType = ({ urls }) => {\n  const imageData = urls && urls.length > 0 ? urls[0] : \"\"\n  // Allow external image links to be opened in a new tab on click\n  if (imageData.startsWith(\"http\")) {\n    return (\n      <a href={imageData} target=\"_blank\" rel=\"noreferrer noopener\">\n        <StyledImage src={imageData}></StyledImage>\n      </a>\n    )\n  }\n\n  return <StyledImage src={imageData}></StyledImage>\n}\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  AreaChartColumn,\n  BarChartColumn,\n  LineChartColumn,\n} from \"./ChartColumn\"\nimport CheckboxColumn from \"./CheckboxColumn\"\nimport DateTimeColumn, { DateColumn, TimeColumn } from \"./DateTimeColumn\"\nimport ImageColumn from \"./ImageColumn\"\nimport LinkColumn from \"./LinkColumn\"\nimport ListColumn from \"./ListColumn\"\nimport NumberColumn from \"./NumberColumn\"\nimport ObjectColumn from \"./ObjectColumn\"\nimport ProgressColumn from \"./ProgressColumn\"\nimport SelectboxColumn from \"./SelectboxColumn\"\nimport TextColumn from \"./TextColumn\"\nimport { ColumnCreator } from \"./utils\"\n\nexport { ImageCellEditor } from \"./cells/ImageCellEditor\"\nexport type { DateTimeColumnParams } from \"./DateTimeColumn\"\nexport type { LinkColumnParams } from \"./LinkColumn\"\nexport type { NumberColumnParams } from \"./NumberColumn\"\n\nexport * from \"./utils\"\n\n/**\n * All available column types need to be registered here.\n *\n * These names must match the column names used in the backend.\n */\nexport const ColumnTypes = new Map<string, ColumnCreator>(\n  Object.entries({\n    object: ObjectColumn,\n    text: TextColumn,\n    checkbox: CheckboxColumn,\n    selectbox: SelectboxColumn,\n    list: ListColumn,\n    number: NumberColumn,\n    link: LinkColumn,\n    datetime: DateTimeColumn,\n    date: DateColumn,\n    time: TimeColumn,\n    line_chart: LineChartColumn,\n    bar_chart: BarChartColumn,\n    area_chart: AreaChartColumn,\n    image: ImageColumn,\n    progress: ProgressColumn,\n  })\n)\n\nexport const CustomCells = []\n\nexport {\n  AreaChartColumn,\n  BarChartColumn,\n  CheckboxColumn,\n  DateColumn,\n  DateTimeColumn,\n  ImageColumn,\n  LineChartColumn,\n  LinkColumn,\n  ListColumn,\n  NumberColumn,\n  ObjectColumn,\n  ProgressColumn,\n  SelectboxColumn,\n  TextColumn,\n  TimeColumn,\n}\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Theme as GlideTheme,\n  GridCell,\n  GridCellKind,\n  NumberCell,\n  TextCell,\n  UriCell,\n} from \"@glideapps/glide-data-grid\"\nimport { DatePickerType } from \"@glideapps/glide-data-grid-cells\"\nimport moment from \"moment\"\n\nimport { DataFrameCell, Quiver } from \"@streamlit/lib/src/dataframes/Quiver\"\nimport {\n  convertToSeconds,\n  format as formatArrowCell,\n} from \"@streamlit/lib/src/dataframes/arrowFormatUtils\"\nimport {\n  Type as ArrowType,\n  getTypeName,\n} from \"@streamlit/lib/src/dataframes/arrowTypeUtils\"\nimport {\n  isNullOrUndefined,\n  notNullOrUndefined,\n} from \"@streamlit/lib/src/util/utils\"\n\nimport {\n  BaseColumn,\n  BaseColumnProps,\n  CheckboxColumn,\n  ColumnCreator,\n  DateColumn,\n  DateTimeColumn,\n  DateTimeColumnParams,\n  isErrorCell,\n  LinkColumnParams,\n  ListColumn,\n  NumberColumn,\n  NumberColumnParams,\n  ObjectColumn,\n  removeLineBreaks,\n  SelectboxColumn,\n  TextColumn,\n  TimeColumn,\n} from \"./columns\"\n\n/**\n * Extracts a CSS property value from a given CSS style string by using a regex.\n *\n * @param htmlElementId - The ID of the HTML element to extract the property for.\n * @param property - The css property to extract the value for.\n * @param cssStyle - The css style string.\n *\n * @return the CSS property value or undefined if the property is not found.\n */\nexport function extractCssProperty(\n  htmlElementId: string,\n  property: string,\n  cssStyle: string\n): string | undefined {\n  // This regex is supposed to extract the value of a CSS property\n  // for a specified HTML element ID from a CSS style string:\n  const regex = new RegExp(\n    `${htmlElementId}[,\\\\s].*{(?:[^}]*[\\\\s;]{1})?${property}:\\\\s*([^;}]+)[;]?.*}`,\n    \"gm\"\n  )\n  // Makes the regex simpler to match the element correctly:\n  cssStyle = cssStyle.replace(/{/g, \" {\")\n\n  const match = regex.exec(cssStyle)\n  if (match) {\n    return match[1].trim()\n  }\n\n  return undefined\n}\n/**\n * Applies pandas styler CSS to style the cell.\n *\n * @param cell: The cell to style.\n * @param cssId: The css ID of the cell.\n * @param cssStyles: All CSS styles from pandas styler.\n *\n * @return a styled grid cell.\n */\nexport function applyPandasStylerCss(\n  cell: GridCell,\n  cssId: string,\n  cssStyles: string\n): GridCell {\n  const themeOverride = {} as Partial<GlideTheme>\n\n  // Extract and apply the font color\n  const fontColor = extractCssProperty(cssId, \"color\", cssStyles)\n  if (fontColor) {\n    themeOverride.textDark = fontColor\n  }\n\n  // Extract and apply the background color\n  const backgroundColor = extractCssProperty(\n    cssId,\n    \"background-color\",\n    cssStyles\n  )\n  if (backgroundColor) {\n    themeOverride.bgCell = backgroundColor\n  }\n\n  if (backgroundColor === \"yellow\" && fontColor === undefined) {\n    // Yellow is used by pandas styler as the default highlight color.\n    // But yellow won't work well with our default font color in dark mode.\n    // Therefore, we are overriding the font color to our dark font color which\n    // always works well with yellow background.\n    themeOverride.textDark = \"#31333F\"\n  }\n\n  if (themeOverride) {\n    // Apply the background and font color in the theme override\n    return {\n      ...cell,\n      themeOverride,\n    }\n  }\n  return cell\n}\n\n/**\n * Maps the data type from Arrow to a column type.\n */\nexport function getColumnTypeFromArrow(arrowType: ArrowType): ColumnCreator {\n  let typeName = arrowType ? getTypeName(arrowType) : null\n\n  if (!typeName) {\n    // Use object column as fallback\n    return ObjectColumn\n  }\n\n  typeName = typeName.toLowerCase().trim()\n  // Match based on arrow types\n  if ([\"unicode\", \"empty\", \"large_string[pyarrow]\"].includes(typeName)) {\n    return TextColumn\n  }\n\n  if ([\"datetime\", \"datetimetz\"].includes(typeName)) {\n    return DateTimeColumn\n  }\n  if (typeName === \"time\") {\n    return TimeColumn\n  }\n  if (typeName === \"date\") {\n    return DateColumn\n  }\n  if ([\"object\", \"bytes\"].includes(typeName)) {\n    return ObjectColumn\n  }\n  if ([\"bool\"].includes(typeName)) {\n    return CheckboxColumn\n  }\n  if (\n    [\n      \"int8\",\n      \"int16\",\n      \"int32\",\n      \"int64\",\n      \"uint8\",\n      \"uint16\",\n      \"uint32\",\n      \"uint64\",\n      \"float16\",\n      \"float32\",\n      \"float64\",\n      \"float96\",\n      \"float128\",\n      \"range\", // The default index in pandas uses a range type.\n      \"decimal\",\n    ].includes(typeName)\n  ) {\n    return NumberColumn\n  }\n  if (typeName === \"categorical\") {\n    return SelectboxColumn\n  }\n  if (typeName.startsWith(\"list\")) {\n    return ListColumn\n  }\n\n  return ObjectColumn\n}\n\n/**\n * Creates the column props for an index column from the Arrow metadata.\n *\n * @param data - The Arrow data.\n * @param indexPosition - The numeric position of the index column.\n *\n * @return the column props for the index column.\n */\nexport function getIndexFromArrow(\n  data: Quiver,\n  indexPosition: number\n): BaseColumnProps {\n  const arrowType = data.types.index[indexPosition]\n  const title = data.indexNames[indexPosition]\n  let isEditable = true\n\n  if (getTypeName(arrowType) === \"range\") {\n    // Range indices are not editable\n    isEditable = false\n  }\n\n  return {\n    id: `index-${indexPosition}`,\n    name: title,\n    title,\n    isEditable,\n    arrowType,\n    isIndex: true,\n    isPinned: true,\n    isHidden: false,\n  } as BaseColumnProps\n}\n\n/**\n * Creates the column props for a data column from the Arrow metadata.\n *\n * @param data - The Arrow data.\n * @param columnPosition - The numeric position of the data column.\n *        Starts with 0 at the first non-index column.\n *\n * @return the column props for the data column.\n */\nexport function getColumnFromArrow(\n  data: Quiver,\n  columnPosition: number\n): BaseColumnProps {\n  // data.columns refers to the header rows (not sure about why it is named this way)\n  // It is a matrix of column names.\n  const columnHeaderNames = data.columns.map(column => column[columnPosition])\n  const title =\n    columnHeaderNames.length > 0\n      ? columnHeaderNames[columnHeaderNames.length - 1]\n      : \"\"\n\n  // If there are > 1 header columns, join all these headers with a \"/\"\n  // and use it as the group name, but ignore empty strings headers.\n  // This does not include the last column, which we use as the actual\n  // column name. E.g.\n  // columnHeaders = [\"a\", \"b\", \"c\"] -> group = \"a / b\" name: \"c\"\n  // columnHeaders = [\"\", \"b\", \"c\"] -> group = \"b\" name: \"c\"\n\n  const group =\n    columnHeaderNames.length > 1\n      ? columnHeaderNames\n          .filter(column => column !== \"\")\n          .slice(0, -1)\n          .join(\" / \")\n      : undefined\n\n  let arrowType = data.types.data[columnPosition]\n\n  if (isNullOrUndefined(arrowType)) {\n    // Use empty column type as fallback\n    arrowType = {\n      meta: null,\n      numpy_type: \"object\",\n      pandas_type: \"object\",\n    } as ArrowType\n  }\n\n  let columnTypeOptions\n  if (getTypeName(arrowType) === \"categorical\") {\n    // Get the available categories and use it in column type metadata\n    const options = data.getCategoricalOptions(columnPosition)\n    if (notNullOrUndefined(options)) {\n      columnTypeOptions = {\n        options,\n      }\n    }\n  }\n\n  return {\n    id: `column-${title}-${columnPosition}`,\n    name: title,\n    title,\n    isEditable: true,\n    arrowType,\n    columnTypeOptions,\n    isIndex: false,\n    isPinned: false,\n    isHidden: false,\n    group,\n  } as BaseColumnProps\n}\n\n/**\n * Creates the column props for an empty index column.\n * This is used for DataFrames that don't have any index.\n * At least one column is required for glide.\n */\nexport function getEmptyIndexColumn(): BaseColumnProps {\n  return {\n    id: `empty-index`,\n    title: \"\",\n    indexNumber: 0,\n    isEditable: false,\n    isIndex: true,\n    isPinned: true,\n  } as BaseColumnProps\n}\n\n/**\n * Creates the column props for all columns from the Arrow metadata.\n *\n * @param data - The Arrow data.\n * @return the column props for all columns.\n */\nexport function getAllColumnsFromArrow(data: Quiver): BaseColumnProps[] {\n  const columns: BaseColumnProps[] = []\n\n  const { dimensions } = data\n  const numIndices = dimensions.headerColumns\n  const numColumns = dimensions.dataColumns\n\n  if (numIndices === 0 && numColumns === 0) {\n    // Tables that don't have any columns cause an exception in glide-data-grid.\n    // As a workaround, we are adding an empty index column in this case.\n    columns.push(getEmptyIndexColumn())\n    return columns\n  }\n\n  for (let i = 0; i < numIndices; i++) {\n    const column = {\n      ...getIndexFromArrow(data, i),\n      indexNumber: i,\n    } as BaseColumnProps\n\n    columns.push(column)\n  }\n\n  for (let i = 0; i < numColumns; i++) {\n    const column = {\n      ...getColumnFromArrow(data, i),\n      indexNumber: i + numIndices,\n    } as BaseColumnProps\n\n    columns.push(column)\n  }\n  return columns\n}\n\n/**\n * Returns a glide-data-grid compatible cell object based on the\n * cell data from the Quiver (Arrow) object. Different types of data will\n * result in different cell types.\n *\n * @param column - The colum of the cell.\n * @param arrowCell - The dataframe cell object from Arrow.\n * @param cssStyles - Optional css styles to apply on the cell.\n *\n * @return a GridCell object that can be used by glide-data-grid.\n */\nexport function getCellFromArrow(\n  column: BaseColumn,\n  arrowCell: DataFrameCell,\n  cssStyles: string | undefined = undefined\n): GridCell {\n  const typeName = column.arrowType ? getTypeName(column.arrowType) : null\n\n  let cellTemplate\n  if (column.kind === \"object\") {\n    // Always use display value from Quiver for object types\n    // these are special types that the dataframe only support in read-only mode.\n    cellTemplate = column.getCell(\n      notNullOrUndefined(arrowCell.content)\n        ? removeLineBreaks(\n            formatArrowCell(\n              arrowCell.content,\n              arrowCell.contentType,\n              arrowCell.field\n            )\n          )\n        : null\n    )\n  } else if (\n    [\"time\", \"date\", \"datetime\"].includes(column.kind) &&\n    notNullOrUndefined(arrowCell.content) &&\n    (typeof arrowCell.content === \"number\" ||\n      typeof arrowCell.content === \"bigint\")\n  ) {\n    // This is a special case where we want to already parse a numerical timestamp\n    // to a date object based on the arrow field metadata.\n    // Our implementation only supports unix timestamps in seconds, so we need to\n    // do some custom conversion here.\n    let parsedDate\n    if (\n      typeName === \"time\" &&\n      notNullOrUndefined(arrowCell.field?.type?.unit)\n    ) {\n      // Time values needs to be adjusted to seconds based on the unit\n      parsedDate = moment\n        .unix(\n          convertToSeconds(arrowCell.content, arrowCell.field?.type?.unit ?? 0)\n        )\n        .utc()\n        .toDate()\n    } else {\n      // All other datetime related values are assumed to be in milliseconds\n      parsedDate = moment.utc(Number(arrowCell.content)).toDate()\n    }\n\n    cellTemplate = column.getCell(parsedDate)\n  } else if (typeName === \"decimal\") {\n    // This is a special case where we want to already prepare a decimal value\n    // to a number string based on the arrow field metadata. This is required\n    // because we don't have access to the required scale in the number column.\n    const decimalStr = isNullOrUndefined(arrowCell.content)\n      ? null\n      : formatArrowCell(\n          arrowCell.content,\n          arrowCell.contentType,\n          arrowCell.field\n        )\n    cellTemplate = column.getCell(decimalStr)\n  } else {\n    cellTemplate = column.getCell(arrowCell.content)\n  }\n\n  if (isErrorCell(cellTemplate)) {\n    // Directly return error cells without any additional modification\n    return cellTemplate\n  }\n\n  if (!column.isEditable) {\n    // Only apply display content and css styles to non-editable cells.\n    if (notNullOrUndefined(arrowCell.displayContent)) {\n      const displayData = removeLineBreaks(arrowCell.displayContent)\n      // If the display content is set, use that instead of the content.\n      // This is only supported for text, object, date, datetime, time and number cells.\n      // Non-editable datetime cells will use the text cell kind\n      // so we don't need to handle date-time-cell cells extra here.\n      if (cellTemplate.kind === GridCellKind.Text) {\n        cellTemplate = {\n          ...cellTemplate,\n          displayData,\n        } as TextCell\n      } else if (\n        cellTemplate.kind === GridCellKind.Number &&\n        // Only apply styler value if format was not explicitly set by the user.\n        isNullOrUndefined(\n          (column.columnTypeOptions as NumberColumnParams)?.format\n        )\n      ) {\n        cellTemplate = {\n          ...cellTemplate,\n          displayData,\n        } as NumberCell\n      } else if (\n        cellTemplate.kind === GridCellKind.Uri &&\n        // Only apply styler value if display text was not explicitly set by the user.\n        isNullOrUndefined(\n          (column.columnTypeOptions as LinkColumnParams)?.display_text\n        )\n      ) {\n        cellTemplate = {\n          ...cellTemplate,\n          displayData,\n        } as UriCell\n      } else if (\n        cellTemplate.kind === GridCellKind.Custom &&\n        (cellTemplate as DatePickerType).data?.kind === \"date-picker-cell\" &&\n        // Only apply styler value if format was not explicitly set by the user.\n        isNullOrUndefined(\n          (column.columnTypeOptions as DateTimeColumnParams)?.format\n        )\n      ) {\n        cellTemplate = {\n          ...cellTemplate,\n          data: {\n            ...(cellTemplate as DatePickerType).data,\n            displayDate: displayData,\n          },\n        } as DatePickerType\n      }\n    }\n\n    if (cssStyles && arrowCell.cssId) {\n      cellTemplate = applyPandasStylerCss(\n        cellTemplate,\n        arrowCell.cssId,\n        cssStyles\n      )\n    }\n  }\n  return cellTemplate\n}\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from \"react\"\n\nimport { useTheme } from \"@emotion/react\"\nimport merge from \"lodash/merge\"\n\nimport {\n  getAllColumnsFromArrow,\n  getColumnTypeFromArrow,\n  getEmptyIndexColumn,\n} from \"@streamlit/lib/src/components/widgets/DataFrame/arrowUtils\"\nimport {\n  BaseColumn,\n  BaseColumnProps,\n  ColumnCreator,\n  ColumnTypes,\n  ObjectColumn,\n} from \"@streamlit/lib/src/components/widgets/DataFrame/columns\"\nimport { Quiver } from \"@streamlit/lib/src/dataframes/Quiver\"\nimport { Arrow as ArrowProto } from \"@streamlit/lib/src/proto\"\nimport { EmotionTheme } from \"@streamlit/lib/src/theme\"\nimport { logError, logWarning } from \"@streamlit/lib/src/util/log\"\nimport {\n  isNullOrUndefined,\n  notNullOrUndefined,\n} from \"@streamlit/lib/src/util/utils\"\n\n// Using this ID for column config will apply the config to all index columns\nexport const INDEX_IDENTIFIER = \"_index\"\n// Prefix used in the config column mapping when referring to a column via the numeric position\nexport const COLUMN_POSITION_PREFIX = \"_pos:\"\n\n// Predefined column widths configurable by the user\nexport const COLUMN_WIDTH_MAPPING = {\n  small: 75,\n  medium: 200,\n  large: 400,\n}\n\n/**\n * Options to configure columns.\n *\n * This needs to be kept in sync with the ColumnConfig TypeDict in the backend.\n * This will be eventually replaced with a proto message.\n */\nexport interface ColumnConfigProps {\n  label?: string\n  width?: \"small\" | \"medium\" | \"large\" | number\n  help?: string\n  hidden?: boolean\n  disabled?: boolean\n  required?: boolean\n  default?: number | string | boolean\n  alignment?: \"left\" | \"center\" | \"right\"\n  pinned?: boolean\n  // uses snake_case to match the property names in the backend:\n  type_config?: Record<string, unknown>\n}\n\n/**\n * Parse the user-defined width configuration and return the width in pixels.\n */\nfunction parseWidthConfig(\n  width?: \"small\" | \"medium\" | \"large\" | number\n): number | undefined {\n  if (isNullOrUndefined(width)) {\n    return undefined\n  }\n\n  if (typeof width === \"number\") {\n    return width\n  }\n\n  if (width in COLUMN_WIDTH_MAPPING) {\n    return COLUMN_WIDTH_MAPPING[width]\n  }\n\n  return undefined\n}\n\n/**\n * Apply the user-defined column configuration if supplied.\n *\n * @param columnProps - The column properties to apply the config to.\n * @param columnConfigMapping - The user-defined column configuration mapping.\n *\n * @return the column properties with the config applied.\n */\nexport function applyColumnConfig(\n  columnProps: BaseColumnProps,\n  columnConfigMapping: Map<string | number, ColumnConfigProps>\n): BaseColumnProps {\n  if (!columnConfigMapping) {\n    // No column config configured\n    return columnProps\n  }\n\n  let columnConfig\n  if (\n    columnConfigMapping.has(columnProps.name) &&\n    columnProps.name !== INDEX_IDENTIFIER // \"index\" is not supported as name for normal columns\n  ) {\n    // Config is configured based on the column name\n    columnConfig = columnConfigMapping.get(columnProps.name)\n  } else if (\n    columnConfigMapping.has(\n      `${COLUMN_POSITION_PREFIX}${columnProps.indexNumber}`\n    )\n  ) {\n    // Config is configured based on the column position, e.g. col:0 -> first column\n    columnConfig = columnConfigMapping.get(\n      `${COLUMN_POSITION_PREFIX}${columnProps.indexNumber}`\n    )\n  } else if (\n    columnProps.isIndex &&\n    columnConfigMapping.has(INDEX_IDENTIFIER)\n  ) {\n    // Config is configured for the index column (or all index columns for multi-index)\n    columnConfig = columnConfigMapping.get(INDEX_IDENTIFIER)\n  }\n\n  if (!columnConfig) {\n    // No column config found for this column\n    return columnProps\n  }\n\n  // This will update all column props with the user-defined config for all\n  // configuration options that are not undefined:\n  return merge({ ...columnProps }, {\n    title: columnConfig.label,\n    width: parseWidthConfig(columnConfig.width),\n    isEditable: notNullOrUndefined(columnConfig.disabled)\n      ? !columnConfig.disabled\n      : undefined,\n    isHidden: columnConfig.hidden,\n    isPinned: columnConfig.pinned,\n    isRequired: columnConfig.required,\n    columnTypeOptions: columnConfig.type_config,\n    contentAlignment: columnConfig.alignment,\n    defaultValue: columnConfig.default,\n    help: columnConfig.help,\n  } as BaseColumnProps) as BaseColumnProps\n}\n\n/**\n * Extracts the user-defined column configuration from the JSON config.\n *\n * @param configJson - the column config JSON from the proto.\n *\n * @returns the user-defined column configuration.\n */\nexport function getColumnConfig(configJson: string): Map<string, any> {\n  if (!configJson) {\n    return new Map()\n  }\n  try {\n    return new Map(Object.entries(JSON.parse(configJson)))\n  } catch (error) {\n    // This is not expected to happen, but if it does, we'll return an empty map\n    // and log the error to the console.\n    logError(error)\n    return new Map()\n  }\n}\n\ntype ColumnLoaderReturn = {\n  columns: BaseColumn[]\n}\n\n/**\n * Get the column type (creator class of column type) for the given column properties.\n *\n * @param column - The column properties.\n *\n * @returns the column creator of the corresponding column type.\n */\nexport function getColumnType(column: BaseColumnProps): ColumnCreator {\n  const customType = column.columnTypeOptions?.type as string\n  // Create a column instance based on the column properties\n  let ColumnType: ColumnCreator | undefined\n  if (notNullOrUndefined(customType)) {\n    if (ColumnTypes.has(customType)) {\n      ColumnType = ColumnTypes.get(customType)\n    } else {\n      logWarning(\n        `Unknown column type configured in column configuration: ${customType}`\n      )\n    }\n  }\n  if (isNullOrUndefined(ColumnType)) {\n    // Load based on arrow type\n    ColumnType = getColumnTypeFromArrow(column.arrowType)\n  }\n  return ColumnType\n}\n\n/**\n * Custom hook that handles loads and configures all table columns from the Arrow table.\n *\n * @param element - The proto message of the dataframe element\n * @param data - The Arrow data extracted from the proto message\n * @param disabled - Whether the widget is disabled\n *\n * @returns the columns and the cell content getter compatible with glide-data-grid.\n */\nfunction useColumnLoader(\n  element: ArrowProto,\n  data: Quiver,\n  disabled: boolean\n): ColumnLoaderReturn {\n  const theme: EmotionTheme = useTheme()\n\n  const columnConfigMapping = React.useMemo(() => {\n    return getColumnConfig(element.columns)\n  }, [element.columns])\n\n  const stretchColumns: boolean =\n    element.useContainerWidth ||\n    (notNullOrUndefined(element.width) && element.width > 0)\n\n  // Converts the columns from Arrow into columns compatible with glide-data-grid\n  const columns: BaseColumn[] = React.useMemo(() => {\n    let configuredColumns = getAllColumnsFromArrow(data)\n      .map(column => {\n        // Apply column configurations\n        let updatedColumn = {\n          ...column,\n          ...applyColumnConfig(column, columnConfigMapping),\n          isStretched: stretchColumns,\n        } as BaseColumnProps\n        const ColumnType = getColumnType(updatedColumn)\n\n        // Make sure editing is deactivated if the column is read-only, disabled,\n        // or a not editable type.\n        if (\n          element.editingMode === ArrowProto.EditingMode.READ_ONLY ||\n          disabled ||\n          ColumnType.isEditableType === false\n        ) {\n          updatedColumn = {\n            ...updatedColumn,\n            isEditable: false,\n          }\n        }\n\n        if (\n          element.editingMode !== ArrowProto.EditingMode.READ_ONLY &&\n          updatedColumn.isEditable == true\n        ) {\n          // Set editable icon for all editable columns:\n          updatedColumn = {\n            ...updatedColumn,\n            icon: \"editable\",\n          }\n\n          // Make sure that required columns are not hidden when editing mode is dynamic:\n          if (\n            updatedColumn.isRequired &&\n            element.editingMode === ArrowProto.EditingMode.DYNAMIC\n          ) {\n            updatedColumn = {\n              ...updatedColumn,\n              isHidden: false,\n            }\n          }\n        }\n\n        return ColumnType(updatedColumn, theme)\n      })\n      .filter(column => {\n        // Filter out all columns that are hidden\n        return !column.isHidden\n      })\n\n    const orderedColumns: BaseColumn[] = []\n\n    // Add all pinned columns to the beginning of the list:\n    const unpinnedColumns: BaseColumn[] = []\n    configuredColumns.forEach(column => {\n      if (column.isPinned) {\n        orderedColumns.push(column)\n      } else {\n        unpinnedColumns.push(column)\n      }\n    })\n\n    if (element.columnOrder?.length) {\n      // Reorder non-pinned columns based on the configured column order:\n      element.columnOrder.forEach(columnName => {\n        const column = configuredColumns.find(\n          column => column.name === columnName\n        )\n        if (column && !column.isPinned) {\n          orderedColumns.push(column)\n        }\n      })\n    } else {\n      // Add all unpinned columns to the end of the list:\n      orderedColumns.push(...unpinnedColumns)\n    }\n\n    configuredColumns = orderedColumns\n\n    // If all columns got filtered out, we add an empty index column\n    // to prevent errors from glide-data-grid.\n    return configuredColumns.length > 0\n      ? configuredColumns\n      : [ObjectColumn(getEmptyIndexColumn())]\n  }, [\n    data,\n    columnConfigMapping,\n    stretchColumns,\n    disabled,\n    element.editingMode,\n    element.columnOrder,\n    theme,\n  ])\n\n  return {\n    columns,\n  }\n}\n\nexport default useColumnLoader\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { GridCell } from \"@glideapps/glide-data-grid\"\n\nimport {\n  isNullOrUndefined,\n  notNullOrUndefined,\n} from \"@streamlit/lib/src/util/utils\"\n\nimport { BaseColumn, isMissingValueCell } from \"./columns\"\nimport { INDEX_IDENTIFIER } from \"./hooks/useColumnLoader\"\n\n/**\n * Get the column name for a given column to use in the widget state.\n * This is either the column name or the index identifier for index columns.\n */\nexport function getColumnName(column: BaseColumn): string {\n  // TODO(lukasmasuch): We need to adapt this once we want to support multi-index columns.\n  return column.isIndex\n    ? INDEX_IDENTIFIER\n    : isNullOrUndefined(column.name)\n    ? \"\"\n    : column.name\n}\n\n/**\n * The editing state keeps track of all table edits applied by the user.\n */\nclass EditingState {\n  // row -> column -> GridCell\n  // Using [number, number] as a key for a Map would not work.\n  private editedCells: Map<number, Map<number, GridCell>> = new Map()\n\n  // List of rows represented by of column -> GridCell mappings\n  private addedRows: Array<Map<number, GridCell>> = []\n\n  // List of deleted row IDs\n  private deletedRows: number[] = []\n\n  // The original number of rows in the table (without potential additions & deletions)\n  private numRows = 0\n\n  constructor(numRows: number) {\n    this.numRows = numRows\n  }\n\n  /**\n   * Convert the current editing state to a JSON string.\n   *\n   * @param columns - The columns of the table\n   * @returns JSON string\n   */\n  toJson(columns: BaseColumn[]): string {\n    const columnsByIndex = new Map<number, BaseColumn>()\n    columns.forEach(column => {\n      columnsByIndex.set(column.indexNumber, column)\n    })\n\n    const currentState = {\n      // We use snake case here since this is the widget state\n      // that is sent and used in the backend. Therefore, it should\n      // conform with the Python naming conventions.\n      edited_rows: {} as Record<number, Record<string, any>>,\n      added_rows: [] as Record<string, any>[],\n      deleted_rows: [] as number[],\n    }\n\n    // Loop through all edited cells and transform into the structure\n    // we use for the JSON-compatible widget state:\n    // row position -> column name -> edited value\n    this.editedCells.forEach(\n      (row: Map<number, GridCell>, rowIndex: number, _map) => {\n        const editedRow: Record<string, any> = {}\n        row.forEach((cell: GridCell, colIndex: number, _map) => {\n          const column = columnsByIndex.get(colIndex)\n          if (column) {\n            editedRow[getColumnName(column)] = column.getCellValue(cell)\n          }\n        })\n        currentState.edited_rows[rowIndex] = editedRow\n      }\n    )\n\n    // Loop through all added rows and transform into the format that\n    // we use for the JSON-compatible widget state:\n    // List of column name -> edited value\n    this.addedRows.forEach((row: Map<number, GridCell>) => {\n      const addedRow: Record<string, any> = {}\n      // This flags is used to check if the row is incomplete\n      // (i.e. missing required values) and should therefore not be included in\n      // the current state version.\n      let isIncomplete = false\n      row.forEach((cell: GridCell, colIndex: number, _map) => {\n        const column = columnsByIndex.get(colIndex)\n        if (column) {\n          const cellValue = column.getCellValue(cell)\n\n          if (\n            column.isRequired &&\n            column.isEditable &&\n            isMissingValueCell(cell)\n          ) {\n            // If the cell is missing a required value, the row is incomplete\n            isIncomplete = true\n          }\n\n          if (notNullOrUndefined(cellValue)) {\n            addedRow[getColumnName(column)] = cellValue\n          }\n        }\n      })\n      if (!isIncomplete) {\n        currentState.added_rows.push(addedRow)\n      }\n    })\n\n    // The deleted rows don't need to be transformed\n    currentState.deleted_rows = this.deletedRows\n\n    // Convert undefined values to null, otherwise this is removed here since\n    // undefined does not exist in JSON.\n    const json = JSON.stringify(currentState, (_k, v) =>\n      v === undefined ? null : v\n    )\n    return json\n  }\n\n  /**\n   * Load the editing state from a JSON string.\n   *\n   * @param columns - The columns of the table\n   * @returns JSON string\n   */\n  fromJson(editingStateJson: string, columns: BaseColumn[]): void {\n    // Clear existing state:\n    this.editedCells = new Map()\n    this.addedRows = []\n    this.deletedRows = []\n\n    // Parse JSON editing string:\n    const editingState = JSON.parse(editingStateJson)\n    // Map columns to column index\n    const columnsByIndex = new Map<number, BaseColumn>()\n    columns.forEach(column => {\n      columnsByIndex.set(column.indexNumber, column)\n    })\n\n    // Map column name to columns\n    const columnsByName = new Map<string, BaseColumn>()\n    columns.forEach(column => {\n      columnsByName.set(getColumnName(column), column)\n    })\n\n    // Loop through all edited cells and transform into the structure\n    // we use for the editing state:\n    // row -> column -> GridCell\n    Object.keys(editingState.edited_rows).forEach(key => {\n      const rowIndex = Number(key)\n      const editedRow = editingState.edited_rows[key]\n      Object.keys(editedRow).forEach((colName: string) => {\n        const cellValue = editedRow[colName]\n        const column = columnsByName.get(colName)\n        if (column) {\n          const cell = column.getCell(cellValue)\n          if (cell) {\n            if (!this.editedCells.has(rowIndex)) {\n              this.editedCells.set(rowIndex, new Map())\n            }\n            this.editedCells.get(rowIndex)?.set(column.indexNumber, cell)\n          }\n        }\n      })\n    })\n\n    // Loop through all added rows and transform into the format that\n    // we use for the editing state:\n    // List of column index -> edited value\n    editingState.added_rows.forEach((row: Record<string, any>) => {\n      const addedRow: Map<number, GridCell> = new Map()\n      // Initialize all columns with null (empty) values first\n      // This is necessary to ensure that all columns are present in the added row.\n      // We will overwrite the empty values with the actual values below\n      // if the actual value exists. We need to do this since we are only\n      // putting none-empty values in the widget state for optimization reasons.\n      columns.forEach(column => {\n        addedRow.set(column.indexNumber, column.getCell(null))\n      })\n\n      // Set the cells that were actually edited in the row\n      Object.keys(row).forEach(colName => {\n        const cellValue = row[colName]\n\n        const column = columnsByName.get(colName)\n\n        if (column) {\n          const cell = column.getCell(cellValue)\n          if (cell) {\n            addedRow.set(column.indexNumber, cell)\n          }\n        }\n      })\n      this.addedRows.push(addedRow)\n    })\n\n    // The deleted rows don't need to be transformed\n    this.deletedRows = editingState.deleted_rows\n  }\n\n  /**\n   * Returns true if the given row was added by the user through the UI.\n   */\n  isAddedRow(row: number): boolean {\n    return row >= this.numRows\n  }\n\n  /**\n   * Returns the cell at the given column and row,\n   * in case the cell was edited or added.\n   *\n   * @param col - The column index\n   * @param row - The row index\n   *\n   * @returns The edited cell at the given column and row\n   */\n  getCell(col: number, row: number): GridCell | undefined {\n    if (this.isAddedRow(row)) {\n      // Added rows have their own editing state\n      return this.addedRows[row - this.numRows].get(col)\n    }\n\n    const rowCache = this.editedCells.get(row)\n    if (rowCache === undefined) {\n      return undefined\n    }\n\n    return rowCache.get(col)\n  }\n\n  /**\n   * Adds a cell to the editing state for the given column and row index.\n   *\n   * @param col - The column index\n   * @param row - The row index\n   * @param cell - The cell to add to the editing state\n   */\n  setCell(col: number, row: number, cell: GridCell): void {\n    if (this.isAddedRow(row)) {\n      if (row - this.numRows >= this.addedRows.length) {\n        // Added row does not exist. This is only expected to happen\n        // in relation to a trailing row issue in glide-data-grid.\n        return\n      }\n      // Added rows have their own editing state\n      this.addedRows[row - this.numRows].set(col, cell)\n    } else {\n      if (this.editedCells.get(row) === undefined) {\n        this.editedCells.set(row, new Map())\n      }\n\n      const rowCache = this.editedCells.get(row) as Map<number, GridCell>\n      rowCache.set(col, cell)\n    }\n  }\n\n  /**\n   * Adds a new row to the editing state.\n   *\n   * @param rowCells - The cells of the row to add\n   */\n  addRow(rowCells: Map<number, GridCell>): void {\n    this.addedRows.push(rowCells)\n  }\n\n  /**\n   * Deletes the given rows from the editing state.\n   *\n   * @param rows - The rows to delete\n   */\n  deleteRows(rows: number[]): void {\n    // Delete row one by one starting from the row with the highest index\n    rows\n      .sort((a, b) => b - a)\n      .forEach(row => {\n        this.deleteRow(row)\n      })\n  }\n\n  /**\n   * Deletes the given row from the editing state.\n   *\n   * @param row - The row to delete\n   */\n  deleteRow(row: number): void {\n    if (isNullOrUndefined(row) || row < 0) {\n      // This should never happen\n      return\n    }\n\n    if (this.isAddedRow(row)) {\n      // Remove from added rows:\n      this.addedRows.splice(row - this.numRows, 1)\n      // there is nothing more we have to do\n      return\n    }\n\n    if (!this.deletedRows.includes(row)) {\n      // Add to the set\n      this.deletedRows.push(row)\n      // Sort the deleted rows (important for calculation of the original row index)\n      this.deletedRows = this.deletedRows.sort((a, b) => a - b)\n    }\n\n    // Remove all cells from cell state associated with this row:\n    this.editedCells.delete(row)\n  }\n\n  /**\n   * Returns the original row index of the given row.\n   * Since the user can delete rows, the original row index and the\n   * current one can diverge.\n   *\n   * @param row - The row index from the current state\n   *\n   * @returns The original row index\n   */\n  getOriginalRowIndex(row: number): number {\n    // Just count all deleted rows before this row to determine the original row index:\n    let originalIndex = row\n    for (let i = 0; i < this.deletedRows.length; i++) {\n      if (this.deletedRows[i] > originalIndex) {\n        break\n      }\n      originalIndex += 1\n    }\n    return originalIndex\n  }\n\n  /**\n   * Returns the total number of rows of the current state.\n   */\n  getNumRows(): number {\n    return this.numRows + this.addedRows.length - this.deletedRows.length\n  }\n}\n\nexport default EditingState\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from \"react\"\n\nimport { useTheme } from \"@emotion/react\"\nimport { Theme as GlideTheme, SpriteMap } from \"@glideapps/glide-data-grid\"\nimport { transparentize } from \"color2k\"\n\nimport { convertRemToPx, EmotionTheme } from \"@streamlit/lib/src/theme\"\n\nexport type CustomGridTheme = {\n  // The theme configuration for the glide-data-grid\n  glideTheme: Partial<GlideTheme>\n  // The table border radius in pixels\n  tableBorderRadius: string\n  // The table border size in pixels\n  tableBorderWidth: number\n  // The default table height in pixels\n  defaultTableHeight: number\n  // Configure custom SVG icons used in the column header:\n  headerIcons: SpriteMap\n  // Min column width in pixels used for manual and automatic resizing\n  minColumnWidth: number\n  // Max column width in pixels used for manual resizing\n  maxColumnWidth: number\n  // Max column width in pixels used for automatic column sizing\n  maxColumnAutoWidth: number\n  // The default row height in pixels\n  defaultRowHeight: number\n  // The default header height in pixels\n  defaultHeaderHeight: number\n}\n\n/**\n * Creates a glide-data-grid compatible theme based on our theme configuration.\n *\n * @return a glide-data-grid compatible theme.\n */\nfunction useCustomTheme(): Readonly<CustomGridTheme> {\n  const theme: EmotionTheme = useTheme()\n\n  const gridTheme: CustomGridTheme = React.useMemo<CustomGridTheme>(() => {\n    const headerIcons = {\n      // Material design icon `edit_note`:\n      // https://fonts.google.com/icons?selected=Material%20Symbols%20Outlined%3Aedit_note%3AFILL%400%3Bwght%40400%3BGRAD%400%3Bopsz%4048\n      // We need to provide this as string as explained explained here: https://github.com/glideapps/glide-data-grid/blob/main/packages/core/API.md#headericons\n      editable: (p: { bgColor: string }) =>\n        `<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"40\" viewBox=\"0 96 960 960\" width=\"40\" fill=\"${p.bgColor}\"><path d=\"m800.641 679.743-64.384-64.384 29-29q7.156-6.948 17.642-6.948 10.485 0 17.742 6.948l29 29q6.948 7.464 6.948 17.95 0 10.486-6.948 17.434l-29 29Zm-310.64 246.256v-64.383l210.82-210.821 64.384 64.384-210.821 210.82h-64.383Zm-360-204.872v-50.254h289.743v50.254H130.001Zm0-162.564v-50.255h454.615v50.255H130.001Zm0-162.307v-50.255h454.615v50.255H130.001Z\"/></svg>`,\n    }\n\n    const glideTheme = {\n      // Explanations: https://github.com/glideapps/glide-data-grid/blob/main/packages/core/API.md#theme\n      accentColor: theme.colors.primary,\n      accentFg: theme.colors.white,\n      accentLight: transparentize(theme.colors.primary, 0.9),\n      borderColor: theme.colors.borderColorLight,\n      horizontalBorderColor: theme.colors.borderColorLight,\n      fontFamily: theme.genericFonts.bodyFont,\n      bgSearchResult: transparentize(theme.colors.primary, 0.9),\n      resizeIndicatorColor: theme.colors.primary,\n      // Header styling:\n      bgIconHeader: theme.colors.fadedText60,\n      fgIconHeader: theme.colors.white,\n      bgHeader: theme.colors.bgMix,\n      bgHeaderHasFocus: theme.colors.secondaryBg,\n      bgHeaderHovered: theme.colors.secondaryBg,\n      textHeader: theme.colors.fadedText60,\n      textHeaderSelected: theme.colors.white,\n      textGroupHeader: theme.colors.fadedText60,\n      headerFontStyle: `${theme.fontSizes.sm}`,\n      // Cell styling:\n      baseFontStyle: theme.fontSizes.sm,\n      editorFontSize: theme.fontSizes.sm,\n      textDark: theme.colors.bodyText,\n      textMedium: transparentize(theme.colors.bodyText, 0.2),\n      textLight: theme.colors.fadedText40,\n      textBubble: theme.colors.fadedText60,\n      bgCell: theme.colors.bgColor,\n      // uses same as bgCell to always have the same background color:\n      bgCellMedium: theme.colors.bgColor,\n      cellHorizontalPadding: Math.round(convertRemToPx(theme.spacing.sm)),\n      cellVerticalPadding: Math.round(convertRemToPx(\"0.1875rem\")),\n      // Special cells:\n      bgBubble: theme.colors.secondaryBg,\n      bgBubbleSelected: theme.colors.secondaryBg,\n      linkColor: theme.colors.linkText,\n      drilldownBorder: theme.colors.darkenedBgMix25,\n      // Unused settings:\n      // lineHeight\n      // headerIconSize: number;\n      // markerFontStyle: string;\n      // resizeIndicatorColor?: string;\n      // headerBottomBorderColor?: string;\n    }\n\n    return {\n      glideTheme,\n      tableBorderRadius: theme.radii.default,\n      tableBorderWidth: 1,\n      // glide-data-grid can only handle integer pixel values:\n      defaultTableHeight: Math.round(convertRemToPx(\"25rem\")),\n      minColumnWidth: Math.round(convertRemToPx(\"3.125rem\")),\n      maxColumnWidth: Math.round(convertRemToPx(\"62.5rem\")),\n      maxColumnAutoWidth: Math.round(convertRemToPx(\"31.25rem\")),\n      defaultRowHeight: Math.round(convertRemToPx(\"2.1875rem\")),\n      defaultHeaderHeight: Math.round(convertRemToPx(\"2.1875rem\")),\n      headerIcons,\n    }\n  }, [theme])\n\n  return gridTheme\n}\n\nexport default useCustomTheme\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\"\n\nimport { DataEditorProps, GridCell } from \"@glideapps/glide-data-grid\"\n\nimport { getCellFromArrow } from \"@streamlit/lib/src/components/widgets/DataFrame/arrowUtils\"\nimport {\n  BaseColumn,\n  getErrorCell,\n} from \"@streamlit/lib/src/components/widgets/DataFrame/columns\"\nimport EditingState from \"@streamlit/lib/src/components/widgets/DataFrame/EditingState\"\nimport { Quiver } from \"@streamlit/lib/src/dataframes/Quiver\"\nimport { notNullOrUndefined } from \"@streamlit/lib/src/util/utils\"\n\ntype DataLoaderReturn = Pick<DataEditorProps, \"getCellContent\">\n\n/**\n * Custom hook that handles all data loading capabilities for the interactive data table.\n * This also includes the logic to load and configure columns.\n *\n * @param data - The Arrow data extracted from the proto message\n * @param numRows - The number of rows of the current state (includes row additions/deletions)\n * @param editingState - The editing state of the data editor\n *\n * @returns the columns and the cell content getter compatible with glide-data-grid.\n */\nfunction useDataLoader(\n  data: Quiver,\n  columns: BaseColumn[],\n  numRows: number,\n  editingState: React.MutableRefObject<EditingState>\n): DataLoaderReturn {\n  // data.columns refers to the header rows (not sure about why it is named this way)\n  const numHeaderRows = data.columns.length\n  const getCellContent = React.useCallback(\n    ([col, row]: readonly [number, number]): GridCell => {\n      if (col > columns.length - 1) {\n        return getErrorCell(\n          \"Column index out of bounds.\",\n          \"This should never happen. Please report this bug.\"\n        )\n      }\n\n      if (row > numRows - 1) {\n        return getErrorCell(\n          \"Row index out of bounds.\",\n          \"This should never happen. Please report this bug.\"\n        )\n      }\n      const column = columns[col]\n\n      const originalCol = column.indexNumber\n      const originalRow = editingState.current.getOriginalRowIndex(row)\n      const isAddedRow = editingState.current.isAddedRow(originalRow)\n      // Use editing state if editable or if it is an appended row\n      if (column.isEditable || isAddedRow) {\n        const editedCell = editingState.current.getCell(\n          originalCol,\n          originalRow\n        )\n        if (notNullOrUndefined(editedCell)) {\n          return editedCell\n        } else if (isAddedRow) {\n          // This is not expected to happen. All cells to added rows should\n          // be defined. If not, we return a specific error cell.\n          return getErrorCell(\n            \"Error during cell creation.\",\n            \"This should never happen. Please report this bug. \" +\n              `No cell found for an added row: col=${originalCol}; row=${originalRow}`\n          )\n        }\n      }\n\n      try {\n        // We skip all header rows to get to to the actual data rows.\n        // in th Arrow data.\n        const arrowCell = data.getCell(\n          originalRow + numHeaderRows,\n          originalCol\n        )\n        return getCellFromArrow(column, arrowCell, data.cssStyles)\n      } catch (error) {\n        return getErrorCell(\n          \"Error during cell creation.\",\n          `This should never happen. Please report this bug. \\nError: ${error}`\n        )\n      }\n    },\n    [columns, numRows, data, editingState, numHeaderRows]\n  )\n\n  return {\n    getCellContent,\n  }\n}\n\nexport default useDataLoader\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// TODO: fix incorrect hook usage and delete this lint suppression\n// TODO: Update to match React best practices\n// eslint-disable-next-line react-compiler/react-compiler\n/* eslint-disable react-hooks/exhaustive-deps */\n\nimport React from \"react\"\n\nimport { Size as ResizableSize } from \"re-resizable\"\n\nimport { Arrow as ArrowProto } from \"@streamlit/lib/src/proto\"\nimport { notNullOrUndefined } from \"@streamlit/lib/src/util/utils\"\n\nimport { CustomGridTheme } from \"./useCustomTheme\"\n\nexport type AutoSizerReturn = {\n  // The minimum height that the data grid can be resized to\n  minHeight: number\n  // The maximum height of the data grid can be resized to\n  maxHeight: number\n  // The minimum width of the data grid can be resized to\n  minWidth: number\n  // The maximum width of the data grid can be resized to\n  maxWidth: number\n  // The row height of the data grid\n  rowHeight: number\n  // The current (or initial) size of the data grid\n  resizableSize: ResizableSize\n  // A callback function to change the size of the data grid.\n  setResizableSize: React.Dispatch<React.SetStateAction<ResizableSize>>\n}\n\n/**\n * A custom React hook that manages all aspects related to the size of the table.\n *\n * @param element - The ArrowProto element\n * @param numRows - The number of rows in the table\n * @param usesGroupRow - Whether the table uses a group row to display multiple column headers.\n * @param containerWidth - The width of the surrounding container\n * @param containerHeight - The height of the surrounding container\n * @param isFullScreen - Whether the table is in fullscreen mode\n *\n * @returns The row height, min/max height & width, and the current size of the resizable container.\n */\nfunction useTableSizer(\n  element: ArrowProto,\n  gridTheme: CustomGridTheme,\n  numRows: number,\n  usesGroupRow: boolean,\n  containerWidth: number,\n  containerHeight?: number,\n  isFullScreen?: boolean\n): AutoSizerReturn {\n  const rowHeight = gridTheme.defaultRowHeight\n  // Min height for the resizable table container:\n  // Based on header + one column, and border threshold\n  const minHeight =\n    gridTheme.defaultHeaderHeight + rowHeight + 2 * gridTheme.tableBorderWidth\n\n  // Group row + column header row\n  const numHeaderRows = usesGroupRow ? 2 : 1\n  const numTrailingRows =\n    element.editingMode === ArrowProto.EditingMode.DYNAMIC ? 1 : 0\n  // Calculate the maximum height of the table based on the number of rows:\n  const totalDataRows = numRows + numTrailingRows\n  let maxHeight = Math.max(\n    totalDataRows * rowHeight +\n      numHeaderRows * gridTheme.defaultHeaderHeight +\n      2 * gridTheme.tableBorderWidth,\n    minHeight\n  )\n\n  // The initial height is either the default table height or the maximum\n  // (full) height based if its smaller than the default table height.\n  // The reason why we have initial height is that the table itself is\n  // resizable by the user. So, it starts with initial height but can be\n  // resized between min and max height.\n  let initialHeight = Math.min(maxHeight, gridTheme.defaultTableHeight)\n\n  if (element.height) {\n    // User has explicitly configured a height\n    initialHeight = Math.max(element.height, minHeight)\n    maxHeight = Math.max(element.height, maxHeight)\n  }\n\n  if (containerHeight) {\n    // If container height is set (e.g. when used in fullscreen)\n    // The maxHeight and height should not be larger than container height\n    initialHeight = Math.min(initialHeight, containerHeight)\n    maxHeight = Math.min(maxHeight, containerHeight)\n\n    if (!element.height) {\n      // If no explicit height is set, set height to max height (fullscreen mode)\n      initialHeight = maxHeight\n    }\n  }\n\n  // Min width for the resizable table container:\n  // Based on one column at minimum width + borders\n  const minWidth = gridTheme.minColumnWidth + 2 * gridTheme.tableBorderWidth\n  // The available width should be at least the minimum table width\n  // to prevent \"maximum update depth exceeded\" error. The reason\n  // is that the container width can be -1 in some edge cases\n  // caused by the resize observer in the Block component.\n  // This can trigger the \"maximum update depth exceeded\" error\n  // within the grid component.\n  const availableWidth = Math.max(containerWidth, minWidth)\n\n  // The initial width of the data grid.\n  // If not set, the data grid will be auto adapted to its content.\n  // The reason why we have initial width is that the data grid itself\n  // is resizable by the user. It starts with initial width but can be\n  // resized between min and max width.\n  let initialWidth: number | undefined\n  // The maximum width of the data grid can be resized to.\n  let maxWidth = availableWidth\n\n  if (element.useContainerWidth) {\n    // If user has set use_container_width,\n    // use the full container (available) width.\n    initialWidth = availableWidth\n  } else if (element.width) {\n    // The user has explicitly configured a width\n    // use it but keep between the MIN_TABLE_WIDTH\n    // and the available width.\n    initialWidth = Math.min(Math.max(element.width, minWidth), availableWidth)\n    // Make sure that the max width we configure is between the user\n    // configured width and the available (container) width.\n    maxWidth = Math.min(Math.max(element.width, maxWidth), availableWidth)\n  }\n\n  const [resizableSize, setResizableSize] = React.useState<ResizableSize>({\n    // If user hasn't specified a width via `width` or `use_container_width`,\n    // we configure the table to 100%. Which will cause the data grid to\n    // calculate the best size on the content and use that.\n    width: initialWidth || \"100%\",\n    height: initialHeight,\n  })\n\n  React.useLayoutEffect(() => {\n    // This prevents weird table resizing behavior if the container width\n    // changes and the table uses the full container width.\n    if (element.useContainerWidth && resizableSize.width === \"100%\") {\n      setResizableSize({\n        width: availableWidth,\n        height: resizableSize.height,\n      })\n    }\n  }, [availableWidth])\n\n  // Reset the height if the number of rows changes (e.g. via add_rows):\n  React.useLayoutEffect(() => {\n    setResizableSize({\n      width: resizableSize.width,\n      height: initialHeight,\n    })\n  }, [numRows])\n\n  // Reset the width if the element width parameter was changed:\n  React.useLayoutEffect(() => {\n    setResizableSize({\n      width: initialWidth || \"100%\",\n      height: resizableSize.height,\n    })\n  }, [initialWidth])\n\n  // Reset the height if the element height parameter was changed:\n  React.useLayoutEffect(() => {\n    setResizableSize({\n      width: resizableSize.width,\n      height: initialHeight,\n    })\n  }, [initialHeight])\n\n  // Change sizing if the fullscreen mode is activated or deactivated:\n  React.useLayoutEffect(() => {\n    if (isFullScreen) {\n      const stretchColumns: boolean =\n        element.useContainerWidth ||\n        (notNullOrUndefined(element.width) && element.width > 0)\n      setResizableSize({\n        width: stretchColumns ? maxWidth : \"100%\",\n        height: maxHeight,\n      })\n    } else {\n      setResizableSize({\n        width: initialWidth || \"100%\",\n        height: initialHeight,\n      })\n    }\n  }, [isFullScreen])\n\n  return {\n    minHeight,\n    maxHeight,\n    minWidth,\n    maxWidth,\n    rowHeight,\n    resizableSize,\n    setResizableSize,\n  }\n}\n\nexport default useTableSizer\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\"\n\nimport {\n  DataEditorProps,\n  EditableGridCell,\n  GridCell,\n  GridSelection,\n  Item,\n  ValidatedGridCell,\n} from \"@glideapps/glide-data-grid\"\n\nimport { logWarning } from \"@streamlit/lib/src/util/log\"\nimport { notNullOrUndefined } from \"@streamlit/lib/src/util/utils\"\nimport {\n  BaseColumn,\n  isErrorCell,\n} from \"@streamlit/lib/src/components/widgets/DataFrame/columns\"\nimport EditingState from \"@streamlit/lib/src/components/widgets/DataFrame/EditingState\"\n\n/**\n * Create return type for useDataLoader hook based on the DataEditorProps.\n */\ntype DataEditorReturn = Pick<\n  DataEditorProps,\n  \"onCellEdited\" | \"onPaste\" | \"onRowAppended\" | \"onDelete\" | \"validateCell\"\n>\n\n/**\n * Custom hook to handle all aspects related to data editing. This includes editing cells,\n * pasting from clipboard, and appending & deleting rows.\n *\n * @param columns - The columns of the table.\n * @param fixedNumRows - Whether the number of rows is fixed. This means that rows cannot be added or deleted.\n * @param editingState - The editing state of the data editor.\n * @param getCellContent - Function to get a specific cell.\n * @param getOriginalIndex - Function to map a row ID of the current state to the original row ID.\n *                           This mainly changed by sorting of columns.\n * @param updateNumRows - Callback to sync the number of rows from editing state with the component state.\n * @param refreshCells - Callback that allows to trigger a UI refresh of a selection of cells.\n * @param syncEditState - Callback that needs to be called on all edits. This will also trigger a rerun\n *                     and send widget state to the backend.\n *\n * @returns Glide-data-grid compatible functions for editing capabilities.\n */\nfunction useDataEditor(\n  columns: BaseColumn[],\n  fixedNumRows: boolean,\n  editingState: React.MutableRefObject<EditingState>,\n  getCellContent: ([col, row]: readonly [number, number]) => GridCell,\n  getOriginalIndex: (index: number) => number,\n  refreshCells: (\n    cells: {\n      cell: [number, number]\n    }[]\n  ) => void,\n  updateNumRows: () => void,\n  syncEditState: () => void,\n  clearSelection: () => void\n): DataEditorReturn {\n  const onCellEdited = React.useCallback(\n    (\n      [col, row]: readonly [number, number],\n      updatedCell: EditableGridCell\n    ): void => {\n      const column = columns[col]\n\n      if (!column.isEditable) {\n        return\n      }\n\n      const originalCol = column.indexNumber\n\n      // We need to apply two different mappings here. One for the case that\n      // the user has sorted a column, and another one from the editing state\n      // to get the correct row ID when the user has deleted rows.\n      const originalRow = editingState.current.getOriginalRowIndex(\n        getOriginalIndex(row)\n      )\n      const currentCell = getCellContent([col, row])\n      const currentValue = column.getCellValue(currentCell)\n      const newValue = column.getCellValue(updatedCell)\n      if (!isErrorCell(currentCell) && newValue === currentValue) {\n        // No editing is required since the values did not change\n        return\n      }\n\n      const newCell = column.getCell(newValue, true)\n      // Only update the cell if the new cell is not causing any errors:\n      if (!isErrorCell(newCell)) {\n        editingState.current.setCell(originalCol, originalRow, {\n          ...newCell,\n          lastUpdated: performance.now(),\n        })\n\n        syncEditState()\n      } else {\n        logWarning(\n          `Not applying the cell edit since it causes this error:\\n ${newCell.data}`\n        )\n      }\n    },\n    [columns, editingState, getOriginalIndex, getCellContent, syncEditState]\n  )\n\n  /**\n   * Appends a new empty row to the end of the table.\n   */\n  const appendEmptyRow = React.useCallback(() => {\n    if (fixedNumRows) {\n      // Appending rows is not supported\n      return\n    }\n\n    const newRow: Map<number, GridCell> = new Map()\n    columns.forEach(column => {\n      // For the default value, we trust the developer to make a valid choice,\n      // so we do not validate the value here.\n      newRow.set(column.indexNumber, column.getCell(column.defaultValue))\n    })\n    editingState.current.addRow(newRow)\n    updateNumRows()\n  }, [columns, editingState, fixedNumRows, updateNumRows])\n\n  /**\n   * Callback used by glide-data-grid when the user adds a new row in the table UI.\n   */\n  const onRowAppended = React.useCallback(() => {\n    if (fixedNumRows) {\n      // Appending rows is not supported\n      return\n    }\n\n    appendEmptyRow()\n    syncEditState()\n  }, [appendEmptyRow, syncEditState, fixedNumRows])\n\n  /**\n   * Callback used by glide-data-grid when the user deletes a row or cell value in the table UI.\n   */\n  const onDelete = React.useCallback(\n    (selection: GridSelection): GridSelection | boolean => {\n      if (selection.rows.length > 0) {\n        // User has selected one or more rows\n        if (fixedNumRows) {\n          // Deleting rows is not supported\n          return true\n        }\n\n        const rowsToDelete = selection.rows.toArray().map(row => {\n          return editingState.current.getOriginalRowIndex(\n            getOriginalIndex(row)\n          )\n        })\n        // We need to delete all rows at once, so that the indexes work correct\n        editingState.current.deleteRows(rowsToDelete)\n        updateNumRows()\n        clearSelection()\n        syncEditState()\n        return false\n      }\n      if (selection.current?.range) {\n        // User has selected one or more cells\n        const updatedCells: { cell: [number, number] }[] = []\n        const selectedArea = selection.current.range\n        for (\n          let row = selectedArea.y;\n          row < selectedArea.y + selectedArea.height;\n          row++\n        ) {\n          for (\n            let col = selectedArea.x;\n            col < selectedArea.x + selectedArea.width;\n            col++\n          ) {\n            const column = columns[col]\n            // Only allow deletion if the column is editable and not configured as required\n            if (column.isEditable && !column.isRequired) {\n              updatedCells.push({\n                cell: [col, row],\n              })\n              onCellEdited(\n                [col, row],\n                column.getCell(null) as EditableGridCell\n              )\n            }\n          }\n        }\n\n        if (updatedCells.length > 0) {\n          syncEditState()\n          refreshCells(updatedCells)\n        }\n        return false\n      }\n      return true\n    },\n    [\n      columns,\n      editingState,\n      fixedNumRows,\n      refreshCells,\n      getOriginalIndex,\n      syncEditState,\n      onCellEdited,\n      clearSelection,\n      updateNumRows,\n    ]\n  )\n\n  /**\n   * Callback used by glide-data-grid when the user pastes data into the table.\n   */\n  const onPaste = React.useCallback(\n    (target: Item, values: readonly (readonly string[])[]): boolean => {\n      const [targetCol, targetRow] = target\n\n      const updatedCells: { cell: [number, number] }[] = []\n\n      for (let row = 0; row < values.length; row++) {\n        const rowData = values[row]\n        if (row + targetRow >= editingState.current.getNumRows()) {\n          if (fixedNumRows) {\n            // Only add new rows if editing mode is dynamic, otherwise break here\n            break\n          }\n          // Adding rows during paste would not work currently. However, we already disallow\n          // sorting in dynamic mode, so we don't have to do anything here.\n          appendEmptyRow()\n        }\n        for (let col = 0; col < rowData.length; col++) {\n          const pasteDataValue = rowData[col]\n\n          const rowIndex = row + targetRow\n          const colIndex = col + targetCol\n\n          if (colIndex >= columns.length) {\n            // We could potentially add new columns here in the future.\n            break\n          }\n\n          const column = columns[colIndex]\n          // Only add to columns that are editable:\n          if (column.isEditable) {\n            const newCell = column.getCell(pasteDataValue, true)\n\n            // We are not editing cells if the pasted value leads to an error:\n            if (notNullOrUndefined(newCell) && !isErrorCell(newCell)) {\n              const originalCol = column.indexNumber\n              const originalRow = editingState.current.getOriginalRowIndex(\n                getOriginalIndex(rowIndex)\n              )\n              const currentValue = column.getCellValue(\n                getCellContent([colIndex, rowIndex])\n              )\n              const newValue = column.getCellValue(newCell)\n              // Edit the cell only if the value actually changed:\n              if (newValue !== currentValue) {\n                editingState.current.setCell(originalCol, originalRow, {\n                  ...newCell,\n                  lastUpdated: performance.now(),\n                })\n\n                updatedCells.push({\n                  cell: [colIndex, rowIndex],\n                })\n              }\n            }\n          }\n        }\n\n        if (updatedCells.length > 0) {\n          syncEditState()\n          refreshCells(updatedCells)\n        }\n      }\n\n      return false\n    },\n    [\n      columns,\n      editingState,\n      fixedNumRows,\n      getOriginalIndex,\n      getCellContent,\n      appendEmptyRow,\n      syncEditState,\n      refreshCells,\n    ]\n  )\n\n  /**\n   * Callback used by glide-data-grid to validate the data inputted into a cell by the user.\n   */\n  const validateCell = React.useCallback(\n    (cell: Item, newValue: EditableGridCell) => {\n      const col = cell[0]\n      if (col >= columns.length) {\n        // This should never happen.\n        // But we return true (default) to avoid any unknown issues.\n        return true\n      }\n\n      const column = columns[col]\n      if (column.validateInput) {\n        // We get the actual raw value of the new cell and\n        // validate it based on the column validateInput implementation:\n        const validationResult = column.validateInput(\n          column.getCellValue(newValue)\n        )\n        if (validationResult === true || validationResult === false) {\n          // Only return if the validation result is a valid boolean value (true or false)\n          // validationResult can also be other values, so we need to check this specifically.\n          return validationResult\n        }\n        // If it is any other value, we return it as a corrected cell:\n        return column.getCell(validationResult) as ValidatedGridCell\n      }\n      // If no validation is implemented, we accept the value:\n      return true\n    },\n    [columns]\n  )\n\n  return {\n    onCellEdited,\n    onPaste,\n    onRowAppended,\n    onDelete,\n    validateCell,\n  }\n}\n\nexport default useDataEditor\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState } from \"react\"\n\nimport { DataEditorProps, GridColumn } from \"@glideapps/glide-data-grid\"\n\ntype ColumnSizerReturn = Pick<DataEditorProps, \"columns\" | \"onColumnResize\">\n\n/**\n * Hook to manage the interactive column resizing capabilities.\n *\n * @param columns - The columns of the table.\n *\n * @returns An object containing the following properties:\n * - columns: The updated list of columns.\n * - onColumnResize: The callback function to be called when a column is resized.\n */\nfunction useColumnSizer(columns: GridColumn[]): ColumnSizerReturn {\n  // The columns with the corresponding empty template for every type:\n  const [columnSizes, setColumnSizes] = useState<Map<string, number>>(\n    () => new Map()\n  )\n\n  const onColumnResize = React.useCallback(\n    (\n      column: GridColumn,\n      _newSize: number,\n      _colIndex: number,\n      newSizeWithGrow: number\n    ) => {\n      if (column.id) {\n        setColumnSizes(new Map(columnSizes).set(column.id, newSizeWithGrow))\n      }\n    },\n    [columnSizes]\n  )\n\n  const sizedColumns = React.useMemo(() => {\n    return columns.map(column => {\n      if (\n        column.id &&\n        columnSizes.has(column.id) &&\n        columnSizes.get(column.id) !== undefined\n      ) {\n        return {\n          ...column,\n          width: columnSizes.get(column.id),\n          // Deactivate grow whenever a column gets manually resized\n          grow: 0,\n        } as GridColumn\n      }\n      return column\n    })\n  }, [columns, columnSizes])\n\n  return {\n    columns: sizedColumns,\n    onColumnResize,\n  }\n}\n\nexport default useColumnSizer\n","import { GridCellKind } from \"@glideapps/glide-data-grid\";\nimport range from \"lodash/range.js\";\nimport * as React from \"react\";\nfunction cellToSortData(c) {\n    switch (c.kind) {\n        case GridCellKind.Number:\n            return c.data?.toString() ?? \"\";\n        case GridCellKind.Boolean:\n            return c.data?.toString() ?? \"\";\n        case GridCellKind.Markdown:\n        case GridCellKind.RowID:\n        case GridCellKind.Text:\n        case GridCellKind.Uri:\n            return c.data ?? \"\";\n        case GridCellKind.Bubble:\n        case GridCellKind.Image:\n            return c.data.join(\"\");\n        case GridCellKind.Drilldown:\n            return c.data.map(x => x.text).join(\"\");\n        case GridCellKind.Protected:\n        case GridCellKind.Loading:\n            return \"\";\n        case GridCellKind.Custom:\n            return c.copyData;\n    }\n}\nfunction tryParse(val) {\n    if (typeof val === \"number\")\n        return val;\n    if (val.length > 0) {\n        const x = Number(val);\n        if (!isNaN(x)) {\n            val = x;\n        }\n    }\n    return val;\n}\nexport function compareSmart(a, b) {\n    a = tryParse(a);\n    b = tryParse(b);\n    if (typeof a === \"string\" && typeof b === \"string\") {\n        return a.localeCompare(b);\n    }\n    else if (typeof a === \"number\" && typeof b === \"number\") {\n        if (a === b)\n            return 0;\n        return a > b ? 1 : -1;\n    }\n    else if (a == b) {\n        return 0;\n    }\n    return a > b ? 1 : -1;\n}\nexport function compareRaw(a, b) {\n    if (a > b)\n        return 1;\n    if (a === b)\n        return 0;\n    return -1;\n}\nexport function useColumnSort(p) {\n    const { sort, rows, getCellContent: getCellContentIn } = p;\n    let sortCol = sort === undefined\n        ? undefined\n        : p.columns.findIndex(c => sort.column === c || (c.id !== undefined && sort.column.id === c.id));\n    if (sortCol === -1)\n        sortCol = undefined;\n    // This scales to about 100k rows. Beyond that things take a pretty noticeable amount of time\n    // The performance \"issue\" from here on out seems to be the lookup to get the value. Not sure\n    // what to do there. We need the indirection to produce the final sort map. Perhaps someone\n    // more clever than me will wander in and save most of that time.\n    const dir = sort?.direction ?? \"asc\";\n    const sortMap = React.useMemo(() => {\n        if (sortCol === undefined)\n            return undefined;\n        const vals = new Array(rows);\n        const index = [sortCol, 0];\n        for (let i = 0; i < rows; i++) {\n            index[1] = i;\n            vals[i] = cellToSortData(getCellContentIn(index));\n        }\n        let result;\n        if (sort?.mode === \"raw\") {\n            result = range(rows).sort((a, b) => compareRaw(vals[a], vals[b]));\n        }\n        else if (sort?.mode === \"smart\") {\n            result = range(rows).sort((a, b) => compareSmart(vals[a], vals[b]));\n        }\n        else {\n            result = range(rows).sort((a, b) => vals[a].localeCompare(vals[b]));\n        }\n        if (dir === \"desc\") {\n            result.reverse();\n        }\n        return result;\n    }, [getCellContentIn, rows, sort?.mode, dir, sortCol]);\n    const getOriginalIndex = React.useCallback((index) => {\n        if (sortMap === undefined)\n            return index;\n        return sortMap[index];\n    }, [sortMap]);\n    const getCellContent = React.useCallback(([col, row]) => {\n        if (sortMap === undefined)\n            return getCellContentIn([col, row]);\n        row = sortMap[row];\n        return getCellContentIn([col, row]);\n    }, [getCellContentIn, sortMap]);\n    if (sortMap === undefined) {\n        return { getCellContent: p.getCellContent, getOriginalIndex };\n    }\n    return {\n        getOriginalIndex,\n        getCellContent,\n    };\n}\n//# sourceMappingURL=use-column-sort.js.map","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\"\n\nimport {\n  DataEditorProps,\n  GridCell,\n  GridColumn,\n} from \"@glideapps/glide-data-grid\"\nimport { useColumnSort as useGlideColumnSort } from \"@glideapps/glide-data-grid-source\"\n\nimport {\n  BaseColumn,\n  toGlideColumn,\n} from \"@streamlit/lib/src/components/widgets/DataFrame/columns\"\n\n/**\n * Configuration type for column sorting hook.\n */\ntype ColumnSortConfig = {\n  column: GridColumn\n  mode?: \"default\" | \"raw\" | \"smart\"\n  direction?: \"asc\" | \"desc\"\n}\n\n/**\n * Updates the column headers based on the sorting configuration.\n *\n * @param columns - The columns of the table.\n * @param sort - The current sorting configuration.\n *\n * @returns The updated list of columns.\n */\nfunction updateSortingHeader(\n  columns: BaseColumn[],\n  sort: ColumnSortConfig | undefined\n): BaseColumn[] {\n  if (sort === undefined) {\n    return columns\n  }\n  return columns.map(column => {\n    if (column.id === sort.column.id) {\n      return {\n        ...column,\n        title:\n          sort.direction === \"asc\" ? ` ${column.title}` : ` ${column.title}`,\n      }\n    }\n    return column\n  })\n}\n\ntype ColumnSortReturn = {\n  columns: BaseColumn[]\n  sortColumn: (index: number) => void\n  getOriginalIndex: (index: number) => number\n} & Pick<DataEditorProps, \"getCellContent\">\n\n/**\n * A React hook that provides column sorting functionality.\n *\n * @param numRows - The number of rows in the table.\n * @param columns - The columns of the table.\n *\n * @returns An object containing the following properties:\n * - `columns`: The updated list of columns.\n * - `sortColumn`: A function that sorts the column at the given index.\n * - `getOriginalIndex`: A function that returns the original index of the row at the given index.\n * - `getCellContent`: An updated function that returns the content of the cell at the given column and row indices.\n */\nfunction useColumnSort(\n  numRows: number,\n  columns: BaseColumn[],\n  getCellContent: ([col, row]: readonly [number, number]) => GridCell\n): ColumnSortReturn {\n  const [sort, setSort] = React.useState<ColumnSortConfig>()\n\n  const { getCellContent: getCellContentSorted, getOriginalIndex } =\n    useGlideColumnSort({\n      columns: columns.map(column => toGlideColumn(column)),\n      getCellContent,\n      rows: numRows,\n      sort,\n    })\n\n  const updatedColumns = React.useMemo(() => {\n    return updateSortingHeader(columns, sort)\n  }, [columns, sort])\n\n  const sortColumn = React.useCallback(\n    (index: number) => {\n      let sortDirection = \"asc\"\n      const clickedColumn = updatedColumns[index]\n\n      if (sort && sort.column.id === clickedColumn.id) {\n        // The clicked column is already sorted\n        if (sort.direction === \"asc\") {\n          // Sort column descending\n          sortDirection = \"desc\"\n        } else {\n          // Remove sorting of column\n          setSort(undefined)\n          return\n        }\n      }\n\n      setSort({\n        column: toGlideColumn(clickedColumn),\n        direction: sortDirection,\n        mode: clickedColumn.sortMode,\n      } as ColumnSortConfig)\n    },\n    [sort, updatedColumns]\n  )\n\n  return {\n    columns: updatedColumns,\n    sortColumn,\n    getOriginalIndex,\n    getCellContent: getCellContentSorted,\n  }\n}\n\nexport default useColumnSort\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\"\n\nimport {\n  DataEditorProps,\n  GridCell,\n  GridMouseEventArgs,\n} from \"@glideapps/glide-data-grid\"\n\nimport { notNullOrUndefined } from \"@streamlit/lib/src/util/utils\"\nimport {\n  BaseColumn,\n  hasTooltip,\n  isMissingValueCell,\n} from \"@streamlit/lib/src/components/widgets/DataFrame/columns\"\n\n// Debounce time for triggering the tooltip on hover.\nexport const DEBOUNCE_TIME_MS = 600\n// Tooltip message for required cells that are empty.\nexport const REQUIRED_CELL_TOOLTIP = \" Please fill out this cell.\"\n\nexport type TooltipsReturn = {\n  // The tooltip to show (if any):\n  tooltip: { content: string; left: number; top: number } | undefined\n  // A callback to clear the tooltip:\n  clearTooltip: () => void\n  // The glide-data-grid function that is called when a cell is hovered:\n} & Pick<DataEditorProps, \"onItemHovered\">\n\n/**\n * Hook that can show a tooltip when hovering over a cell or header if configured.\n *\n * The tooltip is shown after a delay, and is cleared when the user clicks outside,\n * fires escape, or moves outside of the target cell.\n *\n * @param columns columns of the datagrid\n * @param getCellContent function that returns the cell content for a given cell position\n * @returns the tooltip to show (if any), a callback to clear the tooltip, and the\n * onItemHovered callback to pass to the datagrid\n */\nfunction useTooltips(\n  columns: BaseColumn[],\n  getCellContent: ([col, row]: readonly [number, number]) => GridCell\n): TooltipsReturn {\n  const [tooltip, setTooltip] = React.useState<\n    { content: string; left: number; top: number } | undefined\n  >()\n  const timeoutRef = React.useRef<any>(null)\n\n  const onItemHovered = React.useCallback(\n    (args: GridMouseEventArgs) => {\n      // Always reset the tooltips on any change here\n      clearTimeout(timeoutRef.current)\n      timeoutRef.current = 0\n      setTooltip(undefined)\n\n      if ((args.kind === \"header\" || args.kind === \"cell\") && args.location) {\n        const colIdx = args.location[0]\n        const rowIdx = args.location[1]\n        let tooltipContent: string | undefined\n\n        if (colIdx < 0 || colIdx >= columns.length) {\n          // Ignore negative column index (Row index column)\n          // and column index that is out of bounds\n          return\n        }\n\n        const column = columns[colIdx]\n\n        if (args.kind === \"header\" && notNullOrUndefined(column)) {\n          tooltipContent = column.help\n        } else if (args.kind === \"cell\") {\n          // TODO(lukasmasuch): Ignore the last row if num_rows=dynamic (trailing row).\n\n          const cell = getCellContent([colIdx, rowIdx])\n          if (\n            column.isRequired &&\n            column.isEditable &&\n            isMissingValueCell(cell)\n          ) {\n            tooltipContent = REQUIRED_CELL_TOOLTIP\n          } else if (hasTooltip(cell)) {\n            tooltipContent = cell.tooltip\n          }\n        }\n\n        if (tooltipContent) {\n          timeoutRef.current = setTimeout(() => {\n            if (tooltipContent) {\n              setTooltip({\n                content: tooltipContent,\n                left: args.bounds.x + args.bounds.width / 2,\n                top: args.bounds.y,\n              })\n            }\n          }, DEBOUNCE_TIME_MS)\n        }\n      }\n    },\n    [columns, getCellContent, setTooltip, timeoutRef]\n  )\n\n  const clearTooltip = React.useCallback(() => {\n    setTooltip(undefined)\n  }, [setTooltip])\n\n  return {\n    tooltip,\n    clearTooltip,\n    onItemHovered,\n  }\n}\n\nexport default useTooltips\n","import { parseToRgba, GridCellKind } from \"@glideapps/glide-data-grid\";\nconst renderer = {\n    kind: GridCellKind.Custom,\n    isMatch: (cell) => cell.data.kind === \"sparkline-cell\",\n    needsHover: true,\n    needsHoverPosition: true,\n    draw: (args, cell) => {\n        const { ctx, theme, rect, hoverAmount, hoverX } = args;\n        // eslint-disable-next-line prefer-const\n        let { values, yAxis, color, graphKind = \"area\", displayValues, hideAxis } = cell.data;\n        const [minY, maxY] = yAxis;\n        if (values.length === 0)\n            return true;\n        values = values.map(x => Math.min(1, Math.max(0, (x - minY) / (maxY - minY))));\n        const padX = theme.cellHorizontalPadding;\n        const drawX = padX + rect.x;\n        const y = rect.y + 3;\n        const height = rect.height - 6;\n        const width = rect.width - padX * 2;\n        const delta = maxY - minY;\n        const zeroY = maxY <= 0 ? y : minY >= 0 ? y + height : y + height * (maxY / delta);\n        // draw zero\n        if (!hideAxis && minY <= 0 && maxY >= 0) {\n            ctx.beginPath();\n            ctx.moveTo(drawX, zeroY);\n            ctx.lineTo(drawX + width, zeroY);\n            ctx.globalAlpha = 0.4;\n            ctx.lineWidth = 1;\n            ctx.strokeStyle = theme.textLight;\n            ctx.stroke();\n            ctx.globalAlpha = 1;\n        }\n        if (graphKind === \"bar\") {\n            ctx.beginPath();\n            const margin = 2;\n            const spacing = (values.length - 1) * margin;\n            const barWidth = (width - spacing) / values.length;\n            let x = drawX;\n            for (const val of values) {\n                const barY = y + height - val * height;\n                ctx.moveTo(x, zeroY);\n                ctx.lineTo(x + barWidth, zeroY);\n                ctx.lineTo(x + barWidth, barY);\n                ctx.lineTo(x, barY);\n                x += barWidth + margin;\n            }\n            ctx.fillStyle = cell.data.color ?? theme.accentColor;\n            ctx.fill();\n        }\n        else {\n            if (values.length === 1) {\n                values = [values[0], values[0]];\n                if (displayValues) {\n                    displayValues = [displayValues[0], displayValues[0]];\n                }\n            }\n            // draw line\n            ctx.beginPath();\n            const xStep = (rect.width - 16) / (values.length - 1);\n            const points = values.map((val, ind) => {\n                return {\n                    x: drawX + xStep * ind,\n                    y: y + height - val * height,\n                };\n            });\n            ctx.moveTo(points[0].x, points[0].y);\n            let i = 0;\n            if (points.length > 2) {\n                for (i = 1; i < points.length - 2; i++) {\n                    const xControl = (points[i].x + points[i + 1].x) / 2;\n                    const yControl = (points[i].y + points[i + 1].y) / 2;\n                    ctx.quadraticCurveTo(points[i].x, points[i].y, xControl, yControl);\n                }\n            }\n            ctx.quadraticCurveTo(points[i].x, points[i].y, points[i + 1].x, points[i + 1].y);\n            ctx.strokeStyle = color ?? theme.accentColor;\n            ctx.lineWidth = 1 + hoverAmount * 0.5;\n            ctx.stroke();\n            ctx.lineTo(rect.x + rect.width - padX, zeroY);\n            ctx.lineTo(rect.x + padX, zeroY);\n            ctx.closePath();\n            if (graphKind === \"area\") {\n                ctx.globalAlpha = 0.2 + 0.2 * hoverAmount;\n                const grad = ctx.createLinearGradient(0, y, 0, y + height * 1.4);\n                grad.addColorStop(0, color ?? theme.accentColor);\n                const [r, g, b] = parseToRgba(color ?? theme.accentColor);\n                grad.addColorStop(1, `rgba(${r}, ${g}, ${b}, 0)`);\n                ctx.fillStyle = grad;\n                ctx.fill();\n                ctx.globalAlpha = 1;\n            }\n            if (hoverX !== undefined && (graphKind === \"line\" || graphKind === \"area\") && displayValues !== undefined) {\n                ctx.beginPath();\n                const closest = Math.min(values.length - 1, Math.max(0, Math.round((hoverX - padX) / xStep)));\n                ctx.moveTo(drawX + closest * xStep, rect.y + 1);\n                ctx.lineTo(drawX + closest * xStep, rect.y + rect.height);\n                ctx.lineWidth = 1;\n                ctx.strokeStyle = theme.textLight;\n                ctx.stroke();\n                ctx.save();\n                ctx.font = `8px ${theme.fontFamily}`;\n                ctx.fillStyle = theme.textMedium;\n                ctx.textBaseline = \"top\";\n                ctx.fillText(displayValues[closest], drawX, rect.y + theme.cellVerticalPadding);\n                ctx.restore();\n            }\n        }\n        return true;\n    },\n    provideEditor: () => undefined,\n    onPaste: (_v, d) => d,\n};\nexport default renderer;\n//# sourceMappingURL=sparkline-cell.js.map","export function roundedRect(ctx, x, y, width, height, radius) {\n    if (width <= 0 || height <= 0)\n        return;\n    if (typeof radius === \"number\" && radius <= 0) {\n        ctx.rect(x, y, width, height);\n        return;\n    }\n    if (typeof radius === \"number\") {\n        radius = { tl: radius, tr: radius, br: radius, bl: radius };\n    }\n    // restrict radius to a reasonable max\n    radius = {\n        tl: Math.min(radius.tl, height / 2, width / 2),\n        tr: Math.min(radius.tr, height / 2, width / 2),\n        bl: Math.min(radius.bl, height / 2, width / 2),\n        br: Math.min(radius.br, height / 2, width / 2),\n    };\n    radius.tl = Math.max(0, radius.tl);\n    radius.tr = Math.max(0, radius.tr);\n    radius.br = Math.max(0, radius.br);\n    radius.bl = Math.max(0, radius.bl);\n    ctx.moveTo(x + radius.tl, y);\n    ctx.arcTo(x + width, y, x + width, y + radius.tr, radius.tr);\n    ctx.arcTo(x + width, y + height, x + width - radius.br, y + height, radius.br);\n    ctx.arcTo(x, y + height, x, y + height - radius.bl, radius.bl);\n    ctx.arcTo(x, y, x + radius.tl, y, radius.tl);\n}\n//# sourceMappingURL=draw-fns.js.map","import defineProperty from \"./defineProperty.js\";\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread2(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nexport { _objectSpread2 as default };","import _objectSpread from '@babel/runtime/helpers/esm/objectSpread2';\nimport _slicedToArray from '@babel/runtime/helpers/esm/slicedToArray';\nimport _objectWithoutProperties from '@babel/runtime/helpers/esm/objectWithoutProperties';\nimport { useState, useCallback } from 'react';\n\nvar _excluded = [\"defaultInputValue\", \"defaultMenuIsOpen\", \"defaultValue\", \"inputValue\", \"menuIsOpen\", \"onChange\", \"onInputChange\", \"onMenuClose\", \"onMenuOpen\", \"value\"];\nfunction useStateManager(_ref) {\n  var _ref$defaultInputValu = _ref.defaultInputValue,\n    defaultInputValue = _ref$defaultInputValu === void 0 ? '' : _ref$defaultInputValu,\n    _ref$defaultMenuIsOpe = _ref.defaultMenuIsOpen,\n    defaultMenuIsOpen = _ref$defaultMenuIsOpe === void 0 ? false : _ref$defaultMenuIsOpe,\n    _ref$defaultValue = _ref.defaultValue,\n    defaultValue = _ref$defaultValue === void 0 ? null : _ref$defaultValue,\n    propsInputValue = _ref.inputValue,\n    propsMenuIsOpen = _ref.menuIsOpen,\n    propsOnChange = _ref.onChange,\n    propsOnInputChange = _ref.onInputChange,\n    propsOnMenuClose = _ref.onMenuClose,\n    propsOnMenuOpen = _ref.onMenuOpen,\n    propsValue = _ref.value,\n    restSelectProps = _objectWithoutProperties(_ref, _excluded);\n  var _useState = useState(propsInputValue !== undefined ? propsInputValue : defaultInputValue),\n    _useState2 = _slicedToArray(_useState, 2),\n    stateInputValue = _useState2[0],\n    setStateInputValue = _useState2[1];\n  var _useState3 = useState(propsMenuIsOpen !== undefined ? propsMenuIsOpen : defaultMenuIsOpen),\n    _useState4 = _slicedToArray(_useState3, 2),\n    stateMenuIsOpen = _useState4[0],\n    setStateMenuIsOpen = _useState4[1];\n  var _useState5 = useState(propsValue !== undefined ? propsValue : defaultValue),\n    _useState6 = _slicedToArray(_useState5, 2),\n    stateValue = _useState6[0],\n    setStateValue = _useState6[1];\n  var onChange = useCallback(function (value, actionMeta) {\n    if (typeof propsOnChange === 'function') {\n      propsOnChange(value, actionMeta);\n    }\n    setStateValue(value);\n  }, [propsOnChange]);\n  var onInputChange = useCallback(function (value, actionMeta) {\n    var newValue;\n    if (typeof propsOnInputChange === 'function') {\n      newValue = propsOnInputChange(value, actionMeta);\n    }\n    setStateInputValue(newValue !== undefined ? newValue : value);\n  }, [propsOnInputChange]);\n  var onMenuOpen = useCallback(function () {\n    if (typeof propsOnMenuOpen === 'function') {\n      propsOnMenuOpen();\n    }\n    setStateMenuIsOpen(true);\n  }, [propsOnMenuOpen]);\n  var onMenuClose = useCallback(function () {\n    if (typeof propsOnMenuClose === 'function') {\n      propsOnMenuClose();\n    }\n    setStateMenuIsOpen(false);\n  }, [propsOnMenuClose]);\n  var inputValue = propsInputValue !== undefined ? propsInputValue : stateInputValue;\n  var menuIsOpen = propsMenuIsOpen !== undefined ? propsMenuIsOpen : stateMenuIsOpen;\n  var value = propsValue !== undefined ? propsValue : stateValue;\n  return _objectSpread(_objectSpread({}, restSelectProps), {}, {\n    inputValue: inputValue,\n    menuIsOpen: menuIsOpen,\n    onChange: onChange,\n    onInputChange: onInputChange,\n    onMenuClose: onMenuClose,\n    onMenuOpen: onMenuOpen,\n    value: value\n  });\n}\n\nexport { useStateManager as u };\n","function _taggedTemplateLiteral(e, t) {\n  return t || (t = e.slice(0)), Object.freeze(Object.defineProperties(e, {\n    raw: {\n      value: Object.freeze(t)\n    }\n  }));\n}\nexport { _taggedTemplateLiteral as default };","/**\n * Custom positioning reference element.\n * @see https://floating-ui.com/docs/virtual-elements\n */\n\nconst sides = ['top', 'right', 'bottom', 'left'];\nconst alignments = ['start', 'end'];\nconst placements = /*#__PURE__*/sides.reduce((acc, side) => acc.concat(side, side + \"-\" + alignments[0], side + \"-\" + alignments[1]), []);\nconst min = Math.min;\nconst max = Math.max;\nconst round = Math.round;\nconst floor = Math.floor;\nconst createCoords = v => ({\n  x: v,\n  y: v\n});\nconst oppositeSideMap = {\n  left: 'right',\n  right: 'left',\n  bottom: 'top',\n  top: 'bottom'\n};\nconst oppositeAlignmentMap = {\n  start: 'end',\n  end: 'start'\n};\nfunction clamp(start, value, end) {\n  return max(start, min(value, end));\n}\nfunction evaluate(value, param) {\n  return typeof value === 'function' ? value(param) : value;\n}\nfunction getSide(placement) {\n  return placement.split('-')[0];\n}\nfunction getAlignment(placement) {\n  return placement.split('-')[1];\n}\nfunction getOppositeAxis(axis) {\n  return axis === 'x' ? 'y' : 'x';\n}\nfunction getAxisLength(axis) {\n  return axis === 'y' ? 'height' : 'width';\n}\nfunction getSideAxis(placement) {\n  return ['top', 'bottom'].includes(getSide(placement)) ? 'y' : 'x';\n}\nfunction getAlignmentAxis(placement) {\n  return getOppositeAxis(getSideAxis(placement));\n}\nfunction getAlignmentSides(placement, rects, rtl) {\n  if (rtl === void 0) {\n    rtl = false;\n  }\n  const alignment = getAlignment(placement);\n  const alignmentAxis = getAlignmentAxis(placement);\n  const length = getAxisLength(alignmentAxis);\n  let mainAlignmentSide = alignmentAxis === 'x' ? alignment === (rtl ? 'end' : 'start') ? 'right' : 'left' : alignment === 'start' ? 'bottom' : 'top';\n  if (rects.reference[length] > rects.floating[length]) {\n    mainAlignmentSide = getOppositePlacement(mainAlignmentSide);\n  }\n  return [mainAlignmentSide, getOppositePlacement(mainAlignmentSide)];\n}\nfunction getExpandedPlacements(placement) {\n  const oppositePlacement = getOppositePlacement(placement);\n  return [getOppositeAlignmentPlacement(placement), oppositePlacement, getOppositeAlignmentPlacement(oppositePlacement)];\n}\nfunction getOppositeAlignmentPlacement(placement) {\n  return placement.replace(/start|end/g, alignment => oppositeAlignmentMap[alignment]);\n}\nfunction getSideList(side, isStart, rtl) {\n  const lr = ['left', 'right'];\n  const rl = ['right', 'left'];\n  const tb = ['top', 'bottom'];\n  const bt = ['bottom', 'top'];\n  switch (side) {\n    case 'top':\n    case 'bottom':\n      if (rtl) return isStart ? rl : lr;\n      return isStart ? lr : rl;\n    case 'left':\n    case 'right':\n      return isStart ? tb : bt;\n    default:\n      return [];\n  }\n}\nfunction getOppositeAxisPlacements(placement, flipAlignment, direction, rtl) {\n  const alignment = getAlignment(placement);\n  let list = getSideList(getSide(placement), direction === 'start', rtl);\n  if (alignment) {\n    list = list.map(side => side + \"-\" + alignment);\n    if (flipAlignment) {\n      list = list.concat(list.map(getOppositeAlignmentPlacement));\n    }\n  }\n  return list;\n}\nfunction getOppositePlacement(placement) {\n  return placement.replace(/left|right|bottom|top/g, side => oppositeSideMap[side]);\n}\nfunction expandPaddingObject(padding) {\n  return {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0,\n    ...padding\n  };\n}\nfunction getPaddingObject(padding) {\n  return typeof padding !== 'number' ? expandPaddingObject(padding) : {\n    top: padding,\n    right: padding,\n    bottom: padding,\n    left: padding\n  };\n}\nfunction rectToClientRect(rect) {\n  const {\n    x,\n    y,\n    width,\n    height\n  } = rect;\n  return {\n    width,\n    height,\n    top: y,\n    left: x,\n    right: x + width,\n    bottom: y + height,\n    x,\n    y\n  };\n}\n\nexport { alignments, clamp, createCoords, evaluate, expandPaddingObject, floor, getAlignment, getAlignmentAxis, getAlignmentSides, getAxisLength, getExpandedPlacements, getOppositeAlignmentPlacement, getOppositeAxis, getOppositeAxisPlacements, getOppositePlacement, getPaddingObject, getSide, getSideAxis, max, min, placements, rectToClientRect, round, sides };\n","function hasWindow() {\n  return typeof window !== 'undefined';\n}\nfunction getNodeName(node) {\n  if (isNode(node)) {\n    return (node.nodeName || '').toLowerCase();\n  }\n  // Mocked nodes in testing environments may not be instances of Node. By\n  // returning `#document` an infinite loop won't occur.\n  // https://github.com/floating-ui/floating-ui/issues/2317\n  return '#document';\n}\nfunction getWindow(node) {\n  var _node$ownerDocument;\n  return (node == null || (_node$ownerDocument = node.ownerDocument) == null ? void 0 : _node$ownerDocument.defaultView) || window;\n}\nfunction getDocumentElement(node) {\n  var _ref;\n  return (_ref = (isNode(node) ? node.ownerDocument : node.document) || window.document) == null ? void 0 : _ref.documentElement;\n}\nfunction isNode(value) {\n  if (!hasWindow()) {\n    return false;\n  }\n  return value instanceof Node || value instanceof getWindow(value).Node;\n}\nfunction isElement(value) {\n  if (!hasWindow()) {\n    return false;\n  }\n  return value instanceof Element || value instanceof getWindow(value).Element;\n}\nfunction isHTMLElement(value) {\n  if (!hasWindow()) {\n    return false;\n  }\n  return value instanceof HTMLElement || value instanceof getWindow(value).HTMLElement;\n}\nfunction isShadowRoot(value) {\n  if (!hasWindow() || typeof ShadowRoot === 'undefined') {\n    return false;\n  }\n  return value instanceof ShadowRoot || value instanceof getWindow(value).ShadowRoot;\n}\nfunction isOverflowElement(element) {\n  const {\n    overflow,\n    overflowX,\n    overflowY,\n    display\n  } = getComputedStyle(element);\n  return /auto|scroll|overlay|hidden|clip/.test(overflow + overflowY + overflowX) && !['inline', 'contents'].includes(display);\n}\nfunction isTableElement(element) {\n  return ['table', 'td', 'th'].includes(getNodeName(element));\n}\nfunction isTopLayer(element) {\n  return [':popover-open', ':modal'].some(selector => {\n    try {\n      return element.matches(selector);\n    } catch (e) {\n      return false;\n    }\n  });\n}\nfunction isContainingBlock(elementOrCss) {\n  const webkit = isWebKit();\n  const css = isElement(elementOrCss) ? getComputedStyle(elementOrCss) : elementOrCss;\n\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n  return css.transform !== 'none' || css.perspective !== 'none' || (css.containerType ? css.containerType !== 'normal' : false) || !webkit && (css.backdropFilter ? css.backdropFilter !== 'none' : false) || !webkit && (css.filter ? css.filter !== 'none' : false) || ['transform', 'perspective', 'filter'].some(value => (css.willChange || '').includes(value)) || ['paint', 'layout', 'strict', 'content'].some(value => (css.contain || '').includes(value));\n}\nfunction getContainingBlock(element) {\n  let currentNode = getParentNode(element);\n  while (isHTMLElement(currentNode) && !isLastTraversableNode(currentNode)) {\n    if (isContainingBlock(currentNode)) {\n      return currentNode;\n    } else if (isTopLayer(currentNode)) {\n      return null;\n    }\n    currentNode = getParentNode(currentNode);\n  }\n  return null;\n}\nfunction isWebKit() {\n  if (typeof CSS === 'undefined' || !CSS.supports) return false;\n  return CSS.supports('-webkit-backdrop-filter', 'none');\n}\nfunction isLastTraversableNode(node) {\n  return ['html', 'body', '#document'].includes(getNodeName(node));\n}\nfunction getComputedStyle(element) {\n  return getWindow(element).getComputedStyle(element);\n}\nfunction getNodeScroll(element) {\n  if (isElement(element)) {\n    return {\n      scrollLeft: element.scrollLeft,\n      scrollTop: element.scrollTop\n    };\n  }\n  return {\n    scrollLeft: element.scrollX,\n    scrollTop: element.scrollY\n  };\n}\nfunction getParentNode(node) {\n  if (getNodeName(node) === 'html') {\n    return node;\n  }\n  const result =\n  // Step into the shadow DOM of the parent of a slotted node.\n  node.assignedSlot ||\n  // DOM Element detected.\n  node.parentNode ||\n  // ShadowRoot detected.\n  isShadowRoot(node) && node.host ||\n  // Fallback.\n  getDocumentElement(node);\n  return isShadowRoot(result) ? result.host : result;\n}\nfunction getNearestOverflowAncestor(node) {\n  const parentNode = getParentNode(node);\n  if (isLastTraversableNode(parentNode)) {\n    return node.ownerDocument ? node.ownerDocument.body : node.body;\n  }\n  if (isHTMLElement(parentNode) && isOverflowElement(parentNode)) {\n    return parentNode;\n  }\n  return getNearestOverflowAncestor(parentNode);\n}\nfunction getOverflowAncestors(node, list, traverseIframes) {\n  var _node$ownerDocument2;\n  if (list === void 0) {\n    list = [];\n  }\n  if (traverseIframes === void 0) {\n    traverseIframes = true;\n  }\n  const scrollableAncestor = getNearestOverflowAncestor(node);\n  const isBody = scrollableAncestor === ((_node$ownerDocument2 = node.ownerDocument) == null ? void 0 : _node$ownerDocument2.body);\n  const win = getWindow(scrollableAncestor);\n  if (isBody) {\n    const frameElement = getFrameElement(win);\n    return list.concat(win, win.visualViewport || [], isOverflowElement(scrollableAncestor) ? scrollableAncestor : [], frameElement && traverseIframes ? getOverflowAncestors(frameElement) : []);\n  }\n  return list.concat(scrollableAncestor, getOverflowAncestors(scrollableAncestor, [], traverseIframes));\n}\nfunction getFrameElement(win) {\n  return win.parent && Object.getPrototypeOf(win.parent) ? win.frameElement : null;\n}\n\nexport { getComputedStyle, getContainingBlock, getDocumentElement, getFrameElement, getNearestOverflowAncestor, getNodeName, getNodeScroll, getOverflowAncestors, getParentNode, getWindow, isContainingBlock, isElement, isHTMLElement, isLastTraversableNode, isNode, isOverflowElement, isShadowRoot, isTableElement, isTopLayer, isWebKit };\n","import { rectToClientRect, detectOverflow as detectOverflow$1, offset as offset$1, autoPlacement as autoPlacement$1, shift as shift$1, flip as flip$1, size as size$1, hide as hide$1, arrow as arrow$1, inline as inline$1, limitShift as limitShift$1, computePosition as computePosition$1 } from '@floating-ui/core';\nimport { round, createCoords, max, min, floor } from '@floating-ui/utils';\nimport { getComputedStyle, isHTMLElement, isElement, getWindow, isWebKit, getFrameElement, getDocumentElement, isTopLayer, getNodeName, isOverflowElement, getNodeScroll, getOverflowAncestors, getParentNode, isLastTraversableNode, isContainingBlock, isTableElement, getContainingBlock } from '@floating-ui/utils/dom';\nexport { getOverflowAncestors } from '@floating-ui/utils/dom';\n\nfunction getCssDimensions(element) {\n  const css = getComputedStyle(element);\n  // In testing environments, the `width` and `height` properties are empty\n  // strings for SVG elements, returning NaN. Fallback to `0` in this case.\n  let width = parseFloat(css.width) || 0;\n  let height = parseFloat(css.height) || 0;\n  const hasOffset = isHTMLElement(element);\n  const offsetWidth = hasOffset ? element.offsetWidth : width;\n  const offsetHeight = hasOffset ? element.offsetHeight : height;\n  const shouldFallback = round(width) !== offsetWidth || round(height) !== offsetHeight;\n  if (shouldFallback) {\n    width = offsetWidth;\n    height = offsetHeight;\n  }\n  return {\n    width,\n    height,\n    $: shouldFallback\n  };\n}\n\nfunction unwrapElement(element) {\n  return !isElement(element) ? element.contextElement : element;\n}\n\nfunction getScale(element) {\n  const domElement = unwrapElement(element);\n  if (!isHTMLElement(domElement)) {\n    return createCoords(1);\n  }\n  const rect = domElement.getBoundingClientRect();\n  const {\n    width,\n    height,\n    $\n  } = getCssDimensions(domElement);\n  let x = ($ ? round(rect.width) : rect.width) / width;\n  let y = ($ ? round(rect.height) : rect.height) / height;\n\n  // 0, NaN, or Infinity should always fallback to 1.\n\n  if (!x || !Number.isFinite(x)) {\n    x = 1;\n  }\n  if (!y || !Number.isFinite(y)) {\n    y = 1;\n  }\n  return {\n    x,\n    y\n  };\n}\n\nconst noOffsets = /*#__PURE__*/createCoords(0);\nfunction getVisualOffsets(element) {\n  const win = getWindow(element);\n  if (!isWebKit() || !win.visualViewport) {\n    return noOffsets;\n  }\n  return {\n    x: win.visualViewport.offsetLeft,\n    y: win.visualViewport.offsetTop\n  };\n}\nfunction shouldAddVisualOffsets(element, isFixed, floatingOffsetParent) {\n  if (isFixed === void 0) {\n    isFixed = false;\n  }\n  if (!floatingOffsetParent || isFixed && floatingOffsetParent !== getWindow(element)) {\n    return false;\n  }\n  return isFixed;\n}\n\nfunction getBoundingClientRect(element, includeScale, isFixedStrategy, offsetParent) {\n  if (includeScale === void 0) {\n    includeScale = false;\n  }\n  if (isFixedStrategy === void 0) {\n    isFixedStrategy = false;\n  }\n  const clientRect = element.getBoundingClientRect();\n  const domElement = unwrapElement(element);\n  let scale = createCoords(1);\n  if (includeScale) {\n    if (offsetParent) {\n      if (isElement(offsetParent)) {\n        scale = getScale(offsetParent);\n      }\n    } else {\n      scale = getScale(element);\n    }\n  }\n  const visualOffsets = shouldAddVisualOffsets(domElement, isFixedStrategy, offsetParent) ? getVisualOffsets(domElement) : createCoords(0);\n  let x = (clientRect.left + visualOffsets.x) / scale.x;\n  let y = (clientRect.top + visualOffsets.y) / scale.y;\n  let width = clientRect.width / scale.x;\n  let height = clientRect.height / scale.y;\n  if (domElement) {\n    const win = getWindow(domElement);\n    const offsetWin = offsetParent && isElement(offsetParent) ? getWindow(offsetParent) : offsetParent;\n    let currentWin = win;\n    let currentIFrame = getFrameElement(currentWin);\n    while (currentIFrame && offsetParent && offsetWin !== currentWin) {\n      const iframeScale = getScale(currentIFrame);\n      const iframeRect = currentIFrame.getBoundingClientRect();\n      const css = getComputedStyle(currentIFrame);\n      const left = iframeRect.left + (currentIFrame.clientLeft + parseFloat(css.paddingLeft)) * iframeScale.x;\n      const top = iframeRect.top + (currentIFrame.clientTop + parseFloat(css.paddingTop)) * iframeScale.y;\n      x *= iframeScale.x;\n      y *= iframeScale.y;\n      width *= iframeScale.x;\n      height *= iframeScale.y;\n      x += left;\n      y += top;\n      currentWin = getWindow(currentIFrame);\n      currentIFrame = getFrameElement(currentWin);\n    }\n  }\n  return rectToClientRect({\n    width,\n    height,\n    x,\n    y\n  });\n}\n\nfunction convertOffsetParentRelativeRectToViewportRelativeRect(_ref) {\n  let {\n    elements,\n    rect,\n    offsetParent,\n    strategy\n  } = _ref;\n  const isFixed = strategy === 'fixed';\n  const documentElement = getDocumentElement(offsetParent);\n  const topLayer = elements ? isTopLayer(elements.floating) : false;\n  if (offsetParent === documentElement || topLayer && isFixed) {\n    return rect;\n  }\n  let scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  let scale = createCoords(1);\n  const offsets = createCoords(0);\n  const isOffsetParentAnElement = isHTMLElement(offsetParent);\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n    if (getNodeName(offsetParent) !== 'body' || isOverflowElement(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n    if (isHTMLElement(offsetParent)) {\n      const offsetRect = getBoundingClientRect(offsetParent);\n      scale = getScale(offsetParent);\n      offsets.x = offsetRect.x + offsetParent.clientLeft;\n      offsets.y = offsetRect.y + offsetParent.clientTop;\n    }\n  }\n  return {\n    width: rect.width * scale.x,\n    height: rect.height * scale.y,\n    x: rect.x * scale.x - scroll.scrollLeft * scale.x + offsets.x,\n    y: rect.y * scale.y - scroll.scrollTop * scale.y + offsets.y\n  };\n}\n\nfunction getClientRects(element) {\n  return Array.from(element.getClientRects());\n}\n\n// If <html> has a CSS width greater than the viewport, then this will be\n// incorrect for RTL.\nfunction getWindowScrollBarX(element, rect) {\n  const leftScroll = getNodeScroll(element).scrollLeft;\n  if (!rect) {\n    return getBoundingClientRect(getDocumentElement(element)).left + leftScroll;\n  }\n  return rect.left + leftScroll;\n}\n\n// Gets the entire size of the scrollable document area, even extending outside\n// of the `<html>` and `<body>` rect bounds if horizontally scrollable.\nfunction getDocumentRect(element) {\n  const html = getDocumentElement(element);\n  const scroll = getNodeScroll(element);\n  const body = element.ownerDocument.body;\n  const width = max(html.scrollWidth, html.clientWidth, body.scrollWidth, body.clientWidth);\n  const height = max(html.scrollHeight, html.clientHeight, body.scrollHeight, body.clientHeight);\n  let x = -scroll.scrollLeft + getWindowScrollBarX(element);\n  const y = -scroll.scrollTop;\n  if (getComputedStyle(body).direction === 'rtl') {\n    x += max(html.clientWidth, body.clientWidth) - width;\n  }\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\n\nfunction getViewportRect(element, strategy) {\n  const win = getWindow(element);\n  const html = getDocumentElement(element);\n  const visualViewport = win.visualViewport;\n  let width = html.clientWidth;\n  let height = html.clientHeight;\n  let x = 0;\n  let y = 0;\n  if (visualViewport) {\n    width = visualViewport.width;\n    height = visualViewport.height;\n    const visualViewportBased = isWebKit();\n    if (!visualViewportBased || visualViewportBased && strategy === 'fixed') {\n      x = visualViewport.offsetLeft;\n      y = visualViewport.offsetTop;\n    }\n  }\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\n\n// Returns the inner client rect, subtracting scrollbars if present.\nfunction getInnerBoundingClientRect(element, strategy) {\n  const clientRect = getBoundingClientRect(element, true, strategy === 'fixed');\n  const top = clientRect.top + element.clientTop;\n  const left = clientRect.left + element.clientLeft;\n  const scale = isHTMLElement(element) ? getScale(element) : createCoords(1);\n  const width = element.clientWidth * scale.x;\n  const height = element.clientHeight * scale.y;\n  const x = left * scale.x;\n  const y = top * scale.y;\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\nfunction getClientRectFromClippingAncestor(element, clippingAncestor, strategy) {\n  let rect;\n  if (clippingAncestor === 'viewport') {\n    rect = getViewportRect(element, strategy);\n  } else if (clippingAncestor === 'document') {\n    rect = getDocumentRect(getDocumentElement(element));\n  } else if (isElement(clippingAncestor)) {\n    rect = getInnerBoundingClientRect(clippingAncestor, strategy);\n  } else {\n    const visualOffsets = getVisualOffsets(element);\n    rect = {\n      ...clippingAncestor,\n      x: clippingAncestor.x - visualOffsets.x,\n      y: clippingAncestor.y - visualOffsets.y\n    };\n  }\n  return rectToClientRect(rect);\n}\nfunction hasFixedPositionAncestor(element, stopNode) {\n  const parentNode = getParentNode(element);\n  if (parentNode === stopNode || !isElement(parentNode) || isLastTraversableNode(parentNode)) {\n    return false;\n  }\n  return getComputedStyle(parentNode).position === 'fixed' || hasFixedPositionAncestor(parentNode, stopNode);\n}\n\n// A \"clipping ancestor\" is an `overflow` element with the characteristic of\n// clipping (or hiding) child elements. This returns all clipping ancestors\n// of the given element up the tree.\nfunction getClippingElementAncestors(element, cache) {\n  const cachedResult = cache.get(element);\n  if (cachedResult) {\n    return cachedResult;\n  }\n  let result = getOverflowAncestors(element, [], false).filter(el => isElement(el) && getNodeName(el) !== 'body');\n  let currentContainingBlockComputedStyle = null;\n  const elementIsFixed = getComputedStyle(element).position === 'fixed';\n  let currentNode = elementIsFixed ? getParentNode(element) : element;\n\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n  while (isElement(currentNode) && !isLastTraversableNode(currentNode)) {\n    const computedStyle = getComputedStyle(currentNode);\n    const currentNodeIsContaining = isContainingBlock(currentNode);\n    if (!currentNodeIsContaining && computedStyle.position === 'fixed') {\n      currentContainingBlockComputedStyle = null;\n    }\n    const shouldDropCurrentNode = elementIsFixed ? !currentNodeIsContaining && !currentContainingBlockComputedStyle : !currentNodeIsContaining && computedStyle.position === 'static' && !!currentContainingBlockComputedStyle && ['absolute', 'fixed'].includes(currentContainingBlockComputedStyle.position) || isOverflowElement(currentNode) && !currentNodeIsContaining && hasFixedPositionAncestor(element, currentNode);\n    if (shouldDropCurrentNode) {\n      // Drop non-containing blocks.\n      result = result.filter(ancestor => ancestor !== currentNode);\n    } else {\n      // Record last containing block for next iteration.\n      currentContainingBlockComputedStyle = computedStyle;\n    }\n    currentNode = getParentNode(currentNode);\n  }\n  cache.set(element, result);\n  return result;\n}\n\n// Gets the maximum area that the element is visible in due to any number of\n// clipping ancestors.\nfunction getClippingRect(_ref) {\n  let {\n    element,\n    boundary,\n    rootBoundary,\n    strategy\n  } = _ref;\n  const elementClippingAncestors = boundary === 'clippingAncestors' ? isTopLayer(element) ? [] : getClippingElementAncestors(element, this._c) : [].concat(boundary);\n  const clippingAncestors = [...elementClippingAncestors, rootBoundary];\n  const firstClippingAncestor = clippingAncestors[0];\n  const clippingRect = clippingAncestors.reduce((accRect, clippingAncestor) => {\n    const rect = getClientRectFromClippingAncestor(element, clippingAncestor, strategy);\n    accRect.top = max(rect.top, accRect.top);\n    accRect.right = min(rect.right, accRect.right);\n    accRect.bottom = min(rect.bottom, accRect.bottom);\n    accRect.left = max(rect.left, accRect.left);\n    return accRect;\n  }, getClientRectFromClippingAncestor(element, firstClippingAncestor, strategy));\n  return {\n    width: clippingRect.right - clippingRect.left,\n    height: clippingRect.bottom - clippingRect.top,\n    x: clippingRect.left,\n    y: clippingRect.top\n  };\n}\n\nfunction getDimensions(element) {\n  const {\n    width,\n    height\n  } = getCssDimensions(element);\n  return {\n    width,\n    height\n  };\n}\n\nfunction getRectRelativeToOffsetParent(element, offsetParent, strategy) {\n  const isOffsetParentAnElement = isHTMLElement(offsetParent);\n  const documentElement = getDocumentElement(offsetParent);\n  const isFixed = strategy === 'fixed';\n  const rect = getBoundingClientRect(element, true, isFixed, offsetParent);\n  let scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  const offsets = createCoords(0);\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n    if (getNodeName(offsetParent) !== 'body' || isOverflowElement(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n    if (isOffsetParentAnElement) {\n      const offsetRect = getBoundingClientRect(offsetParent, true, isFixed, offsetParent);\n      offsets.x = offsetRect.x + offsetParent.clientLeft;\n      offsets.y = offsetRect.y + offsetParent.clientTop;\n    } else if (documentElement) {\n      // If the <body> scrollbar appears on the left (e.g. RTL systems). Use\n      // Firefox with layout.scrollbar.side = 3 in about:config to test this.\n      offsets.x = getWindowScrollBarX(documentElement);\n    }\n  }\n  let htmlX = 0;\n  let htmlY = 0;\n  if (documentElement && !isOffsetParentAnElement && !isFixed) {\n    const htmlRect = documentElement.getBoundingClientRect();\n    htmlY = htmlRect.top + scroll.scrollTop;\n    htmlX = htmlRect.left + scroll.scrollLeft -\n    // RTL <body> scrollbar.\n    getWindowScrollBarX(documentElement, htmlRect);\n  }\n  const x = rect.left + scroll.scrollLeft - offsets.x - htmlX;\n  const y = rect.top + scroll.scrollTop - offsets.y - htmlY;\n  return {\n    x,\n    y,\n    width: rect.width,\n    height: rect.height\n  };\n}\n\nfunction isStaticPositioned(element) {\n  return getComputedStyle(element).position === 'static';\n}\n\nfunction getTrueOffsetParent(element, polyfill) {\n  if (!isHTMLElement(element) || getComputedStyle(element).position === 'fixed') {\n    return null;\n  }\n  if (polyfill) {\n    return polyfill(element);\n  }\n  let rawOffsetParent = element.offsetParent;\n\n  // Firefox returns the <html> element as the offsetParent if it's non-static,\n  // while Chrome and Safari return the <body> element. The <body> element must\n  // be used to perform the correct calculations even if the <html> element is\n  // non-static.\n  if (getDocumentElement(element) === rawOffsetParent) {\n    rawOffsetParent = rawOffsetParent.ownerDocument.body;\n  }\n  return rawOffsetParent;\n}\n\n// Gets the closest ancestor positioned element. Handles some edge cases,\n// such as table ancestors and cross browser bugs.\nfunction getOffsetParent(element, polyfill) {\n  const win = getWindow(element);\n  if (isTopLayer(element)) {\n    return win;\n  }\n  if (!isHTMLElement(element)) {\n    let svgOffsetParent = getParentNode(element);\n    while (svgOffsetParent && !isLastTraversableNode(svgOffsetParent)) {\n      if (isElement(svgOffsetParent) && !isStaticPositioned(svgOffsetParent)) {\n        return svgOffsetParent;\n      }\n      svgOffsetParent = getParentNode(svgOffsetParent);\n    }\n    return win;\n  }\n  let offsetParent = getTrueOffsetParent(element, polyfill);\n  while (offsetParent && isTableElement(offsetParent) && isStaticPositioned(offsetParent)) {\n    offsetParent = getTrueOffsetParent(offsetParent, polyfill);\n  }\n  if (offsetParent && isLastTraversableNode(offsetParent) && isStaticPositioned(offsetParent) && !isContainingBlock(offsetParent)) {\n    return win;\n  }\n  return offsetParent || getContainingBlock(element) || win;\n}\n\nconst getElementRects = async function (data) {\n  const getOffsetParentFn = this.getOffsetParent || getOffsetParent;\n  const getDimensionsFn = this.getDimensions;\n  const floatingDimensions = await getDimensionsFn(data.floating);\n  return {\n    reference: getRectRelativeToOffsetParent(data.reference, await getOffsetParentFn(data.floating), data.strategy),\n    floating: {\n      x: 0,\n      y: 0,\n      width: floatingDimensions.width,\n      height: floatingDimensions.height\n    }\n  };\n};\n\nfunction isRTL(element) {\n  return getComputedStyle(element).direction === 'rtl';\n}\n\nconst platform = {\n  convertOffsetParentRelativeRectToViewportRelativeRect,\n  getDocumentElement,\n  getClippingRect,\n  getOffsetParent,\n  getElementRects,\n  getClientRects,\n  getDimensions,\n  getScale,\n  isElement,\n  isRTL\n};\n\n// https://samthor.au/2021/observing-dom/\nfunction observeMove(element, onMove) {\n  let io = null;\n  let timeoutId;\n  const root = getDocumentElement(element);\n  function cleanup() {\n    var _io;\n    clearTimeout(timeoutId);\n    (_io = io) == null || _io.disconnect();\n    io = null;\n  }\n  function refresh(skip, threshold) {\n    if (skip === void 0) {\n      skip = false;\n    }\n    if (threshold === void 0) {\n      threshold = 1;\n    }\n    cleanup();\n    const {\n      left,\n      top,\n      width,\n      height\n    } = element.getBoundingClientRect();\n    if (!skip) {\n      onMove();\n    }\n    if (!width || !height) {\n      return;\n    }\n    const insetTop = floor(top);\n    const insetRight = floor(root.clientWidth - (left + width));\n    const insetBottom = floor(root.clientHeight - (top + height));\n    const insetLeft = floor(left);\n    const rootMargin = -insetTop + \"px \" + -insetRight + \"px \" + -insetBottom + \"px \" + -insetLeft + \"px\";\n    const options = {\n      rootMargin,\n      threshold: max(0, min(1, threshold)) || 1\n    };\n    let isFirstUpdate = true;\n    function handleObserve(entries) {\n      const ratio = entries[0].intersectionRatio;\n      if (ratio !== threshold) {\n        if (!isFirstUpdate) {\n          return refresh();\n        }\n        if (!ratio) {\n          // If the reference is clipped, the ratio is 0. Throttle the refresh\n          // to prevent an infinite loop of updates.\n          timeoutId = setTimeout(() => {\n            refresh(false, 1e-7);\n          }, 1000);\n        } else {\n          refresh(false, ratio);\n        }\n      }\n      isFirstUpdate = false;\n    }\n\n    // Older browsers don't support a `document` as the root and will throw an\n    // error.\n    try {\n      io = new IntersectionObserver(handleObserve, {\n        ...options,\n        // Handle <iframe>s\n        root: root.ownerDocument\n      });\n    } catch (e) {\n      io = new IntersectionObserver(handleObserve, options);\n    }\n    io.observe(element);\n  }\n  refresh(true);\n  return cleanup;\n}\n\n/**\n * Automatically updates the position of the floating element when necessary.\n * Should only be called when the floating element is mounted on the DOM or\n * visible on the screen.\n * @returns cleanup function that should be invoked when the floating element is\n * removed from the DOM or hidden from the screen.\n * @see https://floating-ui.com/docs/autoUpdate\n */\nfunction autoUpdate(reference, floating, update, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    ancestorScroll = true,\n    ancestorResize = true,\n    elementResize = typeof ResizeObserver === 'function',\n    layoutShift = typeof IntersectionObserver === 'function',\n    animationFrame = false\n  } = options;\n  const referenceEl = unwrapElement(reference);\n  const ancestors = ancestorScroll || ancestorResize ? [...(referenceEl ? getOverflowAncestors(referenceEl) : []), ...getOverflowAncestors(floating)] : [];\n  ancestors.forEach(ancestor => {\n    ancestorScroll && ancestor.addEventListener('scroll', update, {\n      passive: true\n    });\n    ancestorResize && ancestor.addEventListener('resize', update);\n  });\n  const cleanupIo = referenceEl && layoutShift ? observeMove(referenceEl, update) : null;\n  let reobserveFrame = -1;\n  let resizeObserver = null;\n  if (elementResize) {\n    resizeObserver = new ResizeObserver(_ref => {\n      let [firstEntry] = _ref;\n      if (firstEntry && firstEntry.target === referenceEl && resizeObserver) {\n        // Prevent update loops when using the `size` middleware.\n        // https://github.com/floating-ui/floating-ui/issues/1740\n        resizeObserver.unobserve(floating);\n        cancelAnimationFrame(reobserveFrame);\n        reobserveFrame = requestAnimationFrame(() => {\n          var _resizeObserver;\n          (_resizeObserver = resizeObserver) == null || _resizeObserver.observe(floating);\n        });\n      }\n      update();\n    });\n    if (referenceEl && !animationFrame) {\n      resizeObserver.observe(referenceEl);\n    }\n    resizeObserver.observe(floating);\n  }\n  let frameId;\n  let prevRefRect = animationFrame ? getBoundingClientRect(reference) : null;\n  if (animationFrame) {\n    frameLoop();\n  }\n  function frameLoop() {\n    const nextRefRect = getBoundingClientRect(reference);\n    if (prevRefRect && (nextRefRect.x !== prevRefRect.x || nextRefRect.y !== prevRefRect.y || nextRefRect.width !== prevRefRect.width || nextRefRect.height !== prevRefRect.height)) {\n      update();\n    }\n    prevRefRect = nextRefRect;\n    frameId = requestAnimationFrame(frameLoop);\n  }\n  update();\n  return () => {\n    var _resizeObserver2;\n    ancestors.forEach(ancestor => {\n      ancestorScroll && ancestor.removeEventListener('scroll', update);\n      ancestorResize && ancestor.removeEventListener('resize', update);\n    });\n    cleanupIo == null || cleanupIo();\n    (_resizeObserver2 = resizeObserver) == null || _resizeObserver2.disconnect();\n    resizeObserver = null;\n    if (animationFrame) {\n      cancelAnimationFrame(frameId);\n    }\n  };\n}\n\n/**\n * Resolves with an object of overflow side offsets that determine how much the\n * element is overflowing a given clipping boundary on each side.\n * - positive = overflowing the boundary by that number of pixels\n * - negative = how many pixels left before it will overflow\n * - 0 = lies flush with the boundary\n * @see https://floating-ui.com/docs/detectOverflow\n */\nconst detectOverflow = detectOverflow$1;\n\n/**\n * Modifies the placement by translating the floating element along the\n * specified axes.\n * A number (shorthand for `mainAxis` or distance), or an axes configuration\n * object may be passed.\n * @see https://floating-ui.com/docs/offset\n */\nconst offset = offset$1;\n\n/**\n * Optimizes the visibility of the floating element by choosing the placement\n * that has the most space available automatically, without needing to specify a\n * preferred placement. Alternative to `flip`.\n * @see https://floating-ui.com/docs/autoPlacement\n */\nconst autoPlacement = autoPlacement$1;\n\n/**\n * Optimizes the visibility of the floating element by shifting it in order to\n * keep it in view when it will overflow the clipping boundary.\n * @see https://floating-ui.com/docs/shift\n */\nconst shift = shift$1;\n\n/**\n * Optimizes the visibility of the floating element by flipping the `placement`\n * in order to keep it in view when the preferred placement(s) will overflow the\n * clipping boundary. Alternative to `autoPlacement`.\n * @see https://floating-ui.com/docs/flip\n */\nconst flip = flip$1;\n\n/**\n * Provides data that allows you to change the size of the floating element \n * for instance, prevent it from overflowing the clipping boundary or match the\n * width of the reference element.\n * @see https://floating-ui.com/docs/size\n */\nconst size = size$1;\n\n/**\n * Provides data to hide the floating element in applicable situations, such as\n * when it is not in the same clipping context as the reference element.\n * @see https://floating-ui.com/docs/hide\n */\nconst hide = hide$1;\n\n/**\n * Provides data to position an inner element of the floating element so that it\n * appears centered to the reference element.\n * @see https://floating-ui.com/docs/arrow\n */\nconst arrow = arrow$1;\n\n/**\n * Provides improved positioning for inline reference elements that can span\n * over multiple lines, such as hyperlinks or range selections.\n * @see https://floating-ui.com/docs/inline\n */\nconst inline = inline$1;\n\n/**\n * Built-in `limiter` that will stop `shift()` at a certain point.\n */\nconst limitShift = limitShift$1;\n\n/**\n * Computes the `x` and `y` coordinates that will place the floating element\n * next to a given reference element.\n */\nconst computePosition = (reference, floating, options) => {\n  // This caches the expensive `getClippingElementAncestors` function so that\n  // multiple lifecycle resets re-use the same result. It only lives for a\n  // single call. If other functions become expensive, we can add them as well.\n  const cache = new Map();\n  const mergedOptions = {\n    platform,\n    ...options\n  };\n  const platformWithCache = {\n    ...mergedOptions.platform,\n    _c: cache\n  };\n  return computePosition$1(reference, floating, {\n    ...mergedOptions,\n    platform: platformWithCache\n  });\n};\n\nexport { arrow, autoPlacement, autoUpdate, computePosition, detectOverflow, flip, hide, inline, limitShift, offset, platform, shift, size };\n","import { useLayoutEffect } from 'react';\n\nvar index =  useLayoutEffect ;\n\nexport default index;\n","import _objectSpread from '@babel/runtime/helpers/esm/objectSpread2';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport { jsx, keyframes, css as css$2 } from '@emotion/react';\nimport _slicedToArray from '@babel/runtime/helpers/esm/slicedToArray';\nimport _objectWithoutProperties from '@babel/runtime/helpers/esm/objectWithoutProperties';\nimport _typeof from '@babel/runtime/helpers/esm/typeof';\nimport _taggedTemplateLiteral from '@babel/runtime/helpers/esm/taggedTemplateLiteral';\nimport _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport { useContext, useRef, useState, useMemo, useCallback, createContext } from 'react';\nimport { createPortal } from 'react-dom';\nimport { autoUpdate } from '@floating-ui/dom';\nimport useLayoutEffect from 'use-isomorphic-layout-effect';\n\nvar _excluded$4 = [\"className\", \"clearValue\", \"cx\", \"getStyles\", \"getClassNames\", \"getValue\", \"hasValue\", \"isMulti\", \"isRtl\", \"options\", \"selectOption\", \"selectProps\", \"setValue\", \"theme\"];\n// ==============================\n// NO OP\n// ==============================\n\nvar noop = function noop() {};\n\n// ==============================\n// Class Name Prefixer\n// ==============================\n\n/**\n String representation of component state for styling with class names.\n\n Expects an array of strings OR a string/object pair:\n - className(['comp', 'comp-arg', 'comp-arg-2'])\n   @returns 'react-select__comp react-select__comp-arg react-select__comp-arg-2'\n - className('comp', { some: true, state: false })\n   @returns 'react-select__comp react-select__comp--some'\n*/\nfunction applyPrefixToName(prefix, name) {\n  if (!name) {\n    return prefix;\n  } else if (name[0] === '-') {\n    return prefix + name;\n  } else {\n    return prefix + '__' + name;\n  }\n}\nfunction classNames(prefix, state) {\n  for (var _len = arguments.length, classNameList = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    classNameList[_key - 2] = arguments[_key];\n  }\n  var arr = [].concat(classNameList);\n  if (state && prefix) {\n    for (var key in state) {\n      if (state.hasOwnProperty(key) && state[key]) {\n        arr.push(\"\".concat(applyPrefixToName(prefix, key)));\n      }\n    }\n  }\n  return arr.filter(function (i) {\n    return i;\n  }).map(function (i) {\n    return String(i).trim();\n  }).join(' ');\n}\n// ==============================\n// Clean Value\n// ==============================\n\nvar cleanValue = function cleanValue(value) {\n  if (isArray(value)) return value.filter(Boolean);\n  if (_typeof(value) === 'object' && value !== null) return [value];\n  return [];\n};\n\n// ==============================\n// Clean Common Props\n// ==============================\n\nvar cleanCommonProps = function cleanCommonProps(props) {\n  //className\n  props.className;\n    props.clearValue;\n    props.cx;\n    props.getStyles;\n    props.getClassNames;\n    props.getValue;\n    props.hasValue;\n    props.isMulti;\n    props.isRtl;\n    props.options;\n    props.selectOption;\n    props.selectProps;\n    props.setValue;\n    props.theme;\n    var innerProps = _objectWithoutProperties(props, _excluded$4);\n  return _objectSpread({}, innerProps);\n};\n\n// ==============================\n// Get Style Props\n// ==============================\n\nvar getStyleProps = function getStyleProps(props, name, classNamesState) {\n  var cx = props.cx,\n    getStyles = props.getStyles,\n    getClassNames = props.getClassNames,\n    className = props.className;\n  return {\n    css: getStyles(name, props),\n    className: cx(classNamesState !== null && classNamesState !== void 0 ? classNamesState : {}, getClassNames(name, props), className)\n  };\n};\n\n// ==============================\n// Handle Input Change\n// ==============================\n\nfunction handleInputChange(inputValue, actionMeta, onInputChange) {\n  if (onInputChange) {\n    var _newValue = onInputChange(inputValue, actionMeta);\n    if (typeof _newValue === 'string') return _newValue;\n  }\n  return inputValue;\n}\n\n// ==============================\n// Scroll Helpers\n// ==============================\n\nfunction isDocumentElement(el) {\n  return [document.documentElement, document.body, window].indexOf(el) > -1;\n}\n\n// Normalized Scroll Top\n// ------------------------------\n\nfunction normalizedHeight(el) {\n  if (isDocumentElement(el)) {\n    return window.innerHeight;\n  }\n  return el.clientHeight;\n}\n\n// Normalized scrollTo & scrollTop\n// ------------------------------\n\nfunction getScrollTop(el) {\n  if (isDocumentElement(el)) {\n    return window.pageYOffset;\n  }\n  return el.scrollTop;\n}\nfunction scrollTo(el, top) {\n  // with a scroll distance, we perform scroll on the element\n  if (isDocumentElement(el)) {\n    window.scrollTo(0, top);\n    return;\n  }\n  el.scrollTop = top;\n}\n\n// Get Scroll Parent\n// ------------------------------\n\nfunction getScrollParent(element) {\n  var style = getComputedStyle(element);\n  var excludeStaticParent = style.position === 'absolute';\n  var overflowRx = /(auto|scroll)/;\n  if (style.position === 'fixed') return document.documentElement;\n  for (var parent = element; parent = parent.parentElement;) {\n    style = getComputedStyle(parent);\n    if (excludeStaticParent && style.position === 'static') {\n      continue;\n    }\n    if (overflowRx.test(style.overflow + style.overflowY + style.overflowX)) {\n      return parent;\n    }\n  }\n  return document.documentElement;\n}\n\n// Animated Scroll To\n// ------------------------------\n\n/**\n  @param t: time (elapsed)\n  @param b: initial value\n  @param c: amount of change\n  @param d: duration\n*/\nfunction easeOutCubic(t, b, c, d) {\n  return c * ((t = t / d - 1) * t * t + 1) + b;\n}\nfunction animatedScrollTo(element, to) {\n  var duration = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 200;\n  var callback = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : noop;\n  var start = getScrollTop(element);\n  var change = to - start;\n  var increment = 10;\n  var currentTime = 0;\n  function animateScroll() {\n    currentTime += increment;\n    var val = easeOutCubic(currentTime, start, change, duration);\n    scrollTo(element, val);\n    if (currentTime < duration) {\n      window.requestAnimationFrame(animateScroll);\n    } else {\n      callback(element);\n    }\n  }\n  animateScroll();\n}\n\n// Scroll Into View\n// ------------------------------\n\nfunction scrollIntoView(menuEl, focusedEl) {\n  var menuRect = menuEl.getBoundingClientRect();\n  var focusedRect = focusedEl.getBoundingClientRect();\n  var overScroll = focusedEl.offsetHeight / 3;\n  if (focusedRect.bottom + overScroll > menuRect.bottom) {\n    scrollTo(menuEl, Math.min(focusedEl.offsetTop + focusedEl.clientHeight - menuEl.offsetHeight + overScroll, menuEl.scrollHeight));\n  } else if (focusedRect.top - overScroll < menuRect.top) {\n    scrollTo(menuEl, Math.max(focusedEl.offsetTop - overScroll, 0));\n  }\n}\n\n// ==============================\n// Get bounding client object\n// ==============================\n\n// cannot get keys using array notation with DOMRect\nfunction getBoundingClientObj(element) {\n  var rect = element.getBoundingClientRect();\n  return {\n    bottom: rect.bottom,\n    height: rect.height,\n    left: rect.left,\n    right: rect.right,\n    top: rect.top,\n    width: rect.width\n  };\n}\n\n// ==============================\n// Touch Capability Detector\n// ==============================\n\nfunction isTouchCapable() {\n  try {\n    document.createEvent('TouchEvent');\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\n// ==============================\n// Mobile Device Detector\n// ==============================\n\nfunction isMobileDevice() {\n  try {\n    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n  } catch (e) {\n    return false;\n  }\n}\n\n// ==============================\n// Passive Event Detector\n// ==============================\n\n// https://github.com/rafgraph/detect-it/blob/main/src/index.ts#L19-L36\nvar passiveOptionAccessed = false;\nvar options = {\n  get passive() {\n    return passiveOptionAccessed = true;\n  }\n};\n// check for SSR\nvar w = typeof window !== 'undefined' ? window : {};\nif (w.addEventListener && w.removeEventListener) {\n  w.addEventListener('p', noop, options);\n  w.removeEventListener('p', noop, false);\n}\nvar supportsPassiveEvents = passiveOptionAccessed;\nfunction notNullish(item) {\n  return item != null;\n}\nfunction isArray(arg) {\n  return Array.isArray(arg);\n}\nfunction valueTernary(isMulti, multiValue, singleValue) {\n  return isMulti ? multiValue : singleValue;\n}\nfunction singleValueAsValue(singleValue) {\n  return singleValue;\n}\nfunction multiValueAsValue(multiValue) {\n  return multiValue;\n}\nvar removeProps = function removeProps(propsObj) {\n  for (var _len2 = arguments.length, properties = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    properties[_key2 - 1] = arguments[_key2];\n  }\n  var propsMap = Object.entries(propsObj).filter(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 1),\n      key = _ref2[0];\n    return !properties.includes(key);\n  });\n  return propsMap.reduce(function (newProps, _ref3) {\n    var _ref4 = _slicedToArray(_ref3, 2),\n      key = _ref4[0],\n      val = _ref4[1];\n    newProps[key] = val;\n    return newProps;\n  }, {});\n};\n\nvar _excluded$3 = [\"children\", \"innerProps\"],\n  _excluded2$1 = [\"children\", \"innerProps\"];\nfunction getMenuPlacement(_ref) {\n  var preferredMaxHeight = _ref.maxHeight,\n    menuEl = _ref.menuEl,\n    minHeight = _ref.minHeight,\n    preferredPlacement = _ref.placement,\n    shouldScroll = _ref.shouldScroll,\n    isFixedPosition = _ref.isFixedPosition,\n    controlHeight = _ref.controlHeight;\n  var scrollParent = getScrollParent(menuEl);\n  var defaultState = {\n    placement: 'bottom',\n    maxHeight: preferredMaxHeight\n  };\n\n  // something went wrong, return default state\n  if (!menuEl || !menuEl.offsetParent) return defaultState;\n\n  // we can't trust `scrollParent.scrollHeight` --> it may increase when\n  // the menu is rendered\n  var _scrollParent$getBoun = scrollParent.getBoundingClientRect(),\n    scrollHeight = _scrollParent$getBoun.height;\n  var _menuEl$getBoundingCl = menuEl.getBoundingClientRect(),\n    menuBottom = _menuEl$getBoundingCl.bottom,\n    menuHeight = _menuEl$getBoundingCl.height,\n    menuTop = _menuEl$getBoundingCl.top;\n  var _menuEl$offsetParent$ = menuEl.offsetParent.getBoundingClientRect(),\n    containerTop = _menuEl$offsetParent$.top;\n  var viewHeight = isFixedPosition ? window.innerHeight : normalizedHeight(scrollParent);\n  var scrollTop = getScrollTop(scrollParent);\n  var marginBottom = parseInt(getComputedStyle(menuEl).marginBottom, 10);\n  var marginTop = parseInt(getComputedStyle(menuEl).marginTop, 10);\n  var viewSpaceAbove = containerTop - marginTop;\n  var viewSpaceBelow = viewHeight - menuTop;\n  var scrollSpaceAbove = viewSpaceAbove + scrollTop;\n  var scrollSpaceBelow = scrollHeight - scrollTop - menuTop;\n  var scrollDown = menuBottom - viewHeight + scrollTop + marginBottom;\n  var scrollUp = scrollTop + menuTop - marginTop;\n  var scrollDuration = 160;\n  switch (preferredPlacement) {\n    case 'auto':\n    case 'bottom':\n      // 1: the menu will fit, do nothing\n      if (viewSpaceBelow >= menuHeight) {\n        return {\n          placement: 'bottom',\n          maxHeight: preferredMaxHeight\n        };\n      }\n\n      // 2: the menu will fit, if scrolled\n      if (scrollSpaceBelow >= menuHeight && !isFixedPosition) {\n        if (shouldScroll) {\n          animatedScrollTo(scrollParent, scrollDown, scrollDuration);\n        }\n        return {\n          placement: 'bottom',\n          maxHeight: preferredMaxHeight\n        };\n      }\n\n      // 3: the menu will fit, if constrained\n      if (!isFixedPosition && scrollSpaceBelow >= minHeight || isFixedPosition && viewSpaceBelow >= minHeight) {\n        if (shouldScroll) {\n          animatedScrollTo(scrollParent, scrollDown, scrollDuration);\n        }\n\n        // we want to provide as much of the menu as possible to the user,\n        // so give them whatever is available below rather than the minHeight.\n        var constrainedHeight = isFixedPosition ? viewSpaceBelow - marginBottom : scrollSpaceBelow - marginBottom;\n        return {\n          placement: 'bottom',\n          maxHeight: constrainedHeight\n        };\n      }\n\n      // 4. Forked beviour when there isn't enough space below\n\n      // AUTO: flip the menu, render above\n      if (preferredPlacement === 'auto' || isFixedPosition) {\n        // may need to be constrained after flipping\n        var _constrainedHeight = preferredMaxHeight;\n        var spaceAbove = isFixedPosition ? viewSpaceAbove : scrollSpaceAbove;\n        if (spaceAbove >= minHeight) {\n          _constrainedHeight = Math.min(spaceAbove - marginBottom - controlHeight, preferredMaxHeight);\n        }\n        return {\n          placement: 'top',\n          maxHeight: _constrainedHeight\n        };\n      }\n\n      // BOTTOM: allow browser to increase scrollable area and immediately set scroll\n      if (preferredPlacement === 'bottom') {\n        if (shouldScroll) {\n          scrollTo(scrollParent, scrollDown);\n        }\n        return {\n          placement: 'bottom',\n          maxHeight: preferredMaxHeight\n        };\n      }\n      break;\n    case 'top':\n      // 1: the menu will fit, do nothing\n      if (viewSpaceAbove >= menuHeight) {\n        return {\n          placement: 'top',\n          maxHeight: preferredMaxHeight\n        };\n      }\n\n      // 2: the menu will fit, if scrolled\n      if (scrollSpaceAbove >= menuHeight && !isFixedPosition) {\n        if (shouldScroll) {\n          animatedScrollTo(scrollParent, scrollUp, scrollDuration);\n        }\n        return {\n          placement: 'top',\n          maxHeight: preferredMaxHeight\n        };\n      }\n\n      // 3: the menu will fit, if constrained\n      if (!isFixedPosition && scrollSpaceAbove >= minHeight || isFixedPosition && viewSpaceAbove >= minHeight) {\n        var _constrainedHeight2 = preferredMaxHeight;\n\n        // we want to provide as much of the menu as possible to the user,\n        // so give them whatever is available below rather than the minHeight.\n        if (!isFixedPosition && scrollSpaceAbove >= minHeight || isFixedPosition && viewSpaceAbove >= minHeight) {\n          _constrainedHeight2 = isFixedPosition ? viewSpaceAbove - marginTop : scrollSpaceAbove - marginTop;\n        }\n        if (shouldScroll) {\n          animatedScrollTo(scrollParent, scrollUp, scrollDuration);\n        }\n        return {\n          placement: 'top',\n          maxHeight: _constrainedHeight2\n        };\n      }\n\n      // 4. not enough space, the browser WILL NOT increase scrollable area when\n      // absolutely positioned element rendered above the viewport (only below).\n      // Flip the menu, render below\n      return {\n        placement: 'bottom',\n        maxHeight: preferredMaxHeight\n      };\n    default:\n      throw new Error(\"Invalid placement provided \\\"\".concat(preferredPlacement, \"\\\".\"));\n  }\n  return defaultState;\n}\n\n// Menu Component\n// ------------------------------\n\nfunction alignToControl(placement) {\n  var placementToCSSProp = {\n    bottom: 'top',\n    top: 'bottom'\n  };\n  return placement ? placementToCSSProp[placement] : 'bottom';\n}\nvar coercePlacement = function coercePlacement(p) {\n  return p === 'auto' ? 'bottom' : p;\n};\nvar menuCSS = function menuCSS(_ref2, unstyled) {\n  var _objectSpread2;\n  var placement = _ref2.placement,\n    _ref2$theme = _ref2.theme,\n    borderRadius = _ref2$theme.borderRadius,\n    spacing = _ref2$theme.spacing,\n    colors = _ref2$theme.colors;\n  return _objectSpread((_objectSpread2 = {\n    label: 'menu'\n  }, _defineProperty(_objectSpread2, alignToControl(placement), '100%'), _defineProperty(_objectSpread2, \"position\", 'absolute'), _defineProperty(_objectSpread2, \"width\", '100%'), _defineProperty(_objectSpread2, \"zIndex\", 1), _objectSpread2), unstyled ? {} : {\n    backgroundColor: colors.neutral0,\n    borderRadius: borderRadius,\n    boxShadow: '0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)',\n    marginBottom: spacing.menuGutter,\n    marginTop: spacing.menuGutter\n  });\n};\nvar PortalPlacementContext = /*#__PURE__*/createContext(null);\n\n// NOTE: internal only\nvar MenuPlacer = function MenuPlacer(props) {\n  var children = props.children,\n    minMenuHeight = props.minMenuHeight,\n    maxMenuHeight = props.maxMenuHeight,\n    menuPlacement = props.menuPlacement,\n    menuPosition = props.menuPosition,\n    menuShouldScrollIntoView = props.menuShouldScrollIntoView,\n    theme = props.theme;\n  var _ref3 = useContext(PortalPlacementContext) || {},\n    setPortalPlacement = _ref3.setPortalPlacement;\n  var ref = useRef(null);\n  var _useState = useState(maxMenuHeight),\n    _useState2 = _slicedToArray(_useState, 2),\n    maxHeight = _useState2[0],\n    setMaxHeight = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    placement = _useState4[0],\n    setPlacement = _useState4[1];\n  var controlHeight = theme.spacing.controlHeight;\n  useLayoutEffect(function () {\n    var menuEl = ref.current;\n    if (!menuEl) return;\n\n    // DO NOT scroll if position is fixed\n    var isFixedPosition = menuPosition === 'fixed';\n    var shouldScroll = menuShouldScrollIntoView && !isFixedPosition;\n    var state = getMenuPlacement({\n      maxHeight: maxMenuHeight,\n      menuEl: menuEl,\n      minHeight: minMenuHeight,\n      placement: menuPlacement,\n      shouldScroll: shouldScroll,\n      isFixedPosition: isFixedPosition,\n      controlHeight: controlHeight\n    });\n    setMaxHeight(state.maxHeight);\n    setPlacement(state.placement);\n    setPortalPlacement === null || setPortalPlacement === void 0 ? void 0 : setPortalPlacement(state.placement);\n  }, [maxMenuHeight, menuPlacement, menuPosition, menuShouldScrollIntoView, minMenuHeight, setPortalPlacement, controlHeight]);\n  return children({\n    ref: ref,\n    placerProps: _objectSpread(_objectSpread({}, props), {}, {\n      placement: placement || coercePlacement(menuPlacement),\n      maxHeight: maxHeight\n    })\n  });\n};\nvar Menu = function Menu(props) {\n  var children = props.children,\n    innerRef = props.innerRef,\n    innerProps = props.innerProps;\n  return jsx(\"div\", _extends({}, getStyleProps(props, 'menu', {\n    menu: true\n  }), {\n    ref: innerRef\n  }, innerProps), children);\n};\nvar Menu$1 = Menu;\n\n// ==============================\n// Menu List\n// ==============================\n\nvar menuListCSS = function menuListCSS(_ref4, unstyled) {\n  var maxHeight = _ref4.maxHeight,\n    baseUnit = _ref4.theme.spacing.baseUnit;\n  return _objectSpread({\n    maxHeight: maxHeight,\n    overflowY: 'auto',\n    position: 'relative',\n    // required for offset[Height, Top] > keyboard scroll\n    WebkitOverflowScrolling: 'touch'\n  }, unstyled ? {} : {\n    paddingBottom: baseUnit,\n    paddingTop: baseUnit\n  });\n};\nvar MenuList = function MenuList(props) {\n  var children = props.children,\n    innerProps = props.innerProps,\n    innerRef = props.innerRef,\n    isMulti = props.isMulti;\n  return jsx(\"div\", _extends({}, getStyleProps(props, 'menuList', {\n    'menu-list': true,\n    'menu-list--is-multi': isMulti\n  }), {\n    ref: innerRef\n  }, innerProps), children);\n};\n\n// ==============================\n// Menu Notices\n// ==============================\n\nvar noticeCSS = function noticeCSS(_ref5, unstyled) {\n  var _ref5$theme = _ref5.theme,\n    baseUnit = _ref5$theme.spacing.baseUnit,\n    colors = _ref5$theme.colors;\n  return _objectSpread({\n    textAlign: 'center'\n  }, unstyled ? {} : {\n    color: colors.neutral40,\n    padding: \"\".concat(baseUnit * 2, \"px \").concat(baseUnit * 3, \"px\")\n  });\n};\nvar noOptionsMessageCSS = noticeCSS;\nvar loadingMessageCSS = noticeCSS;\nvar NoOptionsMessage = function NoOptionsMessage(_ref6) {\n  var _ref6$children = _ref6.children,\n    children = _ref6$children === void 0 ? 'No options' : _ref6$children,\n    innerProps = _ref6.innerProps,\n    restProps = _objectWithoutProperties(_ref6, _excluded$3);\n  return jsx(\"div\", _extends({}, getStyleProps(_objectSpread(_objectSpread({}, restProps), {}, {\n    children: children,\n    innerProps: innerProps\n  }), 'noOptionsMessage', {\n    'menu-notice': true,\n    'menu-notice--no-options': true\n  }), innerProps), children);\n};\nvar LoadingMessage = function LoadingMessage(_ref7) {\n  var _ref7$children = _ref7.children,\n    children = _ref7$children === void 0 ? 'Loading...' : _ref7$children,\n    innerProps = _ref7.innerProps,\n    restProps = _objectWithoutProperties(_ref7, _excluded2$1);\n  return jsx(\"div\", _extends({}, getStyleProps(_objectSpread(_objectSpread({}, restProps), {}, {\n    children: children,\n    innerProps: innerProps\n  }), 'loadingMessage', {\n    'menu-notice': true,\n    'menu-notice--loading': true\n  }), innerProps), children);\n};\n\n// ==============================\n// Menu Portal\n// ==============================\n\nvar menuPortalCSS = function menuPortalCSS(_ref8) {\n  var rect = _ref8.rect,\n    offset = _ref8.offset,\n    position = _ref8.position;\n  return {\n    left: rect.left,\n    position: position,\n    top: offset,\n    width: rect.width,\n    zIndex: 1\n  };\n};\nvar MenuPortal = function MenuPortal(props) {\n  var appendTo = props.appendTo,\n    children = props.children,\n    controlElement = props.controlElement,\n    innerProps = props.innerProps,\n    menuPlacement = props.menuPlacement,\n    menuPosition = props.menuPosition;\n  var menuPortalRef = useRef(null);\n  var cleanupRef = useRef(null);\n  var _useState5 = useState(coercePlacement(menuPlacement)),\n    _useState6 = _slicedToArray(_useState5, 2),\n    placement = _useState6[0],\n    setPortalPlacement = _useState6[1];\n  var portalPlacementContext = useMemo(function () {\n    return {\n      setPortalPlacement: setPortalPlacement\n    };\n  }, []);\n  var _useState7 = useState(null),\n    _useState8 = _slicedToArray(_useState7, 2),\n    computedPosition = _useState8[0],\n    setComputedPosition = _useState8[1];\n  var updateComputedPosition = useCallback(function () {\n    if (!controlElement) return;\n    var rect = getBoundingClientObj(controlElement);\n    var scrollDistance = menuPosition === 'fixed' ? 0 : window.pageYOffset;\n    var offset = rect[placement] + scrollDistance;\n    if (offset !== (computedPosition === null || computedPosition === void 0 ? void 0 : computedPosition.offset) || rect.left !== (computedPosition === null || computedPosition === void 0 ? void 0 : computedPosition.rect.left) || rect.width !== (computedPosition === null || computedPosition === void 0 ? void 0 : computedPosition.rect.width)) {\n      setComputedPosition({\n        offset: offset,\n        rect: rect\n      });\n    }\n  }, [controlElement, menuPosition, placement, computedPosition === null || computedPosition === void 0 ? void 0 : computedPosition.offset, computedPosition === null || computedPosition === void 0 ? void 0 : computedPosition.rect.left, computedPosition === null || computedPosition === void 0 ? void 0 : computedPosition.rect.width]);\n  useLayoutEffect(function () {\n    updateComputedPosition();\n  }, [updateComputedPosition]);\n  var runAutoUpdate = useCallback(function () {\n    if (typeof cleanupRef.current === 'function') {\n      cleanupRef.current();\n      cleanupRef.current = null;\n    }\n    if (controlElement && menuPortalRef.current) {\n      cleanupRef.current = autoUpdate(controlElement, menuPortalRef.current, updateComputedPosition, {\n        elementResize: 'ResizeObserver' in window\n      });\n    }\n  }, [controlElement, updateComputedPosition]);\n  useLayoutEffect(function () {\n    runAutoUpdate();\n  }, [runAutoUpdate]);\n  var setMenuPortalElement = useCallback(function (menuPortalElement) {\n    menuPortalRef.current = menuPortalElement;\n    runAutoUpdate();\n  }, [runAutoUpdate]);\n\n  // bail early if required elements aren't present\n  if (!appendTo && menuPosition !== 'fixed' || !computedPosition) return null;\n\n  // same wrapper element whether fixed or portalled\n  var menuWrapper = jsx(\"div\", _extends({\n    ref: setMenuPortalElement\n  }, getStyleProps(_objectSpread(_objectSpread({}, props), {}, {\n    offset: computedPosition.offset,\n    position: menuPosition,\n    rect: computedPosition.rect\n  }), 'menuPortal', {\n    'menu-portal': true\n  }), innerProps), children);\n  return jsx(PortalPlacementContext.Provider, {\n    value: portalPlacementContext\n  }, appendTo ? /*#__PURE__*/createPortal(menuWrapper, appendTo) : menuWrapper);\n};\n\n// ==============================\n// Root Container\n// ==============================\n\nvar containerCSS = function containerCSS(_ref) {\n  var isDisabled = _ref.isDisabled,\n    isRtl = _ref.isRtl;\n  return {\n    label: 'container',\n    direction: isRtl ? 'rtl' : undefined,\n    pointerEvents: isDisabled ? 'none' : undefined,\n    // cancel mouse events when disabled\n    position: 'relative'\n  };\n};\nvar SelectContainer = function SelectContainer(props) {\n  var children = props.children,\n    innerProps = props.innerProps,\n    isDisabled = props.isDisabled,\n    isRtl = props.isRtl;\n  return jsx(\"div\", _extends({}, getStyleProps(props, 'container', {\n    '--is-disabled': isDisabled,\n    '--is-rtl': isRtl\n  }), innerProps), children);\n};\n\n// ==============================\n// Value Container\n// ==============================\n\nvar valueContainerCSS = function valueContainerCSS(_ref2, unstyled) {\n  var spacing = _ref2.theme.spacing,\n    isMulti = _ref2.isMulti,\n    hasValue = _ref2.hasValue,\n    controlShouldRenderValue = _ref2.selectProps.controlShouldRenderValue;\n  return _objectSpread({\n    alignItems: 'center',\n    display: isMulti && hasValue && controlShouldRenderValue ? 'flex' : 'grid',\n    flex: 1,\n    flexWrap: 'wrap',\n    WebkitOverflowScrolling: 'touch',\n    position: 'relative',\n    overflow: 'hidden'\n  }, unstyled ? {} : {\n    padding: \"\".concat(spacing.baseUnit / 2, \"px \").concat(spacing.baseUnit * 2, \"px\")\n  });\n};\nvar ValueContainer = function ValueContainer(props) {\n  var children = props.children,\n    innerProps = props.innerProps,\n    isMulti = props.isMulti,\n    hasValue = props.hasValue;\n  return jsx(\"div\", _extends({}, getStyleProps(props, 'valueContainer', {\n    'value-container': true,\n    'value-container--is-multi': isMulti,\n    'value-container--has-value': hasValue\n  }), innerProps), children);\n};\n\n// ==============================\n// Indicator Container\n// ==============================\n\nvar indicatorsContainerCSS = function indicatorsContainerCSS() {\n  return {\n    alignItems: 'center',\n    alignSelf: 'stretch',\n    display: 'flex',\n    flexShrink: 0\n  };\n};\nvar IndicatorsContainer = function IndicatorsContainer(props) {\n  var children = props.children,\n    innerProps = props.innerProps;\n  return jsx(\"div\", _extends({}, getStyleProps(props, 'indicatorsContainer', {\n    indicators: true\n  }), innerProps), children);\n};\n\nvar _templateObject;\nvar _excluded$2 = [\"size\"],\n  _excluded2 = [\"innerProps\", \"isRtl\", \"size\"];\nfunction _EMOTION_STRINGIFIED_CSS_ERROR__() { return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\"; }\n\n// ==============================\n// Dropdown & Clear Icons\n// ==============================\nvar _ref2 = process.env.NODE_ENV === \"production\" ? {\n  name: \"8mmkcg\",\n  styles: \"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0\"\n} : {\n  name: \"tj5bde-Svg\",\n  styles: \"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0;label:Svg;\",\n  map: \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGljYXRvcnMudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQXlCSSIsImZpbGUiOiJpbmRpY2F0b3JzLnRzeCIsInNvdXJjZXNDb250ZW50IjpbIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsgUmVhY3ROb2RlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsganN4LCBrZXlmcmFtZXMgfSBmcm9tICdAZW1vdGlvbi9yZWFjdCc7XG5cbmltcG9ydCB7XG4gIENvbW1vblByb3BzQW5kQ2xhc3NOYW1lLFxuICBDU1NPYmplY3RXaXRoTGFiZWwsXG4gIEdyb3VwQmFzZSxcbn0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgZ2V0U3R5bGVQcm9wcyB9IGZyb20gJy4uL3V0aWxzJztcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBEcm9wZG93biAmIENsZWFyIEljb25zXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuY29uc3QgU3ZnID0gKHtcbiAgc2l6ZSxcbiAgLi4ucHJvcHNcbn06IEpTWC5JbnRyaW5zaWNFbGVtZW50c1snc3ZnJ10gJiB7IHNpemU6IG51bWJlciB9KSA9PiAoXG4gIDxzdmdcbiAgICBoZWlnaHQ9e3NpemV9XG4gICAgd2lkdGg9e3NpemV9XG4gICAgdmlld0JveD1cIjAgMCAyMCAyMFwiXG4gICAgYXJpYS1oaWRkZW49XCJ0cnVlXCJcbiAgICBmb2N1c2FibGU9XCJmYWxzZVwiXG4gICAgY3NzPXt7XG4gICAgICBkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcbiAgICAgIGZpbGw6ICdjdXJyZW50Q29sb3InLFxuICAgICAgbGluZUhlaWdodDogMSxcbiAgICAgIHN0cm9rZTogJ2N1cnJlbnRDb2xvcicsXG4gICAgICBzdHJva2VXaWR0aDogMCxcbiAgICB9fVxuICAgIHsuLi5wcm9wc31cbiAgLz5cbik7XG5cbmV4cG9ydCB0eXBlIENyb3NzSWNvblByb3BzID0gSlNYLkludHJpbnNpY0VsZW1lbnRzWydzdmcnXSAmIHsgc2l6ZT86IG51bWJlciB9O1xuZXhwb3J0IGNvbnN0IENyb3NzSWNvbiA9IChwcm9wczogQ3Jvc3NJY29uUHJvcHMpID0+IChcbiAgPFN2ZyBzaXplPXsyMH0gey4uLnByb3BzfT5cbiAgICA8cGF0aCBkPVwiTTE0LjM0OCAxNC44NDljLTAuNDY5IDAuNDY5LTEuMjI5IDAuNDY5LTEuNjk3IDBsLTIuNjUxLTMuMDMwLTIuNjUxIDMuMDI5Yy0wLjQ2OSAwLjQ2OS0xLjIyOSAwLjQ2OS0xLjY5NyAwLTAuNDY5LTAuNDY5LTAuNDY5LTEuMjI5IDAtMS42OTdsMi43NTgtMy4xNS0yLjc1OS0zLjE1MmMtMC40NjktMC40NjktMC40NjktMS4yMjggMC0xLjY5N3MxLjIyOC0wLjQ2OSAxLjY5NyAwbDIuNjUyIDMuMDMxIDIuNjUxLTMuMDMxYzAuNDY5LTAuNDY5IDEuMjI4LTAuNDY5IDEuNjk3IDBzMC40NjkgMS4yMjkgMCAxLjY5N2wtMi43NTggMy4xNTIgMi43NTggMy4xNWMwLjQ2OSAwLjQ2OSAwLjQ2OSAxLjIyOSAwIDEuNjk4elwiIC8+XG4gIDwvU3ZnPlxuKTtcbmV4cG9ydCB0eXBlIERvd25DaGV2cm9uUHJvcHMgPSBKU1guSW50cmluc2ljRWxlbWVudHNbJ3N2ZyddICYgeyBzaXplPzogbnVtYmVyIH07XG5leHBvcnQgY29uc3QgRG93bkNoZXZyb24gPSAocHJvcHM6IERvd25DaGV2cm9uUHJvcHMpID0+IChcbiAgPFN2ZyBzaXplPXsyMH0gey4uLnByb3BzfT5cbiAgICA8cGF0aCBkPVwiTTQuNTE2IDcuNTQ4YzAuNDM2LTAuNDQ2IDEuMDQzLTAuNDgxIDEuNTc2IDBsMy45MDggMy43NDcgMy45MDgtMy43NDdjMC41MzMtMC40ODEgMS4xNDEtMC40NDYgMS41NzQgMCAwLjQzNiAwLjQ0NSAwLjQwOCAxLjE5NyAwIDEuNjE1LTAuNDA2IDAuNDE4LTQuNjk1IDQuNTAyLTQuNjk1IDQuNTAyLTAuMjE3IDAuMjIzLTAuNTAyIDAuMzM1LTAuNzg3IDAuMzM1cy0wLjU3LTAuMTEyLTAuNzg5LTAuMzM1YzAgMC00LjI4Ny00LjA4NC00LjY5NS00LjUwMnMtMC40MzYtMS4xNyAwLTEuNjE1elwiIC8+XG4gIDwvU3ZnPlxuKTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBEcm9wZG93biAmIENsZWFyIEJ1dHRvbnNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgaW50ZXJmYWNlIERyb3Bkb3duSW5kaWNhdG9yUHJvcHM8XG4gIE9wdGlvbiA9IHVua25vd24sXG4gIElzTXVsdGkgZXh0ZW5kcyBib29sZWFuID0gYm9vbGVhbixcbiAgR3JvdXAgZXh0ZW5kcyBHcm91cEJhc2U8T3B0aW9uPiA9IEdyb3VwQmFzZTxPcHRpb24+XG4+IGV4dGVuZHMgQ29tbW9uUHJvcHNBbmRDbGFzc05hbWU8T3B0aW9uLCBJc011bHRpLCBHcm91cD4ge1xuICAvKiogVGhlIGNoaWxkcmVuIHRvIGJlIHJlbmRlcmVkIGluc2lkZSB0aGUgaW5kaWNhdG9yLiAqL1xuICBjaGlsZHJlbj86IFJlYWN0Tm9kZTtcbiAgLyoqIFByb3BzIHRoYXQgd2lsbCBiZSBwYXNzZWQgb24gdG8gdGhlIGNoaWxkcmVuLiAqL1xuICBpbm5lclByb3BzOiBKU1guSW50cmluc2ljRWxlbWVudHNbJ2RpdiddO1xuICAvKiogVGhlIGZvY3VzZWQgc3RhdGUgb2YgdGhlIHNlbGVjdC4gKi9cbiAgaXNGb2N1c2VkOiBib29sZWFuO1xuICBpc0Rpc2FibGVkOiBib29sZWFuO1xufVxuXG5jb25zdCBiYXNlQ1NTID0gPFxuICBPcHRpb24sXG4gIElzTXVsdGkgZXh0ZW5kcyBib29sZWFuLFxuICBHcm91cCBleHRlbmRzIEdyb3VwQmFzZTxPcHRpb24+XG4+KFxuICB7XG4gICAgaXNGb2N1c2VkLFxuICAgIHRoZW1lOiB7XG4gICAgICBzcGFjaW5nOiB7IGJhc2VVbml0IH0sXG4gICAgICBjb2xvcnMsXG4gICAgfSxcbiAgfTpcbiAgICB8IERyb3Bkb3duSW5kaWNhdG9yUHJvcHM8T3B0aW9uLCBJc011bHRpLCBHcm91cD5cbiAgICB8IENsZWFySW5kaWNhdG9yUHJvcHM8T3B0aW9uLCBJc011bHRpLCBHcm91cD4sXG4gIHVuc3R5bGVkOiBib29sZWFuXG4pOiBDU1NPYmplY3RXaXRoTGFiZWwgPT4gKHtcbiAgbGFiZWw6ICdpbmRpY2F0b3JDb250YWluZXInLFxuICBkaXNwbGF5OiAnZmxleCcsXG4gIHRyYW5zaXRpb246ICdjb2xvciAxNTBtcycsXG4gIC4uLih1bnN0eWxlZFxuICAgID8ge31cbiAgICA6IHtcbiAgICAgICAgY29sb3I6IGlzRm9jdXNlZCA/IGNvbG9ycy5uZXV0cmFsNjAgOiBjb2xvcnMubmV1dHJhbDIwLFxuICAgICAgICBwYWRkaW5nOiBiYXNlVW5pdCAqIDIsXG4gICAgICAgICc6aG92ZXInOiB7XG4gICAgICAgICAgY29sb3I6IGlzRm9jdXNlZCA/IGNvbG9ycy5uZXV0cmFsODAgOiBjb2xvcnMubmV1dHJhbDQwLFxuICAgICAgICB9LFxuICAgICAgfSksXG59KTtcblxuZXhwb3J0IGNvbnN0IGRyb3Bkb3duSW5kaWNhdG9yQ1NTID0gYmFzZUNTUztcbmV4cG9ydCBjb25zdCBEcm9wZG93bkluZGljYXRvciA9IDxcbiAgT3B0aW9uLFxuICBJc011bHRpIGV4dGVuZHMgYm9vbGVhbixcbiAgR3JvdXAgZXh0ZW5kcyBHcm91cEJhc2U8T3B0aW9uPlxuPihcbiAgcHJvcHM6IERyb3Bkb3duSW5kaWNhdG9yUHJvcHM8T3B0aW9uLCBJc011bHRpLCBHcm91cD5cbikgPT4ge1xuICBjb25zdCB7IGNoaWxkcmVuLCBpbm5lclByb3BzIH0gPSBwcm9wcztcbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICB7Li4uZ2V0U3R5bGVQcm9wcyhwcm9wcywgJ2Ryb3Bkb3duSW5kaWNhdG9yJywge1xuICAgICAgICBpbmRpY2F0b3I6IHRydWUsXG4gICAgICAgICdkcm9wZG93bi1pbmRpY2F0b3InOiB0cnVlLFxuICAgICAgfSl9XG4gICAgICB7Li4uaW5uZXJQcm9wc31cbiAgICA+XG4gICAgICB7Y2hpbGRyZW4gfHwgPERvd25DaGV2cm9uIC8+fVxuICAgIDwvZGl2PlxuICApO1xufTtcblxuZXhwb3J0IGludGVyZmFjZSBDbGVhckluZGljYXRvclByb3BzPFxuICBPcHRpb24gPSB1bmtub3duLFxuICBJc011bHRpIGV4dGVuZHMgYm9vbGVhbiA9IGJvb2xlYW4sXG4gIEdyb3VwIGV4dGVuZHMgR3JvdXBCYXNlPE9wdGlvbj4gPSBHcm91cEJhc2U8T3B0aW9uPlxuPiBleHRlbmRzIENvbW1vblByb3BzQW5kQ2xhc3NOYW1lPE9wdGlvbiwgSXNNdWx0aSwgR3JvdXA+IHtcbiAgLyoqIFRoZSBjaGlsZHJlbiB0byBiZSByZW5kZXJlZCBpbnNpZGUgdGhlIGluZGljYXRvci4gKi9cbiAgY2hpbGRyZW4/OiBSZWFjdE5vZGU7XG4gIC8qKiBQcm9wcyB0aGF0IHdpbGwgYmUgcGFzc2VkIG9uIHRvIHRoZSBjaGlsZHJlbi4gKi9cbiAgaW5uZXJQcm9wczogSlNYLkludHJpbnNpY0VsZW1lbnRzWydkaXYnXTtcbiAgLyoqIFRoZSBmb2N1c2VkIHN0YXRlIG9mIHRoZSBzZWxlY3QuICovXG4gIGlzRm9jdXNlZDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNvbnN0IGNsZWFySW5kaWNhdG9yQ1NTID0gYmFzZUNTUztcbmV4cG9ydCBjb25zdCBDbGVhckluZGljYXRvciA9IDxcbiAgT3B0aW9uLFxuICBJc011bHRpIGV4dGVuZHMgYm9vbGVhbixcbiAgR3JvdXAgZXh0ZW5kcyBHcm91cEJhc2U8T3B0aW9uPlxuPihcbiAgcHJvcHM6IENsZWFySW5kaWNhdG9yUHJvcHM8T3B0aW9uLCBJc011bHRpLCBHcm91cD5cbikgPT4ge1xuICBjb25zdCB7IGNoaWxkcmVuLCBpbm5lclByb3BzIH0gPSBwcm9wcztcbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICB7Li4uZ2V0U3R5bGVQcm9wcyhwcm9wcywgJ2NsZWFySW5kaWNhdG9yJywge1xuICAgICAgICBpbmRpY2F0b3I6IHRydWUsXG4gICAgICAgICdjbGVhci1pbmRpY2F0b3InOiB0cnVlLFxuICAgICAgfSl9XG4gICAgICB7Li4uaW5uZXJQcm9wc31cbiAgICA+XG4gICAgICB7Y2hpbGRyZW4gfHwgPENyb3NzSWNvbiAvPn1cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gU2VwYXJhdG9yXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGludGVyZmFjZSBJbmRpY2F0b3JTZXBhcmF0b3JQcm9wczxcbiAgT3B0aW9uID0gdW5rbm93bixcbiAgSXNNdWx0aSBleHRlbmRzIGJvb2xlYW4gPSBib29sZWFuLFxuICBHcm91cCBleHRlbmRzIEdyb3VwQmFzZTxPcHRpb24+ID0gR3JvdXBCYXNlPE9wdGlvbj5cbj4gZXh0ZW5kcyBDb21tb25Qcm9wc0FuZENsYXNzTmFtZTxPcHRpb24sIElzTXVsdGksIEdyb3VwPiB7XG4gIGlzRGlzYWJsZWQ6IGJvb2xlYW47XG4gIGlzRm9jdXNlZDogYm9vbGVhbjtcbiAgaW5uZXJQcm9wcz86IEpTWC5JbnRyaW5zaWNFbGVtZW50c1snc3BhbiddO1xufVxuXG5leHBvcnQgY29uc3QgaW5kaWNhdG9yU2VwYXJhdG9yQ1NTID0gPFxuICBPcHRpb24sXG4gIElzTXVsdGkgZXh0ZW5kcyBib29sZWFuLFxuICBHcm91cCBleHRlbmRzIEdyb3VwQmFzZTxPcHRpb24+XG4+KFxuICB7XG4gICAgaXNEaXNhYmxlZCxcbiAgICB0aGVtZToge1xuICAgICAgc3BhY2luZzogeyBiYXNlVW5pdCB9LFxuICAgICAgY29sb3JzLFxuICAgIH0sXG4gIH06IEluZGljYXRvclNlcGFyYXRvclByb3BzPE9wdGlvbiwgSXNNdWx0aSwgR3JvdXA+LFxuICB1bnN0eWxlZDogYm9vbGVhblxuKTogQ1NTT2JqZWN0V2l0aExhYmVsID0+ICh7XG4gIGxhYmVsOiAnaW5kaWNhdG9yU2VwYXJhdG9yJyxcbiAgYWxpZ25TZWxmOiAnc3RyZXRjaCcsXG4gIHdpZHRoOiAxLFxuICAuLi4odW5zdHlsZWRcbiAgICA/IHt9XG4gICAgOiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogaXNEaXNhYmxlZCA/IGNvbG9ycy5uZXV0cmFsMTAgOiBjb2xvcnMubmV1dHJhbDIwLFxuICAgICAgICBtYXJnaW5Cb3R0b206IGJhc2VVbml0ICogMixcbiAgICAgICAgbWFyZ2luVG9wOiBiYXNlVW5pdCAqIDIsXG4gICAgICB9KSxcbn0pO1xuXG5leHBvcnQgY29uc3QgSW5kaWNhdG9yU2VwYXJhdG9yID0gPFxuICBPcHRpb24sXG4gIElzTXVsdGkgZXh0ZW5kcyBib29sZWFuLFxuICBHcm91cCBleHRlbmRzIEdyb3VwQmFzZTxPcHRpb24+XG4+KFxuICBwcm9wczogSW5kaWNhdG9yU2VwYXJhdG9yUHJvcHM8T3B0aW9uLCBJc011bHRpLCBHcm91cD5cbikgPT4ge1xuICBjb25zdCB7IGlubmVyUHJvcHMgfSA9IHByb3BzO1xuICByZXR1cm4gKFxuICAgIDxzcGFuXG4gICAgICB7Li4uaW5uZXJQcm9wc31cbiAgICAgIHsuLi5nZXRTdHlsZVByb3BzKHByb3BzLCAnaW5kaWNhdG9yU2VwYXJhdG9yJywge1xuICAgICAgICAnaW5kaWNhdG9yLXNlcGFyYXRvcic6IHRydWUsXG4gICAgICB9KX1cbiAgICAvPlxuICApO1xufTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBMb2FkaW5nXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuY29uc3QgbG9hZGluZ0RvdEFuaW1hdGlvbnMgPSBrZXlmcmFtZXNgXG4gIDAlLCA4MCUsIDEwMCUgeyBvcGFjaXR5OiAwOyB9XG4gIDQwJSB7IG9wYWNpdHk6IDE7IH1cbmA7XG5cbmV4cG9ydCBjb25zdCBsb2FkaW5nSW5kaWNhdG9yQ1NTID0gPFxuICBPcHRpb24sXG4gIElzTXVsdGkgZXh0ZW5kcyBib29sZWFuLFxuICBHcm91cCBleHRlbmRzIEdyb3VwQmFzZTxPcHRpb24+XG4+KFxuICB7XG4gICAgaXNGb2N1c2VkLFxuICAgIHNpemUsXG4gICAgdGhlbWU6IHtcbiAgICAgIGNvbG9ycyxcbiAgICAgIHNwYWNpbmc6IHsgYmFzZVVuaXQgfSxcbiAgICB9LFxuICB9OiBMb2FkaW5nSW5kaWNhdG9yUHJvcHM8T3B0aW9uLCBJc011bHRpLCBHcm91cD4sXG4gIHVuc3R5bGVkOiBib29sZWFuXG4pOiBDU1NPYmplY3RXaXRoTGFiZWwgPT4gKHtcbiAgbGFiZWw6ICdsb2FkaW5nSW5kaWNhdG9yJyxcbiAgZGlzcGxheTogJ2ZsZXgnLFxuICB0cmFuc2l0aW9uOiAnY29sb3IgMTUwbXMnLFxuICBhbGlnblNlbGY6ICdjZW50ZXInLFxuICBmb250U2l6ZTogc2l6ZSxcbiAgbGluZUhlaWdodDogMSxcbiAgbWFyZ2luUmlnaHQ6IHNpemUsXG4gIHRleHRBbGlnbjogJ2NlbnRlcicsXG4gIHZlcnRpY2FsQWxpZ246ICdtaWRkbGUnLFxuICAuLi4odW5zdHlsZWRcbiAgICA/IHt9XG4gICAgOiB7XG4gICAgICAgIGNvbG9yOiBpc0ZvY3VzZWQgPyBjb2xvcnMubmV1dHJhbDYwIDogY29sb3JzLm5ldXRyYWwyMCxcbiAgICAgICAgcGFkZGluZzogYmFzZVVuaXQgKiAyLFxuICAgICAgfSksXG59KTtcblxuaW50ZXJmYWNlIExvYWRpbmdEb3RQcm9wcyB7XG4gIGRlbGF5OiBudW1iZXI7XG4gIG9mZnNldDogYm9vbGVhbjtcbn1cbmNvbnN0IExvYWRpbmdEb3QgPSAoeyBkZWxheSwgb2Zmc2V0IH06IExvYWRpbmdEb3RQcm9wcykgPT4gKFxuICA8c3BhblxuICAgIGNzcz17e1xuICAgICAgYW5pbWF0aW9uOiBgJHtsb2FkaW5nRG90QW5pbWF0aW9uc30gMXMgZWFzZS1pbi1vdXQgJHtkZWxheX1tcyBpbmZpbml0ZTtgLFxuICAgICAgYmFja2dyb3VuZENvbG9yOiAnY3VycmVudENvbG9yJyxcbiAgICAgIGJvcmRlclJhZGl1czogJzFlbScsXG4gICAgICBkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcbiAgICAgIG1hcmdpbkxlZnQ6IG9mZnNldCA/ICcxZW0nIDogdW5kZWZpbmVkLFxuICAgICAgaGVpZ2h0OiAnMWVtJyxcbiAgICAgIHZlcnRpY2FsQWxpZ246ICd0b3AnLFxuICAgICAgd2lkdGg6ICcxZW0nLFxuICAgIH19XG4gIC8+XG4pO1xuXG5leHBvcnQgaW50ZXJmYWNlIExvYWRpbmdJbmRpY2F0b3JQcm9wczxcbiAgT3B0aW9uID0gdW5rbm93bixcbiAgSXNNdWx0aSBleHRlbmRzIGJvb2xlYW4gPSBib29sZWFuLFxuICBHcm91cCBleHRlbmRzIEdyb3VwQmFzZTxPcHRpb24+ID0gR3JvdXBCYXNlPE9wdGlvbj5cbj4gZXh0ZW5kcyBDb21tb25Qcm9wc0FuZENsYXNzTmFtZTxPcHRpb24sIElzTXVsdGksIEdyb3VwPiB7XG4gIC8qKiBQcm9wcyB0aGF0IHdpbGwgYmUgcGFzc2VkIG9uIHRvIHRoZSBjaGlsZHJlbi4gKi9cbiAgaW5uZXJQcm9wczogSlNYLkludHJpbnNpY0VsZW1lbnRzWydkaXYnXTtcbiAgLyoqIFRoZSBmb2N1c2VkIHN0YXRlIG9mIHRoZSBzZWxlY3QuICovXG4gIGlzRm9jdXNlZDogYm9vbGVhbjtcbiAgaXNEaXNhYmxlZDogYm9vbGVhbjtcbiAgLyoqIFNldCBzaXplIG9mIHRoZSBjb250YWluZXIuICovXG4gIHNpemU6IG51bWJlcjtcbn1cbmV4cG9ydCBjb25zdCBMb2FkaW5nSW5kaWNhdG9yID0gPFxuICBPcHRpb24sXG4gIElzTXVsdGkgZXh0ZW5kcyBib29sZWFuLFxuICBHcm91cCBleHRlbmRzIEdyb3VwQmFzZTxPcHRpb24+XG4+KHtcbiAgaW5uZXJQcm9wcyxcbiAgaXNSdGwsXG4gIHNpemUgPSA0LFxuICAuLi5yZXN0UHJvcHNcbn06IExvYWRpbmdJbmRpY2F0b3JQcm9wczxPcHRpb24sIElzTXVsdGksIEdyb3VwPikgPT4ge1xuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIHsuLi5nZXRTdHlsZVByb3BzKFxuICAgICAgICB7IC4uLnJlc3RQcm9wcywgaW5uZXJQcm9wcywgaXNSdGwsIHNpemUgfSxcbiAgICAgICAgJ2xvYWRpbmdJbmRpY2F0b3InLFxuICAgICAgICB7XG4gICAgICAgICAgaW5kaWNhdG9yOiB0cnVlLFxuICAgICAgICAgICdsb2FkaW5nLWluZGljYXRvcic6IHRydWUsXG4gICAgICAgIH1cbiAgICAgICl9XG4gICAgICB7Li4uaW5uZXJQcm9wc31cbiAgICA+XG4gICAgICA8TG9hZGluZ0RvdCBkZWxheT17MH0gb2Zmc2V0PXtpc1J0bH0gLz5cbiAgICAgIDxMb2FkaW5nRG90IGRlbGF5PXsxNjB9IG9mZnNldCAvPlxuICAgICAgPExvYWRpbmdEb3QgZGVsYXk9ezMyMH0gb2Zmc2V0PXshaXNSdGx9IC8+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuIl19 */\",\n  toString: _EMOTION_STRINGIFIED_CSS_ERROR__\n};\nvar Svg = function Svg(_ref) {\n  var size = _ref.size,\n    props = _objectWithoutProperties(_ref, _excluded$2);\n  return jsx(\"svg\", _extends({\n    height: size,\n    width: size,\n    viewBox: \"0 0 20 20\",\n    \"aria-hidden\": \"true\",\n    focusable: \"false\",\n    css: _ref2\n  }, props));\n};\nvar CrossIcon = function CrossIcon(props) {\n  return jsx(Svg, _extends({\n    size: 20\n  }, props), jsx(\"path\", {\n    d: \"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z\"\n  }));\n};\nvar DownChevron = function DownChevron(props) {\n  return jsx(Svg, _extends({\n    size: 20\n  }, props), jsx(\"path\", {\n    d: \"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z\"\n  }));\n};\n\n// ==============================\n// Dropdown & Clear Buttons\n// ==============================\n\nvar baseCSS = function baseCSS(_ref3, unstyled) {\n  var isFocused = _ref3.isFocused,\n    _ref3$theme = _ref3.theme,\n    baseUnit = _ref3$theme.spacing.baseUnit,\n    colors = _ref3$theme.colors;\n  return _objectSpread({\n    label: 'indicatorContainer',\n    display: 'flex',\n    transition: 'color 150ms'\n  }, unstyled ? {} : {\n    color: isFocused ? colors.neutral60 : colors.neutral20,\n    padding: baseUnit * 2,\n    ':hover': {\n      color: isFocused ? colors.neutral80 : colors.neutral40\n    }\n  });\n};\nvar dropdownIndicatorCSS = baseCSS;\nvar DropdownIndicator = function DropdownIndicator(props) {\n  var children = props.children,\n    innerProps = props.innerProps;\n  return jsx(\"div\", _extends({}, getStyleProps(props, 'dropdownIndicator', {\n    indicator: true,\n    'dropdown-indicator': true\n  }), innerProps), children || jsx(DownChevron, null));\n};\nvar clearIndicatorCSS = baseCSS;\nvar ClearIndicator = function ClearIndicator(props) {\n  var children = props.children,\n    innerProps = props.innerProps;\n  return jsx(\"div\", _extends({}, getStyleProps(props, 'clearIndicator', {\n    indicator: true,\n    'clear-indicator': true\n  }), innerProps), children || jsx(CrossIcon, null));\n};\n\n// ==============================\n// Separator\n// ==============================\n\nvar indicatorSeparatorCSS = function indicatorSeparatorCSS(_ref4, unstyled) {\n  var isDisabled = _ref4.isDisabled,\n    _ref4$theme = _ref4.theme,\n    baseUnit = _ref4$theme.spacing.baseUnit,\n    colors = _ref4$theme.colors;\n  return _objectSpread({\n    label: 'indicatorSeparator',\n    alignSelf: 'stretch',\n    width: 1\n  }, unstyled ? {} : {\n    backgroundColor: isDisabled ? colors.neutral10 : colors.neutral20,\n    marginBottom: baseUnit * 2,\n    marginTop: baseUnit * 2\n  });\n};\nvar IndicatorSeparator = function IndicatorSeparator(props) {\n  var innerProps = props.innerProps;\n  return jsx(\"span\", _extends({}, innerProps, getStyleProps(props, 'indicatorSeparator', {\n    'indicator-separator': true\n  })));\n};\n\n// ==============================\n// Loading\n// ==============================\n\nvar loadingDotAnimations = keyframes(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  0%, 80%, 100% { opacity: 0; }\\n  40% { opacity: 1; }\\n\"])));\nvar loadingIndicatorCSS = function loadingIndicatorCSS(_ref5, unstyled) {\n  var isFocused = _ref5.isFocused,\n    size = _ref5.size,\n    _ref5$theme = _ref5.theme,\n    colors = _ref5$theme.colors,\n    baseUnit = _ref5$theme.spacing.baseUnit;\n  return _objectSpread({\n    label: 'loadingIndicator',\n    display: 'flex',\n    transition: 'color 150ms',\n    alignSelf: 'center',\n    fontSize: size,\n    lineHeight: 1,\n    marginRight: size,\n    textAlign: 'center',\n    verticalAlign: 'middle'\n  }, unstyled ? {} : {\n    color: isFocused ? colors.neutral60 : colors.neutral20,\n    padding: baseUnit * 2\n  });\n};\nvar LoadingDot = function LoadingDot(_ref6) {\n  var delay = _ref6.delay,\n    offset = _ref6.offset;\n  return jsx(\"span\", {\n    css: /*#__PURE__*/css$2({\n      animation: \"\".concat(loadingDotAnimations, \" 1s ease-in-out \").concat(delay, \"ms infinite;\"),\n      backgroundColor: 'currentColor',\n      borderRadius: '1em',\n      display: 'inline-block',\n      marginLeft: offset ? '1em' : undefined,\n      height: '1em',\n      verticalAlign: 'top',\n      width: '1em'\n    }, process.env.NODE_ENV === \"production\" ? \"\" : \";label:LoadingDot;\", process.env.NODE_ENV === \"production\" ? \"\" : \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGljYXRvcnMudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQW1RSSIsImZpbGUiOiJpbmRpY2F0b3JzLnRzeCIsInNvdXJjZXNDb250ZW50IjpbIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsgUmVhY3ROb2RlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsganN4LCBrZXlmcmFtZXMgfSBmcm9tICdAZW1vdGlvbi9yZWFjdCc7XG5cbmltcG9ydCB7XG4gIENvbW1vblByb3BzQW5kQ2xhc3NOYW1lLFxuICBDU1NPYmplY3RXaXRoTGFiZWwsXG4gIEdyb3VwQmFzZSxcbn0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgZ2V0U3R5bGVQcm9wcyB9IGZyb20gJy4uL3V0aWxzJztcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBEcm9wZG93biAmIENsZWFyIEljb25zXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuY29uc3QgU3ZnID0gKHtcbiAgc2l6ZSxcbiAgLi4ucHJvcHNcbn06IEpTWC5JbnRyaW5zaWNFbGVtZW50c1snc3ZnJ10gJiB7IHNpemU6IG51bWJlciB9KSA9PiAoXG4gIDxzdmdcbiAgICBoZWlnaHQ9e3NpemV9XG4gICAgd2lkdGg9e3NpemV9XG4gICAgdmlld0JveD1cIjAgMCAyMCAyMFwiXG4gICAgYXJpYS1oaWRkZW49XCJ0cnVlXCJcbiAgICBmb2N1c2FibGU9XCJmYWxzZVwiXG4gICAgY3NzPXt7XG4gICAgICBkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcbiAgICAgIGZpbGw6ICdjdXJyZW50Q29sb3InLFxuICAgICAgbGluZUhlaWdodDogMSxcbiAgICAgIHN0cm9rZTogJ2N1cnJlbnRDb2xvcicsXG4gICAgICBzdHJva2VXaWR0aDogMCxcbiAgICB9fVxuICAgIHsuLi5wcm9wc31cbiAgLz5cbik7XG5cbmV4cG9ydCB0eXBlIENyb3NzSWNvblByb3BzID0gSlNYLkludHJpbnNpY0VsZW1lbnRzWydzdmcnXSAmIHsgc2l6ZT86IG51bWJlciB9O1xuZXhwb3J0IGNvbnN0IENyb3NzSWNvbiA9IChwcm9wczogQ3Jvc3NJY29uUHJvcHMpID0+IChcbiAgPFN2ZyBzaXplPXsyMH0gey4uLnByb3BzfT5cbiAgICA8cGF0aCBkPVwiTTE0LjM0OCAxNC44NDljLTAuNDY5IDAuNDY5LTEuMjI5IDAuNDY5LTEuNjk3IDBsLTIuNjUxLTMuMDMwLTIuNjUxIDMuMDI5Yy0wLjQ2OSAwLjQ2OS0xLjIyOSAwLjQ2OS0xLjY5NyAwLTAuNDY5LTAuNDY5LTAuNDY5LTEuMjI5IDAtMS42OTdsMi43NTgtMy4xNS0yLjc1OS0zLjE1MmMtMC40NjktMC40NjktMC40NjktMS4yMjggMC0xLjY5N3MxLjIyOC0wLjQ2OSAxLjY5NyAwbDIuNjUyIDMuMDMxIDIuNjUxLTMuMDMxYzAuNDY5LTAuNDY5IDEuMjI4LTAuNDY5IDEuNjk3IDBzMC40NjkgMS4yMjkgMCAxLjY5N2wtMi43NTggMy4xNTIgMi43NTggMy4xNWMwLjQ2OSAwLjQ2OSAwLjQ2OSAxLjIyOSAwIDEuNjk4elwiIC8+XG4gIDwvU3ZnPlxuKTtcbmV4cG9ydCB0eXBlIERvd25DaGV2cm9uUHJvcHMgPSBKU1guSW50cmluc2ljRWxlbWVudHNbJ3N2ZyddICYgeyBzaXplPzogbnVtYmVyIH07XG5leHBvcnQgY29uc3QgRG93bkNoZXZyb24gPSAocHJvcHM6IERvd25DaGV2cm9uUHJvcHMpID0+IChcbiAgPFN2ZyBzaXplPXsyMH0gey4uLnByb3BzfT5cbiAgICA8cGF0aCBkPVwiTTQuNTE2IDcuNTQ4YzAuNDM2LTAuNDQ2IDEuMDQzLTAuNDgxIDEuNTc2IDBsMy45MDggMy43NDcgMy45MDgtMy43NDdjMC41MzMtMC40ODEgMS4xNDEtMC40NDYgMS41NzQgMCAwLjQzNiAwLjQ0NSAwLjQwOCAxLjE5NyAwIDEuNjE1LTAuNDA2IDAuNDE4LTQuNjk1IDQuNTAyLTQuNjk1IDQuNTAyLTAuMjE3IDAuMjIzLTAuNTAyIDAuMzM1LTAuNzg3IDAuMzM1cy0wLjU3LTAuMTEyLTAuNzg5LTAuMzM1YzAgMC00LjI4Ny00LjA4NC00LjY5NS00LjUwMnMtMC40MzYtMS4xNyAwLTEuNjE1elwiIC8+XG4gIDwvU3ZnPlxuKTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBEcm9wZG93biAmIENsZWFyIEJ1dHRvbnNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgaW50ZXJmYWNlIERyb3Bkb3duSW5kaWNhdG9yUHJvcHM8XG4gIE9wdGlvbiA9IHVua25vd24sXG4gIElzTXVsdGkgZXh0ZW5kcyBib29sZWFuID0gYm9vbGVhbixcbiAgR3JvdXAgZXh0ZW5kcyBHcm91cEJhc2U8T3B0aW9uPiA9IEdyb3VwQmFzZTxPcHRpb24+XG4+IGV4dGVuZHMgQ29tbW9uUHJvcHNBbmRDbGFzc05hbWU8T3B0aW9uLCBJc011bHRpLCBHcm91cD4ge1xuICAvKiogVGhlIGNoaWxkcmVuIHRvIGJlIHJlbmRlcmVkIGluc2lkZSB0aGUgaW5kaWNhdG9yLiAqL1xuICBjaGlsZHJlbj86IFJlYWN0Tm9kZTtcbiAgLyoqIFByb3BzIHRoYXQgd2lsbCBiZSBwYXNzZWQgb24gdG8gdGhlIGNoaWxkcmVuLiAqL1xuICBpbm5lclByb3BzOiBKU1guSW50cmluc2ljRWxlbWVudHNbJ2RpdiddO1xuICAvKiogVGhlIGZvY3VzZWQgc3RhdGUgb2YgdGhlIHNlbGVjdC4gKi9cbiAgaXNGb2N1c2VkOiBib29sZWFuO1xuICBpc0Rpc2FibGVkOiBib29sZWFuO1xufVxuXG5jb25zdCBiYXNlQ1NTID0gPFxuICBPcHRpb24sXG4gIElzTXVsdGkgZXh0ZW5kcyBib29sZWFuLFxuICBHcm91cCBleHRlbmRzIEdyb3VwQmFzZTxPcHRpb24+XG4+KFxuICB7XG4gICAgaXNGb2N1c2VkLFxuICAgIHRoZW1lOiB7XG4gICAgICBzcGFjaW5nOiB7IGJhc2VVbml0IH0sXG4gICAgICBjb2xvcnMsXG4gICAgfSxcbiAgfTpcbiAgICB8IERyb3Bkb3duSW5kaWNhdG9yUHJvcHM8T3B0aW9uLCBJc011bHRpLCBHcm91cD5cbiAgICB8IENsZWFySW5kaWNhdG9yUHJvcHM8T3B0aW9uLCBJc011bHRpLCBHcm91cD4sXG4gIHVuc3R5bGVkOiBib29sZWFuXG4pOiBDU1NPYmplY3RXaXRoTGFiZWwgPT4gKHtcbiAgbGFiZWw6ICdpbmRpY2F0b3JDb250YWluZXInLFxuICBkaXNwbGF5OiAnZmxleCcsXG4gIHRyYW5zaXRpb246ICdjb2xvciAxNTBtcycsXG4gIC4uLih1bnN0eWxlZFxuICAgID8ge31cbiAgICA6IHtcbiAgICAgICAgY29sb3I6IGlzRm9jdXNlZCA/IGNvbG9ycy5uZXV0cmFsNjAgOiBjb2xvcnMubmV1dHJhbDIwLFxuICAgICAgICBwYWRkaW5nOiBiYXNlVW5pdCAqIDIsXG4gICAgICAgICc6aG92ZXInOiB7XG4gICAgICAgICAgY29sb3I6IGlzRm9jdXNlZCA/IGNvbG9ycy5uZXV0cmFsODAgOiBjb2xvcnMubmV1dHJhbDQwLFxuICAgICAgICB9LFxuICAgICAgfSksXG59KTtcblxuZXhwb3J0IGNvbnN0IGRyb3Bkb3duSW5kaWNhdG9yQ1NTID0gYmFzZUNTUztcbmV4cG9ydCBjb25zdCBEcm9wZG93bkluZGljYXRvciA9IDxcbiAgT3B0aW9uLFxuICBJc011bHRpIGV4dGVuZHMgYm9vbGVhbixcbiAgR3JvdXAgZXh0ZW5kcyBHcm91cEJhc2U8T3B0aW9uPlxuPihcbiAgcHJvcHM6IERyb3Bkb3duSW5kaWNhdG9yUHJvcHM8T3B0aW9uLCBJc011bHRpLCBHcm91cD5cbikgPT4ge1xuICBjb25zdCB7IGNoaWxkcmVuLCBpbm5lclByb3BzIH0gPSBwcm9wcztcbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICB7Li4uZ2V0U3R5bGVQcm9wcyhwcm9wcywgJ2Ryb3Bkb3duSW5kaWNhdG9yJywge1xuICAgICAgICBpbmRpY2F0b3I6IHRydWUsXG4gICAgICAgICdkcm9wZG93bi1pbmRpY2F0b3InOiB0cnVlLFxuICAgICAgfSl9XG4gICAgICB7Li4uaW5uZXJQcm9wc31cbiAgICA+XG4gICAgICB7Y2hpbGRyZW4gfHwgPERvd25DaGV2cm9uIC8+fVxuICAgIDwvZGl2PlxuICApO1xufTtcblxuZXhwb3J0IGludGVyZmFjZSBDbGVhckluZGljYXRvclByb3BzPFxuICBPcHRpb24gPSB1bmtub3duLFxuICBJc011bHRpIGV4dGVuZHMgYm9vbGVhbiA9IGJvb2xlYW4sXG4gIEdyb3VwIGV4dGVuZHMgR3JvdXBCYXNlPE9wdGlvbj4gPSBHcm91cEJhc2U8T3B0aW9uPlxuPiBleHRlbmRzIENvbW1vblByb3BzQW5kQ2xhc3NOYW1lPE9wdGlvbiwgSXNNdWx0aSwgR3JvdXA+IHtcbiAgLyoqIFRoZSBjaGlsZHJlbiB0byBiZSByZW5kZXJlZCBpbnNpZGUgdGhlIGluZGljYXRvci4gKi9cbiAgY2hpbGRyZW4/OiBSZWFjdE5vZGU7XG4gIC8qKiBQcm9wcyB0aGF0IHdpbGwgYmUgcGFzc2VkIG9uIHRvIHRoZSBjaGlsZHJlbi4gKi9cbiAgaW5uZXJQcm9wczogSlNYLkludHJpbnNpY0VsZW1lbnRzWydkaXYnXTtcbiAgLyoqIFRoZSBmb2N1c2VkIHN0YXRlIG9mIHRoZSBzZWxlY3QuICovXG4gIGlzRm9jdXNlZDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNvbnN0IGNsZWFySW5kaWNhdG9yQ1NTID0gYmFzZUNTUztcbmV4cG9ydCBjb25zdCBDbGVhckluZGljYXRvciA9IDxcbiAgT3B0aW9uLFxuICBJc011bHRpIGV4dGVuZHMgYm9vbGVhbixcbiAgR3JvdXAgZXh0ZW5kcyBHcm91cEJhc2U8T3B0aW9uPlxuPihcbiAgcHJvcHM6IENsZWFySW5kaWNhdG9yUHJvcHM8T3B0aW9uLCBJc011bHRpLCBHcm91cD5cbikgPT4ge1xuICBjb25zdCB7IGNoaWxkcmVuLCBpbm5lclByb3BzIH0gPSBwcm9wcztcbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICB7Li4uZ2V0U3R5bGVQcm9wcyhwcm9wcywgJ2NsZWFySW5kaWNhdG9yJywge1xuICAgICAgICBpbmRpY2F0b3I6IHRydWUsXG4gICAgICAgICdjbGVhci1pbmRpY2F0b3InOiB0cnVlLFxuICAgICAgfSl9XG4gICAgICB7Li4uaW5uZXJQcm9wc31cbiAgICA+XG4gICAgICB7Y2hpbGRyZW4gfHwgPENyb3NzSWNvbiAvPn1cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gU2VwYXJhdG9yXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGludGVyZmFjZSBJbmRpY2F0b3JTZXBhcmF0b3JQcm9wczxcbiAgT3B0aW9uID0gdW5rbm93bixcbiAgSXNNdWx0aSBleHRlbmRzIGJvb2xlYW4gPSBib29sZWFuLFxuICBHcm91cCBleHRlbmRzIEdyb3VwQmFzZTxPcHRpb24+ID0gR3JvdXBCYXNlPE9wdGlvbj5cbj4gZXh0ZW5kcyBDb21tb25Qcm9wc0FuZENsYXNzTmFtZTxPcHRpb24sIElzTXVsdGksIEdyb3VwPiB7XG4gIGlzRGlzYWJsZWQ6IGJvb2xlYW47XG4gIGlzRm9jdXNlZDogYm9vbGVhbjtcbiAgaW5uZXJQcm9wcz86IEpTWC5JbnRyaW5zaWNFbGVtZW50c1snc3BhbiddO1xufVxuXG5leHBvcnQgY29uc3QgaW5kaWNhdG9yU2VwYXJhdG9yQ1NTID0gPFxuICBPcHRpb24sXG4gIElzTXVsdGkgZXh0ZW5kcyBib29sZWFuLFxuICBHcm91cCBleHRlbmRzIEdyb3VwQmFzZTxPcHRpb24+XG4+KFxuICB7XG4gICAgaXNEaXNhYmxlZCxcbiAgICB0aGVtZToge1xuICAgICAgc3BhY2luZzogeyBiYXNlVW5pdCB9LFxuICAgICAgY29sb3JzLFxuICAgIH0sXG4gIH06IEluZGljYXRvclNlcGFyYXRvclByb3BzPE9wdGlvbiwgSXNNdWx0aSwgR3JvdXA+LFxuICB1bnN0eWxlZDogYm9vbGVhblxuKTogQ1NTT2JqZWN0V2l0aExhYmVsID0+ICh7XG4gIGxhYmVsOiAnaW5kaWNhdG9yU2VwYXJhdG9yJyxcbiAgYWxpZ25TZWxmOiAnc3RyZXRjaCcsXG4gIHdpZHRoOiAxLFxuICAuLi4odW5zdHlsZWRcbiAgICA/IHt9XG4gICAgOiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogaXNEaXNhYmxlZCA/IGNvbG9ycy5uZXV0cmFsMTAgOiBjb2xvcnMubmV1dHJhbDIwLFxuICAgICAgICBtYXJnaW5Cb3R0b206IGJhc2VVbml0ICogMixcbiAgICAgICAgbWFyZ2luVG9wOiBiYXNlVW5pdCAqIDIsXG4gICAgICB9KSxcbn0pO1xuXG5leHBvcnQgY29uc3QgSW5kaWNhdG9yU2VwYXJhdG9yID0gPFxuICBPcHRpb24sXG4gIElzTXVsdGkgZXh0ZW5kcyBib29sZWFuLFxuICBHcm91cCBleHRlbmRzIEdyb3VwQmFzZTxPcHRpb24+XG4+KFxuICBwcm9wczogSW5kaWNhdG9yU2VwYXJhdG9yUHJvcHM8T3B0aW9uLCBJc011bHRpLCBHcm91cD5cbikgPT4ge1xuICBjb25zdCB7IGlubmVyUHJvcHMgfSA9IHByb3BzO1xuICByZXR1cm4gKFxuICAgIDxzcGFuXG4gICAgICB7Li4uaW5uZXJQcm9wc31cbiAgICAgIHsuLi5nZXRTdHlsZVByb3BzKHByb3BzLCAnaW5kaWNhdG9yU2VwYXJhdG9yJywge1xuICAgICAgICAnaW5kaWNhdG9yLXNlcGFyYXRvcic6IHRydWUsXG4gICAgICB9KX1cbiAgICAvPlxuICApO1xufTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBMb2FkaW5nXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuY29uc3QgbG9hZGluZ0RvdEFuaW1hdGlvbnMgPSBrZXlmcmFtZXNgXG4gIDAlLCA4MCUsIDEwMCUgeyBvcGFjaXR5OiAwOyB9XG4gIDQwJSB7IG9wYWNpdHk6IDE7IH1cbmA7XG5cbmV4cG9ydCBjb25zdCBsb2FkaW5nSW5kaWNhdG9yQ1NTID0gPFxuICBPcHRpb24sXG4gIElzTXVsdGkgZXh0ZW5kcyBib29sZWFuLFxuICBHcm91cCBleHRlbmRzIEdyb3VwQmFzZTxPcHRpb24+XG4+KFxuICB7XG4gICAgaXNGb2N1c2VkLFxuICAgIHNpemUsXG4gICAgdGhlbWU6IHtcbiAgICAgIGNvbG9ycyxcbiAgICAgIHNwYWNpbmc6IHsgYmFzZVVuaXQgfSxcbiAgICB9LFxuICB9OiBMb2FkaW5nSW5kaWNhdG9yUHJvcHM8T3B0aW9uLCBJc011bHRpLCBHcm91cD4sXG4gIHVuc3R5bGVkOiBib29sZWFuXG4pOiBDU1NPYmplY3RXaXRoTGFiZWwgPT4gKHtcbiAgbGFiZWw6ICdsb2FkaW5nSW5kaWNhdG9yJyxcbiAgZGlzcGxheTogJ2ZsZXgnLFxuICB0cmFuc2l0aW9uOiAnY29sb3IgMTUwbXMnLFxuICBhbGlnblNlbGY6ICdjZW50ZXInLFxuICBmb250U2l6ZTogc2l6ZSxcbiAgbGluZUhlaWdodDogMSxcbiAgbWFyZ2luUmlnaHQ6IHNpemUsXG4gIHRleHRBbGlnbjogJ2NlbnRlcicsXG4gIHZlcnRpY2FsQWxpZ246ICdtaWRkbGUnLFxuICAuLi4odW5zdHlsZWRcbiAgICA/IHt9XG4gICAgOiB7XG4gICAgICAgIGNvbG9yOiBpc0ZvY3VzZWQgPyBjb2xvcnMubmV1dHJhbDYwIDogY29sb3JzLm5ldXRyYWwyMCxcbiAgICAgICAgcGFkZGluZzogYmFzZVVuaXQgKiAyLFxuICAgICAgfSksXG59KTtcblxuaW50ZXJmYWNlIExvYWRpbmdEb3RQcm9wcyB7XG4gIGRlbGF5OiBudW1iZXI7XG4gIG9mZnNldDogYm9vbGVhbjtcbn1cbmNvbnN0IExvYWRpbmdEb3QgPSAoeyBkZWxheSwgb2Zmc2V0IH06IExvYWRpbmdEb3RQcm9wcykgPT4gKFxuICA8c3BhblxuICAgIGNzcz17e1xuICAgICAgYW5pbWF0aW9uOiBgJHtsb2FkaW5nRG90QW5pbWF0aW9uc30gMXMgZWFzZS1pbi1vdXQgJHtkZWxheX1tcyBpbmZpbml0ZTtgLFxuICAgICAgYmFja2dyb3VuZENvbG9yOiAnY3VycmVudENvbG9yJyxcbiAgICAgIGJvcmRlclJhZGl1czogJzFlbScsXG4gICAgICBkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcbiAgICAgIG1hcmdpbkxlZnQ6IG9mZnNldCA/ICcxZW0nIDogdW5kZWZpbmVkLFxuICAgICAgaGVpZ2h0OiAnMWVtJyxcbiAgICAgIHZlcnRpY2FsQWxpZ246ICd0b3AnLFxuICAgICAgd2lkdGg6ICcxZW0nLFxuICAgIH19XG4gIC8+XG4pO1xuXG5leHBvcnQgaW50ZXJmYWNlIExvYWRpbmdJbmRpY2F0b3JQcm9wczxcbiAgT3B0aW9uID0gdW5rbm93bixcbiAgSXNNdWx0aSBleHRlbmRzIGJvb2xlYW4gPSBib29sZWFuLFxuICBHcm91cCBleHRlbmRzIEdyb3VwQmFzZTxPcHRpb24+ID0gR3JvdXBCYXNlPE9wdGlvbj5cbj4gZXh0ZW5kcyBDb21tb25Qcm9wc0FuZENsYXNzTmFtZTxPcHRpb24sIElzTXVsdGksIEdyb3VwPiB7XG4gIC8qKiBQcm9wcyB0aGF0IHdpbGwgYmUgcGFzc2VkIG9uIHRvIHRoZSBjaGlsZHJlbi4gKi9cbiAgaW5uZXJQcm9wczogSlNYLkludHJpbnNpY0VsZW1lbnRzWydkaXYnXTtcbiAgLyoqIFRoZSBmb2N1c2VkIHN0YXRlIG9mIHRoZSBzZWxlY3QuICovXG4gIGlzRm9jdXNlZDogYm9vbGVhbjtcbiAgaXNEaXNhYmxlZDogYm9vbGVhbjtcbiAgLyoqIFNldCBzaXplIG9mIHRoZSBjb250YWluZXIuICovXG4gIHNpemU6IG51bWJlcjtcbn1cbmV4cG9ydCBjb25zdCBMb2FkaW5nSW5kaWNhdG9yID0gPFxuICBPcHRpb24sXG4gIElzTXVsdGkgZXh0ZW5kcyBib29sZWFuLFxuICBHcm91cCBleHRlbmRzIEdyb3VwQmFzZTxPcHRpb24+XG4+KHtcbiAgaW5uZXJQcm9wcyxcbiAgaXNSdGwsXG4gIHNpemUgPSA0LFxuICAuLi5yZXN0UHJvcHNcbn06IExvYWRpbmdJbmRpY2F0b3JQcm9wczxPcHRpb24sIElzTXVsdGksIEdyb3VwPikgPT4ge1xuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIHsuLi5nZXRTdHlsZVByb3BzKFxuICAgICAgICB7IC4uLnJlc3RQcm9wcywgaW5uZXJQcm9wcywgaXNSdGwsIHNpemUgfSxcbiAgICAgICAgJ2xvYWRpbmdJbmRpY2F0b3InLFxuICAgICAgICB7XG4gICAgICAgICAgaW5kaWNhdG9yOiB0cnVlLFxuICAgICAgICAgICdsb2FkaW5nLWluZGljYXRvcic6IHRydWUsXG4gICAgICAgIH1cbiAgICAgICl9XG4gICAgICB7Li4uaW5uZXJQcm9wc31cbiAgICA+XG4gICAgICA8TG9hZGluZ0RvdCBkZWxheT17MH0gb2Zmc2V0PXtpc1J0bH0gLz5cbiAgICAgIDxMb2FkaW5nRG90IGRlbGF5PXsxNjB9IG9mZnNldCAvPlxuICAgICAgPExvYWRpbmdEb3QgZGVsYXk9ezMyMH0gb2Zmc2V0PXshaXNSdGx9IC8+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuIl19 */\")\n  });\n};\nvar LoadingIndicator = function LoadingIndicator(_ref7) {\n  var innerProps = _ref7.innerProps,\n    isRtl = _ref7.isRtl,\n    _ref7$size = _ref7.size,\n    size = _ref7$size === void 0 ? 4 : _ref7$size,\n    restProps = _objectWithoutProperties(_ref7, _excluded2);\n  return jsx(\"div\", _extends({}, getStyleProps(_objectSpread(_objectSpread({}, restProps), {}, {\n    innerProps: innerProps,\n    isRtl: isRtl,\n    size: size\n  }), 'loadingIndicator', {\n    indicator: true,\n    'loading-indicator': true\n  }), innerProps), jsx(LoadingDot, {\n    delay: 0,\n    offset: isRtl\n  }), jsx(LoadingDot, {\n    delay: 160,\n    offset: true\n  }), jsx(LoadingDot, {\n    delay: 320,\n    offset: !isRtl\n  }));\n};\n\nvar css$1 = function css(_ref, unstyled) {\n  var isDisabled = _ref.isDisabled,\n    isFocused = _ref.isFocused,\n    _ref$theme = _ref.theme,\n    colors = _ref$theme.colors,\n    borderRadius = _ref$theme.borderRadius,\n    spacing = _ref$theme.spacing;\n  return _objectSpread({\n    label: 'control',\n    alignItems: 'center',\n    cursor: 'default',\n    display: 'flex',\n    flexWrap: 'wrap',\n    justifyContent: 'space-between',\n    minHeight: spacing.controlHeight,\n    outline: '0 !important',\n    position: 'relative',\n    transition: 'all 100ms'\n  }, unstyled ? {} : {\n    backgroundColor: isDisabled ? colors.neutral5 : colors.neutral0,\n    borderColor: isDisabled ? colors.neutral10 : isFocused ? colors.primary : colors.neutral20,\n    borderRadius: borderRadius,\n    borderStyle: 'solid',\n    borderWidth: 1,\n    boxShadow: isFocused ? \"0 0 0 1px \".concat(colors.primary) : undefined,\n    '&:hover': {\n      borderColor: isFocused ? colors.primary : colors.neutral30\n    }\n  });\n};\nvar Control = function Control(props) {\n  var children = props.children,\n    isDisabled = props.isDisabled,\n    isFocused = props.isFocused,\n    innerRef = props.innerRef,\n    innerProps = props.innerProps,\n    menuIsOpen = props.menuIsOpen;\n  return jsx(\"div\", _extends({\n    ref: innerRef\n  }, getStyleProps(props, 'control', {\n    control: true,\n    'control--is-disabled': isDisabled,\n    'control--is-focused': isFocused,\n    'control--menu-is-open': menuIsOpen\n  }), innerProps, {\n    \"aria-disabled\": isDisabled || undefined\n  }), children);\n};\nvar Control$1 = Control;\n\nvar _excluded$1 = [\"data\"];\nvar groupCSS = function groupCSS(_ref, unstyled) {\n  var spacing = _ref.theme.spacing;\n  return unstyled ? {} : {\n    paddingBottom: spacing.baseUnit * 2,\n    paddingTop: spacing.baseUnit * 2\n  };\n};\nvar Group = function Group(props) {\n  var children = props.children,\n    cx = props.cx,\n    getStyles = props.getStyles,\n    getClassNames = props.getClassNames,\n    Heading = props.Heading,\n    headingProps = props.headingProps,\n    innerProps = props.innerProps,\n    label = props.label,\n    theme = props.theme,\n    selectProps = props.selectProps;\n  return jsx(\"div\", _extends({}, getStyleProps(props, 'group', {\n    group: true\n  }), innerProps), jsx(Heading, _extends({}, headingProps, {\n    selectProps: selectProps,\n    theme: theme,\n    getStyles: getStyles,\n    getClassNames: getClassNames,\n    cx: cx\n  }), label), jsx(\"div\", null, children));\n};\nvar groupHeadingCSS = function groupHeadingCSS(_ref2, unstyled) {\n  var _ref2$theme = _ref2.theme,\n    colors = _ref2$theme.colors,\n    spacing = _ref2$theme.spacing;\n  return _objectSpread({\n    label: 'group',\n    cursor: 'default',\n    display: 'block'\n  }, unstyled ? {} : {\n    color: colors.neutral40,\n    fontSize: '75%',\n    fontWeight: 500,\n    marginBottom: '0.25em',\n    paddingLeft: spacing.baseUnit * 3,\n    paddingRight: spacing.baseUnit * 3,\n    textTransform: 'uppercase'\n  });\n};\nvar GroupHeading = function GroupHeading(props) {\n  var _cleanCommonProps = cleanCommonProps(props);\n    _cleanCommonProps.data;\n    var innerProps = _objectWithoutProperties(_cleanCommonProps, _excluded$1);\n  return jsx(\"div\", _extends({}, getStyleProps(props, 'groupHeading', {\n    'group-heading': true\n  }), innerProps));\n};\nvar Group$1 = Group;\n\nvar _excluded = [\"innerRef\", \"isDisabled\", \"isHidden\", \"inputClassName\"];\nvar inputCSS = function inputCSS(_ref, unstyled) {\n  var isDisabled = _ref.isDisabled,\n    value = _ref.value,\n    _ref$theme = _ref.theme,\n    spacing = _ref$theme.spacing,\n    colors = _ref$theme.colors;\n  return _objectSpread(_objectSpread({\n    visibility: isDisabled ? 'hidden' : 'visible',\n    // force css to recompute when value change due to @emotion bug.\n    // We can remove it whenever the bug is fixed.\n    transform: value ? 'translateZ(0)' : ''\n  }, containerStyle), unstyled ? {} : {\n    margin: spacing.baseUnit / 2,\n    paddingBottom: spacing.baseUnit / 2,\n    paddingTop: spacing.baseUnit / 2,\n    color: colors.neutral80\n  });\n};\nvar spacingStyle = {\n  gridArea: '1 / 2',\n  font: 'inherit',\n  minWidth: '2px',\n  border: 0,\n  margin: 0,\n  outline: 0,\n  padding: 0\n};\nvar containerStyle = {\n  flex: '1 1 auto',\n  display: 'inline-grid',\n  gridArea: '1 / 1 / 2 / 3',\n  gridTemplateColumns: '0 min-content',\n  '&:after': _objectSpread({\n    content: 'attr(data-value) \" \"',\n    visibility: 'hidden',\n    whiteSpace: 'pre'\n  }, spacingStyle)\n};\nvar inputStyle = function inputStyle(isHidden) {\n  return _objectSpread({\n    label: 'input',\n    color: 'inherit',\n    background: 0,\n    opacity: isHidden ? 0 : 1,\n    width: '100%'\n  }, spacingStyle);\n};\nvar Input = function Input(props) {\n  var cx = props.cx,\n    value = props.value;\n  var _cleanCommonProps = cleanCommonProps(props),\n    innerRef = _cleanCommonProps.innerRef,\n    isDisabled = _cleanCommonProps.isDisabled,\n    isHidden = _cleanCommonProps.isHidden,\n    inputClassName = _cleanCommonProps.inputClassName,\n    innerProps = _objectWithoutProperties(_cleanCommonProps, _excluded);\n  return jsx(\"div\", _extends({}, getStyleProps(props, 'input', {\n    'input-container': true\n  }), {\n    \"data-value\": value || ''\n  }), jsx(\"input\", _extends({\n    className: cx({\n      input: true\n    }, inputClassName),\n    ref: innerRef,\n    style: inputStyle(isHidden),\n    disabled: isDisabled\n  }, innerProps)));\n};\nvar Input$1 = Input;\n\nvar multiValueCSS = function multiValueCSS(_ref, unstyled) {\n  var _ref$theme = _ref.theme,\n    spacing = _ref$theme.spacing,\n    borderRadius = _ref$theme.borderRadius,\n    colors = _ref$theme.colors;\n  return _objectSpread({\n    label: 'multiValue',\n    display: 'flex',\n    minWidth: 0\n  }, unstyled ? {} : {\n    backgroundColor: colors.neutral10,\n    borderRadius: borderRadius / 2,\n    margin: spacing.baseUnit / 2\n  });\n};\nvar multiValueLabelCSS = function multiValueLabelCSS(_ref2, unstyled) {\n  var _ref2$theme = _ref2.theme,\n    borderRadius = _ref2$theme.borderRadius,\n    colors = _ref2$theme.colors,\n    cropWithEllipsis = _ref2.cropWithEllipsis;\n  return _objectSpread({\n    overflow: 'hidden',\n    textOverflow: cropWithEllipsis || cropWithEllipsis === undefined ? 'ellipsis' : undefined,\n    whiteSpace: 'nowrap'\n  }, unstyled ? {} : {\n    borderRadius: borderRadius / 2,\n    color: colors.neutral80,\n    fontSize: '85%',\n    padding: 3,\n    paddingLeft: 6\n  });\n};\nvar multiValueRemoveCSS = function multiValueRemoveCSS(_ref3, unstyled) {\n  var _ref3$theme = _ref3.theme,\n    spacing = _ref3$theme.spacing,\n    borderRadius = _ref3$theme.borderRadius,\n    colors = _ref3$theme.colors,\n    isFocused = _ref3.isFocused;\n  return _objectSpread({\n    alignItems: 'center',\n    display: 'flex'\n  }, unstyled ? {} : {\n    borderRadius: borderRadius / 2,\n    backgroundColor: isFocused ? colors.dangerLight : undefined,\n    paddingLeft: spacing.baseUnit,\n    paddingRight: spacing.baseUnit,\n    ':hover': {\n      backgroundColor: colors.dangerLight,\n      color: colors.danger\n    }\n  });\n};\nvar MultiValueGeneric = function MultiValueGeneric(_ref4) {\n  var children = _ref4.children,\n    innerProps = _ref4.innerProps;\n  return jsx(\"div\", innerProps, children);\n};\nvar MultiValueContainer = MultiValueGeneric;\nvar MultiValueLabel = MultiValueGeneric;\nfunction MultiValueRemove(_ref5) {\n  var children = _ref5.children,\n    innerProps = _ref5.innerProps;\n  return jsx(\"div\", _extends({\n    role: \"button\"\n  }, innerProps), children || jsx(CrossIcon, {\n    size: 14\n  }));\n}\nvar MultiValue = function MultiValue(props) {\n  var children = props.children,\n    components = props.components,\n    data = props.data,\n    innerProps = props.innerProps,\n    isDisabled = props.isDisabled,\n    removeProps = props.removeProps,\n    selectProps = props.selectProps;\n  var Container = components.Container,\n    Label = components.Label,\n    Remove = components.Remove;\n  return jsx(Container, {\n    data: data,\n    innerProps: _objectSpread(_objectSpread({}, getStyleProps(props, 'multiValue', {\n      'multi-value': true,\n      'multi-value--is-disabled': isDisabled\n    })), innerProps),\n    selectProps: selectProps\n  }, jsx(Label, {\n    data: data,\n    innerProps: _objectSpread({}, getStyleProps(props, 'multiValueLabel', {\n      'multi-value__label': true\n    })),\n    selectProps: selectProps\n  }, children), jsx(Remove, {\n    data: data,\n    innerProps: _objectSpread(_objectSpread({}, getStyleProps(props, 'multiValueRemove', {\n      'multi-value__remove': true\n    })), {}, {\n      'aria-label': \"Remove \".concat(children || 'option')\n    }, removeProps),\n    selectProps: selectProps\n  }));\n};\nvar MultiValue$1 = MultiValue;\n\nvar optionCSS = function optionCSS(_ref, unstyled) {\n  var isDisabled = _ref.isDisabled,\n    isFocused = _ref.isFocused,\n    isSelected = _ref.isSelected,\n    _ref$theme = _ref.theme,\n    spacing = _ref$theme.spacing,\n    colors = _ref$theme.colors;\n  return _objectSpread({\n    label: 'option',\n    cursor: 'default',\n    display: 'block',\n    fontSize: 'inherit',\n    width: '100%',\n    userSelect: 'none',\n    WebkitTapHighlightColor: 'rgba(0, 0, 0, 0)'\n  }, unstyled ? {} : {\n    backgroundColor: isSelected ? colors.primary : isFocused ? colors.primary25 : 'transparent',\n    color: isDisabled ? colors.neutral20 : isSelected ? colors.neutral0 : 'inherit',\n    padding: \"\".concat(spacing.baseUnit * 2, \"px \").concat(spacing.baseUnit * 3, \"px\"),\n    // provide some affordance on touch devices\n    ':active': {\n      backgroundColor: !isDisabled ? isSelected ? colors.primary : colors.primary50 : undefined\n    }\n  });\n};\nvar Option = function Option(props) {\n  var children = props.children,\n    isDisabled = props.isDisabled,\n    isFocused = props.isFocused,\n    isSelected = props.isSelected,\n    innerRef = props.innerRef,\n    innerProps = props.innerProps;\n  return jsx(\"div\", _extends({}, getStyleProps(props, 'option', {\n    option: true,\n    'option--is-disabled': isDisabled,\n    'option--is-focused': isFocused,\n    'option--is-selected': isSelected\n  }), {\n    ref: innerRef,\n    \"aria-disabled\": isDisabled\n  }, innerProps), children);\n};\nvar Option$1 = Option;\n\nvar placeholderCSS = function placeholderCSS(_ref, unstyled) {\n  var _ref$theme = _ref.theme,\n    spacing = _ref$theme.spacing,\n    colors = _ref$theme.colors;\n  return _objectSpread({\n    label: 'placeholder',\n    gridArea: '1 / 1 / 2 / 3'\n  }, unstyled ? {} : {\n    color: colors.neutral50,\n    marginLeft: spacing.baseUnit / 2,\n    marginRight: spacing.baseUnit / 2\n  });\n};\nvar Placeholder = function Placeholder(props) {\n  var children = props.children,\n    innerProps = props.innerProps;\n  return jsx(\"div\", _extends({}, getStyleProps(props, 'placeholder', {\n    placeholder: true\n  }), innerProps), children);\n};\nvar Placeholder$1 = Placeholder;\n\nvar css = function css(_ref, unstyled) {\n  var isDisabled = _ref.isDisabled,\n    _ref$theme = _ref.theme,\n    spacing = _ref$theme.spacing,\n    colors = _ref$theme.colors;\n  return _objectSpread({\n    label: 'singleValue',\n    gridArea: '1 / 1 / 2 / 3',\n    maxWidth: '100%',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap'\n  }, unstyled ? {} : {\n    color: isDisabled ? colors.neutral40 : colors.neutral80,\n    marginLeft: spacing.baseUnit / 2,\n    marginRight: spacing.baseUnit / 2\n  });\n};\nvar SingleValue = function SingleValue(props) {\n  var children = props.children,\n    isDisabled = props.isDisabled,\n    innerProps = props.innerProps;\n  return jsx(\"div\", _extends({}, getStyleProps(props, 'singleValue', {\n    'single-value': true,\n    'single-value--is-disabled': isDisabled\n  }), innerProps), children);\n};\nvar SingleValue$1 = SingleValue;\n\nvar components = {\n  ClearIndicator: ClearIndicator,\n  Control: Control$1,\n  DropdownIndicator: DropdownIndicator,\n  DownChevron: DownChevron,\n  CrossIcon: CrossIcon,\n  Group: Group$1,\n  GroupHeading: GroupHeading,\n  IndicatorsContainer: IndicatorsContainer,\n  IndicatorSeparator: IndicatorSeparator,\n  Input: Input$1,\n  LoadingIndicator: LoadingIndicator,\n  Menu: Menu$1,\n  MenuList: MenuList,\n  MenuPortal: MenuPortal,\n  LoadingMessage: LoadingMessage,\n  NoOptionsMessage: NoOptionsMessage,\n  MultiValue: MultiValue$1,\n  MultiValueContainer: MultiValueContainer,\n  MultiValueLabel: MultiValueLabel,\n  MultiValueRemove: MultiValueRemove,\n  Option: Option$1,\n  Placeholder: Placeholder$1,\n  SelectContainer: SelectContainer,\n  SingleValue: SingleValue$1,\n  ValueContainer: ValueContainer\n};\nvar defaultComponents = function defaultComponents(props) {\n  return _objectSpread(_objectSpread({}, components), props.components);\n};\n\nexport { isMobileDevice as A, multiValueAsValue as B, singleValueAsValue as C, valueTernary as D, classNames as E, defaultComponents as F, isDocumentElement as G, cleanValue as H, scrollIntoView as I, noop as J, notNullish as K, handleInputChange as L, MenuPlacer as M, clearIndicatorCSS as a, containerCSS as b, components as c, css$1 as d, dropdownIndicatorCSS as e, groupHeadingCSS as f, groupCSS as g, indicatorSeparatorCSS as h, indicatorsContainerCSS as i, inputCSS as j, loadingMessageCSS as k, loadingIndicatorCSS as l, menuCSS as m, menuListCSS as n, menuPortalCSS as o, multiValueCSS as p, multiValueLabelCSS as q, removeProps as r, supportsPassiveEvents as s, multiValueRemoveCSS as t, noOptionsMessageCSS as u, optionCSS as v, placeholderCSS as w, css as x, valueContainerCSS as y, isTouchCapable as z };\n","var safeIsNaN = Number.isNaN ||\n    function ponyfill(value) {\n        return typeof value === 'number' && value !== value;\n    };\nfunction isEqual(first, second) {\n    if (first === second) {\n        return true;\n    }\n    if (safeIsNaN(first) && safeIsNaN(second)) {\n        return true;\n    }\n    return false;\n}\nfunction areInputsEqual(newInputs, lastInputs) {\n    if (newInputs.length !== lastInputs.length) {\n        return false;\n    }\n    for (var i = 0; i < newInputs.length; i++) {\n        if (!isEqual(newInputs[i], lastInputs[i])) {\n            return false;\n        }\n    }\n    return true;\n}\n\nfunction memoizeOne(resultFn, isEqual) {\n    if (isEqual === void 0) { isEqual = areInputsEqual; }\n    var cache = null;\n    function memoized() {\n        var newArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            newArgs[_i] = arguments[_i];\n        }\n        if (cache && cache.lastThis === this && isEqual(newArgs, cache.lastArgs)) {\n            return cache.lastResult;\n        }\n        var lastResult = resultFn.apply(this, newArgs);\n        cache = {\n            lastResult: lastResult,\n            lastArgs: newArgs,\n            lastThis: this,\n        };\n        return lastResult;\n    }\n    memoized.clear = function clear() {\n        cache = null;\n    };\n    return memoized;\n}\n\nexport { memoizeOne as default };\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport _objectSpread from '@babel/runtime/helpers/esm/objectSpread2';\nimport _classCallCheck from '@babel/runtime/helpers/esm/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/esm/createClass';\nimport _inherits from '@babel/runtime/helpers/esm/inherits';\nimport _createSuper from '@babel/runtime/helpers/esm/createSuper';\nimport _toConsumableArray from '@babel/runtime/helpers/esm/toConsumableArray';\nimport * as React from 'react';\nimport { useMemo, Fragment, useRef, useCallback, useEffect, Component } from 'react';\nimport { r as removeProps, s as supportsPassiveEvents, a as clearIndicatorCSS, b as containerCSS, d as css$1, e as dropdownIndicatorCSS, g as groupCSS, f as groupHeadingCSS, i as indicatorsContainerCSS, h as indicatorSeparatorCSS, j as inputCSS, l as loadingIndicatorCSS, k as loadingMessageCSS, m as menuCSS, n as menuListCSS, o as menuPortalCSS, p as multiValueCSS, q as multiValueLabelCSS, t as multiValueRemoveCSS, u as noOptionsMessageCSS, v as optionCSS, w as placeholderCSS, x as css$2, y as valueContainerCSS, z as isTouchCapable, A as isMobileDevice, B as multiValueAsValue, C as singleValueAsValue, D as valueTernary, E as classNames, F as defaultComponents, G as isDocumentElement, H as cleanValue, I as scrollIntoView, J as noop, M as MenuPlacer, K as notNullish } from './index-a301f526.esm.js';\nimport { jsx, css } from '@emotion/react';\nimport memoizeOne from 'memoize-one';\nimport _objectWithoutProperties from '@babel/runtime/helpers/esm/objectWithoutProperties';\n\nfunction _EMOTION_STRINGIFIED_CSS_ERROR__$2() { return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\"; }\n\n// Assistive text to describe visual elements. Hidden for sighted users.\nvar _ref = process.env.NODE_ENV === \"production\" ? {\n  name: \"7pg0cj-a11yText\",\n  styles: \"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap\"\n} : {\n  name: \"1f43avz-a11yText-A11yText\",\n  styles: \"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap;label:A11yText;\",\n  map: \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkExMXlUZXh0LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFNSSIsImZpbGUiOiJBMTF5VGV4dC50c3giLCJzb3VyY2VzQ29udGVudCI6WyIvKiogQGpzeCBqc3ggKi9cbmltcG9ydCB7IGpzeCB9IGZyb20gJ0BlbW90aW9uL3JlYWN0JztcblxuLy8gQXNzaXN0aXZlIHRleHQgdG8gZGVzY3JpYmUgdmlzdWFsIGVsZW1lbnRzLiBIaWRkZW4gZm9yIHNpZ2h0ZWQgdXNlcnMuXG5jb25zdCBBMTF5VGV4dCA9IChwcm9wczogSlNYLkludHJpbnNpY0VsZW1lbnRzWydzcGFuJ10pID0+IChcbiAgPHNwYW5cbiAgICBjc3M9e3tcbiAgICAgIGxhYmVsOiAnYTExeVRleHQnLFxuICAgICAgekluZGV4OiA5OTk5LFxuICAgICAgYm9yZGVyOiAwLFxuICAgICAgY2xpcDogJ3JlY3QoMXB4LCAxcHgsIDFweCwgMXB4KScsXG4gICAgICBoZWlnaHQ6IDEsXG4gICAgICB3aWR0aDogMSxcbiAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICAgICAgcGFkZGluZzogMCxcbiAgICAgIHdoaXRlU3BhY2U6ICdub3dyYXAnLFxuICAgIH19XG4gICAgey4uLnByb3BzfVxuICAvPlxuKTtcblxuZXhwb3J0IGRlZmF1bHQgQTExeVRleHQ7XG4iXX0= */\",\n  toString: _EMOTION_STRINGIFIED_CSS_ERROR__$2\n};\nvar A11yText = function A11yText(props) {\n  return jsx(\"span\", _extends({\n    css: _ref\n  }, props));\n};\nvar A11yText$1 = A11yText;\n\nvar defaultAriaLiveMessages = {\n  guidance: function guidance(props) {\n    var isSearchable = props.isSearchable,\n      isMulti = props.isMulti,\n      tabSelectsValue = props.tabSelectsValue,\n      context = props.context,\n      isInitialFocus = props.isInitialFocus;\n    switch (context) {\n      case 'menu':\n        return \"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu\".concat(tabSelectsValue ? ', press Tab to select the option and exit the menu' : '', \".\");\n      case 'input':\n        return isInitialFocus ? \"\".concat(props['aria-label'] || 'Select', \" is focused \").concat(isSearchable ? ',type to refine list' : '', \", press Down to open the menu, \").concat(isMulti ? ' press left to focus selected values' : '') : '';\n      case 'value':\n        return 'Use left and right to toggle between focused values, press Backspace to remove the currently focused value';\n      default:\n        return '';\n    }\n  },\n  onChange: function onChange(props) {\n    var action = props.action,\n      _props$label = props.label,\n      label = _props$label === void 0 ? '' : _props$label,\n      labels = props.labels,\n      isDisabled = props.isDisabled;\n    switch (action) {\n      case 'deselect-option':\n      case 'pop-value':\n      case 'remove-value':\n        return \"option \".concat(label, \", deselected.\");\n      case 'clear':\n        return 'All selected options have been cleared.';\n      case 'initial-input-focus':\n        return \"option\".concat(labels.length > 1 ? 's' : '', \" \").concat(labels.join(','), \", selected.\");\n      case 'select-option':\n        return isDisabled ? \"option \".concat(label, \" is disabled. Select another option.\") : \"option \".concat(label, \", selected.\");\n      default:\n        return '';\n    }\n  },\n  onFocus: function onFocus(props) {\n    var context = props.context,\n      focused = props.focused,\n      options = props.options,\n      _props$label2 = props.label,\n      label = _props$label2 === void 0 ? '' : _props$label2,\n      selectValue = props.selectValue,\n      isDisabled = props.isDisabled,\n      isSelected = props.isSelected,\n      isAppleDevice = props.isAppleDevice;\n    var getArrayIndex = function getArrayIndex(arr, item) {\n      return arr && arr.length ? \"\".concat(arr.indexOf(item) + 1, \" of \").concat(arr.length) : '';\n    };\n    if (context === 'value' && selectValue) {\n      return \"value \".concat(label, \" focused, \").concat(getArrayIndex(selectValue, focused), \".\");\n    }\n    if (context === 'menu' && isAppleDevice) {\n      var disabled = isDisabled ? ' disabled' : '';\n      var status = \"\".concat(isSelected ? ' selected' : '').concat(disabled);\n      return \"\".concat(label).concat(status, \", \").concat(getArrayIndex(options, focused), \".\");\n    }\n    return '';\n  },\n  onFilter: function onFilter(props) {\n    var inputValue = props.inputValue,\n      resultsMessage = props.resultsMessage;\n    return \"\".concat(resultsMessage).concat(inputValue ? ' for search term ' + inputValue : '', \".\");\n  }\n};\n\nvar LiveRegion = function LiveRegion(props) {\n  var ariaSelection = props.ariaSelection,\n    focusedOption = props.focusedOption,\n    focusedValue = props.focusedValue,\n    focusableOptions = props.focusableOptions,\n    isFocused = props.isFocused,\n    selectValue = props.selectValue,\n    selectProps = props.selectProps,\n    id = props.id,\n    isAppleDevice = props.isAppleDevice;\n  var ariaLiveMessages = selectProps.ariaLiveMessages,\n    getOptionLabel = selectProps.getOptionLabel,\n    inputValue = selectProps.inputValue,\n    isMulti = selectProps.isMulti,\n    isOptionDisabled = selectProps.isOptionDisabled,\n    isSearchable = selectProps.isSearchable,\n    menuIsOpen = selectProps.menuIsOpen,\n    options = selectProps.options,\n    screenReaderStatus = selectProps.screenReaderStatus,\n    tabSelectsValue = selectProps.tabSelectsValue,\n    isLoading = selectProps.isLoading;\n  var ariaLabel = selectProps['aria-label'];\n  var ariaLive = selectProps['aria-live'];\n\n  // Update aria live message configuration when prop changes\n  var messages = useMemo(function () {\n    return _objectSpread(_objectSpread({}, defaultAriaLiveMessages), ariaLiveMessages || {});\n  }, [ariaLiveMessages]);\n\n  // Update aria live selected option when prop changes\n  var ariaSelected = useMemo(function () {\n    var message = '';\n    if (ariaSelection && messages.onChange) {\n      var option = ariaSelection.option,\n        selectedOptions = ariaSelection.options,\n        removedValue = ariaSelection.removedValue,\n        removedValues = ariaSelection.removedValues,\n        value = ariaSelection.value;\n      // select-option when !isMulti does not return option so we assume selected option is value\n      var asOption = function asOption(val) {\n        return !Array.isArray(val) ? val : null;\n      };\n\n      // If there is just one item from the action then get its label\n      var selected = removedValue || option || asOption(value);\n      var label = selected ? getOptionLabel(selected) : '';\n\n      // If there are multiple items from the action then return an array of labels\n      var multiSelected = selectedOptions || removedValues || undefined;\n      var labels = multiSelected ? multiSelected.map(getOptionLabel) : [];\n      var onChangeProps = _objectSpread({\n        // multiSelected items are usually items that have already been selected\n        // or set by the user as a default value so we assume they are not disabled\n        isDisabled: selected && isOptionDisabled(selected, selectValue),\n        label: label,\n        labels: labels\n      }, ariaSelection);\n      message = messages.onChange(onChangeProps);\n    }\n    return message;\n  }, [ariaSelection, messages, isOptionDisabled, selectValue, getOptionLabel]);\n  var ariaFocused = useMemo(function () {\n    var focusMsg = '';\n    var focused = focusedOption || focusedValue;\n    var isSelected = !!(focusedOption && selectValue && selectValue.includes(focusedOption));\n    if (focused && messages.onFocus) {\n      var onFocusProps = {\n        focused: focused,\n        label: getOptionLabel(focused),\n        isDisabled: isOptionDisabled(focused, selectValue),\n        isSelected: isSelected,\n        options: focusableOptions,\n        context: focused === focusedOption ? 'menu' : 'value',\n        selectValue: selectValue,\n        isAppleDevice: isAppleDevice\n      };\n      focusMsg = messages.onFocus(onFocusProps);\n    }\n    return focusMsg;\n  }, [focusedOption, focusedValue, getOptionLabel, isOptionDisabled, messages, focusableOptions, selectValue, isAppleDevice]);\n  var ariaResults = useMemo(function () {\n    var resultsMsg = '';\n    if (menuIsOpen && options.length && !isLoading && messages.onFilter) {\n      var resultsMessage = screenReaderStatus({\n        count: focusableOptions.length\n      });\n      resultsMsg = messages.onFilter({\n        inputValue: inputValue,\n        resultsMessage: resultsMessage\n      });\n    }\n    return resultsMsg;\n  }, [focusableOptions, inputValue, menuIsOpen, messages, options, screenReaderStatus, isLoading]);\n  var isInitialFocus = (ariaSelection === null || ariaSelection === void 0 ? void 0 : ariaSelection.action) === 'initial-input-focus';\n  var ariaGuidance = useMemo(function () {\n    var guidanceMsg = '';\n    if (messages.guidance) {\n      var context = focusedValue ? 'value' : menuIsOpen ? 'menu' : 'input';\n      guidanceMsg = messages.guidance({\n        'aria-label': ariaLabel,\n        context: context,\n        isDisabled: focusedOption && isOptionDisabled(focusedOption, selectValue),\n        isMulti: isMulti,\n        isSearchable: isSearchable,\n        tabSelectsValue: tabSelectsValue,\n        isInitialFocus: isInitialFocus\n      });\n    }\n    return guidanceMsg;\n  }, [ariaLabel, focusedOption, focusedValue, isMulti, isOptionDisabled, isSearchable, menuIsOpen, messages, selectValue, tabSelectsValue, isInitialFocus]);\n  var ScreenReaderText = jsx(Fragment, null, jsx(\"span\", {\n    id: \"aria-selection\"\n  }, ariaSelected), jsx(\"span\", {\n    id: \"aria-focused\"\n  }, ariaFocused), jsx(\"span\", {\n    id: \"aria-results\"\n  }, ariaResults), jsx(\"span\", {\n    id: \"aria-guidance\"\n  }, ariaGuidance));\n  return jsx(Fragment, null, jsx(A11yText$1, {\n    id: id\n  }, isInitialFocus && ScreenReaderText), jsx(A11yText$1, {\n    \"aria-live\": ariaLive,\n    \"aria-atomic\": \"false\",\n    \"aria-relevant\": \"additions text\",\n    role: \"log\"\n  }, isFocused && !isInitialFocus && ScreenReaderText));\n};\nvar LiveRegion$1 = LiveRegion;\n\nvar diacritics = [{\n  base: 'A',\n  letters: \"A\\u24B6\\uFF21\\xC0\\xC1\\xC2\\u1EA6\\u1EA4\\u1EAA\\u1EA8\\xC3\\u0100\\u0102\\u1EB0\\u1EAE\\u1EB4\\u1EB2\\u0226\\u01E0\\xC4\\u01DE\\u1EA2\\xC5\\u01FA\\u01CD\\u0200\\u0202\\u1EA0\\u1EAC\\u1EB6\\u1E00\\u0104\\u023A\\u2C6F\"\n}, {\n  base: 'AA',\n  letters: \"\\uA732\"\n}, {\n  base: 'AE',\n  letters: \"\\xC6\\u01FC\\u01E2\"\n}, {\n  base: 'AO',\n  letters: \"\\uA734\"\n}, {\n  base: 'AU',\n  letters: \"\\uA736\"\n}, {\n  base: 'AV',\n  letters: \"\\uA738\\uA73A\"\n}, {\n  base: 'AY',\n  letters: \"\\uA73C\"\n}, {\n  base: 'B',\n  letters: \"B\\u24B7\\uFF22\\u1E02\\u1E04\\u1E06\\u0243\\u0182\\u0181\"\n}, {\n  base: 'C',\n  letters: \"C\\u24B8\\uFF23\\u0106\\u0108\\u010A\\u010C\\xC7\\u1E08\\u0187\\u023B\\uA73E\"\n}, {\n  base: 'D',\n  letters: \"D\\u24B9\\uFF24\\u1E0A\\u010E\\u1E0C\\u1E10\\u1E12\\u1E0E\\u0110\\u018B\\u018A\\u0189\\uA779\"\n}, {\n  base: 'DZ',\n  letters: \"\\u01F1\\u01C4\"\n}, {\n  base: 'Dz',\n  letters: \"\\u01F2\\u01C5\"\n}, {\n  base: 'E',\n  letters: \"E\\u24BA\\uFF25\\xC8\\xC9\\xCA\\u1EC0\\u1EBE\\u1EC4\\u1EC2\\u1EBC\\u0112\\u1E14\\u1E16\\u0114\\u0116\\xCB\\u1EBA\\u011A\\u0204\\u0206\\u1EB8\\u1EC6\\u0228\\u1E1C\\u0118\\u1E18\\u1E1A\\u0190\\u018E\"\n}, {\n  base: 'F',\n  letters: \"F\\u24BB\\uFF26\\u1E1E\\u0191\\uA77B\"\n}, {\n  base: 'G',\n  letters: \"G\\u24BC\\uFF27\\u01F4\\u011C\\u1E20\\u011E\\u0120\\u01E6\\u0122\\u01E4\\u0193\\uA7A0\\uA77D\\uA77E\"\n}, {\n  base: 'H',\n  letters: \"H\\u24BD\\uFF28\\u0124\\u1E22\\u1E26\\u021E\\u1E24\\u1E28\\u1E2A\\u0126\\u2C67\\u2C75\\uA78D\"\n}, {\n  base: 'I',\n  letters: \"I\\u24BE\\uFF29\\xCC\\xCD\\xCE\\u0128\\u012A\\u012C\\u0130\\xCF\\u1E2E\\u1EC8\\u01CF\\u0208\\u020A\\u1ECA\\u012E\\u1E2C\\u0197\"\n}, {\n  base: 'J',\n  letters: \"J\\u24BF\\uFF2A\\u0134\\u0248\"\n}, {\n  base: 'K',\n  letters: \"K\\u24C0\\uFF2B\\u1E30\\u01E8\\u1E32\\u0136\\u1E34\\u0198\\u2C69\\uA740\\uA742\\uA744\\uA7A2\"\n}, {\n  base: 'L',\n  letters: \"L\\u24C1\\uFF2C\\u013F\\u0139\\u013D\\u1E36\\u1E38\\u013B\\u1E3C\\u1E3A\\u0141\\u023D\\u2C62\\u2C60\\uA748\\uA746\\uA780\"\n}, {\n  base: 'LJ',\n  letters: \"\\u01C7\"\n}, {\n  base: 'Lj',\n  letters: \"\\u01C8\"\n}, {\n  base: 'M',\n  letters: \"M\\u24C2\\uFF2D\\u1E3E\\u1E40\\u1E42\\u2C6E\\u019C\"\n}, {\n  base: 'N',\n  letters: \"N\\u24C3\\uFF2E\\u01F8\\u0143\\xD1\\u1E44\\u0147\\u1E46\\u0145\\u1E4A\\u1E48\\u0220\\u019D\\uA790\\uA7A4\"\n}, {\n  base: 'NJ',\n  letters: \"\\u01CA\"\n}, {\n  base: 'Nj',\n  letters: \"\\u01CB\"\n}, {\n  base: 'O',\n  letters: \"O\\u24C4\\uFF2F\\xD2\\xD3\\xD4\\u1ED2\\u1ED0\\u1ED6\\u1ED4\\xD5\\u1E4C\\u022C\\u1E4E\\u014C\\u1E50\\u1E52\\u014E\\u022E\\u0230\\xD6\\u022A\\u1ECE\\u0150\\u01D1\\u020C\\u020E\\u01A0\\u1EDC\\u1EDA\\u1EE0\\u1EDE\\u1EE2\\u1ECC\\u1ED8\\u01EA\\u01EC\\xD8\\u01FE\\u0186\\u019F\\uA74A\\uA74C\"\n}, {\n  base: 'OI',\n  letters: \"\\u01A2\"\n}, {\n  base: 'OO',\n  letters: \"\\uA74E\"\n}, {\n  base: 'OU',\n  letters: \"\\u0222\"\n}, {\n  base: 'P',\n  letters: \"P\\u24C5\\uFF30\\u1E54\\u1E56\\u01A4\\u2C63\\uA750\\uA752\\uA754\"\n}, {\n  base: 'Q',\n  letters: \"Q\\u24C6\\uFF31\\uA756\\uA758\\u024A\"\n}, {\n  base: 'R',\n  letters: \"R\\u24C7\\uFF32\\u0154\\u1E58\\u0158\\u0210\\u0212\\u1E5A\\u1E5C\\u0156\\u1E5E\\u024C\\u2C64\\uA75A\\uA7A6\\uA782\"\n}, {\n  base: 'S',\n  letters: \"S\\u24C8\\uFF33\\u1E9E\\u015A\\u1E64\\u015C\\u1E60\\u0160\\u1E66\\u1E62\\u1E68\\u0218\\u015E\\u2C7E\\uA7A8\\uA784\"\n}, {\n  base: 'T',\n  letters: \"T\\u24C9\\uFF34\\u1E6A\\u0164\\u1E6C\\u021A\\u0162\\u1E70\\u1E6E\\u0166\\u01AC\\u01AE\\u023E\\uA786\"\n}, {\n  base: 'TZ',\n  letters: \"\\uA728\"\n}, {\n  base: 'U',\n  letters: \"U\\u24CA\\uFF35\\xD9\\xDA\\xDB\\u0168\\u1E78\\u016A\\u1E7A\\u016C\\xDC\\u01DB\\u01D7\\u01D5\\u01D9\\u1EE6\\u016E\\u0170\\u01D3\\u0214\\u0216\\u01AF\\u1EEA\\u1EE8\\u1EEE\\u1EEC\\u1EF0\\u1EE4\\u1E72\\u0172\\u1E76\\u1E74\\u0244\"\n}, {\n  base: 'V',\n  letters: \"V\\u24CB\\uFF36\\u1E7C\\u1E7E\\u01B2\\uA75E\\u0245\"\n}, {\n  base: 'VY',\n  letters: \"\\uA760\"\n}, {\n  base: 'W',\n  letters: \"W\\u24CC\\uFF37\\u1E80\\u1E82\\u0174\\u1E86\\u1E84\\u1E88\\u2C72\"\n}, {\n  base: 'X',\n  letters: \"X\\u24CD\\uFF38\\u1E8A\\u1E8C\"\n}, {\n  base: 'Y',\n  letters: \"Y\\u24CE\\uFF39\\u1EF2\\xDD\\u0176\\u1EF8\\u0232\\u1E8E\\u0178\\u1EF6\\u1EF4\\u01B3\\u024E\\u1EFE\"\n}, {\n  base: 'Z',\n  letters: \"Z\\u24CF\\uFF3A\\u0179\\u1E90\\u017B\\u017D\\u1E92\\u1E94\\u01B5\\u0224\\u2C7F\\u2C6B\\uA762\"\n}, {\n  base: 'a',\n  letters: \"a\\u24D0\\uFF41\\u1E9A\\xE0\\xE1\\xE2\\u1EA7\\u1EA5\\u1EAB\\u1EA9\\xE3\\u0101\\u0103\\u1EB1\\u1EAF\\u1EB5\\u1EB3\\u0227\\u01E1\\xE4\\u01DF\\u1EA3\\xE5\\u01FB\\u01CE\\u0201\\u0203\\u1EA1\\u1EAD\\u1EB7\\u1E01\\u0105\\u2C65\\u0250\"\n}, {\n  base: 'aa',\n  letters: \"\\uA733\"\n}, {\n  base: 'ae',\n  letters: \"\\xE6\\u01FD\\u01E3\"\n}, {\n  base: 'ao',\n  letters: \"\\uA735\"\n}, {\n  base: 'au',\n  letters: \"\\uA737\"\n}, {\n  base: 'av',\n  letters: \"\\uA739\\uA73B\"\n}, {\n  base: 'ay',\n  letters: \"\\uA73D\"\n}, {\n  base: 'b',\n  letters: \"b\\u24D1\\uFF42\\u1E03\\u1E05\\u1E07\\u0180\\u0183\\u0253\"\n}, {\n  base: 'c',\n  letters: \"c\\u24D2\\uFF43\\u0107\\u0109\\u010B\\u010D\\xE7\\u1E09\\u0188\\u023C\\uA73F\\u2184\"\n}, {\n  base: 'd',\n  letters: \"d\\u24D3\\uFF44\\u1E0B\\u010F\\u1E0D\\u1E11\\u1E13\\u1E0F\\u0111\\u018C\\u0256\\u0257\\uA77A\"\n}, {\n  base: 'dz',\n  letters: \"\\u01F3\\u01C6\"\n}, {\n  base: 'e',\n  letters: \"e\\u24D4\\uFF45\\xE8\\xE9\\xEA\\u1EC1\\u1EBF\\u1EC5\\u1EC3\\u1EBD\\u0113\\u1E15\\u1E17\\u0115\\u0117\\xEB\\u1EBB\\u011B\\u0205\\u0207\\u1EB9\\u1EC7\\u0229\\u1E1D\\u0119\\u1E19\\u1E1B\\u0247\\u025B\\u01DD\"\n}, {\n  base: 'f',\n  letters: \"f\\u24D5\\uFF46\\u1E1F\\u0192\\uA77C\"\n}, {\n  base: 'g',\n  letters: \"g\\u24D6\\uFF47\\u01F5\\u011D\\u1E21\\u011F\\u0121\\u01E7\\u0123\\u01E5\\u0260\\uA7A1\\u1D79\\uA77F\"\n}, {\n  base: 'h',\n  letters: \"h\\u24D7\\uFF48\\u0125\\u1E23\\u1E27\\u021F\\u1E25\\u1E29\\u1E2B\\u1E96\\u0127\\u2C68\\u2C76\\u0265\"\n}, {\n  base: 'hv',\n  letters: \"\\u0195\"\n}, {\n  base: 'i',\n  letters: \"i\\u24D8\\uFF49\\xEC\\xED\\xEE\\u0129\\u012B\\u012D\\xEF\\u1E2F\\u1EC9\\u01D0\\u0209\\u020B\\u1ECB\\u012F\\u1E2D\\u0268\\u0131\"\n}, {\n  base: 'j',\n  letters: \"j\\u24D9\\uFF4A\\u0135\\u01F0\\u0249\"\n}, {\n  base: 'k',\n  letters: \"k\\u24DA\\uFF4B\\u1E31\\u01E9\\u1E33\\u0137\\u1E35\\u0199\\u2C6A\\uA741\\uA743\\uA745\\uA7A3\"\n}, {\n  base: 'l',\n  letters: \"l\\u24DB\\uFF4C\\u0140\\u013A\\u013E\\u1E37\\u1E39\\u013C\\u1E3D\\u1E3B\\u017F\\u0142\\u019A\\u026B\\u2C61\\uA749\\uA781\\uA747\"\n}, {\n  base: 'lj',\n  letters: \"\\u01C9\"\n}, {\n  base: 'm',\n  letters: \"m\\u24DC\\uFF4D\\u1E3F\\u1E41\\u1E43\\u0271\\u026F\"\n}, {\n  base: 'n',\n  letters: \"n\\u24DD\\uFF4E\\u01F9\\u0144\\xF1\\u1E45\\u0148\\u1E47\\u0146\\u1E4B\\u1E49\\u019E\\u0272\\u0149\\uA791\\uA7A5\"\n}, {\n  base: 'nj',\n  letters: \"\\u01CC\"\n}, {\n  base: 'o',\n  letters: \"o\\u24DE\\uFF4F\\xF2\\xF3\\xF4\\u1ED3\\u1ED1\\u1ED7\\u1ED5\\xF5\\u1E4D\\u022D\\u1E4F\\u014D\\u1E51\\u1E53\\u014F\\u022F\\u0231\\xF6\\u022B\\u1ECF\\u0151\\u01D2\\u020D\\u020F\\u01A1\\u1EDD\\u1EDB\\u1EE1\\u1EDF\\u1EE3\\u1ECD\\u1ED9\\u01EB\\u01ED\\xF8\\u01FF\\u0254\\uA74B\\uA74D\\u0275\"\n}, {\n  base: 'oi',\n  letters: \"\\u01A3\"\n}, {\n  base: 'ou',\n  letters: \"\\u0223\"\n}, {\n  base: 'oo',\n  letters: \"\\uA74F\"\n}, {\n  base: 'p',\n  letters: \"p\\u24DF\\uFF50\\u1E55\\u1E57\\u01A5\\u1D7D\\uA751\\uA753\\uA755\"\n}, {\n  base: 'q',\n  letters: \"q\\u24E0\\uFF51\\u024B\\uA757\\uA759\"\n}, {\n  base: 'r',\n  letters: \"r\\u24E1\\uFF52\\u0155\\u1E59\\u0159\\u0211\\u0213\\u1E5B\\u1E5D\\u0157\\u1E5F\\u024D\\u027D\\uA75B\\uA7A7\\uA783\"\n}, {\n  base: 's',\n  letters: \"s\\u24E2\\uFF53\\xDF\\u015B\\u1E65\\u015D\\u1E61\\u0161\\u1E67\\u1E63\\u1E69\\u0219\\u015F\\u023F\\uA7A9\\uA785\\u1E9B\"\n}, {\n  base: 't',\n  letters: \"t\\u24E3\\uFF54\\u1E6B\\u1E97\\u0165\\u1E6D\\u021B\\u0163\\u1E71\\u1E6F\\u0167\\u01AD\\u0288\\u2C66\\uA787\"\n}, {\n  base: 'tz',\n  letters: \"\\uA729\"\n}, {\n  base: 'u',\n  letters: \"u\\u24E4\\uFF55\\xF9\\xFA\\xFB\\u0169\\u1E79\\u016B\\u1E7B\\u016D\\xFC\\u01DC\\u01D8\\u01D6\\u01DA\\u1EE7\\u016F\\u0171\\u01D4\\u0215\\u0217\\u01B0\\u1EEB\\u1EE9\\u1EEF\\u1EED\\u1EF1\\u1EE5\\u1E73\\u0173\\u1E77\\u1E75\\u0289\"\n}, {\n  base: 'v',\n  letters: \"v\\u24E5\\uFF56\\u1E7D\\u1E7F\\u028B\\uA75F\\u028C\"\n}, {\n  base: 'vy',\n  letters: \"\\uA761\"\n}, {\n  base: 'w',\n  letters: \"w\\u24E6\\uFF57\\u1E81\\u1E83\\u0175\\u1E87\\u1E85\\u1E98\\u1E89\\u2C73\"\n}, {\n  base: 'x',\n  letters: \"x\\u24E7\\uFF58\\u1E8B\\u1E8D\"\n}, {\n  base: 'y',\n  letters: \"y\\u24E8\\uFF59\\u1EF3\\xFD\\u0177\\u1EF9\\u0233\\u1E8F\\xFF\\u1EF7\\u1E99\\u1EF5\\u01B4\\u024F\\u1EFF\"\n}, {\n  base: 'z',\n  letters: \"z\\u24E9\\uFF5A\\u017A\\u1E91\\u017C\\u017E\\u1E93\\u1E95\\u01B6\\u0225\\u0240\\u2C6C\\uA763\"\n}];\nvar anyDiacritic = new RegExp('[' + diacritics.map(function (d) {\n  return d.letters;\n}).join('') + ']', 'g');\nvar diacriticToBase = {};\nfor (var i = 0; i < diacritics.length; i++) {\n  var diacritic = diacritics[i];\n  for (var j = 0; j < diacritic.letters.length; j++) {\n    diacriticToBase[diacritic.letters[j]] = diacritic.base;\n  }\n}\nvar stripDiacritics = function stripDiacritics(str) {\n  return str.replace(anyDiacritic, function (match) {\n    return diacriticToBase[match];\n  });\n};\n\nvar memoizedStripDiacriticsForInput = memoizeOne(stripDiacritics);\nvar trimString = function trimString(str) {\n  return str.replace(/^\\s+|\\s+$/g, '');\n};\nvar defaultStringify = function defaultStringify(option) {\n  return \"\".concat(option.label, \" \").concat(option.value);\n};\nvar createFilter = function createFilter(config) {\n  return function (option, rawInput) {\n    // eslint-disable-next-line no-underscore-dangle\n    if (option.data.__isNew__) return true;\n    var _ignoreCase$ignoreAcc = _objectSpread({\n        ignoreCase: true,\n        ignoreAccents: true,\n        stringify: defaultStringify,\n        trim: true,\n        matchFrom: 'any'\n      }, config),\n      ignoreCase = _ignoreCase$ignoreAcc.ignoreCase,\n      ignoreAccents = _ignoreCase$ignoreAcc.ignoreAccents,\n      stringify = _ignoreCase$ignoreAcc.stringify,\n      trim = _ignoreCase$ignoreAcc.trim,\n      matchFrom = _ignoreCase$ignoreAcc.matchFrom;\n    var input = trim ? trimString(rawInput) : rawInput;\n    var candidate = trim ? trimString(stringify(option)) : stringify(option);\n    if (ignoreCase) {\n      input = input.toLowerCase();\n      candidate = candidate.toLowerCase();\n    }\n    if (ignoreAccents) {\n      input = memoizedStripDiacriticsForInput(input);\n      candidate = stripDiacritics(candidate);\n    }\n    return matchFrom === 'start' ? candidate.substr(0, input.length) === input : candidate.indexOf(input) > -1;\n  };\n};\n\nvar _excluded = [\"innerRef\"];\nfunction DummyInput(_ref) {\n  var innerRef = _ref.innerRef,\n    props = _objectWithoutProperties(_ref, _excluded);\n  // Remove animation props not meant for HTML elements\n  var filteredProps = removeProps(props, 'onExited', 'in', 'enter', 'exit', 'appear');\n  return jsx(\"input\", _extends({\n    ref: innerRef\n  }, filteredProps, {\n    css: /*#__PURE__*/css({\n      label: 'dummyInput',\n      // get rid of any default styles\n      background: 0,\n      border: 0,\n      // important! this hides the flashing cursor\n      caretColor: 'transparent',\n      fontSize: 'inherit',\n      gridArea: '1 / 1 / 2 / 3',\n      outline: 0,\n      padding: 0,\n      // important! without `width` browsers won't allow focus\n      width: 1,\n      // remove cursor on desktop\n      color: 'transparent',\n      // remove cursor on mobile whilst maintaining \"scroll into view\" behaviour\n      left: -100,\n      opacity: 0,\n      position: 'relative',\n      transform: 'scale(.01)'\n    }, process.env.NODE_ENV === \"production\" ? \"\" : \";label:DummyInput;\", process.env.NODE_ENV === \"production\" ? \"\" : \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkR1bW15SW5wdXQudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQXlCTSIsImZpbGUiOiJEdW1teUlucHV0LnRzeCIsInNvdXJjZXNDb250ZW50IjpbIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsgUmVmIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsganN4IH0gZnJvbSAnQGVtb3Rpb24vcmVhY3QnO1xuaW1wb3J0IHsgcmVtb3ZlUHJvcHMgfSBmcm9tICcuLi91dGlscyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIER1bW15SW5wdXQoe1xuICBpbm5lclJlZixcbiAgLi4ucHJvcHNcbn06IEpTWC5JbnRyaW5zaWNFbGVtZW50c1snaW5wdXQnXSAmIHtcbiAgcmVhZG9ubHkgaW5uZXJSZWY6IFJlZjxIVE1MSW5wdXRFbGVtZW50Pjtcbn0pIHtcbiAgLy8gUmVtb3ZlIGFuaW1hdGlvbiBwcm9wcyBub3QgbWVhbnQgZm9yIEhUTUwgZWxlbWVudHNcbiAgY29uc3QgZmlsdGVyZWRQcm9wcyA9IHJlbW92ZVByb3BzKFxuICAgIHByb3BzLFxuICAgICdvbkV4aXRlZCcsXG4gICAgJ2luJyxcbiAgICAnZW50ZXInLFxuICAgICdleGl0JyxcbiAgICAnYXBwZWFyJ1xuICApO1xuXG4gIHJldHVybiAoXG4gICAgPGlucHV0XG4gICAgICByZWY9e2lubmVyUmVmfVxuICAgICAgey4uLmZpbHRlcmVkUHJvcHN9XG4gICAgICBjc3M9e3tcbiAgICAgICAgbGFiZWw6ICdkdW1teUlucHV0JyxcbiAgICAgICAgLy8gZ2V0IHJpZCBvZiBhbnkgZGVmYXVsdCBzdHlsZXNcbiAgICAgICAgYmFja2dyb3VuZDogMCxcbiAgICAgICAgYm9yZGVyOiAwLFxuICAgICAgICAvLyBpbXBvcnRhbnQhIHRoaXMgaGlkZXMgdGhlIGZsYXNoaW5nIGN1cnNvclxuICAgICAgICBjYXJldENvbG9yOiAndHJhbnNwYXJlbnQnLFxuICAgICAgICBmb250U2l6ZTogJ2luaGVyaXQnLFxuICAgICAgICBncmlkQXJlYTogJzEgLyAxIC8gMiAvIDMnLFxuICAgICAgICBvdXRsaW5lOiAwLFxuICAgICAgICBwYWRkaW5nOiAwLFxuICAgICAgICAvLyBpbXBvcnRhbnQhIHdpdGhvdXQgYHdpZHRoYCBicm93c2VycyB3b24ndCBhbGxvdyBmb2N1c1xuICAgICAgICB3aWR0aDogMSxcblxuICAgICAgICAvLyByZW1vdmUgY3Vyc29yIG9uIGRlc2t0b3BcbiAgICAgICAgY29sb3I6ICd0cmFuc3BhcmVudCcsXG5cbiAgICAgICAgLy8gcmVtb3ZlIGN1cnNvciBvbiBtb2JpbGUgd2hpbHN0IG1haW50YWluaW5nIFwic2Nyb2xsIGludG8gdmlld1wiIGJlaGF2aW91clxuICAgICAgICBsZWZ0OiAtMTAwLFxuICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgICAgdHJhbnNmb3JtOiAnc2NhbGUoLjAxKScsXG4gICAgICB9fVxuICAgIC8+XG4gICk7XG59XG4iXX0= */\")\n  }));\n}\n\nvar cancelScroll = function cancelScroll(event) {\n  if (event.cancelable) event.preventDefault();\n  event.stopPropagation();\n};\nfunction useScrollCapture(_ref) {\n  var isEnabled = _ref.isEnabled,\n    onBottomArrive = _ref.onBottomArrive,\n    onBottomLeave = _ref.onBottomLeave,\n    onTopArrive = _ref.onTopArrive,\n    onTopLeave = _ref.onTopLeave;\n  var isBottom = useRef(false);\n  var isTop = useRef(false);\n  var touchStart = useRef(0);\n  var scrollTarget = useRef(null);\n  var handleEventDelta = useCallback(function (event, delta) {\n    if (scrollTarget.current === null) return;\n    var _scrollTarget$current = scrollTarget.current,\n      scrollTop = _scrollTarget$current.scrollTop,\n      scrollHeight = _scrollTarget$current.scrollHeight,\n      clientHeight = _scrollTarget$current.clientHeight;\n    var target = scrollTarget.current;\n    var isDeltaPositive = delta > 0;\n    var availableScroll = scrollHeight - clientHeight - scrollTop;\n    var shouldCancelScroll = false;\n\n    // reset bottom/top flags\n    if (availableScroll > delta && isBottom.current) {\n      if (onBottomLeave) onBottomLeave(event);\n      isBottom.current = false;\n    }\n    if (isDeltaPositive && isTop.current) {\n      if (onTopLeave) onTopLeave(event);\n      isTop.current = false;\n    }\n\n    // bottom limit\n    if (isDeltaPositive && delta > availableScroll) {\n      if (onBottomArrive && !isBottom.current) {\n        onBottomArrive(event);\n      }\n      target.scrollTop = scrollHeight;\n      shouldCancelScroll = true;\n      isBottom.current = true;\n\n      // top limit\n    } else if (!isDeltaPositive && -delta > scrollTop) {\n      if (onTopArrive && !isTop.current) {\n        onTopArrive(event);\n      }\n      target.scrollTop = 0;\n      shouldCancelScroll = true;\n      isTop.current = true;\n    }\n\n    // cancel scroll\n    if (shouldCancelScroll) {\n      cancelScroll(event);\n    }\n  }, [onBottomArrive, onBottomLeave, onTopArrive, onTopLeave]);\n  var onWheel = useCallback(function (event) {\n    handleEventDelta(event, event.deltaY);\n  }, [handleEventDelta]);\n  var onTouchStart = useCallback(function (event) {\n    // set touch start so we can calculate touchmove delta\n    touchStart.current = event.changedTouches[0].clientY;\n  }, []);\n  var onTouchMove = useCallback(function (event) {\n    var deltaY = touchStart.current - event.changedTouches[0].clientY;\n    handleEventDelta(event, deltaY);\n  }, [handleEventDelta]);\n  var startListening = useCallback(function (el) {\n    // bail early if no element is available to attach to\n    if (!el) return;\n    var notPassive = supportsPassiveEvents ? {\n      passive: false\n    } : false;\n    el.addEventListener('wheel', onWheel, notPassive);\n    el.addEventListener('touchstart', onTouchStart, notPassive);\n    el.addEventListener('touchmove', onTouchMove, notPassive);\n  }, [onTouchMove, onTouchStart, onWheel]);\n  var stopListening = useCallback(function (el) {\n    // bail early if no element is available to detach from\n    if (!el) return;\n    el.removeEventListener('wheel', onWheel, false);\n    el.removeEventListener('touchstart', onTouchStart, false);\n    el.removeEventListener('touchmove', onTouchMove, false);\n  }, [onTouchMove, onTouchStart, onWheel]);\n  useEffect(function () {\n    if (!isEnabled) return;\n    var element = scrollTarget.current;\n    startListening(element);\n    return function () {\n      stopListening(element);\n    };\n  }, [isEnabled, startListening, stopListening]);\n  return function (element) {\n    scrollTarget.current = element;\n  };\n}\n\nvar STYLE_KEYS = ['boxSizing', 'height', 'overflow', 'paddingRight', 'position'];\nvar LOCK_STYLES = {\n  boxSizing: 'border-box',\n  // account for possible declaration `width: 100%;` on body\n  overflow: 'hidden',\n  position: 'relative',\n  height: '100%'\n};\nfunction preventTouchMove(e) {\n  e.preventDefault();\n}\nfunction allowTouchMove(e) {\n  e.stopPropagation();\n}\nfunction preventInertiaScroll() {\n  var top = this.scrollTop;\n  var totalScroll = this.scrollHeight;\n  var currentScroll = top + this.offsetHeight;\n  if (top === 0) {\n    this.scrollTop = 1;\n  } else if (currentScroll === totalScroll) {\n    this.scrollTop = top - 1;\n  }\n}\n\n// `ontouchstart` check works on most browsers\n// `maxTouchPoints` works on IE10/11 and Surface\nfunction isTouchDevice() {\n  return 'ontouchstart' in window || navigator.maxTouchPoints;\n}\nvar canUseDOM = !!(typeof window !== 'undefined' && window.document && window.document.createElement);\nvar activeScrollLocks = 0;\nvar listenerOptions = {\n  capture: false,\n  passive: false\n};\nfunction useScrollLock(_ref) {\n  var isEnabled = _ref.isEnabled,\n    _ref$accountForScroll = _ref.accountForScrollbars,\n    accountForScrollbars = _ref$accountForScroll === void 0 ? true : _ref$accountForScroll;\n  var originalStyles = useRef({});\n  var scrollTarget = useRef(null);\n  var addScrollLock = useCallback(function (touchScrollTarget) {\n    if (!canUseDOM) return;\n    var target = document.body;\n    var targetStyle = target && target.style;\n    if (accountForScrollbars) {\n      // store any styles already applied to the body\n      STYLE_KEYS.forEach(function (key) {\n        var val = targetStyle && targetStyle[key];\n        originalStyles.current[key] = val;\n      });\n    }\n\n    // apply the lock styles and padding if this is the first scroll lock\n    if (accountForScrollbars && activeScrollLocks < 1) {\n      var currentPadding = parseInt(originalStyles.current.paddingRight, 10) || 0;\n      var clientWidth = document.body ? document.body.clientWidth : 0;\n      var adjustedPadding = window.innerWidth - clientWidth + currentPadding || 0;\n      Object.keys(LOCK_STYLES).forEach(function (key) {\n        var val = LOCK_STYLES[key];\n        if (targetStyle) {\n          targetStyle[key] = val;\n        }\n      });\n      if (targetStyle) {\n        targetStyle.paddingRight = \"\".concat(adjustedPadding, \"px\");\n      }\n    }\n\n    // account for touch devices\n    if (target && isTouchDevice()) {\n      // Mobile Safari ignores { overflow: hidden } declaration on the body.\n      target.addEventListener('touchmove', preventTouchMove, listenerOptions);\n\n      // Allow scroll on provided target\n      if (touchScrollTarget) {\n        touchScrollTarget.addEventListener('touchstart', preventInertiaScroll, listenerOptions);\n        touchScrollTarget.addEventListener('touchmove', allowTouchMove, listenerOptions);\n      }\n    }\n\n    // increment active scroll locks\n    activeScrollLocks += 1;\n  }, [accountForScrollbars]);\n  var removeScrollLock = useCallback(function (touchScrollTarget) {\n    if (!canUseDOM) return;\n    var target = document.body;\n    var targetStyle = target && target.style;\n\n    // safely decrement active scroll locks\n    activeScrollLocks = Math.max(activeScrollLocks - 1, 0);\n\n    // reapply original body styles, if any\n    if (accountForScrollbars && activeScrollLocks < 1) {\n      STYLE_KEYS.forEach(function (key) {\n        var val = originalStyles.current[key];\n        if (targetStyle) {\n          targetStyle[key] = val;\n        }\n      });\n    }\n\n    // remove touch listeners\n    if (target && isTouchDevice()) {\n      target.removeEventListener('touchmove', preventTouchMove, listenerOptions);\n      if (touchScrollTarget) {\n        touchScrollTarget.removeEventListener('touchstart', preventInertiaScroll, listenerOptions);\n        touchScrollTarget.removeEventListener('touchmove', allowTouchMove, listenerOptions);\n      }\n    }\n  }, [accountForScrollbars]);\n  useEffect(function () {\n    if (!isEnabled) return;\n    var element = scrollTarget.current;\n    addScrollLock(element);\n    return function () {\n      removeScrollLock(element);\n    };\n  }, [isEnabled, addScrollLock, removeScrollLock]);\n  return function (element) {\n    scrollTarget.current = element;\n  };\n}\n\nfunction _EMOTION_STRINGIFIED_CSS_ERROR__$1() { return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\"; }\nvar blurSelectInput = function blurSelectInput(event) {\n  var element = event.target;\n  return element.ownerDocument.activeElement && element.ownerDocument.activeElement.blur();\n};\nvar _ref2$1 = process.env.NODE_ENV === \"production\" ? {\n  name: \"1kfdb0e\",\n  styles: \"position:fixed;left:0;bottom:0;right:0;top:0\"\n} : {\n  name: \"bp8cua-ScrollManager\",\n  styles: \"position:fixed;left:0;bottom:0;right:0;top:0;label:ScrollManager;\",\n  map: \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlNjcm9sbE1hbmFnZXIudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQW9EVSIsImZpbGUiOiJTY3JvbGxNYW5hZ2VyLnRzeCIsInNvdXJjZXNDb250ZW50IjpbIi8qKiBAanN4IGpzeCAqL1xuaW1wb3J0IHsganN4IH0gZnJvbSAnQGVtb3Rpb24vcmVhY3QnO1xuaW1wb3J0IHsgRnJhZ21lbnQsIFJlYWN0RWxlbWVudCwgUmVmQ2FsbGJhY2ssIE1vdXNlRXZlbnQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgdXNlU2Nyb2xsQ2FwdHVyZSBmcm9tICcuL3VzZVNjcm9sbENhcHR1cmUnO1xuaW1wb3J0IHVzZVNjcm9sbExvY2sgZnJvbSAnLi91c2VTY3JvbGxMb2NrJztcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgcmVhZG9ubHkgY2hpbGRyZW46IChyZWY6IFJlZkNhbGxiYWNrPEhUTUxFbGVtZW50PikgPT4gUmVhY3RFbGVtZW50O1xuICByZWFkb25seSBsb2NrRW5hYmxlZDogYm9vbGVhbjtcbiAgcmVhZG9ubHkgY2FwdHVyZUVuYWJsZWQ6IGJvb2xlYW47XG4gIHJlYWRvbmx5IG9uQm90dG9tQXJyaXZlPzogKGV2ZW50OiBXaGVlbEV2ZW50IHwgVG91Y2hFdmVudCkgPT4gdm9pZDtcbiAgcmVhZG9ubHkgb25Cb3R0b21MZWF2ZT86IChldmVudDogV2hlZWxFdmVudCB8IFRvdWNoRXZlbnQpID0+IHZvaWQ7XG4gIHJlYWRvbmx5IG9uVG9wQXJyaXZlPzogKGV2ZW50OiBXaGVlbEV2ZW50IHwgVG91Y2hFdmVudCkgPT4gdm9pZDtcbiAgcmVhZG9ubHkgb25Ub3BMZWF2ZT86IChldmVudDogV2hlZWxFdmVudCB8IFRvdWNoRXZlbnQpID0+IHZvaWQ7XG59XG5cbmNvbnN0IGJsdXJTZWxlY3RJbnB1dCA9IChldmVudDogTW91c2VFdmVudDxIVE1MRGl2RWxlbWVudD4pID0+IHtcbiAgY29uc3QgZWxlbWVudCA9IGV2ZW50LnRhcmdldCBhcyBIVE1MRGl2RWxlbWVudDtcbiAgcmV0dXJuIChcbiAgICBlbGVtZW50Lm93bmVyRG9jdW1lbnQuYWN0aXZlRWxlbWVudCAmJlxuICAgIChlbGVtZW50Lm93bmVyRG9jdW1lbnQuYWN0aXZlRWxlbWVudCBhcyBIVE1MRWxlbWVudCkuYmx1cigpXG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBTY3JvbGxNYW5hZ2VyKHtcbiAgY2hpbGRyZW4sXG4gIGxvY2tFbmFibGVkLFxuICBjYXB0dXJlRW5hYmxlZCA9IHRydWUsXG4gIG9uQm90dG9tQXJyaXZlLFxuICBvbkJvdHRvbUxlYXZlLFxuICBvblRvcEFycml2ZSxcbiAgb25Ub3BMZWF2ZSxcbn06IFByb3BzKSB7XG4gIGNvbnN0IHNldFNjcm9sbENhcHR1cmVUYXJnZXQgPSB1c2VTY3JvbGxDYXB0dXJlKHtcbiAgICBpc0VuYWJsZWQ6IGNhcHR1cmVFbmFibGVkLFxuICAgIG9uQm90dG9tQXJyaXZlLFxuICAgIG9uQm90dG9tTGVhdmUsXG4gICAgb25Ub3BBcnJpdmUsXG4gICAgb25Ub3BMZWF2ZSxcbiAgfSk7XG4gIGNvbnN0IHNldFNjcm9sbExvY2tUYXJnZXQgPSB1c2VTY3JvbGxMb2NrKHsgaXNFbmFibGVkOiBsb2NrRW5hYmxlZCB9KTtcblxuICBjb25zdCB0YXJnZXRSZWY6IFJlZkNhbGxiYWNrPEhUTUxFbGVtZW50PiA9IChlbGVtZW50KSA9PiB7XG4gICAgc2V0U2Nyb2xsQ2FwdHVyZVRhcmdldChlbGVtZW50KTtcbiAgICBzZXRTY3JvbGxMb2NrVGFyZ2V0KGVsZW1lbnQpO1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPEZyYWdtZW50PlxuICAgICAge2xvY2tFbmFibGVkICYmIChcbiAgICAgICAgPGRpdlxuICAgICAgICAgIG9uQ2xpY2s9e2JsdXJTZWxlY3RJbnB1dH1cbiAgICAgICAgICBjc3M9e3sgcG9zaXRpb246ICdmaXhlZCcsIGxlZnQ6IDAsIGJvdHRvbTogMCwgcmlnaHQ6IDAsIHRvcDogMCB9fVxuICAgICAgICAvPlxuICAgICAgKX1cbiAgICAgIHtjaGlsZHJlbih0YXJnZXRSZWYpfVxuICAgIDwvRnJhZ21lbnQ+XG4gICk7XG59XG4iXX0= */\",\n  toString: _EMOTION_STRINGIFIED_CSS_ERROR__$1\n};\nfunction ScrollManager(_ref) {\n  var children = _ref.children,\n    lockEnabled = _ref.lockEnabled,\n    _ref$captureEnabled = _ref.captureEnabled,\n    captureEnabled = _ref$captureEnabled === void 0 ? true : _ref$captureEnabled,\n    onBottomArrive = _ref.onBottomArrive,\n    onBottomLeave = _ref.onBottomLeave,\n    onTopArrive = _ref.onTopArrive,\n    onTopLeave = _ref.onTopLeave;\n  var setScrollCaptureTarget = useScrollCapture({\n    isEnabled: captureEnabled,\n    onBottomArrive: onBottomArrive,\n    onBottomLeave: onBottomLeave,\n    onTopArrive: onTopArrive,\n    onTopLeave: onTopLeave\n  });\n  var setScrollLockTarget = useScrollLock({\n    isEnabled: lockEnabled\n  });\n  var targetRef = function targetRef(element) {\n    setScrollCaptureTarget(element);\n    setScrollLockTarget(element);\n  };\n  return jsx(Fragment, null, lockEnabled && jsx(\"div\", {\n    onClick: blurSelectInput,\n    css: _ref2$1\n  }), children(targetRef));\n}\n\nfunction _EMOTION_STRINGIFIED_CSS_ERROR__() { return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\"; }\nvar _ref2 = process.env.NODE_ENV === \"production\" ? {\n  name: \"1a0ro4n-requiredInput\",\n  styles: \"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%\"\n} : {\n  name: \"5kkxb2-requiredInput-RequiredInput\",\n  styles: \"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%;label:RequiredInput;\",\n  map: \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlJlcXVpcmVkSW5wdXQudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQWNJIiwiZmlsZSI6IlJlcXVpcmVkSW5wdXQudHN4Iiwic291cmNlc0NvbnRlbnQiOlsiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBGb2N1c0V2ZW50SGFuZGxlciwgRnVuY3Rpb25Db21wb25lbnQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBqc3ggfSBmcm9tICdAZW1vdGlvbi9yZWFjdCc7XG5cbmNvbnN0IFJlcXVpcmVkSW5wdXQ6IEZ1bmN0aW9uQ29tcG9uZW50PHtcbiAgcmVhZG9ubHkgbmFtZT86IHN0cmluZztcbiAgcmVhZG9ubHkgb25Gb2N1czogRm9jdXNFdmVudEhhbmRsZXI8SFRNTElucHV0RWxlbWVudD47XG59PiA9ICh7IG5hbWUsIG9uRm9jdXMgfSkgPT4gKFxuICA8aW5wdXRcbiAgICByZXF1aXJlZFxuICAgIG5hbWU9e25hbWV9XG4gICAgdGFiSW5kZXg9ey0xfVxuICAgIGFyaWEtaGlkZGVuPVwidHJ1ZVwiXG4gICAgb25Gb2N1cz17b25Gb2N1c31cbiAgICBjc3M9e3tcbiAgICAgIGxhYmVsOiAncmVxdWlyZWRJbnB1dCcsXG4gICAgICBvcGFjaXR5OiAwLFxuICAgICAgcG9pbnRlckV2ZW50czogJ25vbmUnLFxuICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICBib3R0b206IDAsXG4gICAgICBsZWZ0OiAwLFxuICAgICAgcmlnaHQ6IDAsXG4gICAgICB3aWR0aDogJzEwMCUnLFxuICAgIH19XG4gICAgLy8gUHJldmVudCBgU3dpdGNoaW5nIGZyb20gdW5jb250cm9sbGVkIHRvIGNvbnRyb2xsZWRgIGVycm9yXG4gICAgdmFsdWU9XCJcIlxuICAgIG9uQ2hhbmdlPXsoKSA9PiB7fX1cbiAgLz5cbik7XG5cbmV4cG9ydCBkZWZhdWx0IFJlcXVpcmVkSW5wdXQ7XG4iXX0= */\",\n  toString: _EMOTION_STRINGIFIED_CSS_ERROR__\n};\nvar RequiredInput = function RequiredInput(_ref) {\n  var name = _ref.name,\n    onFocus = _ref.onFocus;\n  return jsx(\"input\", {\n    required: true,\n    name: name,\n    tabIndex: -1,\n    \"aria-hidden\": \"true\",\n    onFocus: onFocus,\n    css: _ref2\n    // Prevent `Switching from uncontrolled to controlled` error\n    ,\n    value: \"\",\n    onChange: function onChange() {}\n  });\n};\nvar RequiredInput$1 = RequiredInput;\n\n/// <reference types=\"user-agent-data-types\" />\n\nfunction testPlatform(re) {\n  var _window$navigator$use;\n  return typeof window !== 'undefined' && window.navigator != null ? re.test(((_window$navigator$use = window.navigator['userAgentData']) === null || _window$navigator$use === void 0 ? void 0 : _window$navigator$use.platform) || window.navigator.platform) : false;\n}\nfunction isIPhone() {\n  return testPlatform(/^iPhone/i);\n}\nfunction isMac() {\n  return testPlatform(/^Mac/i);\n}\nfunction isIPad() {\n  return testPlatform(/^iPad/i) ||\n  // iPadOS 13 lies and says it's a Mac, but we can distinguish by detecting touch support.\n  isMac() && navigator.maxTouchPoints > 1;\n}\nfunction isIOS() {\n  return isIPhone() || isIPad();\n}\nfunction isAppleDevice() {\n  return isMac() || isIOS();\n}\n\nvar formatGroupLabel = function formatGroupLabel(group) {\n  return group.label;\n};\nvar getOptionLabel$1 = function getOptionLabel(option) {\n  return option.label;\n};\nvar getOptionValue$1 = function getOptionValue(option) {\n  return option.value;\n};\nvar isOptionDisabled = function isOptionDisabled(option) {\n  return !!option.isDisabled;\n};\n\nvar defaultStyles = {\n  clearIndicator: clearIndicatorCSS,\n  container: containerCSS,\n  control: css$1,\n  dropdownIndicator: dropdownIndicatorCSS,\n  group: groupCSS,\n  groupHeading: groupHeadingCSS,\n  indicatorsContainer: indicatorsContainerCSS,\n  indicatorSeparator: indicatorSeparatorCSS,\n  input: inputCSS,\n  loadingIndicator: loadingIndicatorCSS,\n  loadingMessage: loadingMessageCSS,\n  menu: menuCSS,\n  menuList: menuListCSS,\n  menuPortal: menuPortalCSS,\n  multiValue: multiValueCSS,\n  multiValueLabel: multiValueLabelCSS,\n  multiValueRemove: multiValueRemoveCSS,\n  noOptionsMessage: noOptionsMessageCSS,\n  option: optionCSS,\n  placeholder: placeholderCSS,\n  singleValue: css$2,\n  valueContainer: valueContainerCSS\n};\n// Merge Utility\n// Allows consumers to extend a base Select with additional styles\n\nfunction mergeStyles(source) {\n  var target = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  // initialize with source styles\n  var styles = _objectSpread({}, source);\n\n  // massage in target styles\n  Object.keys(target).forEach(function (keyAsString) {\n    var key = keyAsString;\n    if (source[key]) {\n      styles[key] = function (rsCss, props) {\n        return target[key](source[key](rsCss, props), props);\n      };\n    } else {\n      styles[key] = target[key];\n    }\n  });\n  return styles;\n}\n\nvar colors = {\n  primary: '#2684FF',\n  primary75: '#4C9AFF',\n  primary50: '#B2D4FF',\n  primary25: '#DEEBFF',\n  danger: '#DE350B',\n  dangerLight: '#FFBDAD',\n  neutral0: 'hsl(0, 0%, 100%)',\n  neutral5: 'hsl(0, 0%, 95%)',\n  neutral10: 'hsl(0, 0%, 90%)',\n  neutral20: 'hsl(0, 0%, 80%)',\n  neutral30: 'hsl(0, 0%, 70%)',\n  neutral40: 'hsl(0, 0%, 60%)',\n  neutral50: 'hsl(0, 0%, 50%)',\n  neutral60: 'hsl(0, 0%, 40%)',\n  neutral70: 'hsl(0, 0%, 30%)',\n  neutral80: 'hsl(0, 0%, 20%)',\n  neutral90: 'hsl(0, 0%, 10%)'\n};\nvar borderRadius = 4;\n// Used to calculate consistent margin/padding on elements\nvar baseUnit = 4;\n// The minimum height of the control\nvar controlHeight = 38;\n// The amount of space between the control and menu */\nvar menuGutter = baseUnit * 2;\nvar spacing = {\n  baseUnit: baseUnit,\n  controlHeight: controlHeight,\n  menuGutter: menuGutter\n};\nvar defaultTheme = {\n  borderRadius: borderRadius,\n  colors: colors,\n  spacing: spacing\n};\n\nvar defaultProps = {\n  'aria-live': 'polite',\n  backspaceRemovesValue: true,\n  blurInputOnSelect: isTouchCapable(),\n  captureMenuScroll: !isTouchCapable(),\n  classNames: {},\n  closeMenuOnSelect: true,\n  closeMenuOnScroll: false,\n  components: {},\n  controlShouldRenderValue: true,\n  escapeClearsValue: false,\n  filterOption: createFilter(),\n  formatGroupLabel: formatGroupLabel,\n  getOptionLabel: getOptionLabel$1,\n  getOptionValue: getOptionValue$1,\n  isDisabled: false,\n  isLoading: false,\n  isMulti: false,\n  isRtl: false,\n  isSearchable: true,\n  isOptionDisabled: isOptionDisabled,\n  loadingMessage: function loadingMessage() {\n    return 'Loading...';\n  },\n  maxMenuHeight: 300,\n  minMenuHeight: 140,\n  menuIsOpen: false,\n  menuPlacement: 'bottom',\n  menuPosition: 'absolute',\n  menuShouldBlockScroll: false,\n  menuShouldScrollIntoView: !isMobileDevice(),\n  noOptionsMessage: function noOptionsMessage() {\n    return 'No options';\n  },\n  openMenuOnFocus: false,\n  openMenuOnClick: true,\n  options: [],\n  pageSize: 5,\n  placeholder: 'Select...',\n  screenReaderStatus: function screenReaderStatus(_ref) {\n    var count = _ref.count;\n    return \"\".concat(count, \" result\").concat(count !== 1 ? 's' : '', \" available\");\n  },\n  styles: {},\n  tabIndex: 0,\n  tabSelectsValue: true,\n  unstyled: false\n};\nfunction toCategorizedOption(props, option, selectValue, index) {\n  var isDisabled = _isOptionDisabled(props, option, selectValue);\n  var isSelected = _isOptionSelected(props, option, selectValue);\n  var label = getOptionLabel(props, option);\n  var value = getOptionValue(props, option);\n  return {\n    type: 'option',\n    data: option,\n    isDisabled: isDisabled,\n    isSelected: isSelected,\n    label: label,\n    value: value,\n    index: index\n  };\n}\nfunction buildCategorizedOptions(props, selectValue) {\n  return props.options.map(function (groupOrOption, groupOrOptionIndex) {\n    if ('options' in groupOrOption) {\n      var categorizedOptions = groupOrOption.options.map(function (option, optionIndex) {\n        return toCategorizedOption(props, option, selectValue, optionIndex);\n      }).filter(function (categorizedOption) {\n        return isFocusable(props, categorizedOption);\n      });\n      return categorizedOptions.length > 0 ? {\n        type: 'group',\n        data: groupOrOption,\n        options: categorizedOptions,\n        index: groupOrOptionIndex\n      } : undefined;\n    }\n    var categorizedOption = toCategorizedOption(props, groupOrOption, selectValue, groupOrOptionIndex);\n    return isFocusable(props, categorizedOption) ? categorizedOption : undefined;\n  }).filter(notNullish);\n}\nfunction buildFocusableOptionsFromCategorizedOptions(categorizedOptions) {\n  return categorizedOptions.reduce(function (optionsAccumulator, categorizedOption) {\n    if (categorizedOption.type === 'group') {\n      optionsAccumulator.push.apply(optionsAccumulator, _toConsumableArray(categorizedOption.options.map(function (option) {\n        return option.data;\n      })));\n    } else {\n      optionsAccumulator.push(categorizedOption.data);\n    }\n    return optionsAccumulator;\n  }, []);\n}\nfunction buildFocusableOptionsWithIds(categorizedOptions, optionId) {\n  return categorizedOptions.reduce(function (optionsAccumulator, categorizedOption) {\n    if (categorizedOption.type === 'group') {\n      optionsAccumulator.push.apply(optionsAccumulator, _toConsumableArray(categorizedOption.options.map(function (option) {\n        return {\n          data: option.data,\n          id: \"\".concat(optionId, \"-\").concat(categorizedOption.index, \"-\").concat(option.index)\n        };\n      })));\n    } else {\n      optionsAccumulator.push({\n        data: categorizedOption.data,\n        id: \"\".concat(optionId, \"-\").concat(categorizedOption.index)\n      });\n    }\n    return optionsAccumulator;\n  }, []);\n}\nfunction buildFocusableOptions(props, selectValue) {\n  return buildFocusableOptionsFromCategorizedOptions(buildCategorizedOptions(props, selectValue));\n}\nfunction isFocusable(props, categorizedOption) {\n  var _props$inputValue = props.inputValue,\n    inputValue = _props$inputValue === void 0 ? '' : _props$inputValue;\n  var data = categorizedOption.data,\n    isSelected = categorizedOption.isSelected,\n    label = categorizedOption.label,\n    value = categorizedOption.value;\n  return (!shouldHideSelectedOptions(props) || !isSelected) && _filterOption(props, {\n    label: label,\n    value: value,\n    data: data\n  }, inputValue);\n}\nfunction getNextFocusedValue(state, nextSelectValue) {\n  var focusedValue = state.focusedValue,\n    lastSelectValue = state.selectValue;\n  var lastFocusedIndex = lastSelectValue.indexOf(focusedValue);\n  if (lastFocusedIndex > -1) {\n    var nextFocusedIndex = nextSelectValue.indexOf(focusedValue);\n    if (nextFocusedIndex > -1) {\n      // the focused value is still in the selectValue, return it\n      return focusedValue;\n    } else if (lastFocusedIndex < nextSelectValue.length) {\n      // the focusedValue is not present in the next selectValue array by\n      // reference, so return the new value at the same index\n      return nextSelectValue[lastFocusedIndex];\n    }\n  }\n  return null;\n}\nfunction getNextFocusedOption(state, options) {\n  var lastFocusedOption = state.focusedOption;\n  return lastFocusedOption && options.indexOf(lastFocusedOption) > -1 ? lastFocusedOption : options[0];\n}\nvar getFocusedOptionId = function getFocusedOptionId(focusableOptionsWithIds, focusedOption) {\n  var _focusableOptionsWith;\n  var focusedOptionId = (_focusableOptionsWith = focusableOptionsWithIds.find(function (option) {\n    return option.data === focusedOption;\n  })) === null || _focusableOptionsWith === void 0 ? void 0 : _focusableOptionsWith.id;\n  return focusedOptionId || null;\n};\nvar getOptionLabel = function getOptionLabel(props, data) {\n  return props.getOptionLabel(data);\n};\nvar getOptionValue = function getOptionValue(props, data) {\n  return props.getOptionValue(data);\n};\nfunction _isOptionDisabled(props, option, selectValue) {\n  return typeof props.isOptionDisabled === 'function' ? props.isOptionDisabled(option, selectValue) : false;\n}\nfunction _isOptionSelected(props, option, selectValue) {\n  if (selectValue.indexOf(option) > -1) return true;\n  if (typeof props.isOptionSelected === 'function') {\n    return props.isOptionSelected(option, selectValue);\n  }\n  var candidate = getOptionValue(props, option);\n  return selectValue.some(function (i) {\n    return getOptionValue(props, i) === candidate;\n  });\n}\nfunction _filterOption(props, option, inputValue) {\n  return props.filterOption ? props.filterOption(option, inputValue) : true;\n}\nvar shouldHideSelectedOptions = function shouldHideSelectedOptions(props) {\n  var hideSelectedOptions = props.hideSelectedOptions,\n    isMulti = props.isMulti;\n  if (hideSelectedOptions === undefined) return isMulti;\n  return hideSelectedOptions;\n};\nvar instanceId = 1;\nvar Select = /*#__PURE__*/function (_Component) {\n  _inherits(Select, _Component);\n  var _super = _createSuper(Select);\n  // Misc. Instance Properties\n  // ------------------------------\n\n  // TODO\n\n  // Refs\n  // ------------------------------\n\n  // Lifecycle\n  // ------------------------------\n\n  function Select(_props) {\n    var _this;\n    _classCallCheck(this, Select);\n    _this = _super.call(this, _props);\n    _this.state = {\n      ariaSelection: null,\n      focusedOption: null,\n      focusedOptionId: null,\n      focusableOptionsWithIds: [],\n      focusedValue: null,\n      inputIsHidden: false,\n      isFocused: false,\n      selectValue: [],\n      clearFocusValueOnUpdate: false,\n      prevWasFocused: false,\n      inputIsHiddenAfterUpdate: undefined,\n      prevProps: undefined,\n      instancePrefix: ''\n    };\n    _this.blockOptionHover = false;\n    _this.isComposing = false;\n    _this.commonProps = void 0;\n    _this.initialTouchX = 0;\n    _this.initialTouchY = 0;\n    _this.openAfterFocus = false;\n    _this.scrollToFocusedOptionOnUpdate = false;\n    _this.userIsDragging = void 0;\n    _this.isAppleDevice = isAppleDevice();\n    _this.controlRef = null;\n    _this.getControlRef = function (ref) {\n      _this.controlRef = ref;\n    };\n    _this.focusedOptionRef = null;\n    _this.getFocusedOptionRef = function (ref) {\n      _this.focusedOptionRef = ref;\n    };\n    _this.menuListRef = null;\n    _this.getMenuListRef = function (ref) {\n      _this.menuListRef = ref;\n    };\n    _this.inputRef = null;\n    _this.getInputRef = function (ref) {\n      _this.inputRef = ref;\n    };\n    _this.focus = _this.focusInput;\n    _this.blur = _this.blurInput;\n    _this.onChange = function (newValue, actionMeta) {\n      var _this$props = _this.props,\n        onChange = _this$props.onChange,\n        name = _this$props.name;\n      actionMeta.name = name;\n      _this.ariaOnChange(newValue, actionMeta);\n      onChange(newValue, actionMeta);\n    };\n    _this.setValue = function (newValue, action, option) {\n      var _this$props2 = _this.props,\n        closeMenuOnSelect = _this$props2.closeMenuOnSelect,\n        isMulti = _this$props2.isMulti,\n        inputValue = _this$props2.inputValue;\n      _this.onInputChange('', {\n        action: 'set-value',\n        prevInputValue: inputValue\n      });\n      if (closeMenuOnSelect) {\n        _this.setState({\n          inputIsHiddenAfterUpdate: !isMulti\n        });\n        _this.onMenuClose();\n      }\n      // when the select value should change, we should reset focusedValue\n      _this.setState({\n        clearFocusValueOnUpdate: true\n      });\n      _this.onChange(newValue, {\n        action: action,\n        option: option\n      });\n    };\n    _this.selectOption = function (newValue) {\n      var _this$props3 = _this.props,\n        blurInputOnSelect = _this$props3.blurInputOnSelect,\n        isMulti = _this$props3.isMulti,\n        name = _this$props3.name;\n      var selectValue = _this.state.selectValue;\n      var deselected = isMulti && _this.isOptionSelected(newValue, selectValue);\n      var isDisabled = _this.isOptionDisabled(newValue, selectValue);\n      if (deselected) {\n        var candidate = _this.getOptionValue(newValue);\n        _this.setValue(multiValueAsValue(selectValue.filter(function (i) {\n          return _this.getOptionValue(i) !== candidate;\n        })), 'deselect-option', newValue);\n      } else if (!isDisabled) {\n        // Select option if option is not disabled\n        if (isMulti) {\n          _this.setValue(multiValueAsValue([].concat(_toConsumableArray(selectValue), [newValue])), 'select-option', newValue);\n        } else {\n          _this.setValue(singleValueAsValue(newValue), 'select-option');\n        }\n      } else {\n        _this.ariaOnChange(singleValueAsValue(newValue), {\n          action: 'select-option',\n          option: newValue,\n          name: name\n        });\n        return;\n      }\n      if (blurInputOnSelect) {\n        _this.blurInput();\n      }\n    };\n    _this.removeValue = function (removedValue) {\n      var isMulti = _this.props.isMulti;\n      var selectValue = _this.state.selectValue;\n      var candidate = _this.getOptionValue(removedValue);\n      var newValueArray = selectValue.filter(function (i) {\n        return _this.getOptionValue(i) !== candidate;\n      });\n      var newValue = valueTernary(isMulti, newValueArray, newValueArray[0] || null);\n      _this.onChange(newValue, {\n        action: 'remove-value',\n        removedValue: removedValue\n      });\n      _this.focusInput();\n    };\n    _this.clearValue = function () {\n      var selectValue = _this.state.selectValue;\n      _this.onChange(valueTernary(_this.props.isMulti, [], null), {\n        action: 'clear',\n        removedValues: selectValue\n      });\n    };\n    _this.popValue = function () {\n      var isMulti = _this.props.isMulti;\n      var selectValue = _this.state.selectValue;\n      var lastSelectedValue = selectValue[selectValue.length - 1];\n      var newValueArray = selectValue.slice(0, selectValue.length - 1);\n      var newValue = valueTernary(isMulti, newValueArray, newValueArray[0] || null);\n      if (lastSelectedValue) {\n        _this.onChange(newValue, {\n          action: 'pop-value',\n          removedValue: lastSelectedValue\n        });\n      }\n    };\n    _this.getFocusedOptionId = function (focusedOption) {\n      return getFocusedOptionId(_this.state.focusableOptionsWithIds, focusedOption);\n    };\n    _this.getFocusableOptionsWithIds = function () {\n      return buildFocusableOptionsWithIds(buildCategorizedOptions(_this.props, _this.state.selectValue), _this.getElementId('option'));\n    };\n    _this.getValue = function () {\n      return _this.state.selectValue;\n    };\n    _this.cx = function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      return classNames.apply(void 0, [_this.props.classNamePrefix].concat(args));\n    };\n    _this.getOptionLabel = function (data) {\n      return getOptionLabel(_this.props, data);\n    };\n    _this.getOptionValue = function (data) {\n      return getOptionValue(_this.props, data);\n    };\n    _this.getStyles = function (key, props) {\n      var unstyled = _this.props.unstyled;\n      var base = defaultStyles[key](props, unstyled);\n      base.boxSizing = 'border-box';\n      var custom = _this.props.styles[key];\n      return custom ? custom(base, props) : base;\n    };\n    _this.getClassNames = function (key, props) {\n      var _this$props$className, _this$props$className2;\n      return (_this$props$className = (_this$props$className2 = _this.props.classNames)[key]) === null || _this$props$className === void 0 ? void 0 : _this$props$className.call(_this$props$className2, props);\n    };\n    _this.getElementId = function (element) {\n      return \"\".concat(_this.state.instancePrefix, \"-\").concat(element);\n    };\n    _this.getComponents = function () {\n      return defaultComponents(_this.props);\n    };\n    _this.buildCategorizedOptions = function () {\n      return buildCategorizedOptions(_this.props, _this.state.selectValue);\n    };\n    _this.getCategorizedOptions = function () {\n      return _this.props.menuIsOpen ? _this.buildCategorizedOptions() : [];\n    };\n    _this.buildFocusableOptions = function () {\n      return buildFocusableOptionsFromCategorizedOptions(_this.buildCategorizedOptions());\n    };\n    _this.getFocusableOptions = function () {\n      return _this.props.menuIsOpen ? _this.buildFocusableOptions() : [];\n    };\n    _this.ariaOnChange = function (value, actionMeta) {\n      _this.setState({\n        ariaSelection: _objectSpread({\n          value: value\n        }, actionMeta)\n      });\n    };\n    _this.onMenuMouseDown = function (event) {\n      if (event.button !== 0) {\n        return;\n      }\n      event.stopPropagation();\n      event.preventDefault();\n      _this.focusInput();\n    };\n    _this.onMenuMouseMove = function (event) {\n      _this.blockOptionHover = false;\n    };\n    _this.onControlMouseDown = function (event) {\n      // Event captured by dropdown indicator\n      if (event.defaultPrevented) {\n        return;\n      }\n      var openMenuOnClick = _this.props.openMenuOnClick;\n      if (!_this.state.isFocused) {\n        if (openMenuOnClick) {\n          _this.openAfterFocus = true;\n        }\n        _this.focusInput();\n      } else if (!_this.props.menuIsOpen) {\n        if (openMenuOnClick) {\n          _this.openMenu('first');\n        }\n      } else {\n        if (event.target.tagName !== 'INPUT' && event.target.tagName !== 'TEXTAREA') {\n          _this.onMenuClose();\n        }\n      }\n      if (event.target.tagName !== 'INPUT' && event.target.tagName !== 'TEXTAREA') {\n        event.preventDefault();\n      }\n    };\n    _this.onDropdownIndicatorMouseDown = function (event) {\n      // ignore mouse events that weren't triggered by the primary button\n      if (event && event.type === 'mousedown' && event.button !== 0) {\n        return;\n      }\n      if (_this.props.isDisabled) return;\n      var _this$props4 = _this.props,\n        isMulti = _this$props4.isMulti,\n        menuIsOpen = _this$props4.menuIsOpen;\n      _this.focusInput();\n      if (menuIsOpen) {\n        _this.setState({\n          inputIsHiddenAfterUpdate: !isMulti\n        });\n        _this.onMenuClose();\n      } else {\n        _this.openMenu('first');\n      }\n      event.preventDefault();\n    };\n    _this.onClearIndicatorMouseDown = function (event) {\n      // ignore mouse events that weren't triggered by the primary button\n      if (event && event.type === 'mousedown' && event.button !== 0) {\n        return;\n      }\n      _this.clearValue();\n      event.preventDefault();\n      _this.openAfterFocus = false;\n      if (event.type === 'touchend') {\n        _this.focusInput();\n      } else {\n        setTimeout(function () {\n          return _this.focusInput();\n        });\n      }\n    };\n    _this.onScroll = function (event) {\n      if (typeof _this.props.closeMenuOnScroll === 'boolean') {\n        if (event.target instanceof HTMLElement && isDocumentElement(event.target)) {\n          _this.props.onMenuClose();\n        }\n      } else if (typeof _this.props.closeMenuOnScroll === 'function') {\n        if (_this.props.closeMenuOnScroll(event)) {\n          _this.props.onMenuClose();\n        }\n      }\n    };\n    _this.onCompositionStart = function () {\n      _this.isComposing = true;\n    };\n    _this.onCompositionEnd = function () {\n      _this.isComposing = false;\n    };\n    _this.onTouchStart = function (_ref2) {\n      var touches = _ref2.touches;\n      var touch = touches && touches.item(0);\n      if (!touch) {\n        return;\n      }\n      _this.initialTouchX = touch.clientX;\n      _this.initialTouchY = touch.clientY;\n      _this.userIsDragging = false;\n    };\n    _this.onTouchMove = function (_ref3) {\n      var touches = _ref3.touches;\n      var touch = touches && touches.item(0);\n      if (!touch) {\n        return;\n      }\n      var deltaX = Math.abs(touch.clientX - _this.initialTouchX);\n      var deltaY = Math.abs(touch.clientY - _this.initialTouchY);\n      var moveThreshold = 5;\n      _this.userIsDragging = deltaX > moveThreshold || deltaY > moveThreshold;\n    };\n    _this.onTouchEnd = function (event) {\n      if (_this.userIsDragging) return;\n\n      // close the menu if the user taps outside\n      // we're checking on event.target here instead of event.currentTarget, because we want to assert information\n      // on events on child elements, not the document (which we've attached this handler to).\n      if (_this.controlRef && !_this.controlRef.contains(event.target) && _this.menuListRef && !_this.menuListRef.contains(event.target)) {\n        _this.blurInput();\n      }\n\n      // reset move vars\n      _this.initialTouchX = 0;\n      _this.initialTouchY = 0;\n    };\n    _this.onControlTouchEnd = function (event) {\n      if (_this.userIsDragging) return;\n      _this.onControlMouseDown(event);\n    };\n    _this.onClearIndicatorTouchEnd = function (event) {\n      if (_this.userIsDragging) return;\n      _this.onClearIndicatorMouseDown(event);\n    };\n    _this.onDropdownIndicatorTouchEnd = function (event) {\n      if (_this.userIsDragging) return;\n      _this.onDropdownIndicatorMouseDown(event);\n    };\n    _this.handleInputChange = function (event) {\n      var prevInputValue = _this.props.inputValue;\n      var inputValue = event.currentTarget.value;\n      _this.setState({\n        inputIsHiddenAfterUpdate: false\n      });\n      _this.onInputChange(inputValue, {\n        action: 'input-change',\n        prevInputValue: prevInputValue\n      });\n      if (!_this.props.menuIsOpen) {\n        _this.onMenuOpen();\n      }\n    };\n    _this.onInputFocus = function (event) {\n      if (_this.props.onFocus) {\n        _this.props.onFocus(event);\n      }\n      _this.setState({\n        inputIsHiddenAfterUpdate: false,\n        isFocused: true\n      });\n      if (_this.openAfterFocus || _this.props.openMenuOnFocus) {\n        _this.openMenu('first');\n      }\n      _this.openAfterFocus = false;\n    };\n    _this.onInputBlur = function (event) {\n      var prevInputValue = _this.props.inputValue;\n      if (_this.menuListRef && _this.menuListRef.contains(document.activeElement)) {\n        _this.inputRef.focus();\n        return;\n      }\n      if (_this.props.onBlur) {\n        _this.props.onBlur(event);\n      }\n      _this.onInputChange('', {\n        action: 'input-blur',\n        prevInputValue: prevInputValue\n      });\n      _this.onMenuClose();\n      _this.setState({\n        focusedValue: null,\n        isFocused: false\n      });\n    };\n    _this.onOptionHover = function (focusedOption) {\n      if (_this.blockOptionHover || _this.state.focusedOption === focusedOption) {\n        return;\n      }\n      var options = _this.getFocusableOptions();\n      var focusedOptionIndex = options.indexOf(focusedOption);\n      _this.setState({\n        focusedOption: focusedOption,\n        focusedOptionId: focusedOptionIndex > -1 ? _this.getFocusedOptionId(focusedOption) : null\n      });\n    };\n    _this.shouldHideSelectedOptions = function () {\n      return shouldHideSelectedOptions(_this.props);\n    };\n    _this.onValueInputFocus = function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n      _this.focus();\n    };\n    _this.onKeyDown = function (event) {\n      var _this$props5 = _this.props,\n        isMulti = _this$props5.isMulti,\n        backspaceRemovesValue = _this$props5.backspaceRemovesValue,\n        escapeClearsValue = _this$props5.escapeClearsValue,\n        inputValue = _this$props5.inputValue,\n        isClearable = _this$props5.isClearable,\n        isDisabled = _this$props5.isDisabled,\n        menuIsOpen = _this$props5.menuIsOpen,\n        onKeyDown = _this$props5.onKeyDown,\n        tabSelectsValue = _this$props5.tabSelectsValue,\n        openMenuOnFocus = _this$props5.openMenuOnFocus;\n      var _this$state = _this.state,\n        focusedOption = _this$state.focusedOption,\n        focusedValue = _this$state.focusedValue,\n        selectValue = _this$state.selectValue;\n      if (isDisabled) return;\n      if (typeof onKeyDown === 'function') {\n        onKeyDown(event);\n        if (event.defaultPrevented) {\n          return;\n        }\n      }\n\n      // Block option hover events when the user has just pressed a key\n      _this.blockOptionHover = true;\n      switch (event.key) {\n        case 'ArrowLeft':\n          if (!isMulti || inputValue) return;\n          _this.focusValue('previous');\n          break;\n        case 'ArrowRight':\n          if (!isMulti || inputValue) return;\n          _this.focusValue('next');\n          break;\n        case 'Delete':\n        case 'Backspace':\n          if (inputValue) return;\n          if (focusedValue) {\n            _this.removeValue(focusedValue);\n          } else {\n            if (!backspaceRemovesValue) return;\n            if (isMulti) {\n              _this.popValue();\n            } else if (isClearable) {\n              _this.clearValue();\n            }\n          }\n          break;\n        case 'Tab':\n          if (_this.isComposing) return;\n          if (event.shiftKey || !menuIsOpen || !tabSelectsValue || !focusedOption ||\n          // don't capture the event if the menu opens on focus and the focused\n          // option is already selected; it breaks the flow of navigation\n          openMenuOnFocus && _this.isOptionSelected(focusedOption, selectValue)) {\n            return;\n          }\n          _this.selectOption(focusedOption);\n          break;\n        case 'Enter':\n          if (event.keyCode === 229) {\n            // ignore the keydown event from an Input Method Editor(IME)\n            // ref. https://www.w3.org/TR/uievents/#determine-keydown-keyup-keyCode\n            break;\n          }\n          if (menuIsOpen) {\n            if (!focusedOption) return;\n            if (_this.isComposing) return;\n            _this.selectOption(focusedOption);\n            break;\n          }\n          return;\n        case 'Escape':\n          if (menuIsOpen) {\n            _this.setState({\n              inputIsHiddenAfterUpdate: false\n            });\n            _this.onInputChange('', {\n              action: 'menu-close',\n              prevInputValue: inputValue\n            });\n            _this.onMenuClose();\n          } else if (isClearable && escapeClearsValue) {\n            _this.clearValue();\n          }\n          break;\n        case ' ':\n          // space\n          if (inputValue) {\n            return;\n          }\n          if (!menuIsOpen) {\n            _this.openMenu('first');\n            break;\n          }\n          if (!focusedOption) return;\n          _this.selectOption(focusedOption);\n          break;\n        case 'ArrowUp':\n          if (menuIsOpen) {\n            _this.focusOption('up');\n          } else {\n            _this.openMenu('last');\n          }\n          break;\n        case 'ArrowDown':\n          if (menuIsOpen) {\n            _this.focusOption('down');\n          } else {\n            _this.openMenu('first');\n          }\n          break;\n        case 'PageUp':\n          if (!menuIsOpen) return;\n          _this.focusOption('pageup');\n          break;\n        case 'PageDown':\n          if (!menuIsOpen) return;\n          _this.focusOption('pagedown');\n          break;\n        case 'Home':\n          if (!menuIsOpen) return;\n          _this.focusOption('first');\n          break;\n        case 'End':\n          if (!menuIsOpen) return;\n          _this.focusOption('last');\n          break;\n        default:\n          return;\n      }\n      event.preventDefault();\n    };\n    _this.state.instancePrefix = 'react-select-' + (_this.props.instanceId || ++instanceId);\n    _this.state.selectValue = cleanValue(_props.value);\n    // Set focusedOption if menuIsOpen is set on init (e.g. defaultMenuIsOpen)\n    if (_props.menuIsOpen && _this.state.selectValue.length) {\n      var focusableOptionsWithIds = _this.getFocusableOptionsWithIds();\n      var focusableOptions = _this.buildFocusableOptions();\n      var optionIndex = focusableOptions.indexOf(_this.state.selectValue[0]);\n      _this.state.focusableOptionsWithIds = focusableOptionsWithIds;\n      _this.state.focusedOption = focusableOptions[optionIndex];\n      _this.state.focusedOptionId = getFocusedOptionId(focusableOptionsWithIds, focusableOptions[optionIndex]);\n    }\n    return _this;\n  }\n  _createClass(Select, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.startListeningComposition();\n      this.startListeningToTouch();\n      if (this.props.closeMenuOnScroll && document && document.addEventListener) {\n        // Listen to all scroll events, and filter them out inside of 'onScroll'\n        document.addEventListener('scroll', this.onScroll, true);\n      }\n      if (this.props.autoFocus) {\n        this.focusInput();\n      }\n\n      // Scroll focusedOption into view if menuIsOpen is set on mount (e.g. defaultMenuIsOpen)\n      if (this.props.menuIsOpen && this.state.focusedOption && this.menuListRef && this.focusedOptionRef) {\n        scrollIntoView(this.menuListRef, this.focusedOptionRef);\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props6 = this.props,\n        isDisabled = _this$props6.isDisabled,\n        menuIsOpen = _this$props6.menuIsOpen;\n      var isFocused = this.state.isFocused;\n      if (\n      // ensure focus is restored correctly when the control becomes enabled\n      isFocused && !isDisabled && prevProps.isDisabled ||\n      // ensure focus is on the Input when the menu opens\n      isFocused && menuIsOpen && !prevProps.menuIsOpen) {\n        this.focusInput();\n      }\n      if (isFocused && isDisabled && !prevProps.isDisabled) {\n        // ensure select state gets blurred in case Select is programmatically disabled while focused\n        // eslint-disable-next-line react/no-did-update-set-state\n        this.setState({\n          isFocused: false\n        }, this.onMenuClose);\n      } else if (!isFocused && !isDisabled && prevProps.isDisabled && this.inputRef === document.activeElement) {\n        // ensure select state gets focused in case Select is programatically re-enabled while focused (Firefox)\n        // eslint-disable-next-line react/no-did-update-set-state\n        this.setState({\n          isFocused: true\n        });\n      }\n\n      // scroll the focused option into view if necessary\n      if (this.menuListRef && this.focusedOptionRef && this.scrollToFocusedOptionOnUpdate) {\n        scrollIntoView(this.menuListRef, this.focusedOptionRef);\n        this.scrollToFocusedOptionOnUpdate = false;\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.stopListeningComposition();\n      this.stopListeningToTouch();\n      document.removeEventListener('scroll', this.onScroll, true);\n    }\n\n    // ==============================\n    // Consumer Handlers\n    // ==============================\n  }, {\n    key: \"onMenuOpen\",\n    value: function onMenuOpen() {\n      this.props.onMenuOpen();\n    }\n  }, {\n    key: \"onMenuClose\",\n    value: function onMenuClose() {\n      this.onInputChange('', {\n        action: 'menu-close',\n        prevInputValue: this.props.inputValue\n      });\n      this.props.onMenuClose();\n    }\n  }, {\n    key: \"onInputChange\",\n    value: function onInputChange(newValue, actionMeta) {\n      this.props.onInputChange(newValue, actionMeta);\n    }\n\n    // ==============================\n    // Methods\n    // ==============================\n  }, {\n    key: \"focusInput\",\n    value: function focusInput() {\n      if (!this.inputRef) return;\n      this.inputRef.focus();\n    }\n  }, {\n    key: \"blurInput\",\n    value: function blurInput() {\n      if (!this.inputRef) return;\n      this.inputRef.blur();\n    }\n\n    // aliased for consumers\n  }, {\n    key: \"openMenu\",\n    value: function openMenu(focusOption) {\n      var _this2 = this;\n      var _this$state2 = this.state,\n        selectValue = _this$state2.selectValue,\n        isFocused = _this$state2.isFocused;\n      var focusableOptions = this.buildFocusableOptions();\n      var openAtIndex = focusOption === 'first' ? 0 : focusableOptions.length - 1;\n      if (!this.props.isMulti) {\n        var selectedIndex = focusableOptions.indexOf(selectValue[0]);\n        if (selectedIndex > -1) {\n          openAtIndex = selectedIndex;\n        }\n      }\n\n      // only scroll if the menu isn't already open\n      this.scrollToFocusedOptionOnUpdate = !(isFocused && this.menuListRef);\n      this.setState({\n        inputIsHiddenAfterUpdate: false,\n        focusedValue: null,\n        focusedOption: focusableOptions[openAtIndex],\n        focusedOptionId: this.getFocusedOptionId(focusableOptions[openAtIndex])\n      }, function () {\n        return _this2.onMenuOpen();\n      });\n    }\n  }, {\n    key: \"focusValue\",\n    value: function focusValue(direction) {\n      var _this$state3 = this.state,\n        selectValue = _this$state3.selectValue,\n        focusedValue = _this$state3.focusedValue;\n\n      // Only multiselects support value focusing\n      if (!this.props.isMulti) return;\n      this.setState({\n        focusedOption: null\n      });\n      var focusedIndex = selectValue.indexOf(focusedValue);\n      if (!focusedValue) {\n        focusedIndex = -1;\n      }\n      var lastIndex = selectValue.length - 1;\n      var nextFocus = -1;\n      if (!selectValue.length) return;\n      switch (direction) {\n        case 'previous':\n          if (focusedIndex === 0) {\n            // don't cycle from the start to the end\n            nextFocus = 0;\n          } else if (focusedIndex === -1) {\n            // if nothing is focused, focus the last value first\n            nextFocus = lastIndex;\n          } else {\n            nextFocus = focusedIndex - 1;\n          }\n          break;\n        case 'next':\n          if (focusedIndex > -1 && focusedIndex < lastIndex) {\n            nextFocus = focusedIndex + 1;\n          }\n          break;\n      }\n      this.setState({\n        inputIsHidden: nextFocus !== -1,\n        focusedValue: selectValue[nextFocus]\n      });\n    }\n  }, {\n    key: \"focusOption\",\n    value: function focusOption() {\n      var direction = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'first';\n      var pageSize = this.props.pageSize;\n      var focusedOption = this.state.focusedOption;\n      var options = this.getFocusableOptions();\n      if (!options.length) return;\n      var nextFocus = 0; // handles 'first'\n      var focusedIndex = options.indexOf(focusedOption);\n      if (!focusedOption) {\n        focusedIndex = -1;\n      }\n      if (direction === 'up') {\n        nextFocus = focusedIndex > 0 ? focusedIndex - 1 : options.length - 1;\n      } else if (direction === 'down') {\n        nextFocus = (focusedIndex + 1) % options.length;\n      } else if (direction === 'pageup') {\n        nextFocus = focusedIndex - pageSize;\n        if (nextFocus < 0) nextFocus = 0;\n      } else if (direction === 'pagedown') {\n        nextFocus = focusedIndex + pageSize;\n        if (nextFocus > options.length - 1) nextFocus = options.length - 1;\n      } else if (direction === 'last') {\n        nextFocus = options.length - 1;\n      }\n      this.scrollToFocusedOptionOnUpdate = true;\n      this.setState({\n        focusedOption: options[nextFocus],\n        focusedValue: null,\n        focusedOptionId: this.getFocusedOptionId(options[nextFocus])\n      });\n    }\n  }, {\n    key: \"getTheme\",\n    value:\n    // ==============================\n    // Getters\n    // ==============================\n\n    function getTheme() {\n      // Use the default theme if there are no customisations.\n      if (!this.props.theme) {\n        return defaultTheme;\n      }\n      // If the theme prop is a function, assume the function\n      // knows how to merge the passed-in default theme with\n      // its own modifications.\n      if (typeof this.props.theme === 'function') {\n        return this.props.theme(defaultTheme);\n      }\n      // Otherwise, if a plain theme object was passed in,\n      // overlay it with the default theme.\n      return _objectSpread(_objectSpread({}, defaultTheme), this.props.theme);\n    }\n  }, {\n    key: \"getCommonProps\",\n    value: function getCommonProps() {\n      var clearValue = this.clearValue,\n        cx = this.cx,\n        getStyles = this.getStyles,\n        getClassNames = this.getClassNames,\n        getValue = this.getValue,\n        selectOption = this.selectOption,\n        setValue = this.setValue,\n        props = this.props;\n      var isMulti = props.isMulti,\n        isRtl = props.isRtl,\n        options = props.options;\n      var hasValue = this.hasValue();\n      return {\n        clearValue: clearValue,\n        cx: cx,\n        getStyles: getStyles,\n        getClassNames: getClassNames,\n        getValue: getValue,\n        hasValue: hasValue,\n        isMulti: isMulti,\n        isRtl: isRtl,\n        options: options,\n        selectOption: selectOption,\n        selectProps: props,\n        setValue: setValue,\n        theme: this.getTheme()\n      };\n    }\n  }, {\n    key: \"hasValue\",\n    value: function hasValue() {\n      var selectValue = this.state.selectValue;\n      return selectValue.length > 0;\n    }\n  }, {\n    key: \"hasOptions\",\n    value: function hasOptions() {\n      return !!this.getFocusableOptions().length;\n    }\n  }, {\n    key: \"isClearable\",\n    value: function isClearable() {\n      var _this$props7 = this.props,\n        isClearable = _this$props7.isClearable,\n        isMulti = _this$props7.isMulti;\n\n      // single select, by default, IS NOT clearable\n      // multi select, by default, IS clearable\n      if (isClearable === undefined) return isMulti;\n      return isClearable;\n    }\n  }, {\n    key: \"isOptionDisabled\",\n    value: function isOptionDisabled(option, selectValue) {\n      return _isOptionDisabled(this.props, option, selectValue);\n    }\n  }, {\n    key: \"isOptionSelected\",\n    value: function isOptionSelected(option, selectValue) {\n      return _isOptionSelected(this.props, option, selectValue);\n    }\n  }, {\n    key: \"filterOption\",\n    value: function filterOption(option, inputValue) {\n      return _filterOption(this.props, option, inputValue);\n    }\n  }, {\n    key: \"formatOptionLabel\",\n    value: function formatOptionLabel(data, context) {\n      if (typeof this.props.formatOptionLabel === 'function') {\n        var _inputValue = this.props.inputValue;\n        var _selectValue = this.state.selectValue;\n        return this.props.formatOptionLabel(data, {\n          context: context,\n          inputValue: _inputValue,\n          selectValue: _selectValue\n        });\n      } else {\n        return this.getOptionLabel(data);\n      }\n    }\n  }, {\n    key: \"formatGroupLabel\",\n    value: function formatGroupLabel(data) {\n      return this.props.formatGroupLabel(data);\n    }\n\n    // ==============================\n    // Mouse Handlers\n    // ==============================\n  }, {\n    key: \"startListeningComposition\",\n    value:\n    // ==============================\n    // Composition Handlers\n    // ==============================\n\n    function startListeningComposition() {\n      if (document && document.addEventListener) {\n        document.addEventListener('compositionstart', this.onCompositionStart, false);\n        document.addEventListener('compositionend', this.onCompositionEnd, false);\n      }\n    }\n  }, {\n    key: \"stopListeningComposition\",\n    value: function stopListeningComposition() {\n      if (document && document.removeEventListener) {\n        document.removeEventListener('compositionstart', this.onCompositionStart);\n        document.removeEventListener('compositionend', this.onCompositionEnd);\n      }\n    }\n  }, {\n    key: \"startListeningToTouch\",\n    value:\n    // ==============================\n    // Touch Handlers\n    // ==============================\n\n    function startListeningToTouch() {\n      if (document && document.addEventListener) {\n        document.addEventListener('touchstart', this.onTouchStart, false);\n        document.addEventListener('touchmove', this.onTouchMove, false);\n        document.addEventListener('touchend', this.onTouchEnd, false);\n      }\n    }\n  }, {\n    key: \"stopListeningToTouch\",\n    value: function stopListeningToTouch() {\n      if (document && document.removeEventListener) {\n        document.removeEventListener('touchstart', this.onTouchStart);\n        document.removeEventListener('touchmove', this.onTouchMove);\n        document.removeEventListener('touchend', this.onTouchEnd);\n      }\n    }\n  }, {\n    key: \"renderInput\",\n    value:\n    // ==============================\n    // Renderers\n    // ==============================\n    function renderInput() {\n      var _this$props8 = this.props,\n        isDisabled = _this$props8.isDisabled,\n        isSearchable = _this$props8.isSearchable,\n        inputId = _this$props8.inputId,\n        inputValue = _this$props8.inputValue,\n        tabIndex = _this$props8.tabIndex,\n        form = _this$props8.form,\n        menuIsOpen = _this$props8.menuIsOpen,\n        required = _this$props8.required;\n      var _this$getComponents = this.getComponents(),\n        Input = _this$getComponents.Input;\n      var _this$state4 = this.state,\n        inputIsHidden = _this$state4.inputIsHidden,\n        ariaSelection = _this$state4.ariaSelection;\n      var commonProps = this.commonProps;\n      var id = inputId || this.getElementId('input');\n\n      // aria attributes makes the JSX \"noisy\", separated for clarity\n      var ariaAttributes = _objectSpread(_objectSpread(_objectSpread({\n        'aria-autocomplete': 'list',\n        'aria-expanded': menuIsOpen,\n        'aria-haspopup': true,\n        'aria-errormessage': this.props['aria-errormessage'],\n        'aria-invalid': this.props['aria-invalid'],\n        'aria-label': this.props['aria-label'],\n        'aria-labelledby': this.props['aria-labelledby'],\n        'aria-required': required,\n        role: 'combobox',\n        'aria-activedescendant': this.isAppleDevice ? undefined : this.state.focusedOptionId || ''\n      }, menuIsOpen && {\n        'aria-controls': this.getElementId('listbox')\n      }), !isSearchable && {\n        'aria-readonly': true\n      }), this.hasValue() ? (ariaSelection === null || ariaSelection === void 0 ? void 0 : ariaSelection.action) === 'initial-input-focus' && {\n        'aria-describedby': this.getElementId('live-region')\n      } : {\n        'aria-describedby': this.getElementId('placeholder')\n      });\n      if (!isSearchable) {\n        // use a dummy input to maintain focus/blur functionality\n        return /*#__PURE__*/React.createElement(DummyInput, _extends({\n          id: id,\n          innerRef: this.getInputRef,\n          onBlur: this.onInputBlur,\n          onChange: noop,\n          onFocus: this.onInputFocus,\n          disabled: isDisabled,\n          tabIndex: tabIndex,\n          inputMode: \"none\",\n          form: form,\n          value: \"\"\n        }, ariaAttributes));\n      }\n      return /*#__PURE__*/React.createElement(Input, _extends({}, commonProps, {\n        autoCapitalize: \"none\",\n        autoComplete: \"off\",\n        autoCorrect: \"off\",\n        id: id,\n        innerRef: this.getInputRef,\n        isDisabled: isDisabled,\n        isHidden: inputIsHidden,\n        onBlur: this.onInputBlur,\n        onChange: this.handleInputChange,\n        onFocus: this.onInputFocus,\n        spellCheck: \"false\",\n        tabIndex: tabIndex,\n        form: form,\n        type: \"text\",\n        value: inputValue\n      }, ariaAttributes));\n    }\n  }, {\n    key: \"renderPlaceholderOrValue\",\n    value: function renderPlaceholderOrValue() {\n      var _this3 = this;\n      var _this$getComponents2 = this.getComponents(),\n        MultiValue = _this$getComponents2.MultiValue,\n        MultiValueContainer = _this$getComponents2.MultiValueContainer,\n        MultiValueLabel = _this$getComponents2.MultiValueLabel,\n        MultiValueRemove = _this$getComponents2.MultiValueRemove,\n        SingleValue = _this$getComponents2.SingleValue,\n        Placeholder = _this$getComponents2.Placeholder;\n      var commonProps = this.commonProps;\n      var _this$props9 = this.props,\n        controlShouldRenderValue = _this$props9.controlShouldRenderValue,\n        isDisabled = _this$props9.isDisabled,\n        isMulti = _this$props9.isMulti,\n        inputValue = _this$props9.inputValue,\n        placeholder = _this$props9.placeholder;\n      var _this$state5 = this.state,\n        selectValue = _this$state5.selectValue,\n        focusedValue = _this$state5.focusedValue,\n        isFocused = _this$state5.isFocused;\n      if (!this.hasValue() || !controlShouldRenderValue) {\n        return inputValue ? null : /*#__PURE__*/React.createElement(Placeholder, _extends({}, commonProps, {\n          key: \"placeholder\",\n          isDisabled: isDisabled,\n          isFocused: isFocused,\n          innerProps: {\n            id: this.getElementId('placeholder')\n          }\n        }), placeholder);\n      }\n      if (isMulti) {\n        return selectValue.map(function (opt, index) {\n          var isOptionFocused = opt === focusedValue;\n          var key = \"\".concat(_this3.getOptionLabel(opt), \"-\").concat(_this3.getOptionValue(opt));\n          return /*#__PURE__*/React.createElement(MultiValue, _extends({}, commonProps, {\n            components: {\n              Container: MultiValueContainer,\n              Label: MultiValueLabel,\n              Remove: MultiValueRemove\n            },\n            isFocused: isOptionFocused,\n            isDisabled: isDisabled,\n            key: key,\n            index: index,\n            removeProps: {\n              onClick: function onClick() {\n                return _this3.removeValue(opt);\n              },\n              onTouchEnd: function onTouchEnd() {\n                return _this3.removeValue(opt);\n              },\n              onMouseDown: function onMouseDown(e) {\n                e.preventDefault();\n              }\n            },\n            data: opt\n          }), _this3.formatOptionLabel(opt, 'value'));\n        });\n      }\n      if (inputValue) {\n        return null;\n      }\n      var singleValue = selectValue[0];\n      return /*#__PURE__*/React.createElement(SingleValue, _extends({}, commonProps, {\n        data: singleValue,\n        isDisabled: isDisabled\n      }), this.formatOptionLabel(singleValue, 'value'));\n    }\n  }, {\n    key: \"renderClearIndicator\",\n    value: function renderClearIndicator() {\n      var _this$getComponents3 = this.getComponents(),\n        ClearIndicator = _this$getComponents3.ClearIndicator;\n      var commonProps = this.commonProps;\n      var _this$props10 = this.props,\n        isDisabled = _this$props10.isDisabled,\n        isLoading = _this$props10.isLoading;\n      var isFocused = this.state.isFocused;\n      if (!this.isClearable() || !ClearIndicator || isDisabled || !this.hasValue() || isLoading) {\n        return null;\n      }\n      var innerProps = {\n        onMouseDown: this.onClearIndicatorMouseDown,\n        onTouchEnd: this.onClearIndicatorTouchEnd,\n        'aria-hidden': 'true'\n      };\n      return /*#__PURE__*/React.createElement(ClearIndicator, _extends({}, commonProps, {\n        innerProps: innerProps,\n        isFocused: isFocused\n      }));\n    }\n  }, {\n    key: \"renderLoadingIndicator\",\n    value: function renderLoadingIndicator() {\n      var _this$getComponents4 = this.getComponents(),\n        LoadingIndicator = _this$getComponents4.LoadingIndicator;\n      var commonProps = this.commonProps;\n      var _this$props11 = this.props,\n        isDisabled = _this$props11.isDisabled,\n        isLoading = _this$props11.isLoading;\n      var isFocused = this.state.isFocused;\n      if (!LoadingIndicator || !isLoading) return null;\n      var innerProps = {\n        'aria-hidden': 'true'\n      };\n      return /*#__PURE__*/React.createElement(LoadingIndicator, _extends({}, commonProps, {\n        innerProps: innerProps,\n        isDisabled: isDisabled,\n        isFocused: isFocused\n      }));\n    }\n  }, {\n    key: \"renderIndicatorSeparator\",\n    value: function renderIndicatorSeparator() {\n      var _this$getComponents5 = this.getComponents(),\n        DropdownIndicator = _this$getComponents5.DropdownIndicator,\n        IndicatorSeparator = _this$getComponents5.IndicatorSeparator;\n\n      // separator doesn't make sense without the dropdown indicator\n      if (!DropdownIndicator || !IndicatorSeparator) return null;\n      var commonProps = this.commonProps;\n      var isDisabled = this.props.isDisabled;\n      var isFocused = this.state.isFocused;\n      return /*#__PURE__*/React.createElement(IndicatorSeparator, _extends({}, commonProps, {\n        isDisabled: isDisabled,\n        isFocused: isFocused\n      }));\n    }\n  }, {\n    key: \"renderDropdownIndicator\",\n    value: function renderDropdownIndicator() {\n      var _this$getComponents6 = this.getComponents(),\n        DropdownIndicator = _this$getComponents6.DropdownIndicator;\n      if (!DropdownIndicator) return null;\n      var commonProps = this.commonProps;\n      var isDisabled = this.props.isDisabled;\n      var isFocused = this.state.isFocused;\n      var innerProps = {\n        onMouseDown: this.onDropdownIndicatorMouseDown,\n        onTouchEnd: this.onDropdownIndicatorTouchEnd,\n        'aria-hidden': 'true'\n      };\n      return /*#__PURE__*/React.createElement(DropdownIndicator, _extends({}, commonProps, {\n        innerProps: innerProps,\n        isDisabled: isDisabled,\n        isFocused: isFocused\n      }));\n    }\n  }, {\n    key: \"renderMenu\",\n    value: function renderMenu() {\n      var _this4 = this;\n      var _this$getComponents7 = this.getComponents(),\n        Group = _this$getComponents7.Group,\n        GroupHeading = _this$getComponents7.GroupHeading,\n        Menu = _this$getComponents7.Menu,\n        MenuList = _this$getComponents7.MenuList,\n        MenuPortal = _this$getComponents7.MenuPortal,\n        LoadingMessage = _this$getComponents7.LoadingMessage,\n        NoOptionsMessage = _this$getComponents7.NoOptionsMessage,\n        Option = _this$getComponents7.Option;\n      var commonProps = this.commonProps;\n      var focusedOption = this.state.focusedOption;\n      var _this$props12 = this.props,\n        captureMenuScroll = _this$props12.captureMenuScroll,\n        inputValue = _this$props12.inputValue,\n        isLoading = _this$props12.isLoading,\n        loadingMessage = _this$props12.loadingMessage,\n        minMenuHeight = _this$props12.minMenuHeight,\n        maxMenuHeight = _this$props12.maxMenuHeight,\n        menuIsOpen = _this$props12.menuIsOpen,\n        menuPlacement = _this$props12.menuPlacement,\n        menuPosition = _this$props12.menuPosition,\n        menuPortalTarget = _this$props12.menuPortalTarget,\n        menuShouldBlockScroll = _this$props12.menuShouldBlockScroll,\n        menuShouldScrollIntoView = _this$props12.menuShouldScrollIntoView,\n        noOptionsMessage = _this$props12.noOptionsMessage,\n        onMenuScrollToTop = _this$props12.onMenuScrollToTop,\n        onMenuScrollToBottom = _this$props12.onMenuScrollToBottom;\n      if (!menuIsOpen) return null;\n\n      // TODO: Internal Option Type here\n      var render = function render(props, id) {\n        var type = props.type,\n          data = props.data,\n          isDisabled = props.isDisabled,\n          isSelected = props.isSelected,\n          label = props.label,\n          value = props.value;\n        var isFocused = focusedOption === data;\n        var onHover = isDisabled ? undefined : function () {\n          return _this4.onOptionHover(data);\n        };\n        var onSelect = isDisabled ? undefined : function () {\n          return _this4.selectOption(data);\n        };\n        var optionId = \"\".concat(_this4.getElementId('option'), \"-\").concat(id);\n        var innerProps = {\n          id: optionId,\n          onClick: onSelect,\n          onMouseMove: onHover,\n          onMouseOver: onHover,\n          tabIndex: -1,\n          role: 'option',\n          'aria-selected': _this4.isAppleDevice ? undefined : isSelected // is not supported on Apple devices\n        };\n\n        return /*#__PURE__*/React.createElement(Option, _extends({}, commonProps, {\n          innerProps: innerProps,\n          data: data,\n          isDisabled: isDisabled,\n          isSelected: isSelected,\n          key: optionId,\n          label: label,\n          type: type,\n          value: value,\n          isFocused: isFocused,\n          innerRef: isFocused ? _this4.getFocusedOptionRef : undefined\n        }), _this4.formatOptionLabel(props.data, 'menu'));\n      };\n      var menuUI;\n      if (this.hasOptions()) {\n        menuUI = this.getCategorizedOptions().map(function (item) {\n          if (item.type === 'group') {\n            var _data = item.data,\n              options = item.options,\n              groupIndex = item.index;\n            var groupId = \"\".concat(_this4.getElementId('group'), \"-\").concat(groupIndex);\n            var headingId = \"\".concat(groupId, \"-heading\");\n            return /*#__PURE__*/React.createElement(Group, _extends({}, commonProps, {\n              key: groupId,\n              data: _data,\n              options: options,\n              Heading: GroupHeading,\n              headingProps: {\n                id: headingId,\n                data: item.data\n              },\n              label: _this4.formatGroupLabel(item.data)\n            }), item.options.map(function (option) {\n              return render(option, \"\".concat(groupIndex, \"-\").concat(option.index));\n            }));\n          } else if (item.type === 'option') {\n            return render(item, \"\".concat(item.index));\n          }\n        });\n      } else if (isLoading) {\n        var message = loadingMessage({\n          inputValue: inputValue\n        });\n        if (message === null) return null;\n        menuUI = /*#__PURE__*/React.createElement(LoadingMessage, commonProps, message);\n      } else {\n        var _message = noOptionsMessage({\n          inputValue: inputValue\n        });\n        if (_message === null) return null;\n        menuUI = /*#__PURE__*/React.createElement(NoOptionsMessage, commonProps, _message);\n      }\n      var menuPlacementProps = {\n        minMenuHeight: minMenuHeight,\n        maxMenuHeight: maxMenuHeight,\n        menuPlacement: menuPlacement,\n        menuPosition: menuPosition,\n        menuShouldScrollIntoView: menuShouldScrollIntoView\n      };\n      var menuElement = /*#__PURE__*/React.createElement(MenuPlacer, _extends({}, commonProps, menuPlacementProps), function (_ref4) {\n        var ref = _ref4.ref,\n          _ref4$placerProps = _ref4.placerProps,\n          placement = _ref4$placerProps.placement,\n          maxHeight = _ref4$placerProps.maxHeight;\n        return /*#__PURE__*/React.createElement(Menu, _extends({}, commonProps, menuPlacementProps, {\n          innerRef: ref,\n          innerProps: {\n            onMouseDown: _this4.onMenuMouseDown,\n            onMouseMove: _this4.onMenuMouseMove\n          },\n          isLoading: isLoading,\n          placement: placement\n        }), /*#__PURE__*/React.createElement(ScrollManager, {\n          captureEnabled: captureMenuScroll,\n          onTopArrive: onMenuScrollToTop,\n          onBottomArrive: onMenuScrollToBottom,\n          lockEnabled: menuShouldBlockScroll\n        }, function (scrollTargetRef) {\n          return /*#__PURE__*/React.createElement(MenuList, _extends({}, commonProps, {\n            innerRef: function innerRef(instance) {\n              _this4.getMenuListRef(instance);\n              scrollTargetRef(instance);\n            },\n            innerProps: {\n              role: 'listbox',\n              'aria-multiselectable': commonProps.isMulti,\n              id: _this4.getElementId('listbox')\n            },\n            isLoading: isLoading,\n            maxHeight: maxHeight,\n            focusedOption: focusedOption\n          }), menuUI);\n        }));\n      });\n\n      // positioning behaviour is almost identical for portalled and fixed,\n      // so we use the same component. the actual portalling logic is forked\n      // within the component based on `menuPosition`\n      return menuPortalTarget || menuPosition === 'fixed' ? /*#__PURE__*/React.createElement(MenuPortal, _extends({}, commonProps, {\n        appendTo: menuPortalTarget,\n        controlElement: this.controlRef,\n        menuPlacement: menuPlacement,\n        menuPosition: menuPosition\n      }), menuElement) : menuElement;\n    }\n  }, {\n    key: \"renderFormField\",\n    value: function renderFormField() {\n      var _this5 = this;\n      var _this$props13 = this.props,\n        delimiter = _this$props13.delimiter,\n        isDisabled = _this$props13.isDisabled,\n        isMulti = _this$props13.isMulti,\n        name = _this$props13.name,\n        required = _this$props13.required;\n      var selectValue = this.state.selectValue;\n      if (required && !this.hasValue() && !isDisabled) {\n        return /*#__PURE__*/React.createElement(RequiredInput$1, {\n          name: name,\n          onFocus: this.onValueInputFocus\n        });\n      }\n      if (!name || isDisabled) return;\n      if (isMulti) {\n        if (delimiter) {\n          var value = selectValue.map(function (opt) {\n            return _this5.getOptionValue(opt);\n          }).join(delimiter);\n          return /*#__PURE__*/React.createElement(\"input\", {\n            name: name,\n            type: \"hidden\",\n            value: value\n          });\n        } else {\n          var input = selectValue.length > 0 ? selectValue.map(function (opt, i) {\n            return /*#__PURE__*/React.createElement(\"input\", {\n              key: \"i-\".concat(i),\n              name: name,\n              type: \"hidden\",\n              value: _this5.getOptionValue(opt)\n            });\n          }) : /*#__PURE__*/React.createElement(\"input\", {\n            name: name,\n            type: \"hidden\",\n            value: \"\"\n          });\n          return /*#__PURE__*/React.createElement(\"div\", null, input);\n        }\n      } else {\n        var _value = selectValue[0] ? this.getOptionValue(selectValue[0]) : '';\n        return /*#__PURE__*/React.createElement(\"input\", {\n          name: name,\n          type: \"hidden\",\n          value: _value\n        });\n      }\n    }\n  }, {\n    key: \"renderLiveRegion\",\n    value: function renderLiveRegion() {\n      var commonProps = this.commonProps;\n      var _this$state6 = this.state,\n        ariaSelection = _this$state6.ariaSelection,\n        focusedOption = _this$state6.focusedOption,\n        focusedValue = _this$state6.focusedValue,\n        isFocused = _this$state6.isFocused,\n        selectValue = _this$state6.selectValue;\n      var focusableOptions = this.getFocusableOptions();\n      return /*#__PURE__*/React.createElement(LiveRegion$1, _extends({}, commonProps, {\n        id: this.getElementId('live-region'),\n        ariaSelection: ariaSelection,\n        focusedOption: focusedOption,\n        focusedValue: focusedValue,\n        isFocused: isFocused,\n        selectValue: selectValue,\n        focusableOptions: focusableOptions,\n        isAppleDevice: this.isAppleDevice\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$getComponents8 = this.getComponents(),\n        Control = _this$getComponents8.Control,\n        IndicatorsContainer = _this$getComponents8.IndicatorsContainer,\n        SelectContainer = _this$getComponents8.SelectContainer,\n        ValueContainer = _this$getComponents8.ValueContainer;\n      var _this$props14 = this.props,\n        className = _this$props14.className,\n        id = _this$props14.id,\n        isDisabled = _this$props14.isDisabled,\n        menuIsOpen = _this$props14.menuIsOpen;\n      var isFocused = this.state.isFocused;\n      var commonProps = this.commonProps = this.getCommonProps();\n      return /*#__PURE__*/React.createElement(SelectContainer, _extends({}, commonProps, {\n        className: className,\n        innerProps: {\n          id: id,\n          onKeyDown: this.onKeyDown\n        },\n        isDisabled: isDisabled,\n        isFocused: isFocused\n      }), this.renderLiveRegion(), /*#__PURE__*/React.createElement(Control, _extends({}, commonProps, {\n        innerRef: this.getControlRef,\n        innerProps: {\n          onMouseDown: this.onControlMouseDown,\n          onTouchEnd: this.onControlTouchEnd\n        },\n        isDisabled: isDisabled,\n        isFocused: isFocused,\n        menuIsOpen: menuIsOpen\n      }), /*#__PURE__*/React.createElement(ValueContainer, _extends({}, commonProps, {\n        isDisabled: isDisabled\n      }), this.renderPlaceholderOrValue(), this.renderInput()), /*#__PURE__*/React.createElement(IndicatorsContainer, _extends({}, commonProps, {\n        isDisabled: isDisabled\n      }), this.renderClearIndicator(), this.renderLoadingIndicator(), this.renderIndicatorSeparator(), this.renderDropdownIndicator())), this.renderMenu(), this.renderFormField());\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, state) {\n      var prevProps = state.prevProps,\n        clearFocusValueOnUpdate = state.clearFocusValueOnUpdate,\n        inputIsHiddenAfterUpdate = state.inputIsHiddenAfterUpdate,\n        ariaSelection = state.ariaSelection,\n        isFocused = state.isFocused,\n        prevWasFocused = state.prevWasFocused,\n        instancePrefix = state.instancePrefix;\n      var options = props.options,\n        value = props.value,\n        menuIsOpen = props.menuIsOpen,\n        inputValue = props.inputValue,\n        isMulti = props.isMulti;\n      var selectValue = cleanValue(value);\n      var newMenuOptionsState = {};\n      if (prevProps && (value !== prevProps.value || options !== prevProps.options || menuIsOpen !== prevProps.menuIsOpen || inputValue !== prevProps.inputValue)) {\n        var focusableOptions = menuIsOpen ? buildFocusableOptions(props, selectValue) : [];\n        var focusableOptionsWithIds = menuIsOpen ? buildFocusableOptionsWithIds(buildCategorizedOptions(props, selectValue), \"\".concat(instancePrefix, \"-option\")) : [];\n        var focusedValue = clearFocusValueOnUpdate ? getNextFocusedValue(state, selectValue) : null;\n        var focusedOption = getNextFocusedOption(state, focusableOptions);\n        var focusedOptionId = getFocusedOptionId(focusableOptionsWithIds, focusedOption);\n        newMenuOptionsState = {\n          selectValue: selectValue,\n          focusedOption: focusedOption,\n          focusedOptionId: focusedOptionId,\n          focusableOptionsWithIds: focusableOptionsWithIds,\n          focusedValue: focusedValue,\n          clearFocusValueOnUpdate: false\n        };\n      }\n      // some updates should toggle the state of the input visibility\n      var newInputIsHiddenState = inputIsHiddenAfterUpdate != null && props !== prevProps ? {\n        inputIsHidden: inputIsHiddenAfterUpdate,\n        inputIsHiddenAfterUpdate: undefined\n      } : {};\n      var newAriaSelection = ariaSelection;\n      var hasKeptFocus = isFocused && prevWasFocused;\n      if (isFocused && !hasKeptFocus) {\n        // If `value` or `defaultValue` props are not empty then announce them\n        // when the Select is initially focused\n        newAriaSelection = {\n          value: valueTernary(isMulti, selectValue, selectValue[0] || null),\n          options: selectValue,\n          action: 'initial-input-focus'\n        };\n        hasKeptFocus = !prevWasFocused;\n      }\n\n      // If the 'initial-input-focus' action has been set already\n      // then reset the ariaSelection to null\n      if ((ariaSelection === null || ariaSelection === void 0 ? void 0 : ariaSelection.action) === 'initial-input-focus') {\n        newAriaSelection = null;\n      }\n      return _objectSpread(_objectSpread(_objectSpread({}, newMenuOptionsState), newInputIsHiddenState), {}, {\n        prevProps: props,\n        ariaSelection: newAriaSelection,\n        prevWasFocused: hasKeptFocus\n      });\n    }\n  }]);\n  return Select;\n}(Component);\nSelect.defaultProps = defaultProps;\n\nexport { Select as S, defaultProps as a, getOptionLabel$1 as b, createFilter as c, defaultTheme as d, getOptionValue$1 as g, mergeStyles as m };\n","import { u as useStateManager } from './useStateManager-7e1e8489.esm.js';\nexport { u as useStateManager } from './useStateManager-7e1e8489.esm.js';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport { forwardRef, useMemo } from 'react';\nimport { S as Select } from './Select-c7902d94.esm.js';\nexport { c as createFilter, d as defaultTheme, m as mergeStyles } from './Select-c7902d94.esm.js';\nimport { CacheProvider } from '@emotion/react';\nimport createCache from '@emotion/cache';\nexport { c as components } from './index-a301f526.esm.js';\nimport '@babel/runtime/helpers/objectSpread2';\nimport '@babel/runtime/helpers/slicedToArray';\nimport '@babel/runtime/helpers/objectWithoutProperties';\nimport '@babel/runtime/helpers/classCallCheck';\nimport '@babel/runtime/helpers/createClass';\nimport '@babel/runtime/helpers/inherits';\nimport '@babel/runtime/helpers/createSuper';\nimport '@babel/runtime/helpers/toConsumableArray';\nimport 'memoize-one';\nimport '@babel/runtime/helpers/typeof';\nimport '@babel/runtime/helpers/taggedTemplateLiteral';\nimport '@babel/runtime/helpers/defineProperty';\nimport 'react-dom';\nimport '@floating-ui/dom';\nimport 'use-isomorphic-layout-effect';\n\nvar StateManagedSelect = /*#__PURE__*/forwardRef(function (props, ref) {\n  var baseSelectProps = useStateManager(props);\n  return /*#__PURE__*/React.createElement(Select, _extends({\n    ref: ref\n  }, baseSelectProps));\n});\nvar StateManagedSelect$1 = StateManagedSelect;\n\nvar NonceProvider = (function (_ref) {\n  var nonce = _ref.nonce,\n    children = _ref.children,\n    cacheKey = _ref.cacheKey;\n  var emotionCache = useMemo(function () {\n    return createCache({\n      key: cacheKey,\n      nonce: nonce\n    });\n  }, [cacheKey, nonce]);\n  return /*#__PURE__*/React.createElement(CacheProvider, {\n    value: emotionCache\n  }, children);\n});\n\nexport { NonceProvider, StateManagedSelect$1 as default };\n","import * as React from \"react\";\nimport { styled } from \"@linaria/react\";\nimport Select, { components } from \"react-select\";\nimport { getMiddleCenterBias, useTheme, GridCellKind, TextCellEntry } from \"@glideapps/glide-data-grid\";\nconst CustomMenu = p => {\n  const {\n    Menu\n  } = components;\n  const {\n    children,\n    ...rest\n  } = p;\n  return React.createElement(Menu, {\n    ...rest\n  }, children);\n};\nconst Wrap = /*#__PURE__*/styled('div')({\n  name: \"Wrap\",\n  class: \"gdg-wghi2zc\",\n  propsAsIs: false\n});\nconst PortalWrap = /*#__PURE__*/styled('div')({\n  name: \"PortalWrap\",\n  class: \"gdg-p13nj8j0\",\n  propsAsIs: false\n});\n// This is required since the padding is disabled for this cell type\n// The settings are based on the \"pad\" settings in the data-grid-overlay-editor-style.tsx\nconst ReadOnlyWrap = /*#__PURE__*/styled('div')({\n  name: \"ReadOnlyWrap\",\n  class: \"gdg-r6sia3g\",\n  propsAsIs: false\n});\nconst Editor = p => {\n  const {\n    value: cell,\n    onFinishedEditing,\n    initialValue\n  } = p;\n  const {\n    allowedValues,\n    value: valueIn\n  } = cell.data;\n  const [value, setValue] = React.useState(valueIn);\n  const [inputValue, setInputValue] = React.useState(initialValue ?? \"\");\n  const theme = useTheme();\n  const values = React.useMemo(() => {\n    return allowedValues.map(option => {\n      if (typeof option === \"string\" || option === null || option === undefined) {\n        return {\n          value: option,\n          label: option?.toString() ?? \"\"\n        };\n      }\n      return option;\n    });\n  }, [allowedValues]);\n  if (cell.readonly) {\n    return React.createElement(ReadOnlyWrap, null, React.createElement(TextCellEntry, {\n      highlight: true,\n      autoFocus: false,\n      disabled: true,\n      value: value ?? \"\",\n      onChange: () => undefined\n    }));\n  }\n  return React.createElement(Wrap, null, React.createElement(Select, {\n    className: \"glide-select\",\n    inputValue: inputValue,\n    onInputChange: setInputValue,\n    menuPlacement: \"auto\",\n    value: values.find(x => x.value === value),\n    styles: {\n      control: base => ({\n        ...base,\n        border: 0,\n        boxShadow: \"none\"\n      }),\n      option: (base, {\n        isFocused\n      }) => ({\n        ...base,\n        fontSize: theme.editorFontSize,\n        fontFamily: theme.fontFamily,\n        cursor: isFocused ? \"pointer\" : undefined,\n        paddingLeft: theme.cellHorizontalPadding,\n        paddingRight: theme.cellHorizontalPadding,\n        \":active\": {\n          ...base[\":active\"],\n          color: theme.accentFg\n        },\n        // Add some content in case the option is empty\n        // so that the option height can be calculated correctly\n        \":empty::after\": {\n          content: '\"&nbsp;\"',\n          visibility: \"hidden\"\n        }\n      })\n    },\n    theme: t => {\n      return {\n        ...t,\n        colors: {\n          ...t.colors,\n          neutral0: theme.bgCell,\n          // the selected item because of course it is.\n          neutral5: theme.bgCell,\n          neutral10: theme.bgCell,\n          neutral20: theme.bgCellMedium,\n          neutral30: theme.bgCellMedium,\n          neutral40: theme.bgCellMedium,\n          neutral50: theme.textLight,\n          neutral60: theme.textMedium,\n          neutral70: theme.textMedium,\n          neutral80: theme.textDark,\n          neutral90: theme.textDark,\n          neutral100: theme.textDark,\n          primary: theme.accentColor,\n          primary75: theme.accentColor,\n          primary50: theme.accentColor,\n          primary25: theme.accentLight // prelight color\n        }\n      };\n    },\n\n    menuPortalTarget: document.getElementById(\"portal\"),\n    autoFocus: true,\n    openMenuOnFocus: true,\n    components: {\n      DropdownIndicator: () => null,\n      IndicatorSeparator: () => null,\n      Menu: props => React.createElement(PortalWrap, null, React.createElement(CustomMenu, {\n        className: \"click-outside-ignore\",\n        ...props\n      }))\n    },\n    options: values,\n    onChange: async e => {\n      if (e === null) return;\n      setValue(e.value);\n      await new Promise(r => window.requestAnimationFrame(r));\n      onFinishedEditing({\n        ...cell,\n        data: {\n          ...cell.data,\n          value: e.value\n        }\n      });\n    }\n  }));\n};\nconst renderer = {\n  kind: GridCellKind.Custom,\n  isMatch: c => c.data.kind === \"dropdown-cell\",\n  draw: (args, cell) => {\n    const {\n      ctx,\n      theme,\n      rect\n    } = args;\n    const {\n      value\n    } = cell.data;\n    const foundOption = cell.data.allowedValues.find(opt => {\n      if (typeof opt === \"string\" || opt === null || opt === undefined) {\n        return opt === value;\n      }\n      return opt.value === value;\n    });\n    const displayText = typeof foundOption === \"string\" ? foundOption : foundOption?.label ?? \"\";\n    if (displayText) {\n      ctx.fillStyle = theme.textDark;\n      ctx.fillText(displayText, rect.x + theme.cellHorizontalPadding, rect.y + rect.height / 2 + getMiddleCenterBias(ctx, theme));\n    }\n    return true;\n  },\n  measure: (ctx, cell, theme) => {\n    const {\n      value\n    } = cell.data;\n    return (value ? ctx.measureText(value).width : 0) + theme.cellHorizontalPadding * 2;\n  },\n  provideEditor: () => ({\n    editor: Editor,\n    disablePadding: true,\n    deletedValue: v => ({\n      ...v,\n      copyData: \"\",\n      data: {\n        ...v.data,\n        value: \"\"\n      }\n    })\n  }),\n  onPaste: (v, d) => ({\n    ...d,\n    value: d.allowedValues.includes(v) ? v : d.value\n  })\n};\nexport default renderer;\n\n","import { measureTextCached, getMiddleCenterBias, GridCellKind, } from \"@glideapps/glide-data-grid\";\nimport * as React from \"react\";\nimport { roundedRect } from \"../draw-fns.js\";\nconst RANGE_HEIGHT = 6;\nconst inputStyle = {\n    marginRight: 8,\n};\nconst wrapperStyle = {\n    display: \"flex\",\n    alignItems: \"center\",\n    flexGrow: 1,\n};\nconst renderer = {\n    kind: GridCellKind.Custom,\n    isMatch: (c) => c.data.kind === \"range-cell\",\n    draw: (args, cell) => {\n        const { ctx, theme, rect } = args;\n        const { min, max, value, label, measureLabel } = cell.data;\n        const x = rect.x + theme.cellHorizontalPadding;\n        const yMid = rect.y + rect.height / 2;\n        const rangeSize = max - min;\n        const fillRatio = (value - min) / rangeSize;\n        ctx.save();\n        let labelWidth = 0;\n        if (label !== undefined) {\n            ctx.font = `12px ${theme.fontFamily}`; // fixme this is slow\n            labelWidth =\n                measureTextCached(measureLabel ?? label, ctx, `12px ${theme.fontFamily}`).width +\n                    theme.cellHorizontalPadding;\n        }\n        const rangeWidth = rect.width - theme.cellHorizontalPadding * 2 - labelWidth;\n        if (rangeWidth >= RANGE_HEIGHT) {\n            const gradient = ctx.createLinearGradient(x, yMid, x + rangeWidth, yMid);\n            gradient.addColorStop(0, theme.accentColor);\n            gradient.addColorStop(fillRatio, theme.accentColor);\n            gradient.addColorStop(fillRatio, theme.bgBubble);\n            gradient.addColorStop(1, theme.bgBubble);\n            ctx.beginPath();\n            ctx.fillStyle = gradient;\n            roundedRect(ctx, x, yMid - RANGE_HEIGHT / 2, rangeWidth, RANGE_HEIGHT, RANGE_HEIGHT / 2);\n            ctx.fill();\n            ctx.beginPath();\n            roundedRect(ctx, x + 0.5, yMid - RANGE_HEIGHT / 2 + 0.5, rangeWidth - 1, RANGE_HEIGHT - 1, (RANGE_HEIGHT - 1) / 2);\n            ctx.strokeStyle = theme.accentLight;\n            ctx.lineWidth = 1;\n            ctx.stroke();\n        }\n        if (label !== undefined) {\n            ctx.textAlign = \"right\";\n            ctx.fillStyle = theme.textDark;\n            ctx.fillText(label, rect.x + rect.width - theme.cellHorizontalPadding, yMid + getMiddleCenterBias(ctx, `12px ${theme.fontFamily}`));\n        }\n        ctx.restore();\n        return true;\n    },\n    provideEditor: () => {\n        // eslint-disable-next-line react/display-name\n        return p => {\n            const { data, readonly } = p.value;\n            const strValue = data.value.toString();\n            const strMin = data.min.toString();\n            const strMax = data.max.toString();\n            const strStep = data.step.toString();\n            const onChange = (e) => {\n                p.onChange({\n                    ...p.value,\n                    data: {\n                        ...data,\n                        value: Number(e.target.value),\n                    },\n                });\n            };\n            return (React.createElement(\"label\", { style: wrapperStyle },\n                React.createElement(\"input\", { style: inputStyle, type: \"range\", value: strValue, min: strMin, max: strMax, step: strStep, onChange: onChange, disabled: readonly }),\n                strValue));\n        };\n    },\n    onPaste: (v, d) => {\n        let num = Number.parseFloat(v);\n        num = Number.isNaN(num) ? d.value : Math.max(d.min, Math.min(d.max, num));\n        return {\n            ...d,\n            value: num,\n        };\n    },\n};\nexport default renderer;\n//# sourceMappingURL=range-cell.js.map","import React from \"react\";\nimport { styled } from \"@linaria/react\";\nimport { drawTextCell, GridCellKind, TextCellEntry } from \"@glideapps/glide-data-grid\";\nexport const StyledInputBox = /*#__PURE__*/styled('input')({\n  name: \"StyledInputBox\",\n  class: \"gdg-s1wtovjx\",\n  propsAsIs: false\n});\nexport const formatValueForHTMLInput = (dateKind, date) => {\n  if (date === undefined || date === null) {\n    return \"\";\n  }\n  const isoDate = date.toISOString();\n  switch (dateKind) {\n    case \"date\":\n      return isoDate.split(\"T\")[0];\n    case \"datetime-local\":\n      return isoDate.replace(\"Z\", \"\");\n    case \"time\":\n      return isoDate.split(\"T\")[1].replace(\"Z\", \"\");\n    default:\n      throw new Error(`Unknown date kind ${dateKind}`);\n  }\n};\nconst Editor = cell => {\n  const cellData = cell.value.data;\n  const {\n    format,\n    displayDate\n  } = cellData;\n  const step = cellData.step !== undefined && !Number.isNaN(Number(cellData.step)) ? Number(cellData.step) : undefined;\n  const minValue = cellData.min instanceof Date ? formatValueForHTMLInput(format, cellData.min) : cellData.min;\n  const maxValue = cellData.max instanceof Date ? formatValueForHTMLInput(format, cellData.max) : cellData.max;\n  let date = cellData.date;\n  // Convert timezone offset to milliseconds\n  const timezoneOffsetMs = cellData.timezoneOffset ? cellData.timezoneOffset * 60 * 1000 : 0;\n  if (timezoneOffsetMs && date) {\n    // Adjust based on the timezone offset\n    date = new Date(date.getTime() + timezoneOffsetMs);\n  }\n  const value = formatValueForHTMLInput(format, date);\n  if (cell.value.readonly) {\n    return React.createElement(TextCellEntry, {\n      highlight: true,\n      autoFocus: false,\n      disabled: true,\n      value: displayDate ?? \"\",\n      onChange: () => undefined\n    });\n  }\n  return React.createElement(StyledInputBox, {\n    \"data-testid\": \"date-picker-cell\",\n    required: true,\n    type: format,\n    defaultValue: value,\n    min: minValue,\n    max: maxValue,\n    step: step,\n    autoFocus: true,\n    onChange: event => {\n      if (isNaN(event.target.valueAsNumber)) {\n        // The user has cleared the date, contribute as undefined\n        cell.onChange({\n          ...cell.value,\n          data: {\n            ...cell.value.data,\n            date: undefined\n          }\n        });\n      } else {\n        cell.onChange({\n          ...cell.value,\n          data: {\n            ...cell.value.data,\n            // use valueAsNumber because valueAsDate is null for \"datetime-local\"\n            // https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/datetime-local#technical_summary\n            date: new Date(event.target.valueAsNumber - timezoneOffsetMs)\n          }\n        });\n      }\n    }\n  });\n};\nconst renderer = {\n  kind: GridCellKind.Custom,\n  isMatch: cell => cell.data.kind === \"date-picker-cell\",\n  draw: (args, cell) => {\n    const {\n      displayDate\n    } = cell.data;\n    drawTextCell(args, displayDate, cell.contentAlign);\n    return true;\n  },\n  measure: (ctx, cell, theme) => {\n    const {\n      displayDate\n    } = cell.data;\n    return ctx.measureText(displayDate).width + theme.cellHorizontalPadding * 2;\n  },\n  provideEditor: () => ({\n    editor: Editor\n  }),\n  onPaste: (v, d) => {\n    let parseDateTimestamp = NaN;\n    // We only try to parse the value if it is not empty/undefined/null:\n    if (v) {\n      // Support for unix timestamps (milliseconds since 1970-01-01):\n      parseDateTimestamp = Number(v).valueOf();\n      if (Number.isNaN(parseDateTimestamp)) {\n        // Support for parsing ISO 8601 date strings:\n        parseDateTimestamp = Date.parse(v);\n        if (d.format === \"time\" && Number.isNaN(parseDateTimestamp)) {\n          // The pasted value was not a valid date string\n          // Try to interpret value as time string instead (HH:mm:ss)\n          parseDateTimestamp = Date.parse(`1970-01-01T${v}Z`);\n        }\n      }\n    }\n    return {\n      ...d,\n      date: Number.isNaN(parseDateTimestamp) ? undefined : new Date(parseDateTimestamp)\n    };\n  }\n};\nexport default renderer;\n\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\"\n\nimport {\n  BaseDrawArgs,\n  DataEditorProps,\n  DrawCellCallback,\n  drawTextCell,\n  Theme as GlideTheme,\n  Rectangle,\n} from \"@glideapps/glide-data-grid\"\nimport {\n  DatePickerCell,\n  DropdownCell,\n  RangeCell,\n  SparklineCell,\n} from \"@glideapps/glide-data-grid-cells\"\n\nimport {\n  BaseColumn,\n  CustomCells,\n  isMissingValueCell,\n} from \"@streamlit/lib/src/components/widgets/DataFrame/columns\"\n\n// Token used for missing values (null, NaN, etc.)\nconst NULL_VALUE_TOKEN = \"None\"\n\n/**\n * Draw a red indicator in the top right corner of the cell\n * to indicate that the cell is required.\n */\nexport function drawRequiredIndicator(\n  ctx: CanvasRenderingContext2D,\n  rect: Rectangle,\n  theme: GlideTheme\n): void {\n  ctx.save()\n  ctx.beginPath()\n  // We are first moving the drawing position under the top right corner\n  // 8 pixels from left side (this is the size triangle)\n  // and 1 pixel from top side (to be under the cell border).\n  ctx.moveTo(rect.x + rect.width - 8, rect.y + 1)\n  // We draw the first line to the top right corner.\n  ctx.lineTo(rect.x + rect.width, rect.y + 1)\n  // We draw the second line 8 pixel down on the right cell border\n  ctx.lineTo(rect.x + rect.width, rect.y + 1 + 8)\n  // And now its enough to just fill it with a color to get a triangle.\n  ctx.fillStyle = theme.accentColor\n  ctx.fill()\n  ctx.restore()\n}\n\n/**\n * If a cell is marked as missing, we draw a placeholder symbol with a faded text color.\n */\nexport const drawMissingPlaceholder = (args: BaseDrawArgs): void => {\n  const { cell, theme, ctx } = args\n  drawTextCell(\n    {\n      ...args,\n      theme: {\n        ...theme,\n        textDark: theme.textLight,\n        headerFontFull: `${theme.headerFontStyle} ${theme.fontFamily}`,\n        baseFontFull: `${theme.baseFontStyle} ${theme.fontFamily}`,\n        markerFontFull: `${theme.markerFontStyle} ${theme.fontFamily}`,\n      },\n      // The following props are just added for technical reasons:\n      // @ts-expect-error\n      spriteManager: {},\n      hyperWrapping: false,\n    },\n    NULL_VALUE_TOKEN,\n    cell.contentAlign\n  )\n  // Reset fill style to the original one\n  ctx.fillStyle = theme.textDark\n}\n\n/**\n * Create return type for useCustomRenderer hook based on the DataEditorProps.\n */\ntype CustomRendererReturn = Pick<\n  DataEditorProps,\n  \"drawCell\" | \"customRenderers\"\n>\n\n/**\n * Custom hook that creates some custom cell renderers compatible with glide-data-grid.\n *\n * This includes capabilities like showing a faded placeholder for missing values or\n * a red indicator for required cells.\n *\n * @param columns - The columns of the table.\n *\n * @returns An object containing the following properties:\n * - `drawCell`: A function that overwrites some rendering that can be\n *    passed to the `DataEditor` component.\n * - `customRenderers`: A map of custom cell renderers used by custom cells\n *    that can be passed to the `DataEditor` component.\n */\nfunction useCustomRenderer(columns: BaseColumn[]): CustomRendererReturn {\n  const drawCell: DrawCellCallback = React.useCallback(\n    (args, draw) => {\n      const { cell, theme, ctx, rect } = args\n      const colPos = args.col\n      if (isMissingValueCell(cell) && colPos < columns.length) {\n        const column = columns[colPos]\n\n        // We explicitly ignore some cell types here (e.g. checkbox, progress...) since\n        // they are taking care of rendering their missing value state themselves (usually as empty cell).\n        // All other cell types are rendered with a placeholder symbol and a faded text color via drawMissingPlaceholder.\n        if (\n          [\"checkbox\", \"line_chart\", \"bar_chart\", \"progress\"].includes(\n            column.kind\n          )\n        ) {\n          draw()\n        } else {\n          drawMissingPlaceholder(args as BaseDrawArgs)\n        }\n\n        if (column.isRequired && column.isEditable) {\n          // If the cell value is missing, and it is configured as required & editable,\n          // we draw a red indicator in the top right corner of the cell.\n          drawRequiredIndicator(ctx, rect, theme)\n        }\n        return\n      }\n      draw()\n    },\n    [columns]\n  )\n\n  // Load extra cell renderers from the glide-data-grid-cells package:\n  const customRenderers = React.useMemo(\n    () =>\n      [\n        SparklineCell,\n        DropdownCell,\n        RangeCell,\n        DatePickerCell,\n        ...CustomCells,\n      ] as DataEditorProps[\"customRenderers\"],\n    // This doesn't change during the lifetime of the component,\n    // so we can just run it once at creation time.\n    // TODO: Update to match React best practices\n    // eslint-disable-next-line react-compiler/react-compiler\n    /* eslint-disable react-hooks/exhaustive-deps */\n    []\n  )\n\n  return {\n    drawCell,\n    customRenderers,\n  }\n}\n\nexport default useCustomRenderer\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\"\n\nimport { DataEditorProps } from \"@glideapps/glide-data-grid\"\n\nimport createDownloadLinkElement from \"@streamlit/lib/src/util/createDownloadLinkElement\"\nimport {\n  BaseColumn,\n  toSafeString,\n} from \"@streamlit/lib/src/components/widgets/DataFrame/columns\"\nimport { isNullOrUndefined } from \"@streamlit/lib/src/util/utils\"\nimport { logError, logWarning } from \"@streamlit/lib/src/util/log\"\n\n// Delimiter between cells\nconst CSV_DELIMITER = \",\"\n// Quote character for cell values containing special characters\nconst CSV_QUOTE_CHAR = '\"'\n// The character used to escape the quote character within a cell\nconst CSV_ESCAPE_CHAR = '\"'\n// Delimiter between rows (newline)\nconst CSV_ROW_DELIMITER = \"\\n\"\n// Used to indicate Unicode encoding of a text file (for excel compatibility)\nconst CSV_UTF8_BOM = \"\\ufeff\"\n// Regex to check if a value contains special characters that need to be escaped\nconst CSV_SPECIAL_CHARS_REGEX = new RegExp(\n  `[${[CSV_DELIMITER, CSV_QUOTE_CHAR, CSV_ROW_DELIMITER].join(\"\")}]`\n)\n\nexport function toCsvRow(rowValues: any[]): string {\n  return (\n    rowValues.map(cell => escapeValue(cell)).join(CSV_DELIMITER) +\n    CSV_ROW_DELIMITER\n  )\n}\n\n/**\n * Escapes a cell value for CSV export.\n *\n * Makes sure that the value is a string, and special characters are escaped correctly.\n */\nfunction escapeValue(value: any): string {\n  if (isNullOrUndefined(value)) {\n    return \"\"\n  }\n  const strValue = toSafeString(value)\n\n  // Special chars need to be escaped:\n  if (CSV_SPECIAL_CHARS_REGEX.test(strValue)) {\n    // Add quotes around the value:\n    return `${CSV_QUOTE_CHAR}${strValue.replace(\n      // Escape all quote chars if inside a quoted string:\n      new RegExp(CSV_QUOTE_CHAR, \"g\"),\n      CSV_ESCAPE_CHAR + CSV_QUOTE_CHAR\n    )}${CSV_QUOTE_CHAR}`\n  }\n\n  return strValue\n}\n\ntype DataExporterReturn = {\n  // A callback to trigger the data download as CSV\n  exportToCsv: () => void\n}\n\n/**\n * Writes CSV data to a specified writable stream using provided data table parameters.\n * Initiates by writing a UTF-8 Byte Order Mark (BOM) for Excel compatibility, followed by\n * column headers and rows constructed from the cell values obtained through `getCellContent`.\n * The function handles encoding and CSV formatting, concluding by closing the writable stream.\n *\n * @param {WritableStreamDefaultWriter} writable - Target stream for CSV data.\n * @param {DataEditorProps[\"getCellContent\"]} getCellContent - The cell content getter compatible with glide-data-grid.\n * @param {BaseColumn[]} columns - The columns of the table.\n * @param {number} numRows - The number of rows of the current state.\n *\n * @returns {Promise<void>} Promise that resolves when the CSV has been fully written.\n */\nasync function writeCsv(\n  writable: WritableStreamDefaultWriter,\n  getCellContent: DataEditorProps[\"getCellContent\"],\n  columns: BaseColumn[],\n  numRows: number\n): Promise<void> {\n  const textEncoder = new TextEncoder()\n\n  // Write UTF-8 BOM for excel compatibility:\n  await writable.write(textEncoder.encode(CSV_UTF8_BOM))\n\n  // Write headers:\n  const headers: string[] = columns.map(column => column.name)\n  await writable.write(textEncoder.encode(toCsvRow(headers)))\n\n  for (let row = 0; row < numRows; row++) {\n    const rowData: any[] = []\n    columns.forEach((column: BaseColumn, col: number, _map) => {\n      rowData.push(column.getCellValue(getCellContent([col, row])))\n    })\n    // Write row to CSV:\n    await writable.write(textEncoder.encode(toCsvRow(rowData)))\n  }\n\n  await writable.close()\n}\n/**\n * Custom hook that handles all the data export/download logic.\n *\n * @param getCellContent - The cell content getter compatible with glide-data-grid.\n * @param columns - The columns of the table.\n * @param numRows - The number of rows of the current state.\n *\n * @returns a callback to trigger the data download as CSV.\n */\nfunction useDataExporter(\n  getCellContent: DataEditorProps[\"getCellContent\"],\n  columns: BaseColumn[],\n  numRows: number,\n  enforceDownloadInNewTab: boolean\n): DataExporterReturn {\n  const exportToCsv = React.useCallback(async () => {\n    const timestamp = new Date().toISOString().slice(0, 16).replace(\":\", \"-\")\n    const suggestedName = `${timestamp}_export.csv`\n    try {\n      // Lazy import to prevent weird breakage in some niche cases\n      // (e.g. usage within the replay.io browser). The package works well\n      // in all of the common browser, but might cause some trouble in\n      // less common browsers. To not crash the whole app, we just lazy import\n      // this here.\n      const nativeFileSystemAdapter = await import(\n        \"native-file-system-adapter\"\n      )\n      const fileHandle = await nativeFileSystemAdapter.showSaveFilePicker({\n        suggestedName,\n        types: [{ accept: { \"text/csv\": [\".csv\"] } }],\n        excludeAcceptAllOption: false,\n      })\n\n      const writer = await fileHandle.createWritable()\n\n      await writeCsv(writer, getCellContent, columns, numRows)\n    } catch (error) {\n      if (error instanceof Error && error.name === \"AbortError\") {\n        // The user has canceled the save dialog. Do nothing.\n        return\n      }\n\n      try {\n        logWarning(\n          \"Failed to export data as CSV with FileSystem API, trying fallback method\",\n          error\n        )\n        // Simulated WritableStream that builds CSV content in-memory for the Blob fallback method\n        let csvContent = \"\"\n\n        const inMemoryWriter = new WritableStream({\n          write: async chunk => {\n            csvContent += new TextDecoder(\"utf-8\").decode(chunk)\n          },\n          close: async () => {},\n        })\n\n        await writeCsv(\n          inMemoryWriter.getWriter(),\n          getCellContent,\n          columns,\n          numRows\n        )\n\n        // Fallback to the old browser download method:\n        const blob = new Blob([csvContent], {\n          type: \"text/csv;charset=utf-8;\",\n        })\n        const url = URL.createObjectURL(blob)\n\n        const link = createDownloadLinkElement({\n          enforceDownloadInNewTab,\n          url,\n          filename: suggestedName,\n        })\n\n        link.style.display = \"none\"\n\n        document.body.appendChild(link) // Required for FF\n        link.click()\n        document.body.removeChild(link) // Clean up\n        URL.revokeObjectURL(url) // Free up memory\n      } catch (error) {\n        logError(\"Failed to export data as CSV\", error)\n      }\n    }\n  }, [columns, numRows, getCellContent, enforceDownloadInNewTab])\n\n  return {\n    exportToCsv,\n  }\n}\n\nexport default useDataExporter\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\"\n\nimport { CompactSelection, GridSelection } from \"@glideapps/glide-data-grid\"\nimport isEqual from \"lodash/isEqual\"\n\nimport { BaseColumn } from \"@streamlit/lib/src/components/widgets/DataFrame/columns\"\nimport { Arrow as ArrowProto } from \"@streamlit/lib/src/proto\"\n\nexport type SelectionHandlerReturn = {\n  // The current selection state\n  gridSelection: GridSelection\n  // True, if row selection is activated\n  isRowSelectionActivated: boolean\n  // True, if multi row selection is activated\n  isMultiRowSelectionActivated: boolean\n  // True, if column selection is activated\n  isColumnSelectionActivated: boolean\n  // True, if multi column selections is activated\n  isMultiColumnSelectionActivated: boolean\n  // True, if at least one row is selected\n  isRowSelected: boolean\n  // True, if at least one column is selected\n  isColumnSelected: boolean\n  // True, if at least one cell is selected\n  isCellSelected: boolean\n  // Callback to clear selections\n  clearSelection: (keepRows?: boolean, keepColumns?: boolean) => void\n  // Callback to process selection changes from the grid\n  processSelectionChange: (newSelection: GridSelection) => void\n}\n\n/**\n * Custom hook that handles all selection capabilities for the interactive data table.\n *\n * @param element - The Arrow proto message\n * @param isEmptyTable - Whether the table is empty\n * @param isDisabled - Whether the table is disabled\n * @param columns - The columns of the table.\n * @param syncSelectionState - The callback to sync the selection state\n *\n * @returns the selection handler return object\n */\nfunction useSelectionHandler(\n  element: ArrowProto,\n  isEmptyTable: boolean,\n  isDisabled: boolean,\n  columns: BaseColumn[],\n  syncSelectionState: (newSelection: GridSelection) => void\n): SelectionHandlerReturn {\n  const [gridSelection, setGridSelection] = React.useState<GridSelection>({\n    columns: CompactSelection.empty(),\n    rows: CompactSelection.empty(),\n    current: undefined,\n  })\n\n  const isRowSelectionActivated =\n    !isEmptyTable &&\n    !isDisabled &&\n    (element.selectionMode.includes(ArrowProto.SelectionMode.MULTI_ROW) ||\n      element.selectionMode.includes(ArrowProto.SelectionMode.SINGLE_ROW))\n  const isMultiRowSelectionActivated =\n    isRowSelectionActivated &&\n    element.selectionMode.includes(ArrowProto.SelectionMode.MULTI_ROW)\n\n  const isColumnSelectionActivated =\n    !isEmptyTable &&\n    !isDisabled &&\n    (element.selectionMode.includes(ArrowProto.SelectionMode.SINGLE_COLUMN) ||\n      element.selectionMode.includes(ArrowProto.SelectionMode.MULTI_COLUMN))\n  const isMultiColumnSelectionActivated =\n    isColumnSelectionActivated &&\n    element.selectionMode.includes(ArrowProto.SelectionMode.MULTI_COLUMN)\n\n  const isRowSelected = gridSelection.rows.length > 0\n  const isColumnSelected = gridSelection.columns.length > 0\n  const isCellSelected = gridSelection.current !== undefined\n\n  /**\n   * This callback is used to process selection changes and - if activated -\n   * trigger a sync of the state with the widget state\n   */\n  const processSelectionChange = React.useCallback(\n    (newSelection: GridSelection) => {\n      const rowSelectionChanged = !isEqual(\n        newSelection.rows.toArray(),\n        gridSelection.rows.toArray()\n      )\n\n      const columnSelectionChanged = !isEqual(\n        newSelection.columns.toArray(),\n        gridSelection.columns.toArray()\n      )\n\n      const cellSelectionChanged = !isEqual(\n        newSelection.current,\n        gridSelection.current\n      )\n\n      // A flag to determine if the selection should be synced with the widget state\n      let syncSelection =\n        (isRowSelectionActivated && rowSelectionChanged) ||\n        (isColumnSelectionActivated && columnSelectionChanged)\n\n      let updatedSelection = newSelection\n      if (\n        (isRowSelectionActivated || isColumnSelectionActivated) &&\n        newSelection.current !== undefined &&\n        cellSelectionChanged\n      ) {\n        // The default behavior is that row selections are cleared when a cell is selected.\n        // This is not desired when row selection is activated. Instead, we want to keep the\n        // row selection and only update the cell selection.\n        updatedSelection = {\n          ...newSelection,\n          rows: gridSelection.rows,\n          columns: gridSelection.columns,\n        }\n        // It should not sync the selection\n        // when only the cell selection changes\n        syncSelection = false\n      }\n\n      if (\n        rowSelectionChanged &&\n        newSelection.rows.length > 0 &&\n        columnSelectionChanged &&\n        newSelection.columns.length === 0\n      ) {\n        // Keep the column selection if row selection was changed\n        updatedSelection = {\n          ...updatedSelection,\n          columns: gridSelection.columns,\n        }\n        syncSelection = true\n      }\n      if (\n        columnSelectionChanged &&\n        newSelection.columns.length > 0 &&\n        rowSelectionChanged &&\n        newSelection.rows.length === 0\n      ) {\n        // Keep the row selection if column selection was changed\n        updatedSelection = {\n          ...updatedSelection,\n          rows: gridSelection.rows,\n        }\n\n        syncSelection = true\n      }\n\n      if (columnSelectionChanged && updatedSelection.columns.length >= 0) {\n        // Remove all index columns from the column selection\n        // We don't want to allow selection of index columns.\n        let cleanedColumns = updatedSelection.columns\n        columns.forEach((column, idx) => {\n          if (column.isIndex) {\n            cleanedColumns = cleanedColumns.remove(idx)\n          }\n        })\n        if (cleanedColumns.length < updatedSelection.columns.length) {\n          updatedSelection = {\n            ...updatedSelection,\n            columns: cleanedColumns,\n          }\n        }\n      }\n\n      setGridSelection(updatedSelection)\n\n      if (syncSelection) {\n        syncSelectionState(updatedSelection)\n      }\n    },\n    [\n      gridSelection,\n      isRowSelectionActivated,\n      isColumnSelectionActivated,\n      syncSelectionState,\n      columns,\n    ]\n  )\n\n  /**\n   * This callback is used to selections (row/column/cell)\n   * and sync the state with the widget state if column or row selections\n   * are activated and the selection has changed.\n   *\n   * @param keepRows - Whether to keep the row selection (default: false)\n   * @param keepColumns - Whether to keep the column selection (default: false)\n   */\n  const clearSelection = React.useCallback(\n    (keepRows = false, keepColumns = false) => {\n      const emptySelection: GridSelection = {\n        columns: keepColumns\n          ? gridSelection.columns\n          : CompactSelection.empty(),\n        rows: keepRows ? gridSelection.rows : CompactSelection.empty(),\n        current: undefined,\n      }\n      setGridSelection(emptySelection)\n      if (\n        (!keepRows && isRowSelectionActivated) ||\n        (!keepColumns && isColumnSelectionActivated)\n      ) {\n        syncSelectionState(emptySelection)\n      }\n    },\n    [\n      gridSelection,\n      isRowSelectionActivated,\n      isColumnSelectionActivated,\n      syncSelectionState,\n    ]\n  )\n\n  return {\n    gridSelection,\n    isRowSelectionActivated,\n    isMultiRowSelectionActivated,\n    isColumnSelectionActivated,\n    isMultiColumnSelectionActivated,\n    isRowSelected,\n    isColumnSelected,\n    isCellSelected,\n    clearSelection,\n    processSelectionChange,\n  }\n}\n\nexport default useSelectionHandler\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { ReactElement } from \"react\"\n\nimport { useTheme } from \"@emotion/react\"\nimport { ACCESSIBILITY_TYPE, PLACEMENT, Popover } from \"baseui/popover\"\n\nimport StreamlitMarkdown from \"@streamlit/lib/src/components/shared/StreamlitMarkdown/StreamlitMarkdown\"\nimport { StyledTooltipContentWrapper } from \"@streamlit/lib/src/components/shared/Tooltip/styled-components\"\nimport {\n  EmotionTheme,\n  hasLightBackgroundColor,\n} from \"@streamlit/lib/src/theme\"\n\nexport interface TooltipProps {\n  // The top position of the tooltip.\n  top: number\n  // The left position of the tooltip.\n  left: number\n  // The markdown content of the tooltip.\n  content: string\n  // Callback from useTooltips hook to clear the tooltip\n  clearTooltip: () => void\n}\n\n/**\n * A tooltip that can be positioned anywhere on the screen.\n *\n * This is mostly the same as the shared tooltip implementation, but\n * we cannot use that one since it is a StatefulTooltip and requires\n * a target component and cannot be triggered programmatically.\n * We need to be able to position the tooltip anywhere on the screen, so we use a Popover\n * instead. Since Popover doesn't support positioning to a virtual position,\n * we are using an invisible div as a workaround.\n *\n * @param top The top position of the tooltip.\n * @param left The left position of the tooltip.\n * @param content The markdown content of the tooltip.\n * @returns The tooltip react element.\n */\nfunction Tooltip({\n  top,\n  left,\n  content,\n  clearTooltip,\n}: TooltipProps): ReactElement {\n  const [open, setOpen] = React.useState(true)\n  const theme: EmotionTheme = useTheme()\n  const { colors, fontSizes, radii, fontWeights } = theme\n\n  const closeTooltip = React.useCallback((): void => {\n    setOpen(false)\n    clearTooltip()\n  }, [clearTooltip, setOpen])\n\n  return (\n    <Popover\n      content={\n        <StyledTooltipContentWrapper data-testid=\"stDataFrameTooltipContent\">\n          <StreamlitMarkdown\n            style={{ fontSize: fontSizes.sm }}\n            source={content}\n            allowHTML={false}\n          />\n        </StyledTooltipContentWrapper>\n      }\n      placement={PLACEMENT.top}\n      accessibilityType={ACCESSIBILITY_TYPE.tooltip}\n      showArrow={false}\n      popoverMargin={5}\n      onClickOutside={closeTooltip}\n      onEsc={closeTooltip}\n      overrides={{\n        Body: {\n          style: {\n            // This is annoying, but a bunch of warnings get logged when the\n            // shorthand version `borderRadius` is used here since the long\n            // names are used by BaseWeb and mixing the two is apparently\n            // bad :(\n            borderTopLeftRadius: radii.default,\n            borderTopRightRadius: radii.default,\n            borderBottomLeftRadius: radii.default,\n            borderBottomRightRadius: radii.default,\n\n            paddingTop: \"0 !important\",\n            paddingBottom: \"0 !important\",\n            paddingLeft: \"0 !important\",\n            paddingRight: \"0 !important\",\n\n            backgroundColor: \"transparent\",\n          },\n        },\n        Inner: {\n          style: {\n            backgroundColor: hasLightBackgroundColor(theme)\n              ? colors.bgColor\n              : colors.secondaryBg,\n            color: colors.bodyText,\n            fontSize: fontSizes.sm,\n            fontWeight: fontWeights.normal,\n            // See the long comment about `borderRadius`. The same applies here\n            // to `padding`.\n            paddingTop: \"0 !important\",\n            paddingBottom: \"0 !important\",\n            paddingLeft: \"0 !important\",\n            paddingRight: \"0 !important\",\n          },\n        },\n      }}\n      isOpen={open}\n    >\n      <div\n        data-testid=\"stDataFrameTooltipTarget\"\n        style={{\n          // This is an invisible div that's used to position the tooltip.\n          // The position is provided from outside via the `top` and `left` properties.\n          // This a workaround for the fact that BaseWeb's Popover  doesn't support\n          // positioning to a virtual position and always requires a target\n          // component for positioning.\n          position: \"fixed\",\n          top,\n          left,\n        }}\n      ></div>\n    </Popover>\n  )\n}\n\nexport default Tooltip\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport styled from \"@emotion/styled\"\n\nexport interface StyledResizableContainerProps {\n  hasCustomizedScrollbars: boolean\n}\n\n/**\n * A resizable data grid container component.\n */\nexport const StyledResizableContainer =\n  styled.div<StyledResizableContainerProps>(\n    ({ hasCustomizedScrollbars, theme }) => ({\n      position: \"relative\",\n      display: \"inline-block\",\n\n      \"& .stDataFrameGlideDataEditor\": {\n        height: \"100%\",\n        minWidth: \"100%\",\n        borderRadius: theme.radii.default,\n      },\n\n      \"& .dvn-scroller\": {\n        // We only want to configure scrollbar aspects for browsers that\n        // don't support custom scrollbars (e.g. Firefox). Also, applying this\n        // in Chrome causes the scrollbar to change to the default scrollbar style.\n        ...(!hasCustomizedScrollbars && { scrollbarWidth: \"thin\" }),\n        [\"overflowX\" as any]: \"auto !important\",\n        [\"overflowY\" as any]: \"auto !important\",\n      },\n    })\n  )\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { ReactElement, useMemo } from \"react\"\n\nimport {\n  CompactSelection,\n  DataEditorRef,\n  DataEditor as GlideDataEditor,\n  GridCell,\n  Item as GridCellPosition,\n  GridMouseEventArgs,\n  GridSelection,\n} from \"@glideapps/glide-data-grid\"\nimport { Resizable } from \"re-resizable\"\nimport {\n  Add,\n  Close,\n  Delete,\n  FileDownload,\n  Search,\n} from \"@emotion-icons/material-outlined\"\n\nimport { useFormClearHelper } from \"@streamlit/lib/src/components/widgets/Form\"\nimport { withFullScreenWrapper } from \"@streamlit/lib/src/components/shared/FullScreenWrapper\"\nimport { Quiver } from \"@streamlit/lib/src/dataframes/Quiver\"\nimport { Arrow as ArrowProto } from \"@streamlit/lib/src/proto\"\nimport {\n  WidgetInfo,\n  WidgetStateManager,\n} from \"@streamlit/lib/src/WidgetStateManager\"\nimport { debounce, isNullOrUndefined } from \"@streamlit/lib/src/util/utils\"\nimport Toolbar, {\n  ToolbarAction,\n} from \"@streamlit/lib/src/components/shared/Toolbar\"\nimport { LibContext } from \"@streamlit/lib/src/components/core/LibContext\"\nimport { ElementFullscreenContext } from \"@streamlit/lib/src/components/shared/ElementFullscreen/ElementFullscreenContext\"\nimport { useRequiredContext } from \"@streamlit/lib/src/hooks/useRequiredContext\"\n\nimport EditingState, { getColumnName } from \"./EditingState\"\nimport {\n  useColumnLoader,\n  useColumnSizer,\n  useColumnSort,\n  useCustomRenderer,\n  useCustomTheme,\n  useDataEditor,\n  useDataExporter,\n  useDataLoader,\n  useSelectionHandler,\n  useTableSizer,\n  useTooltips,\n} from \"./hooks\"\nimport {\n  BaseColumn,\n  getTextCell,\n  ImageCellEditor,\n  toGlideColumn,\n} from \"./columns\"\nimport Tooltip from \"./Tooltip\"\nimport { StyledResizableContainer } from \"./styled-components\"\n\nimport \"@glideapps/glide-data-grid/dist/index.css\"\nimport \"@glideapps/glide-data-grid-cells/dist/index.css\"\n\n// Debounce time for triggering a widget state update\n// This prevents rapid updates to the widget state.\nconst DEBOUNCE_TIME_MS = 150\n// Number of rows that triggers some optimization features\n// for large tables.\nconst LARGE_TABLE_ROWS_THRESHOLD = 150000\n// The size in px of the customized webkit scrollbar (defined in globalStyles)\nconst WEBKIT_SCROLLBAR_SIZE = 6\n\n// This is the state that is sent to the backend\n// This needs to be the same structure that is also defined\n// in the Python code.\nexport interface DataframeState {\n  selection: {\n    rows: number[]\n    // We use column names instead of indices to make\n    // it easier to use and unify with how data editor edits\n    // are stored.\n    columns: string[]\n  }\n}\n\nexport interface DataFrameProps {\n  element: ArrowProto\n  data: Quiver\n  disabled: boolean\n  widgetMgr: WidgetStateManager\n  disableFullscreenMode?: boolean\n  fragmentId?: string\n  width: number\n  height?: number\n}\n\n/**\n * The main component used by dataframe & data_editor to render an editable table.\n *\n * @param element - The element's proto message\n * @param data - The Arrow data to render (extracted from the proto message)\n * @param disabled - Whether the widget is disabled\n * @param widgetMgr - The widget manager\n */\nfunction DataFrame({\n  element,\n  data,\n  disabled,\n  widgetMgr,\n  disableFullscreenMode,\n  fragmentId,\n}: Readonly<DataFrameProps>): ReactElement {\n  const {\n    expanded: isFullScreen,\n    expand,\n    collapse,\n    width: containerWidth,\n    height: containerHeight,\n  } = useRequiredContext(ElementFullscreenContext)\n\n  const resizableRef = React.useRef<Resizable>(null)\n  const dataEditorRef = React.useRef<DataEditorRef>(null)\n  const resizableContainerRef = React.useRef<HTMLDivElement>(null)\n\n  const gridTheme = useCustomTheme()\n\n  const {\n    libConfig: { enforceDownloadInNewTab = false }, // Default to false, if no libConfig, e.g. for tests\n  } = React.useContext(LibContext)\n\n  const [isFocused, setIsFocused] = React.useState<boolean>(true)\n  const [showSearch, setShowSearch] = React.useState(false)\n  const [hasVerticalScroll, setHasVerticalScroll] =\n    React.useState<boolean>(false)\n  const [hasHorizontalScroll, setHasHorizontalScroll] =\n    React.useState<boolean>(false)\n\n  // Determine if the device is primary using touch as input:\n  const isTouchDevice = React.useMemo<boolean>(\n    () => window.matchMedia && window.matchMedia(\"(pointer: coarse)\").matches,\n    []\n  )\n\n  // Determine if it uses customized scrollbars (webkit browsers):\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/::-webkit-scrollbar#css.selectors.-webkit-scrollbar\n  const hasCustomizedScrollbars = React.useMemo<boolean>(\n    () =>\n      (window.navigator.userAgent.includes(\"Mac OS\") &&\n        window.navigator.userAgent.includes(\"Safari\")) ||\n      window.navigator.userAgent.includes(\"Chrome\"),\n    []\n  )\n\n  // This is done to keep some backwards compatibility\n  // so that old arrow proto messages from the st.dataframe\n  // would still work. Those messages don't have the\n  // editingMode field defined.\n  if (isNullOrUndefined(element.editingMode)) {\n    element.editingMode = ArrowProto.EditingMode.READ_ONLY\n  }\n\n  const { READ_ONLY, DYNAMIC } = ArrowProto.EditingMode\n\n  // Number of rows of the table minus 1 for the header row:\n  const dataDimensions = data.dimensions\n  const originalNumRows = Math.max(0, dataDimensions.dataRows)\n\n  // For empty tables, we show an extra row that\n  // contains \"empty\" as a way to indicate that the table is empty.\n  const isEmptyTable =\n    originalNumRows === 0 &&\n    // We don't show empty state for dynamic mode with a table that has\n    // data columns defined.\n    !(element.editingMode === DYNAMIC && dataDimensions.dataColumns > 0)\n\n  // For large tables, we apply some optimizations to handle large data\n  const isLargeTable = originalNumRows > LARGE_TABLE_ROWS_THRESHOLD\n\n  const editingState = React.useRef<EditingState>(\n    new EditingState(originalNumRows)\n  )\n\n  const [numRows, setNumRows] = React.useState(\n    editingState.current.getNumRows()\n  )\n\n  React.useEffect(() => {\n    editingState.current = new EditingState(originalNumRows)\n    setNumRows(editingState.current.getNumRows())\n  }, [originalNumRows])\n\n  const resetEditingState = React.useCallback(() => {\n    editingState.current = new EditingState(originalNumRows)\n    setNumRows(editingState.current.getNumRows())\n  }, [originalNumRows])\n\n  const { columns: originalColumns } = useColumnLoader(element, data, disabled)\n\n  /**\n   * On the first rendering, try to load initial widget state if\n   * it exists. This is required in the case that other elements\n   * are inserted before this widget. In this case, it can happen\n   * that the dataframe component is unmounted and thereby loses\n   * its state. Once the same element is rendered again, we try to\n   * reconstruct the state from the widget manager values.\n   */\n  React.useEffect(\n    () => {\n      if (element.editingMode === READ_ONLY) {\n        // We don't need to load the initial widget state\n        // for read-only dataframes.\n        return\n      }\n\n      const initialWidgetValue = widgetMgr.getStringValue({\n        id: element.id,\n        formId: element.formId,\n      } as WidgetInfo)\n\n      if (!initialWidgetValue) {\n        // No initial widget value was saved in the widget manager.\n        // No need to reconstruct something.\n        return\n      }\n\n      editingState.current.fromJson(initialWidgetValue, originalColumns)\n      setNumRows(editingState.current.getNumRows())\n    },\n    // We only want to run this effect once during the initial component load\n    // so we disable the eslint rule.\n    // TODO: Update to match React best practices\n    // eslint-disable-next-line react-compiler/react-compiler\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []\n  )\n\n  const { getCellContent: getOriginalCellContent } = useDataLoader(\n    data,\n    originalColumns,\n    numRows,\n    editingState\n  )\n\n  const { columns, sortColumn, getOriginalIndex, getCellContent } =\n    useColumnSort(originalNumRows, originalColumns, getOriginalCellContent)\n\n  /**\n   * This callback is used to synchronize the selection state with the state\n   * of the widget state of the component. This might also send a rerun message\n   * to the backend if the selection state has changed.\n   *\n   * @param newSelection - The new selection state\n   */\n  // The debounce method doesn't allow dependency inspection. Therefore, we\n  // need to disable the eslint rule for exhaustive-deps.\n  // TODO: Update to match React best practices\n  // eslint-disable-next-line react-compiler/react-compiler\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const syncSelectionState = React.useCallback(\n    // Use debounce to prevent rapid updates to the widget state.\n    debounce(DEBOUNCE_TIME_MS, (newSelection: GridSelection) => {\n      // If we want to support selections also with the editable mode,\n      // we would need to integrate the `syncEditState` and `syncSelections` functions\n      // into a single function that updates the widget state with both the editing\n      // state and the selection state.\n\n      const selectionState: DataframeState = {\n        selection: {\n          rows: [] as number[],\n          columns: [] as string[],\n        },\n      }\n\n      selectionState.selection.rows = newSelection.rows.toArray().map(row => {\n        return getOriginalIndex(row)\n      })\n      selectionState.selection.columns = newSelection.columns\n        .toArray()\n        .map(columnIdx => {\n          return getColumnName(columns[columnIdx])\n        })\n      const newWidgetState = JSON.stringify(selectionState)\n      const currentWidgetState = widgetMgr.getStringValue({\n        id: element.id,\n        formId: element.formId,\n      } as WidgetInfo)\n\n      // Only update if there is actually a difference to the previous selection state\n      if (\n        currentWidgetState === undefined ||\n        currentWidgetState !== newWidgetState\n      ) {\n        widgetMgr.setStringValue(\n          {\n            id: element.id,\n            formId: element.formId,\n          } as WidgetInfo,\n          newWidgetState,\n          {\n            fromUi: true,\n          },\n          fragmentId\n        )\n      }\n    }),\n    [\n      element.id,\n      element.formId,\n      widgetMgr,\n      fragmentId,\n      getOriginalIndex,\n      getColumnName,\n    ]\n  )\n\n  const {\n    gridSelection,\n    isRowSelectionActivated,\n    isMultiRowSelectionActivated,\n    isColumnSelectionActivated,\n    isMultiColumnSelectionActivated,\n    isRowSelected,\n    isColumnSelected,\n    isCellSelected,\n    clearSelection,\n    processSelectionChange,\n  } = useSelectionHandler(\n    element,\n    isEmptyTable,\n    disabled,\n    columns,\n    syncSelectionState\n  )\n\n  React.useEffect(() => {\n    // Clear cell selections if fullscreen mode changes\n    // but keep row & column selections.\n    // In the past we saw some weird side-effects, so we decided to clean\n    // it when entering fullscreen-mode. If we decide to change this, we have\n    // to play around and get to the bottom of it.\n    clearSelection(true, true)\n    // Only run this on changes to the fullscreen mode:\n    // TODO: Update to match React best practices\n    // eslint-disable-next-line react-compiler/react-compiler\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isFullScreen])\n\n  // This callback is used to refresh the rendering of specified cells\n  const refreshCells = React.useCallback(\n    (\n      cells: {\n        cell: GridCellPosition\n      }[]\n    ) => {\n      dataEditorRef.current?.updateCells(cells)\n    },\n    []\n  )\n\n  /**\n   * On the first rendering, try to load initial selection state\n   * from the widget state if it exists. This is required in the\n   * case that other elements are inserted before this widget.\n   *\n   * This effect needs to run after the fullscreen effect that\n   * clears cell selections, since both modify the same state object.\n   */\n  React.useEffect(\n    () => {\n      if (!isRowSelectionActivated && !isColumnSelectionActivated) {\n        // Only run this if selections are activated.\n        return\n      }\n\n      const initialWidgetValue = widgetMgr.getStringValue({\n        id: element.id,\n        formId: element.formId,\n      } as WidgetInfo)\n\n      if (initialWidgetValue) {\n        const columnNames: string[] = columns.map(column => {\n          return getColumnName(column)\n        })\n\n        const selectionState: DataframeState = JSON.parse(initialWidgetValue)\n\n        let rowSelection = CompactSelection.empty()\n        let columnSelection = CompactSelection.empty()\n\n        selectionState.selection?.rows?.forEach(row => {\n          rowSelection = rowSelection.add(row)\n        })\n\n        selectionState.selection?.columns?.forEach(column => {\n          columnSelection = columnSelection.add(columnNames.indexOf(column))\n        })\n\n        if (rowSelection.length > 0 || columnSelection.length > 0) {\n          // Update the initial selection state if something was selected\n          const initialSelection: GridSelection = {\n            rows: rowSelection,\n            columns: columnSelection,\n            current: undefined,\n          }\n          processSelectionChange(initialSelection)\n        }\n      }\n    },\n    // We only want to run this effect once during the initial component load\n    // so we disable the eslint rule.\n    // TODO: Update to match React best practices\n    // eslint-disable-next-line react-compiler/react-compiler\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []\n  )\n\n  /**\n   * This callback is used to update the number of rows based\n   * on the latest editing state. This is required to keep the\n   * component state in sync with the editing state.\n   */\n  const updateNumRows = React.useCallback(() => {\n    if (numRows !== editingState.current.getNumRows()) {\n      // Reset the number of rows if it has been changed in the editing state\n      setNumRows(editingState.current.getNumRows())\n    }\n  }, [numRows])\n\n  /**\n   * This callback is used to synchronize the editing state with\n   * the widget state of the component. This might also send a rerun message\n   * to the backend if the editing state has changed.\n   */\n  // The debounce method doesn't allow dependency inspection. Therefore, we\n  // need to disable the eslint rule for exhaustive-deps.\n  // TODO: Update to match React best practices\n  // eslint-disable-next-line react-compiler/react-compiler\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const syncEditState = React.useCallback(\n    // Use debounce to prevent rapid updates to the widget state.\n    debounce(DEBOUNCE_TIME_MS, () => {\n      const currentEditingState = editingState.current.toJson(columns)\n      let currentWidgetState = widgetMgr.getStringValue({\n        id: element.id,\n        formId: element.formId,\n      } as WidgetInfo)\n\n      if (currentWidgetState === undefined) {\n        // Create an empty widget state\n        currentWidgetState = new EditingState(0).toJson([])\n      }\n\n      // Only update if there is actually a difference between editing and widget state\n      if (currentEditingState !== currentWidgetState) {\n        widgetMgr.setStringValue(\n          {\n            id: element.id,\n            formId: element.formId,\n          } as WidgetInfo,\n          currentEditingState,\n          {\n            fromUi: true,\n          },\n          fragmentId\n        )\n      }\n    }),\n    [\n      element.id,\n      element.formId,\n      widgetMgr,\n      fragmentId,\n      columns,\n      editingState.current,\n    ]\n  )\n\n  const { exportToCsv } = useDataExporter(\n    getCellContent,\n    columns,\n    numRows,\n    enforceDownloadInNewTab\n  )\n\n  const { onCellEdited, onPaste, onRowAppended, onDelete, validateCell } =\n    useDataEditor(\n      columns,\n      element.editingMode !== DYNAMIC,\n      editingState,\n      getCellContent,\n      getOriginalIndex,\n      refreshCells,\n      updateNumRows,\n      syncEditState,\n      clearSelection\n    )\n\n  const { tooltip, clearTooltip, onItemHovered } = useTooltips(\n    columns,\n    getCellContent\n  )\n\n  const { drawCell, customRenderers } = useCustomRenderer(columns)\n\n  const transformedColumns = React.useMemo(\n    () => columns.map(column => toGlideColumn(column)),\n    [columns]\n  )\n  const { columns: glideColumns, onColumnResize } =\n    useColumnSizer(transformedColumns)\n\n  // data.columns refers to the header rows, and\n  // not the data columns. Not sure why it is named this way.\n  // To activate the group row feature, we need at least two header rows.\n  const usesGroupRow = data.columns.length > 1\n  const {\n    minHeight,\n    maxHeight,\n    minWidth,\n    maxWidth,\n    rowHeight,\n    resizableSize,\n    setResizableSize,\n  } = useTableSizer(\n    element,\n    gridTheme,\n    numRows,\n    usesGroupRow,\n    containerWidth,\n    containerHeight,\n    isFullScreen\n  )\n\n  // This is used as fallback in case the table is empty to\n  // insert cells indicating this state:\n  const getEmptyStateContent = React.useCallback(\n    ([_col, _row]: readonly [number, number]): GridCell => {\n      return {\n        ...getTextCell(true, false),\n        displayData: \"empty\",\n        contentAlign: \"center\",\n        allowOverlay: false,\n        themeOverride: {\n          textDark: gridTheme.glideTheme.textLight,\n        },\n        span: [0, Math.max(columns.length - 1, 0)],\n      } as GridCell\n    },\n    [columns, gridTheme.glideTheme.textLight]\n  )\n\n  const onFormCleared = React.useCallback(() => {\n    // Clear the editing state and the selection state\n    resetEditingState()\n    clearSelection()\n  }, [resetEditingState, clearSelection])\n\n  useFormClearHelper({ element, widgetMgr, onFormCleared })\n\n  const isDynamicAndEditable =\n    !isEmptyTable && element.editingMode === DYNAMIC && !disabled\n\n  // This is a simple heuristic to prevent the pinned columns\n  // from taking up too much space and prevent horizontal scrolling.\n  // Since its not easy to determine the current width of auto-sized columns,\n  // we just use 2x of the min column width as a fallback.\n  // The combined width of all pinned columns should not exceed 60%\n  // of the container width.\n  const isPinnedColumnsWidthTooLarge = useMemo(() => {\n    return (\n      columns\n        .filter((col: BaseColumn) => col.isPinned)\n        .reduce(\n          (acc, col) => acc + (col.width ?? gridTheme.minColumnWidth * 2),\n          0\n        ) >\n      containerWidth * 0.6\n    )\n  }, [columns, containerWidth, gridTheme.minColumnWidth])\n\n  // All pinned columns are expected to be moved to the beginning\n  // in useColumnLoader. So we can just count all pinned columns here.\n  const freezeColumns =\n    isEmptyTable || isPinnedColumnsWidthTooLarge\n      ? 0\n      : columns.filter((col: BaseColumn) => col.isPinned).length\n\n  // Determine if the table requires horizontal or vertical scrolling:\n  React.useEffect(() => {\n    // The setTimeout is a workaround to get the scroll area bounding box\n    // after the grid has been rendered. Otherwise, the scroll area div\n    // (dvn-stack) might not have been created yet.\n    setTimeout(() => {\n      if (resizableContainerRef.current && dataEditorRef.current) {\n        // Get the bounds of the glide-data-grid scroll area (dvn-stack):\n        const scrollAreaBounds = resizableContainerRef.current\n          ?.querySelector(\".dvn-stack\")\n          ?.getBoundingClientRect()\n\n        // We might also be able to use the following as an alternative,\n        // but it seems to cause \"Maximum update depth exceeded\" when scrollbars\n        // are activated or deactivated.\n        // const scrollAreaBounds = dataEditorRef.current?.getBounds()\n        // Also see: https://github.com/glideapps/glide-data-grid/issues/784\n        if (scrollAreaBounds) {\n          setHasVerticalScroll(\n            scrollAreaBounds.height >\n              resizableContainerRef.current.clientHeight\n          )\n          setHasHorizontalScroll(\n            scrollAreaBounds.width > resizableContainerRef.current.clientWidth\n          )\n        }\n      }\n    }, 1)\n  }, [resizableSize, numRows, glideColumns])\n\n  return (\n    <StyledResizableContainer\n      className=\"stDataFrame\"\n      data-testid=\"stDataFrame\"\n      hasCustomizedScrollbars={hasCustomizedScrollbars}\n      ref={resizableContainerRef}\n      onMouseDown={e => {\n        if (resizableContainerRef.current && hasCustomizedScrollbars) {\n          // Prevent clicks on the scrollbar handle to propagate to the grid:\n          const boundingClient =\n            resizableContainerRef.current.getBoundingClientRect()\n\n          if (\n            // For whatever reason, we are still able to use the scrollbars even\n            // if the mouse is one pixel outside of the scrollbar. Therefore, we add\n            // an additional pixel.\n            hasHorizontalScroll &&\n            boundingClient.height - (WEBKIT_SCROLLBAR_SIZE + 1) <\n              e.clientY - boundingClient.top\n          ) {\n            e.stopPropagation()\n          }\n          if (\n            hasVerticalScroll &&\n            boundingClient.width - (WEBKIT_SCROLLBAR_SIZE + 1) <\n              e.clientX - boundingClient.left\n          ) {\n            e.stopPropagation()\n          }\n        }\n      }}\n      onBlur={event => {\n        // If the container loses focus, clear the current selection.\n        // Touch screen devices have issues with this, so we don't clear\n        // the selection on those devices.\n        // We also don't want to clear the selection if the user clicks on\n        // on the toolbar by checking that relatedTarget is not a children of\n        // this element. Unfortunately, this check isn't working reliably in Safari.\n        if (\n          !isFocused &&\n          !isTouchDevice &&\n          !event.currentTarget.contains(\n            event.relatedTarget as HTMLElement | null\n          )\n        ) {\n          // Clear cell selections, but keep row & column selections.\n          clearSelection(true, true)\n        }\n      }}\n    >\n      <Toolbar\n        isFullScreen={isFullScreen}\n        disableFullscreenMode={disableFullscreenMode}\n        // Lock the toolbar in some specific situations:\n        locked={\n          (isRowSelected && !isRowSelectionActivated) ||\n          isCellSelected ||\n          (isTouchDevice && isFocused)\n        }\n        onExpand={expand}\n        onCollapse={collapse}\n        target={StyledResizableContainer}\n      >\n        {((isRowSelectionActivated && isRowSelected) ||\n          (isColumnSelectionActivated && isColumnSelected)) && (\n          // Add clear selection action if selections are active\n          // and a valid selections currently exists. Cell selections\n          // are not relevant since they are not synced to the backend\n          // at the moment.\n          <ToolbarAction\n            label=\"Clear selection\"\n            icon={Close}\n            onClick={() => {\n              clearSelection()\n              clearTooltip()\n            }}\n          />\n        )}\n        {isDynamicAndEditable && isRowSelected && (\n          <ToolbarAction\n            label=\"Delete row(s)\"\n            icon={Delete}\n            onClick={() => {\n              if (onDelete) {\n                onDelete(gridSelection)\n                clearTooltip()\n              }\n            }}\n          />\n        )}\n        {isDynamicAndEditable && !isRowSelected && (\n          <ToolbarAction\n            label=\"Add row\"\n            icon={Add}\n            onClick={() => {\n              if (onRowAppended) {\n                setIsFocused(true)\n                onRowAppended()\n                clearTooltip()\n              }\n            }}\n          />\n        )}\n        {!isLargeTable && !isEmptyTable && (\n          <ToolbarAction\n            label=\"Download as CSV\"\n            icon={FileDownload}\n            onClick={() => exportToCsv()}\n          />\n        )}\n        {!isEmptyTable && (\n          <ToolbarAction\n            label=\"Search\"\n            icon={Search}\n            onClick={() => {\n              if (!showSearch) {\n                setIsFocused(true)\n                setShowSearch(true)\n              } else {\n                setShowSearch(false)\n              }\n              clearTooltip()\n            }}\n          />\n        )}\n      </Toolbar>\n      <Resizable\n        data-testid=\"stDataFrameResizable\"\n        ref={resizableRef}\n        defaultSize={resizableSize}\n        style={{\n          border: `${gridTheme.tableBorderWidth}px solid ${gridTheme.glideTheme.borderColor}`,\n          borderRadius: `${gridTheme.tableBorderRadius}`,\n        }}\n        minHeight={minHeight}\n        maxHeight={maxHeight}\n        minWidth={minWidth}\n        maxWidth={maxWidth}\n        size={resizableSize}\n        enable={{\n          top: false,\n          right: false,\n          bottom: false,\n          left: false,\n          topRight: false,\n          bottomRight: true,\n          bottomLeft: false,\n          topLeft: false,\n        }}\n        grid={[1, rowHeight]}\n        snapGap={rowHeight / 3}\n        onResizeStop={(_event, _direction, _ref, _delta) => {\n          if (resizableRef.current) {\n            const borderThreshold = 2 * gridTheme.tableBorderWidth\n            setResizableSize({\n              width: resizableRef.current.size.width,\n              height:\n                // Add additional pixels if it is stretched to full width\n                // to allow the full cell border to be visible\n                maxHeight - resizableRef.current.size.height ===\n                borderThreshold\n                  ? resizableRef.current.size.height + borderThreshold\n                  : resizableRef.current.size.height,\n            })\n          }\n        }}\n      >\n        <GlideDataEditor\n          // The className is used in styled components:\n          className=\"stDataFrameGlideDataEditor\"\n          data-testid=\"stDataFrameGlideDataEditor\"\n          ref={dataEditorRef}\n          columns={glideColumns}\n          rows={isEmptyTable ? 1 : numRows}\n          minColumnWidth={gridTheme.minColumnWidth}\n          maxColumnWidth={gridTheme.maxColumnWidth}\n          maxColumnAutoWidth={gridTheme.maxColumnAutoWidth}\n          rowHeight={rowHeight}\n          headerHeight={gridTheme.defaultHeaderHeight}\n          getCellContent={isEmptyTable ? getEmptyStateContent : getCellContent}\n          onColumnResize={isTouchDevice ? undefined : onColumnResize}\n          // Configure resize indicator to only show on the header:\n          resizeIndicator={\"header\"}\n          // Freeze all index columns:\n          freezeColumns={freezeColumns}\n          smoothScrollX={true}\n          smoothScrollY={true}\n          // Show borders between cells:\n          verticalBorder={true}\n          // Activate copy to clipboard functionality:\n          getCellsForSelection={true}\n          // Deactivate row markers and numbers:\n          rowMarkers={\"none\"}\n          // Deactivate selections:\n          rangeSelect={isTouchDevice ? \"cell\" : \"rect\"}\n          columnSelect={\"none\"}\n          rowSelect={\"none\"}\n          // Enable tooltips on hover of a cell or column header:\n          onItemHovered={onItemHovered}\n          // Activate keybindings:\n          keybindings={{ downFill: true }}\n          // Search needs to be activated manually, to support search\n          // via the toolbar:\n          onKeyDown={event => {\n            if ((event.ctrlKey || event.metaKey) && event.key === \"f\") {\n              setShowSearch(cv => !cv)\n              event.stopPropagation()\n              event.preventDefault()\n            }\n          }}\n          showSearch={showSearch}\n          onSearchClose={() => {\n            setShowSearch(false)\n            clearTooltip()\n          }}\n          // Header click is used for column sorting:\n          onHeaderClicked={(colIndex: number, _event) => {\n            if (isEmptyTable || isLargeTable || isColumnSelectionActivated) {\n              // Deactivate sorting for empty state, for large dataframes, or\n              // when column selection is activated.\n              return\n            }\n\n            if (isRowSelectionActivated && isRowSelected) {\n              // Keeping row selections when sorting columns is not supported at the moment.\n              // So we need to clear the selection before we do the sorting.\n              // The reason is that the user would expect the selection to be kept on\n              // the same row after sorting, hover that would require us to map the selection\n              // to the new index of the selected row which adds complexity.\n              clearSelection()\n            }\n            sortColumn(colIndex)\n          }}\n          gridSelection={gridSelection}\n          // We don't have to react to \"onSelectionCleared\" since\n          // we already correctly process selections in\n          // the \"onGridSelectionChange\" callback.\n          onGridSelectionChange={(newSelection: GridSelection) => {\n            // Only allow selection changes if the grid is focused.\n            // This is mainly done because there is a bug when overlay click actions\n            // are outside of the bounds of the table (e.g. select dropdown or date picker).\n            // This results in the first cell being selected for a short period of time\n            // But for touch devices, preventing this can cause issues to select cells.\n            // So we allow selection changes for touch devices even when it is not focused.\n            if (isFocused || isTouchDevice) {\n              processSelectionChange(newSelection)\n              if (tooltip !== undefined) {\n                // Remove the tooltip on every grid selection change:\n                clearTooltip()\n              }\n            }\n          }}\n          theme={gridTheme.glideTheme}\n          onMouseMove={(args: GridMouseEventArgs) => {\n            // Determine if the dataframe is focused or not\n            if (args.kind === \"out-of-bounds\" && isFocused) {\n              setIsFocused(false)\n            } else if (args.kind !== \"out-of-bounds\" && !isFocused) {\n              setIsFocused(true)\n            }\n          }}\n          // Add shadow for index columns and header on scroll:\n          fixedShadowX={true}\n          fixedShadowY={true}\n          experimental={{\n            // We use overflow scrollbars, so we need to deactivate the native\n            // scrollbar override:\n            scrollbarWidthOverride: 0,\n            ...(hasCustomizedScrollbars && {\n              // Add negative padding to the right and bottom to allow the scrollbars in\n              // webkit to overlay the table:\n              paddingBottom: hasHorizontalScroll\n                ? -WEBKIT_SCROLLBAR_SIZE\n                : undefined,\n              paddingRight: hasVerticalScroll\n                ? -WEBKIT_SCROLLBAR_SIZE\n                : undefined,\n            }),\n          }}\n          // Apply custom rendering (e.g. for missing or required cells):\n          drawCell={drawCell}\n          // Add support for additional cells:\n          customRenderers={customRenderers}\n          // Custom image editor to render single images:\n          imageEditorOverride={ImageCellEditor}\n          // Add our custom SVG header icons:\n          headerIcons={gridTheme.headerIcons}\n          // Add support for user input validation:\n          validateCell={validateCell}\n          // The default setup is read only, and therefore we deactivate paste here:\n          onPaste={false}\n          // Activate features required for row selection:\n          {...(isRowSelectionActivated && {\n            rowMarkers: {\n              // Apply style settings for the row markers column:\n              kind: \"checkbox\",\n              checkboxStyle: \"square\",\n              theme: {\n                bgCell: gridTheme.glideTheme.bgHeader,\n                bgCellMedium: gridTheme.glideTheme.bgHeader,\n              },\n            },\n            rowSelectionMode: isMultiRowSelectionActivated ? \"multi\" : \"auto\",\n            rowSelect: disabled\n              ? \"none\"\n              : isMultiRowSelectionActivated\n              ? \"multi\"\n              : \"single\",\n            rowSelectionBlending: \"mixed\",\n            // Deactivate the combination of row selections\n            // and cell selections. This will automatically clear\n            // selected cells when a row is selected.\n            // We are doing this to prevent some issues with drag\n            // and drop selection.\n            rangeSelectionBlending: \"exclusive\",\n          })}\n          // Activate features required for column selection:\n          {...(isColumnSelectionActivated && {\n            columnSelect: disabled\n              ? \"none\"\n              : isMultiColumnSelectionActivated\n              ? \"multi\"\n              : \"single\",\n            columnSelectionBlending: \"mixed\",\n            // Deactivate the combination of column selections\n            // and cell selections. This will automatically clear\n            // selected cells when a column is selected.\n            // We are doing this to prevent some issues with drag\n            // and drop selection.\n            rangeSelectionBlending: \"exclusive\",\n          })}\n          // If element is editable, enable editing features:\n          {...(!isEmptyTable &&\n            element.editingMode !== READ_ONLY &&\n            !disabled && {\n              // Support fill handle for bulk editing:\n              fillHandle: !isTouchDevice,\n              // Support editing:\n              onCellEdited,\n              // Support pasting data for bulk editing:\n              onPaste,\n              // Support deleting cells & rows:\n              onDelete,\n            })}\n          // If element is dynamic, enable adding & deleting rows:\n          {...(!isEmptyTable &&\n            element.editingMode === DYNAMIC && {\n              // Support adding rows:\n              trailingRowOptions: {\n                sticky: false,\n                tint: true,\n              },\n              rowMarkers: {\n                kind: \"checkbox\",\n                checkboxStyle: \"square\",\n                theme: {\n                  bgCell: gridTheme.glideTheme.bgHeader,\n                  bgCellMedium: gridTheme.glideTheme.bgHeader,\n                },\n              },\n              rowSelectionMode: \"multi\",\n              rowSelect: disabled ? \"none\" : \"multi\",\n              // Support adding rows:\n              onRowAppended: disabled ? undefined : onRowAppended,\n              // Deactivate sorting, since it is not supported with dynamic editing:\n              onHeaderClicked: undefined,\n            })}\n        />\n      </Resizable>\n      {tooltip && tooltip.content && (\n        <Tooltip\n          top={tooltip.top}\n          left={tooltip.left}\n          content={tooltip.content}\n          clearTooltip={clearTooltip}\n        ></Tooltip>\n      )}\n    </StyledResizableContainer>\n  )\n}\n\nexport default withFullScreenWrapper(DataFrame)\n"],"file":"static/js/index.Cx96tybK.js"}