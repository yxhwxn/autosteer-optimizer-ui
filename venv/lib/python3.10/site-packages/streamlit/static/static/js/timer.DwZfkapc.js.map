{"version":3,"file":"timer.DwZfkapc.js","sources":["../../../../node_modules/d3-interpolate/src/transform/decompose.js","../../../../node_modules/d3-interpolate/src/transform/parse.js","../../../../node_modules/d3-interpolate/src/transform/index.js","../../../../node_modules/d3-timer/src/timer.js"],"sourcesContent":["var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n","import decompose, {identity} from \"./decompose.js\";\n\nvar svgNode;\n\n/* eslint-disable no-undef */\nexport function parseCss(value) {\n  const m = new (typeof DOMMatrix === \"function\" ? DOMMatrix : WebKitCSSMatrix)(value + \"\");\n  return m.isIdentity ? identity : decompose(m.a, m.b, m.c, m.d, m.e, m.f);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n","import number from \"../number.js\";\nimport {parseCss, parseSvg} from \"./parse.js\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend we’ve set an alarm, if we haven’t already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(undefined, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n"],"names":["degrees","identity","decompose","a","b","c","d","e","f","scaleX","scaleY","skewX","svgNode","parseCss","value","m","parseSvg","interpolateTransform","parse","pxComma","pxParen","degParen","pop","s","translate","xa","ya","xb","yb","q","i","number","rotate","scale","t","n","o","interpolateTransformCss","interpolateTransformSvg","frame","timeout","interval","pokeDelay","taskHead","taskTail","clockLast","clockNow","clockSkew","clock","setFrame","now","clearNow","Timer","timer","callback","delay","time","sleep","timerFlush","wake","nap","poke","t0","t1","t2"],"mappings":"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","x_google_ignoreList":[0,1,2,3]}